(window.webpackJsonp = window.webpackJsonp || []).push([[3], { "127": function (e, t, A) { "use strict"; (function (e) { var r = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) { return typeof e } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e }, i = t; function merge(e, t, A) { for (var r = Object.keys(t), i = 0; i < r.length; ++i)void 0 !== e[r[i]] && A || (e[r[i]] = t[r[i]]); return e } function newError(e) { function CustomError(e, t) { if (!(this instanceof CustomError)) return new CustomError(e, t); Object.defineProperty(this, "message", { "get": function get() { return e } }), Error.captureStackTrace ? Error.captureStackTrace(this, CustomError) : Object.defineProperty(this, "stack", { "value": (new Error).stack || "" }), t && merge(this, t) } return (CustomError.prototype = Object.create(Error.prototype)).constructor = CustomError, Object.defineProperty(CustomError.prototype, "name", { "get": function get() { return e } }), CustomError.prototype.toString = function toString() { return this.name + ": " + this.message }, CustomError } i.asPromise = A(245), i.base64 = A(246), i.EventEmitter = A(247), i.float = A(248), i.inquire = A(249), i.utf8 = A(250), i.pool = A(251), i.LongBits = A(252), i.isNode = Boolean(void 0 !== e && e && e.process && e.process.versions && e.process.versions.node), i.global = i.isNode && e || "undefined" != typeof window && window || "undefined" != typeof self && self || this, i.emptyArray = Object.freeze ? Object.freeze([]) : [], i.emptyObject = Object.freeze ? Object.freeze({}) : {}, i.isInteger = Number.isInteger || function isInteger(e) { return "number" == typeof e && isFinite(e) && Math.floor(e) === e }, i.isString = function isString(e) { return "string" == typeof e || e instanceof String }, i.isObject = function isObject(e) { return e && "object" === (void 0 === e ? "undefined" : r(e)) }, i.isset = i.isSet = function isSet(e, t) { var A = e[t]; return !(null == A || !e.hasOwnProperty(t)) && ("object" !== (void 0 === A ? "undefined" : r(A)) || (Array.isArray(A) ? A.length : Object.keys(A).length) > 0) }, i.Buffer = function () { try { var e = i.inquire("buffer").Buffer; return e.prototype.utf8Write ? e : null } catch (e) { return null } }(), i._Buffer_from = null, i._Buffer_allocUnsafe = null, i.newBuffer = function newBuffer(e) { return "number" == typeof e ? i.Buffer ? i._Buffer_allocUnsafe(e) : new i.Array(e) : i.Buffer ? i._Buffer_from(e) : "undefined" == typeof Uint8Array ? e : new Uint8Array(e) }, i.Array = "undefined" != typeof Uint8Array ? Uint8Array : Array, i.Long = i.global.dcodeIO && i.global.dcodeIO.Long || i.global.Long || i.inquire("long"), i.key2Re = /^true|false|0|1$/, i.key32Re = /^-?(?:0|[1-9][0-9]*)$/, i.key64Re = /^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/, i.longToHash = function longToHash(e) { return e ? i.LongBits.from(e).toHash() : i.LongBits.zeroHash }, i.longFromHash = function longFromHash(e, t) { var A = i.LongBits.fromHash(e); return i.Long ? i.Long.fromBits(A.lo, A.hi, t) : A.toNumber(Boolean(t)) }, i.merge = merge, i.lcFirst = function lcFirst(e) { return e.charAt(0).toLowerCase() + e.substring(1) }, i.newError = newError, i.ProtocolError = newError("ProtocolError"), i.oneOfGetter = function getOneOf(e) { for (var t = {}, A = 0; A < e.length; ++A)t[e[A]] = 1; return function () { for (var e = Object.keys(this), A = e.length - 1; A > -1; --A)if (1 === t[e[A]] && void 0 !== this[e[A]] && null !== this[e[A]]) return e[A] } }, i.oneOfSetter = function setOneOf(e) { return function (t) { for (var A = 0; A < e.length; ++A)e[A] !== t && delete this[e[A]] } }, i.toJSONOptions = { "longs": String, "enums": String, "bytes": String, "json": !0 }, i._configure = function () { var e = i.Buffer; e ? (i._Buffer_from = e.from !== Uint8Array.from && e.from || function Buffer_from(t, A) { return new e(t, A) }, i._Buffer_allocUnsafe = e.allocUnsafe || function Buffer_allocUnsafe(t) { return new e(t) }) : i._Buffer_from = i._Buffer_allocUnsafe = null } }).call(this, A(13)) }, "129": function (e, t, A) { }, "154": function (e, t, A) { (function (e) { var o, s, a, c, u = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) { return typeof e } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e }; "undefined" != typeof self && self, c = function (e, t) { return A = [function (e, t, r) { "use strict"; var i, o, n = (r = r(7)).Reader, s = r.Writer, a = r.util, c = r.roots.default || (r.roots.default = {}); function u(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function l(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function h(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function p(e) { if (this.stream_info = [], this.stream_mix_info = [], this.trans_seqs = [], e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function d(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function _(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function f(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function g(e) { if (this.trans_seq_array = [], e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function m(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function y(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function v(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function b(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function E(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function O(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function S(e) { if (this.redirect_server = [], e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function T(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function k(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function R(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function C(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function w(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function N(e) { if (this.messages = [], e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function I(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function M(e) { if (this.messages = [], e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function L(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function P(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function A(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function D(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function H(e) { if (this.trans_seqs = [], this.user_trans_seqs = [], e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function U(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function j(e) { if (this.trans_seq_array = [], e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function x(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function B(e) { if (this.user_basic_list = [], e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function q(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function G(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function z(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function V(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function F(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function Z(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function K(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function W(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function Y(e) { if (this.stream_info = [], this.stream_mix_info = [], e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function X(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function J(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function Q(e) { if (this.dst_userlist = [], e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function $(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function ee(e) { if (this.dst_userlist = [], e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function te(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function ne(e) { if (this.dst_userlist = [], e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function re(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function oe(e) { if (this.dst_userlist = [], e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function ie(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function se(e) { if (this.dst_userlist = [], e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function ae(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function ce(e) { if (this.dst_userlist = [], e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function ue(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function le(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function he(e) { if (this.msg_data = [], e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function pe(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function de(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function _e(e) { if (this.stream_info = [], this.stream_mix_info = [], this.trans_seqs = [], e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function fe(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function ge(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function me(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function ye(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function ve(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function be(e) { if (this.room_list = [], e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function Ee(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function Oe(e) { if (this.stream_list = [], e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function Se(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function Te(e) { if (this.trans_seq_array = [], e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function ke(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function Re(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function Ce(e) { if (this.fetch_array = [], e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function we(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function Ne(e) { if (this.trans_fetch_results = [], e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function Ie(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function Me(e) { if (this.fetch_array = [], e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function Le(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function Pe(e) { if (this.trans_fetch_results = [], e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function Ae(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function De(e) { if (this.msgs = [], e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function He(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function Ue(e) { if (this.msgs = [], e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function je(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function xe(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function Be(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function qe(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function Ge(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function ze(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function Ve(e) { if (this.user_list = [], e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function Fe(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function Ze(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function Ke(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function We(e) { if (this.stream_id_list = [], e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function Ye(e) { if (this.stream_info = [], e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function Xe(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function Je(e) { if (this.msg_data = [], e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function Qe(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function $e(e) { if (this.msg_data = [], e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function et(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function tt(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function nt(e) { if (this.trans_array = [], e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function rt(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } c.proto_switch = ((r = {}).CommonRsp = (u.prototype.rsp_head = null, u.create = function (e) { return new u(e) }, u.encode = function (e, t) { return t = t || s.create(), null != e.rsp_head && Object.hasOwnProperty.call(e, "rsp_head") && c.proto_switch.RspHead.encode(e.rsp_head, t.uint32(10).fork()).ldelim(), t }, u.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.proto_switch.CommonRsp; e.pos < A;) { var i = e.uint32(); i >>> 3 == 1 ? r.rsp_head = c.proto_switch.RspHead.decode(e, e.uint32()) : e.skipType(7 & i) } return r }, u), r.RspHead = (l.prototype.code = 0, l.prototype.message = "", l.create = function (e) { return new l(e) }, l.encode = function (e, t) { return t = t || s.create(), null != e.code && Object.hasOwnProperty.call(e, "code") && t.uint32(8).uint32(e.code), null != e.message && Object.hasOwnProperty.call(e, "message") && t.uint32(18).string(e.message), t }, l.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.proto_switch.RspHead; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.code = e.uint32(); break; case 2: r.message = e.string(); break; default: e.skipType(7 & i) } } return r }, l), r.LoginRoomReq = (h.prototype.app_id = 0, h.prototype.id_name = a.newBuffer([]), h.prototype.device_id = "", h.prototype.term_type = 0, h.prototype.net_type = 0, h.prototype.sdk_ver = 0, h.prototype.proto_ver = 0, h.prototype.nick_name = a.newBuffer([]), h.prototype.client_stamp = a.newBuffer([]), h.prototype.crypt_version = 0, h.prototype.k1_sign = a.newBuffer([]), h.prototype.login_token = a.newBuffer([]), h.prototype.relogin_token = a.newBuffer([]), h.prototype.role = 0, h.prototype.liveroom_session_id = a.Long ? a.Long.fromBits(0, 0, !0) : 0, h.prototype.room_id = a.newBuffer([]), h.prototype.room_name = a.newBuffer([]), h.prototype.biz_type = 0, h.prototype.room_create_flag = 0, h.prototype.user_state_flag = 0, h.prototype.lv_key = "", h.prototype.third_token = a.newBuffer([]), h.prototype.cluster_req = 0, h.prototype.user_count_limit = 0, h.prototype.relate_service = "", h.prototype.biz_version = "", h.prototype.login_logic = 0, h.prototype.sdk_conn_type = 0, h.create = function (e) { return new h(e) }, h.encode = function (e, t) { return t = t || s.create(), null != e.app_id && Object.hasOwnProperty.call(e, "app_id") && t.uint32(8).uint32(e.app_id), null != e.id_name && Object.hasOwnProperty.call(e, "id_name") && t.uint32(18).bytes(e.id_name), null != e.device_id && Object.hasOwnProperty.call(e, "device_id") && t.uint32(26).string(e.device_id), null != e.term_type && Object.hasOwnProperty.call(e, "term_type") && t.uint32(32).int32(e.term_type), null != e.net_type && Object.hasOwnProperty.call(e, "net_type") && t.uint32(40).int32(e.net_type), null != e.sdk_ver && Object.hasOwnProperty.call(e, "sdk_ver") && t.uint32(48).uint32(e.sdk_ver), null != e.proto_ver && Object.hasOwnProperty.call(e, "proto_ver") && t.uint32(56).int32(e.proto_ver), null != e.nick_name && Object.hasOwnProperty.call(e, "nick_name") && t.uint32(66).bytes(e.nick_name), null != e.client_stamp && Object.hasOwnProperty.call(e, "client_stamp") && t.uint32(74).bytes(e.client_stamp), null != e.crypt_version && Object.hasOwnProperty.call(e, "crypt_version") && t.uint32(80).uint32(e.crypt_version), null != e.k1_sign && Object.hasOwnProperty.call(e, "k1_sign") && t.uint32(90).bytes(e.k1_sign), null != e.login_token && Object.hasOwnProperty.call(e, "login_token") && t.uint32(98).bytes(e.login_token), null != e.relogin_token && Object.hasOwnProperty.call(e, "relogin_token") && t.uint32(106).bytes(e.relogin_token), null != e.role && Object.hasOwnProperty.call(e, "role") && t.uint32(112).uint32(e.role), null != e.liveroom_session_id && Object.hasOwnProperty.call(e, "liveroom_session_id") && t.uint32(120).uint64(e.liveroom_session_id), null != e.room_id && Object.hasOwnProperty.call(e, "room_id") && t.uint32(130).bytes(e.room_id), null != e.room_name && Object.hasOwnProperty.call(e, "room_name") && t.uint32(138).bytes(e.room_name), null != e.biz_type && Object.hasOwnProperty.call(e, "biz_type") && t.uint32(144).uint32(e.biz_type), null != e.room_create_flag && Object.hasOwnProperty.call(e, "room_create_flag") && t.uint32(152).uint32(e.room_create_flag), null != e.user_state_flag && Object.hasOwnProperty.call(e, "user_state_flag") && t.uint32(160).uint32(e.user_state_flag), null != e.lv_key && Object.hasOwnProperty.call(e, "lv_key") && t.uint32(170).string(e.lv_key), null != e.third_token && Object.hasOwnProperty.call(e, "third_token") && t.uint32(178).bytes(e.third_token), null != e.cluster_req && Object.hasOwnProperty.call(e, "cluster_req") && t.uint32(184).uint32(e.cluster_req), null != e.user_count_limit && Object.hasOwnProperty.call(e, "user_count_limit") && t.uint32(192).uint32(e.user_count_limit), null != e.relate_service && Object.hasOwnProperty.call(e, "relate_service") && t.uint32(202).string(e.relate_service), null != e.biz_version && Object.hasOwnProperty.call(e, "biz_version") && t.uint32(210).string(e.biz_version), null != e.login_logic && Object.hasOwnProperty.call(e, "login_logic") && t.uint32(216).uint32(e.login_logic), null != e.sdk_conn_type && Object.hasOwnProperty.call(e, "sdk_conn_type") && t.uint32(224).int32(e.sdk_conn_type), t }, h.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.proto_switch.LoginRoomReq; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.app_id = e.uint32(); break; case 2: r.id_name = e.bytes(); break; case 3: r.device_id = e.string(); break; case 4: r.term_type = e.int32(); break; case 5: r.net_type = e.int32(); break; case 6: r.sdk_ver = e.uint32(); break; case 7: r.proto_ver = e.int32(); break; case 8: r.nick_name = e.bytes(); break; case 9: r.client_stamp = e.bytes(); break; case 10: r.crypt_version = e.uint32(); break; case 11: r.k1_sign = e.bytes(); break; case 12: r.login_token = e.bytes(); break; case 13: r.relogin_token = e.bytes(); break; case 14: r.role = e.uint32(); break; case 15: r.liveroom_session_id = e.uint64(); break; case 16: r.room_id = e.bytes(); break; case 17: r.room_name = e.bytes(); break; case 18: r.biz_type = e.uint32(); break; case 19: r.room_create_flag = e.uint32(); break; case 20: r.user_state_flag = e.uint32(); break; case 21: r.lv_key = e.string(); break; case 22: r.third_token = e.bytes(); break; case 23: r.cluster_req = e.uint32(); break; case 24: r.user_count_limit = e.uint32(); break; case 25: r.relate_service = e.string(); break; case 26: r.biz_version = e.string(); break; case 27: r.login_logic = e.uint32(); break; case 28: r.sdk_conn_type = e.int32(); break; default: e.skipType(7 & i) } } return r }, h), r.LoginRoomRsp = (p.prototype.rsp_head = null, p.prototype.room_id = a.newBuffer([]), p.prototype.heartbeat_interval = 0, p.prototype.heartbeat_timeout = 0, p.prototype.ret_timestamp = a.Long ? a.Long.fromBits(0, 0, !1) : 0, p.prototype.crypt_option = 0, p.prototype.k2_sign = a.newBuffer([]), p.prototype.liveroom_session_id = a.Long ? a.Long.fromBits(0, 0, !0) : 0, p.prototype.liveroom_hb_interval = 0, p.prototype.liveroom_hb_timeout = 0, p.prototype.anchor_info = null, p.prototype.stream_seq = 0, p.prototype.stream_info = a.emptyArray, p.prototype.stream_fetch_flag = 0, p.prototype.lv_key = "", p.prototype.zp_key = "", p.prototype.online_count = 0, p.prototype.bigim_time_window = 0, p.prototype.dati_time_window = 0, p.prototype.cluster_name = "", p.prototype.relogin_token = a.newBuffer([]), p.prototype.stream_mix_info = a.emptyArray, p.prototype.userlist_merge_timeout = 0, p.prototype.userlist_interval = 0, p.prototype.room_session_id = a.Long ? a.Long.fromBits(0, 0, !0) : 0, p.prototype.trans_seqs = a.emptyArray, p.prototype.stream_list_push_merge_timeout = 0, p.prototype.stream_list_hb_wait_merge_time = 0, p.prototype.trans_list_seq = 0, p.prototype.token_remain_time = 0, p.create = function (e) { return new p(e) }, p.encode = function (e, t) { if (t = t || s.create(), null != e.rsp_head && Object.hasOwnProperty.call(e, "rsp_head") && c.proto_switch.RspHead.encode(e.rsp_head, t.uint32(10).fork()).ldelim(), null != e.room_id && Object.hasOwnProperty.call(e, "room_id") && t.uint32(18).bytes(e.room_id), null != e.heartbeat_interval && Object.hasOwnProperty.call(e, "heartbeat_interval") && t.uint32(24).uint32(e.heartbeat_interval), null != e.heartbeat_timeout && Object.hasOwnProperty.call(e, "heartbeat_timeout") && t.uint32(32).uint32(e.heartbeat_timeout), null != e.ret_timestamp && Object.hasOwnProperty.call(e, "ret_timestamp") && t.uint32(40).int64(e.ret_timestamp), null != e.crypt_option && Object.hasOwnProperty.call(e, "crypt_option") && t.uint32(48).uint32(e.crypt_option), null != e.k2_sign && Object.hasOwnProperty.call(e, "k2_sign") && t.uint32(58).bytes(e.k2_sign), null != e.liveroom_session_id && Object.hasOwnProperty.call(e, "liveroom_session_id") && t.uint32(64).uint64(e.liveroom_session_id), null != e.liveroom_hb_interval && Object.hasOwnProperty.call(e, "liveroom_hb_interval") && t.uint32(72).uint32(e.liveroom_hb_interval), null != e.liveroom_hb_timeout && Object.hasOwnProperty.call(e, "liveroom_hb_timeout") && t.uint32(80).uint32(e.liveroom_hb_timeout), null != e.anchor_info && Object.hasOwnProperty.call(e, "anchor_info") && c.proto_switch.StAnchorInfo.encode(e.anchor_info, t.uint32(90).fork()).ldelim(), null != e.stream_seq && Object.hasOwnProperty.call(e, "stream_seq") && t.uint32(96).uint32(e.stream_seq), null != e.stream_info && e.stream_info.length) for (var A = 0; A < e.stream_info.length; ++A)c.proto_switch.StStreamInfo.encode(e.stream_info[A], t.uint32(106).fork()).ldelim(); if (null != e.stream_fetch_flag && Object.hasOwnProperty.call(e, "stream_fetch_flag") && t.uint32(112).uint32(e.stream_fetch_flag), null != e.lv_key && Object.hasOwnProperty.call(e, "lv_key") && t.uint32(122).string(e.lv_key), null != e.zp_key && Object.hasOwnProperty.call(e, "zp_key") && t.uint32(130).string(e.zp_key), null != e.online_count && Object.hasOwnProperty.call(e, "online_count") && t.uint32(136).uint32(e.online_count), null != e.bigim_time_window && Object.hasOwnProperty.call(e, "bigim_time_window") && t.uint32(144).uint32(e.bigim_time_window), null != e.dati_time_window && Object.hasOwnProperty.call(e, "dati_time_window") && t.uint32(152).uint32(e.dati_time_window), null != e.cluster_name && Object.hasOwnProperty.call(e, "cluster_name") && t.uint32(162).string(e.cluster_name), null != e.relogin_token && Object.hasOwnProperty.call(e, "relogin_token") && t.uint32(170).bytes(e.relogin_token), null != e.stream_mix_info && e.stream_mix_info.length) for (A = 0; A < e.stream_mix_info.length; ++A)c.proto_switch.StStreamInfo.encode(e.stream_mix_info[A], t.uint32(178).fork()).ldelim(); if (null != e.userlist_merge_timeout && Object.hasOwnProperty.call(e, "userlist_merge_timeout") && t.uint32(184).uint32(e.userlist_merge_timeout), null != e.userlist_interval && Object.hasOwnProperty.call(e, "userlist_interval") && t.uint32(192).uint32(e.userlist_interval), null != e.room_session_id && Object.hasOwnProperty.call(e, "room_session_id") && t.uint32(200).uint64(e.room_session_id), null != e.trans_seqs && e.trans_seqs.length) for (A = 0; A < e.trans_seqs.length; ++A)c.proto_switch.StTransInfo.encode(e.trans_seqs[A], t.uint32(210).fork()).ldelim(); return null != e.stream_list_push_merge_timeout && Object.hasOwnProperty.call(e, "stream_list_push_merge_timeout") && t.uint32(216).uint32(e.stream_list_push_merge_timeout), null != e.stream_list_hb_wait_merge_time && Object.hasOwnProperty.call(e, "stream_list_hb_wait_merge_time") && t.uint32(224).uint32(e.stream_list_hb_wait_merge_time), null != e.trans_list_seq && Object.hasOwnProperty.call(e, "trans_list_seq") && t.uint32(232).uint32(e.trans_list_seq), null != e.token_remain_time && Object.hasOwnProperty.call(e, "token_remain_time") && t.uint32(240).uint32(e.token_remain_time), t }, p.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.proto_switch.LoginRoomRsp; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.rsp_head = c.proto_switch.RspHead.decode(e, e.uint32()); break; case 2: r.room_id = e.bytes(); break; case 3: r.heartbeat_interval = e.uint32(); break; case 4: r.heartbeat_timeout = e.uint32(); break; case 5: r.ret_timestamp = e.int64(); break; case 6: r.crypt_option = e.uint32(); break; case 7: r.k2_sign = e.bytes(); break; case 8: r.liveroom_session_id = e.uint64(); break; case 9: r.liveroom_hb_interval = e.uint32(); break; case 10: r.liveroom_hb_timeout = e.uint32(); break; case 11: r.anchor_info = c.proto_switch.StAnchorInfo.decode(e, e.uint32()); break; case 12: r.stream_seq = e.uint32(); break; case 13: r.stream_info && r.stream_info.length || (r.stream_info = []), r.stream_info.push(c.proto_switch.StStreamInfo.decode(e, e.uint32())); break; case 14: r.stream_fetch_flag = e.uint32(); break; case 15: r.lv_key = e.string(); break; case 16: r.zp_key = e.string(); break; case 17: r.online_count = e.uint32(); break; case 18: r.bigim_time_window = e.uint32(); break; case 19: r.dati_time_window = e.uint32(); break; case 20: r.cluster_name = e.string(); break; case 21: r.relogin_token = e.bytes(); break; case 22: r.stream_mix_info && r.stream_mix_info.length || (r.stream_mix_info = []), r.stream_mix_info.push(c.proto_switch.StStreamInfo.decode(e, e.uint32())); break; case 23: r.userlist_merge_timeout = e.uint32(); break; case 24: r.userlist_interval = e.uint32(); break; case 25: r.room_session_id = e.uint64(); break; case 26: r.trans_seqs && r.trans_seqs.length || (r.trans_seqs = []), r.trans_seqs.push(c.proto_switch.StTransInfo.decode(e, e.uint32())); break; case 27: r.stream_list_push_merge_timeout = e.uint32(); break; case 28: r.stream_list_hb_wait_merge_time = e.uint32(); break; case 29: r.trans_list_seq = e.uint32(); break; case 30: r.token_remain_time = e.uint32(); break; default: e.skipType(7 & i) } } return r }, p), r.StAnchorInfo = (d.prototype.anchor_id_name = a.newBuffer([]), d.prototype.anchor_id = a.Long ? a.Long.fromBits(0, 0, !0) : 0, d.prototype.anchor_nick_name = a.newBuffer([]), d.create = function (e) { return new d(e) }, d.encode = function (e, t) { return t = t || s.create(), null != e.anchor_id_name && Object.hasOwnProperty.call(e, "anchor_id_name") && t.uint32(10).bytes(e.anchor_id_name), null != e.anchor_id && Object.hasOwnProperty.call(e, "anchor_id") && t.uint32(16).uint64(e.anchor_id), null != e.anchor_nick_name && Object.hasOwnProperty.call(e, "anchor_nick_name") && t.uint32(26).bytes(e.anchor_nick_name), t }, d.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.proto_switch.StAnchorInfo; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.anchor_id_name = e.bytes(); break; case 2: r.anchor_id = e.uint64(); break; case 3: r.anchor_nick_name = e.bytes(); break; default: e.skipType(7 & i) } } return r }, d), r.StStreamInfo = (_.prototype.stream_id = a.newBuffer([]), _.prototype.stream_sid = "", _.prototype.id_name = a.newBuffer([]), _.prototype.nick_name = a.newBuffer([]), _.prototype.create_time = a.Long ? a.Long.fromBits(0, 0, !1) : 0, _.prototype.extra_info = a.newBuffer([]), _.prototype.title = a.newBuffer([]), _.prototype.stream_ver = 0, _.prototype.stream_attr = a.newBuffer([]), _.prototype.stream_src = 0, _.prototype.stream_state = 0, _.prototype.stream_type = 0, _.prototype.stream_nid = 0, _.create = function (e) { return new _(e) }, _.encode = function (e, t) { return t = t || s.create(), null != e.stream_id && Object.hasOwnProperty.call(e, "stream_id") && t.uint32(10).bytes(e.stream_id), null != e.stream_sid && Object.hasOwnProperty.call(e, "stream_sid") && t.uint32(18).string(e.stream_sid), null != e.id_name && Object.hasOwnProperty.call(e, "id_name") && t.uint32(26).bytes(e.id_name), null != e.nick_name && Object.hasOwnProperty.call(e, "nick_name") && t.uint32(34).bytes(e.nick_name), null != e.create_time && Object.hasOwnProperty.call(e, "create_time") && t.uint32(41).fixed64(e.create_time), null != e.extra_info && Object.hasOwnProperty.call(e, "extra_info") && t.uint32(50).bytes(e.extra_info), null != e.title && Object.hasOwnProperty.call(e, "title") && t.uint32(58).bytes(e.title), null != e.stream_ver && Object.hasOwnProperty.call(e, "stream_ver") && t.uint32(64).uint32(e.stream_ver), null != e.stream_attr && Object.hasOwnProperty.call(e, "stream_attr") && t.uint32(74).bytes(e.stream_attr), null != e.stream_src && Object.hasOwnProperty.call(e, "stream_src") && t.uint32(80).uint32(e.stream_src), null != e.stream_state && Object.hasOwnProperty.call(e, "stream_state") && t.uint32(88).uint32(e.stream_state), null != e.stream_type && Object.hasOwnProperty.call(e, "stream_type") && t.uint32(96).uint32(e.stream_type), null != e.stream_nid && Object.hasOwnProperty.call(e, "stream_nid") && t.uint32(104).uint32(e.stream_nid), t }, _.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.proto_switch.StStreamInfo; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.stream_id = e.bytes(); break; case 2: r.stream_sid = e.string(); break; case 3: r.id_name = e.bytes(); break; case 4: r.nick_name = e.bytes(); break; case 5: r.create_time = e.fixed64(); break; case 6: r.extra_info = e.bytes(); break; case 7: r.title = e.bytes(); break; case 8: r.stream_ver = e.uint32(); break; case 9: r.stream_attr = e.bytes(); break; case 10: r.stream_src = e.uint32(); break; case 11: r.stream_state = e.uint32(); break; case 12: r.stream_type = e.uint32(); break; case 13: r.stream_nid = e.uint32(); break; default: e.skipType(7 & i) } } return r }, _), r.StTransSeqInfo = (f.prototype.trans_type = a.newBuffer([]), f.prototype.trans_seq = 0, f.create = function (e) { return new f(e) }, f.encode = function (e, t) { return t = t || s.create(), null != e.trans_type && Object.hasOwnProperty.call(e, "trans_type") && t.uint32(10).bytes(e.trans_type), null != e.trans_seq && Object.hasOwnProperty.call(e, "trans_seq") && t.uint32(16).uint32(e.trans_seq), t }, f.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.proto_switch.StTransSeqInfo; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.trans_type = e.bytes(); break; case 2: r.trans_seq = e.uint32(); break; default: e.skipType(7 & i) } } return r }, f), r.StTransInfo = (g.prototype.trans_channel = a.newBuffer([]), g.prototype.trans_seq_array = a.emptyArray, g.create = function (e) { return new g(e) }, g.encode = function (e, t) { if (t = t || s.create(), null != e.trans_channel && Object.hasOwnProperty.call(e, "trans_channel") && t.uint32(10).bytes(e.trans_channel), null != e.trans_seq_array && e.trans_seq_array.length) for (var A = 0; A < e.trans_seq_array.length; ++A)c.proto_switch.StTransSeqInfo.encode(e.trans_seq_array[A], t.uint32(18).fork()).ldelim(); return t }, g.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.proto_switch.StTransInfo; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.trans_channel = e.bytes(); break; case 2: r.trans_seq_array && r.trans_seq_array.length || (r.trans_seq_array = []), r.trans_seq_array.push(c.proto_switch.StTransSeqInfo.decode(e, e.uint32())); break; default: e.skipType(7 & i) } } return r }, g), r.LogoutRoomReq = (m.prototype.logout_code = 0, m.prototype.logout_check = a.newBuffer([]), m.prototype.liveroom_session_id = a.Long ? a.Long.fromBits(0, 0, !0) : 0, m.prototype.room_id = a.newBuffer([]), m.prototype.role = 0, m.prototype.nickname = a.newBuffer([]), m.prototype.logout_logic = 0, m.create = function (e) { return new m(e) }, m.encode = function (e, t) { return t = t || s.create(), null != e.logout_code && Object.hasOwnProperty.call(e, "logout_code") && t.uint32(8).uint32(e.logout_code), null != e.logout_check && Object.hasOwnProperty.call(e, "logout_check") && t.uint32(18).bytes(e.logout_check), null != e.liveroom_session_id && Object.hasOwnProperty.call(e, "liveroom_session_id") && t.uint32(24).uint64(e.liveroom_session_id), null != e.room_id && Object.hasOwnProperty.call(e, "room_id") && t.uint32(34).bytes(e.room_id), null != e.role && Object.hasOwnProperty.call(e, "role") && t.uint32(40).uint32(e.role), null != e.nickname && Object.hasOwnProperty.call(e, "nickname") && t.uint32(50).bytes(e.nickname), null != e.logout_logic && Object.hasOwnProperty.call(e, "logout_logic") && t.uint32(56).uint32(e.logout_logic), t }, m.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.proto_switch.LogoutRoomReq; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.logout_code = e.uint32(); break; case 2: r.logout_check = e.bytes(); break; case 3: r.liveroom_session_id = e.uint64(); break; case 4: r.room_id = e.bytes(); break; case 5: r.role = e.uint32(); break; case 6: r.nickname = e.bytes(); break; case 7: r.logout_logic = e.uint32(); break; default: e.skipType(7 & i) } } return r }, m), r.LogoutRoomRsp = (y.prototype.rsp_head = null, y.create = function (e) { return new y(e) }, y.encode = function (e, t) { return t = t || s.create(), null != e.rsp_head && Object.hasOwnProperty.call(e, "rsp_head") && c.proto_switch.RspHead.encode(e.rsp_head, t.uint32(10).fork()).ldelim(), t }, y.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.proto_switch.LogoutRoomRsp; e.pos < A;) { var i = e.uint32(); i >>> 3 == 1 ? r.rsp_head = c.proto_switch.RspHead.decode(e, e.uint32()) : e.skipType(7 & i) } return r }, y), r.TcpHbReq = (v.prototype.id_name = a.newBuffer([]), v.create = function (e) { return new v(e) }, v.encode = function (e, t) { return t = t || s.create(), null != e.id_name && Object.hasOwnProperty.call(e, "id_name") && t.uint32(10).bytes(e.id_name), t }, v.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.proto_switch.TcpHbReq; e.pos < A;) { var i = e.uint32(); i >>> 3 == 1 ? r.id_name = e.bytes() : e.skipType(7 & i) } return r }, v), r.TcpHbRsp = (b.prototype.rsp_head = null, b.prototype.heartbeat_interval = 0, b.prototype.heartbeat_timeout = 0, b.prototype.server_timestamp = a.Long ? a.Long.fromBits(0, 0, !1) : 0, b.create = function (e) { return new b(e) }, b.encode = function (e, t) { return t = t || s.create(), null != e.rsp_head && Object.hasOwnProperty.call(e, "rsp_head") && c.proto_switch.RspHead.encode(e.rsp_head, t.uint32(10).fork()).ldelim(), null != e.heartbeat_interval && Object.hasOwnProperty.call(e, "heartbeat_interval") && t.uint32(16).uint32(e.heartbeat_interval), null != e.heartbeat_timeout && Object.hasOwnProperty.call(e, "heartbeat_timeout") && t.uint32(24).uint32(e.heartbeat_timeout), null != e.server_timestamp && Object.hasOwnProperty.call(e, "server_timestamp") && t.uint32(32).int64(e.server_timestamp), t }, b.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.proto_switch.TcpHbRsp; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.rsp_head = c.proto_switch.RspHead.decode(e, e.uint32()); break; case 2: r.heartbeat_interval = e.uint32(); break; case 3: r.heartbeat_timeout = e.uint32(); break; case 4: r.server_timestamp = e.int64(); break; default: e.skipType(7 & i) } } return r }, b), r.TermType = (o = {}, (i = Object.create(o))[o[0] = "TT_NONE"] = 0, i[o[1] = "TT_PC"] = 1, i[o[2] = "TT_IOS"] = 2, i[o[3] = "TT_ANDROID"] = 3, i[o[4] = "TT_MAC"] = 4, i[o[5] = "TT_LINUX"] = 5, i[o[6] = "TT_WEB"] = 6, i[o[7] = "TT_MINIPROGRAM"] = 7, i[o[32] = "TT_UNKNOWN"] = 32, i), r.NetType = (o = {}, (i = Object.create(o))[o[0] = "NT_NONE"] = 0, i[o[1] = "NT_LINE"] = 1, i[o[2] = "NT_WIFI"] = 2, i[o[3] = "NT_2G"] = 3, i[o[4] = "NT_3G"] = 4, i[o[5] = "NT_4G"] = 5, i[o[32] = "NT_UNKNOWN"] = 32, i), r.ProductType = (o = {}, (i = Object.create(o))[o[0] = "PRODUCT_TYPE_NONE"] = 0, i[o[1] = "PRODUCT_TYPE_LIVEROOM"] = 1, i[o[2] = "PRODUCT_TYPE_IM"] = 2, i), r.LiveroomProtoVersion = (o = {}, (i = Object.create(o))[o[0] = "PROTO_VERSION_NONE"] = 0, i[o[131072] = "RPOTO_V020000"] = 131072, i), r.SdkConnType = (o = {}, (i = Object.create(o))[o[0] = "SdkConnType_None"] = 0, i[o[1] = "SdkConnType_Tcp"] = 1, i[o[2] = "SdkConnType_Websocket"] = 2, i), r.Header = (E.prototype.cmd = "", E.prototype.seq = 0, E.prototype.timestamp = a.Long ? a.Long.fromBits(0, 0, !1) : 0, E.prototype.app_id = 0, E.prototype.user_id = "", E.prototype.session_id = a.Long ? a.Long.fromBits(0, 0, !1) : 0, E.prototype.user_nid = a.Long ? a.Long.fromBits(0, 0, !1) : 0, E.prototype.controls = a.newBuffer([]), E.prototype.product = 0, E.prototype.flags = a.newBuffer([]), E.create = function (e) { return new E(e) }, E.encode = function (e, t) { return t = t || s.create(), null != e.cmd && Object.hasOwnProperty.call(e, "cmd") && t.uint32(10).string(e.cmd), null != e.seq && Object.hasOwnProperty.call(e, "seq") && t.uint32(16).uint32(e.seq), null != e.timestamp && Object.hasOwnProperty.call(e, "timestamp") && t.uint32(24).int64(e.timestamp), null != e.app_id && Object.hasOwnProperty.call(e, "app_id") && t.uint32(32).uint32(e.app_id), null != e.user_id && Object.hasOwnProperty.call(e, "user_id") && t.uint32(42).string(e.user_id), null != e.session_id && Object.hasOwnProperty.call(e, "session_id") && t.uint32(48).int64(e.session_id), null != e.user_nid && Object.hasOwnProperty.call(e, "user_nid") && t.uint32(56).int64(e.user_nid), null != e.controls && Object.hasOwnProperty.call(e, "controls") && t.uint32(66).bytes(e.controls), null != e.product && Object.hasOwnProperty.call(e, "product") && t.uint32(72).int32(e.product), null != e.flags && Object.hasOwnProperty.call(e, "flags") && t.uint32(82).bytes(e.flags), t }, E.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.proto_switch.Header; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.cmd = e.string(); break; case 2: r.seq = e.uint32(); break; case 3: r.timestamp = e.int64(); break; case 4: r.app_id = e.uint32(); break; case 5: r.user_id = e.string(); break; case 6: r.session_id = e.int64(); break; case 7: r.user_nid = e.int64(); break; case 8: r.controls = e.bytes(); break; case 9: r.product = e.int32(); break; case 10: r.flags = e.bytes(); break; default: e.skipType(7 & i) } } return r }, E), r.PushKickout = (O.prototype.reason = 0, O.prototype.message = "", O.prototype.need_relogin = 0, O.create = function (e) { return new O(e) }, O.encode = function (e, t) { return t = t || s.create(), null != e.reason && Object.hasOwnProperty.call(e, "reason") && t.uint32(8).uint32(e.reason), null != e.message && Object.hasOwnProperty.call(e, "message") && t.uint32(18).string(e.message), null != e.need_relogin && Object.hasOwnProperty.call(e, "need_relogin") && t.uint32(24).uint32(e.need_relogin), t }, O.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.proto_switch.PushKickout; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.reason = e.uint32(); break; case 2: r.message = e.string(); break; case 3: r.need_relogin = e.uint32(); break; default: e.skipType(7 & i) } } return r }, O), r.PushRedirect2Sdk = (S.prototype.redirect_server = a.emptyArray, S.create = function (e) { return new S(e) }, S.encode = function (e, t) { if (t = t || s.create(), null != e.redirect_server && e.redirect_server.length) for (var A = 0; A < e.redirect_server.length; ++A)t.uint32(10).string(e.redirect_server[A]); return t }, S.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.proto_switch.PushRedirect2Sdk; e.pos < A;) { var i = e.uint32(); i >>> 3 == 1 ? (r.redirect_server && r.redirect_server.length || (r.redirect_server = []), r.redirect_server.push(e.string())) : e.skipType(7 & i) } return r }, S), r.PushReq = (T.prototype.head = null, T.prototype.msg_body = a.newBuffer([]), T.create = function (e) { return new T(e) }, T.encode = function (e, t) { return t = t || s.create(), null != e.head && Object.hasOwnProperty.call(e, "head") && c.proto_switch.PushReqHead.encode(e.head, t.uint32(10).fork()).ldelim(), null != e.msg_body && Object.hasOwnProperty.call(e, "msg_body") && t.uint32(18).bytes(e.msg_body), t }, T.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.proto_switch.PushReq; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.head = c.proto_switch.PushReqHead.decode(e, e.uint32()); break; case 2: r.msg_body = e.bytes(); break; default: e.skipType(7 & i) } } return r }, T), r.PushReqHead = (k.prototype.sub_cmd = "", k.prototype.sender_user_id = "", k.prototype.qos_flag = 0, k.prototype.msg_id = "", k.prototype.send_time = a.Long ? a.Long.fromBits(0, 0, !1) : 0, k.prototype.room_id = a.newBuffer([]), k.prototype.sender_user_nid = a.Long ? a.Long.fromBits(0, 0, !0) : 0, k.create = function (e) { return new k(e) }, k.encode = function (e, t) { return t = t || s.create(), null != e.sub_cmd && Object.hasOwnProperty.call(e, "sub_cmd") && t.uint32(10).string(e.sub_cmd), null != e.sender_user_id && Object.hasOwnProperty.call(e, "sender_user_id") && t.uint32(18).string(e.sender_user_id), null != e.qos_flag && Object.hasOwnProperty.call(e, "qos_flag") && t.uint32(24).uint32(e.qos_flag), null != e.msg_id && Object.hasOwnProperty.call(e, "msg_id") && t.uint32(34).string(e.msg_id), null != e.send_time && Object.hasOwnProperty.call(e, "send_time") && t.uint32(40).int64(e.send_time), null != e.room_id && Object.hasOwnProperty.call(e, "room_id") && t.uint32(50).bytes(e.room_id), null != e.sender_user_nid && Object.hasOwnProperty.call(e, "sender_user_nid") && t.uint32(56).uint64(e.sender_user_nid), t }, k.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.proto_switch.PushReqHead; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.sub_cmd = e.string(); break; case 2: r.sender_user_id = e.string(); break; case 3: r.qos_flag = e.uint32(); break; case 4: r.msg_id = e.string(); break; case 5: r.send_time = e.int64(); break; case 6: r.room_id = e.bytes(); break; case 7: r.sender_user_nid = e.uint64(); break; default: e.skipType(7 & i) } } return r }, k), r.PushRsp = (R.prototype.code = 0, R.prototype.message = "", R.prototype.sub_cmd = "", R.prototype.msg_id = "", R.prototype.server_send_time = a.Long ? a.Long.fromBits(0, 0, !1) : 0, R.create = function (e) { return new R(e) }, R.encode = function (e, t) { return t = t || s.create(), null != e.code && Object.hasOwnProperty.call(e, "code") && t.uint32(8).uint32(e.code), null != e.message && Object.hasOwnProperty.call(e, "message") && t.uint32(18).string(e.message), null != e.sub_cmd && Object.hasOwnProperty.call(e, "sub_cmd") && t.uint32(26).string(e.sub_cmd), null != e.msg_id && Object.hasOwnProperty.call(e, "msg_id") && t.uint32(34).string(e.msg_id), null != e.server_send_time && Object.hasOwnProperty.call(e, "server_send_time") && t.uint32(40).int64(e.server_send_time), t }, R.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.proto_switch.PushRsp; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.code = e.uint32(); break; case 2: r.message = e.string(); break; case 3: r.sub_cmd = e.string(); break; case 4: r.msg_id = e.string(); break; case 5: r.server_send_time = e.int64(); break; default: e.skipType(7 & i) } } return r }, R), r.MergePushHead = (C.prototype.qos_flag = 0, C.prototype.send_time = a.Long ? a.Long.fromBits(0, 0, !1) : 0, C.prototype.room_id = a.newBuffer([]), C.create = function (e) { return new C(e) }, C.encode = function (e, t) { return t = t || s.create(), null != e.qos_flag && Object.hasOwnProperty.call(e, "qos_flag") && t.uint32(8).uint32(e.qos_flag), null != e.send_time && Object.hasOwnProperty.call(e, "send_time") && t.uint32(16).int64(e.send_time), null != e.room_id && Object.hasOwnProperty.call(e, "room_id") && t.uint32(26).bytes(e.room_id), t }, C.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.proto_switch.MergePushHead; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.qos_flag = e.uint32(); break; case 2: r.send_time = e.int64(); break; case 3: r.room_id = e.bytes(); break; default: e.skipType(7 & i) } } return r }, C), r.MergePushInfo = (w.prototype.sub_cmd = "", w.prototype.sub_seq = 0, w.prototype.sender_nid = a.Long ? a.Long.fromBits(0, 0, !0) : 0, w.prototype.msg_id = a.newBuffer([]), w.prototype.msg_body = a.newBuffer([]), w.prototype.msg_timestamp = a.Long ? a.Long.fromBits(0, 0, !1) : 0, w.create = function (e) { return new w(e) }, w.encode = function (e, t) { return t = t || s.create(), null != e.sub_cmd && Object.hasOwnProperty.call(e, "sub_cmd") && t.uint32(10).string(e.sub_cmd), null != e.sub_seq && Object.hasOwnProperty.call(e, "sub_seq") && t.uint32(16).uint32(e.sub_seq), null != e.sender_nid && Object.hasOwnProperty.call(e, "sender_nid") && t.uint32(24).uint64(e.sender_nid), null != e.msg_id && Object.hasOwnProperty.call(e, "msg_id") && t.uint32(34).bytes(e.msg_id), null != e.msg_body && Object.hasOwnProperty.call(e, "msg_body") && t.uint32(42).bytes(e.msg_body), null != e.msg_timestamp && Object.hasOwnProperty.call(e, "msg_timestamp") && t.uint32(48).int64(e.msg_timestamp), t }, w.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.proto_switch.MergePushInfo; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.sub_cmd = e.string(); break; case 2: r.sub_seq = e.uint32(); break; case 3: r.sender_nid = e.uint64(); break; case 4: r.msg_id = e.bytes(); break; case 5: r.msg_body = e.bytes(); break; case 6: r.msg_timestamp = e.int64(); break; default: e.skipType(7 & i) } } return r }, w), r.CmdMergePushReq = (N.prototype.head = null, N.prototype.messages = a.emptyArray, N.create = function (e) { return new N(e) }, N.encode = function (e, t) { if (t = t || s.create(), null != e.head && Object.hasOwnProperty.call(e, "head") && c.proto_switch.MergePushHead.encode(e.head, t.uint32(10).fork()).ldelim(), null != e.messages && e.messages.length) for (var A = 0; A < e.messages.length; ++A)c.proto_switch.MergePushInfo.encode(e.messages[A], t.uint32(18).fork()).ldelim(); return t }, N.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.proto_switch.CmdMergePushReq; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.head = c.proto_switch.MergePushHead.decode(e, e.uint32()); break; case 2: r.messages && r.messages.length || (r.messages = []), r.messages.push(c.proto_switch.MergePushInfo.decode(e, e.uint32())); break; default: e.skipType(7 & i) } } return r }, N), r.CmdMergePushRspInfo = (I.prototype.sub_cmd = "", I.prototype.sub_seq = 0, I.prototype.msg_id = a.newBuffer([]), I.create = function (e) { return new I(e) }, I.encode = function (e, t) { return t = t || s.create(), null != e.sub_cmd && Object.hasOwnProperty.call(e, "sub_cmd") && t.uint32(10).string(e.sub_cmd), null != e.sub_seq && Object.hasOwnProperty.call(e, "sub_seq") && t.uint32(16).uint32(e.sub_seq), null != e.msg_id && Object.hasOwnProperty.call(e, "msg_id") && t.uint32(26).bytes(e.msg_id), t }, I.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.proto_switch.CmdMergePushRspInfo; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.sub_cmd = e.string(); break; case 2: r.sub_seq = e.uint32(); break; case 3: r.msg_id = e.bytes(); break; default: e.skipType(7 & i) } } return r }, I), r.CmdMergePushRsp = (M.prototype.messages = a.emptyArray, M.create = function (e) { return new M(e) }, M.encode = function (e, t) { if (t = t || s.create(), null != e.messages && e.messages.length) for (var A = 0; A < e.messages.length; ++A)c.proto_switch.CmdMergePushRspInfo.encode(e.messages[A], t.uint32(10).fork()).ldelim(); return t }, M.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.proto_switch.CmdMergePushRsp; e.pos < A;) { var i = e.uint32(); i >>> 3 == 1 ? (r.messages && r.messages.length || (r.messages = []), r.messages.push(c.proto_switch.CmdMergePushRspInfo.decode(e, e.uint32()))) : e.skipType(7 & i) } return r }, M), r), c.liveroom_cs = ((o = {}).ReqHead = (L.prototype.room_id = "", L.prototype.user_session_id = a.Long ? a.Long.fromBits(0, 0, !0) : 0, L.prototype.room_session_id = a.Long ? a.Long.fromBits(0, 0, !0) : 0, L.create = function (e) { return new L(e) }, L.encode = function (e, t) { return t = t || s.create(), null != e.room_id && Object.hasOwnProperty.call(e, "room_id") && t.uint32(10).string(e.room_id), null != e.user_session_id && Object.hasOwnProperty.call(e, "user_session_id") && t.uint32(16).uint64(e.user_session_id), null != e.room_session_id && Object.hasOwnProperty.call(e, "room_session_id") && t.uint32(24).uint64(e.room_session_id), t }, L.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.ReqHead; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.room_id = e.string(); break; case 2: r.user_session_id = e.uint64(); break; case 3: r.room_session_id = e.uint64(); break; default: e.skipType(7 & i) } } return r }, L), o.RspHead = (P.prototype.code = 0, P.prototype.message = "", P.create = function (e) { return new P(e) }, P.encode = function (e, t) { return t = t || s.create(), null != e.code && Object.hasOwnProperty.call(e, "code") && t.uint32(8).uint32(e.code), null != e.message && Object.hasOwnProperty.call(e, "message") && t.uint32(18).string(e.message), t }, P.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.RspHead; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.code = e.uint32(); break; case 2: r.message = e.string(); break; default: e.skipType(7 & i) } } return r }, P), o.CommonRsp = (A.prototype.rsp_head = null, A.create = function (e) { return new A(e) }, A.encode = function (e, t) { return t = t || s.create(), null != e.rsp_head && Object.hasOwnProperty.call(e, "rsp_head") && c.liveroom_cs.RspHead.encode(e.rsp_head, t.uint32(10).fork()).ldelim(), t }, A.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.CommonRsp; e.pos < A;) { var i = e.uint32(); i >>> 3 == 1 ? r.rsp_head = c.liveroom_cs.RspHead.decode(e, e.uint32()) : e.skipType(7 & i) } return r }, A), o.HbReq = (D.prototype.req_head = null, D.prototype.role = 0, D.prototype.lv_key = "", D.create = function (e) { return new D(e) }, D.encode = function (e, t) { return t = t || s.create(), null != e.req_head && Object.hasOwnProperty.call(e, "req_head") && c.liveroom_cs.ReqHead.encode(e.req_head, t.uint32(10).fork()).ldelim(), null != e.role && Object.hasOwnProperty.call(e, "role") && t.uint32(16).uint32(e.role), null != e.lv_key && Object.hasOwnProperty.call(e, "lv_key") && t.uint32(26).string(e.lv_key), t }, D.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.HbReq; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.req_head = c.liveroom_cs.ReqHead.decode(e, e.uint32()); break; case 2: r.role = e.uint32(); break; case 3: r.lv_key = e.string(); break; default: e.skipType(7 & i) } } return r }, D), o.HbRsp = (H.prototype.rsp_head = null, H.prototype.ret_timestamp = a.Long ? a.Long.fromBits(0, 0, !1) : 0, H.prototype.hb_interval = 0, H.prototype.hb_timeout = 0, H.prototype.stream_seq = 0, H.prototype.user_seq = a.Long ? a.Long.fromBits(0, 0, !1) : 0, H.prototype.online_count = 0, H.prototype.bigim_time_window = 0, H.prototype.dati_time_window = a.Long ? a.Long.fromBits(0, 0, !1) : 0, H.prototype.trans_seqs = a.emptyArray, H.prototype.user_trans_seqs = a.emptyArray, H.prototype.StreamRefresh = 0, H.prototype.trans_list_seq = 0, H.create = function (e) { return new H(e) }, H.encode = function (e, t) { if (t = t || s.create(), null != e.rsp_head && Object.hasOwnProperty.call(e, "rsp_head") && c.liveroom_cs.RspHead.encode(e.rsp_head, t.uint32(10).fork()).ldelim(), null != e.ret_timestamp && Object.hasOwnProperty.call(e, "ret_timestamp") && t.uint32(16).int64(e.ret_timestamp), null != e.hb_interval && Object.hasOwnProperty.call(e, "hb_interval") && t.uint32(24).uint32(e.hb_interval), null != e.hb_timeout && Object.hasOwnProperty.call(e, "hb_timeout") && t.uint32(32).uint32(e.hb_timeout), null != e.stream_seq && Object.hasOwnProperty.call(e, "stream_seq") && t.uint32(40).uint32(e.stream_seq), null != e.user_seq && Object.hasOwnProperty.call(e, "user_seq") && t.uint32(48).int64(e.user_seq), null != e.online_count && Object.hasOwnProperty.call(e, "online_count") && t.uint32(56).uint32(e.online_count), null != e.bigim_time_window && Object.hasOwnProperty.call(e, "bigim_time_window") && t.uint32(64).uint32(e.bigim_time_window), null != e.dati_time_window && Object.hasOwnProperty.call(e, "dati_time_window") && t.uint32(72).int64(e.dati_time_window), null != e.trans_seqs && e.trans_seqs.length) for (var A = 0; A < e.trans_seqs.length; ++A)c.liveroom_cs.StTransChannelSeq.encode(e.trans_seqs[A], t.uint32(82).fork()).ldelim(); if (null != e.user_trans_seqs && e.user_trans_seqs.length) for (A = 0; A < e.user_trans_seqs.length; ++A)c.liveroom_cs.StTransChannelSeq.encode(e.user_trans_seqs[A], t.uint32(90).fork()).ldelim(); return null != e.StreamRefresh && Object.hasOwnProperty.call(e, "StreamRefresh") && t.uint32(96).uint32(e.StreamRefresh), null != e.trans_list_seq && Object.hasOwnProperty.call(e, "trans_list_seq") && t.uint32(104).uint32(e.trans_list_seq), t }, H.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.HbRsp; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.rsp_head = c.liveroom_cs.RspHead.decode(e, e.uint32()); break; case 2: r.ret_timestamp = e.int64(); break; case 3: r.hb_interval = e.uint32(); break; case 4: r.hb_timeout = e.uint32(); break; case 5: r.stream_seq = e.uint32(); break; case 6: r.user_seq = e.int64(); break; case 7: r.online_count = e.uint32(); break; case 8: r.bigim_time_window = e.uint32(); break; case 9: r.dati_time_window = e.int64(); break; case 10: r.trans_seqs && r.trans_seqs.length || (r.trans_seqs = []), r.trans_seqs.push(c.liveroom_cs.StTransChannelSeq.decode(e, e.uint32())); break; case 11: r.user_trans_seqs && r.user_trans_seqs.length || (r.user_trans_seqs = []), r.user_trans_seqs.push(c.liveroom_cs.StTransChannelSeq.decode(e, e.uint32())); break; case 12: r.StreamRefresh = e.uint32(); break; case 13: r.trans_list_seq = e.uint32(); break; default: e.skipType(7 & i) } } return r }, H), o.StTransSeq = (U.prototype.trans_type = a.newBuffer([]), U.prototype.trans_seq = 0, U.create = function (e) { return new U(e) }, U.encode = function (e, t) { return t = t || s.create(), null != e.trans_type && Object.hasOwnProperty.call(e, "trans_type") && t.uint32(10).bytes(e.trans_type), null != e.trans_seq && Object.hasOwnProperty.call(e, "trans_seq") && t.uint32(16).uint32(e.trans_seq), t }, U.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.StTransSeq; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.trans_type = e.bytes(); break; case 2: r.trans_seq = e.uint32(); break; default: e.skipType(7 & i) } } return r }, U), o.StTransChannelSeq = (j.prototype.trans_channel = a.newBuffer([]), j.prototype.trans_seq_array = a.emptyArray, j.create = function (e) { return new j(e) }, j.encode = function (e, t) { if (t = t || s.create(), null != e.trans_channel && Object.hasOwnProperty.call(e, "trans_channel") && t.uint32(10).bytes(e.trans_channel), null != e.trans_seq_array && e.trans_seq_array.length) for (var A = 0; A < e.trans_seq_array.length; ++A)c.liveroom_cs.StTransSeq.encode(e.trans_seq_array[A], t.uint32(18).fork()).ldelim(); return t }, j.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.StTransChannelSeq; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.trans_channel = e.bytes(); break; case 2: r.trans_seq_array && r.trans_seq_array.length || (r.trans_seq_array = []), r.trans_seq_array.push(c.liveroom_cs.StTransSeq.decode(e, e.uint32())); break; default: e.skipType(7 & i) } } return r }, j), o.UserlistReq = (x.prototype.req_head = null, x.prototype.sort_type = 0, x.prototype.user_index = 0, x.create = function (e) { return new x(e) }, x.encode = function (e, t) { return t = t || s.create(), null != e.req_head && Object.hasOwnProperty.call(e, "req_head") && c.liveroom_cs.ReqHead.encode(e.req_head, t.uint32(10).fork()).ldelim(), null != e.sort_type && Object.hasOwnProperty.call(e, "sort_type") && t.uint32(16).uint32(e.sort_type), null != e.user_index && Object.hasOwnProperty.call(e, "user_index") && t.uint32(24).uint32(e.user_index), t }, x.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.UserlistReq; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.req_head = c.liveroom_cs.ReqHead.decode(e, e.uint32()); break; case 2: r.sort_type = e.uint32(); break; case 3: r.user_index = e.uint32(); break; default: e.skipType(7 & i) } } return r }, x), o.UserlistRsp = (B.prototype.rsp_head = null, B.prototype.server_user_seq = a.Long ? a.Long.fromBits(0, 0, !0) : 0, B.prototype.server_user_index = a.Long ? a.Long.fromBits(0, 0, !1) : 0, B.prototype.ret_user_index = a.Long ? a.Long.fromBits(0, 0, !1) : 0, B.prototype.user_basic_list = a.emptyArray, B.create = function (e) { return new B(e) }, B.encode = function (e, t) { if (t = t || s.create(), null != e.rsp_head && Object.hasOwnProperty.call(e, "rsp_head") && c.liveroom_cs.RspHead.encode(e.rsp_head, t.uint32(10).fork()).ldelim(), null != e.server_user_seq && Object.hasOwnProperty.call(e, "server_user_seq") && t.uint32(16).uint64(e.server_user_seq), null != e.server_user_index && Object.hasOwnProperty.call(e, "server_user_index") && t.uint32(24).int64(e.server_user_index), null != e.ret_user_index && Object.hasOwnProperty.call(e, "ret_user_index") && t.uint32(32).int64(e.ret_user_index), null != e.user_basic_list && e.user_basic_list.length) for (var A = 0; A < e.user_basic_list.length; ++A)c.liveroom_cs.StUserBasicDef.encode(e.user_basic_list[A], t.uint32(42).fork()).ldelim(); return t }, B.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.UserlistRsp; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.rsp_head = c.liveroom_cs.RspHead.decode(e, e.uint32()); break; case 2: r.server_user_seq = e.uint64(); break; case 3: r.server_user_index = e.int64(); break; case 4: r.ret_user_index = e.int64(); break; case 5: r.user_basic_list && r.user_basic_list.length || (r.user_basic_list = []), r.user_basic_list.push(c.liveroom_cs.StUserBasicDef.decode(e, e.uint32())); break; default: e.skipType(7 & i) } } return r }, B), o.StUserBasicDef = (q.prototype.id_name = a.newBuffer([]), q.prototype.nick_name = a.newBuffer([]), q.prototype.role = 0, q.create = function (e) { return new q(e) }, q.encode = function (e, t) { return t = t || s.create(), null != e.id_name && Object.hasOwnProperty.call(e, "id_name") && t.uint32(10).bytes(e.id_name), null != e.nick_name && Object.hasOwnProperty.call(e, "nick_name") && t.uint32(18).bytes(e.nick_name), null != e.role && Object.hasOwnProperty.call(e, "role") && t.uint32(24).uint32(e.role), t }, q.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.StUserBasicDef; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.id_name = e.bytes(); break; case 2: r.nick_name = e.bytes(); break; case 3: r.role = e.uint32(); break; default: e.skipType(7 & i) } } return r }, q), o.StreamAddReq = (G.prototype.req_head = null, G.prototype.stream_id = a.newBuffer([]), G.prototype.title = a.newBuffer([]), G.prototype.stream_attr = a.newBuffer([]), G.prototype.extra_info = a.newBuffer([]), G.prototype.client_req_seq = 0, G.prototype.nickname = a.newBuffer([]), G.prototype.login_mode = 0, G.prototype.stream_type = 0, G.prototype.third_token = a.newBuffer([]), G.create = function (e) { return new G(e) }, G.encode = function (e, t) { return t = t || s.create(), null != e.req_head && Object.hasOwnProperty.call(e, "req_head") && c.liveroom_cs.ReqHead.encode(e.req_head, t.uint32(10).fork()).ldelim(), null != e.stream_id && Object.hasOwnProperty.call(e, "stream_id") && t.uint32(18).bytes(e.stream_id), null != e.title && Object.hasOwnProperty.call(e, "title") && t.uint32(26).bytes(e.title), null != e.stream_attr && Object.hasOwnProperty.call(e, "stream_attr") && t.uint32(34).bytes(e.stream_attr), null != e.extra_info && Object.hasOwnProperty.call(e, "extra_info") && t.uint32(42).bytes(e.extra_info), null != e.client_req_seq && Object.hasOwnProperty.call(e, "client_req_seq") && t.uint32(48).uint32(e.client_req_seq), null != e.nickname && Object.hasOwnProperty.call(e, "nickname") && t.uint32(58).bytes(e.nickname), null != e.login_mode && Object.hasOwnProperty.call(e, "login_mode") && t.uint32(64).uint32(e.login_mode), null != e.stream_type && Object.hasOwnProperty.call(e, "stream_type") && t.uint32(72).uint32(e.stream_type), null != e.third_token && Object.hasOwnProperty.call(e, "third_token") && t.uint32(82).bytes(e.third_token), t }, G.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.StreamAddReq; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.req_head = c.liveroom_cs.ReqHead.decode(e, e.uint32()); break; case 2: r.stream_id = e.bytes(); break; case 3: r.title = e.bytes(); break; case 4: r.stream_attr = e.bytes(); break; case 5: r.extra_info = e.bytes(); break; case 6: r.client_req_seq = e.uint32(); break; case 7: r.nickname = e.bytes(); break; case 8: r.login_mode = e.uint32(); break; case 9: r.stream_type = e.uint32(); break; case 10: r.third_token = e.bytes(); break; default: e.skipType(7 & i) } } return r }, G), o.StreamAddRsp = (z.prototype.rsp_head = null, z.prototype.stream_seq = 0, z.prototype.stream_sid = "", z.prototype.stream_ver = 0, z.prototype.stream_nid = 0, z.prototype.token_remain_time = 0, z.create = function (e) { return new z(e) }, z.encode = function (e, t) { return t = t || s.create(), null != e.rsp_head && Object.hasOwnProperty.call(e, "rsp_head") && c.liveroom_cs.RspHead.encode(e.rsp_head, t.uint32(10).fork()).ldelim(), null != e.stream_seq && Object.hasOwnProperty.call(e, "stream_seq") && t.uint32(16).uint32(e.stream_seq), null != e.stream_sid && Object.hasOwnProperty.call(e, "stream_sid") && t.uint32(26).string(e.stream_sid), null != e.stream_ver && Object.hasOwnProperty.call(e, "stream_ver") && t.uint32(32).uint32(e.stream_ver), null != e.stream_nid && Object.hasOwnProperty.call(e, "stream_nid") && t.uint32(40).uint32(e.stream_nid), null != e.token_remain_time && Object.hasOwnProperty.call(e, "token_remain_time") && t.uint32(48).uint32(e.token_remain_time), t }, z.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.StreamAddRsp; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.rsp_head = c.liveroom_cs.RspHead.decode(e, e.uint32()); break; case 2: r.stream_seq = e.uint32(); break; case 3: r.stream_sid = e.string(); break; case 4: r.stream_ver = e.uint32(); break; case 5: r.stream_nid = e.uint32(); break; case 6: r.token_remain_time = e.uint32(); break; default: e.skipType(7 & i) } } return r }, z), o.StreamDeleteReq = (V.prototype.req_head = null, V.prototype.stream_sid = "", V.prototype.stream_id = a.newBuffer([]), V.prototype.client_req_seq = 0, V.create = function (e) { return new V(e) }, V.encode = function (e, t) { return t = t || s.create(), null != e.req_head && Object.hasOwnProperty.call(e, "req_head") && c.liveroom_cs.ReqHead.encode(e.req_head, t.uint32(10).fork()).ldelim(), null != e.stream_sid && Object.hasOwnProperty.call(e, "stream_sid") && t.uint32(18).string(e.stream_sid), null != e.stream_id && Object.hasOwnProperty.call(e, "stream_id") && t.uint32(26).bytes(e.stream_id), null != e.client_req_seq && Object.hasOwnProperty.call(e, "client_req_seq") && t.uint32(32).uint32(e.client_req_seq), t }, V.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.StreamDeleteReq; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.req_head = c.liveroom_cs.ReqHead.decode(e, e.uint32()); break; case 2: r.stream_sid = e.string(); break; case 3: r.stream_id = e.bytes(); break; case 4: r.client_req_seq = e.uint32(); break; default: e.skipType(7 & i) } } return r }, V), o.StreamDeleteRsp = (F.prototype.rsp_head = null, F.prototype.stream_seq = 0, F.prototype.stream_ver = 0, F.create = function (e) { return new F(e) }, F.encode = function (e, t) { return t = t || s.create(), null != e.rsp_head && Object.hasOwnProperty.call(e, "rsp_head") && c.liveroom_cs.RspHead.encode(e.rsp_head, t.uint32(10).fork()).ldelim(), null != e.stream_seq && Object.hasOwnProperty.call(e, "stream_seq") && t.uint32(16).uint32(e.stream_seq), null != e.stream_ver && Object.hasOwnProperty.call(e, "stream_ver") && t.uint32(24).uint32(e.stream_ver), t }, F.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.StreamDeleteRsp; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.rsp_head = c.liveroom_cs.RspHead.decode(e, e.uint32()); break; case 2: r.stream_seq = e.uint32(); break; case 3: r.stream_ver = e.uint32(); break; default: e.skipType(7 & i) } } return r }, F), o.StreamUpdateReq = (Z.prototype.req_head = null, Z.prototype.stream_sid = "", Z.prototype.stream_id = a.newBuffer([]), Z.prototype.title = a.newBuffer([]), Z.prototype.stream_attr = a.newBuffer([]), Z.prototype.extra_info = a.newBuffer([]), Z.prototype.client_req_seq = 0, Z.prototype.nickname = a.newBuffer([]), Z.create = function (e) { return new Z(e) }, Z.encode = function (e, t) { return t = t || s.create(), null != e.req_head && Object.hasOwnProperty.call(e, "req_head") && c.liveroom_cs.ReqHead.encode(e.req_head, t.uint32(10).fork()).ldelim(), null != e.stream_sid && Object.hasOwnProperty.call(e, "stream_sid") && t.uint32(18).string(e.stream_sid), null != e.stream_id && Object.hasOwnProperty.call(e, "stream_id") && t.uint32(26).bytes(e.stream_id), null != e.title && Object.hasOwnProperty.call(e, "title") && t.uint32(34).bytes(e.title), null != e.stream_attr && Object.hasOwnProperty.call(e, "stream_attr") && t.uint32(42).bytes(e.stream_attr), null != e.extra_info && Object.hasOwnProperty.call(e, "extra_info") && t.uint32(50).bytes(e.extra_info), null != e.client_req_seq && Object.hasOwnProperty.call(e, "client_req_seq") && t.uint32(56).uint32(e.client_req_seq), null != e.nickname && Object.hasOwnProperty.call(e, "nickname") && t.uint32(66).bytes(e.nickname), t }, Z.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.StreamUpdateReq; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.req_head = c.liveroom_cs.ReqHead.decode(e, e.uint32()); break; case 2: r.stream_sid = e.string(); break; case 3: r.stream_id = e.bytes(); break; case 4: r.title = e.bytes(); break; case 5: r.stream_attr = e.bytes(); break; case 6: r.extra_info = e.bytes(); break; case 7: r.client_req_seq = e.uint32(); break; case 8: r.nickname = e.bytes(); break; default: e.skipType(7 & i) } } return r }, Z), o.StreamUpdateRsp = (K.prototype.rsp_head = null, K.prototype.stream_seq = 0, K.prototype.stream_ver = 0, K.create = function (e) { return new K(e) }, K.encode = function (e, t) { return t = t || s.create(), null != e.rsp_head && Object.hasOwnProperty.call(e, "rsp_head") && c.liveroom_cs.RspHead.encode(e.rsp_head, t.uint32(10).fork()).ldelim(), null != e.stream_seq && Object.hasOwnProperty.call(e, "stream_seq") && t.uint32(16).uint32(e.stream_seq), null != e.stream_ver && Object.hasOwnProperty.call(e, "stream_ver") && t.uint32(24).uint32(e.stream_ver), t }, K.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.StreamUpdateRsp; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.rsp_head = c.liveroom_cs.RspHead.decode(e, e.uint32()); break; case 2: r.stream_seq = e.uint32(); break; case 3: r.stream_ver = e.uint32(); break; default: e.skipType(7 & i) } } return r }, K), o.StreamListReq = (W.prototype.req_head = null, W.create = function (e) { return new W(e) }, W.encode = function (e, t) { return t = t || s.create(), null != e.req_head && Object.hasOwnProperty.call(e, "req_head") && c.liveroom_cs.ReqHead.encode(e.req_head, t.uint32(10).fork()).ldelim(), t }, W.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.StreamListReq; e.pos < A;) { var i = e.uint32(); i >>> 3 == 1 ? r.req_head = c.liveroom_cs.ReqHead.decode(e, e.uint32()) : e.skipType(7 & i) } return r }, W), o.StreamListRsp = (Y.prototype.rsp_head = null, Y.prototype.stream_seq = 0, Y.prototype.stream_info = a.emptyArray, Y.prototype.stream_refresh = 0, Y.prototype.stream_mix_info = a.emptyArray, Y.create = function (e) { return new Y(e) }, Y.encode = function (e, t) { if (t = t || s.create(), null != e.rsp_head && Object.hasOwnProperty.call(e, "rsp_head") && c.liveroom_cs.RspHead.encode(e.rsp_head, t.uint32(10).fork()).ldelim(), null != e.stream_seq && Object.hasOwnProperty.call(e, "stream_seq") && t.uint32(16).uint32(e.stream_seq), null != e.stream_info && e.stream_info.length) for (var A = 0; A < e.stream_info.length; ++A)c.liveroom_cs.StStreamInfo.encode(e.stream_info[A], t.uint32(26).fork()).ldelim(); if (null != e.stream_refresh && Object.hasOwnProperty.call(e, "stream_refresh") && t.uint32(32).uint32(e.stream_refresh), null != e.stream_mix_info && e.stream_mix_info.length) for (A = 0; A < e.stream_mix_info.length; ++A)c.liveroom_cs.StStreamInfo.encode(e.stream_mix_info[A], t.uint32(42).fork()).ldelim(); return t }, Y.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.StreamListRsp; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.rsp_head = c.liveroom_cs.RspHead.decode(e, e.uint32()); break; case 2: r.stream_seq = e.uint32(); break; case 3: r.stream_info && r.stream_info.length || (r.stream_info = []), r.stream_info.push(c.liveroom_cs.StStreamInfo.decode(e, e.uint32())); break; case 4: r.stream_refresh = e.uint32(); break; case 5: r.stream_mix_info && r.stream_mix_info.length || (r.stream_mix_info = []), r.stream_mix_info.push(c.liveroom_cs.StStreamInfo.decode(e, e.uint32())); break; default: e.skipType(7 & i) } } return r }, Y), o.StStreamInfo = (X.prototype.stream_sid = "", X.prototype.stream_id = a.newBuffer([]), X.prototype.id_name = a.newBuffer([]), X.prototype.nick_name = a.newBuffer([]), X.prototype.extra_info = a.newBuffer([]), X.prototype.title = a.newBuffer([]), X.prototype.stream_ver = 0, X.prototype.stream_attr = a.newBuffer([]), X.prototype.create_time = a.Long ? a.Long.fromBits(0, 0, !1) : 0, X.prototype.stream_src = 0, X.prototype.state = 0, X.prototype.stream_type = 0, X.prototype.stream_nid = 0, X.create = function (e) { return new X(e) }, X.encode = function (e, t) { return t = t || s.create(), null != e.stream_sid && Object.hasOwnProperty.call(e, "stream_sid") && t.uint32(10).string(e.stream_sid), null != e.stream_id && Object.hasOwnProperty.call(e, "stream_id") && t.uint32(18).bytes(e.stream_id), null != e.id_name && Object.hasOwnProperty.call(e, "id_name") && t.uint32(26).bytes(e.id_name), null != e.nick_name && Object.hasOwnProperty.call(e, "nick_name") && t.uint32(34).bytes(e.nick_name), null != e.extra_info && Object.hasOwnProperty.call(e, "extra_info") && t.uint32(42).bytes(e.extra_info), null != e.title && Object.hasOwnProperty.call(e, "title") && t.uint32(50).bytes(e.title), null != e.stream_ver && Object.hasOwnProperty.call(e, "stream_ver") && t.uint32(56).uint32(e.stream_ver), null != e.stream_attr && Object.hasOwnProperty.call(e, "stream_attr") && t.uint32(66).bytes(e.stream_attr), null != e.create_time && Object.hasOwnProperty.call(e, "create_time") && t.uint32(72).int64(e.create_time), null != e.stream_src && Object.hasOwnProperty.call(e, "stream_src") && t.uint32(80).uint32(e.stream_src), null != e.state && Object.hasOwnProperty.call(e, "state") && t.uint32(88).uint32(e.state), null != e.stream_type && Object.hasOwnProperty.call(e, "stream_type") && t.uint32(96).uint32(e.stream_type), null != e.stream_nid && Object.hasOwnProperty.call(e, "stream_nid") && t.uint32(104).uint32(e.stream_nid), t }, X.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.StStreamInfo; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.stream_sid = e.string(); break; case 2: r.stream_id = e.bytes(); break; case 3: r.id_name = e.bytes(); break; case 4: r.nick_name = e.bytes(); break; case 5: r.extra_info = e.bytes(); break; case 6: r.title = e.bytes(); break; case 7: r.stream_ver = e.uint32(); break; case 8: r.stream_attr = e.bytes(); break; case 9: r.create_time = e.int64(); break; case 10: r.stream_src = e.uint32(); break; case 11: r.state = e.uint32(); break; case 12: r.stream_type = e.uint32(); break; case 13: r.stream_nid = e.uint32(); break; default: e.skipType(7 & i) } } return r }, X), o.StDstUser = (J.prototype.id_name = a.newBuffer([]), J.prototype.id = a.Long ? a.Long.fromBits(0, 0, !0) : 0, J.create = function (e) { return new J(e) }, J.encode = function (e, t) { return t = t || s.create(), null != e.id_name && Object.hasOwnProperty.call(e, "id_name") && t.uint32(10).bytes(e.id_name), null != e.id && Object.hasOwnProperty.call(e, "id") && t.uint32(16).uint64(e.id), t }, J.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.StDstUser; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.id_name = e.bytes(); break; case 2: r.id = e.uint64(); break; default: e.skipType(7 & i) } } return r }, J), o.SignalLiveReq = (Q.prototype.req_head = null, Q.prototype.push_message = a.newBuffer([]), Q.prototype.dst_userlist = a.emptyArray, Q.create = function (e) { return new Q(e) }, Q.encode = function (e, t) { if (t = t || s.create(), null != e.req_head && Object.hasOwnProperty.call(e, "req_head") && c.liveroom_cs.ReqHead.encode(e.req_head, t.uint32(10).fork()).ldelim(), null != e.push_message && Object.hasOwnProperty.call(e, "push_message") && t.uint32(18).bytes(e.push_message), null != e.dst_userlist && e.dst_userlist.length) for (var A = 0; A < e.dst_userlist.length; ++A)c.liveroom_cs.StDstUser.encode(e.dst_userlist[A], t.uint32(26).fork()).ldelim(); return t }, Q.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.SignalLiveReq; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.req_head = c.liveroom_cs.ReqHead.decode(e, e.uint32()); break; case 2: r.push_message = e.bytes(); break; case 3: r.dst_userlist && r.dst_userlist.length || (r.dst_userlist = []), r.dst_userlist.push(c.liveroom_cs.StDstUser.decode(e, e.uint32())); break; default: e.skipType(7 & i) } } return r }, Q), o.SignalLiveRsp = ($.prototype.rsp_head = null, $.create = function (e) { return new $(e) }, $.encode = function (e, t) { return t = t || s.create(), null != e.rsp_head && Object.hasOwnProperty.call(e, "rsp_head") && c.liveroom_cs.RspHead.encode(e.rsp_head, t.uint32(10).fork()).ldelim(), t }, $.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.SignalLiveRsp; e.pos < A;) { var i = e.uint32(); i >>> 3 == 1 ? r.rsp_head = c.liveroom_cs.RspHead.decode(e, e.uint32()) : e.skipType(7 & i) } return r }, $), o.SignalLiveResultReq = (ee.prototype.req_head = null, ee.prototype.push_message = a.newBuffer([]), ee.prototype.dst_userlist = a.emptyArray, ee.create = function (e) { return new ee(e) }, ee.encode = function (e, t) { if (t = t || s.create(), null != e.req_head && Object.hasOwnProperty.call(e, "req_head") && c.liveroom_cs.ReqHead.encode(e.req_head, t.uint32(10).fork()).ldelim(), null != e.push_message && Object.hasOwnProperty.call(e, "push_message") && t.uint32(18).bytes(e.push_message), null != e.dst_userlist && e.dst_userlist.length) for (var A = 0; A < e.dst_userlist.length; ++A)c.liveroom_cs.StDstUser.encode(e.dst_userlist[A], t.uint32(26).fork()).ldelim(); return t }, ee.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.SignalLiveResultReq; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.req_head = c.liveroom_cs.ReqHead.decode(e, e.uint32()); break; case 2: r.push_message = e.bytes(); break; case 3: r.dst_userlist && r.dst_userlist.length || (r.dst_userlist = []), r.dst_userlist.push(c.liveroom_cs.StDstUser.decode(e, e.uint32())); break; default: e.skipType(7 & i) } } return r }, ee), o.SignalLiveResulRsp = (te.prototype.rsp_head = null, te.create = function (e) { return new te(e) }, te.encode = function (e, t) { return t = t || s.create(), null != e.rsp_head && Object.hasOwnProperty.call(e, "rsp_head") && c.liveroom_cs.RspHead.encode(e.rsp_head, t.uint32(10).fork()).ldelim(), t }, te.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.SignalLiveResulRsp; e.pos < A;) { var i = e.uint32(); i >>> 3 == 1 ? r.rsp_head = c.liveroom_cs.RspHead.decode(e, e.uint32()) : e.skipType(7 & i) } return r }, te), o.SignalLiveInviteReq = (ne.prototype.req_head = null, ne.prototype.push_message = a.newBuffer([]), ne.prototype.dst_userlist = a.emptyArray, ne.create = function (e) { return new ne(e) }, ne.encode = function (e, t) { if (t = t || s.create(), null != e.req_head && Object.hasOwnProperty.call(e, "req_head") && c.liveroom_cs.ReqHead.encode(e.req_head, t.uint32(10).fork()).ldelim(), null != e.push_message && Object.hasOwnProperty.call(e, "push_message") && t.uint32(18).bytes(e.push_message), null != e.dst_userlist && e.dst_userlist.length) for (var A = 0; A < e.dst_userlist.length; ++A)c.liveroom_cs.StDstUser.encode(e.dst_userlist[A], t.uint32(26).fork()).ldelim(); return t }, ne.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.SignalLiveInviteReq; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.req_head = c.liveroom_cs.ReqHead.decode(e, e.uint32()); break; case 2: r.push_message = e.bytes(); break; case 3: r.dst_userlist && r.dst_userlist.length || (r.dst_userlist = []), r.dst_userlist.push(c.liveroom_cs.StDstUser.decode(e, e.uint32())); break; default: e.skipType(7 & i) } } return r }, ne), o.SignalLiveInviteRsp = (re.prototype.rsp_head = null, re.create = function (e) { return new re(e) }, re.encode = function (e, t) { return t = t || s.create(), null != e.rsp_head && Object.hasOwnProperty.call(e, "rsp_head") && c.liveroom_cs.RspHead.encode(e.rsp_head, t.uint32(10).fork()).ldelim(), t }, re.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.SignalLiveInviteRsp; e.pos < A;) { var i = e.uint32(); i >>> 3 == 1 ? r.rsp_head = c.liveroom_cs.RspHead.decode(e, e.uint32()) : e.skipType(7 & i) } return r }, re), o.SignalLiveStopReq = (oe.prototype.req_head = null, oe.prototype.push_message = a.newBuffer([]), oe.prototype.dst_userlist = a.emptyArray, oe.create = function (e) { return new oe(e) }, oe.encode = function (e, t) { if (t = t || s.create(), null != e.req_head && Object.hasOwnProperty.call(e, "req_head") && c.liveroom_cs.ReqHead.encode(e.req_head, t.uint32(10).fork()).ldelim(), null != e.push_message && Object.hasOwnProperty.call(e, "push_message") && t.uint32(18).bytes(e.push_message), null != e.dst_userlist && e.dst_userlist.length) for (var A = 0; A < e.dst_userlist.length; ++A)c.liveroom_cs.StDstUser.encode(e.dst_userlist[A], t.uint32(26).fork()).ldelim(); return t }, oe.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.SignalLiveStopReq; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.req_head = c.liveroom_cs.ReqHead.decode(e, e.uint32()); break; case 2: r.push_message = e.bytes(); break; case 3: r.dst_userlist && r.dst_userlist.length || (r.dst_userlist = []), r.dst_userlist.push(c.liveroom_cs.StDstUser.decode(e, e.uint32())); break; default: e.skipType(7 & i) } } return r }, oe), o.SignalLiveStopRsp = (ie.prototype.rsp_head = null, ie.create = function (e) { return new ie(e) }, ie.encode = function (e, t) { return t = t || s.create(), null != e.rsp_head && Object.hasOwnProperty.call(e, "rsp_head") && c.liveroom_cs.RspHead.encode(e.rsp_head, t.uint32(10).fork()).ldelim(), t }, ie.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.SignalLiveStopRsp; e.pos < A;) { var i = e.uint32(); i >>> 3 == 1 ? r.rsp_head = c.liveroom_cs.RspHead.decode(e, e.uint32()) : e.skipType(7 & i) } return r }, ie), o.SignalLiveCustomReq = (se.prototype.req_head = null, se.prototype.push_message = a.newBuffer([]), se.prototype.dst_userlist = a.emptyArray, se.create = function (e) { return new se(e) }, se.encode = function (e, t) { if (t = t || s.create(), null != e.req_head && Object.hasOwnProperty.call(e, "req_head") && c.liveroom_cs.ReqHead.encode(e.req_head, t.uint32(10).fork()).ldelim(), null != e.push_message && Object.hasOwnProperty.call(e, "push_message") && t.uint32(18).bytes(e.push_message), null != e.dst_userlist && e.dst_userlist.length) for (var A = 0; A < e.dst_userlist.length; ++A)c.liveroom_cs.StDstUser.encode(e.dst_userlist[A], t.uint32(26).fork()).ldelim(); return t }, se.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.SignalLiveCustomReq; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.req_head = c.liveroom_cs.ReqHead.decode(e, e.uint32()); break; case 2: r.push_message = e.bytes(); break; case 3: r.dst_userlist && r.dst_userlist.length || (r.dst_userlist = []), r.dst_userlist.push(c.liveroom_cs.StDstUser.decode(e, e.uint32())); break; default: e.skipType(7 & i) } } return r }, se), o.SignalLiveCustomRsp = (ae.prototype.rsp_head = null, ae.create = function (e) { return new ae(e) }, ae.encode = function (e, t) { return t = t || s.create(), null != e.rsp_head && Object.hasOwnProperty.call(e, "rsp_head") && c.liveroom_cs.RspHead.encode(e.rsp_head, t.uint32(10).fork()).ldelim(), t }, ae.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.SignalLiveCustomRsp; e.pos < A;) { var i = e.uint32(); i >>> 3 == 1 ? r.rsp_head = c.liveroom_cs.RspHead.decode(e, e.uint32()) : e.skipType(7 & i) } return r }, ae), o.ImChatReq = (ce.prototype.req_head = null, ce.prototype.msg_category = 0, ce.prototype.msg_type = 0, ce.prototype.msg_priority = 0, ce.prototype.msg_content = a.newBuffer([]), ce.prototype.dst_userlist = a.emptyArray, ce.create = function (e) { return new ce(e) }, ce.encode = function (e, t) { if (t = t || s.create(), null != e.req_head && Object.hasOwnProperty.call(e, "req_head") && c.liveroom_cs.ReqHead.encode(e.req_head, t.uint32(10).fork()).ldelim(), null != e.msg_category && Object.hasOwnProperty.call(e, "msg_category") && t.uint32(16).uint32(e.msg_category), null != e.msg_type && Object.hasOwnProperty.call(e, "msg_type") && t.uint32(24).uint32(e.msg_type), null != e.msg_priority && Object.hasOwnProperty.call(e, "msg_priority") && t.uint32(32).uint32(e.msg_priority), null != e.msg_content && Object.hasOwnProperty.call(e, "msg_content") && t.uint32(42).bytes(e.msg_content), null != e.dst_userlist && e.dst_userlist.length) for (var A = 0; A < e.dst_userlist.length; ++A)c.liveroom_cs.StDstUser.encode(e.dst_userlist[A], t.uint32(50).fork()).ldelim(); return t }, ce.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.ImChatReq; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.req_head = c.liveroom_cs.ReqHead.decode(e, e.uint32()); break; case 2: r.msg_category = e.uint32(); break; case 3: r.msg_type = e.uint32(); break; case 4: r.msg_priority = e.uint32(); break; case 5: r.msg_content = e.bytes(); break; case 6: r.dst_userlist && r.dst_userlist.length || (r.dst_userlist = []), r.dst_userlist.push(c.liveroom_cs.StDstUser.decode(e, e.uint32())); break; default: e.skipType(7 & i) } } return r }, ce), o.ImChatRsp = (ue.prototype.rsp_head = null, ue.prototype.msg_id = a.Long ? a.Long.fromBits(0, 0, !0) : 0, ue.create = function (e) { return new ue(e) }, ue.encode = function (e, t) { return t = t || s.create(), null != e.rsp_head && Object.hasOwnProperty.call(e, "rsp_head") && c.liveroom_cs.RspHead.encode(e.rsp_head, t.uint32(10).fork()).ldelim(), null != e.msg_id && Object.hasOwnProperty.call(e, "msg_id") && t.uint32(16).uint64(e.msg_id), t }, ue.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.ImChatRsp; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.rsp_head = c.liveroom_cs.RspHead.decode(e, e.uint32()); break; case 2: r.msg_id = e.uint64(); break; default: e.skipType(7 & i) } } return r }, ue), o.ImGethatReq = (le.prototype.req_head = null, le.prototype.msg_priority = 0, le.prototype.msg_id = a.Long ? a.Long.fromBits(0, 0, !0) : 0, le.prototype.sort_type = 0, le.prototype.msg_count = 0, le.create = function (e) { return new le(e) }, le.encode = function (e, t) { return t = t || s.create(), null != e.req_head && Object.hasOwnProperty.call(e, "req_head") && c.liveroom_cs.ReqHead.encode(e.req_head, t.uint32(10).fork()).ldelim(), null != e.msg_priority && Object.hasOwnProperty.call(e, "msg_priority") && t.uint32(16).uint32(e.msg_priority), null != e.msg_id && Object.hasOwnProperty.call(e, "msg_id") && t.uint32(24).uint64(e.msg_id), null != e.sort_type && Object.hasOwnProperty.call(e, "sort_type") && t.uint32(32).uint32(e.sort_type), null != e.msg_count && Object.hasOwnProperty.call(e, "msg_count") && t.uint32(40).uint32(e.msg_count), t }, le.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.ImGethatReq; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.req_head = c.liveroom_cs.ReqHead.decode(e, e.uint32()); break; case 2: r.msg_priority = e.uint32(); break; case 3: r.msg_id = e.uint64(); break; case 4: r.sort_type = e.uint32(); break; case 5: r.msg_count = e.uint32(); break; default: e.skipType(7 & i) } } return r }, le), o.ImGetChatRsp = (he.prototype.rsp_head = null, he.prototype.server_msg_id = a.Long ? a.Long.fromBits(0, 0, !0) : 0, he.prototype.ret_msg_id = a.Long ? a.Long.fromBits(0, 0, !0) : 0, he.prototype.msg_data = a.emptyArray, he.create = function (e) { return new he(e) }, he.encode = function (e, t) { if (t = t || s.create(), null != e.rsp_head && Object.hasOwnProperty.call(e, "rsp_head") && c.liveroom_cs.RspHead.encode(e.rsp_head, t.uint32(10).fork()).ldelim(), null != e.server_msg_id && Object.hasOwnProperty.call(e, "server_msg_id") && t.uint32(16).uint64(e.server_msg_id), null != e.ret_msg_id && Object.hasOwnProperty.call(e, "ret_msg_id") && t.uint32(24).uint64(e.ret_msg_id), null != e.msg_data && e.msg_data.length) for (var A = 0; A < e.msg_data.length; ++A)c.liveroom_cs.StMsgData.encode(e.msg_data[A], t.uint32(34).fork()).ldelim(); return t }, he.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.ImGetChatRsp; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.rsp_head = c.liveroom_cs.RspHead.decode(e, e.uint32()); break; case 2: r.server_msg_id = e.uint64(); break; case 3: r.ret_msg_id = e.uint64(); break; case 4: r.msg_data && r.msg_data.length || (r.msg_data = []), r.msg_data.push(c.liveroom_cs.StMsgData.decode(e, e.uint32())); break; default: e.skipType(7 & i) } } return r }, he), o.StMsgData = (pe.prototype.id_name = a.newBuffer([]), pe.prototype.nick_name = a.newBuffer([]), pe.prototype.role = 0, pe.prototype.msg_id = a.Long ? a.Long.fromBits(0, 0, !0) : 0, pe.prototype.msg_category = 0, pe.prototype.msg_type = 0, pe.prototype.msg_priority = 0, pe.prototype.msg_content = a.newBuffer([]), pe.prototype.send_time = a.Long ? a.Long.fromBits(0, 0, !1) : 0, pe.create = function (e) { return new pe(e) }, pe.encode = function (e, t) { return t = t || s.create(), null != e.id_name && Object.hasOwnProperty.call(e, "id_name") && t.uint32(10).bytes(e.id_name), null != e.nick_name && Object.hasOwnProperty.call(e, "nick_name") && t.uint32(18).bytes(e.nick_name), null != e.role && Object.hasOwnProperty.call(e, "role") && t.uint32(24).uint32(e.role), null != e.msg_id && Object.hasOwnProperty.call(e, "msg_id") && t.uint32(32).uint64(e.msg_id), null != e.msg_category && Object.hasOwnProperty.call(e, "msg_category") && t.uint32(40).uint32(e.msg_category), null != e.msg_type && Object.hasOwnProperty.call(e, "msg_type") && t.uint32(48).uint32(e.msg_type), null != e.msg_priority && Object.hasOwnProperty.call(e, "msg_priority") && t.uint32(56).uint32(e.msg_priority), null != e.msg_content && Object.hasOwnProperty.call(e, "msg_content") && t.uint32(66).bytes(e.msg_content), null != e.send_time && Object.hasOwnProperty.call(e, "send_time") && t.uint32(72).int64(e.send_time), t }, pe.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.StMsgData; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.id_name = e.bytes(); break; case 2: r.nick_name = e.bytes(); break; case 3: r.role = e.uint32(); break; case 4: r.msg_id = e.uint64(); break; case 5: r.msg_category = e.uint32(); break; case 6: r.msg_type = e.uint32(); break; case 7: r.msg_priority = e.uint32(); break; case 8: r.msg_content = e.bytes(); break; case 9: r.send_time = e.int64(); break; default: e.skipType(7 & i) } } return r }, pe), o.EnterReq = (de.prototype.req_head = null, de.prototype.switch_session_id = a.Long ? a.Long.fromBits(0, 0, !0) : 0, de.prototype.nick_name = a.newBuffer([]), de.prototype.role = 0, de.prototype.net_type = 0, de.prototype.config = null, de.prototype.lv_key = "", de.prototype.third_token = a.newBuffer([]), de.prototype.cluster_req = a.Long ? a.Long.fromBits(0, 0, !0) : 0, de.prototype.user_count_limit = 0, de.prototype.relate_service = "", de.prototype.conn_type = 0, de.prototype.room_name = a.newBuffer([]), de.create = function (e) { return new de(e) }, de.encode = function (e, t) { return t = t || s.create(), null != e.req_head && Object.hasOwnProperty.call(e, "req_head") && c.liveroom_cs.ReqHead.encode(e.req_head, t.uint32(10).fork()).ldelim(), null != e.switch_session_id && Object.hasOwnProperty.call(e, "switch_session_id") && t.uint32(16).uint64(e.switch_session_id), null != e.nick_name && Object.hasOwnProperty.call(e, "nick_name") && t.uint32(26).bytes(e.nick_name), null != e.role && Object.hasOwnProperty.call(e, "role") && t.uint32(32).uint32(e.role), null != e.net_type && Object.hasOwnProperty.call(e, "net_type") && t.uint32(40).uint32(e.net_type), null != e.config && Object.hasOwnProperty.call(e, "config") && c.liveroom_cs.StConfigList.encode(e.config, t.uint32(50).fork()).ldelim(), null != e.lv_key && Object.hasOwnProperty.call(e, "lv_key") && t.uint32(58).string(e.lv_key), null != e.third_token && Object.hasOwnProperty.call(e, "third_token") && t.uint32(66).bytes(e.third_token), null != e.cluster_req && Object.hasOwnProperty.call(e, "cluster_req") && t.uint32(72).uint64(e.cluster_req), null != e.user_count_limit && Object.hasOwnProperty.call(e, "user_count_limit") && t.uint32(80).uint32(e.user_count_limit), null != e.relate_service && Object.hasOwnProperty.call(e, "relate_service") && t.uint32(90).string(e.relate_service), null != e.conn_type && Object.hasOwnProperty.call(e, "conn_type") && t.uint32(96).uint32(e.conn_type), null != e.room_name && Object.hasOwnProperty.call(e, "room_name") && t.uint32(106).bytes(e.room_name), t }, de.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.EnterReq; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.req_head = c.liveroom_cs.ReqHead.decode(e, e.uint32()); break; case 2: r.switch_session_id = e.uint64(); break; case 3: r.nick_name = e.bytes(); break; case 4: r.role = e.uint32(); break; case 5: r.net_type = e.uint32(); break; case 6: r.config = c.liveroom_cs.StConfigList.decode(e, e.uint32()); break; case 7: r.lv_key = e.string(); break; case 8: r.third_token = e.bytes(); break; case 9: r.cluster_req = e.uint64(); break; case 10: r.user_count_limit = e.uint32(); break; case 11: r.relate_service = e.string(); break; case 12: r.conn_type = e.uint32(); break; case 13: r.room_name = e.bytes(); break; default: e.skipType(7 & i) } } return r }, de), o.EnterRsp = (_e.prototype.rsp_head = null, _e.prototype.room_id = a.newBuffer([]), _e.prototype.user_session_id = a.Long ? a.Long.fromBits(0, 0, !0) : 0, _e.prototype.room_session_id = a.Long ? a.Long.fromBits(0, 0, !0) : 0, _e.prototype.user_id = a.Long ? a.Long.fromBits(0, 0, !0) : 0, _e.prototype.ret_timestamp = a.Long ? a.Long.fromBits(0, 0, !1) : 0, _e.prototype.bigim_time_window = 0, _e.prototype.dati_time_window = a.Long ? a.Long.fromBits(0, 0, !1) : 0, _e.prototype.room_id32 = 0, _e.prototype.hb_interval = 0, _e.prototype.hb_timeout = 0, _e.prototype.lv_key = "", _e.prototype.zp_key = "", _e.prototype.online_count = 0, _e.prototype.anchor_info = null, _e.prototype.stream_seq = 0, _e.prototype.stream_info = a.emptyArray, _e.prototype.stream_mix_info = a.emptyArray, _e.prototype.userlist_merge_timeout = 0, _e.prototype.userlist_interval = 0, _e.prototype.stream_list_push_merge_timeout = 0, _e.prototype.stream_list_hb_wait_merge_time = 0, _e.prototype.trans_list_seq = 0, _e.prototype.trans_seqs = a.emptyArray, _e.prototype.cluster_name = "", _e.prototype.token_remain_time = 0, _e.prototype.stream_fetch_flag = 0, _e.create = function (e) { return new _e(e) }, _e.encode = function (e, t) { if (t = t || s.create(), null != e.rsp_head && Object.hasOwnProperty.call(e, "rsp_head") && c.liveroom_cs.RspHead.encode(e.rsp_head, t.uint32(10).fork()).ldelim(), null != e.room_id && Object.hasOwnProperty.call(e, "room_id") && t.uint32(18).bytes(e.room_id), null != e.user_session_id && Object.hasOwnProperty.call(e, "user_session_id") && t.uint32(24).uint64(e.user_session_id), null != e.room_session_id && Object.hasOwnProperty.call(e, "room_session_id") && t.uint32(32).uint64(e.room_session_id), null != e.user_id && Object.hasOwnProperty.call(e, "user_id") && t.uint32(40).uint64(e.user_id), null != e.ret_timestamp && Object.hasOwnProperty.call(e, "ret_timestamp") && t.uint32(49).fixed64(e.ret_timestamp), null != e.bigim_time_window && Object.hasOwnProperty.call(e, "bigim_time_window") && t.uint32(56).uint32(e.bigim_time_window), null != e.dati_time_window && Object.hasOwnProperty.call(e, "dati_time_window") && t.uint32(64).int64(e.dati_time_window), null != e.room_id32 && Object.hasOwnProperty.call(e, "room_id32") && t.uint32(72).uint32(e.room_id32), null != e.hb_interval && Object.hasOwnProperty.call(e, "hb_interval") && t.uint32(80).uint32(e.hb_interval), null != e.hb_timeout && Object.hasOwnProperty.call(e, "hb_timeout") && t.uint32(88).uint32(e.hb_timeout), null != e.lv_key && Object.hasOwnProperty.call(e, "lv_key") && t.uint32(98).string(e.lv_key), null != e.zp_key && Object.hasOwnProperty.call(e, "zp_key") && t.uint32(106).string(e.zp_key), null != e.online_count && Object.hasOwnProperty.call(e, "online_count") && t.uint32(112).uint32(e.online_count), null != e.anchor_info && Object.hasOwnProperty.call(e, "anchor_info") && c.liveroom_cs.StAnchorInfo.encode(e.anchor_info, t.uint32(122).fork()).ldelim(), null != e.stream_seq && Object.hasOwnProperty.call(e, "stream_seq") && t.uint32(128).uint32(e.stream_seq), null != e.stream_info && e.stream_info.length) for (var A = 0; A < e.stream_info.length; ++A)c.liveroom_cs.StStreamInfo.encode(e.stream_info[A], t.uint32(138).fork()).ldelim(); if (null != e.stream_mix_info && e.stream_mix_info.length) for (A = 0; A < e.stream_mix_info.length; ++A)c.liveroom_cs.StStreamInfo.encode(e.stream_mix_info[A], t.uint32(146).fork()).ldelim(); if (null != e.userlist_merge_timeout && Object.hasOwnProperty.call(e, "userlist_merge_timeout") && t.uint32(152).uint32(e.userlist_merge_timeout), null != e.userlist_interval && Object.hasOwnProperty.call(e, "userlist_interval") && t.uint32(160).uint32(e.userlist_interval), null != e.stream_list_push_merge_timeout && Object.hasOwnProperty.call(e, "stream_list_push_merge_timeout") && t.uint32(168).uint32(e.stream_list_push_merge_timeout), null != e.stream_list_hb_wait_merge_time && Object.hasOwnProperty.call(e, "stream_list_hb_wait_merge_time") && t.uint32(176).uint32(e.stream_list_hb_wait_merge_time), null != e.trans_list_seq && Object.hasOwnProperty.call(e, "trans_list_seq") && t.uint32(184).uint32(e.trans_list_seq), null != e.trans_seqs && e.trans_seqs.length) for (A = 0; A < e.trans_seqs.length; ++A)c.liveroom_cs.StTransInfo.encode(e.trans_seqs[A], t.uint32(194).fork()).ldelim(); return null != e.cluster_name && Object.hasOwnProperty.call(e, "cluster_name") && t.uint32(202).string(e.cluster_name), null != e.token_remain_time && Object.hasOwnProperty.call(e, "token_remain_time") && t.uint32(208).uint32(e.token_remain_time), null != e.stream_fetch_flag && Object.hasOwnProperty.call(e, "stream_fetch_flag") && t.uint32(216).uint32(e.stream_fetch_flag), t }, _e.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.EnterRsp; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.rsp_head = c.liveroom_cs.RspHead.decode(e, e.uint32()); break; case 2: r.room_id = e.bytes(); break; case 3: r.user_session_id = e.uint64(); break; case 4: r.room_session_id = e.uint64(); break; case 5: r.user_id = e.uint64(); break; case 6: r.ret_timestamp = e.fixed64(); break; case 7: r.bigim_time_window = e.uint32(); break; case 8: r.dati_time_window = e.int64(); break; case 9: r.room_id32 = e.uint32(); break; case 10: r.hb_interval = e.uint32(); break; case 11: r.hb_timeout = e.uint32(); break; case 12: r.lv_key = e.string(); break; case 13: r.zp_key = e.string(); break; case 14: r.online_count = e.uint32(); break; case 15: r.anchor_info = c.liveroom_cs.StAnchorInfo.decode(e, e.uint32()); break; case 16: r.stream_seq = e.uint32(); break; case 17: r.stream_info && r.stream_info.length || (r.stream_info = []), r.stream_info.push(c.liveroom_cs.StStreamInfo.decode(e, e.uint32())); break; case 18: r.stream_mix_info && r.stream_mix_info.length || (r.stream_mix_info = []), r.stream_mix_info.push(c.liveroom_cs.StStreamInfo.decode(e, e.uint32())); break; case 19: r.userlist_merge_timeout = e.uint32(); break; case 20: r.userlist_interval = e.uint32(); break; case 21: r.stream_list_push_merge_timeout = e.uint32(); break; case 22: r.stream_list_hb_wait_merge_time = e.uint32(); break; case 23: r.trans_list_seq = e.uint32(); break; case 24: r.trans_seqs && r.trans_seqs.length || (r.trans_seqs = []), r.trans_seqs.push(c.liveroom_cs.StTransInfo.decode(e, e.uint32())); break; case 25: r.cluster_name = e.string(); break; case 26: r.token_remain_time = e.uint32(); break; case 27: r.stream_fetch_flag = e.uint32(); break; default: e.skipType(7 & i) } } return r }, _e), o.StAnchorInfo = (fe.prototype.anchor_id_name = a.newBuffer([]), fe.prototype.anchor_id = a.Long ? a.Long.fromBits(0, 0, !0) : 0, fe.prototype.anchor_nick_name = a.newBuffer([]), fe.create = function (e) { return new fe(e) }, fe.encode = function (e, t) { return t = t || s.create(), null != e.anchor_id_name && Object.hasOwnProperty.call(e, "anchor_id_name") && t.uint32(10).bytes(e.anchor_id_name), null != e.anchor_id && Object.hasOwnProperty.call(e, "anchor_id") && t.uint32(16).uint64(e.anchor_id), null != e.anchor_nick_name && Object.hasOwnProperty.call(e, "anchor_nick_name") && t.uint32(26).bytes(e.anchor_nick_name), t }, fe.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.StAnchorInfo; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.anchor_id_name = e.bytes(); break; case 2: r.anchor_id = e.uint64(); break; case 3: r.anchor_nick_name = e.bytes(); break; default: e.skipType(7 & i) } } return r }, fe), o.QuitReq = (ge.prototype.req_head = null, ge.prototype.switch_session_id = a.Long ? a.Long.fromBits(0, 0, !0) : 0, ge.prototype.room_id32 = 0, ge.prototype.nick_name = a.newBuffer([]), ge.prototype.role = 0, ge.prototype.net_type = 0, ge.prototype.config_list = null, ge.create = function (e) { return new ge(e) }, ge.encode = function (e, t) { return t = t || s.create(), null != e.req_head && Object.hasOwnProperty.call(e, "req_head") && c.liveroom_cs.ReqHead.encode(e.req_head, t.uint32(10).fork()).ldelim(), null != e.switch_session_id && Object.hasOwnProperty.call(e, "switch_session_id") && t.uint32(16).uint64(e.switch_session_id), null != e.room_id32 && Object.hasOwnProperty.call(e, "room_id32") && t.uint32(24).uint32(e.room_id32), null != e.nick_name && Object.hasOwnProperty.call(e, "nick_name") && t.uint32(34).bytes(e.nick_name), null != e.role && Object.hasOwnProperty.call(e, "role") && t.uint32(40).uint32(e.role), null != e.net_type && Object.hasOwnProperty.call(e, "net_type") && t.uint32(48).uint32(e.net_type), null != e.config_list && Object.hasOwnProperty.call(e, "config_list") && c.liveroom_cs.StConfigList.encode(e.config_list, t.uint32(58).fork()).ldelim(), t }, ge.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.QuitReq; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.req_head = c.liveroom_cs.ReqHead.decode(e, e.uint32()); break; case 2: r.switch_session_id = e.uint64(); break; case 3: r.room_id32 = e.uint32(); break; case 4: r.nick_name = e.bytes(); break; case 5: r.role = e.uint32(); break; case 6: r.net_type = e.uint32(); break; case 7: r.config_list = c.liveroom_cs.StConfigList.decode(e, e.uint32()); break; default: e.skipType(7 & i) } } return r }, ge), o.StConfigList = (me.prototype.room_create_flag = 0, me.prototype.user_state_flag = 0, me.create = function (e) { return new me(e) }, me.encode = function (e, t) { return t = t || s.create(), null != e.room_create_flag && Object.hasOwnProperty.call(e, "room_create_flag") && t.uint32(8).uint32(e.room_create_flag), null != e.user_state_flag && Object.hasOwnProperty.call(e, "user_state_flag") && t.uint32(16).uint32(e.user_state_flag), t }, me.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.StConfigList; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.room_create_flag = e.uint32(); break; case 2: r.user_state_flag = e.uint32(); break; default: e.skipType(7 & i) } } return r }, me), o.QuitRsp = (ye.prototype.rsp_head = null, ye.prototype.room_id = a.newBuffer([]), ye.prototype.room_id32 = 0, ye.create = function (e) { return new ye(e) }, ye.encode = function (e, t) { return t = t || s.create(), null != e.rsp_head && Object.hasOwnProperty.call(e, "rsp_head") && c.liveroom_cs.RspHead.encode(e.rsp_head, t.uint32(10).fork()).ldelim(), null != e.room_id && Object.hasOwnProperty.call(e, "room_id") && t.uint32(18).bytes(e.room_id), null != e.room_id32 && Object.hasOwnProperty.call(e, "room_id32") && t.uint32(24).uint32(e.room_id32), t }, ye.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.QuitRsp; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.rsp_head = c.liveroom_cs.RspHead.decode(e, e.uint32()); break; case 2: r.room_id = e.bytes(); break; case 3: r.room_id32 = e.uint32(); break; default: e.skipType(7 & i) } } return r }, ye), o.RoomListReq = (ve.prototype.req_head = null, ve.create = function (e) { return new ve(e) }, ve.encode = function (e, t) { return t = t || s.create(), null != e.req_head && Object.hasOwnProperty.call(e, "req_head") && c.liveroom_cs.ReqHead.encode(e.req_head, t.uint32(10).fork()).ldelim(), t }, ve.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.RoomListReq; e.pos < A;) { var i = e.uint32(); i >>> 3 == 1 ? r.req_head = c.liveroom_cs.ReqHead.decode(e, e.uint32()) : e.skipType(7 & i) } return r }, ve), o.RoomListRsp = (be.prototype.rsp_head = null, be.prototype.room_list = a.emptyArray, be.create = function (e) { return new be(e) }, be.encode = function (e, t) { if (t = t || s.create(), null != e.rsp_head && Object.hasOwnProperty.call(e, "rsp_head") && c.liveroom_cs.RspHead.encode(e.rsp_head, t.uint32(10).fork()).ldelim(), null != e.room_list && e.room_list.length) for (var A = 0; A < e.room_list.length; ++A)c.liveroom_cs.StRoomListRoom.encode(e.room_list[A], t.uint32(18).fork()).ldelim(); return t }, be.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.RoomListRsp; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.rsp_head = c.liveroom_cs.RspHead.decode(e, e.uint32()); break; case 2: r.room_list && r.room_list.length || (r.room_list = []), r.room_list.push(c.liveroom_cs.StRoomListRoom.decode(e, e.uint32())); break; default: e.skipType(7 & i) } } return r }, be), o.StRoomListStream = (Ee.prototype.stream_id = a.newBuffer([]), Ee.create = function (e) { return new Ee(e) }, Ee.encode = function (e, t) { return t = t || s.create(), null != e.stream_id && Object.hasOwnProperty.call(e, "stream_id") && t.uint32(10).bytes(e.stream_id), t }, Ee.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.StRoomListStream; e.pos < A;) { var i = e.uint32(); i >>> 3 == 1 ? r.stream_id = e.bytes() : e.skipType(7 & i) } return r }, Ee), o.StRoomListRoom = (Oe.prototype.room_id = a.newBuffer([]), Oe.prototype.room_name = a.newBuffer([]), Oe.prototype.anchor_id_name = a.newBuffer([]), Oe.prototype.anchor_nick_name = a.newBuffer([]), Oe.prototype.stream_list = a.emptyArray, Oe.create = function (e) { return new Oe(e) }, Oe.encode = function (e, t) { if (t = t || s.create(), null != e.room_id && Object.hasOwnProperty.call(e, "room_id") && t.uint32(10).bytes(e.room_id), null != e.room_name && Object.hasOwnProperty.call(e, "room_name") && t.uint32(18).bytes(e.room_name), null != e.anchor_id_name && Object.hasOwnProperty.call(e, "anchor_id_name") && t.uint32(26).bytes(e.anchor_id_name), null != e.anchor_nick_name && Object.hasOwnProperty.call(e, "anchor_nick_name") && t.uint32(34).bytes(e.anchor_nick_name), null != e.stream_list && e.stream_list.length) for (var A = 0; A < e.stream_list.length; ++A)c.liveroom_cs.StRoomListStream.encode(e.stream_list[A], t.uint32(42).fork()).ldelim(); return t }, Oe.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.StRoomListRoom; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.room_id = e.bytes(); break; case 2: r.room_name = e.bytes(); break; case 3: r.anchor_id_name = e.bytes(); break; case 4: r.anchor_nick_name = e.bytes(); break; case 5: r.stream_list && r.stream_list.length || (r.stream_list = []), r.stream_list.push(c.liveroom_cs.StRoomListStream.decode(e, e.uint32())); break; default: e.skipType(7 & i) } } return r }, Oe), o.StTransSeqInfo = (Se.prototype.trans_type = a.newBuffer([]), Se.prototype.trans_seq = 0, Se.create = function (e) { return new Se(e) }, Se.encode = function (e, t) { return t = t || s.create(), null != e.trans_type && Object.hasOwnProperty.call(e, "trans_type") && t.uint32(10).bytes(e.trans_type), null != e.trans_seq && Object.hasOwnProperty.call(e, "trans_seq") && t.uint32(16).uint32(e.trans_seq), t }, Se.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.StTransSeqInfo; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.trans_type = e.bytes(); break; case 2: r.trans_seq = e.uint32(); break; default: e.skipType(7 & i) } } return r }, Se), o.StTransInfo = (Te.prototype.trans_channel = a.newBuffer([]), Te.prototype.trans_seq_array = a.emptyArray, Te.create = function (e) { return new Te(e) }, Te.encode = function (e, t) { if (t = t || s.create(), null != e.trans_channel && Object.hasOwnProperty.call(e, "trans_channel") && t.uint32(10).bytes(e.trans_channel), null != e.trans_seq_array && e.trans_seq_array.length) for (var A = 0; A < e.trans_seq_array.length; ++A)c.liveroom_cs.StTransSeqInfo.encode(e.trans_seq_array[A], t.uint32(18).fork()).ldelim(); return t }, Te.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.StTransInfo; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.trans_channel = e.bytes(); break; case 2: r.trans_seq_array && r.trans_seq_array.length || (r.trans_seq_array = []), r.trans_seq_array.push(c.liveroom_cs.StTransSeqInfo.decode(e, e.uint32())); break; default: e.skipType(7 & i) } } return r }, Te), o.TransReq = (ke.prototype.req_head = null, ke.prototype.nick_name = a.newBuffer([]), ke.prototype.role = 0, ke.prototype.trans_type = a.newBuffer([]), ke.prototype.trans_data = a.newBuffer([]), ke.prototype.trans_local_seq = 0, ke.prototype.trans_channel = a.newBuffer([]), ke.create = function (e) { return new ke(e) }, ke.encode = function (e, t) { return t = t || s.create(), null != e.req_head && Object.hasOwnProperty.call(e, "req_head") && c.liveroom_cs.ReqHead.encode(e.req_head, t.uint32(10).fork()).ldelim(), null != e.nick_name && Object.hasOwnProperty.call(e, "nick_name") && t.uint32(18).bytes(e.nick_name), null != e.role && Object.hasOwnProperty.call(e, "role") && t.uint32(24).uint32(e.role), null != e.trans_type && Object.hasOwnProperty.call(e, "trans_type") && t.uint32(34).bytes(e.trans_type), null != e.trans_data && Object.hasOwnProperty.call(e, "trans_data") && t.uint32(42).bytes(e.trans_data), null != e.trans_local_seq && Object.hasOwnProperty.call(e, "trans_local_seq") && t.uint32(48).uint32(e.trans_local_seq), null != e.trans_channel && Object.hasOwnProperty.call(e, "trans_channel") && t.uint32(58).bytes(e.trans_channel), t }, ke.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.TransReq; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.req_head = c.liveroom_cs.ReqHead.decode(e, e.uint32()); break; case 2: r.nick_name = e.bytes(); break; case 3: r.role = e.uint32(); break; case 4: r.trans_type = e.bytes(); break; case 5: r.trans_data = e.bytes(); break; case 6: r.trans_local_seq = e.uint32(); break; case 7: r.trans_channel = e.bytes(); break; default: e.skipType(7 & i) } } return r }, ke), o.TransRsp = (Re.prototype.rsp_head = null, Re.prototype.trans_type = a.newBuffer([]), Re.prototype.trans_seq = 0, Re.prototype.trans_list_seq = 0, Re.prototype.trans_channel = a.newBuffer([]), Re.create = function (e) { return new Re(e) }, Re.encode = function (e, t) { return t = t || s.create(), null != e.rsp_head && Object.hasOwnProperty.call(e, "rsp_head") && c.liveroom_cs.RspHead.encode(e.rsp_head, t.uint32(10).fork()).ldelim(), null != e.trans_type && Object.hasOwnProperty.call(e, "trans_type") && t.uint32(18).bytes(e.trans_type), null != e.trans_seq && Object.hasOwnProperty.call(e, "trans_seq") && t.uint32(24).uint32(e.trans_seq), null != e.trans_list_seq && Object.hasOwnProperty.call(e, "trans_list_seq") && t.uint32(32).uint32(e.trans_list_seq), null != e.trans_channel && Object.hasOwnProperty.call(e, "trans_channel") && t.uint32(42).bytes(e.trans_channel), t }, Re.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.TransRsp; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.rsp_head = c.liveroom_cs.RspHead.decode(e, e.uint32()); break; case 2: r.trans_type = e.bytes(); break; case 3: r.trans_seq = e.uint32(); break; case 4: r.trans_list_seq = e.uint32(); break; case 5: r.trans_channel = e.bytes(); break; default: e.skipType(7 & i) } } return r }, Re), o.TransFetchReq = (Ce.prototype.req_head = null, Ce.prototype.trans_channel = a.newBuffer([]), Ce.prototype.fetch_array = a.emptyArray, Ce.create = function (e) { return new Ce(e) }, Ce.encode = function (e, t) { if (t = t || s.create(), null != e.req_head && Object.hasOwnProperty.call(e, "req_head") && c.liveroom_cs.ReqHead.encode(e.req_head, t.uint32(10).fork()).ldelim(), null != e.trans_channel && Object.hasOwnProperty.call(e, "trans_channel") && t.uint32(18).bytes(e.trans_channel), null != e.fetch_array && e.fetch_array.length) for (var A = 0; A < e.fetch_array.length; ++A)c.liveroom_cs.StTransFetch.encode(e.fetch_array[A], t.uint32(26).fork()).ldelim(); return t }, Ce.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.TransFetchReq; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.req_head = c.liveroom_cs.ReqHead.decode(e, e.uint32()); break; case 2: r.trans_channel = e.bytes(); break; case 3: r.fetch_array && r.fetch_array.length || (r.fetch_array = []), r.fetch_array.push(c.liveroom_cs.StTransFetch.decode(e, e.uint32())); break; default: e.skipType(7 & i) } } return r }, Ce), o.StTransFetch = (we.prototype.trans_type = a.newBuffer([]), we.prototype.trans_local_seq = 0, we.create = function (e) { return new we(e) }, we.encode = function (e, t) { return t = t || s.create(), null != e.trans_type && Object.hasOwnProperty.call(e, "trans_type") && t.uint32(10).bytes(e.trans_type), null != e.trans_local_seq && Object.hasOwnProperty.call(e, "trans_local_seq") && t.uint32(16).uint32(e.trans_local_seq), t }, we.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.StTransFetch; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.trans_type = e.bytes(); break; case 2: r.trans_local_seq = e.uint32(); break; default: e.skipType(7 & i) } } return r }, we), o.TransFetchRsp = (Ne.prototype.rsp_head = null, Ne.prototype.trans_channel = a.newBuffer([]), Ne.prototype.trans_fetch_results = a.emptyArray, Ne.prototype.trans_list_seq = 0, Ne.create = function (e) { return new Ne(e) }, Ne.encode = function (e, t) { if (t = t || s.create(), null != e.rsp_head && Object.hasOwnProperty.call(e, "rsp_head") && c.liveroom_cs.RspHead.encode(e.rsp_head, t.uint32(10).fork()).ldelim(), null != e.trans_channel && Object.hasOwnProperty.call(e, "trans_channel") && t.uint32(18).bytes(e.trans_channel), null != e.trans_fetch_results && e.trans_fetch_results.length) for (var A = 0; A < e.trans_fetch_results.length; ++A)c.liveroom_cs.TransFetchResult.encode(e.trans_fetch_results[A], t.uint32(26).fork()).ldelim(); return null != e.trans_list_seq && Object.hasOwnProperty.call(e, "trans_list_seq") && t.uint32(32).uint32(e.trans_list_seq), t }, Ne.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.TransFetchRsp; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.rsp_head = c.liveroom_cs.RspHead.decode(e, e.uint32()); break; case 2: r.trans_channel = e.bytes(); break; case 3: r.trans_fetch_results && r.trans_fetch_results.length || (r.trans_fetch_results = []), r.trans_fetch_results.push(c.liveroom_cs.TransFetchResult.decode(e, e.uint32())); break; case 4: r.trans_list_seq = e.uint32(); break; default: e.skipType(7 & i) } } return r }, Ne), o.TransFetchResult = (Ie.prototype.trans_type = a.newBuffer([]), Ie.prototype.trans_data = a.newBuffer([]), Ie.prototype.trans_idname = a.newBuffer([]), Ie.prototype.trans_nickname = a.newBuffer([]), Ie.prototype.trans_role = 0, Ie.prototype.trans_send_time = a.Long ? a.Long.fromBits(0, 0, !1) : 0, Ie.prototype.trans_seq = 0, Ie.prototype.err_code = 0, Ie.create = function (e) { return new Ie(e) }, Ie.encode = function (e, t) { return t = t || s.create(), null != e.trans_type && Object.hasOwnProperty.call(e, "trans_type") && t.uint32(10).bytes(e.trans_type), null != e.trans_data && Object.hasOwnProperty.call(e, "trans_data") && t.uint32(18).bytes(e.trans_data), null != e.trans_idname && Object.hasOwnProperty.call(e, "trans_idname") && t.uint32(26).bytes(e.trans_idname), null != e.trans_nickname && Object.hasOwnProperty.call(e, "trans_nickname") && t.uint32(34).bytes(e.trans_nickname), null != e.trans_role && Object.hasOwnProperty.call(e, "trans_role") && t.uint32(40).uint32(e.trans_role), null != e.trans_send_time && Object.hasOwnProperty.call(e, "trans_send_time") && t.uint32(48).int64(e.trans_send_time), null != e.trans_seq && Object.hasOwnProperty.call(e, "trans_seq") && t.uint32(56).uint32(e.trans_seq), null != e.err_code && Object.hasOwnProperty.call(e, "err_code") && t.uint32(64).int32(e.err_code), t }, Ie.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.TransFetchResult; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.trans_type = e.bytes(); break; case 2: r.trans_data = e.bytes(); break; case 3: r.trans_idname = e.bytes(); break; case 4: r.trans_nickname = e.bytes(); break; case 5: r.trans_role = e.uint32(); break; case 6: r.trans_send_time = e.int64(); break; case 7: r.trans_seq = e.uint32(); break; case 8: r.err_code = e.int32(); break; default: e.skipType(7 & i) } } return r }, Ie), o.UserTransFetchReq = (Me.prototype.req_head = null, Me.prototype.nick_name = a.newBuffer([]), Me.prototype.role = 0, Me.prototype.trans_channel = a.newBuffer([]), Me.prototype.fetch_array = a.emptyArray, Me.create = function (e) { return new Me(e) }, Me.encode = function (e, t) { if (t = t || s.create(), null != e.req_head && Object.hasOwnProperty.call(e, "req_head") && c.liveroom_cs.ReqHead.encode(e.req_head, t.uint32(10).fork()).ldelim(), null != e.nick_name && Object.hasOwnProperty.call(e, "nick_name") && t.uint32(18).bytes(e.nick_name), null != e.role && Object.hasOwnProperty.call(e, "role") && t.uint32(24).uint32(e.role), null != e.trans_channel && Object.hasOwnProperty.call(e, "trans_channel") && t.uint32(34).bytes(e.trans_channel), null != e.fetch_array && e.fetch_array.length) for (var A = 0; A < e.fetch_array.length; ++A)c.liveroom_cs.StUserTransFetch.encode(e.fetch_array[A], t.uint32(42).fork()).ldelim(); return t }, Me.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.UserTransFetchReq; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.req_head = c.liveroom_cs.ReqHead.decode(e, e.uint32()); break; case 2: r.nick_name = e.bytes(); break; case 3: r.role = e.uint32(); break; case 4: r.trans_channel = e.bytes(); break; case 5: r.fetch_array && r.fetch_array.length || (r.fetch_array = []), r.fetch_array.push(c.liveroom_cs.StUserTransFetch.decode(e, e.uint32())); break; default: e.skipType(7 & i) } } return r }, Me), o.StUserTransFetch = (Le.prototype.trans_type = a.newBuffer([]), Le.prototype.trans_local_seq = 0, Le.create = function (e) { return new Le(e) }, Le.encode = function (e, t) { return t = t || s.create(), null != e.trans_type && Object.hasOwnProperty.call(e, "trans_type") && t.uint32(10).bytes(e.trans_type), null != e.trans_local_seq && Object.hasOwnProperty.call(e, "trans_local_seq") && t.uint32(16).uint32(e.trans_local_seq), t }, Le.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.StUserTransFetch; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.trans_type = e.bytes(); break; case 2: r.trans_local_seq = e.uint32(); break; default: e.skipType(7 & i) } } return r }, Le), o.UserTransFetchRsp = (Pe.prototype.rsp_head = null, Pe.prototype.trans_channel = a.newBuffer([]), Pe.prototype.trans_fetch_results = a.emptyArray, Pe.create = function (e) { return new Pe(e) }, Pe.encode = function (e, t) { if (t = t || s.create(), null != e.rsp_head && Object.hasOwnProperty.call(e, "rsp_head") && c.liveroom_cs.RspHead.encode(e.rsp_head, t.uint32(10).fork()).ldelim(), null != e.trans_channel && Object.hasOwnProperty.call(e, "trans_channel") && t.uint32(18).bytes(e.trans_channel), null != e.trans_fetch_results && e.trans_fetch_results.length) for (var A = 0; A < e.trans_fetch_results.length; ++A)c.liveroom_cs.StUserTransFetchResult.encode(e.trans_fetch_results[A], t.uint32(26).fork()).ldelim(); return t }, Pe.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.UserTransFetchRsp; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.rsp_head = c.liveroom_cs.RspHead.decode(e, e.uint32()); break; case 2: r.trans_channel = e.bytes(); break; case 3: r.trans_fetch_results && r.trans_fetch_results.length || (r.trans_fetch_results = []), r.trans_fetch_results.push(c.liveroom_cs.StUserTransFetchResult.decode(e, e.uint32())); break; default: e.skipType(7 & i) } } return r }, Pe), o.StUserTransFetchResult = (Ae.prototype.trans_type = a.newBuffer([]), Ae.prototype.trans_data = a.newBuffer([]), Ae.prototype.trans_idname = a.newBuffer([]), Ae.prototype.trans_nickname = a.newBuffer([]), Ae.prototype.trans_role = 0, Ae.prototype.trans_send_time = a.Long ? a.Long.fromBits(0, 0, !1) : 0, Ae.prototype.trans_seq = 0, Ae.prototype.err_code = 0, Ae.create = function (e) { return new Ae(e) }, Ae.encode = function (e, t) { return t = t || s.create(), null != e.trans_type && Object.hasOwnProperty.call(e, "trans_type") && t.uint32(10).bytes(e.trans_type), null != e.trans_data && Object.hasOwnProperty.call(e, "trans_data") && t.uint32(18).bytes(e.trans_data), null != e.trans_idname && Object.hasOwnProperty.call(e, "trans_idname") && t.uint32(26).bytes(e.trans_idname), null != e.trans_nickname && Object.hasOwnProperty.call(e, "trans_nickname") && t.uint32(34).bytes(e.trans_nickname), null != e.trans_role && Object.hasOwnProperty.call(e, "trans_role") && t.uint32(40).uint32(e.trans_role), null != e.trans_send_time && Object.hasOwnProperty.call(e, "trans_send_time") && t.uint32(48).int64(e.trans_send_time), null != e.trans_seq && Object.hasOwnProperty.call(e, "trans_seq") && t.uint32(56).uint32(e.trans_seq), null != e.err_code && Object.hasOwnProperty.call(e, "err_code") && t.uint32(64).int32(e.err_code), t }, Ae.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.StUserTransFetchResult; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.trans_type = e.bytes(); break; case 2: r.trans_data = e.bytes(); break; case 3: r.trans_idname = e.bytes(); break; case 4: r.trans_nickname = e.bytes(); break; case 5: r.trans_role = e.uint32(); break; case 6: r.trans_send_time = e.int64(); break; case 7: r.trans_seq = e.uint32(); break; case 8: r.err_code = e.int32(); break; default: e.skipType(7 & i) } } return r }, Ae), o.BigimChatReq = (De.prototype.req_head = null, De.prototype.nick_name = a.newBuffer([]), De.prototype.role = 0, De.prototype.msgs = a.emptyArray, De.create = function (e) { return new De(e) }, De.encode = function (e, t) { if (t = t || s.create(), null != e.req_head && Object.hasOwnProperty.call(e, "req_head") && c.liveroom_cs.ReqHead.encode(e.req_head, t.uint32(10).fork()).ldelim(), null != e.nick_name && Object.hasOwnProperty.call(e, "nick_name") && t.uint32(18).bytes(e.nick_name), null != e.role && Object.hasOwnProperty.call(e, "role") && t.uint32(24).uint32(e.role), null != e.msgs && e.msgs.length) for (var A = 0; A < e.msgs.length; ++A)c.liveroom_cs.StBigimChatData.encode(e.msgs[A], t.uint32(34).fork()).ldelim(); return t }, De.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.BigimChatReq; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.req_head = c.liveroom_cs.ReqHead.decode(e, e.uint32()); break; case 2: r.nick_name = e.bytes(); break; case 3: r.role = e.uint32(); break; case 4: r.msgs && r.msgs.length || (r.msgs = []), r.msgs.push(c.liveroom_cs.StBigimChatData.decode(e, e.uint32())); break; default: e.skipType(7 & i) } } return r }, De), o.StBigimChatData = (He.prototype.msg_category = 0, He.prototype.msg_type = 0, He.prototype.msg_content = a.newBuffer([]), He.prototype.msg_timestamp = a.Long ? a.Long.fromBits(0, 0, !1) : 0, He.prototype.bigmsg_client_id = a.newBuffer([]), He.create = function (e) { return new He(e) }, He.encode = function (e, t) { return t = t || s.create(), null != e.msg_category && Object.hasOwnProperty.call(e, "msg_category") && t.uint32(8).uint32(e.msg_category), null != e.msg_type && Object.hasOwnProperty.call(e, "msg_type") && t.uint32(16).uint32(e.msg_type), null != e.msg_content && Object.hasOwnProperty.call(e, "msg_content") && t.uint32(26).bytes(e.msg_content), null != e.msg_timestamp && Object.hasOwnProperty.call(e, "msg_timestamp") && t.uint32(32).int64(e.msg_timestamp), null != e.bigmsg_client_id && Object.hasOwnProperty.call(e, "bigmsg_client_id") && t.uint32(42).bytes(e.bigmsg_client_id), t }, He.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.StBigimChatData; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.msg_category = e.uint32(); break; case 2: r.msg_type = e.uint32(); break; case 3: r.msg_content = e.bytes(); break; case 4: r.msg_timestamp = e.int64(); break; case 5: r.bigmsg_client_id = e.bytes(); break; default: e.skipType(7 & i) } } return r }, He), o.BigimChatRsp = (Ue.prototype.rsp_head = null, Ue.prototype.bigim_time_window = 0, Ue.prototype.msgs = a.emptyArray, Ue.create = function (e) { return new Ue(e) }, Ue.encode = function (e, t) { if (t = t || s.create(), null != e.rsp_head && Object.hasOwnProperty.call(e, "rsp_head") && c.liveroom_cs.RspHead.encode(e.rsp_head, t.uint32(10).fork()).ldelim(), null != e.bigim_time_window && Object.hasOwnProperty.call(e, "bigim_time_window") && t.uint32(16).uint32(e.bigim_time_window), null != e.msgs && e.msgs.length) for (var A = 0; A < e.msgs.length; ++A)c.liveroom_cs.StBigimChatRspData.encode(e.msgs[A], t.uint32(26).fork()).ldelim(); return t }, Ue.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.BigimChatRsp; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.rsp_head = c.liveroom_cs.RspHead.decode(e, e.uint32()); break; case 2: r.bigim_time_window = e.uint32(); break; case 3: r.msgs && r.msgs.length || (r.msgs = []), r.msgs.push(c.liveroom_cs.StBigimChatRspData.decode(e, e.uint32())); break; default: e.skipType(7 & i) } } return r }, Ue), o.StBigimChatRspData = (je.prototype.bigmsg_id = a.newBuffer([]), je.prototype.bigmsg_client_id = a.newBuffer([]), je.create = function (e) { return new je(e) }, je.encode = function (e, t) { return t = t || s.create(), null != e.bigmsg_id && Object.hasOwnProperty.call(e, "bigmsg_id") && t.uint32(10).bytes(e.bigmsg_id), null != e.bigmsg_client_id && Object.hasOwnProperty.call(e, "bigmsg_client_id") && t.uint32(18).bytes(e.bigmsg_client_id), t }, je.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.StBigimChatRspData; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.bigmsg_id = e.bytes(); break; case 2: r.bigmsg_client_id = e.bytes(); break; default: e.skipType(7 & i) } } return r }, je), o.RelayReq = (xe.prototype.req_head = null, xe.prototype.nick_name = a.newBuffer([]), xe.prototype.role = 0, xe.prototype.relay_type = a.newBuffer([]), xe.prototype.relay_data = a.newBuffer([]), xe.create = function (e) { return new xe(e) }, xe.encode = function (e, t) { return t = t || s.create(), null != e.req_head && Object.hasOwnProperty.call(e, "req_head") && c.liveroom_cs.ReqHead.encode(e.req_head, t.uint32(10).fork()).ldelim(), null != e.nick_name && Object.hasOwnProperty.call(e, "nick_name") && t.uint32(18).bytes(e.nick_name), null != e.role && Object.hasOwnProperty.call(e, "role") && t.uint32(24).uint32(e.role), null != e.relay_type && Object.hasOwnProperty.call(e, "relay_type") && t.uint32(34).bytes(e.relay_type), null != e.relay_data && Object.hasOwnProperty.call(e, "relay_data") && t.uint32(42).bytes(e.relay_data), t }, xe.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.RelayReq; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.req_head = c.liveroom_cs.ReqHead.decode(e, e.uint32()); break; case 2: r.nick_name = e.bytes(); break; case 3: r.role = e.uint32(); break; case 4: r.relay_type = e.bytes(); break; case 5: r.relay_data = e.bytes(); break; default: e.skipType(7 & i) } } return r }, xe), o.RelayRsp = (Be.prototype.rsp_head = null, Be.prototype.reley_type = a.newBuffer([]), Be.prototype.relay_result = a.newBuffer([]), Be.create = function (e) { return new Be(e) }, Be.encode = function (e, t) { return t = t || s.create(), null != e.rsp_head && Object.hasOwnProperty.call(e, "rsp_head") && c.liveroom_cs.RspHead.encode(e.rsp_head, t.uint32(10).fork()).ldelim(), null != e.reley_type && Object.hasOwnProperty.call(e, "reley_type") && t.uint32(18).bytes(e.reley_type), null != e.relay_result && Object.hasOwnProperty.call(e, "relay_result") && t.uint32(26).bytes(e.relay_result), t }, Be.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.RelayRsp; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.rsp_head = c.liveroom_cs.RspHead.decode(e, e.uint32()); break; case 2: r.reley_type = e.bytes(); break; case 3: r.relay_result = e.bytes(); break; default: e.skipType(7 & i) } } return r }, Be), o.RenewTokenReq = (qe.prototype.req_head = null, qe.prototype.token = "", qe.create = function (e) { return new qe(e) }, qe.encode = function (e, t) { return t = t || s.create(), null != e.req_head && Object.hasOwnProperty.call(e, "req_head") && c.liveroom_cs.ReqHead.encode(e.req_head, t.uint32(10).fork()).ldelim(), null != e.token && Object.hasOwnProperty.call(e, "token") && t.uint32(18).string(e.token), t }, qe.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.RenewTokenReq; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.req_head = c.liveroom_cs.ReqHead.decode(e, e.uint32()); break; case 2: r.token = e.string(); break; default: e.skipType(7 & i) } } return r }, qe), o.RenewTokenRsp = (Ge.prototype.rsp_head = null, Ge.prototype.token_remain_time = 0, Ge.create = function (e) { return new Ge(e) }, Ge.encode = function (e, t) { return t = t || s.create(), null != e.rsp_head && Object.hasOwnProperty.call(e, "rsp_head") && c.liveroom_cs.RspHead.encode(e.rsp_head, t.uint32(10).fork()).ldelim(), null != e.token_remain_time && Object.hasOwnProperty.call(e, "token_remain_time") && t.uint32(16).uint32(e.token_remain_time), t }, Ge.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.RenewTokenRsp; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.rsp_head = c.liveroom_cs.RspHead.decode(e, e.uint32()); break; case 2: r.token_remain_time = e.uint32(); break; default: e.skipType(7 & i) } } return r }, Ge), o.UserAction = (ze.prototype.action = 0, ze.prototype.id_name = a.newBuffer([]), ze.prototype.nick_name = a.newBuffer([]), ze.prototype.role = 0, ze.prototype.login_time = a.Long ? a.Long.fromBits(0, 0, !1) : 0, ze.create = function (e) { return new ze(e) }, ze.encode = function (e, t) { return t = t || s.create(), null != e.action && Object.hasOwnProperty.call(e, "action") && t.uint32(8).uint32(e.action), null != e.id_name && Object.hasOwnProperty.call(e, "id_name") && t.uint32(18).bytes(e.id_name), null != e.nick_name && Object.hasOwnProperty.call(e, "nick_name") && t.uint32(26).bytes(e.nick_name), null != e.role && Object.hasOwnProperty.call(e, "role") && t.uint32(32).uint32(e.role), null != e.login_time && Object.hasOwnProperty.call(e, "login_time") && t.uint32(40).int64(e.login_time), t }, ze.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.UserAction; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.action = e.uint32(); break; case 2: r.id_name = e.bytes(); break; case 3: r.nick_name = e.bytes(); break; case 4: r.role = e.uint32(); break; case 5: r.login_time = e.int64(); break; default: e.skipType(7 & i) } } return r }, ze), o.PushUserInfoUpdated = (Ve.prototype.room_id = a.newBuffer([]), Ve.prototype.server_user_seq = a.Long ? a.Long.fromBits(0, 0, !1) : 0, Ve.prototype.user_list = a.emptyArray, Ve.create = function (e) { return new Ve(e) }, Ve.encode = function (e, t) { if (t = t || s.create(), null != e.room_id && Object.hasOwnProperty.call(e, "room_id") && t.uint32(10).bytes(e.room_id), null != e.server_user_seq && Object.hasOwnProperty.call(e, "server_user_seq") && t.uint32(16).int64(e.server_user_seq), null != e.user_list && e.user_list.length) for (var A = 0; A < e.user_list.length; ++A)c.liveroom_cs.UserAction.encode(e.user_list[A], t.uint32(26).fork()).ldelim(); return t }, Ve.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.PushUserInfoUpdated; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.room_id = e.bytes(); break; case 2: r.server_user_seq = e.int64(); break; case 3: r.user_list && r.user_list.length || (r.user_list = []), r.user_list.push(c.liveroom_cs.UserAction.decode(e, e.uint32())); break; default: e.skipType(7 & i) } } return r }, Ve), o.PushUserKickout = (Fe.prototype.id_name = a.newBuffer([]), Fe.prototype.room_id = a.newBuffer([]), Fe.prototype.session_id = a.Long ? a.Long.fromBits(0, 0, !0) : 0, Fe.prototype.kickout_reason = 0, Fe.prototype.custom_reason = a.newBuffer([]), Fe.create = function (e) { return new Fe(e) }, Fe.encode = function (e, t) { return t = t || s.create(), null != e.id_name && Object.hasOwnProperty.call(e, "id_name") && t.uint32(10).bytes(e.id_name), null != e.room_id && Object.hasOwnProperty.call(e, "room_id") && t.uint32(18).bytes(e.room_id), null != e.session_id && Object.hasOwnProperty.call(e, "session_id") && t.uint32(24).uint64(e.session_id), null != e.kickout_reason && Object.hasOwnProperty.call(e, "kickout_reason") && t.uint32(32).int32(e.kickout_reason), null != e.custom_reason && Object.hasOwnProperty.call(e, "custom_reason") && t.uint32(42).bytes(e.custom_reason), t }, Fe.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.PushUserKickout; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.id_name = e.bytes(); break; case 2: r.room_id = e.bytes(); break; case 3: r.session_id = e.uint64(); break; case 4: r.kickout_reason = e.int32(); break; case 5: r.custom_reason = e.bytes(); break; default: e.skipType(7 & i) } } return r }, Fe), o.PushUserLogReport = (Ze.create = function (e) { return new Ze(e) }, Ze.encode = function (e, t) { return t || s.create() }, Ze.decode = function (e, t) { e instanceof n || (e = n.create(e)); var A = void 0 === t ? e.len : e.pos + t; for (t = new c.liveroom_cs.PushUserLogReport; e.pos < A;) { var r = e.uint32(); e.skipType(7 & r) } return t }, Ze), o.PushUserTokenExpire = (Ke.prototype.room_id = a.newBuffer([]), Ke.prototype.token = "", Ke.prototype.stop_stream = null, Ke.create = function (e) { return new Ke(e) }, Ke.encode = function (e, t) { return t = t || s.create(), null != e.room_id && Object.hasOwnProperty.call(e, "room_id") && t.uint32(10).bytes(e.room_id), null != e.token && Object.hasOwnProperty.call(e, "token") && t.uint32(18).string(e.token), null != e.stop_stream && Object.hasOwnProperty.call(e, "stop_stream") && c.liveroom_cs.StopStream.encode(e.stop_stream, t.uint32(26).fork()).ldelim(), t }, Ke.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.PushUserTokenExpire; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.room_id = e.bytes(); break; case 2: r.token = e.string(); break; case 3: r.stop_stream = c.liveroom_cs.StopStream.decode(e, e.uint32()); break; default: e.skipType(7 & i) } } return r }, Ke), o.StopStream = (We.prototype.stream_id_list = a.emptyArray, We.create = function (e) { return new We(e) }, We.encode = function (e, t) { if (t = t || s.create(), null != e.stream_id_list && e.stream_id_list.length) for (var A = 0; A < e.stream_id_list.length; ++A)t.uint32(10).bytes(e.stream_id_list[A]); return t }, We.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.StopStream; e.pos < A;) { var i = e.uint32(); i >>> 3 == 1 ? (r.stream_id_list && r.stream_id_list.length || (r.stream_id_list = []), r.stream_id_list.push(e.bytes())) : e.skipType(7 & i) } return r }, We), o.PushStream = (Ye.prototype.room_id = a.newBuffer([]), Ye.prototype.stream_seq = 0, Ye.prototype.stream_info = a.emptyArray, Ye.create = function (e) { return new Ye(e) }, Ye.encode = function (e, t) { if (t = t || s.create(), null != e.room_id && Object.hasOwnProperty.call(e, "room_id") && t.uint32(10).bytes(e.room_id), null != e.stream_seq && Object.hasOwnProperty.call(e, "stream_seq") && t.uint32(16).uint32(e.stream_seq), null != e.stream_info && e.stream_info.length) for (var A = 0; A < e.stream_info.length; ++A)c.liveroom_cs.StPushStreamInfo.encode(e.stream_info[A], t.uint32(26).fork()).ldelim(); return t }, Ye.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.PushStream; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.room_id = e.bytes(); break; case 2: r.stream_seq = e.uint32(); break; case 3: r.stream_info && r.stream_info.length || (r.stream_info = []), r.stream_info.push(c.liveroom_cs.StPushStreamInfo.decode(e, e.uint32())); break; default: e.skipType(7 & i) } } return r }, Ye), o.StPushStreamInfo = (Xe.prototype.stream_id = a.newBuffer([]), Xe.prototype.stream_sid = "", Xe.prototype.id_name = a.newBuffer([]), Xe.prototype.nick_name = a.newBuffer([]), Xe.prototype.extra_info = a.newBuffer([]), Xe.prototype.title = a.newBuffer([]), Xe.prototype.third_define_data = a.newBuffer([]), Xe.prototype.create_time = a.Long ? a.Long.fromBits(0, 0, !1) : 0, Xe.prototype.req_seq = 0, Xe.prototype.stream_ver = 0, Xe.prototype.stream_attr = a.newBuffer([]), Xe.prototype.stream_src = 0, Xe.prototype.stream_state = 0, Xe.prototype.stream_type = 0, Xe.prototype.stream_nid = 0, Xe.prototype.close_type = 0, Xe.create = function (e) { return new Xe(e) }, Xe.encode = function (e, t) { return t = t || s.create(), null != e.stream_id && Object.hasOwnProperty.call(e, "stream_id") && t.uint32(10).bytes(e.stream_id), null != e.stream_sid && Object.hasOwnProperty.call(e, "stream_sid") && t.uint32(18).string(e.stream_sid), null != e.id_name && Object.hasOwnProperty.call(e, "id_name") && t.uint32(26).bytes(e.id_name), null != e.nick_name && Object.hasOwnProperty.call(e, "nick_name") && t.uint32(34).bytes(e.nick_name), null != e.extra_info && Object.hasOwnProperty.call(e, "extra_info") && t.uint32(42).bytes(e.extra_info), null != e.title && Object.hasOwnProperty.call(e, "title") && t.uint32(50).bytes(e.title), null != e.third_define_data && Object.hasOwnProperty.call(e, "third_define_data") && t.uint32(58).bytes(e.third_define_data), null != e.create_time && Object.hasOwnProperty.call(e, "create_time") && t.uint32(64).int64(e.create_time), null != e.req_seq && Object.hasOwnProperty.call(e, "req_seq") && t.uint32(72).uint32(e.req_seq), null != e.stream_ver && Object.hasOwnProperty.call(e, "stream_ver") && t.uint32(80).uint32(e.stream_ver), null != e.stream_attr && Object.hasOwnProperty.call(e, "stream_attr") && t.uint32(90).bytes(e.stream_attr), null != e.stream_src && Object.hasOwnProperty.call(e, "stream_src") && t.uint32(96).uint32(e.stream_src), null != e.stream_state && Object.hasOwnProperty.call(e, "stream_state") && t.uint32(104).uint32(e.stream_state), null != e.stream_type && Object.hasOwnProperty.call(e, "stream_type") && t.uint32(112).uint32(e.stream_type), null != e.stream_nid && Object.hasOwnProperty.call(e, "stream_nid") && t.uint32(120).uint32(e.stream_nid), null != e.close_type && Object.hasOwnProperty.call(e, "close_type") && t.uint32(128).uint32(e.close_type), t }, Xe.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.StPushStreamInfo; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.stream_id = e.bytes(); break; case 2: r.stream_sid = e.string(); break; case 3: r.id_name = e.bytes(); break; case 4: r.nick_name = e.bytes(); break; case 5: r.extra_info = e.bytes(); break; case 6: r.title = e.bytes(); break; case 7: r.third_define_data = e.bytes(); break; case 8: r.create_time = e.int64(); break; case 9: r.req_seq = e.uint32(); break; case 10: r.stream_ver = e.uint32(); break; case 11: r.stream_attr = e.bytes(); break; case 12: r.stream_src = e.uint32(); break; case 13: r.stream_state = e.uint32(); break; case 14: r.stream_type = e.uint32(); break; case 15: r.stream_nid = e.uint32(); break; case 16: r.close_type = e.uint32(); break; default: e.skipType(7 & i) } } return r }, Xe), o.PushImChat = (Je.prototype.room_id = a.newBuffer([]), Je.prototype.server_msg_id = a.Long ? a.Long.fromBits(0, 0, !0) : 0, Je.prototype.ret_msg_id = a.Long ? a.Long.fromBits(0, 0, !0) : 0, Je.prototype.msg_data = a.emptyArray, Je.create = function (e) { return new Je(e) }, Je.encode = function (e, t) { if (t = t || s.create(), null != e.room_id && Object.hasOwnProperty.call(e, "room_id") && t.uint32(10).bytes(e.room_id), null != e.server_msg_id && Object.hasOwnProperty.call(e, "server_msg_id") && t.uint32(16).uint64(e.server_msg_id), null != e.ret_msg_id && Object.hasOwnProperty.call(e, "ret_msg_id") && t.uint32(24).uint64(e.ret_msg_id), null != e.msg_data && e.msg_data.length) for (var A = 0; A < e.msg_data.length; ++A)c.liveroom_cs.StImChatData.encode(e.msg_data[A], t.uint32(34).fork()).ldelim(); return t }, Je.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.PushImChat; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.room_id = e.bytes(); break; case 2: r.server_msg_id = e.uint64(); break; case 3: r.ret_msg_id = e.uint64(); break; case 4: r.msg_data && r.msg_data.length || (r.msg_data = []), r.msg_data.push(c.liveroom_cs.StImChatData.decode(e, e.uint32())); break; default: e.skipType(7 & i) } } return r }, Je), o.StImChatData = (Qe.prototype.id_name = a.newBuffer([]), Qe.prototype.nick_name = a.newBuffer([]), Qe.prototype.role = 0, Qe.prototype.msg_id = a.Long ? a.Long.fromBits(0, 0, !0) : 0, Qe.prototype.msg_category = 0, Qe.prototype.msg_type = 0, Qe.prototype.msg_priority = 0, Qe.prototype.msg_content = a.newBuffer([]), Qe.prototype.send_time = a.Long ? a.Long.fromBits(0, 0, !1) : 0, Qe.create = function (e) { return new Qe(e) }, Qe.encode = function (e, t) { return t = t || s.create(), null != e.id_name && Object.hasOwnProperty.call(e, "id_name") && t.uint32(10).bytes(e.id_name), null != e.nick_name && Object.hasOwnProperty.call(e, "nick_name") && t.uint32(18).bytes(e.nick_name), null != e.role && Object.hasOwnProperty.call(e, "role") && t.uint32(24).uint32(e.role), null != e.msg_id && Object.hasOwnProperty.call(e, "msg_id") && t.uint32(32).uint64(e.msg_id), null != e.msg_category && Object.hasOwnProperty.call(e, "msg_category") && t.uint32(40).uint32(e.msg_category), null != e.msg_type && Object.hasOwnProperty.call(e, "msg_type") && t.uint32(48).uint32(e.msg_type), null != e.msg_priority && Object.hasOwnProperty.call(e, "msg_priority") && t.uint32(56).uint32(e.msg_priority), null != e.msg_content && Object.hasOwnProperty.call(e, "msg_content") && t.uint32(66).bytes(e.msg_content), null != e.send_time && Object.hasOwnProperty.call(e, "send_time") && t.uint32(72).int64(e.send_time), t }, Qe.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.StImChatData; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.id_name = e.bytes(); break; case 2: r.nick_name = e.bytes(); break; case 3: r.role = e.uint32(); break; case 4: r.msg_id = e.uint64(); break; case 5: r.msg_category = e.uint32(); break; case 6: r.msg_type = e.uint32(); break; case 7: r.msg_priority = e.uint32(); break; case 8: r.msg_content = e.bytes(); break; case 9: r.send_time = e.int64(); break; default: e.skipType(7 & i) } } return r }, Qe), o.PushBigImChat = ($e.prototype.app_id = 0, $e.prototype.room_id = a.newBuffer([]), $e.prototype.timestamp = a.Long ? a.Long.fromBits(0, 0, !1) : 0, $e.prototype.msg_data = a.emptyArray, $e.create = function (e) { return new $e(e) }, $e.encode = function (e, t) { if (t = t || s.create(), null != e.app_id && Object.hasOwnProperty.call(e, "app_id") && t.uint32(8).uint32(e.app_id), null != e.room_id && Object.hasOwnProperty.call(e, "room_id") && t.uint32(18).bytes(e.room_id), null != e.timestamp && Object.hasOwnProperty.call(e, "timestamp") && t.uint32(24).int64(e.timestamp), null != e.msg_data && e.msg_data.length) for (var A = 0; A < e.msg_data.length; ++A)c.liveroom_cs.StBigImChatData.encode(e.msg_data[A], t.uint32(34).fork()).ldelim(); return t }, $e.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.PushBigImChat; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.app_id = e.uint32(); break; case 2: r.room_id = e.bytes(); break; case 3: r.timestamp = e.int64(); break; case 4: r.msg_data && r.msg_data.length || (r.msg_data = []), r.msg_data.push(c.liveroom_cs.StBigImChatData.decode(e, e.uint32())); break; default: e.skipType(7 & i) } } return r }, $e), o.StBigImChatData = (et.prototype.id_name = a.newBuffer([]), et.prototype.nick_name = a.newBuffer([]), et.prototype.role = 0, et.prototype.bigmsg_id = a.newBuffer([]), et.prototype.msg_category = 0, et.prototype.msg_type = 0, et.prototype.msg_content = a.newBuffer([]), et.prototype.msg_timestamp = a.Long ? a.Long.fromBits(0, 0, !1) : 0, et.create = function (e) { return new et(e) }, et.encode = function (e, t) { return t = t || s.create(), null != e.id_name && Object.hasOwnProperty.call(e, "id_name") && t.uint32(10).bytes(e.id_name), null != e.nick_name && Object.hasOwnProperty.call(e, "nick_name") && t.uint32(18).bytes(e.nick_name), null != e.role && Object.hasOwnProperty.call(e, "role") && t.uint32(24).uint32(e.role), null != e.bigmsg_id && Object.hasOwnProperty.call(e, "bigmsg_id") && t.uint32(34).bytes(e.bigmsg_id), null != e.msg_category && Object.hasOwnProperty.call(e, "msg_category") && t.uint32(40).uint32(e.msg_category), null != e.msg_type && Object.hasOwnProperty.call(e, "msg_type") && t.uint32(48).uint32(e.msg_type), null != e.msg_content && Object.hasOwnProperty.call(e, "msg_content") && t.uint32(58).bytes(e.msg_content), null != e.msg_timestamp && Object.hasOwnProperty.call(e, "msg_timestamp") && t.uint32(64).int64(e.msg_timestamp), t }, et.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.StBigImChatData; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.id_name = e.bytes(); break; case 2: r.nick_name = e.bytes(); break; case 3: r.role = e.uint32(); break; case 4: r.bigmsg_id = e.bytes(); break; case 5: r.msg_category = e.uint32(); break; case 6: r.msg_type = e.uint32(); break; case 7: r.msg_content = e.bytes(); break; case 8: r.msg_timestamp = e.int64(); break; default: e.skipType(7 & i) } } return r }, et), o.PushTrans = (tt.prototype.app_id = 0, tt.prototype.room_id = a.newBuffer([]), tt.prototype.trans_idname = a.newBuffer([]), tt.prototype.trans_nickname = a.newBuffer([]), tt.prototype.trans_role = 0, tt.prototype.trans_type = a.newBuffer([]), tt.prototype.trans_data = a.newBuffer([]), tt.prototype.trans_seq = 0, tt.prototype.trans_send_time = a.Long ? a.Long.fromBits(0, 0, !1) : 0, tt.prototype.trans_channel = a.newBuffer([]), tt.prototype.trans_list_seq = 0, tt.create = function (e) { return new tt(e) }, tt.encode = function (e, t) { return t = t || s.create(), null != e.app_id && Object.hasOwnProperty.call(e, "app_id") && t.uint32(8).uint32(e.app_id), null != e.room_id && Object.hasOwnProperty.call(e, "room_id") && t.uint32(18).bytes(e.room_id), null != e.trans_idname && Object.hasOwnProperty.call(e, "trans_idname") && t.uint32(26).bytes(e.trans_idname), null != e.trans_nickname && Object.hasOwnProperty.call(e, "trans_nickname") && t.uint32(34).bytes(e.trans_nickname), null != e.trans_role && Object.hasOwnProperty.call(e, "trans_role") && t.uint32(40).uint32(e.trans_role), null != e.trans_type && Object.hasOwnProperty.call(e, "trans_type") && t.uint32(50).bytes(e.trans_type), null != e.trans_data && Object.hasOwnProperty.call(e, "trans_data") && t.uint32(58).bytes(e.trans_data), null != e.trans_seq && Object.hasOwnProperty.call(e, "trans_seq") && t.uint32(64).uint32(e.trans_seq), null != e.trans_send_time && Object.hasOwnProperty.call(e, "trans_send_time") && t.uint32(72).int64(e.trans_send_time), null != e.trans_channel && Object.hasOwnProperty.call(e, "trans_channel") && t.uint32(82).bytes(e.trans_channel), null != e.trans_list_seq && Object.hasOwnProperty.call(e, "trans_list_seq") && t.uint32(88).uint32(e.trans_list_seq), t }, tt.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.PushTrans; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.app_id = e.uint32(); break; case 2: r.room_id = e.bytes(); break; case 3: r.trans_idname = e.bytes(); break; case 4: r.trans_nickname = e.bytes(); break; case 5: r.trans_role = e.uint32(); break; case 6: r.trans_type = e.bytes(); break; case 7: r.trans_data = e.bytes(); break; case 8: r.trans_seq = e.uint32(); break; case 9: r.trans_send_time = e.int64(); break; case 10: r.trans_channel = e.bytes(); break; case 11: r.trans_list_seq = e.uint32(); break; default: e.skipType(7 & i) } } return r }, tt), o.PushUserTrans = (nt.prototype.app_id = 0, nt.prototype.room_id = a.newBuffer([]), nt.prototype.trans_idname = a.newBuffer([]), nt.prototype.trans_nickname = a.newBuffer([]), nt.prototype.trans_role = 0, nt.prototype.trans_send_time = a.Long ? a.Long.fromBits(0, 0, !1) : 0, nt.prototype.trans_channel = a.newBuffer([]), nt.prototype.trans_array = a.emptyArray, nt.create = function (e) { return new nt(e) }, nt.encode = function (e, t) { if (t = t || s.create(), null != e.app_id && Object.hasOwnProperty.call(e, "app_id") && t.uint32(8).uint32(e.app_id), null != e.room_id && Object.hasOwnProperty.call(e, "room_id") && t.uint32(18).bytes(e.room_id), null != e.trans_idname && Object.hasOwnProperty.call(e, "trans_idname") && t.uint32(26).bytes(e.trans_idname), null != e.trans_nickname && Object.hasOwnProperty.call(e, "trans_nickname") && t.uint32(34).bytes(e.trans_nickname), null != e.trans_role && Object.hasOwnProperty.call(e, "trans_role") && t.uint32(40).uint32(e.trans_role), null != e.trans_send_time && Object.hasOwnProperty.call(e, "trans_send_time") && t.uint32(72).int64(e.trans_send_time), null != e.trans_channel && Object.hasOwnProperty.call(e, "trans_channel") && t.uint32(82).bytes(e.trans_channel), null != e.trans_array && e.trans_array.length) for (var A = 0; A < e.trans_array.length; ++A)c.liveroom_cs.StTransSimple.encode(e.trans_array[A], t.uint32(90).fork()).ldelim(); return t }, nt.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.PushUserTrans; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.app_id = e.uint32(); break; case 2: r.room_id = e.bytes(); break; case 3: r.trans_idname = e.bytes(); break; case 4: r.trans_nickname = e.bytes(); break; case 5: r.trans_role = e.uint32(); break; case 9: r.trans_send_time = e.int64(); break; case 10: r.trans_channel = e.bytes(); break; case 11: r.trans_array && r.trans_array.length || (r.trans_array = []), r.trans_array.push(c.liveroom_cs.StTransSimple.decode(e, e.uint32())); break; default: e.skipType(7 & i) } } return r }, nt), o.StTransSimple = (rt.prototype.trans_type = a.newBuffer([]), rt.prototype.trans_data = a.newBuffer([]), rt.prototype.trans_seq = 0, rt.create = function (e) { return new rt(e) }, rt.encode = function (e, t) { return t = t || s.create(), null != e.trans_type && Object.hasOwnProperty.call(e, "trans_type") && t.uint32(10).bytes(e.trans_type), null != e.trans_data && Object.hasOwnProperty.call(e, "trans_data") && t.uint32(18).bytes(e.trans_data), null != e.trans_seq && Object.hasOwnProperty.call(e, "trans_seq") && t.uint32(24).uint32(e.trans_seq), t }, rt.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.liveroom_cs.StTransSimple; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.trans_type = e.bytes(); break; case 2: r.trans_data = e.bytes(); break; case 3: r.trans_seq = e.uint32(); break; default: e.skipType(7 & i) } } return r }, rt), o), e.exports = c }, function (e, t, A) { var r = function (e) { "use strict"; Object.defineProperty(e, "__esModule", { "value": !0 }), e.default = void 0; var t = null; try { t = new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0, 97, 115, 109, 1, 0, 0, 0, 1, 13, 2, 96, 0, 1, 127, 96, 4, 127, 127, 127, 127, 1, 127, 3, 7, 6, 0, 1, 1, 1, 1, 1, 6, 6, 1, 127, 1, 65, 0, 11, 7, 50, 6, 3, 109, 117, 108, 0, 1, 5, 100, 105, 118, 95, 115, 0, 2, 5, 100, 105, 118, 95, 117, 0, 3, 5, 114, 101, 109, 95, 115, 0, 4, 5, 114, 101, 109, 95, 117, 0, 5, 8, 103, 101, 116, 95, 104, 105, 103, 104, 0, 0, 10, 191, 1, 6, 4, 0, 35, 0, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 126, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 127, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 128, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 129, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 130, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11])), {}).exports } catch (e) { } function n(e, t, A) { this.low = 0 | e, this.high = 0 | t, this.unsigned = !!A } function r(e) { return !0 === (e && e.__isLong__) } function o(e) { var t = Math.clz32(e & -e); return e ? 31 - t : t } Object.defineProperty(n.prototype, "__isLong__", { "value": !0 }), n.isLong = r; var A = {}, i = {}; function a(e, t) { var r, o, n; return t ? (n = 0 <= (e >>>= 0) && e < 256) && (o = i[e]) ? o : (r = u(e, 0, !0), n && (i[e] = r), r) : (n = -128 <= (e |= 0) && e < 128) && (o = A[e]) ? o : (r = u(e, e < 0 ? -1 : 0, !1), n && (A[e] = r), r) } function c(e, t) { if (isNaN(e)) return t ? E : I; if (t) { if (e < 0) return E; if (l <= e) return Q } else { if (e <= -d) return y; if (d <= e + 1) return m } return e < 0 ? c(-e, t).neg() : u(e % g | 0, e / g | 0, t) } function u(e, t, A) { return new n(e, t, A) } n.fromInt = a, n.fromNumber = c, n.fromBits = u; var s = Math.pow; function h(e, t, A) { if (0 === e.length) throw Error("empty string"); if (t = "number" == typeof t ? (A = t, !1) : !!t, "NaN" === e || "Infinity" === e || "+Infinity" === e || "-Infinity" === e) return t ? E : I; if ((A = A || 10) < 2 || 36 < A) throw RangeError("radix"); var r; if (0 < (r = e.indexOf("-"))) throw Error("interior hyphen"); if (0 === r) return h(e.substring(1), t, A).neg(); for (var i = c(s(A, 8)), o = I, n = 0; n < e.length; n += 8) { var a = Math.min(8, e.length - n), g = parseInt(e.substring(n, n + a), A); o = (a < 8 ? (a = c(s(A, a)), o.mul(a)) : o = o.mul(i)).add(c(g)) } return o.unsigned = t, o } function p(e, t) { return "number" == typeof e ? c(e, t) : "string" == typeof e ? h(e, t) : u(e.low, e.high, "boolean" == typeof t ? t : e.unsigned) } n.fromString = h, n.fromValue = p; var g = 4294967296, l = g * g, d = l / 2, C = a(1 << 24), I = a(0), E = (n.ZERO = I, a(0, !0)), f = (n.UZERO = E, a(1)), B = (n.ONE = f, a(1, !0)), _ = (n.UONE = B, a(-1)), m = (n.NEG_ONE = _, u(-1, 2147483647, !1)), Q = (n.MAX_VALUE = m, u(-1, -1, !0)), y = (n.MAX_UNSIGNED_VALUE = Q, u(0, -2147483648, !1)), v = (n.MIN_VALUE = y, n.prototype); return v.toInt = function () { return this.unsigned ? this.low >>> 0 : this.low }, v.toNumber = function () { return this.unsigned ? (this.high >>> 0) * g + (this.low >>> 0) : this.high * g + (this.low >>> 0) }, v.toString = function (e) { if ((e = e || 10) < 2 || 36 < e) throw RangeError("radix"); if (this.isZero()) return "0"; var t, A; if (this.isNegative()) return this.eq(y) ? (A = c(e), A = (t = this.div(A)).mul(A).sub(this), t.toString(e) + A.toInt().toString(e)) : "-" + this.neg().toString(e); for (var r = c(s(e, 6), this.unsigned), i = this, o = ""; ;) { var n = i.div(r), a = (i.sub(n.mul(r)).toInt() >>> 0).toString(e); if ((i = n).isZero()) return a + o; for (; a.length < 6;)a = "0" + a; o = "" + a + o } }, v.getHighBits = function () { return this.high }, v.getHighBitsUnsigned = function () { return this.high >>> 0 }, v.getLowBits = function () { return this.low }, v.getLowBitsUnsigned = function () { return this.low >>> 0 }, v.getNumBitsAbs = function () { if (this.isNegative()) return this.eq(y) ? 64 : this.neg().getNumBitsAbs(); for (var e = 0 != this.high ? this.high : this.low, t = 31; 0 < t && 0 == (e & 1 << t); t--); return 0 != this.high ? t + 33 : t + 1 }, v.isZero = function () { return 0 === this.high && 0 === this.low }, v.eqz = v.isZero, v.isNegative = function () { return !this.unsigned && this.high < 0 }, v.isPositive = function () { return this.unsigned || 0 <= this.high }, v.isOdd = function () { return 1 == (1 & this.low) }, v.isEven = function () { return 0 == (1 & this.low) }, v.equals = function (e) { return r(e) || (e = p(e)), (this.unsigned === e.unsigned || this.high >>> 31 != 1 || e.high >>> 31 != 1) && this.high === e.high && this.low === e.low }, v.eq = v.equals, v.notEquals = function (e) { return !this.eq(e) }, v.neq = v.notEquals, v.ne = v.notEquals, v.lessThan = function (e) { return this.comp(e) < 0 }, v.lt = v.lessThan, v.lessThanOrEqual = function (e) { return this.comp(e) <= 0 }, v.lte = v.lessThanOrEqual, v.le = v.lessThanOrEqual, v.greaterThan = function (e) { return 0 < this.comp(e) }, v.gt = v.greaterThan, v.greaterThanOrEqual = function (e) { return 0 <= this.comp(e) }, v.gte = v.greaterThanOrEqual, v.ge = v.greaterThanOrEqual, v.compare = function (e) { var t, A; return r(e) || (e = p(e)), this.eq(e) ? 0 : (t = this.isNegative(), A = e.isNegative(), t && !A ? -1 : !t && A ? 1 : this.unsigned ? e.high >>> 0 > this.high >>> 0 || e.high === this.high && e.low >>> 0 > this.low >>> 0 ? -1 : 1 : this.sub(e).isNegative() ? -1 : 1) }, v.comp = v.compare, v.negate = function () { return !this.unsigned && this.eq(y) ? y : this.not().add(f) }, v.neg = v.negate, v.add = function (e) { r(e) || (e = p(e)); var t = this.high >>> 16, A = 65535 & this.high, i = this.low >>> 16, o = 65535 & this.low, n = e.high >>> 16, s = 65535 & e.high, a = e.low >>> 16, c = 0, g = 0, l = 0, h = 0; return g += (l = l + ((h += o + (65535 & e.low)) >>> 16) + (i + a)) >>> 16, u((l &= 65535) << 16 | (h &= 65535), ((c += (g += A + s) >>> 16) + (t + n) & 65535) << 16 | (g &= 65535), this.unsigned) }, v.subtract = function (e) { return r(e) || (e = p(e)), this.add(e.neg()) }, v.sub = v.subtract, v.multiply = function (e) { var A, i, o, n, s, a, g, l, h, d, f; return this.isZero() ? this : (r(e) || (e = p(e)), t ? u(t.mul(this.low, this.high, e.low, e.high), t.get_high(), this.unsigned) : e.isZero() ? this.unsigned ? E : I : this.eq(y) ? e.isOdd() ? y : I : e.eq(y) ? this.isOdd() ? y : I : this.isNegative() ? e.isNegative() ? this.neg().mul(e.neg()) : this.neg().mul(e).neg() : e.isNegative() ? this.mul(e.neg()).neg() : this.lt(C) && e.lt(C) ? c(this.toNumber() * e.toNumber(), this.unsigned) : (A = this.high >>> 16, i = 65535 & this.high, o = this.low >>> 16, n = 65535 & this.low, s = e.high >>> 16, a = 65535 & e.high, g = e.low >>> 16, f = (f = d = h = l = 0) + ((h = h + ((d += n * (e = 65535 & e.low)) >>> 16) + o * e) >>> 16) + ((h = (65535 & h) + n * g) >>> 16), u((h &= 65535) << 16 | (d &= 65535), (l = (l = (l += (f += i * e) >>> 16) + ((f = (65535 & f) + o * g) >>> 16) + ((f = (65535 & f) + n * a) >>> 16)) + (A * e + i * g + o * a + n * s) & 65535) << 16 | (f &= 65535), this.unsigned))) }, v.mul = v.multiply, v.divide = function (e) { if ((e = r(e) ? e : p(e)).isZero()) throw Error("division by zero"); var A, i, o; if (t) return this.unsigned || -2147483648 !== this.high || -1 !== e.low || -1 !== e.high ? u((this.unsigned ? t.div_u : t.div_s)(this.low, this.high, e.low, e.high), t.get_high(), this.unsigned) : this; if (this.isZero()) return this.unsigned ? E : I; if (this.unsigned) { if ((e = e.unsigned ? e : e.toUnsigned()).gt(this)) return E; if (e.gt(this.shru(1))) return B; i = E } else { if (this.eq(y)) return e.eq(f) || e.eq(_) ? y : e.eq(y) ? f : (o = this.shr(1).div(e).shl(1)).eq(I) ? e.isNegative() ? f : _ : (A = this.sub(e.mul(o)), o.add(A.div(e))); if (e.eq(y)) return this.unsigned ? E : I; if (this.isNegative()) return e.isNegative() ? this.neg().div(e.neg()) : this.neg().div(e).neg(); if (e.isNegative()) return this.div(e.neg()).neg(); i = I } for (A = this; A.gte(e);) { o = Math.max(1, Math.floor(A.toNumber() / e.toNumber())); for (var n = Math.ceil(Math.log(o) / Math.LN2), a = n <= 48 ? 1 : s(2, n - 48), g = c(o), l = g.mul(e); l.isNegative() || l.gt(A);)l = (g = c(o -= a, this.unsigned)).mul(e); g.isZero() && (g = f), i = i.add(g), A = A.sub(l) } return i }, v.div = v.divide, v.modulo = function (e) { return r(e) || (e = p(e)), t ? u((this.unsigned ? t.rem_u : t.rem_s)(this.low, this.high, e.low, e.high), t.get_high(), this.unsigned) : this.sub(this.div(e).mul(e)) }, v.mod = v.modulo, v.rem = v.modulo, v.not = function () { return u(~this.low, ~this.high, this.unsigned) }, v.countLeadingZeros = function () { return this.high ? Math.clz32(this.high) : Math.clz32(this.low) + 32 }, v.clz = v.countLeadingZeros, v.countTrailingZeros = function () { return this.low ? o(this.low) : o(this.high) + 32 }, v.ctz = v.countTrailingZeros, v.and = function (e) { return r(e) || (e = p(e)), u(this.low & e.low, this.high & e.high, this.unsigned) }, v.or = function (e) { return r(e) || (e = p(e)), u(this.low | e.low, this.high | e.high, this.unsigned) }, v.xor = function (e) { return r(e) || (e = p(e)), u(this.low ^ e.low, this.high ^ e.high, this.unsigned) }, v.shiftLeft = function (e) { return r(e) && (e = e.toInt()), 0 == (e &= 63) ? this : e < 32 ? u(this.low << e, this.high << e | this.low >>> 32 - e, this.unsigned) : u(0, this.low << e - 32, this.unsigned) }, v.shl = v.shiftLeft, v.shiftRight = function (e) { return r(e) && (e = e.toInt()), 0 == (e &= 63) ? this : e < 32 ? u(this.low >>> e | this.high << 32 - e, this.high >> e, this.unsigned) : u(this.high >> e - 32, 0 <= this.high ? 0 : -1, this.unsigned) }, v.shr = v.shiftRight, v.shiftRightUnsigned = function (e) { return r(e) && (e = e.toInt()), 0 == (e &= 63) ? this : e < 32 ? u(this.low >>> e | this.high << 32 - e, this.high >>> e, this.unsigned) : u(32 === e ? this.high : this.high >>> e - 32, 0, this.unsigned) }, v.shru = v.shiftRightUnsigned, v.shr_u = v.shiftRightUnsigned, v.rotateLeft = function (e) { var t; return r(e) && (e = e.toInt()), 0 == (e &= 63) ? this : 32 === e ? u(this.high, this.low, this.unsigned) : e < 32 ? u(this.low << e | this.high >>> (t = 32 - e), this.high << e | this.low >>> t, this.unsigned) : u(this.high << (e -= 32) | this.low >>> (t = 32 - e), this.low << e | this.high >>> t, this.unsigned) }, v.rotl = v.rotateLeft, v.rotateRight = function (e) { var t; return r(e) && (e = e.toInt()), 0 == (e &= 63) ? this : 32 === e ? u(this.high, this.low, this.unsigned) : e < 32 ? u(this.high << (t = 32 - e) | this.low >>> e, this.low << t | this.high >>> e, this.unsigned) : u(this.low << (t = 32 - (e -= 32)) | this.high >>> e, this.high << t | this.low >>> e, this.unsigned) }, v.rotr = v.rotateRight, v.toSigned = function () { return this.unsigned ? u(this.low, this.high, !1) : this }, v.toUnsigned = function () { return this.unsigned ? this : u(this.low, this.high, !0) }, v.toBytes = function (e) { return e ? this.toBytesLE() : this.toBytesBE() }, v.toBytesLE = function () { var e = this.high, t = this.low; return [255 & t, t >>> 8 & 255, t >>> 16 & 255, t >>> 24, 255 & e, e >>> 8 & 255, e >>> 16 & 255, e >>> 24] }, v.toBytesBE = function () { var e = this.high, t = this.low; return [e >>> 24, e >>> 16 & 255, e >>> 8 & 255, 255 & e, t >>> 24, t >>> 16 & 255, t >>> 8 & 255, 255 & t] }, n.fromBytes = function (e, t, A) { return A ? n.fromBytesLE(e, t) : n.fromBytesBE(e, t) }, n.fromBytesLE = function (e, t) { return new n(e[0] | e[1] << 8 | e[2] << 16 | e[3] << 24, e[4] | e[5] << 8 | e[6] << 16 | e[7] << 24, t) }, n.fromBytesBE = function (e, t) { return new n(e[4] << 24 | e[5] << 16 | e[6] << 8 | e[7], e[0] << 24 | e[1] << 16 | e[2] << 8 | e[3], t) }, e.default = n, "default" in e ? e.default : e }({}); void 0 !== (t = function () { return r }.apply(t, [])) && (e.exports = t) }, function (e, t, A) { (function (t) { e.exports = function (e) { var r; if ("undefined" != typeof window && window.crypto && (r = window.crypto), "undefined" != typeof self && self.crypto && (r = self.crypto), !(r = !(r = !(r = "undefined" != typeof globalThis && globalThis.crypto ? globalThis.crypto : r) && "undefined" != typeof window && window.msCrypto ? window.msCrypto : r) && void 0 !== t && t.crypto ? t.crypto : r)) try { r = A(17) } catch (n) { } var o = Object.create || function (e) { return i.prototype = e, e = new i, i.prototype = null, e }; function i() { } var n = {}, s = n.lib = {}, a = s.Base = { "extend": function extend(e) { var t = o(this); return e && t.mixIn(e), t.hasOwnProperty("init") && this.init !== t.init || (t.init = function () { t.$super.init.apply(this, arguments) }), (t.init.prototype = t).$super = this, t }, "create": function create() { var e = this.extend(); return e.init.apply(e, arguments), e }, "init": function init() { }, "mixIn": function mixIn(e) { for (var t in e) e.hasOwnProperty(t) && (this[t] = e[t]); e.hasOwnProperty("toString") && (this.toString = e.toString) }, "clone": function clone() { return this.init.prototype.extend(this) } }, c = s.WordArray = a.extend({ "init": function init(e, t) { e = this.words = e || [], this.sigBytes = null != t ? t : 4 * e.length }, "toString": function toString(e) { return (e || u).stringify(this) }, "concat": function concat(e) { var t = this.words, A = e.words, r = this.sigBytes, i = e.sigBytes; if (this.clamp(), r % 4) for (var o = 0; o < i; o++) { var n = A[o >>> 2] >>> 24 - o % 4 * 8 & 255; t[r + o >>> 2] |= n << 24 - (r + o) % 4 * 8 } else for (var s = 0; s < i; s += 4)t[r + s >>> 2] = A[s >>> 2]; return this.sigBytes += i, this }, "clamp": function clamp() { var t = this.words, A = this.sigBytes; t[A >>> 2] &= 4294967295 << 32 - A % 4 * 8, t.length = e.ceil(A / 4) }, "clone": function clone() { var e = a.clone.call(this); return e.words = this.words.slice(0), e }, "random": function random(e) { for (var t = [], A = 0; A < e; A += 4)t.push(function () { if (r) { if ("function" == typeof r.getRandomValues) try { return r.getRandomValues(new Uint32Array(1))[0] } catch (e) { } if ("function" == typeof r.randomBytes) try { return r.randomBytes(4).readInt32LE() } catch (e) { } } throw new Error("Native crypto module could not be used to get secure random number.") }()); return new c.init(t, e) } }), g = n.enc = {}, u = g.Hex = { "stringify": function stringify(e) { for (var t = e.words, A = e.sigBytes, r = [], i = 0; i < A; i++) { var o = t[i >>> 2] >>> 24 - i % 4 * 8 & 255; r.push((o >>> 4).toString(16)), r.push((15 & o).toString(16)) } return r.join("") }, "parse": function parse(e) { for (var t = e.length, A = [], r = 0; r < t; r += 2)A[r >>> 3] |= parseInt(e.substr(r, 2), 16) << 24 - r % 8 * 4; return new c.init(A, t / 2) } }, l = g.Latin1 = { "stringify": function stringify(e) { for (var t = e.words, A = e.sigBytes, r = [], i = 0; i < A; i++) { var o = t[i >>> 2] >>> 24 - i % 4 * 8 & 255; r.push(String.fromCharCode(o)) } return r.join("") }, "parse": function parse(e) { for (var t = e.length, A = [], r = 0; r < t; r++)A[r >>> 2] |= (255 & e.charCodeAt(r)) << 24 - r % 4 * 8; return new c.init(A, t) } }, h = g.Utf8 = { "stringify": function stringify(e) { try { return decodeURIComponent(escape(l.stringify(e))) } catch (e) { throw new Error("Malformed UTF-8 data") } }, "parse": function parse(e) { return l.parse(unescape(encodeURIComponent(e))) } }, d = s.BufferedBlockAlgorithm = a.extend({ "reset": function reset() { this._data = new c.init, this._nDataBytes = 0 }, "_append": function _append(e) { "string" == typeof e && (e = h.parse(e)), this._data.concat(e), this._nDataBytes += e.sigBytes }, "_process": function _process(t) { var A, r = this._data, i = r.words, o = r.sigBytes, n = this.blockSize, s = o / (4 * n), a = (s = t ? e.ceil(s) : e.max((0 | s) - this._minBufferSize, 0)) * n; if (t = e.min(4 * a, o), a) { for (var g = 0; g < a; g += n)this._doProcessBlock(i, g); A = i.splice(0, a), r.sigBytes -= t } return new c.init(A, t) }, "clone": function clone() { var e = a.clone.call(this); return e._data = this._data.clone(), e }, "_minBufferSize": 0 }), C = (s.Hasher = d.extend({ "cfg": a.extend(), "init": function init(e) { this.cfg = this.cfg.extend(e), this.reset() }, "reset": function reset() { d.reset.call(this), this._doReset() }, "update": function update(e) { return this._append(e), this._process(), this }, "finalize": function finalize(e) { return e && this._append(e), this._doFinalize() }, "blockSize": 16, "_createHelper": function _createHelper(e) { return function (t, A) { return new e.init(A).finalize(t) } }, "_createHmacHelper": function _createHmacHelper(e) { return function (t, A) { return new C.HMAC.init(e, A).finalize(t) } } }), n.algo = {}); return n }(Math) }).call(this, A(16)) }, function (e, t, A) { e.exports = function (e) { for (var t = e, A = t.lib.BlockCipher, r = t.algo, i = [], o = [], n = [], s = [], a = [], c = [], g = [], u = [], l = [], h = [], d = [], C = 0; C < 256; C++)d[C] = C < 128 ? C << 1 : C << 1 ^ 283; var I = 0, E = 0; for (C = 0; C < 256; C++) { var p = E ^ E << 1 ^ E << 2 ^ E << 3 ^ E << 4; p = p >>> 8 ^ 255 & p ^ 99, i[I] = p, o[p] = I; var f = d[I], B = d[f], _ = d[B], m = 257 * d[p] ^ 16843008 * p; n[I] = m << 24 | m >>> 8, s[I] = m << 16 | m >>> 16, a[I] = m << 8 | m >>> 24, c[I] = m, m = 16843009 * _ ^ 65537 * B ^ 257 * f ^ 16843008 * I, g[p] = m << 24 | m >>> 8, u[p] = m << 16 | m >>> 16, l[p] = m << 8 | m >>> 24, h[p] = m, I ? (I = f ^ d[d[d[_ ^ f]]], E ^= d[d[E]]) : I = E = 1 } var Q = [0, 1, 2, 4, 8, 16, 32, 64, 128, 27, 54], y = r.AES = A.extend({ "_doReset": function _doReset() { if (!this._nRounds || this._keyPriorReset !== this._key) { for (var e = this._keyPriorReset = this._key, t = e.words, A = e.sigBytes / 4, r = 4 * ((this._nRounds = A + 6) + 1), o = this._keySchedule = [], n = 0; n < r; n++)n < A ? o[n] = t[n] : (c = o[n - 1], n % A ? A > 6 && n % A == 4 && (c = i[c >>> 24] << 24 | i[c >>> 16 & 255] << 16 | i[c >>> 8 & 255] << 8 | i[255 & c]) : (c = i[(c = c << 8 | c >>> 24) >>> 24] << 24 | i[c >>> 16 & 255] << 16 | i[c >>> 8 & 255] << 8 | i[255 & c], c ^= Q[n / A | 0] << 24), o[n] = o[n - A] ^ c); for (var s = this._invKeySchedule = [], a = 0; a < r; a++) { if (n = r - a, a % 4) var c = o[n]; else c = o[n - 4]; s[a] = a < 4 || n <= 4 ? c : g[i[c >>> 24]] ^ u[i[c >>> 16 & 255]] ^ l[i[c >>> 8 & 255]] ^ h[i[255 & c]] } } }, "encryptBlock": function encryptBlock(e, t) { this._doCryptBlock(e, t, this._keySchedule, n, s, a, c, i) }, "decryptBlock": function decryptBlock(e, t) { var A = e[t + 1]; e[t + 1] = e[t + 3], e[t + 3] = A, this._doCryptBlock(e, t, this._invKeySchedule, g, u, l, h, o), A = e[t + 1], e[t + 1] = e[t + 3], e[t + 3] = A }, "_doCryptBlock": function _doCryptBlock(e, t, A, r, i, o, n, s) { for (var a = this._nRounds, c = e[t] ^ A[0], g = e[t + 1] ^ A[1], u = e[t + 2] ^ A[2], l = e[t + 3] ^ A[3], h = 4, d = 1; d < a; d++) { var C = r[c >>> 24] ^ i[g >>> 16 & 255] ^ o[u >>> 8 & 255] ^ n[255 & l] ^ A[h++], I = r[g >>> 24] ^ i[u >>> 16 & 255] ^ o[l >>> 8 & 255] ^ n[255 & c] ^ A[h++], E = r[u >>> 24] ^ i[l >>> 16 & 255] ^ o[c >>> 8 & 255] ^ n[255 & g] ^ A[h++], p = r[l >>> 24] ^ i[c >>> 16 & 255] ^ o[g >>> 8 & 255] ^ n[255 & u] ^ A[h++]; c = C, g = I, u = E, l = p } C = (s[c >>> 24] << 24 | s[g >>> 16 & 255] << 16 | s[u >>> 8 & 255] << 8 | s[255 & l]) ^ A[h++], I = (s[g >>> 24] << 24 | s[u >>> 16 & 255] << 16 | s[l >>> 8 & 255] << 8 | s[255 & c]) ^ A[h++], E = (s[u >>> 24] << 24 | s[l >>> 16 & 255] << 16 | s[c >>> 8 & 255] << 8 | s[255 & g]) ^ A[h++], p = (s[l >>> 24] << 24 | s[c >>> 16 & 255] << 16 | s[g >>> 8 & 255] << 8 | s[255 & u]) ^ A[h++], e[t] = C, e[t + 1] = I, e[t + 2] = E, e[t + 3] = p }, "keySize": 8 }); return t.AES = A._createHelper(y), e.AES }(A(2), (A(18), A(4), A(12), A(21))) }, function (e, t, A) { e.exports = function (e) { for (var t = Math, A = e, r = A.lib, i = r.WordArray, o = r.Hasher, n = A.algo, s = [], a = 0; a < 64; a++)s[a] = 4294967296 * t.abs(t.sin(a + 1)) | 0; var c = n.MD5 = o.extend({ "_doReset": function _doReset() { this._hash = new i.init([1732584193, 4023233417, 2562383102, 271733878]) }, "_doProcessBlock": function _doProcessBlock(e, t) { for (var A = 0; A < 16; A++) { var r = t + A, i = e[r]; e[r] = 16711935 & (i << 8 | i >>> 24) | 4278255360 & (i << 24 | i >>> 8) } var o = this._hash.words, n = e[t + 0], a = e[t + 1], c = e[t + 2], g = e[t + 3], u = e[t + 4], C = e[t + 5], I = e[t + 6], E = e[t + 7], f = e[t + 8], B = e[t + 9], _ = e[t + 10], m = e[t + 11], Q = e[t + 12], y = e[t + 13], v = e[t + 14], S = e[t + 15], D = o[0], R = o[1], b = o[2], T = o[3]; D = d(D = p(D = p(D = p(D = p(D = h(D = h(D = h(D = h(D = l(D = l(D = l(D = l(D, R, b, T, n, 7, s[0]), R = l(R, b = l(b, T = l(T, D, R, b, a, 12, s[1]), D, R, c, 17, s[2]), T, D, g, 22, s[3]), b, T, u, 7, s[4]), R = l(R, b = l(b, T = l(T, D, R, b, C, 12, s[5]), D, R, I, 17, s[6]), T, D, E, 22, s[7]), b, T, f, 7, s[8]), R = l(R, b = l(b, T = l(T, D, R, b, B, 12, s[9]), D, R, _, 17, s[10]), T, D, m, 22, s[11]), b, T, Q, 7, s[12]), R = l(R, b = l(b, T = l(T, D, R, b, y, 12, s[13]), D, R, v, 17, s[14]), T, D, S, 22, s[15]), b, T, a, 5, s[16]), R = h(R, b = h(b, T = h(T, D, R, b, I, 9, s[17]), D, R, m, 14, s[18]), T, D, n, 20, s[19]), b, T, C, 5, s[20]), R = h(R, b = h(b, T = h(T, D, R, b, _, 9, s[21]), D, R, S, 14, s[22]), T, D, u, 20, s[23]), b, T, B, 5, s[24]), R = h(R, b = h(b, T = h(T, D, R, b, v, 9, s[25]), D, R, g, 14, s[26]), T, D, f, 20, s[27]), b, T, y, 5, s[28]), R = h(R, b = h(b, T = h(T, D, R, b, c, 9, s[29]), D, R, E, 14, s[30]), T, D, Q, 20, s[31]), b, T, C, 4, s[32]), R = p(R, b = p(b, T = p(T, D, R, b, f, 11, s[33]), D, R, m, 16, s[34]), T, D, v, 23, s[35]), b, T, a, 4, s[36]), R = p(R, b = p(b, T = p(T, D, R, b, u, 11, s[37]), D, R, E, 16, s[38]), T, D, _, 23, s[39]), b, T, y, 4, s[40]), R = p(R, b = p(b, T = p(T, D, R, b, n, 11, s[41]), D, R, g, 16, s[42]), T, D, I, 23, s[43]), b, T, B, 4, s[44]), R = p(R, b = p(b, T = p(T, D, R, b, Q, 11, s[45]), D, R, S, 16, s[46]), T, D, c, 23, s[47]), b, T, n, 6, s[48]), R = d(R = d(R = d(R = d(R, b = d(b, T = d(T, D, R, b, E, 10, s[49]), D, R, v, 15, s[50]), T, D, C, 21, s[51]), b = d(b, T = d(T, D = d(D, R, b, T, Q, 6, s[52]), R, b, g, 10, s[53]), D, R, _, 15, s[54]), T, D, a, 21, s[55]), b = d(b, T = d(T, D = d(D, R, b, T, f, 6, s[56]), R, b, S, 10, s[57]), D, R, I, 15, s[58]), T, D, y, 21, s[59]), b = d(b, T = d(T, D = d(D, R, b, T, u, 6, s[60]), R, b, m, 10, s[61]), D, R, c, 15, s[62]), T, D, B, 21, s[63]), o[0] = o[0] + D | 0, o[1] = o[1] + R | 0, o[2] = o[2] + b | 0, o[3] = o[3] + T | 0 }, "_doFinalize": function _doFinalize() { var e = this._data, A = e.words, r = 8 * this._nDataBytes, i = 8 * e.sigBytes; A[i >>> 5] |= 128 << 24 - i % 32; var o = t.floor(r / 4294967296), n = r; A[15 + (i + 64 >>> 9 << 4)] = 16711935 & (o << 8 | o >>> 24) | 4278255360 & (o << 24 | o >>> 8), A[14 + (i + 64 >>> 9 << 4)] = 16711935 & (n << 8 | n >>> 24) | 4278255360 & (n << 24 | n >>> 8), e.sigBytes = 4 * (A.length + 1), this._process(); for (var s = this._hash, a = s.words, c = 0; c < 4; c++) { var g = a[c]; a[c] = 16711935 & (g << 8 | g >>> 24) | 4278255360 & (g << 24 | g >>> 8) } return s }, "clone": function clone() { var e = o.clone.call(this); return e._hash = this._hash.clone(), e } }); function l(e, t, A, r, i, o, n) { var s = e + (t & A | ~t & r) + i + n; return (s << o | s >>> 32 - o) + t } function h(e, t, A, r, i, o, n) { var s = e + (t & r | A & ~r) + i + n; return (s << o | s >>> 32 - o) + t } function p(e, t, A, r, i, o, n) { var s = e + (t ^ A ^ r) + i + n; return (s << o | s >>> 32 - o) + t } function d(e, t, A, r, i, o, n) { var s = e + (A ^ (t | ~r)) + i + n; return (s << o | s >>> 32 - o) + t } return A.MD5 = o._createHelper(c), A.HmacMD5 = o._createHmacHelper(c), e.MD5 }(A(2)) }, function (e, t, A) { function r(e) { var t; return (o[e] || (t = o[e] = { "i": e, "l": !1, "exports": {} }, i[e].call(t.exports, t, t.exports, r), t.l = !0, t)).exports } var i, o; e.exports = (i = [function (e, t, A) { "use strict"; var r; Object.defineProperty(t, "__esModule", { "value": !0 }), t.E_CLIENT_TYPE = t.ENUM_LOG_LEVEL = t.ENUM_REMOTE_TYPE = t.ZEGO_ENV = t.ZEGO_BROWSER_TYPE = void 0, (r = t.ZEGO_BROWSER_TYPE || (t.ZEGO_BROWSER_TYPE = {}))[r.IE = 0] = "IE", r[r.FIREFOX = 1] = "FIREFOX", r[r.CHROME = 2] = "CHROME", r[r.SAFARI = 3] = "SAFARI", r[r.OPERA = 4] = "OPERA", r[r.WEIXIN = 5] = "WEIXIN", r[r.WEIXINMINI = 6] = "WEIXINMINI", r[r.UNKOWN = 7] = "UNKOWN", (r = t.ZEGO_ENV || (t.ZEGO_ENV = {}))[r.BROWSER = 0] = "BROWSER", r[r.WEIXINMINI = 1] = "WEIXINMINI", (r = t.ENUM_REMOTE_TYPE || (t.ENUM_REMOTE_TYPE = {}))[r.DISABLE = 0] = "DISABLE", r[r.WEBSOCKET = 1] = "WEBSOCKET", r[r.HTTPS = 2] = "HTTPS", t.ENUM_LOG_LEVEL = { "DEBUG": 0, "INFO": 1, "WARN": 2, "ERROR": 3, "REPORT": 99, "DISABLE": 100, "debug": 0, "info": 1, "warn": 2, "error": 3, "report": 99, "disable": 100 }, (r = t.E_CLIENT_TYPE || (t.E_CLIENT_TYPE = {}))[r.ClientType_None = 0] = "ClientType_None", r[r.ClientType_H5 = 1] = "ClientType_H5", r[r.ClientType_SmallPragram = 2] = "ClientType_SmallPragram", r[r.ClientType_Webrtc = 3] = "ClientType_Webrtc" }, function (e, t, A) { "use strict"; function r() { this._testEnvironment = !0, this._ENV = 0, this._debug = !0 } Object.defineProperty(t, "__esModule", { "value": !0 }), t.LoggerStateCenter = void 0, r.getInstance = function () { return r.instance || (r.instance = new r).init(), r.instance }, r.prototype.init = function () { }, Object.defineProperty(r.prototype, "testEnvironment", { "get": function get() { return this._testEnvironment }, "set": function set(e) { this._testEnvironment = e }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(r.prototype, "ENV", { "get": function get() { return this._ENV }, "set": function set(e) { this._ENV = e }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(r.prototype, "debug", { "get": function get() { return this._debug }, "set": function set(e) { this._debug = e }, "enumerable": !1, "configurable": !0 }), r.instance = new r, t.LoggerStateCenter = r }, function (e, t, A) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.createZegoWebSocket = t.ZegoWeiXinMiniWebSocket = void 0; var r = A(0), o = (i.prototype.init = function () { var e = this; this._websocket && (this.readyState = 0, this._websocket.onOpen(function (t) { e.readyState = e._websocket.readyState, "function" == typeof e.onopen && (e.onopen(t), e._websocket.onClose(function (t) { e.readyState = e._websocket.readyState, "function" == typeof e.onclose && e.onclose(t) }), e._websocket.onMessage(function (t) { "function" == typeof e.onmessage && e.onmessage(t) })) }), this._websocket.onError(function (t) { e.readyState = e._websocket.readyState, "function" == typeof e.onerror && e.onerror(t) })) }, i.prototype.onopen = function (e) { }, i.prototype.onerror = function (e) { }, i.prototype.onclose = function (e) { }, i.prototype.onmessage = function (e) { }, i.prototype.send = function (e) { this._websocket && this._websocket.send({ "data": e }) }, i.prototype.close = function () { this._websocket && this._websocket.close() }, i); function i(e, t) { this.url = e, this.readyState = 3, this._websocket = wx.connectSocket({ "url": e }), this.init() } t.ZegoWeiXinMiniWebSocket = o, t.createZegoWebSocket = function (e, t) { return new (t % 2 === r.ZEGO_ENV.BROWSER ? WebSocket : o)(e) } }, function (e, t, A) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.LoggerStateCenter = t.createZegoWebSocket = t.ZegoDataReport = t.ZegoLogger = void 0; var r = A(1), i = (Object.defineProperty(t, "LoggerStateCenter", { "enumerable": !0, "get": function get() { return r.LoggerStateCenter } }), A(2)), o = (Object.defineProperty(t, "createZegoWebSocket", { "enumerable": !0, "get": function get() { return i.createZegoWebSocket } }), A(4)), n = (Object.defineProperty(t, "ZegoDataReport", { "enumerable": !0, "get": function get() { return o.ZegoDataReport } }), A(5)); Object.defineProperty(t, "ZegoLogger", { "enumerable": !0, "get": function get() { return n.ZegoLogger } }) }, function (e, t, A) { "use strict"; var r = this && this.__assign || function () { return (r = Object.assign || function (e) { for (var t, A = 1, r = arguments.length; A < r; A++)for (var i in t = arguments[A]) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]); return e }).apply(this, arguments) }, o = (Object.defineProperty(t, "__esModule", { "value": !0 }), t.ZegoDataReport = void 0, i.prototype.newReport = function (e, t) { this.dataStatistics[e] = { "event_time": Date.now(), "time_consumed": 0, "seq": e, "error": 0, "message": "success", "event": t, "events": [] } }, i.prototype.addMsgExt = function (e, t) { this.dataStatistics[e] ? this.dataStatistics[e].msg_ext = t : console.warn(e + " not exist") }, i.prototype.addMsgInfo = function (e, t) { this.dataStatistics[e] ? Object.assign(this.dataStatistics[e], t) : console.warn(e + " not exist") }, i.prototype.eventStart = function (e, t) { this.dataStatistics[e] ? null != this.dataStatistics[e].events ? this.dataStatistics[e].events.push({ "event": t, "event_time": Date.now(), "time_consumed": 0 }) : this.logger.warn("zd.es.0 no events") : this.logger.warn("zd.es.0 no seq match") }, i.prototype.eventEnd = function (e, t, A) { if (this.dataStatistics[e]) { var r = this.dataStatistics[e].events; if (r && 0 !== r.length) { for (var i = r.length - 1; 0 <= i; i--)if (r[i].event == t && 0 == r[i].time_consumed) { r[i].time_consumed = Date.now() - r[i].event_time; break } } else this.logger.info("zd.ee.0 no events") } else this.logger.info("zd.ee.0 no seq match") }, i.prototype.eventEndWithMsg = function (e, t, A) { if (this.dataStatistics[e]) { var i = this.dataStatistics[e].events; if (i) { for (var o = i.length - 1; 0 <= o; o--)if (i[o].event == t && 0 == i[o].time_consumed) { i[o].time_consumed = Date.now() - i[o].event_time, null == i[o].msg_ext && (i[o].msg_ext = {}), i[o].msg_ext = r({}, A); break } } else this.logger.warn("zd.ee.0 no events") } else this.logger.warn("zd.ee.0 no seq match") }, i.prototype.eventEndWithMsgInfo = function (e, t, A) { if (this.dataStatistics[e]) { var r = this.dataStatistics[e].events; if (r) { for (var i = r.length - 1; 0 <= i; i--)if (r[i].event == t && 0 == r[i].time_consumed) { r[i].time_consumed = Date.now() - r[i].event_time, Object.assign(r[i], A); break } } else this.logger.warn("zd.ee.0 no events") } else this.logger.warn("zd.ee.0 no seq match") }, i.prototype.addEventInfo = function (e, t, A, r) { if (this.dataStatistics[e]) { var i = this.dataStatistics[e].events; if (null != i) { for (var o = i.length - 1; 0 <= o; o--)if (i[o].event == t && null != i[o].time_consumed) { null == i[o].msg_ext ? i[o].msg_ext = {} : i[o].msg_ext && (i[o].msg_ext[A] = r); break } } else this.logger.warn("zd.aei.0 no events") } else this.logger.warn("zd.aei.0 no seq match") }, i.prototype.addEventMsg = function (e, t, A, r) { if (this.dataStatistics[e]) { var i = this.dataStatistics[e].events; if (null != i) { for (var o = i.length - 1; 0 <= o; o--)if (i[o].event == t) { i[o][A] = r; break } } else this.logger.warn("zd.aem.0 no events") } else this.logger.warn("zd.aem.0 no seq match") }, i.prototype.addEvent = function (e, t, A) { this.dataStatistics[e] ? this.dataStatistics[e].events && (A ? this.dataStatistics[e].events.push({ "event": t, "event_time": Date.now(), "msg_ext": A }) : this.dataStatistics[e].events.push({ "event": t, "event_time": Date.now() })) : this.logger.warn("zd.ae.0 no seq match") }, i.prototype.uploadReport = function (e, t, A, r) { var i = this.dataStatistics[e]; null != i && (t && (i.event = t), i.time_consumed = Date.now() - i.event_time, A && this.addMsgInfo(e, { "error": A.code, "message": A.message || A.msg + " " + (r || "") }), this.logger.report(i), delete this.dataStatistics[e]) }, i); function i(e) { this.dataStatistics = {}, this.logger = e } t.ZegoDataReport = o }, function (e, t, A) { "use strict"; var r = this && this.__assign || function () { return (r = Object.assign || function (e) { for (var t, A = 1, r = arguments.length; A < r; A++)for (var i in t = arguments[A]) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]); return e }).apply(this, arguments) }, i = (Object.defineProperty(t, "__esModule", { "value": !0 }), t.ZegoLogger = void 0, A(0)), o = A(2), n = A(1), s = A(6); function c(e) { this.logLevel = i.ENUM_LOG_LEVEL.INFO, this.logRemoteLevel = 0, this.websocket = null, this.logUploadTimer = null, this.logUploadInterval = 1e4, this.logCache = [], this.logCacheSend = [], this.logCacheMax = 8192, this.existUserID = !1, this.isDestroy = !1, this.stateCenter = n.LoggerStateCenter.getInstance(), this.env = e } c.prototype.setLogLevel = function (e) { return void 0 !== (e = i.ENUM_LOG_LEVEL[e]) && (this.logLevel = e, !0) }, c.prototype.setRemoteLogLevel = function (e) { return void 0 !== (e = i.ENUM_LOG_LEVEL[e]) && (this.logRemoteLevel = e, !0) }, c.prototype.setSessionInfo = function (e, t, A, r, i, o) { this.appid = e, this.roomid = t, this.sessionid = A, this.userid = r, this.userName = i, this.version = o }, c.prototype.report = function (e) { e = this.logReportParamList(i.ENUM_LOG_LEVEL.REPORT, e), this.logLevel !== i.ENUM_LOG_LEVEL.DISABLE && this.logLevel <= i.ENUM_LOG_LEVEL.REPORT && console.debug(e), this.RemoteLog(i.ENUM_LOG_LEVEL.REPORT, e, !0) }, c.prototype.debug = function () { for (var e = [], t = 0; t < arguments.length; t++)e[t] = arguments[t]; var A = this.logParamList(i.ENUM_LOG_LEVEL.DEBUG, e.join("")); this.logLevel !== i.ENUM_LOG_LEVEL.DISABLE && this.logLevel <= i.ENUM_LOG_LEVEL.DEBUG && console.debug(A), this.log(i.ENUM_LOG_LEVEL.DEBUG, A) }, c.prototype.info = function () { for (var e = [], t = 0; t < arguments.length; t++)e[t] = arguments[t]; var A = this.logParamList(i.ENUM_LOG_LEVEL.INFO, e.join("")); this.logLevel !== i.ENUM_LOG_LEVEL.DISABLE && this.logLevel <= i.ENUM_LOG_LEVEL.INFO && console.info(A), this.log(i.ENUM_LOG_LEVEL.INFO, A) }, c.prototype.warn = function () { for (var e = [], t = 0; t < arguments.length; t++)e[t] = arguments[t]; var A = this.logParamList(i.ENUM_LOG_LEVEL.WARN, e.join("")); this.logLevel !== i.ENUM_LOG_LEVEL.DISABLE && this.logLevel <= i.ENUM_LOG_LEVEL.WARN && console.warn(A), this.log(i.ENUM_LOG_LEVEL.WARN, A) }, c.prototype.error = function () { for (var e = [], t = 0; t < arguments.length; t++)e[t] = arguments[t]; var A = this.logParamList(i.ENUM_LOG_LEVEL.ERROR, e.join("")); this.logLevel !== i.ENUM_LOG_LEVEL.DISABLE && this.logLevel <= i.ENUM_LOG_LEVEL.ERROR && (console.error(A), this.env % 2 === i.ZEGO_ENV.BROWSER && window ? this.stateCenter.debug && window.alert(e.join("").substr(e.join("").indexOf(" ") + 1, 4500)) : this.env % 2 === i.ZEGO_ENV.WEIXINMINI && wx && this.stateCenter.debug && wx.showModal({ "title": "", "content": e.join("").substr(e.join("").indexOf(" ") + 1, 4500) })), this.log(i.ENUM_LOG_LEVEL.ERROR, A) }, c.prototype.log = function (e, t) { this.logRemoteLevel !== i.ENUM_LOG_LEVEL.DISABLE && this.logRemoteLevel <= e && this.RemoteLog(e, t) }, c.prototype.setLogServer = function (e) { if (this.isDestroy) return !1; try { return e.startsWith("wss:") ? (this.logType = i.ENUM_REMOTE_TYPE.WEBSOCKET, this.openWebSocketLogServer(e)) : e.startsWith("https:") ? (this.logType = i.ENUM_REMOTE_TYPE.HTTPS, this.openHttpsLogServer(e)) : this.logType = i.ENUM_REMOTE_TYPE.DISABLE, !0 } catch (e) { return this.error(JSON.stringify(e)), !1 } }, c.prototype.stopLogServer = function () { this.logType == i.ENUM_REMOTE_TYPE.WEBSOCKET ? this.stopWebSocketServer() : this.logType == i.ENUM_REMOTE_TYPE.HTTPS && (this.SendHttpsLog(), this.stopHttpsServer()), this.logType = i.ENUM_REMOTE_TYPE.DISABLE }, c.prototype.stopWebSocketServer = function () { this.websocket && (this.websocket.onclose = null, this.websocket.onerror = null, this.websocket.close(), this.websocket = null) }, c.prototype.openHttpsLogServer = function (e) { var t = this; (this.url = e) && (this.stopHttpsServer(), this.logUploadTimer || (this.logUploadTimer = setInterval(function () { t.SendHttpsLog() }, this.logUploadInterval))) }, c.prototype.stopHttpsServer = function () { this.logUploadTimer && (clearInterval(this.logUploadTimer), this.logUploadTimer = null) }, c.prototype.RemoteLog = function (e, t, A) { if (void 0 === A && (A = !1), "" != this.url && !this.isDestroy) if (this.logType == i.ENUM_REMOTE_TYPE.WEBSOCKET) this.RemoteWebSocketLog(e, t); else if (this.logType == i.ENUM_REMOTE_TYPE.HTTPS) this.RemoteHttpsLog(e, t, A); else if (this.logLevel !== i.ENUM_LOG_LEVEL.DISABLE && this.logLevel <= e) for (this.logCacheSend.push(t); this.logCacheSend.length > this.logCacheMax;)this.logCacheSend.shift() }, c.prototype.RemoteWebSocketLog = function (e, t) { if ("string" == typeof t && 4e3 < t.length) console.info("log over maximum, ignore"); else if (null == this.websocket || 2 == this.websocket.readyState || 3 == this.websocket.readyState) { var A = this.url; this.url = "", this.setLogServer(A), this.logCacheSend.length < this.logCacheMax && this.logCacheSend.push(t) } else if (0 == this.websocket.readyState) this.logCacheSend.length < this.logCacheMax && this.logCacheSend.push(t); else if (1 == this.websocket.readyState) { if (0 < this.logCacheSend.length) { for (var i = "", o = 0; o < this.logCacheSend.length; o++) { 4e3 < (i + this.logCacheSend[o]).length && (this.websocket.send(i), i = ""); var n = JSON.parse(this.logCacheSend[o]); n = r(r({}, n), { "userid": n.userid || this.userid, "roomid": n.roomid || this.roomid, "userName": n.userName || this.userName }), i = i + JSON.stringify(n) + "\n" } t = i + t, this.logCacheSend = [] } this.websocket.send(t) } else console.warn("wrong socket state:" + this.websocket.readyState), this.logCacheSend.length < this.logCacheMax && this.logCacheSend.push(t) }, c.prototype.RemoteHttpsLog = function (e, t, A) { this.logCacheSend.push(t), (this.logCacheSend.length >= this.logCacheMax || !0 === A) && this.SendHttpsLog() }, c.prototype.logParamList = function (e, t) { var A = { "time": A = s.getCurrentTime(), "level": e, "action": (t = [t.substr(0, t.indexOf(" ")) || t, t.substr(t.indexOf(" ") + 1, 4500) || t])[0], "content": t[1], "appid": this.appid, "roomid": this.roomid, "userid": this.userid, "userName": this.userName, "sessionid": this.sessionid }; return JSON.stringify(A) }, c.prototype.logReportParamList = function (e, t) { var A = s.getCurrentTime(); return t = r(r({}, t), { "time": A, "level": e, "console": this.env % 2 === i.ZEGO_ENV.BROWSER ? "rtc" : "xcx", "appid": this.appid, "room_id": this.roomid, "roomid": this.roomid, "userid": this.userid, "id_name": this.userid, "userName": this.userName, "sessionid": this.sessionid, "sdk_version": this.version, "test_environment": this.stateCenter.testEnvironment, "version": this.version, "event_id": this.appid + "_" + this.userid + "_" + t.event_time + "_" + t.seq }), JSON.stringify(t) }, c.prototype.openWebSocketLogServer = function (e) { this.url != e && (this.url = e) && (this.stopWebSocketServer(), this.websocket = o.createZegoWebSocket(e, this.env), this.websocket.onopen = function () { }, this.websocket.onclose = function () { for (var e = [], t = 0; t < arguments.length; t++)e[t] = arguments[t]; console.warn("onclose   websocket error:", e) }, this.websocket.onmessage = function () { }, this.websocket.onerror = function () { for (var e = [], t = 0; t < arguments.length; t++)e[t] = arguments[t]; console.warn("open log websocket error:", e) }) }, c.prototype.SendHttpsLog = function () { 0 != this.logCacheSend.length && (this.env % 2 === i.ZEGO_ENV.BROWSER ? this.SendHttpsLogWeb() : this.SendHttpsLogWeChatMini()) }, c.prototype.SendHttpsLogWeb = function () { var e = this, t = this.logCacheSend.join("\n"), A = this.logCacheSend, r = new XMLHttpRequest; r.onreadystatechange = function () { if (4 == r.readyState) { if (200 == r.status) { if (0 == r.responseText.length) return; try { var t = JSON.parse(r.responseText).interval; "number" == typeof t && e.logUploadInterval !== t && (e.timeInterval = t, e.openHttpsLogServer(e.url)) } catch (t) { e.logCacheSend = A.concat(e.logCacheSend), console.log("send result failed " + t) } } else e.logCacheSend = A.concat(e.logCacheSend), console.log("send failed " + r.status); A = null } }, r.open("POST", this.url, !0), 0 == this.env ? r.send(t) : 1 == this.env && (r.setRequestHeader("content-type", "application/json"), r.send(JSON.stringify({ "user_id": this.userid, "log": t }))), this.logCacheSend = [] }, c.prototype.SendHttpsLogWeChatMini = function () { var e = this; if (!this.existUserID) { if (!this.userid) return void console.log("no userid"); this.logCacheSend.forEach(function (t, A) { (t = JSON.parse(t)) && "" == t.userid ? (t.userid = e.userid, t.id_name = t.id_name || e.userid, t.roomid = t.roomid || e.roomid, t.userName = t.userName || e.userName, e.logCacheSend[A] = JSON.stringify(t)) : e.existUserID = !0 }) } var t = this.logCacheSend.join("\n"), A = this.logCacheSend; t = 1 == this.env ? t : JSON.stringify({ "user_id": this.userid, "log": t }), wx.request({ "url": this.url, "data": t, "method": "POST", "success": function success(t) { 0 != t.data.length && ("number" == typeof (t = t && t.data && t.data.interval) && e.logUploadInterval !== t && (e.timeInterval = t, e.openHttpsLogServer(e.url)), A = null) }, "fail": function fail(e) { this.logCacheSend = A.concat(this.logCacheSend), console.log("send failed " + e.statusCode), A = null } }), this.logCacheSend = [] }, c.prototype.destroy = function () { this.stopLogServer(), this.logUploadTimer && clearTimeout(this.logUploadTimer), n.LoggerStateCenter.instance = void 0, this.websocket = null, this.url = "" }, t.ZegoLogger = c }, function (e, t, A) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.getCurrentTime = t.getCurrentEnv = t.getBrowser = void 0; var r = A(0), i = (t.getBrowser = function () { var e = window.navigator.userAgent, t = null != window.ActiveXObject && -1 != e.indexOf("MSIE"), A = -1 != e.indexOf("Firefox"), i = null != window.opr, o = e.indexOf("Chrome") && window.chrome, n = -1 != e.indexOf("Safari") && -1 != e.indexOf("Version"); return e = e.toLowerCase().match(/MicroMessenger/i) && "micromessenger" === e.toLowerCase().match(/MicroMessenger/i)[0], t ? r.ZEGO_BROWSER_TYPE.IE : A ? r.ZEGO_BROWSER_TYPE.FIREFOX : i ? r.ZEGO_BROWSER_TYPE.OPERA : o ? r.ZEGO_BROWSER_TYPE.CHROME : n ? r.ZEGO_BROWSER_TYPE.SAFARI : e ? r.ZEGO_BROWSER_TYPE.WEIXIN : r.ZEGO_BROWSER_TYPE.UNKOWN }, t.getCurrentEnv = function () { var e = window.navigator.userAgent; return new Promise(function (t) { -1 == e.indexOf("MicroMessage") ? t(r.ZEGO_ENV.BROWSER) : wx.miniProgram.getEnv(function (e) { e.miniprogram }) }) }, ["00", "01", "02", "03", "04", "05", "06", "07", "08", "09"]); t.getCurrentTime = function () { var e = new Date; return [e.getFullYear() + "/", (i[e.getMonth() + 1] || e.getMonth() + 1) + "/", (i[e.getDate()] || e.getDate()) + " ", (i[e.getHours()] || e.getHours()) + ":", (i[e.getMinutes()] || e.getMinutes()) + ":", i[e.getSeconds()] || e.getSeconds(), "." + e.getTime() % 1e3].join("") } }], o = {}, r.m = i, r.c = o, r.d = function (e, t, A) { r.o(e, t) || Object.defineProperty(e, t, { "enumerable": !0, "get": A }) }, r.r = function (e) { "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, { "value": "Module" }), Object.defineProperty(e, "__esModule", { "value": !0 }) }, r.t = function (e, t) { if (1 & t && (e = r(e)), 8 & t) return e; if (4 & t && "object" == (void 0 === e ? "undefined" : u(e)) && e && e.__esModule) return e; var A = Object.create(null); if (r.r(A), Object.defineProperty(A, "default", { "enumerable": !0, "value": e }), 2 & t && "string" != typeof e) for (var i in e) r.d(A, i, function (t) { return e[t] }.bind(null, i)); return A }, r.n = function (e) { var t = e && e.__esModule ? function () { return e.default } : function () { return e }; return r.d(t, "a", t), t }, r.o = function (e, t) { return Object.prototype.hasOwnProperty.call(e, t) }, r.p = "", r(r.s = 3)) }, function (e, t, A) { e.exports = A(2).enc.Utf8 }, function (t, A) { t.exports = e }, function (e, t, A) { "use strict"; t.byteLength = function (e) { return 3 * ((e = u(e))[0] + (e = e[1])) / 4 - e }, t.toByteArray = function (e) { var t, A, r = (n = u(e))[0], n = n[1], s = new o(3 * (r + n) / 4 - n), a = 0, c = 0 < n ? r - 4 : r; for (A = 0; A < c; A += 4)t = i[e.charCodeAt(A)] << 18 | i[e.charCodeAt(A + 1)] << 12 | i[e.charCodeAt(A + 2)] << 6 | i[e.charCodeAt(A + 3)], s[a++] = t >> 16 & 255, s[a++] = t >> 8 & 255, s[a++] = 255 & t; return 2 === n && (t = i[e.charCodeAt(A)] << 2 | i[e.charCodeAt(A + 1)] >> 4, s[a++] = 255 & t), 1 === n && (t = i[e.charCodeAt(A)] << 10 | i[e.charCodeAt(A + 1)] << 4 | i[e.charCodeAt(A + 2)] >> 2, s[a++] = t >> 8 & 255, s[a++] = 255 & t), s }, t.fromByteArray = function (e) { for (var t, A = e.length, i = A % 3, o = [], n = 0, s = A - i; n < s; n += 16383)o.push(function (e, t, A) { for (var i, o = [], n = t; n < A; n += 3)i = (e[n] << 16 & 16711680) + (e[n + 1] << 8 & 65280) + (255 & e[n + 2]), o.push(function (e) { return r[e >> 18 & 63] + r[e >> 12 & 63] + r[e >> 6 & 63] + r[63 & e] }(i)); return o.join("") }(e, n, s < n + 16383 ? s : n + 16383)); return 1 == i ? (t = e[A - 1], o.push(r[t >> 2] + r[t << 4 & 63] + "==")) : 2 == i && (t = (e[A - 2] << 8) + e[A - 1], o.push(r[t >> 10] + r[t >> 4 & 63] + r[t << 2 & 63] + "=")), o.join("") }; for (var r = [], i = [], o = "undefined" != typeof Uint8Array ? Uint8Array : Array, n = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/", s = 0, a = n.length; s < a; ++s)r[s] = n[s], i[n.charCodeAt(s)] = s; function u(e) { var t = e.length; if (0 < t % 4) throw new Error("Invalid string. Length must be a multiple of 4"); return t = (e = -1 === (e = e.indexOf("=")) ? t : e) === t ? 0 : 4 - e % 4, [e, t] } i["-".charCodeAt(0)] = 62, i["_".charCodeAt(0)] = 63 }, function (e, t, A) { function r(e) { var t; return (c[e] || (t = c[e] = { "i": e, "l": !1, "exports": {} }, a[e].call(t.exports, t, t.exports, r), t.l = !0, t)).exports } var i, o, n, s, a, c; e.exports = (i = A(11), o = A(4), n = A(3), s = A(6), a = [function (e, t, A) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.LinkedList = t.ListNode = t.ENUM_CONNECT_STATE = t.ENUM_NETWORK_STATE = t.SOCKET_DISCONNECT = t.errorList = t.Queue = t.getSeq = t.E_CLIENT_TYPE = t.ENUM_LOG_LEVEL = t.ENUM_REMOTE_TYPE = t.ZEGO_BROWSER_TYPE = t.ZEGO_ENV = t.PROTO_VERSION = void 0, t.PROTO_VERSION = "1.0.2", (o = t.ZEGO_ENV || (t.ZEGO_ENV = {}))[o.BROWSER = 0] = "BROWSER", o[o.WEIXINMINI = 1] = "WEIXINMINI", (o = t.ZEGO_BROWSER_TYPE || (t.ZEGO_BROWSER_TYPE = {}))[o.IE = 0] = "IE", o[o.FIREFOX = 1] = "FIREFOX", o[o.CHROME = 2] = "CHROME", o[o.SAFARI = 3] = "SAFARI", o[o.OPERA = 4] = "OPERA", o[o.WEIXIN = 5] = "WEIXIN", o[o.WEIXINMINI = 6] = "WEIXINMINI", o[o.UNKOWN = 7] = "UNKOWN", (o = t.ENUM_REMOTE_TYPE || (t.ENUM_REMOTE_TYPE = {}))[o.DISABLE = 0] = "DISABLE", o[o.WEBSOCKET = 1] = "WEBSOCKET", o[o.HTTPS = 2] = "HTTPS", t.ENUM_LOG_LEVEL = { "DEBUG": 0, "INFO": 1, "WARN": 2, "ERROR": 3, "REPORT": 99, "DISABLE": 100, "debug": 0, "info": 1, "warn": 2, "error": 3, "report": 99, "disable": 100 }, (o = t.E_CLIENT_TYPE || (t.E_CLIENT_TYPE = {}))[o.ClientType_None = 0] = "ClientType_None", o[o.ClientType_H5 = 1] = "ClientType_H5", o[o.ClientType_SmallPragram = 2] = "ClientType_SmallPragram", o[o.ClientType_Webrtc = 3] = "ClientType_Webrtc", t.getSeq = (r = 1, function () { return r++ }), i.prototype.isEmpty = function () { return 0 == this.items.length }, i.prototype.enqueue = function (e) { this.items.push(e) }, i.prototype.dequeue = function () { return this.isEmpty() ? "Underflow" : this.items.shift() }, i.prototype.front = function () { return this.isEmpty() ? "No elements in Queue" : this.items[0] }, i.prototype.size = function () { return this.items.length }, i.prototype.clear = function () { this.items = [] }, i.prototype.all = function () { return this.items }; var r, o = i; function i() { this.items = [], this.items = [] } t.Queue = o, t.errorList = { "TIMEOUT": { "code": 100001, "msg": "network timeout" }, "DATAEXIST": { "code": 100002, "msg": "data exist" }, "BROKEN": { "code": 100003, "msg": "network broken" } }, t.SOCKET_DISCONNECT = -1, (o = t.ENUM_NETWORK_STATE || (t.ENUM_NETWORK_STATE = {}))[o.offline = 0] = "offline", o[o.online = 1] = "online", (o = t.ENUM_CONNECT_STATE || (t.ENUM_CONNECT_STATE = {}))[o.disconnected = 0] = "disconnected", o[o.connecting = 1] = "connecting", o[o.connected = 2] = "connected", Object.defineProperty(a.prototype, "id", { "get": function get() { return this._id || null }, "set": function set(e) { this._id = e }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(a.prototype, "data", { "get": function get() { return this._data }, "set": function set(e) { this._data = e }, "enumerable": !1, "configurable": !0 }), a.prototype.hasNext = function () { return this.next && this.next.id }, a.prototype.hasPrev = function () { return this.prev && this.prev.id }; var n = a; function a(e, t) { void 0 === e && (e = null), void 0 === t && (t = null), this.next = null, this.prev = null, this._id = e, this._data = t } function c() { this.start = new n, this.end = new n, this._idCounter = 0, this._numNodes = 0, this.start.next = this.end, this.start.prev = null, this.end.prev = this.start, this.end.next = null } t.ListNode = n, c.prototype.insertBefore = function (e, t) { return (t = new n(this._idCounter, t)).next = e, t.prev = e.prev, e.prev && (e.prev.next = t), e.prev = t, ++this._idCounter, ++this._numNodes, t }, c.prototype.addLast = function (e) { return this.insertBefore(this.end, e) }, c.prototype.add = function (e) { return this.addLast(e) }, c.prototype.getFirst = function () { return 0 === this._numNodes ? null : this.start.next }, c.prototype.getLast = function () { return 0 === this._numNodes ? null : this.end.prev }, c.prototype.size = function () { return this._numNodes }, c.prototype.getFromFirst = function (e) { var t = 0, A = this.start.next; if (0 <= e) for (; t < e && null !== A;)A = A.next, ++t; else A = null; if (null === A) throw "Index out of bounds."; return A }, c.prototype.get = function (e) { return 0 === e ? this.getFirst() : e === this._numNodes - 1 ? this.getLast() : this.getFromFirst(e) }, c.prototype.remove = function (e) { return e.prev && (e.prev.next = e.next), e.next && (e.next.prev = e.prev), --this._numNodes, e }, c.prototype.removeFirst = function () { return 0 < this._numNodes && this.start.next ? this.remove(this.start.next) : null }, c.prototype.removeLast = function () { return 0 < this._numNodes && this.end.prev ? this.remove(this.end.prev) : null }, c.prototype.removeAll = function () { this.start.next = this.end, this.end.prev = this.start, this._numNodes = 0, this._idCounter = 0 }, c.prototype.each = function (e) { for (var t = this.start; t.hasNext();)e(t = t.next) }, c.prototype.find = function (e) { for (var t = this.start, A = !1, r = null; t.hasNext() && !A;)e(t = t.next) && (r = t, A = !0); return r }, c.prototype.map = function (e) { for (var t = this.start, A = []; t.hasNext();)e(t = t.next) && A.push(t); return A }, c.prototype.push = function (e) { return this.addLast(e) }, c.prototype.unshift = function (e) { 0 < this._numNodes ? this.insertBefore(this.start.next, e) : this.insertBefore(this.end, e) }, c.prototype.pop = function () { return this.removeLast() }, c.prototype.shift = function () { return this.removeFirst() }, t.LinkedList = c }, function (e, t, A) { "use strict"; var r = this && this.__read || function (e, t) { var A = "function" == typeof Symbol && e[Symbol.iterator]; if (!A) return e; var r, i, o = A.call(e), n = []; try { for (; (void 0 === t || 0 < t--) && !(r = o.next()).done;)n.push(r.value) } catch (e) { i = { "error": e } } finally { try { r && !r.done && (A = o.return) && A.call(o) } finally { if (i) throw i.error } } return n }, i = this && this.__spread || function () { for (var e = [], t = 0; t < arguments.length; t++)e = e.concat(r(arguments[t])); return e }, o = (Object.defineProperty(t, "__esModule", { "value": !0 }), t.ContextAPI = t.suppressInstrumentation = t.ROOT_CONTEXT = t.BaseContext = t.setSpan = t.getSpanContext = t.getSpan = t.createContextKey = void 0, A(16)); function s(e) { return Symbol.for(e) } var n = (t.createContextKey = s)("OpenTelemetry Context Key SUPPRESS_INSTRUMENTATION"), a = s("OpenTelemetry Context Key SPAN"); function u(e) { return e.getValue(a) || void 0 } function l(e) { this.name = e, this.contextManager = new o.StackContextManager } t.getSpan = u, t.getSpanContext = function (e) { return null == (e = u(e)) ? void 0 : e.context() }, t.setSpan = function (e, t) { return e.setValue(a, t) }, t.BaseContext = A = function e(t) { var A = this; A._currentContext = t ? new Map(t) : new Map, A.getValue = function (e) { return A._currentContext.get(e) }, A.setValue = function (t, r) { var i = new e(A._currentContext); return i._currentContext.set(t, r), i }, A.deleteValue = function (t) { var r = new e(A._currentContext); return r._currentContext.delete(t), r } }, t.ROOT_CONTEXT = new A, t.suppressInstrumentation = function (e) { return e.setValue(n, !0) }, l.getInstance = function (e) { return void 0 === e && (e = "context"), this._instance || (this._instance = new l(e)), this._instance }, l.prototype.active = function () { return this.contextManager.active() }, l.prototype.with = function (e, t, A) { for (var r, o = [], n = 3; n < arguments.length; n++)o[n - 3] = arguments[n]; return (r = this._getContextManager()).with.apply(r, i([e, t, A], o)) }, l.prototype._getContextManager = function () { return this.contextManager }, t.ContextAPI = l }, function (e, t, A) { "use strict"; var r, i; Object.defineProperty(t, "__esModule", { "value": !0 }), t.INVALID_SPAN_CONTEXT = t.INVALID_TRACEID = t.INVALID_SPANID = t.TraceFlags = t.SpanKind = t.SpanStatusCode = void 0, (r = t.SpanStatusCode || (t.SpanStatusCode = {}))[r.UNSET = 0] = "UNSET", r[r.OK = 1] = "OK", r[r.ERROR = 2] = "ERROR", (r = t.SpanKind || (t.SpanKind = {}))[r.INTERNAL = 0] = "INTERNAL", r[r.SERVER = 1] = "SERVER", r[r.CLIENT = 2] = "CLIENT", r[r.PRODUCER = 3] = "PRODUCER", r[r.CONSUMER = 4] = "CONSUMER", (i = r = t.TraceFlags || (t.TraceFlags = {}))[i.NONE = 0] = "NONE", i[i.SAMPLED = 1] = "SAMPLED", t.INVALID_SPANID = "0000000000000000", t.INVALID_TRACEID = "00000000000000000000000000000000", t.INVALID_SPAN_CONTEXT = { "traceId": t.INVALID_TRACEID, "spanId": t.INVALID_SPANID, "traceFlags": r.NONE } }, function (e, t, A) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.log = t.ZegoLog = void 0, o.prototype.log = function () { for (var e = [], t = 0; t < arguments.length; t++)e[t] = arguments[t]; var A = e.join(""); console.log(A) }, o.prototype.debug = function () { for (var e = [], t = 0; t < arguments.length; t++)e[t] = arguments[t]; var A = e.join(""); console.debug(A) }, o.prototype.info = function () { for (var e = [], t = 0; t < arguments.length; t++)e[t] = arguments[t]; var A = e.join(""); console.info(A) }, o.prototype.warn = function () { for (var e = [], t = 0; t < arguments.length; t++)e[t] = arguments[t]; var A = e.join(""); console.warn(A) }, o.prototype.error = function () { for (var e = [], t = 0; t < arguments.length; t++)e[t] = arguments[t]; var A = e.join(""); console.error(A) }; var r = o; function o() { } r = new (t.ZegoLog = r), t.log = r }, function (e, t, A) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.FAIL_TIME = t.FAIL_MAX_COUNT = t.FAIL_COUNT = t.STORE_SIZE = t.CACHE_SIZE = t.BUCKET_CONFIG = t.DEFAULT_CONFIG = void 0, t.DEFAULT_CONFIG = { "importantLevel": 0, "reportSize": 3e3, "reportNum": 10, "bps": 16e3, "netTimeout": 10 }, t.BUCKET_CONFIG = { "bucketSize": 1e4, "tokensPerInterval": 1600 }, t.CACHE_SIZE = { "totalAvailCache": 102400, "cacheMaxSize": 2e4, "cacheDelPer": .2 }, t.STORE_SIZE = { "totalDBSize": 2048e3, "storeDelPer": .2 }, t.FAIL_COUNT = 5, t.FAIL_MAX_COUNT = 10, t.FAIL_TIME = 30 }, function (e, t, A) { "use strict"; var r = this && this.__importDefault || function (e) { return e && e.__esModule ? e : { "default": e } }, i = (Object.defineProperty(t, "__esModule", { "value": !0 }), t.uuid = t.calculateMemSize = t.analyzeKey = t.getCurrentTime = t.getCurrentEnv = t.getBrowser = void 0, A(0)), o = r(A(31)), n = (t.getBrowser = function () { var e = window.navigator.userAgent, t = null != window.ActiveXObject && -1 != e.indexOf("MSIE"), A = -1 != e.indexOf("Firefox"), r = null != window.opr, o = e.indexOf("Chrome") && window.chrome, n = -1 != e.indexOf("Safari") && -1 != e.indexOf("Version"); return e = e.toLowerCase().match(/MicroMessenger/i) && "micromessenger" === e.toLowerCase().match(/MicroMessenger/i)[0], t ? i.ZEGO_BROWSER_TYPE.IE : A ? i.ZEGO_BROWSER_TYPE.FIREFOX : r ? i.ZEGO_BROWSER_TYPE.OPERA : o ? i.ZEGO_BROWSER_TYPE.CHROME : n ? i.ZEGO_BROWSER_TYPE.SAFARI : e ? i.ZEGO_BROWSER_TYPE.WEIXIN : i.ZEGO_BROWSER_TYPE.UNKOWN }, t.getCurrentEnv = function () { var e = window.navigator.userAgent; return new Promise(function (t) { -1 == e.indexOf("MicroMessage") ? t(i.ZEGO_ENV.BROWSER) : wx.miniProgram.getEnv(function (e) { e.miniprogram }) }) }, ["00", "01", "02", "03", "04", "05", "06", "07", "08", "09"]); t.getCurrentTime = function () { var e = new Date; return [e.getFullYear() + "/", (n[e.getMonth() + 1] || e.getMonth() + 1) + "/", (n[e.getDate()] || e.getDate()) + " ", (n[e.getHours()] || e.getHours()) + ":", (n[e.getMinutes()] || e.getMinutes()) + ":", n[e.getSeconds()] || e.getSeconds(), "." + e.getTime() % 1e3].join("") }, t.analyzeKey = function (e) { return e = e.split("_"), { "level": Number(e[0]), "timestamp": e[1], "seq": e[2] } }, t.calculateMemSize = function (e) { return o.default(e) }, t.uuid = function (e, t) { var A, r, i = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""), o = []; if (t = t || i.length, e) for (A = 0; A < e; A++)o[A] = i[0 | Math.random() * t]; else for (o[8] = o[13] = o[18] = o[23] = "-", o[14] = "4", A = 0; A < 36; A++)o[A] || (r = 0 | 16 * Math.random(), o[A] = i[19 == A ? 3 & r | 8 : r]); return o.join("") } }, function (e, t, A) { "use strict"; var r = this && this.__values || function (e) { var t = "function" == typeof Symbol && Symbol.iterator, A = t && e[t], r = 0; if (A) return A.call(e); if (e && "number" == typeof e.length) return { "next": function next() { return { "value": (e = e && r >= e.length ? void 0 : e) && e[r++], "done": !e } } }; throw new TypeError(t ? "Object is not iterable." : "Symbol.iterator is not defined.") }, o = this && this.__read || function (e, t) { var A = "function" == typeof Symbol && e[Symbol.iterator]; if (!A) return e; var r, i, o = A.call(e), n = []; try { for (; (void 0 === t || 0 < t--) && !(r = o.next()).done;)n.push(r.value) } catch (e) { i = { "error": e } } finally { try { r && !r.done && (A = o.return) && A.call(o) } finally { if (i) throw i.error } } return n }; function i(e) { var t, A, i; if (null != e && Array.isArray(e)) try { for (var o = r(e), n = o.next(); !n.done; n = o.next()) { var s = n.value; if (null != s) if (i) { if ((void 0 === s ? "undefined" : u(s)) !== i) return !1 } else i = void 0 === s ? "undefined" : u(s) } } catch (e) { t = { "error": e } } finally { try { n && !n.done && (A = o.return) && A.call(o) } finally { if (t) throw t.error } } return !0 } Object.defineProperty(t, "__esModule", { "value": !0 }), t.sanitizeAttributes = t.isAttributeValue = void 0, t.isAttributeValue = i, t.sanitizeAttributes = function (e) { var t, A, n = {}; if (null != e && "object" == (void 0 === e ? "undefined" : u(e))) try { for (var s = r(Object.entries(e)), a = s.next(); !a.done; a = s.next()) { var c = o(a.value, 2), g = c[0], l = c[1]; i(l) && (Array.isArray(l) ? n[g] = l.slice() : n[g] = l) } } catch (e) { t = { "error": e } } finally { try { a && !a.done && (A = s.return) && A.call(s) } finally { if (t) throw t.error } } return n } }, function (e, t, A) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.IdGenerator = void 0; var r = Array(32); function o(e) { return function () { for (var t = 0; t < 2 * e; t++)r[t] = Math.floor(16 * Math.random()) + 48, 58 <= r[t] && (r[t] += 39); return String.fromCharCode.apply(null, r.slice(0, 2 * e)) } } t.IdGenerator = function () { this.generateTraceId = o(16), this.generateSpanId = o(8), this.generateEventId = o(4) } }, function (e, t, A) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.Resource = t.SDK_INFO = t.SemanticResourceAttributes = void 0, t.SemanticResourceAttributes = { "PROCESS_RUNTIME_NAME": "process.runtime.name", "TELEMETRY_SDK_NAME": "telemetry.sdk.name", "TELEMETRY_SDK_LANGUAGE": "telemetry.sdk.language", "TELEMETRY_SDK_VERSION": "telemetry.sdk.version" }, t.SDK_INFO = ((r = {})[t.SemanticResourceAttributes.TELEMETRY_SDK_NAME] = "opentelemetry", r[t.SemanticResourceAttributes.PROCESS_RUNTIME_NAME] = "browser", r[t.SemanticResourceAttributes.TELEMETRY_SDK_LANGUAGE] = "webjs", r[t.SemanticResourceAttributes.TELEMETRY_SDK_VERSION] = t.VERSION, r), o.empty = function () { return o.EMPTY }, o.createTelemetrySDKResource = function () { var e; return new o(((e = {})[t.SemanticResourceAttributes.TELEMETRY_SDK_LANGUAGE] = t.SDK_INFO[t.SemanticResourceAttributes.TELEMETRY_SDK_LANGUAGE], e[t.SemanticResourceAttributes.TELEMETRY_SDK_NAME] = t.SDK_INFO[t.SemanticResourceAttributes.TELEMETRY_SDK_NAME], e[t.SemanticResourceAttributes.TELEMETRY_SDK_VERSION] = t.SDK_INFO[t.SemanticResourceAttributes.TELEMETRY_SDK_VERSION], e)) }, o.prototype.merge = function (e) { return e && Object.keys(e.attributes).length ? new o(Object.assign({}, this.attributes, e.attributes)) : this }, o.EMPTY = new o({}); var r = o; function o(e) { this.attributes = e } t.Resource = r }, function (e, t, A) { "use strict"; var r = this && this.__values || function (e) { var t = "function" == typeof Symbol && Symbol.iterator, A = t && e[t], r = 0; if (A) return A.call(e); if (e && "number" == typeof e.length) return { "next": function next() { return { "value": (e = e && r >= e.length ? void 0 : e) && e[r++], "done": !e } } }; throw new TypeError(t ? "Object is not iterable." : "Symbol.iterator is not defined.") }, i = this && this.__read || function (e, t) { var A = "function" == typeof Symbol && e[Symbol.iterator]; if (!A) return e; var r, i, o = A.call(e), n = []; try { for (; (void 0 === t || 0 < t--) && !(r = o.next()).done;)n.push(r.value) } catch (e) { i = { "error": e } } finally { try { r && !r.done && (A = o.return) && A.call(o) } finally { if (i) throw i.error } } return n }, o = (Object.defineProperty(t, "__esModule", { "value": !0 }), t.Span = void 0, A(6)), n = A(1), s = A(2), a = A(7), c = A(17); function l(e, t, A, r, i, o, n, c) { void 0 === c && (c = []), this.attributes = {}, this.links = [], this.events = [], this.status = { "code": s.SpanStatusCode.UNSET }, this.endTime = 0, this._ended = !1, this._duration = 0, this.exported = !0, this.contextAPI = e.context, this.reporter = e.reporter, this.spanProcessor = e.spanProcessor, this.parentTracer = e, this.name = A, this.level = r, this.spanContext = i, this.parentSpanId = n, this.kind = o, this.links = c, this.startTime = Date.now(), this.resource = e.resource, this.instrumentationLibrary = e.instrumentationLibrary, this._traceParams = e.getActiveTraceParams(), this._idGenerator = new a.IdGenerator } l.prototype.context = function () { return this.spanContext }, l.prototype.setAttribute = function (e, t) { return null == t || 0 === e.length || !o.isAttributeValue(t) || Object.keys(this.attributes).length >= this._traceParams.numberOfAttributesPerSpan && !Object.prototype.hasOwnProperty.call(this.attributes, e) || (this.attributes[e] = t), this }, l.prototype.appendAttribute = function (e, t) { return null == t || 0 === e.length || !o.isAttributeValue(t) || Object.keys(this.attributes).length >= this._traceParams.numberOfAttributesPerSpan && !Object.prototype.hasOwnProperty.call(this.attributes, e) || (this.attributes[e] && Array.isArray(this.attributes[e]) ? this.attributes[e].push(t) : this.attributes[e] = [t]), this }, l.prototype.setAttributes = function (e) { var t, A; try { for (var o = r(Object.entries(e)), n = o.next(); !n.done; n = o.next()) { var s = i(n.value, 2), a = s[0], c = s[1]; this.setAttribute(a, c) } } catch (e) { t = { "error": e } } finally { try { n && !n.done && (A = o.return) && A.call(o) } finally { if (t) throw t.error } } return this }, l.prototype.addEvent = function (e, t, A) { this.events.length >= this._traceParams.numberOfEventsPerSpan && this.events.shift(); var r = this._idGenerator.generateEventId(); return c.isTimeInput(t) && (void 0 === A && (A = t), t = void 0), void 0 === A && (A = c.hrTime()), this.events.push({ "name": e, "attributes": t, "time": c.timeInputToHrTime(A), "event_id": r }), this }, l.prototype.setStatus = function (e) { return this.status = e, this }, l.prototype.updateName = function (e) { return this.name = e, this }, l.prototype.end = function (e) { var t, A = this; this._isSpanEnded() || (this._ended = !0, this.resource = this.parentTracer.resource, this.spanProcessor.spanBeforeEnd && this.spanProcessor.spanBeforeEnd(this), t = c.getCurrentTime(), this.setAttribute("e_time_s", t), this.endTime = Date.now(), this._duration = this.endTime - this.startTime, this.contextAPI.with(n.suppressInstrumentation(this.contextAPI.active()), function () { var t = A.toReporterSpan(A); A.spanProcessor.spanEnd && A.spanProcessor.spanEnd(t, A.level), t.droped || !1 === e || (delete t.droped, A.reporter.report(JSON.stringify(t), A.level)) })) }, l.prototype.spanReport = function () { var e = this.toReporterSpan(this); this.reporter.report(JSON.stringify(e), this.level) }, l.prototype.isRecording = function () { return !1 === this._ended }, Object.defineProperty(l.prototype, "duration", { "get": function get() { return this._duration }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(l.prototype, "ended", { "get": function get() { return this._ended }, "enumerable": !1, "configurable": !0 }), l.prototype._isSpanEnded = function () { return this._ended, this._ended }, l.prototype.toReporterSpan = function (e) { var t = [], A = (e.events.forEach(function (e) { var A = {}; Object.keys(e).forEach(function (t) { "name" === t && (A[t] = e[t]), "time" === t && (A.timestamp = c.hrTimeToMilliseconds(e[t])), "attributes" === t && (A.tags = e[t]) }), t.push(A) }), []); return e.links.forEach(function (e) { A.push({ "span_id": e.context.spanId, "trace_id": e.context.traceId }) }), { "trace_id": e.spanContext.traceId, "parent_span_id": e.parentSpanId, "name": e.name, "span_id": e.spanContext.spanId, "kind": e.kind, "start_time": e.startTime, "end_time": e.endTime, "duration": e.duration, "logs": t, "tags": e.attributes, "links": A } }, t.Span = l }, function (e, t, A) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.ZegoSpan = void 0; var r = A(3), o = A(9); function i(e, t) { this.spanId = e, this.span = t } i.prototype.setAttribute = function (e, t) { var A = this; return this.span ? this.span.setAttribute(e, t) : this._activeSpan().then(function () { A.span && A.span.setAttribute(e, t) }), this }, i.prototype.setAttributes = function (e) { var t = this; return this.span ? this.span.setAttributes(e) : this._activeSpan().then(function () { t.span && t.span.setAttributes(e) }), this }, i.prototype.appendAttribute = function (e, t) { var A = this; return this.span ? this.span.appendAttribute(e, t) : this._activeSpan().then(function () { A.span && A.span.appendAttribute(e, t) }), this }, i.prototype.addEvent = function (e, t, A) { var r = this; return this.span ? this.span.addEvent(e, t, A) : this._activeSpan().then(function () { r.span && r.span.addEvent(e, t, A) }), this }, i.prototype.setStatus = function (e) { var t = this; return this.span ? this.span.setStatus(e) : this._activeSpan().then(function () { t.span && t.span.setStatus(e) }), this }, i.prototype.updateName = function (e) { var t = this; return this.span ? this.span.updateName(e) : this._activeSpan().then(function () { t.span && t.span.updateName(e) }), this }, i.prototype.end = function (e) { var t = this; void 0 === e && (e = !0), this.span ? this.span.end(e) : this._activeSpan(!0).then(function () { t.span && t.span.end(e), t._spanEnd() }) }, i.prototype.setSpanActive = function (e) { this.activeCallback = e }, i.prototype.setSpanEnd = function (e) { this.endCallback = e }, i.prototype.spanReport = function () { var e; null != (e = this.span) && e.spanReport() }, i.prototype._spanEnd = function () { this._isSpanNoop() || (this.removeStoreItem(this.spanId), this.endCallback && this.endCallback(this.spanInfo)) }, i.prototype._isSpanNoop = function () { return "noop" === this.spanId }, i.prototype._activeSpan = function (e) { var t = this; return void 0 === e && (e = !1), new Promise(function (A, r) { t.store.getItem(t.spanId).then(function (r) { var n = new o.Span(i.tracer, i.tracer.context.active(), r.name, r.level, r.spanContext, r.kind, r.parentSpanId, r.links); n.setStatus(r.status), n.setAttributes(r.attributes), t.span = n, t.activeCallback && t.activeCallback(t.spanId, e), A() }).catch(function (e) { r(e) }) }) }, i.prototype.removeStoreItem = function (e) { var t = this; this.store.getItem(e).then(function (A) { A && t.store.removeItem(e).then(function () { r.log.log("remove suc") }).catch(function (e) { r.log.warn("remove fail") }) }) }, t.ZegoSpan = i }, function (e, t, A) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.createZegoStore = t.ZegoWechatMiniStore = t.ZEGO_ENV = void 0; var r, i, o = A(12), n = ((i = r = t.ZEGO_ENV || (t.ZEGO_ENV = {}))[i.BROWSER = 0] = "BROWSER", i[i.WEIXINMINI = 1] = "WEIXINMINI", A(3)), s = (c.prototype.getItem = function (e) { var t = this; return new Promise(function (A, r) { try { A(wx.getStorageSync(t.keyPrefix + e)) } catch (A) { r(A) } }) }, c.prototype.setItem = function (e, t) { var A = this; return new Promise(function (r, i) { try { wx.setStorageSync(A.keyPrefix + e, t), r() } catch (r) { i(r) } }) }, c.prototype.removeItem = function (e) { var t = this; return new Promise(function (A, r) { try { A(wx.removeStorageSync(t.keyPrefix + e)) } catch (A) { r(A) } }) }, c.prototype.clear = function () { return new Promise(function (e, t) { try { wx.clearStorageSync(), e() } catch (e) { t(e) } }) }, c.prototype.keys = function () { var e = this; return new Promise(function (t, A) { try { var r = wx.getStorageInfoSync().keys, i = (n.log.warn("keys", r), []); r.forEach(function (t) { 0 == t.indexOf(e.keyPrefix) && i.push(t.replace(e.keyPrefix, "")) }), n.log.warn("keyArr", JSON.stringify(i)), i.sort(), t(i) } catch (t) { A(t) } }) }, c); function c(e) { this.storeName = e, this.keyPrefix = e + "/", this.storeName } t.ZegoWechatMiniStore = s, t.createZegoStore = function (e, t, A) { return t === r.BROWSER ? o.createInstance({ "name": e + ":" + (A || "store") }) : new s(e) } }, function (e, t) { e.exports = i }, function (e, t, A) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.DynamicCode = t.ZegoTracer = t.ZegoSpan = void 0; var r = A(14), i = (Object.defineProperty(t, "ZegoTracer", { "enumerable": !0, "get": function get() { return r.ZegoTracer } }), A(46)), o = (Object.defineProperty(t, "DynamicCode", { "enumerable": !0, "get": function get() { return i.DynamicCode } }), A(10)); Object.defineProperty(t, "ZegoSpan", { "enumerable": !0, "get": function get() { return o.ZegoSpan } }) }, function (e, t, A) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.ZegoTracer = void 0; var r = A(15), i = A(21), o = A(10), n = A(22), s = A(3), a = A(1), c = A(8), g = A(23), u = A(39), l = A(11), h = A(44), d = A(45); function f() { this._maxTracingSpanSize = n.DEFAULT_MAX_SPAN_SIZE, this.level = 0, this.log = new h.ZegoLog, this.stateCenter = new d.StateCenter(this.log) } f.prototype.init = function (e) { this.options = e, this.name = e.product, this.reporter = new g.ZegoDataReport(this.name, this.stateCenter), this.reporter.init({ "appID": e.appID, "env": e.env || 0, "importantLevel": e.importantLevel, "levels": e.levels, "deviceID": e.deviceID, "bps": e.bps, "serverUrl": e.serverUrl }), this.tracer = new r.Tracer({ "name": this.name, "version": e.version }, { "resource": new c.Resource(e.resources) }, this.reporter, { "spanStart": e.spanStart, "spanBeforeEnd": e.spanBeforeEnd, "spanEnd": e.spanEnd }), this.reporter.setProcessData(this.tracer.resource.attributes), this.initRoot(this.options), this.dyStore = l.createZegoStore(e.product + "_" + e.appID + "_dy", e.env || 0) }, f.prototype.initRoot = function (e) { this.rootSpan = this.tracer.startSpan("root", 0); var t = a.setSpan(this.tracer.context.active(), this.rootSpan); this.tracer.context._getContextManager()._currentContext = t, this.rootSpan.end() }, f.prototype.createSpan = function (e, t, A) { var r, c; return e <= this.level ? (r = A && A.parent ? a.setSpan(this.tracer.context.active(), A.parent.span) : a.setSpan(this.tracer.context.active(), this.rootSpan), c = [], A && A.linkSpans && (A.linkSpans.forEach(function (e) { c.push({ "context": e.span.context() }) }), delete A.linkSpans), t = this.tracer.startSpan(t, e, Object.assign({}, A, { "links": c }), r), e = new o.ZegoSpan(t.spanContext.spanId, t), o.ZegoSpan.tracer = this.tracer, e) : (s.log.warn("createSpan level not fix"), new o.ZegoSpan(n.NOOP_SPAN_ID, new i.NoopSpan)) }, f.prototype.setLogger = function (e) { this.stateCenter.logger = e }, f.prototype.setTimeOffset = function (e) { this.reporter.setTimeOffset(e) }, f.prototype.setWaitNtpTimeout = function (e) { this.reporter.setWaitNtpTimeout(e) }, f.prototype.setLogLevel = function (e) { return this.stateCenter._log.setLogLevel(e) }, f.prototype.startReport = function (e) { return this.reporter.startReport(e) }, f.prototype.setConfig = function (e) { this.reporter.setConfig(e) }, f.prototype.loadJs = function (e, t, A, r, i, o) { return u.loadJS(e, this.dyStore, t, A, r, i, o) }, f.prototype.flush = function (e) { this.reporter.flush(e) }, f.prototype.setUnloadState = function (e) { this.reporter.setUnloadState(e) }, f.prototype.shutdown = function () { this.reporter.saveDataBeforeUnload() }, f.prototype.destroy = function () { this.reporter.uninit() }, f.prototype.setSampleConfig = function (e) { this.level = e.level || this.level }, f.prototype.setResource = function (e) { this.tracer.setResource(e), this.reporter.setProcessData(this.tracer.resource.attributes) }, f.prototype.setNetStateCheck = function () { this.reporter.setNetStateCheck() }, t.ZegoTracer = f }, function (e, t, A) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.Tracer = void 0; var r = A(6), i = A(1), o = A(2), n = A(7), s = A(8), a = A(9), c = A(18), g = A(19); function h(e, t, A, r) { var o = g.mergeConfig(t); this._traceParams = o.traceParams, this._idGenerator = new n.IdGenerator, this.resource = null != (o = t.resource) ? o : s.Resource.createTelemetrySDKResource(), this.instrumentationLibrary = e, t = Math.random().toString(36).slice(-6), this.context = new i.ContextAPI(t), this.reporter = A, this.spanProcessor = r || {} } h.prototype.startSpan = function (e, t, A, n) { var s, g, u, l = function (e, t) { if (!e.root) return i.getSpanContext(t) }(A = void 0 === A ? {} : A, n = void 0 === n ? this.context.active() : n), h = this._idGenerator.generateSpanId(), d = (l && c.isSpanContextValid(l) ? (s = l.traceId, g = l.traceState, u = l.spanId) : s = this._idGenerator.generateTraceId(), l = null != (l = A.kind) ? l : o.SpanKind.INTERNAL, null != (d = A.links) ? d : []), C = (A = r.sanitizeAttributes(A.attributes), o.TraceFlags.NONE); return (n = new a.Span(this, n, e, t, { "traceId": s, "spanId": h, "traceFlags": C, "traceState": g }, l, u, d)).setAttributes(A), this.spanProcessor.spanStart && this.spanProcessor.spanStart(n), n }, h.prototype.setResource = function (e) { this.resource = this.resource.merge(new s.Resource(e)) }, h.prototype.getActiveTraceParams = function () { return this._traceParams }, t.Tracer = h }, function (e, t, A) { "use strict"; var r = this && this.__read || function (e, t) { var A = "function" == typeof Symbol && e[Symbol.iterator]; if (!A) return e; var r, i, o = A.call(e), n = []; try { for (; (void 0 === t || 0 < t--) && !(r = o.next()).done;)n.push(r.value) } catch (e) { i = { "error": e } } finally { try { r && !r.done && (A = o.return) && A.call(o) } finally { if (i) throw i.error } } return n }, i = this && this.__spread || function () { for (var e = [], t = 0; t < arguments.length; t++)e = e.concat(r(arguments[t])); return e }, o = (Object.defineProperty(t, "__esModule", { "value": !0 }), t.StackContextManager = void 0, A(1)); function s() { this._enabled = !1, this._currentContext = o.ROOT_CONTEXT } s.prototype._bindFunction = function (e, t) { function n() { for (var r = this, i = [], o = 0; o < arguments.length; o++)i[o] = arguments[o]; return A.with(t, function () { return e.apply(r, i) }) } void 0 === t && (t = o.ROOT_CONTEXT); var A = this; return Object.defineProperty(n, "length", { "enumerable": !1, "configurable": !0, "writable": !1, "value": e.length }), n }, s.prototype.active = function () { return this._currentContext }, s.prototype.bind = function (e, t) { return void 0 === (t = void 0 === t ? o.ROOT_CONTEXT : t) && (t = this.active()), "function" == typeof e ? this._bindFunction(e, t) : e }, s.prototype.disable = function () { return this._currentContext = o.ROOT_CONTEXT, this._enabled = !1, this }, s.prototype.enable = function () { return this._enabled || (this._enabled = !0, this._currentContext = o.ROOT_CONTEXT), this }, s.prototype.with = function (e, t, A) { for (var r = [], n = 3; n < arguments.length; n++)r[n - 3] = arguments[n]; var s = this._currentContext; this._currentContext = e || o.ROOT_CONTEXT; try { return t.call.apply(t, i([A], r)) } finally { this._currentContext = s } }, t.StackContextManager = s }, function (e, t, A) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.getCurrentTime = t.isTimeInput = t.hrTimeToMilliseconds = t.hrTimeDuration = t.timeInputToHrTime = t.isTimeInputHrTime = t.hrTime = void 0; var r = Math.pow(10, 9), o = ["00", "01", "02", "03", "04", "05", "06", "07", "08", "09"]; function i(e) { e /= 1e3; var t = Math.trunc(e); return [t, Number((e - t).toFixed(9)) * r] } function s() { var e, t = performance.timeOrigin; return "number" != typeof t ? (e = performance).timing && e.timing.fetchStart : t } function a(e) { var t = i(s()), A = (e = i("number" == typeof e ? e : performance.now()), t[0] + e[0]); return t = t[1] + e[1], r < t && (t -= r, A += 1), [A, t] } function c(e) { return Array.isArray(e) && 2 === e.length && "number" == typeof e[0] && "number" == typeof e[1] } t.hrTime = a, t.isTimeInputHrTime = c, t.timeInputToHrTime = function (e) { if (c(e)) return e; if ("number" == typeof e) return (e < s() ? a : i)(e); if (e instanceof Date) return i(e.getTime()); throw TypeError("Invalid input type") }, t.hrTimeDuration = function (e, t) { var A = t[0] - e[0]; return (t = t[1] - e[1]) < 0 && (--A, t += r), [A, t] }, t.hrTimeToMilliseconds = function (e) { return Math.round(1e3 * e[0] + e[1] / 1e6) }, t.isTimeInput = function (e) { return c(e) || "number" == typeof e || e instanceof Date }, t.getCurrentTime = function () { var e = new Date; return [e.getFullYear() + "/", (o[e.getMonth() + 1] || e.getMonth() + 1) + "/", (o[e.getDate()] || e.getDate()) + " ", (o[e.getHours()] || e.getHours()) + ":", (o[e.getMinutes()] || e.getMinutes()) + ":", o[e.getSeconds()] || e.getSeconds(), "." + e.getTime() % 1e3].join("") } }, function (e, t, A) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.isSpanContextValid = t.isValidSpanId = t.isValidTraceId = t.INVALID_SPAN_CONTEXT = t.INVALID_TRACEID = t.INVALID_SPANID = void 0, A = A(2); var r = /^([0-9a-f]{32})$/i, o = /^[0-9a-f]{16}$/i; function i(e) { return r.test(e) && e !== t.INVALID_TRACEID } function s(e) { return o.test(e) && e !== t.INVALID_SPANID } t.INVALID_SPANID = "0000000000000000", t.INVALID_TRACEID = "00000000000000000000000000000000", t.INVALID_SPAN_CONTEXT = { "traceId": t.INVALID_TRACEID, "spanId": t.INVALID_SPANID, "traceFlags": A.TraceFlags.NONE }, t.isValidTraceId = i, t.isValidSpanId = s, t.isSpanContextValid = function (e) { return i(e.traceId) && s(e.spanId) } }, function (e, t, A) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.mergeConfig = void 0; var r = A(20); t.mergeConfig = function (e) { var t = Object.assign({}, r.DEFAULT_CONFIG, e); return t.traceParams = Object.assign({}, r.DEFAULT_CONFIG.traceParams, e.traceParams || {}), t } }, function (e, t, A) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.DEFAULT_CONFIG = void 0, t.DEFAULT_CONFIG = { "traceParams": { "numberOfAttributesPerSpan": 128, "numberOfLinksPerSpan": 128, "numberOfEventsPerSpan": 128 } } }, function (e, t, A) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.NoopSpan = void 0; var r = A(2); function o(e) { void 0 === e && (e = r.INVALID_SPAN_CONTEXT), this._spanContext = e } o.prototype.context = function () { return this._spanContext }, o.prototype.setAttribute = function (e, t) { return this }, o.prototype.appendAttribute = function (e, t) { return this }, o.prototype.setAttributes = function (e) { return this }, o.prototype.addEvent = function (e, t, A) { return this }, o.prototype.setStatus = function (e) { return this }, o.prototype.updateName = function (e) { return this }, o.prototype.end = function (e) { }, o.prototype.isRecording = function () { return !1 }, o.prototype.spanReport = function () { }, o.prototype.recordException = function (e, t) { }, t.NoopSpan = o }, function (e, t, A) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.NOOP_SPAN_ID = t.SCHEDULED_DELAY_MILLIS = t.DEFAULT_MAX_SPAN_SIZE = t.readSpanKeys = void 0, t.readSpanKeys = ["name", "level", "kind", "spanContext", "parentSpanId", "startTime", "endTime", "status", "attributes", "links", "events", "duration", "ended", "resource", "instrumentationLibrary"], t.DEFAULT_MAX_SPAN_SIZE = 1e3, t.SCHEDULED_DELAY_MILLIS = 3e3, t.NOOP_SPAN_ID = "noop" }, function (e, t, A) { "use strict"; var i = this && this.__assign || function () { return (i = Object.assign || function (e) { for (var t, A = 1, r = arguments.length; A < r; A++)for (var i in t = arguments[A]) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]); return e }).apply(this, arguments) }, o = this && this.__awaiter || function (e, t, A, r) { return new (A = A || Promise)(function (i, o) { function s(e) { try { c(r.next(e)) } catch (e) { o(e) } } function a(e) { try { c(r.throw(e)) } catch (e) { o(e) } } function c(e) { var t; e.done ? i(e.value) : ((t = e.value) instanceof A ? t : new A(function (e) { e(t) })).then(s, a) } c((r = r.apply(e, t || [])).next()) }) }, n = this && this.__generator || function (e, t) { var A, r, i, o = { "label": 0, "sent": function sent() { if (1 & i[0]) throw i[1]; return i[1] }, "trys": [], "ops": [] }, n = { "next": a(0), "throw": a(1), "return": a(2) }; return "function" == typeof Symbol && (n[Symbol.iterator] = function () { return this }), n; function a(n) { return function (s) { var a = [n, s]; if (A) throw new TypeError("Generator is already executing."); for (; o;)try { if (A = 1, r && (i = 2 & a[0] ? r.return : a[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, a[1])).done) return i; switch (r = 0, (a = i ? [2 & a[0], i.value] : a)[0]) { case 0: case 1: i = a; break; case 4: return o.label++, { "value": a[1], "done": !1 }; case 5: o.label++, r = a[1], a = [0]; continue; case 7: a = o.ops.pop(), o.trys.pop(); continue; default: if (!(i = 0 < (i = o.trys).length && i[i.length - 1]) && (6 === a[0] || 2 === a[0])) { o = 0; continue } if (3 === a[0] && (!i || a[1] > i[0] && a[1] < i[3])) o.label = a[1]; else if (6 === a[0] && o.label < i[1]) o.label = i[1], i = a; else { if (!(i && o.label < i[2])) { i[2] && o.ops.pop(), o.trys.pop(); continue } o.label = i[2], o.ops.push(a) } }a = t.call(e, o) } catch (s) { a = [6, s], r = 0 } finally { A = i = 0 } if (5 & a[0]) throw a[1]; return { "value": a[0] ? a[1] : void 0, "done": !0 } } } }, s = this && this.__read || function (e, t) { var A = "function" == typeof Symbol && e[Symbol.iterator]; if (!A) return e; var r, i, o = A.call(e), n = []; try { for (; (void 0 === t || 0 < t--) && !(r = o.next()).done;)n.push(r.value) } catch (e) { i = { "error": e } } finally { try { r && !r.done && (A = o.return) && A.call(o) } finally { if (i) throw i.error } } return n }, a = this && this.__spread || function () { for (var e = [], t = 0; t < arguments.length; t++)e = e.concat(s(arguments[t])); return e }, c = this && this.__values || function (e) { var t = "function" == typeof Symbol && Symbol.iterator, A = t && e[t], r = 0; if (A) return A.call(e); if (e && "number" == typeof e.length) return { "next": function next() { return { "value": (e = e && r >= e.length ? void 0 : e) && e[r++], "done": !e } } }; throw new TypeError(t ? "Object is not iterable." : "Symbol.iterator is not defined.") }, g = (Object.defineProperty(t, "__esModule", { "value": !0 }), t.ZegoDataReport = void 0, A(0)), l = A(24), h = A(30), d = A(38), C = A(5), I = A(4); function f(e, t) { this.stateCenter = t, this.QUEUE_MAX = 100, this.cacheMaxSize = I.CACHE_SIZE.cacheMaxSize, this.cacheDelPer = I.CACHE_SIZE.cacheDelPer, this.state = "normal", this.forceDataTotalLen = 0, this.reportPackagesSize = 0, this.staticConfig = { "totalAvailCache": I.CACHE_SIZE.totalAvailCache, "totalDBSize": I.STORE_SIZE.totalDBSize, "bps": 1600 }, this.dataInDb = [], this.listenerList = { "progressUpdate": [], "forceResult": [], "postFail": [], "dataDroped": [] }, this.tempBuffer = [], this.traceType = { "MEM_I_API": 0, "MEM_O_DONE": 0, "MEM_O_DUMP": 0, "MEM_I_LOAD": 0, "DB_O_DROP": 0, "DB_O_DONE": 0, "DB_I_BACKUP": 0 }, this.isPaused = !1, this.pro = "json", this.isLoadReportData = !1, this.dropCount = 0, this.timeInterval = !1, this.isWaitNtpTimeout = !1, this.waitNtpTimeout = 2e3, this.postDataState = "", this.product = e, this.reportMap = new Map } f.prototype.init = function (e) { return o(this, void 0, void 0, function () { var t = this; return n(this, function (A) { switch (A.label) { case 0: return this.config = i(i({}, I.DEFAULT_CONFIG), e), this.config.env % 2 != 1 && this.bindWindowListener(), this.zegoService = new l.ZegoService(this.config.env || g.ZEGO_ENV.BROWSER, this.config.bps || I.DEFAULT_CONFIG.bps, this.product, this.pro, this.stateCenter), this.zegoService.setLogUrlParams({ "product": this.product, "signature": this.config.token || "", "appid": this.config.appID, "id_name": this.config.userID || "", "deviceid": this.config.deviceID || "" }), this.config.serverUrl && this.zegoService.setLogServer(this.config.serverUrl), this.zegoService.setPostSucCallback(this.product, this.postSucHandler.bind(this)), this.zegoService.setPostFailCallback(this.product, function (e) { return o(t, void 0, void 0, function () { return n(this, function (t) { switch (t.label) { case 0: return this.stateCenter.logger.warn("zt.zd.i fail"), this.postDataState = "fail", this.dropCount++, this.storePackagesDataToDB(e), [4, this.storePendingDataToDB(1)]; case 1: return t.sent(), this._actionListener("postFail"), [2] } }) }) }), this.initPendingQueue(), this.storeHandler = new h.ZegoStoreHandler(this.product + "_" + this.config.appID + "_datareporter", C.uuid(6), this.config, this.traceType, this.staticConfig, this.stateCenter), this.storeHandler.setDropCallBack(function (e) { t.traceType.DB_O_DROP += C.calculateMemSize(e), t._actionListener("dataDroped", e) }), [4, this.storeHandler.loadPendingData()]; case 1: return A.sent(), this.storeHandler.init().then(function () { t.loadReportData() }).catch(function (e) { console.warn(e) }), this.startReportTimer(), this.setWaitNtpTimer(), this.checkCacheDataTimer(), [2] } }) }) }, f.prototype.uninit = function () { this.isWaitNtpTimeout = !1, this.ntpTimer && (clearTimeout(this.ntpTimer), this.ntpTimer = null), this.zegoService.destroy() }, f.prototype.setConfig = function (e) { "object" == (void 0 === e ? "undefined" : u(e)) && "number" == typeof e.bps && (this.config.bps = e.bps, this.zegoService.setBps(this.config.bps)), "object" == (void 0 === e ? "undefined" : u(e)) && "number" == typeof e.totalDBSize && (this.staticConfig.totalDBSize = e.totalDBSize), "object" == (void 0 === e ? "undefined" : u(e)) && "string" == typeof e.serverUrl && "" !== e.serverUrl && (this.config.serverUrl = e.serverUrl, this.zegoService.setLogServer(this.config.serverUrl)) }, f.prototype.pause = function () { this.isPaused = !0 }, f.prototype.resume = function () { this.isPaused = !1; var e = (t = this.pendingQueue.getPendingDataInfo()).pendingDataSize, t = t.size; this.checkPendingQueue(e, t) }, f.prototype.startReport = function (e) { var t = e.get("userID"), A = e.get("token"); return !(!t || "string" != typeof t || !A || "string" != typeof A || (this.startCommonField = e, this.config.userID = t, this.config.token = A, this.zegoService.setLogUrlParams({ "product": this.product, "signature": this.config.token, "appid": this.config.appID, "id_name": this.config.userID || "", "deviceid": this.config.deviceID || "" }), this.isWithNtp() && this.bufferDump(), (t = e.get("serverUrl")) && (this.config.serverUrl = t, this.zegoService.setLogServer(this.config.serverUrl)), this.isConfigOK(this.config) && (e = (A = this.pendingQueue.getPendingDataInfo()).pendingDataSize, t = A.size, this.checkPendingQueue(e, t)), 0)) }, f.prototype.setTimeOffset = function (e) { var t = this; this.clientTimeOffset = e, this.tempBuffer.forEach(function (e) { (e = e.data).tags.time_offset || (e.tags.time_offset = t.clientTimeOffset) }), this.config.userID && this.bufferDump() }, f.prototype.setProcessData = function (e) { this.stateCenter.processData = e }, f.prototype.on = function (e, t) { return this._bindListener(e, t) }, f.prototype.off = function (e, t) { return this._deleteListener(e, t) }, f.prototype.report = function (e, t) { var A; if (15e3 < e.length) return !1; try { A = JSON.parse(e) } catch (e) { return !1 } return this.stateCenter._log.debug(e + " " + t), (null != A && A.id_name || null != (e = null == A ? void 0 : A.tags) && e.id_name || this.config.userID) && this.isWithNtp() ? (null != A && A.id_name || null != (e = null == A ? void 0 : A.tags) && e.id_name ? this.clientTimeOffset && (A.tags.time_offset = this.clientTimeOffset) : (this.clientTimeOffset && (A.tags.time_offset = this.clientTimeOffset), A.tags.id_name = this.config.userID), this.dumpData(JSON.stringify(A), t)) : this.tempBuffer.push({ "data": A, "level": t }), !0 }, f.prototype.setUnloadState = function (e) { this.unloadLevel = e, this.state = "unload" }, f.prototype.dumpData = function (e, t) { var A = this, r = C.calculateMemSize(e), i = (this.traceType.MEM_I_API += r, g.getSeq()), o = (new Date).getTime(), n = { "seq": i, "content": e, "level": t, "timestamp": o }; "unload" === this.state ? void 0 !== this.unloadLevel && t <= this.unloadLevel ? (this.storeHandler.saveDataToStorage(n), this.pendingQueue.enqueue(n, t)) : this.stateCenter._log.debug("level is low") : t <= this.config.importantLevel ? (n.key = t + "_" + o + "_" + i, this.dataInDb.push(n.key), this.storeHandler.storeData(n).then(function (e) { A.pendingQueue.enqueue(n, t), A.traceType.DB_I_BACKUP += r }).catch(function (e) { var r = A.dataInDb.findIndex(function (e) { return e === n.key }); -1 < r && A.dataInDb.splice(r, 1), A.pendingQueue.enqueue(n, t) })) : this.pendingQueue.enqueue(n, t), "force" === this.state && (o = C.calculateMemSize(e), this.forceDataTotalLen += o) }, f.prototype.isWithNtp = function () { return this.isWaitNtpTimeout || void 0 !== this.clientTimeOffset }, f.prototype.bufferDump = function () { var e, t = this.tempBuffer.shift(); t && (e = t.data, t = t.level, e.tags.id_name = this.config.userID, this.dumpData(JSON.stringify(e), t), this.bufferDump()) }, f.prototype.isConfigOK = function (e) { return "" !== e.userID && "" !== e.token && "" !== e.server }, f.prototype.testSize = function (e) { }, f.prototype.flush = function (e) { var t; "force" !== this.state && (this.state = "force", t = 16e6, "object" == (void 0 === e ? "undefined" : u(e)) && "number" == typeof e.bps && (t = e.bps), this.zegoService.setBps(t), this.forceDataTotalLen = this.storeHandler.storeSize + this.pendingQueue.pendingDataSize + this.reportPackagesSize, t = (e = this.pendingQueue.getPendingDataInfo()).pendingDataSize, e = e.size, 0 < t ? this.checkPendingQueue(t, e) : this.loadReportData()) }, f.prototype.setWaitNtpTimeout = function (e) { this.waitNtpTimeout = e }, f.prototype.setWaitNtpTimer = function () { var e = this; this.ntpTimer = setTimeout(function () { e.isWaitNtpTimeout = !0, e.config.userID && e.bufferDump() }, this.waitNtpTimeout) }, f.prototype.startReportTimer = function () { var e = this, t = (this.stateCenter._log.debug("startReportTimer " + new Date), this.timeInterval = !0, (A = this.pendingQueue.getPendingDataInfo()).pendingDataSize), A = A.size; this.checkPendingQueue(t, A), this.reportTimer = window.setTimeout(function () { e.startReportTimer() }, 3e4) }, f.prototype.checkCacheDataTimer = function () { return o(this, void 0, void 0, function () { var e, t, A = this; return n(this, function (r) { switch (r.label) { case 0: return t = this.pendingQueue.getPendingDataInfo(), e = t.pendingDataSize, t = t.size, e > this.config.reportSize || t > this.config.reportNum ? [4, this.checkPendingQueue(e, t)] : [3, 2]; case 1: return r.sent(), [3, 3]; case 2: this.loadReportData(), r.label = 3; case 3: return this.checkDataTimer = window.setTimeout(function () { A.checkCacheDataTimer() }, 15e3), [2] } }) }) }, f.prototype.bindWindowListener = function () { var e = this, t = navigator.userAgent.match(/iPad/i) || navigator.userAgent.match(/iPhone/i); navigator.userAgent.indexOf("Firefox"), window.addEventListener(t ? "pagehide" : "beforeunload", function () { window.event && (window.event.cancelBubble = !0), e.saveDataBeforeUnload() }) }, f.prototype.saveDataBeforeUnload = function () { (e = this.pendingQueue.readStoreData(1)).totalLen; var e = e.storeArr, t = (this.storeHandler.resetCommonStore(), []); t.push.apply(t, a(e)), e = this.zegoService.readReportQueueData(), t.push.apply(t, a(e)), 0 < t.length && this.storeHandler.storePendingData(t) }, f.prototype.setNetStateCheck = function () { "fail" === this.postDataState && this.zegoService.handleNetConnect() }, f.prototype.postSucHandler = function (e, t, A) { return o(this, void 0, void 0, function () { var A, r, i, o, s, a = this; return n(this, function (n) { switch (n.label) { case 0: for (this.stateCenter._log.debug("post suc"), this.postDataState = "suc", e.forEach(function (e) { a.traceType.MEM_O_DONE += C.calculateMemSize(e.content) }), A = function n(t) { var n = e[t]; r.storeHandler.removeDataItem(n).then(function (e) { n.key && a.reportMap.delete(n.key) }).catch(function (e) { }) }, r = this, i = 0; i < e.length; i++)A(i); return this.reportPackagesSize -= t, s = this.pendingQueue.getPendingDataInfo(), o = s.pendingDataSize, s = s.size, o > this.config.reportSize || s > this.config.reportNum ? [4, this.checkPendingQueue(o, s)] : [3, 2]; case 1: return n.sent(), [3, 3]; case 2: this.loadReportData(), n.label = 3; case 3: return "force" === this.state && 0 == this.reportPackagesSize && (o = this.reportPackagesSize + this.pendingQueue.pendingDataSize + this.storeHandler.storeSize, s = 1 - Number((o / this.forceDataTotalLen).toFixed(2)), this.listenerList.progressUpdate && this._actionListener("progressUpdate", s), 0 < this.storeHandler.storeSize && this.loadReportData(function (e) { 0 === e && (a.state = "normal", a.zegoService.setBps(a.config.bps || I.DEFAULT_CONFIG.bps), a.listenerList.forceSuccessCallback && a._actionListener("forceResult", "SUCCESS")) })), [2] } }) }) }, f.prototype.checkPendingQueue = function (e, t) { return o(this, void 0, void 0, function () { var A, r, i, o, s; return n(this, function (n) { switch (n.label) { case 0: return e > this.config.reportSize || t > this.config.reportNum || ["force", "unload"].includes(this.state) || this.timeInterval ? (this.timeInterval = !1, !this.isPaused && this.config.userID && this.config.token && this.config.serverUrl ? [3, 3] : (this.stateCenter._log.debug("isPaused " + this.isPaused + " " + this.userID + " " + this.config.token + " " + this.config.serverUrl), e >= this.cacheMaxSize || this.staticConfig.totalAvailCache <= 0 ? [4, this.storePendingDataToDB(this.cacheDelPer)] : [3, 2])) : [3, 7]; case 1: n.sent(), n.label = 2; case 2: return [2]; case 3: return this.zegoService.reportAllowed() ? [3, 6] : (this.zegoService.resumeReport(), e >= this.cacheMaxSize || this.staticConfig.totalAvailCache <= 0 ? [4, this.storePendingDataToDB(this.cacheDelPer)] : [3, 5]); case 4: n.sent(), n.label = 5; case 5: return [2]; case 6: if (i = this.pendingQueue.readReportData(this.config.reportSize), A = i.totalLen, i = i.reportDataArr, A <= 0) return [2]; for (i = this.setCommonField(i), r = i.packageArr, i = i.packageLen, this.zegoService.report(r, i, this.product, "unload" === this.state), o = 0; o < r.length; o++)s = r[o], this.reportMap.set(s.key, s); this.reportPackagesSize += i, this.pendingQueue.refresh(A), n.label = 7; case 7: return [2] } }) }) }, f.prototype.initPendingQueue = function () { var e = this; this.pendingQueue = new d.PendingQueue(this.config.levels, this.product, this.staticConfig, this.stateCenter), this.pendingQueue.setListener({ "enCallback": function enCallback(t, A, r) { return o(e, void 0, void 0, function () { return n(this, function (e) { switch (e.label) { case 0: return [4, this.checkPendingQueue(r, A)]; case 1: return e.sent(), [2] } }) }) } }) }, f.prototype.loadDBDataToMem = function () { var e = this; this.storeHandler.readStoreDataItem().then(function (t) { var A = C.calculateMemSize(t.content); e.traceType.MEM_I_LOAD += A, e.pendingQueue.enqueue(t, t.level) }).catch(function (e) { }) }, f.prototype.storePendingDataToDB = function (e) { return o(this, void 0, void 0, function () { var t, A, i, o, s, a, g, u, l; return n(this, function (r) { switch (r.label) { case 0: A = this.pendingQueue.readStoreData(e), t = A.totalLen, A = A.storeArr, i = function r(e) { var A, r; return n(this, function (i) { switch (i.label) { case 0: return i.trys.push([0, 2, , 3]), [4, o.storeDataItem(e, t)]; case 1: return i.sent(), A = e.level + "_" + e.timestamp + "_" + e.seq, -1 < (r = o.dataInDb.findIndex(function (e) { return e === A })) && o.dataInDb.splice(r, 1), [3, 3]; case 2: return i.sent(), [3, 3]; case 3: return [2] } }) }, o = this, r.label = 1; case 1: r.trys.push([1, 6, 7, 8]), s = c(A), a = s.next(), r.label = 2; case 2: return a.done ? [3, 5] : (g = a.value, [5, i(g)]); case 3: r.sent(), r.label = 4; case 4: return a = s.next(), [3, 2]; case 5: return [3, 8]; case 6: return g = r.sent(), u = { "error": g }, [3, 8]; case 7: try { a && !a.done && (l = s.return) && l.call(s) } finally { if (u) throw u.error } return [7]; case 8: return [2] } }) }) }, f.prototype.storePackagesDataToDB = function (e) { var t = this; e.length && e.forEach(function (e) { t.storeHandler.storeData(e).then(function (A) { var r = C.calculateMemSize(e.content); t.traceType.MEM_O_DUMP += r }).catch(function (e) { }) }) }, f.prototype.storeDataItem = function (e, t) { var A = this; return new Promise(function (t, r) { return o(A, void 0, void 0, function () { var A; return n(this, function (i) { switch (i.label) { case 0: return i.trys.push([0, 2, , 3]), [4, this.storeHandler.storeData(e)]; case 1: return i.sent(), A = C.calculateMemSize(e.content), this.traceType.MEM_O_DUMP += A, t(), [3, 3]; case 2: return A = i.sent(), r(A), [3, 3]; case 3: return [2] } }) }) }) }, f.prototype.loadReportData = function (e) { var t = this; this.storeHandler.storeSize <= 0 || this.isLoadReportData || (this.isLoadReportData = !0, this.storeHandler.loadDBData(this.config.reportSize, 5, Math.floor(this.cacheMaxSize / 3), function (e) { return -1 < t.dataInDb.indexOf(e) }).then(function (A) { t.isLoadReportData = !1, A.datas.forEach(function (e) { var A; t.reportMap.has(e.key) || t.pendingQueue.findInQueue(e) || (A = C.calculateMemSize(e.content), t.traceType.MEM_I_LOAD += A, t.pendingQueue.enqueue(e, e.level), t.dataInDb.push(e.key)) }), e && e(A.len) }).catch(function (e) { t.isLoadReportData = !1 })) }, f.prototype.setCommonField = function (e) { var t = this, A = 0; return e.forEach(function (e) { var r, i, o = JSON.parse(e.content); if (t.startCommonField) try { for (var n = c(t.startCommonField), a = n.next(); !a.done; a = n.next()) { var g = s(a.value, 2), u = g[0], l = g[1]; "userID" !== u && "token" !== u && "serverUrl" !== u && (o[u] = l) } } catch (e) { r = { "error": e } } finally { try { a && !a.done && (i = n.return) && i.call(n) } finally { if (r) throw r.error } } A += C.calculateMemSize(o), e.content = JSON.stringify(o) }), { "packageArr": e, "packageLen": A } }, f.prototype._bindListener = function (e, t) { return !!this.listenerList[e] && "function" == typeof t && (-1 == this.listenerList[e].indexOf(t) && this.listenerList[e].push(t), !0) }, f.prototype._deleteListener = function (e, t) { var A; return !!this.listenerList[e] && (A = this.listenerList[e], t ? A.splice(A.indexOf(t), 1) : this.listenerList[e] = [], !0) }, f.prototype._actionListener = function (e) { for (var t = [], A = 1; A < arguments.length; A++)t[A - 1] = arguments[A]; this.listenerList[e] && this.listenerList[e].forEach(function (e) { try { e.apply(void 0, a(t)) } catch (e) { } }) }, t.ZegoDataReport = f }, function (e, t, A) { "use strict"; var r = this && this.__read || function (e, t) { var A = "function" == typeof Symbol && e[Symbol.iterator]; if (!A) return e; var r, i, o = A.call(e), n = []; try { for (; (void 0 === t || 0 < t--) && !(r = o.next()).done;)n.push(r.value) } catch (e) { i = { "error": e } } finally { try { r && !r.done && (A = o.return) && A.call(o) } finally { if (i) throw i.error } } return n }, i = this && this.__spread || function () { for (var e = [], t = 0; t < arguments.length; t++)e = e.concat(r(arguments[t])); return e }, o = (Object.defineProperty(t, "__esModule", { "value": !0 }), t.ZegoService = void 0, A(0)), n = A(25), s = A(29), a = A(4); function u(e, t, A, r, i) { var s, a, c, g = this; this.env = e, this.product = A, this.pro = r, this.stateCenter = i, this.isDestroy = !1, this.websocket = null, this.packageLen = 0, this.packagesDataSize = 0, this.PACKAGE_MAX_LEN = 5, this.msgID = 0, this.logUploadTimer = null, this.logUploadInterval = 1e4, this.logCacheSend = [], this.logCacheMax = 100, this.reportDataCheckInterval = 1e3, this.postSucCallbackList = {}, this.postFailCallbackList = {}, this.failCount = 0, this.failStartTime = 0, this.netWorkFail = !1, this.networkState = o.ENUM_NETWORK_STATE.online, this.state = o.ENUM_CONNECT_STATE.disconnected, this.wsFrequentShutdownCounter = (a = s = 0, c = function u() { a = s = 0 }, { "onOpen": function onOpen() { s = performance.now() }, "onClose": function onClose() { 0 < s && (performance.now() - s < 100 ? (a++, g.stateCenter.logger.info("zt.rzs.wfsc frequently shutdown.")) : c()) }, "isOutOfMaxTimes": function isOutOfMaxTimes() { return 10 <= a } }), this.bindWindowListener(), this.networkState = o.ENUM_NETWORK_STATE.online, this.service = new n.LogService(e, A, r, i), this.setBps(t), this.reportQueue = new o.Queue } u.prototype.destroy = function () { var e; null != (e = this.websocket) && e.close(), this.service.closeSocket(), this.logUploadTimer && clearTimeout(this.logUploadTimer), this.reportQueue.clear(), this.isDestroy = !0 }, u.prototype.bindWindowListener = function () { var e = this; window.addEventListener("offline", function () { e.networkState = o.ENUM_NETWORK_STATE.offline }), window.addEventListener("online", function (t) { e.handleNetConnect() }) }, u.prototype.handleNetConnect = function () { this.networkState = o.ENUM_NETWORK_STATE.online; var e = this.url; this.url = "", this.setLogServer(e), this.netWorkFail = !1 }, u.prototype.setLogServer = function (e) { try { return e.startsWith("wss:") || e.startsWith("ws:") ? (this.logType = o.ENUM_REMOTE_TYPE.WEBSOCKET, this.openWebSocketLogServer(e)) : e.startsWith("https:") || e.startsWith("http:") ? (this.logType = o.ENUM_REMOTE_TYPE.HTTPS, this.openHttpsLogServer(e)) : this.logType = o.ENUM_REMOTE_TYPE.DISABLE, !0 } catch (e) { return !1 } }, u.prototype.setLogUrlParams = function (e) { this.logParams = e }, u.prototype.openWebSocketLogServer = function (e) { var t = this; this.url != e && (this.url = e) && (this.stopWebSocketServer(), this.logParams.id_name && (this.wsFrequentShutdownCounter.isOutOfMaxTimes() ? (this.stateCenter.logger.warn("zt.rzs.owsls frequently shutdown too many times. cannot create socket anymore."), this.state = o.ENUM_CONNECT_STATE.disconnected) : (this.state = o.ENUM_CONNECT_STATE.connecting, e = e + "?product=" + this.logParams.product + "&appid=" + this.logParams.appid + "&token=" + encodeURIComponent(this.logParams.signature) + "&deviceid=" + this.logParams.deviceid + "&id_name=" + this.logParams.id_name, this.service.createSocket(e), this.service.openHandler(function () { t.service.onPush(), t.service.startCheck(), t.stateCenter.logger.info("zt.rzs.owsls socket open"), t.openHandler(), t.wsFrequentShutdownCounter.onOpen() }), this.service.closeHandler(function (e) { t.stateCenter.logger.warn("zt.rzs.owsls socket close " + JSON.stringify(e.code || e)), t.state = o.ENUM_CONNECT_STATE.disconnected, t.service.closeSocket(), t.wsFrequentShutdownCounter.onClose() }), this.service.errorHandler(function (e) { t.stateCenter.logger.warn("zt.rzs.owsls socket error " + JSON.stringify(e.code || e)), t.state = o.ENUM_CONNECT_STATE.disconnected, t.service.closeSocket() })))) }, u.prototype.stopWebSocketServer = function () { this.service.closeSocket() }, u.prototype.openHttpsLogServer = function (e) { (this.url = e) && this.stopHttpsServer() }, u.prototype.stopHttpsServer = function () { this.logUploadTimer && (clearInterval(this.logUploadTimer), this.logUploadTimer = null) }, u.prototype.SendHttpsLog = function (e, t, A, r) { this.env === o.ZEGO_ENV.BROWSER ? this.SendHttpsLogWeb(e, t, A, r) : this.SendHttpsLogWeChatMini(e, t, A, r) }, u.prototype.SendHttpsLogWeb = function (e, t, A, r) { var i = this, o = (e = JSON.stringify({ "body": { "data": e } }), new XMLHttpRequest); o.onreadystatechange = function () { if (4 == o.readyState) if (200 == o.status) { if (0 != o.responseText.length) try { var e = JSON.parse(o.responseText).interval; "number" == typeof e && i.logUploadInterval !== e && i.openHttpsLogServer(i.url), A && A() } catch (e) { r && r() } } else r && r() }, o.open("POST", this.url, !0), o.send(e) }, u.prototype.SendHttpsLogWeChatMini = function (e, t, A, r) { var i = this; e = { "appid": this.logParams.appid + "", "timestamp": (new Date).getTime() + "", "token": this.logParams.signature, "id_name": this.logParams.id_name, "product": this.logParams.product, "message_id": ++this.msgID, "req_sdk": 1, "s": JSON.stringify({ "speed_detail": e }) }, wx.request({ "url": this.url, "data": JSON.stringify(e), "method": "POST", "success": function success(e) { 0 != e.data.length && ("number" == typeof (e = e && e.data && e.data.interval) && i.logUploadInterval !== e && i.openHttpsLogServer(i.url), A && A()) }, "fail": function fail(e) { r && r() } }) }, u.prototype.openHandler = function () { this.state = o.ENUM_CONNECT_STATE.connected, this.startReport() }, u.prototype.setPostSucCallback = function (e, t) { this.postSucCallbackList[e] = t }, u.prototype.setPostFailCallback = function (e, t) { this.postFailCallbackList[e] = t }, u.prototype.reportAllowed = function () { return this.packageLen < this.PACKAGE_MAX_LEN }, u.prototype.report = function (e, t, A, r) { this.packageLen++, this.packagesDataSize += t, this.reportQueue.enqueue({ "reportDatas": e, "dataLen": t, "product": A }), this.netWorkFail = !1, this.failCount = 0, this.failStartTime = 0, this.startReport(r) }, u.prototype.setBps = function (e) { this.tokenBucket = new s.TokenBucket(a.BUCKET_CONFIG.bucketSize, e / 8, "sec") }, u.prototype.startReport = function (e) { var t, A, r, i, n = this; this.isDestroy || (this.logType === o.ENUM_REMOTE_TYPE.WEBSOCKET && this.state === o.ENUM_CONNECT_STATE.disconnected ? (t = this.url, this.url = "", this.setLogServer(t)) : 0 < this.reportQueue.size() && (t = this.reportQueue.dequeue(), A = t.reportDatas, r = t.dataLen, i = t.product, new Date, e ? this.sendReport(A, r, i) : this.tokenBucket.removeTokens(r, function () { n.sendReport(A, r, i) }))) }, u.prototype.failTooMuch = function () { if (this.failCount <= 0) return !1; 1 == this.failCount && (this.failStartTime = Date.now()); var e = (Date.now() - this.failStartTime) / 1e3; return this.failCount >= a.FAIL_COUNT && e > a.FAIL_TIME || this.failCount >= a.FAIL_MAX_COUNT }, u.prototype.sendReport = function (e, t, A) { var r = this; this.reportData(e, t, A, function () { r.failCount = 0, r.failStartTime = 0, r.packageLen--, r.packagesDataSize -= t, r.postSucCallbackList[A] && r.postSucCallbackList[A](e, t, A) }, function (i) { var o; r.reportQueue.enqueue({ "reportDatas": e, "dataLen": t, "product": A }), r.failCount++, r.failTooMuch() ? (r.netWorkFail = !0, o = r.decodeReportQueue(), Object.keys(r.postFailCallbackList).forEach(function (e) { r.postFailCallbackList[A](o[e]) })) : r.startReport() }) }, u.prototype.resumeReport = function () { !0 === this.netWorkFail && this.networkState === o.ENUM_NETWORK_STATE.online && (this.netWorkFail = !1, this.startReport()) }, u.prototype.reportData = function (e, t, A, r, i) { var n = this, s = []; e.forEach(function (e) { s.push(JSON.parse(e.content)) }), this.logType == o.ENUM_REMOTE_TYPE.WEBSOCKET ? this.networkState === o.ENUM_NETWORK_STATE.offline ? i && i(o.errorList.BROKEN) : this.service.sendMessage("report", s, r, function (e) { var t; n.state === o.ENUM_CONNECT_STATE.disconnected && e === o.SOCKET_DISCONNECT && (t = n.url, n.url = "", n.setLogServer(t)), i && i(e) }) : this.logType == o.ENUM_REMOTE_TYPE.HTTPS && this.SendHttpsLog(s, t, r, function () { i && i() }) }, u.prototype.unsigned2signed = function (e) { var t = parseInt(e, 10); if (256 < t) return t % 256; for (var A = []; 0 < t;)t % 2 != 0 ? A.push(1) : A.push(0), t = Number(t / 2); for (A.reverse(); A.length < 8;)A.unshift(0); var r = ""; if (1 == (A = A.join("")).substr(0, 1)) { for (var i = 1; i < A.length; i++)1 == A.substr(i, 1) ? r += 0 : r += 1; return "-" + (parseInt(r, 2) + 1) } for (i = 0; i < A.length; i++)r += A.substr(i, 1); return parseInt(r, 2) }, u.prototype.decodeReportQueue = function () { for (var e = {}, t = this.reportQueue.size(), A = 0; A < t; A++) { var r, o = (r = this.reportQueue.dequeue()).reportDatas, n = r.dataLen; e[r = r.product] || (e[r] = []), e[r] = i(e[r], o), this.reportQueue.enqueue({ "reportDatas": o, "dataLen": n, "product": r }) } return e }, u.prototype.readReportQueueData = function () { for (var e = [], t = this.reportQueue.size(), A = 0; A < t; A++) { var r = this.reportQueue.dequeue(), o = r.reportDatas; r.dataLen, r.product, e.push.apply(e, i(o)) } return e }, t.ZegoService = u }, function (e, t, A) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.LogService = void 0; var r = A(26), i = A(4), o = A(0); function s(e, t, A, i) { this.env = e, this.product = t, this.pro = A, this.stateCenter = i, this.service = new r.ZegoSocketService(this.env, this.product, this.pro, this.stateCenter), this.cmdSeq = 0, this.responseRouters = {} } s.prototype.handleSendCommandMsgRsp = function (e) { var t, A, r = this, i = this.service.sendCommandMap[e.messageId || (null == (i = null == e ? void 0 : e.data) ? void 0 : i.message_id)]; null != i && (A = i._data, delete this.service.sendCommandMap[e.messageId || (null == (t = null == e ? void 0 : e.data) ? void 0 : t.message_id)], this.service.sendCommandList.remove(i), 0 === e.code ? setTimeout(function () { A && null != A.success && A.success(e, r.cmdSeq) }, 0) : setTimeout(function () { A && null != A.error && A.error(e, r.cmdSeq) }, 0)) }, s.prototype.onPush = function () { var e = this; this.service.onMessage = function (t) { e.handleSendCommandMsgRsp(t) } }, s.prototype.closeHandler = function (e) { this.service.closeHandler(e) }, s.prototype.openHandler = function (e) { this.service.openHandler(e) }, s.prototype.errorHandler = function (e) { this.service.errorHandler(e) }, s.prototype.getHeader = function (e) { return { "Protocol": "req", "cmd": e, "appid": 123, "seq": ++this.cmdSeq, "session_id": "" } }, s.prototype.startCheck = function () { this.service.startCheck() }, s.prototype.stopCheck = function () { this.service.stopCheck() }, s.prototype.isDisConnect = function () { return !this.service || this.service.isDisConnect() }, s.prototype.createSocket = function (e) { this.service.createSocket(e), this.responseRouters = {} }, s.prototype.closeSocket = function () { this.service.closeSocket() }, s.prototype.sendMessage = function (e, t, A, r, n, s) { return this.service.isDisConnect() ? (r && r(o.SOCKET_DISCONNECT), 0) : (n = n || this.getHeader(e), this.service.sendMessage(n, t, A, r, { "timeOut": 1e3 * i.DEFAULT_CONFIG.netTimeout })) }, s.prototype.on = function (e, t) { this.responseRouters[e] = t }, t.LogService = s }, function (e, t, A) { "use strict"; var r = this && this.__assign || function () { return (r = Object.assign || function (e) { for (var t, A = 1, r = arguments.length; A < r; A++)for (var i in t = arguments[A]) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]); return e }).apply(this, arguments) }, i = (Object.defineProperty(t, "__esModule", { "value": !0 }), t.ZegoSocketService = void 0, A(27)), o = A(0), n = A(28); function a(e, t, A, r) { this.product = t, this.pro = A, this.stateCenter = r, this.socket = null, this.sendCommandList = new o.LinkedList, this.sendCommandMap = {}, this.sendDataCheckOnceCount = 100, this.sendDataDropTimeout = 3e4, this.sendDataCheckInterval = 2e3, this.ENV = e } a.prototype.createSocket = function (e) { this.socket = i.createZegoWebSocket(e, this.ENV), this.socket.binaryType = "arraybuffer" }, a.prototype.closeSocket = function () { this.socket && (this.socket.onclose = null, this.socket.onerror = null, this.socket.close(), this.socket = null) }, a.prototype.isDisConnect = function () { return !this.socket || 1 !== this.socket.readyState }, a.prototype.sendMessage = function (e, t, A, i, o) { void 0 === A && (A = null), void 0 === i && (i = null), void 0 === o && (o = { "timeOut": 6e3 }); var s = r(r({}, this.stateCenter.processData), { "time_upload": Date.now() }); return s = { "data": t = { "message_id": e.seq, "product": this.product, "s": JSON.stringify({ "speed_detail": t, "process": s }) }, "seq": e.seq, "deleted": !1, "sendTime": Date.parse(new Date + ""), "timeOut": o.timeOut, "success": A, "error": i }, o = this.sendCommandList.push(s), this.sendCommandMap[s.seq] = o, this.socket && "pb" !== this.pro && (this.stateCenter._log.debug("upload data", JSON.stringify(t)), A = n.deflate(JSON.stringify(t), { "to": "string" }), this.socket.send(A)), e.seq }, a.prototype.checkSendMessageList = function (e) { for (var t = e.getFirst(); null != t;)e.remove(t), t._data && t._data.error && setTimeout(function () { t && t._data && t._data.error && t._data.error(o.errorList.TIMEOUT, t._data.data.message_id, t._data.data.s) }, 0), t = e.getFirst() }, a.prototype.checkMessageListTimeout = function (e, t) { for (var A = e.getFirst(), r = Date.parse(new Date + ""), i = 0; !(null == A || A._data && A._data.sendTime + A._data.timeOut > r || (A._data && delete t[A._data.data.message_id], e.remove(A), A._data && null == A._data.error || A._data && A._data.sendTime + this.sendDataDropTimeout < r || A && A._data && A._data.error && A._data.error(o.errorList.TIMEOUT, A._data.data.message_id, A._data.data.s), ++i >= this.sendDataCheckOnceCount));)A = e.getFirst() }, a.prototype.startCheck = function () { var e = this; this.checkMessageListTimeout(this.sendCommandList, this.sendCommandMap), this.sendDataCheckTimer = setTimeout(function () { e.startCheck() }, this.sendDataCheckInterval) }, a.prototype.stopCheck = function () { this.checkSendMessageList(this.sendCommandList), clearTimeout(this.sendDataCheckTimer) }, a.prototype.openHandler = function (e) { var t = this; this.socket && (this.socket.onopen = function (A) { t.responseHandler(), e(A) }) }, a.prototype.responseHandler = function () { var e = this; this.socket && (this.socket.onmessage = function (t) { t = "string" == typeof t.data ? JSON.parse(t.data) : JSON.parse(String.fromCharCode.apply(null, new Uint8Array(t.data))), e.onMessage(t) }) }, a.prototype.closeHandler = function (e) { this.socket && (this.socket.onclose = function (t) { e(t) }) }, a.prototype.errorHandler = function (e) { this.socket && (this.socket.onerror = e) }, a.prototype.onMessage = function (e) { }, t.ZegoSocketService = a }, function (e, t, A) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.createZegoWebSocket = t.ZegoWeiXinMiniWebSocket = void 0; var r = A(0), o = (i.prototype.init = function () { var e = this; this._websocket && (this.readyState = 0, this._websocket.onOpen(function (t) { e.readyState = e._websocket.readyState, "function" == typeof e.onopen && (e.onopen(t), e._websocket.onClose(function (t) { e.readyState = e._websocket.readyState, "function" == typeof e.onclose && e.onclose(t) }), e._websocket.onMessage(function (t) { "function" == typeof e.onmessage && e.onmessage(t) })) }), this._websocket.onError(function (t) { e.readyState = e._websocket.readyState, "function" == typeof e.onerror && e.onerror(t) })) }, i.prototype.onopen = function (e) { }, i.prototype.onerror = function (e) { }, i.prototype.onclose = function (e) { }, i.prototype.onmessage = function (e) { }, i.prototype.send = function (e) { this._websocket && this._websocket.send({ "data": e }) }, i.prototype.close = function () { this._websocket && this._websocket.close() }, i); function i(e, t) { this.url = e, this.readyState = 3, this._websocket = wx.connectSocket({ "url": e }), this.init() } t.ZegoWeiXinMiniWebSocket = o, t.createZegoWebSocket = function (e, t) { return new (t === r.ZEGO_ENV.BROWSER ? WebSocket : o)(e) } }, function (e, t, A) { !function (e) { "use strict"; function t(e) { for (var t = e.length; 0 <= --t;)e[t] = 0 } var r = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0]), i = new Uint8Array([0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13]), o = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 3, 7]), n = new Uint8Array([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]), s = new Array(576), a = (t(s), new Array(60)), c = (t(a), new Array(512)), l = (t(c), new Array(256)), h = (t(l), new Array(29)); t(h); var d, p, _, Q = new Array(30); function f(e, t, A, r, i) { this.static_tree = e, this.extra_bits = t, this.extra_base = A, this.elems = r, this.max_length = i, this.has_stree = e && e.length } function g(e, t) { this.dyn_tree = e, this.max_code = 0, this.stat_desc = t } function m(e) { for (var t = 0; t < 286; t++)e.dyn_ltree[2 * t] = 0; for (t = 0; t < 30; t++)e.dyn_dtree[2 * t] = 0; for (t = 0; t < 19; t++)e.bl_tree[2 * t] = 0; e.dyn_ltree[512] = 1, e.opt_len = e.static_len = 0, e.sym_next = e.matches = 0 } function y(e) { 8 < e.bi_valid ? G(e, e.bi_buf) : 0 < e.bi_valid && (e.pending_buf[e.pending++] = e.bi_buf), e.bi_buf = 0, e.bi_valid = 0 } function v(e, t, A, r) { var i = 2 * t, o = 2 * A; return e[i] < e[o] || e[i] === e[o] && r[t] <= r[A] } function b(e, t, A) { var o, n, s, a, c = 0; if (0 !== e.sym_next) for (; o = 255 & e.pending_buf[e.sym_buf + c++], o += (255 & e.pending_buf[e.sym_buf + c++]) << 8, n = e.pending_buf[e.sym_buf + c++], 0 == o ? K(e, n, t) : (s = l[n], K(e, s + 256 + 1, t), 0 !== (a = r[s]) && (n -= h[s], q(e, n, a)), s = D(--o), K(e, s, A), 0 !== (a = i[s]) && (o -= Q[s], q(e, o, a))), c < e.sym_next;); K(e, 256, t) } function E(e, t) { var A, r, i, o = t.dyn_tree, n = t.stat_desc.static_tree, s = t.stat_desc.has_stree, a = t.stat_desc.elems, c = -1; for (e.heap_len = 0, e.heap_max = 573, A = 0; A < a; A++)0 !== o[2 * A] ? (e.heap[++e.heap_len] = c = A, e.depth[A] = 0) : o[2 * A + 1] = 0; for (; e.heap_len < 2;)o[2 * (i = e.heap[++e.heap_len] = c < 2 ? ++c : 0)] = 1, e.depth[i] = 0, e.opt_len--, s && (e.static_len -= n[2 * i + 1]); for (t.max_code = c, A = e.heap_len >> 1; 1 <= A; A--)V(e, o, A); for (i = a; A = e.heap[1], e.heap[1] = e.heap[e.heap_len--], V(e, o, 1), r = e.heap[1], e.heap[--e.heap_max] = A, e.heap[--e.heap_max] = r, o[2 * i] = o[2 * A] + o[2 * r], e.depth[i] = (e.depth[A] >= e.depth[r] ? e.depth[A] : e.depth[r]) + 1, o[2 * A + 1] = o[2 * r + 1] = i, e.heap[1] = i++, V(e, o, 1), 2 <= e.heap_len;); e.heap[--e.heap_max] = e.heap[1]; for (var g, u, l, h, d, C = e, I = t.dyn_tree, E = t.max_code, p = t.stat_desc.static_tree, f = t.stat_desc.has_stree, B = t.stat_desc.extra_bits, _ = t.stat_desc.extra_base, m = t.stat_desc.max_length, Q = 0, y = 0; y <= 15; y++)C.bl_count[y] = 0; for (I[2 * C.heap[C.heap_max] + 1] = 0, g = C.heap_max + 1; g < 573; g++)(y = I[2 * I[2 * (u = C.heap[g]) + 1] + 1] + 1) > m && (y = m, Q++), I[2 * u + 1] = y, E < u || (C.bl_count[y]++, h = 0, _ <= u && (h = B[u - _]), d = I[2 * u], C.opt_len += d * (y + h), f && (C.static_len += d * (p[2 * u + 1] + h))); if (0 !== Q) { do { for (y = m - 1; 0 === C.bl_count[y];)y-- } while (C.bl_count[y]--, C.bl_count[y + 1] += 2, C.bl_count[m]--, 0 < (Q -= 2)); for (y = m; 0 !== y; y--)for (u = C.bl_count[y]; 0 !== u;)(l = C.heap[--g]) > E || (I[2 * l + 1] !== y && (C.opt_len += (y - I[2 * l + 1]) * I[2 * l], I[2 * l + 1] = y), u--) } j(o, c, e.bl_count) } function O(e, t, A) { var r, i, o = -1, n = t[1], s = 0, a = 7, c = 4; for (0 === n && (a = 138, c = 3), t[2 * (A + 1) + 1] = 65535, r = 0; r <= A; r++)i = n, n = t[2 * (r + 1) + 1], ++s < a && i === n || (s < c ? e.bl_tree[2 * i] += s : 0 !== i ? (i !== o && e.bl_tree[2 * i]++, e.bl_tree[32]++) : s <= 10 ? e.bl_tree[34]++ : e.bl_tree[36]++, o = i, c = (s = 0) === n ? (a = 138, 3) : i === n ? (a = 6, 3) : (a = 7, 4)) } function S(e, t, A) { var r, i, o = -1, n = t[1], s = 0, a = 7, c = 4; for (0 === n && (a = 138, c = 3), r = 0; r <= A; r++)if (i = n, n = t[2 * (r + 1) + 1], !(++s < a && i === n)) { if (s < c) for (; K(e, i, e.bl_tree), 0 != --s;); else 0 !== i ? (i !== o && (K(e, i, e.bl_tree), s--), K(e, 16, e.bl_tree), q(e, s - 3, 2)) : s <= 10 ? (K(e, 17, e.bl_tree), q(e, s - 3, 3)) : (K(e, 18, e.bl_tree), q(e, s - 11, 7)); o = i, c = (s = 0) === n ? (a = 138, 3) : i === n ? (a = 6, 3) : (a = 7, 4) } } function T(e, t, A, r) { q(e, 0 + (r ? 1 : 0), 3), y(e), G(e, A), G(e, ~A), A && e.pending_buf.set(e.window.subarray(t, t + A), e.pending), e.pending += A } function k(e, t) { return e.msg = re[t], t } function R(e) { return 2 * e - (4 < e ? 9 : 0) } function C(e, t) { ne(e, 0 <= e.block_start ? e.block_start : -1, e.strstart - e.block_start, t), e.block_start = e.strstart, Fe(e.strm) } function w(e, t) { e.pending_buf[e.pending++] = t } function N(e, t) { e.pending_buf[e.pending++] = t >>> 8 & 255, e.pending_buf[e.pending++] = 255 & t } function I(e, t) { var A, r, i = e.max_chain_length, o = e.strstart, n = e.prev_length, s = e.nice_match, a = e.strstart > e.w_size - Le ? e.strstart - (e.w_size - Le) : 0, c = e.window, g = e.w_mask, u = e.prev, l = e.strstart + be, h = c[o + n - 1], d = c[o + n]; e.prev_length >= e.good_match && (i >>= 2), s > e.lookahead && (s = e.lookahead); do { if (c[(A = t) + n] === d && c[A + n - 1] === h && c[A] === c[o] && c[++A] === c[o + 1]) { for (o += 2, A++; c[++o] === c[++A] && c[++o] === c[++A] && c[++o] === c[++A] && c[++o] === c[++A] && c[++o] === c[++A] && c[++o] === c[++A] && c[++o] === c[++A] && c[++o] === c[++A] && o < l;); if (r = be - (l - o), o = l - be, n < r) { if (e.match_start = t, s <= (n = r)) break; h = c[o + n - 1], d = c[o + n] } } } while ((t = u[t & g]) > a && 0 != --i); return n <= e.lookahead ? n : e.lookahead } function M(e, t) { for (var A, r, i, o = e.pending_buf_size - 5 > e.w_size ? e.w_size : e.pending_buf_size - 5, n = 0, s = e.strm.avail_in; A = 65535, i = e.bi_valid + 42 >> 3, !(e.strm.avail_out < i || (A = (i = e.strm.avail_out - i) < (A = A > (r = e.strstart - e.block_start) + e.strm.avail_in ? r + e.strm.avail_in : A) ? i : A) < o && (0 === A && t !== le || t === ce || A !== r + e.strm.avail_in) || (n = t === le && A === r + e.strm.avail_in ? 1 : 0, oe(e, 0, 0, n), e.pending_buf[e.pending - 4] = A, e.pending_buf[e.pending - 3] = A >> 8, e.pending_buf[e.pending - 2] = ~A, e.pending_buf[e.pending - 1] = ~A >> 8, Fe(e.strm), r && (A < r && (r = A), e.strm.output.set(e.window.subarray(e.block_start, e.block_start + r), e.strm.next_out), e.strm.next_out += r, e.strm.avail_out -= r, e.strm.total_out += r, e.block_start += r, A -= r), A && (He(e.strm, e.strm.output, e.strm.next_out, A), e.strm.next_out += A, e.strm.avail_out -= A, e.strm.total_out += A), 0 !== n));); return (s -= e.strm.avail_in) && (s >= e.w_size ? (e.matches = 2, e.window.set(e.strm.input.subarray(e.strm.next_in - e.w_size, e.strm.next_in), 0), e.strstart = e.w_size, e.insert = e.strstart) : (e.window_size - e.strstart <= s && (e.strstart -= e.w_size, e.window.set(e.window.subarray(e.w_size, e.w_size + e.strstart), 0), e.matches < 2 && e.matches++, e.insert > e.strstart && (e.insert = e.strstart)), e.window.set(e.strm.input.subarray(e.strm.next_in - s, e.strm.next_in), e.strstart), e.strstart += s, e.insert += s > e.w_size - e.insert ? e.w_size - e.insert : s), e.block_start = e.strstart), e.high_water < e.strstart && (e.high_water = e.strstart), n ? 4 : t !== ce && t !== le && 0 === e.strm.avail_in && e.strstart === e.block_start ? 2 : (i = e.window_size - e.strstart, e.strm.avail_in > i && e.block_start >= e.w_size && (e.block_start -= e.w_size, e.strstart -= e.w_size, e.window.set(e.window.subarray(e.w_size, e.w_size + e.strstart), 0), e.matches < 2 && e.matches++, i += e.w_size, e.insert > e.strstart && (e.insert = e.strstart)), (i = i > e.strm.avail_in ? e.strm.avail_in : i) && (He(e.strm, e.window, e.strstart, i), e.strstart += i, e.insert += i > e.w_size - e.insert ? e.w_size - e.insert : i), e.high_water < e.strstart && (e.high_water = e.strstart), i = e.bi_valid + 42 >> 3, o = (i = 65535 < e.pending_buf_size - i ? 65535 : e.pending_buf_size - i) > e.w_size ? e.w_size : i, ((r = e.strstart - e.block_start) >= o || (r || t === le) && t !== ce && 0 === e.strm.avail_in && r <= i) && (A = i < r ? i : r, n = t === le && 0 === e.strm.avail_in && A === r ? 1 : 0, oe(e, e.block_start, A, n), e.block_start += A, Fe(e.strm)), n ? 3 : 1) } function L(e, t) { for (var A, r; ;) { if (e.lookahead < Le) { if (xe(e), e.lookahead < Le && t === ce) return 1; if (0 === e.lookahead) break } if (A = 0, 3 <= e.lookahead && (e.ins_h = Ge(e, e.ins_h, e.window[e.strstart + 3 - 1]), A = e.prev[e.strstart & e.w_mask] = e.head[e.ins_h], e.head[e.ins_h] = e.strstart), 0 !== A && e.strstart - A <= e.w_size - Le && (e.match_length = I(e, A)), 3 <= e.match_length) if (r = se(e, e.strstart - e.match_start, e.match_length - 3), e.lookahead -= e.match_length, e.match_length <= e.max_lazy_match && 3 <= e.lookahead) { for (e.match_length--; e.strstart++, e.ins_h = Ge(e, e.ins_h, e.window[e.strstart + 3 - 1]), A = e.prev[e.strstart & e.w_mask] = e.head[e.ins_h], e.head[e.ins_h] = e.strstart, 0 != --e.match_length;); e.strstart++ } else e.strstart += e.match_length, e.match_length = 0, e.ins_h = e.window[e.strstart], e.ins_h = Ge(e, e.ins_h, e.window[e.strstart + 1]); else r = se(e, 0, e.window[e.strstart]), e.lookahead--, e.strstart++; if (r && (C(e, !1), 0 === e.strm.avail_out)) return 1 } return e.insert = e.strstart < 2 ? e.strstart : 2, t === le ? (C(e, !0), 0 === e.strm.avail_out ? 3 : 4) : e.sym_next && (C(e, !1), 0 === e.strm.avail_out) ? 1 : 2 } function P(e, t) { for (var A, r, i; ;) { if (e.lookahead < Le) { if (xe(e), e.lookahead < Le && t === ce) return 1; if (0 === e.lookahead) break } if (A = 0, 3 <= e.lookahead && (e.ins_h = Ge(e, e.ins_h, e.window[e.strstart + 3 - 1]), A = e.prev[e.strstart & e.w_mask] = e.head[e.ins_h], e.head[e.ins_h] = e.strstart), e.prev_length = e.match_length, e.prev_match = e.match_start, e.match_length = 2, 0 !== A && e.prev_length < e.max_lazy_match && e.strstart - A <= e.w_size - Le && (e.match_length = I(e, A), e.match_length <= 5 && (e.strategy === _e || 3 === e.match_length && 4096 < e.strstart - e.match_start) && (e.match_length = 2)), 3 <= e.prev_length && e.match_length <= e.prev_length) { for (i = e.strstart + e.lookahead - 3, r = se(e, e.strstart - 1 - e.prev_match, e.prev_length - 3), e.lookahead -= e.prev_length - 1, e.prev_length -= 2; ++e.strstart <= i && (e.ins_h = Ge(e, e.ins_h, e.window[e.strstart + 3 - 1]), A = e.prev[e.strstart & e.w_mask] = e.head[e.ins_h], e.head[e.ins_h] = e.strstart), 0 != --e.prev_length;); if (e.match_available = 0, e.match_length = 2, e.strstart++, r && (C(e, !1), 0 === e.strm.avail_out)) return 1 } else if (e.match_available) { if ((r = se(e, 0, e.window[e.strstart - 1])) && C(e, !1), e.strstart++, e.lookahead--, 0 === e.strm.avail_out) return 1 } else e.match_available = 1, e.strstart++, e.lookahead-- } return e.match_available && (r = se(e, 0, e.window[e.strstart - 1]), e.match_available = 0), e.insert = e.strstart < 2 ? e.strstart : 2, t === le ? (C(e, !0), 0 === e.strm.avail_out ? 3 : 4) : e.sym_next && (C(e, !1), 0 === e.strm.avail_out) ? 1 : 2 } t(Q); var D = function A(e) { return e < 256 ? c[e] : c[256 + (e >>> 7)] }, G = function D(e, t) { e.pending_buf[e.pending++] = 255 & t, e.pending_buf[e.pending++] = t >>> 8 & 255 }, q = function H(e, t, A) { e.bi_valid > 16 - A ? (e.bi_buf |= t << e.bi_valid & 65535, G(e, e.bi_buf), e.bi_buf = t >> 16 - e.bi_valid, e.bi_valid += A - 16) : (e.bi_buf |= t << e.bi_valid & 65535, e.bi_valid += A) }, K = function U(e, t, A) { q(e, A[2 * t], A[2 * t + 1]) }, Z = function j(e, t) { for (var A = 0; A |= 1 & e, e >>>= 1, A <<= 1, 0 < --t;); return A >>> 1 }, j = function x(e, t, A) { for (var r, i = new Array(16), o = 0, n = 1; n <= 15; n++)o = o + A[n - 1] << 1, i[n] = o; for (r = 0; r <= t; r++) { var s = e[2 * r + 1]; 0 !== s && (e[2 * r] = Z(i[s]++, s)) } }, V = function B(e, t, A) { for (var r = e.heap[A], i = A << 1; i <= e.heap_len && (i < e.heap_len && v(t, e.heap[i + 1], e.heap[i], e.depth) && i++, !v(t, r, e.heap[i], e.depth));)e.heap[A] = e.heap[i], A = i, i <<= 1; e.heap[A] = r }, z = !1, W = T, $ = function z(e, t, A, r) { for (var i = 65535 & e | 0, o = e >>> 16 & 65535 | 0, n = 0; 0 !== A;) { for (A -= n = 2e3 < A ? 2e3 : A; o = o + (i = i + t[r++] | 0) | 0, --n;); i %= 65521, o %= 65521 } return i | o << 16 | 0 }, ee = new Uint32Array(function () { for (var e = [], t = 0; t < 256; t++) { for (var A = t, r = 0; r < 8; r++)A = 1 & A ? 3988292384 ^ A >>> 1 : A >>> 1; e[t] = A } return e }()), te = function F(e, t, A, r) { var i = ee, o = r + A; e ^= -1; for (var n = r; n < o; n++)e = e >>> 8 ^ i[255 & (e ^ t[n])]; return -1 ^ e }, re = { "2": "need dictionary", "1": "stream end", "0": "", "-1": "file error", "-2": "stream error", "-3": "data error", "-4": "insufficient memory", "-5": "buffer error", "-6": "incompatible version" }, ie = { "Z_NO_FLUSH": 0, "Z_PARTIAL_FLUSH": 1, "Z_SYNC_FLUSH": 2, "Z_FULL_FLUSH": 3, "Z_FINISH": 4, "Z_BLOCK": 5, "Z_TREES": 6, "Z_OK": 0, "Z_STREAM_END": 1, "Z_NEED_DICT": 2, "Z_ERRNO": -1, "Z_STREAM_ERROR": -2, "Z_DATA_ERROR": -3, "Z_MEM_ERROR": -4, "Z_BUF_ERROR": -5, "Z_NO_COMPRESSION": 0, "Z_BEST_SPEED": 1, "Z_BEST_COMPRESSION": 9, "Z_DEFAULT_COMPRESSION": -1, "Z_FILTERED": 1, "Z_HUFFMAN_ONLY": 2, "Z_RLE": 3, "Z_FIXED": 4, "Z_DEFAULT_STRATEGY": 0, "Z_BINARY": 0, "Z_TEXT": 1, "Z_UNKNOWN": 2, "Z_DEFLATED": 8 }, oe = W, ne = function Y(e, t, A, r) { var i, o, c, g = 0; if (0 < e.level ? (2 === e.strm.data_type && (e.strm.data_type = function (e) { for (var t = 4093624447, A = 0; A <= 31; A++, t >>>= 1)if (1 & t && 0 !== e.dyn_ltree[2 * A]) return 0; if (0 !== e.dyn_ltree[18] || 0 !== e.dyn_ltree[20] || 0 !== e.dyn_ltree[26]) return 1; for (A = 32; A < 256; A++)if (0 !== e.dyn_ltree[2 * A]) return 1; return 0 }(e)), E(e, e.l_desc), E(e, e.d_desc), g = function (e) { var t; for (O(e, e.dyn_ltree, e.l_desc.max_code), O(e, e.dyn_dtree, e.d_desc.max_code), E(e, e.bl_desc), t = 18; 3 <= t && 0 === e.bl_tree[2 * n[t] + 1]; t--); return e.opt_len += 3 * (t + 1) + 5 + 5 + 4, t }(e), i = e.opt_len + 3 + 7 >>> 3, (o = e.static_len + 3 + 7 >>> 3) <= i && (i = o)) : i = o = A + 5, A + 4 <= i && -1 !== t) T(e, t, A, r); else if (4 === e.strategy || o === i) q(e, 2 + (r ? 1 : 0), 3), b(e, s, a); else { q(e, 4 + (r ? 1 : 0), 3); var u = e, l = (t = e.l_desc.max_code + 1, A = e.d_desc.max_code + 1, g + 1); for (q(u, t - 257, 5), q(u, A - 1, 5), q(u, l - 4, 4), c = 0; c < l; c++)q(u, u.bl_tree[2 * n[c] + 1], 3); S(u, u.dyn_ltree, t - 1), S(u, u.dyn_dtree, A - 1), b(e, e.dyn_ltree, e.dyn_dtree) } m(e), r && y(e) }, se = function X(e, t, A) { return e.pending_buf[e.sym_buf + e.sym_next++] = t, e.pending_buf[e.sym_buf + e.sym_next++] = t >> 8, e.pending_buf[e.sym_buf + e.sym_next++] = A, 0 === t ? e.dyn_ltree[2 * A]++ : (e.matches++, t--, e.dyn_ltree[2 * (l[A] + 256 + 1)]++, e.dyn_dtree[2 * D(t)]++), e.sym_next === e.sym_end }, ae = function J(e) { q(e, 2, 3), K(e, 256, s), 16 === e.bi_valid ? (G(e, e.bi_buf), e.bi_buf = 0, e.bi_valid = 0) : 8 <= e.bi_valid && (e.pending_buf[e.pending++] = 255 & e.bi_buf, e.bi_buf >>= 8, e.bi_valid -= 8) }, ce = ie.Z_NO_FLUSH, ge = ie.Z_PARTIAL_FLUSH, ue = ie.Z_FULL_FLUSH, le = ie.Z_FINISH, he = ie.Z_BLOCK, de = ie.Z_OK, Ce = ie.Z_STREAM_END, Ee = ie.Z_STREAM_ERROR, pe = ie.Z_DATA_ERROR, fe = ie.Z_BUF_ERROR, Be = ie.Z_DEFAULT_COMPRESSION, _e = ie.Z_FILTERED, me = ie.Z_HUFFMAN_ONLY, Qe = ie.Z_RLE, ye = ie.Z_FIXED, ve = ie.Z_UNKNOWN, Se = ie.Z_DEFLATED, be = 258, Le = 262, Oe = 42, Pe = function be(e) { for (var t = e.length; 0 <= --t;)e[t] = 0 }, Ue = function Ee(e) { for (var t, A, r = e.w_size, i = t = e.hash_size; A = e.head[--i], e.head[i] = r <= A ? A - r : 0, --t;); for (i = t = r; A = e.prev[--i], e.prev[i] = r <= A ? A - r : 0, --t;); }, Ge = function Oe(e, t, A) { return (t << e.hash_shift ^ A) & e.hash_mask }, Fe = function Se(e) { var t = e.state, A = t.pending; 0 !== (A = A > e.avail_out ? e.avail_out : A) && (e.output.set(t.pending_buf.subarray(t.pending_out, t.pending_out + A), e.next_out), e.next_out += A, t.pending_out += A, e.total_out += A, e.avail_out -= A, t.pending -= A, 0 === t.pending && (t.pending_out = 0)) }, He = function Te(e, t, A, r) { var i = e.avail_in; return 0 === (i = r < i ? r : i) ? 0 : (e.avail_in -= i, t.set(e.input.subarray(e.next_in, e.next_in + i), A), 1 === e.state.wrap ? e.adler = $(e.adler, t, i, A) : 2 === e.state.wrap && (e.adler = te(e.adler, t, i, A)), e.next_in += i, e.total_in += i, i) }, xe = function ke(e) { var t, A, r = e.w_size; do { if (t = e.window_size - e.lookahead - e.strstart, e.strstart >= r + (r - Le) && (e.window.set(e.window.subarray(r, r + r - t), 0), e.match_start -= r, e.strstart -= r, e.block_start -= r, e.insert > e.strstart && (e.insert = e.strstart), Ue(e), t += r), 0 === e.strm.avail_in) break; if (t = He(e.strm, e.window, e.strstart + e.lookahead, t), e.lookahead += t, 3 <= e.lookahead + e.insert) for (A = e.strstart - e.insert, e.ins_h = e.window[A], e.ins_h = Ge(e, e.ins_h, e.window[A + 1]); e.insert && (e.ins_h = Ge(e, e.ins_h, e.window[A + 3 - 1]), e.prev[A & e.w_mask] = e.head[e.ins_h], e.head[e.ins_h] = A, A++, e.insert--, !(e.lookahead + e.insert < 3));); } while (e.lookahead < Le && 0 !== e.strm.avail_in) }; function Re(e, t, A, r, i) { this.good_length = e, this.max_lazy = t, this.nice_length = A, this.max_chain = r, this.func = i } var qe = [new Re(0, 0, 0, 0, M), new Re(4, 4, 8, 4, L), new Re(4, 5, 16, 8, L), new Re(4, 6, 32, 32, L), new Re(4, 4, 16, 16, P), new Re(8, 16, 32, 32, P), new Re(8, 16, 128, 128, P), new Re(8, 32, 128, 256, P), new Re(32, 128, 258, 1024, P), new Re(32, 258, 258, 4096, P)]; var Je = function Ne(e) { var t; return !e || !(t = e.state) || t.strm !== e || t.status !== Oe && 57 !== t.status && 69 !== t.status && 73 !== t.status && 91 !== t.status && 103 !== t.status && 113 !== t.status && 666 !== t.status ? 1 : 0 }, je = function Ie(e) { if (Je(e)) return k(e, Ee); e.total_in = e.total_out = 0, e.data_type = ve; var t = e.state; return t.pending = 0, t.pending_out = 0, t.wrap < 0 && (t.wrap = -t.wrap), t.status = 2 === t.wrap ? 57 : t.wrap ? Oe : 113, e.adler = 2 === t.wrap ? 0 : 1, t.last_flush = -2, function (e) { if (!z) { for (var t, A, n, u = new Array(16), C = 0, I = 0; I < 28; I++)for (h[I] = C, t = 0; t < 1 << r[I]; t++)l[C++] = I; for (l[C - 1] = I, I = n = 0; I < 16; I++)for (Q[I] = n, t = 0; t < 1 << i[I]; t++)c[n++] = I; for (n >>= 7; I < 30; I++)for (Q[I] = n << 7, t = 0; t < 1 << i[I] - 7; t++)c[256 + n++] = I; for (A = 0; A <= 15; A++)u[A] = 0; for (t = 0; t <= 143;)s[2 * t + 1] = 8, t++, u[8]++; for (; t <= 255;)s[2 * t + 1] = 9, t++, u[9]++; for (; t <= 279;)s[2 * t + 1] = 7, t++, u[7]++; for (; t <= 287;)s[2 * t + 1] = 8, t++, u[8]++; for (j(s, 287, u), t = 0; t < 30; t++)a[2 * t + 1] = 5, a[2 * t] = Z(t, 5); d = new f(s, r, 257, 286, 15), p = new f(a, i, 0, 30, 15), _ = new f(new Array(0), o, 0, 19, 7), z = !0 } e.l_desc = new g(e.dyn_ltree, d), e.d_desc = new g(e.dyn_dtree, p), e.bl_desc = new g(e.bl_tree, _), e.bi_buf = 0, e.bi_valid = 0, m(e) }(t), de }; function Me(e) { return (Me = "function" == typeof Symbol && "symbol" == u(Symbol.iterator) ? function (e) { return void 0 === e ? "undefined" : u(e) } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : void 0 === e ? "undefined" : u(e) })(e) } try { String.fromCharCode.apply(null, new Uint8Array(1)) } catch (e) { } for (var Ve = new Uint8Array(256), ze = 0; ze < 256; ze++)Ve[ze] = 252 <= ze ? 6 : 248 <= ze ? 5 : 240 <= ze ? 4 : 224 <= ze ? 3 : 192 <= ze ? 2 : 1; function Ae(e) { if ("function" == typeof TextEncoder && TextEncoder.prototype.encode) return (new TextEncoder).encode(e); for (var t, A, r, i, o = e.length, n = 0, s = 0; s < o; s++)55296 == (64512 & (A = e.charCodeAt(s))) && s + 1 < o && 56320 == (64512 & (r = e.charCodeAt(s + 1))) && (A = 65536 + (A - 55296 << 10) + (r - 56320), s++), n += A < 128 ? 1 : A < 2048 ? 2 : A < 65536 ? 3 : 4; for (t = new Uint8Array(n), s = i = 0; i < n; s++)55296 == (64512 & (A = e.charCodeAt(s))) && s + 1 < o && 56320 == (64512 & (r = e.charCodeAt(s + 1))) && (A = 65536 + (A - 55296 << 10) + (r - 56320), s++), A < 128 ? t[i++] = A : (A < 2048 ? t[i++] = 192 | A >>> 6 : (A < 65536 ? t[i++] = 224 | A >>> 12 : (t[i++] = 240 | A >>> 18, t[i++] = 128 | A >>> 12 & 63), t[i++] = 128 | A >>> 6 & 63), t[i++] = 128 | 63 & A); return t } Ve[254] = Ve[254] = 1; var Xe = Object.prototype.toString, $e = ie.Z_NO_FLUSH, et = ie.Z_SYNC_FLUSH, tt = ie.Z_FULL_FLUSH, At = ie.Z_FINISH, rt = ie.Z_OK, it = ie.Z_STREAM_END, ot = ie.Z_DEFAULT_COMPRESSION, nt = ie.Z_DEFAULT_STRATEGY, st = ie.Z_DEFLATED; function Ze(e) { this.options = function (e) { for (var t, A, r = Array.prototype.slice.call(arguments, 1); r.length;) { var i = r.shift(); if (i) { if ("object" !== Me(i)) throw new TypeError(i + "must be non-object"); for (var o in i) t = i, A = o, Object.prototype.hasOwnProperty.call(t, A) && (e[o] = i[o]) } } return e }({ "level": ot, "method": st, "chunkSize": 16384, "windowBits": 15, "memLevel": 8, "strategy": nt }, e || {}); var t, A = ((e = this.options).raw && 0 < e.windowBits ? e.windowBits = -e.windowBits : e.gzip && 0 < e.windowBits && e.windowBits < 16 && (e.windowBits += 16), this.err = 0, this.msg = "", this.ended = !1, this.chunks = [], this.strm = new function De() { this.input = null, this.next_in = 0, this.avail_in = 0, this.total_in = 0, this.output = null, this.next_out = 0, this.avail_out = 0, this.total_out = 0, this.msg = "", this.state = null, this.data_type = 2, this.adler = 0 }, this.strm.avail_out = 0, function (e, t, A, r, i, o) { if (!e) return Ee; var n = 1; if (t === Be && (t = 6), r < 0 ? (n = 0, r = -r) : 15 < r && (n = 2, r -= 16), i < 1 || 9 < i || A !== Se || r < 8 || 15 < r || t < 0 || 9 < t || o < 0 || ye < o || 8 === r && 1 !== n) return k(e, Ee); 8 === r && (r = 9); var s = new function we() { this.strm = null, this.status = 0, this.pending_buf = null, this.pending_buf_size = 0, this.pending_out = 0, this.pending = 0, this.wrap = 0, this.gzhead = null, this.gzindex = 0, this.method = Se, this.last_flush = -1, this.w_size = 0, this.w_bits = 0, this.w_mask = 0, this.window = null, this.window_size = 0, this.prev = null, this.head = null, this.ins_h = 0, this.hash_size = 0, this.hash_bits = 0, this.hash_mask = 0, this.hash_shift = 0, this.block_start = 0, this.match_length = 0, this.prev_match = 0, this.match_available = 0, this.strstart = 0, this.match_start = 0, this.lookahead = 0, this.prev_length = 0, this.max_chain_length = 0, this.max_lazy_match = 0, this.level = 0, this.strategy = 0, this.good_match = 0, this.nice_match = 0, this.dyn_ltree = new Uint16Array(1146), this.dyn_dtree = new Uint16Array(122), this.bl_tree = new Uint16Array(78), Pe(this.dyn_ltree), Pe(this.dyn_dtree), Pe(this.bl_tree), this.l_desc = null, this.d_desc = null, this.bl_desc = null, this.bl_count = new Uint16Array(16), this.heap = new Uint16Array(573), Pe(this.heap), this.heap_len = 0, this.heap_max = 0, this.depth = new Uint16Array(573), Pe(this.depth), this.sym_buf = 0, this.lit_bufsize = 0, this.sym_next = 0, this.sym_end = 0, this.opt_len = 0, this.static_len = 0, this.matches = 0, this.insert = 0, this.bi_buf = 0, this.bi_valid = 0 }; return (e.state = s).strm = e, s.status = Oe, s.wrap = n, s.gzhead = null, s.w_bits = r, s.w_size = 1 << s.w_bits, s.w_mask = s.w_size - 1, s.hash_bits = i + 7, s.hash_size = 1 << s.hash_bits, s.hash_mask = s.hash_size - 1, s.hash_shift = ~~((s.hash_bits + 3 - 1) / 3), s.window = new Uint8Array(2 * s.w_size), s.head = new Uint16Array(s.hash_size), s.prev = new Uint16Array(s.w_size), s.lit_bufsize = 1 << i + 6, s.pending_buf_size = 4 * s.lit_bufsize, s.pending_buf = new Uint8Array(s.pending_buf_size), s.sym_buf = s.lit_bufsize, s.sym_end = 3 * (s.lit_bufsize - 1), s.level = t, s.strategy = o, s.method = A, (r = je(n = e)) === de && ((n = n.state).window_size = 2 * n.w_size, Pe(n.head), n.max_lazy_match = qe[n.level].max_lazy, n.good_match = qe[n.level].good_length, n.nice_match = qe[n.level].nice_length, n.max_chain_length = qe[n.level].max_chain, n.strstart = 0, n.block_start = 0, n.lookahead = 0, n.insert = 0, n.match_length = n.prev_length = 2, n.match_available = 0, n.ins_h = 0), r }(this.strm, e.level, e.method, e.windowBits, e.memLevel, e.strategy)); if (A !== rt) throw new Error(re[A]); if (e.header && (r = this.strm, t = e.header, Je(r) || 2 !== r.state.wrap || (r.state.gzhead = t)), e.dictionary) { var r = "string" == typeof e.dictionary ? Ae(e.dictionary) : "[object ArrayBuffer]" === Xe.call(e.dictionary) ? new Uint8Array(e.dictionary) : e.dictionary; if ((A = function (e, t) { var A = t.length; if (Je(e)) return Ee; var r = e.state, i = r.wrap; if (2 === i || 1 === i && r.status !== Oe || r.lookahead) return Ee; 1 === i && (e.adler = $(e.adler, t, A, 0)), r.wrap = 0, A >= r.w_size && (0 === i && (Pe(r.head), r.strstart = 0, r.block_start = 0, r.insert = 0), (o = new Uint8Array(r.w_size)).set(t.subarray(A - r.w_size, A), 0), t = o, A = r.w_size); var o = e.avail_in, n = e.next_in, s = e.input; for (e.avail_in = A, e.next_in = 0, e.input = t, xe(r); 3 <= r.lookahead;) { for (var a = r.strstart, c = r.lookahead - 2; r.ins_h = Ge(r, r.ins_h, r.window[a + 3 - 1]), r.prev[a & r.w_mask] = r.head[r.ins_h], r.head[r.ins_h] = a, a++, --c;); r.strstart = a, r.lookahead = 2, xe(r) } return r.strstart += r.lookahead, r.block_start = r.strstart, r.insert = r.lookahead, r.lookahead = 0, r.match_length = r.prev_length = 2, r.match_available = 0, e.next_in = n, e.input = s, e.avail_in = o, r.wrap = i, de }(this.strm, r)) !== rt) throw new Error(re[A]); this._dict_set = !0 } } function Ke(e, t) { if ((t = new Ze(t)).push(e, !0), t.err) throw t.msg || re[t.err]; return t.result } function We(e, t) { return (t = t || {}).raw = !0, Ke(e, t) } function Ye(e, t) { return (t = t || {}).gzip = !0, Ke(e, t) } Ze.prototype.push = function (e, t) { var A, r, i, o, n = this.strm, s = this.options.chunkSize; if (this.ended) return !1; for (r = t === ~~t ? t : !0 === t ? At : $e, "string" == typeof e ? n.input = Ae(e) : "[object ArrayBuffer]" === Xe.call(e) ? n.input = new Uint8Array(e) : n.input = e, n.next_in = 0, n.avail_in = n.input.length; ;)if (0 === n.avail_out && (n.output = new Uint8Array(s), n.next_out = 0, n.avail_out = s), (r === et || r === tt) && n.avail_out <= 6) this.onData(n.output.subarray(0, n.next_out)), n.avail_out = 0; else { if ((A = function (e, t) { if (Je(e) || he < t || t < 0) return e ? k(e, Ee) : Ee; var A = e.state; if (!e.output || 0 !== e.avail_in && !e.input || 666 === A.status && t !== le) return k(e, 0 === e.avail_out ? fe : Ee); var r = A.last_flush; if (A.last_flush = t, 0 !== A.pending) { if (Fe(e), 0 === e.avail_out) return A.last_flush = -1, de } else if (0 === e.avail_in && R(t) <= R(r) && t !== le) return k(e, fe); if (666 === A.status && 0 !== e.avail_in) return k(e, fe); if (A.status === Oe && 0 === A.wrap && (A.status = 113), A.status === Oe && (r = Se + (A.w_bits - 8 << 4) << 8, r |= (A.strategy >= me || A.level < 2 ? 0 : A.level < 6 ? 1 : 6 === A.level ? 2 : 3) << 6, 0 !== A.strstart && (r |= 32), N(A, r += 31 - r % 31), 0 !== A.strstart && (N(A, e.adler >>> 16), N(A, 65535 & e.adler)), e.adler = 1, A.status = 113, Fe(e), 0 !== A.pending)) return A.last_flush = -1, de; if (57 === A.status) if (e.adler = 0, w(A, 31), w(A, 139), w(A, 8), A.gzhead) w(A, (A.gzhead.text ? 1 : 0) + (A.gzhead.hcrc ? 2 : 0) + (A.gzhead.extra ? 4 : 0) + (A.gzhead.name ? 8 : 0) + (A.gzhead.comment ? 16 : 0)), w(A, 255 & A.gzhead.time), w(A, A.gzhead.time >> 8 & 255), w(A, A.gzhead.time >> 16 & 255), w(A, A.gzhead.time >> 24 & 255), w(A, 9 === A.level ? 2 : A.strategy >= me || A.level < 2 ? 4 : 0), w(A, 255 & A.gzhead.os), A.gzhead.extra && A.gzhead.extra.length && (w(A, 255 & A.gzhead.extra.length), w(A, A.gzhead.extra.length >> 8 & 255)), A.gzhead.hcrc && (e.adler = te(e.adler, A.pending_buf, A.pending, 0)), A.gzindex = 0, A.status = 69; else if (w(A, 0), w(A, 0), w(A, 0), w(A, 0), w(A, 0), w(A, 9 === A.level ? 2 : A.strategy >= me || A.level < 2 ? 4 : 0), w(A, 3), A.status = 113, Fe(e), 0 !== A.pending) return A.last_flush = -1, de; if (69 === A.status) { if (A.gzhead.extra) { for (var i = A.pending, o = (65535 & A.gzhead.extra.length) - A.gzindex; A.pending + o > A.pending_buf_size;) { var n = A.pending_buf_size - A.pending; if (A.pending_buf.set(A.gzhead.extra.subarray(A.gzindex, A.gzindex + n), A.pending), A.pending = A.pending_buf_size, A.gzhead.hcrc && A.pending > i && (e.adler = te(e.adler, A.pending_buf, A.pending - i, i)), A.gzindex += n, Fe(e), 0 !== A.pending) return A.last_flush = -1, de; i = 0, o -= n } r = new Uint8Array(A.gzhead.extra), A.pending_buf.set(r.subarray(A.gzindex, A.gzindex + o), A.pending), A.pending += o, A.gzhead.hcrc && A.pending > i && (e.adler = te(e.adler, A.pending_buf, A.pending - i, i)), A.gzindex = 0 } A.status = 73 } if (73 === A.status) { if (A.gzhead.name) { var s, a = A.pending; do { if (A.pending === A.pending_buf_size) { if (A.gzhead.hcrc && A.pending > a && (e.adler = te(e.adler, A.pending_buf, A.pending - a, a)), Fe(e), 0 !== A.pending) return A.last_flush = -1, de; a = 0 } } while (s = A.gzindex < A.gzhead.name.length ? 255 & A.gzhead.name.charCodeAt(A.gzindex++) : 0, w(A, s), 0 != s); A.gzhead.hcrc && A.pending > a && (e.adler = te(e.adler, A.pending_buf, A.pending - a, a)), A.gzindex = 0 } A.status = 91 } if (91 === A.status) { if (A.gzhead.comment) { var c, g = A.pending; do { if (A.pending === A.pending_buf_size) { if (A.gzhead.hcrc && A.pending > g && (e.adler = te(e.adler, A.pending_buf, A.pending - g, g)), Fe(e), 0 !== A.pending) return A.last_flush = -1, de; g = 0 } } while (c = A.gzindex < A.gzhead.comment.length ? 255 & A.gzhead.comment.charCodeAt(A.gzindex++) : 0, w(A, c), 0 != c); A.gzhead.hcrc && A.pending > g && (e.adler = te(e.adler, A.pending_buf, A.pending - g, g)) } A.status = 103 } if (103 === A.status) { if (A.gzhead.hcrc) { if (A.pending + 2 > A.pending_buf_size && (Fe(e), 0 !== A.pending)) return A.last_flush = -1, de; w(A, 255 & e.adler), w(A, e.adler >> 8 & 255), e.adler = 0 } if (A.status = 113, Fe(e), 0 !== A.pending) return A.last_flush = -1, de } if (0 !== e.avail_in || 0 !== A.lookahead || t !== ce && 666 !== A.status) { if (3 !== (r = 0 === A.level ? M(A, t) : A.strategy === me ? function (e, t) { for (var A; ;) { if (0 === e.lookahead && (xe(e), 0 === e.lookahead)) { if (t === ce) return 1; break } if (e.match_length = 0, A = se(e, 0, e.window[e.strstart]), e.lookahead--, e.strstart++, A && (C(e, !1), 0 === e.strm.avail_out)) return 1 } return e.insert = 0, t === le ? (C(e, !0), 0 === e.strm.avail_out ? 3 : 4) : e.sym_next && (C(e, !1), 0 === e.strm.avail_out) ? 1 : 2 }(A, t) : A.strategy === Qe ? function (e, t) { for (var A, r, i, o, n = e.window; ;) { if (e.lookahead <= be) { if (xe(e), e.lookahead <= be && t === ce) return 1; if (0 === e.lookahead) break } if (e.match_length = 0, 3 <= e.lookahead && 0 < e.strstart && (r = n[i = e.strstart - 1]) === n[++i] && r === n[++i] && r === n[++i]) { for (o = e.strstart + be; r === n[++i] && r === n[++i] && r === n[++i] && r === n[++i] && r === n[++i] && r === n[++i] && r === n[++i] && r === n[++i] && i < o;); e.match_length = be - (o - i), e.match_length > e.lookahead && (e.match_length = e.lookahead) } if (3 <= e.match_length ? (A = se(e, 1, e.match_length - 3), e.lookahead -= e.match_length, e.strstart += e.match_length, e.match_length = 0) : (A = se(e, 0, e.window[e.strstart]), e.lookahead--, e.strstart++), A && (C(e, !1), 0 === e.strm.avail_out)) return 1 } return e.insert = 0, t === le ? (C(e, !0), 0 === e.strm.avail_out ? 3 : 4) : e.sym_next && (C(e, !1), 0 === e.strm.avail_out) ? 1 : 2 }(A, t) : qe[A.level].func(A, t)) && 4 !== r || (A.status = 666), 1 === r || 3 === r) return 0 === e.avail_out && (A.last_flush = -1), de; if (2 === r && (t === ge ? ae(A) : t !== he && (oe(A, 0, 0, !1), t === ue && (Pe(A.head), 0 === A.lookahead && (A.strstart = 0, A.block_start = 0, A.insert = 0))), Fe(e), 0 === e.avail_out)) return A.last_flush = -1, de } return t === le && (A.wrap <= 0 || (2 === A.wrap ? (w(A, 255 & e.adler), w(A, e.adler >> 8 & 255), w(A, e.adler >> 16 & 255), w(A, e.adler >> 24 & 255), w(A, 255 & e.total_in), w(A, e.total_in >> 8 & 255), w(A, e.total_in >> 16 & 255), w(A, e.total_in >> 24 & 255)) : (N(A, e.adler >>> 16), N(A, 65535 & e.adler)), Fe(e), 0 < A.wrap && (A.wrap = -A.wrap), 0 === A.pending)) ? Ce : de }(n, r)) === it) return 0 < n.next_out && this.onData(n.output.subarray(0, n.next_out)), i = this.strm, o = void 0, A = Je(i) ? Ee : (o = i.state.status, i.state = null, 113 === o ? k(i, pe) : de), this.onEnd(A), this.ended = !0, A === rt; if (0 !== n.avail_out) { if (0 < r && 0 < n.next_out) this.onData(n.output.subarray(0, n.next_out)), n.avail_out = 0; else if (0 === n.avail_in) break } else this.onData(n.output) } return !0 }, Ze.prototype.onData = function (e) { this.chunks.push(e) }, Ze.prototype.onEnd = function (e) { e === rt && (this.result = function (e) { for (var t = 0, A = 0, r = e.length; A < r; A++)t += e[A].length; for (var i = new Uint8Array(t), o = 0, n = 0, s = e.length; o < s; o++) { var a = e[o]; i.set(a, n), n += a.length } return i }(this.chunks)), this.chunks = [], this.err = e, this.msg = this.strm.msg }; var at = { "Deflate": Ze, "deflate": W = Ke, "deflateRaw": We, "gzip": Ye, "constants": ie }; e.Deflate = Ze, e.constants = ie, e.default = at, e.deflate = W, e.deflateRaw = We, e.gzip = Ye, Object.defineProperty(e, "__esModule", { "value": !0 }) }(t) }, function (e, t, A) { "use strict"; function r(e, t, A, r) { if (this.bucketSize = 1, this.tokensPerInterval = 1, this.interval = 1e3, this.parentBucket = null, this.content = 0, this.lastDrip = 0, this.bucketSize = e, this.tokensPerInterval = t, "string" == typeof A) switch (A) { case "sec": case "second": this.interval = 1e3; break; case "min": case "minute": this.interval = 6e4; break; case "hr": case "hour": this.interval = 36e5; break; case "day": this.interval = 864e5; break; default: throw new Error("Invaid interval " + A) } else this.interval = A; this.parentBucket = r, this.content = 0, this.lastDrip = +new Date } Object.defineProperty(t, "__esModule", { "value": !0 }), t.TokenBucket = void 0, r.prototype.removeTokens = function (e, t) { var A = this; return this.bucketSize ? e > this.bucketSize ? (setTimeout(t.bind(null, "Requested tokens " + e + " exceeds bucket size " + this.bucketSize, null), 0), !1) : (this.drip(), e > this.content ? r() : this.parentBucket ? this.parentBucket.removeTokens(e, function (i, o) { return i ? t(i, null) : e > A.content ? r() : (A.content -= e, void t(null, Math.min(o, A.content))) }) : (this.content -= e, setTimeout(t.bind(null, null, this.content), 0), !0)) : (setTimeout(t.bind(null, null, e, Number.POSITIVE_INFINITY), 0), !0); function r() { var r = Math.ceil((e - A.content) * (A.interval / A.tokensPerInterval)); return setTimeout(function () { A.removeTokens(e, t) }, r), !1 } }, r.prototype.tryRemoveTokens = function (e) { if (this.bucketSize) { if (e > this.bucketSize) return !1; if (this.drip(), e > this.content) return !1; if (this.parentBucket && !this.parentBucket.tryRemoveTokens(e)) return !1; this.content -= e } return !0 }, r.prototype.drip = function () { var e, t; this.tokensPerInterval ? (t = +new Date, e = Math.max(t - this.lastDrip, 0), this.lastDrip = t, t = e * (this.tokensPerInterval / this.interval), this.content = Math.min(this.content + t, this.bucketSize)) : this.content = this.bucketSize }, t.TokenBucket = r }, function (e, A, r) { "use strict"; var i = this && this.__awaiter || function (e, t, A, r) { return new (A = A || Promise)(function (i, o) { function s(e) { try { c(r.next(e)) } catch (e) { o(e) } } function a(e) { try { c(r.throw(e)) } catch (e) { o(e) } } function c(e) { var t; e.done ? i(e.value) : ((t = e.value) instanceof A ? t : new A(function (e) { e(t) })).then(s, a) } c((r = r.apply(e, t || [])).next()) }) }, o = this && this.__generator || function (e, t) { var A, r, i, o = { "label": 0, "sent": function sent() { if (1 & i[0]) throw i[1]; return i[1] }, "trys": [], "ops": [] }, n = { "next": a(0), "throw": a(1), "return": a(2) }; return "function" == typeof Symbol && (n[Symbol.iterator] = function () { return this }), n; function a(n) { return function (s) { var a = [n, s]; if (A) throw new TypeError("Generator is already executing."); for (; o;)try { if (A = 1, r && (i = 2 & a[0] ? r.return : a[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, a[1])).done) return i; switch (r = 0, (a = i ? [2 & a[0], i.value] : a)[0]) { case 0: case 1: i = a; break; case 4: return o.label++, { "value": a[1], "done": !1 }; case 5: o.label++, r = a[1], a = [0]; continue; case 7: a = o.ops.pop(), o.trys.pop(); continue; default: if (!(i = 0 < (i = o.trys).length && i[i.length - 1]) && (6 === a[0] || 2 === a[0])) { o = 0; continue } if (3 === a[0] && (!i || a[1] > i[0] && a[1] < i[3])) o.label = a[1]; else if (6 === a[0] && o.label < i[1]) o.label = i[1], i = a; else { if (!(i && o.label < i[2])) { i[2] && o.ops.pop(), o.trys.pop(); continue } o.label = i[2], o.ops.push(a) } }a = t.call(e, o) } catch (s) { a = [6, s], r = 0 } finally { A = i = 0 } if (5 & a[0]) throw a[1]; return { "value": a[0] ? a[1] : void 0, "done": !0 } } } }, n = this && this.__importDefault || function (e) { return e && e.__esModule ? e : { "default": e } }, s = (Object.defineProperty(A, "__esModule", { "value": !0 }), A.ZegoStoreHandler = void 0, r(11)), a = r(5), c = r(4), g = n(r(12)); function l(e, t, A, r, i, o) { this.name = e, this.storeName = t, this.config = A, this.traceType = r, this.staticConfig = i, this.stateCenter = o, this.storeSize = 0, this.storeTime = 0, this.storeDelPer = c.STORE_SIZE.storeDelPer, this.updateTimeFreq = 6e4, this.storeSleepInterval = 6e5, this.droping = !1, this.bufferData = [], this.updateTimer = null, this.interSymbol = "#", this.drops = [], this.storesKeys = "", this.transStores = [], this.store = s.createZegoStore(e, A.env, t), this.commonStore = s.createZegoStore("data_common", A.env, "reporter") } Object.defineProperty(l.prototype, "KEY", { "get": function get() { return "z_t_" + this.config.appID }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(l.prototype, "STORES_KEY", { "get": function get() { return "z_store_keys" }, "enumerable": !1, "configurable": !0 }), l.prototype.init = function () { return i(this, void 0, void 0, function () { var e, t; return o(this, function (A) { switch (A.label) { case 0: return A.trys.push([0, 6, , 7]), this.setCommonStoreState(), [4, this.transferStoreData()]; case 1: return A.sent(), [4, this.commonStore.getItem(this.name + this.interSymbol + this.storeName)]; case 2: return (e = A.sent()) ? [3, 4] : (t = { "storeSize": this.storeSize, "lock": 0, "pros": 1 }, [4, this.commonStore.setItem(this.name + this.interSymbol + this.storeName, t)]); case 3: return A.sent(), [3, 5]; case 4: t = "string" == typeof e ? JSON.parse(e) : e, this.storeSize = t.storeSize, A.label = 5; case 5: return [3, 7]; case 6: return A.sent(), [3, 7]; case 7: return [2] } }) }) }, l.prototype.uninit = function () { this.updateTimer && (clearTimeout(this.updateTimer), this.updateTimer = null) }, l.prototype.setCommonStoreState = function () { var e = this, t = (this.getStorage(this.STORES_KEY) || "").split(";"); this.transStores = t.filter(function (t) { return t.includes(e.config.appID + "") }), t = t.filter(function (t) { return !t.includes(e.config.appID + "") }), this.storesKeys = t.join(";") }, l.prototype.resetCommonStore = function () { return i(this, void 0, void 0, function () { var e; return o(this, function (t) { switch (t.label) { case 0: return e = 0 < this.storesKeys.length ? ";" : "", this.saveStorage(this.STORES_KEY, this.storesKeys + e + this.name + this.interSymbol + this.storeName), [4, this.commonStore.setItem(this.name + this.interSymbol + this.storeName, { "storeSize": this.storeSize, "lock": 0, "pros": 0 })]; case 1: return t.sent(), [2] } }) }) }, l.prototype.transferStoreData = function () { return i(this, void 0, void 0, function () { var e, A, r, n, c = this; return o(this, function (t) { switch (t.label) { case 0: return [4, this.commonStore.keys()]; case 1: e = t.sent(), A = function t(A) { var n, g, u, l, h, d, C, I; return o(this, function (t) { switch (t.label) { case 0: return (n = e[A]) === r.name + r.interSymbol + r.storeName ? [3, 9] : [4, r.commonStore.getItem(n)]; case 1: return (g = "string" == typeof (g = t.sent()) ? JSON.parse(g) : g).lock || g.pros && !r.transStores.includes(n) ? [3, 9] : (l = n.split(r.interSymbol), u = l[0], l = l[1], [4, (h = s.createZegoStore(u, r.config.env, l)).keys()]); case 2: return 0 != (d = t.sent()).length ? [3, 3] : [3, 8]; case 3: return g.lock = 1, [4, r.commonStore.setItem(n, g)]; case 4: t.sent(), C = function _(e) { var t, A, n, s, g; return o(this, function (u) { switch (u.label) { case 0: return t = d[e], [4, h.getItem(t)]; case 1: return A = u.sent(), -1 !== t.indexOf("pending") ? A && JSON.parse(A).forEach(function (e) { return i(c, void 0, void 0, function () { return o(this, function (t) { switch (t.label) { case 0: return [4, this.storeData(e)]; case 1: return t.sent(), [2] } }) }) }) : (g = a.analyzeKey(t), n = g.level, s = g.timestamp, g = g.seq, r.storeData({ "level": n, "timestamp": s, "seq": g, "content": A })), setTimeout(function () { return i(c, void 0, void 0, function () { return o(this, function (e) { switch (e.label) { case 0: return [4, h.removeItem(t)]; case 1: return e.sent(), [2] } }) }) }, 300), [2] } }) }, I = 0, t.label = 5; case 5: return I < d.length ? [5, C(I)] : [3, 8]; case 6: t.sent(), t.label = 7; case 7: return I++, [3, 5]; case 8: r.drops.push({ "name": u, "storeName": l }), t.label = 9; case 9: return [2] } }) }, r = this, n = 0, t.label = 2; case 2: return n < e.length ? [5, A(n)] : [3, 5]; case 3: t.sent(), t.label = 4; case 4: return n++, [3, 2]; case 5: return this.transportStorageData(), setTimeout(function () { return i(c, void 0, void 0, function () { var e, t, A; return o(this, function (r) { switch (r.label) { case 0: e = 0, r.label = 1; case 1: if (!(e < this.drops.length)) return [3, 7]; A = this.drops[e], t = A.name, A = A.storeName, r.label = 2; case 2: return r.trys.push([2, 5, , 6]), [4, this.dropInstance(t, A)]; case 3: return r.sent(), [4, this.commonStore.removeItem(t + this.interSymbol + A)]; case 4: case 5: return r.sent(), [3, 6]; case 6: return e++, [3, 1]; case 7: return [2] } }) }) }, 1e3), [2] } }) }) }, l.prototype.dropInstance = function (e, t) { return new Promise(function (A, r) { g.default.dropInstance({ "name": e + ":" + t }).then(function () { A() }).catch(function (e) { r(e) }) }) }, l.prototype.setDropCallBack = function (e) { this.dropCallBack = e }, l.prototype.storeData = function (e) { var t = this; return new Promise(function (A, r) { return i(t, void 0, void 0, function () { var t, r, i, n, s, c = this; return o(this, function (o) { switch (o.label) { case 0: t = e.level, n = e.timestamp, r = e.seq, i = e.content, n = t + "_" + n + "_" + r, o.label = 1; case 1: return o.trys.push([1, 3, , 4]), [4, this.store.getItem(n)]; case 2: return o.sent() ? (A(), [2]) : [3, 4]; case 3: return o.sent(), [3, 4]; case 4: if (this.droping) return this.bufferData.push(e), [2]; if (s = a.calculateMemSize(n) + a.calculateMemSize(i), this.staticConfig.totalDBSize - s <= 0) return this.dropDBData(t, n, i).then(function () { c.droping = !1, c.bufferDump() }).catch(function (e) { }), A(), [2]; o.label = 5; case 5: return o.trys.push([5, 8, , 9]), [4, this.store.setItem(n, i)]; case 6: return o.sent(), this.storeSize += s, this.staticConfig.totalDBSize -= s, [4, this.refreshStoreInfo()]; case 7: return o.sent(), A(), [3, 9]; case 8: return "QuotaExceededError" === o.sent().name && this.dropDBData(t, n, i).then(function () { c.droping = !1, c.bufferDump() }).catch(function (e) { }), [3, 9]; case 9: return [2] } }) }) }) }, l.prototype.loadPendingData = function () { return i(this, void 0, void 0, function () { var e = this; return o(this, function (t) { switch (t.label) { case 0: return [4, this.store.keys()]; case 1: return t.sent().forEach(function (t) { return i(e, void 0, void 0, function () { var e, A = this; return o(this, function (r) { switch (r.label) { case 0: return -1 === t.indexOf("pending") ? [3, 3] : [4, this.store.getItem(t)]; case 1: return (e = r.sent()) ? (JSON.parse(e).forEach(function (e) { return i(A, void 0, void 0, function () { return o(this, function (t) { switch (t.label) { case 0: return [4, this.storeData(e)]; case 1: return t.sent(), [2] } }) }) }), [4, this.store.removeItem(t)]) : [3, 3]; case 2: r.sent(), r.label = 3; case 3: return [2] } }) }) }), [2] } }) }) }, l.prototype.storePendingData = function (e) { return i(this, void 0, void 0, function () { return o(this, function (t) { switch (t.label) { case 0: return [4, this.store.setItem("pending" + (new Date).getTime(), JSON.stringify(e))]; case 1: return t.sent(), [2] } }) }) }, l.prototype.bufferDump = function () { return i(this, void 0, void 0, function () { var e; return o(this, function (t) { switch (t.label) { case 0: return (e = this.bufferData.pop()) ? [4, this.storeData(e)] : [3, 2]; case 1: t.sent(), this.bufferDump(), t.label = 2; case 2: return [2] } }) }) }, l.prototype.dropDBData = function (e, t, A) { return i(this, void 0, void 0, function () { var e = this; return o(this, function (r) { return this.droping = !0, [2, new Promise(function (r, n) { return i(e, void 0, void 0, function () { var e, i, s, c, g; return o(this, function (o) { switch (o.label) { case 0: return o.trys.push([0, 10, , 11]), [4, this.store.keys()]; case 1: (e = o.sent()).reverse(), i = Math.ceil(e.length * this.storeDelPer), s = 0, o.label = 2; case 2: return s < i ? [4, this.store.getItem(e[s])] : [3, 7]; case 3: return null == (c = o.sent()) ? [3, 6] : [4, this.store.removeItem(e[s])]; case 4: return o.sent(), g = a.calculateMemSize(e[s]) + a.calculateMemSize(c), this.staticConfig.totalDBSize += g, this.storeSize -= g, [4, this.refreshStoreInfo()]; case 5: o.sent(), this.dropCallBack(c), o.label = 6; case 6: return s++, [3, 2]; case 7: return [4, this.store.setItem(t, A)]; case 8: return o.sent(), this.storeSize += a.calculateMemSize(t) + a.calculateMemSize(A), [4, this.refreshStoreInfo()]; case 9: return o.sent(), r(), [3, 11]; case 10: return g = o.sent(), n(g), [3, 11]; case 11: return [2] } }) }) })] }) }) }, l.prototype.removeDataItem = function (e) { var t = this; return new Promise(function (A, r) { return i(t, void 0, void 0, function () { var t, i, n, s, c; return o(this, function (o) { switch (o.label) { case 0: t = e.level, n = e.timestamp, s = e.seq, e.content, t = t + "_" + n + "_" + s, o.label = 1; case 1: return o.trys.push([1, 6, , 7]), [4, this.store.getItem(t)]; case 2: return (i = o.sent()) ? [4, this.store.removeItem(t)] : [3, 5]; case 3: return o.sent(), n = 1 == this.config.env ? a.calculateMemSize(JSON.parse(i)) : a.calculateMemSize(i), s = a.calculateMemSize(t) + n, this.storeSize -= s, this.staticConfig.totalDBSize += s, this.traceType.DB_O_DONE += s, [4, this.refreshStoreInfo()]; case 4: o.sent(), A(), o.label = 5; case 5: return [3, 7]; case 6: return c = o.sent(), r(c), [3, 7]; case 7: return [2] } }) }) }) }, l.prototype.refreshStoreInfo = function () { return i(this, void 0, void 0, function () { return o(this, function (e) { switch (e.label) { case 0: return e.trys.push([0, 4, , 5]), [4, this.commonStore.getItem(this.name + this.interSymbol + this.storeName)]; case 1: return e.sent() ? [4, this.commonStore.setItem(this.name + this.interSymbol + this.storeName, { "storeSize": this.storeSize, "lock": 0, "pros": 1 })] : [3, 3]; case 2: e.sent(), e.label = 3; case 3: return [3, 5]; case 4: return e.sent(), [3, 5]; case 5: return [2] } }) }) }, l.prototype.readStoreDataItem = function () { var e = this; return new Promise(function (t, A) { return i(e, void 0, void 0, function () { var e, r, i, n, s; return o(this, function (o) { switch (o.label) { case 0: return o.trys.push([0, 3, , 4]), [4, this.store.keys()]; case 1: return e = o.sent(), [4, this.store.getItem(e[0])]; case 2: return r = o.sent(), n = a.analyzeKey(e[0]), s = n.level, i = n.timestamp, n = n.seq, t({ "level": s, "timestamp": i, "seq": n, "content": r }), [3, 4]; case 3: return s = o.sent(), A(s), [3, 4]; case 4: return [2] } }) }) }) }, l.prototype.loadDBData = function (e, t, A, r) { var n = this; return new Promise(function (s, c) { return i(n, void 0, void 0, function () { var i, n, g, u, l, h, d, C, I, E; return o(this, function (o) { switch (o.label) { case 0: return o.trys.push([0, 6, , 7]), [4, this.store.keys()]; case 1: i = o.sent(), n = [], h = l = u = g = 0, o.label = 2; case 2: return h < i.length ? r(i[h]) ? [3, 4] : [4, this.store.getItem(i[h])] : [3, 5]; case 3: if (null == (d = o.sent())) return [3, 4]; if (C = a.analyzeKey(i[h]), I = C.level, E = C.timestamp, C = C.seq, n.push({ "level": I, "timestamp": E, "seq": C, "content": d, "key": i[h] }), I = a.calculateMemSize(d), u += I, e <= (g += I) && (g = 0, l++), t <= l && A <= u) return [3, 5]; o.label = 4; case 4: return h++, [3, 2]; case 5: return s({ "datas": n, "len": u }), [3, 7]; case 6: return E = o.sent(), c(E), [3, 7]; case 7: return [2] } }) }) }) }, l.prototype.sortKeys = function (e, t) { void 0 === t && (t = !1), e.sort(function (e, t) { return e = e.split("_"), +(t = t.split("_"))[0] - +e[0] || +t[1] - +e[1] || +t[2] - +e[2] }), t && e.reverse() }, l.prototype.saveStorage = function (e, t) { try { localStorage.setItem(e, t) } catch (e) { this.stateCenter._log.debug("storage set err") } }, l.prototype.getStorage = function (e) { try { return localStorage.getItem(e) } catch (e) { this.stateCenter._log.debug("storage get err") } }, l.prototype.saveDataToStorage = function (e) { try { var t = e.level, A = e.timestamp, r = e.seq, i = e.content, o = t + "_" + A + "_" + r; this.saveStorage(this.KEY + "_" + o, i) } catch (e) { this.stateCenter._log.debug("saveDataToStorage " + JSON.stringify(e)) } }, l.prototype.transportStorageData = function () { for (var e = [], t = 0; t < localStorage.length; t++) { var A, r, i, o, n = localStorage.key(t); this.stateCenter._log.debug("transportStorageData " + n), null != n && n.startsWith(this.KEY) && (i = n.replace(this.KEY + "_", ""), A = (i = a.analyzeKey(i)).level, r = i.timestamp, i = i.seq, "string" == typeof (o = this.getStorage(n)) && this.storeData({ "level": A, "timestamp": r, "seq": i, "content": o }), e.push(n)) } setTimeout(function () { for (var t = 0; t < e.length; t++)localStorage.removeItem(e[t]) }, 100) }, A.ZegoStoreHandler = l }, function (e, t, A) { "use strict"; var r = A(32), o = A(33).Buffer; e.exports = function (e) { return function i(e) { return function (t) { if (o.isBuffer(t)) return t.length; switch (void 0 === t ? "undefined" : u(t)) { case "string": return t.length * r.STRING; case "boolean": return r.BOOLEAN; case "number": return r.NUMBER; case "symbol": return Symbol.keyFor && Symbol.keyFor(t) ? Symbol.keyFor(t).length * r.STRING : (t.toString().length - 8) * r.STRING; case "object": if (Array.isArray(t)) return t.map(i(e)).reduce(function (e, t) { return e + t }, 0); var A = e, n = t; if (null == n) return 0; for (var s = 0, a = function (e) { var t, A = []; for (t in e) A.push(t); return Object.getOwnPropertySymbols && (e = Object.getOwnPropertySymbols(e), Array.prototype.push.apply(A, e)), A }(n), c = 0; c < a.length; c++) { var g = a[c]; if ("object" == u(n[g]) && null !== n[g]) { if (A.has(n[g])) continue; A.add(n[g]) } s += i(A)(g); try { s += i(A)(n[g]) } catch (A) { A instanceof RangeError && (s = 0) } } return s; default: return 0 } } }(new WeakSet)(e) } }, function (e, t) { e.exports = { "STRING": 2, "BOOLEAN": 4, "NUMBER": 8 } }, function (e, t, A) { "use strict"; (function (e) { var r = A(35), i = A(36), o = A(37); function s() { return c.TYPED_ARRAY_SUPPORT ? 2147483647 : 1073741823 } function a(e, t) { if (s() < t) throw new RangeError("Invalid typed array length"); return c.TYPED_ARRAY_SUPPORT ? (e = new Uint8Array(t)).__proto__ = c.prototype : (e = null === e ? new c(t) : e).length = t, e } function c(e, t, A) { if (!(c.TYPED_ARRAY_SUPPORT || this instanceof c)) return new c(e, t, A); if ("number" != typeof e) return u(this, e, t, A); if ("string" == typeof t) throw new Error("If encoding is specified then the first argument must be a string"); return h(this, e) } function u(e, t, A, r) { if ("number" == typeof t) throw new TypeError('"value" argument must not be a number'); if ("undefined" != typeof ArrayBuffer && t instanceof ArrayBuffer) { var i = e, n = t, s = A; if (n.byteLength, s < 0 || n.byteLength < s) throw new RangeError("'offset' is out of bounds"); if (n.byteLength < s + (r || 0)) throw new RangeError("'length' is out of bounds"); return n = void 0 === s && void 0 === r ? new Uint8Array(n) : void 0 === r ? new Uint8Array(n, s) : new Uint8Array(n, s, r), c.TYPED_ARRAY_SUPPORT ? (i = n).__proto__ = c.prototype : i = p(i, n), i } if ("string" != typeof t) { if (s = e, r = t, c.isBuffer(r)) return 0 !== (s = a(s, n = 0 | d(r.length))).length && r.copy(s, 0, 0, n), s; if (r) { if ("undefined" != typeof ArrayBuffer && r.buffer instanceof ArrayBuffer || "length" in r) return "number" != typeof r.length || (n = r.length) != n ? a(s, 0) : p(s, r); if ("Buffer" === r.type && o(r.data)) return p(s, r.data) } throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.") } if (i = e, r = t, c.isEncoding(e = "string" == typeof (e = A) && "" !== e ? e : "utf8")) return (r = (i = a(i, t = 0 | _(r, e))).write(r, e)) !== t ? i.slice(0, r) : i; throw new TypeError('"encoding" must be a valid string encoding') } function l(e) { if ("number" != typeof e) throw new TypeError('"size" argument must be a number'); if (e < 0) throw new RangeError('"size" argument must not be negative') } function h(e, t) { if (l(t), e = a(e, t < 0 ? 0 : 0 | d(t)), !c.TYPED_ARRAY_SUPPORT) for (var A = 0; A < t; ++A)e[A] = 0; return e } function p(e, t) { var A = t.length < 0 ? 0 : 0 | d(t.length); e = a(e, A); for (var r = 0; r < A; r += 1)e[r] = 255 & t[r]; return e } function d(e) { if (e >= s()) throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x" + s().toString(16) + " bytes"); return 0 | e } function _(e, t) { if (c.isBuffer(e)) return e.length; if ("undefined" != typeof ArrayBuffer && "function" == typeof ArrayBuffer.isView && (ArrayBuffer.isView(e) || e instanceof ArrayBuffer)) return e.byteLength; var A = (e = "string" != typeof e ? "" + e : e).length; if (0 === A) return 0; for (var r = !1; ;)switch (t) { case "ascii": case "latin1": case "binary": return A; case "utf8": case "utf-8": case void 0: return N(e).length; case "ucs2": case "ucs-2": case "utf16le": case "utf-16le": return 2 * A; case "hex": return A >>> 1; case "base64": return I(e).length; default: if (r) return N(e).length; t = ("" + t).toLowerCase(), r = !0 } } function f(e, t, A) { var r = e[t]; e[t] = e[A], e[A] = r } function g(e, t, A, r, i) { if (0 === e.length) return -1; if ("string" == typeof A ? (r = A, A = 0) : 2147483647 < A ? A = 2147483647 : A < -2147483648 && (A = -2147483648), A = +A, (A = (A = isNaN(A) ? i ? 0 : e.length - 1 : A) < 0 ? e.length + A : A) >= e.length) { if (i) return -1; A = e.length - 1 } else if (A < 0) { if (!i) return -1; A = 0 } if ("string" == typeof t && (t = c.from(t, r)), c.isBuffer(t)) return 0 === t.length ? -1 : m(e, t, A, r, i); if ("number" == typeof t) return t &= 255, c.TYPED_ARRAY_SUPPORT && "function" == typeof Uint8Array.prototype.indexOf ? (i ? Uint8Array.prototype.indexOf : Uint8Array.prototype.lastIndexOf).call(e, t, A) : m(e, [t], A, r, i); throw new TypeError("val must be string, number or Buffer") } function m(e, t, A, r, i) { var o = 1, n = e.length, s = t.length; if (void 0 !== r && ("ucs2" === (r = String(r).toLowerCase()) || "ucs-2" === r || "utf16le" === r || "utf-16le" === r)) { if (e.length < 2 || t.length < 2) return -1; n /= o = 2, s /= 2, A /= 2 } function c(e, t) { return 1 === o ? e[t] : e.readUInt16BE(t * o) } if (i) for (var a = -1, g = A; g < n; g++)if (c(e, g) === c(t, -1 === a ? 0 : g - a)) { if (g - (a = -1 === a ? g : a) + 1 === s) return a * o } else -1 !== a && (g -= g - a), a = -1; else for (g = A = n < A + s ? n - s : A; 0 <= g; g--) { for (var u = !0, l = 0; l < s; l++)if (c(e, g + l) !== c(t, l)) { u = !1; break } if (u) return g } return -1 } function y(e, t, A, r) { return M(function (e) { for (var t = [], A = 0; A < e.length; ++A)t.push(255 & e.charCodeAt(A)); return t }(t), e, A, r) } function v(e, t, A) { A = Math.min(e.length, A); for (var r = [], i = t; i < A;) { var o, s, a, c, g = e[i], u = null, l = 239 < g ? 4 : 223 < g ? 3 : 191 < g ? 2 : 1; if (i + l <= A) switch (l) { case 1: g < 128 && (u = g); break; case 2: 128 == (192 & (o = e[i + 1])) && 127 < (c = (31 & g) << 6 | 63 & o) && (u = c); break; case 3: o = e[i + 1], s = e[i + 2], 128 == (192 & o) && 128 == (192 & s) && 2047 < (c = (15 & g) << 12 | (63 & o) << 6 | 63 & s) && (c < 55296 || 57343 < c) && (u = c); break; case 4: o = e[i + 1], s = e[i + 2], a = e[i + 3], 128 == (192 & o) && 128 == (192 & s) && 128 == (192 & a) && 65535 < (c = (15 & g) << 18 | (63 & o) << 12 | (63 & s) << 6 | 63 & a) && c < 1114112 && (u = c) }null === u ? (u = 65533, l = 1) : 65535 < u && (r.push((u -= 65536) >>> 10 & 1023 | 55296), u = 56320 | 1023 & u), r.push(u), i += l } var h = r, d = h.length; if (d <= n) return String.fromCharCode.apply(String, h); for (var C = "", I = 0; I < d;)C += String.fromCharCode.apply(String, h.slice(I, I += n)); return C } t.Buffer = c, t.SlowBuffer = function (e) { return c.alloc(+(e = +e != e ? 0 : e)) }, t.INSPECT_MAX_BYTES = 50, c.TYPED_ARRAY_SUPPORT = void 0 !== e.TYPED_ARRAY_SUPPORT ? e.TYPED_ARRAY_SUPPORT : function () { try { var e = new Uint8Array(1); return e.__proto__ = { "__proto__": Uint8Array.prototype, "foo": function foo() { return 42 } }, 42 === e.foo() && "function" == typeof e.subarray && 0 === e.subarray(1, 1).byteLength } catch (e) { return !1 } }(), t.kMaxLength = s(), c.poolSize = 8192, c._augment = function (e) { return e.__proto__ = c.prototype, e }, c.from = function (e, t, A) { return u(null, e, t, A) }, c.TYPED_ARRAY_SUPPORT && (c.prototype.__proto__ = Uint8Array.prototype, c.__proto__ = Uint8Array, "undefined" != typeof Symbol && Symbol.species && c[Symbol.species] === c && Object.defineProperty(c, Symbol.species, { "value": null, "configurable": !0 })), c.alloc = function (e, t, A) { return l(e), e <= 0 || void 0 === t ? a(null, e) : "string" == typeof A ? a(null, e).fill(t, A) : a(null, e).fill(t) }, c.allocUnsafe = function (e) { return h(null, e) }, c.allocUnsafeSlow = function (e) { return h(null, e) }, c.isBuffer = function (e) { return !(null == e || !e._isBuffer) }, c.compare = function (e, t) { if (!c.isBuffer(e) || !c.isBuffer(t)) throw new TypeError("Arguments must be Buffers"); if (e === t) return 0; for (var A = e.length, r = t.length, i = 0, o = Math.min(A, r); i < o; ++i)if (e[i] !== t[i]) { A = e[i], r = t[i]; break } return A < r ? -1 : r < A ? 1 : 0 }, c.isEncoding = function (e) { switch (String(e).toLowerCase()) { case "hex": case "utf8": case "utf-8": case "ascii": case "latin1": case "binary": case "base64": case "ucs2": case "ucs-2": case "utf16le": case "utf-16le": return !0; default: return !1 } }, c.concat = function (e, t) { if (!o(e)) throw new TypeError('"list" argument must be an Array of Buffers'); if (0 === e.length) return c.alloc(0); if (void 0 === t) for (i = t = 0; i < e.length; ++i)t += e[i].length; for (var A = c.allocUnsafe(t), r = 0, i = 0; i < e.length; ++i) { var n = e[i]; if (!c.isBuffer(n)) throw new TypeError('"list" argument must be an Array of Buffers'); n.copy(A, r), r += n.length } return A }, c.byteLength = _, c.prototype._isBuffer = !0, c.prototype.swap16 = function () { var e = this.length; if (e % 2 != 0) throw new RangeError("Buffer size must be a multiple of 16-bits"); for (var t = 0; t < e; t += 2)f(this, t, t + 1); return this }, c.prototype.swap32 = function () { var e = this.length; if (e % 4 != 0) throw new RangeError("Buffer size must be a multiple of 32-bits"); for (var t = 0; t < e; t += 4)f(this, t, t + 3), f(this, t + 1, t + 2); return this }, c.prototype.swap64 = function () { var e = this.length; if (e % 8 != 0) throw new RangeError("Buffer size must be a multiple of 64-bits"); for (var t = 0; t < e; t += 8)f(this, t, t + 7), f(this, t + 1, t + 6), f(this, t + 2, t + 5), f(this, t + 3, t + 4); return this }, c.prototype.toString = function () { var e = 0 | this.length; return 0 == e ? "" : 0 === arguments.length ? v(this, 0, e) : function (e, t, A) { var i, o, n = !1; if ((t = void 0 === t || t < 0 ? 0 : t) > this.length) return ""; if ((A = void 0 === A || A > this.length ? this.length : A) <= 0) return ""; if ((A >>>= 0) <= (t >>>= 0)) return ""; for (e = e || "utf8"; ;)switch (e) { case "hex": var s = t, a = A, c = this.length; (!a || a < 0 || c < a) && (a = c); for (var g = "", u = s = !s || s < 0 ? 0 : s; u < a; ++u)g += (o = this[u]) < 16 ? "0" + o.toString(16) : o.toString(16); return g; case "utf8": case "utf-8": return v(this, t, A); case "ascii": c = t; for (var l = A, h = "", d = (l = Math.min(this.length, l), c); d < l; ++d)h += String.fromCharCode(127 & this[d]); return h; case "latin1": case "binary": s = t; for (var C = A, I = "", E = (C = Math.min(this.length, C), s); E < C; ++E)I += String.fromCharCode(this[E]); return I; case "base64": return p = this, i = A, 0 === (f = t) && i === p.length ? r.fromByteArray(p) : r.fromByteArray(p.slice(f, i)); case "ucs2": case "ucs-2": case "utf16le": case "utf-16le": for (var p = t, f = A, B = this.slice(p, f), _ = "", m = 0; m < B.length; m += 2)_ += String.fromCharCode(B[m] + 256 * B[m + 1]); return _; default: if (n) throw new TypeError("Unknown encoding: " + e); e = (e + "").toLowerCase(), n = !0 } }.apply(this, arguments) }, c.prototype.equals = function (e) { if (c.isBuffer(e)) return this === e || 0 === c.compare(this, e); throw new TypeError("Argument must be a Buffer") }, c.prototype.inspect = function () { var e = "", A = t.INSPECT_MAX_BYTES; return 0 < this.length && (e = this.toString("hex", 0, A).match(/.{2}/g).join(" "), this.length > A && (e += " ... ")), "<Buffer " + e + ">" }, c.prototype.compare = function (e, t, A, r, i) { if (!c.isBuffer(e)) throw new TypeError("Argument must be a Buffer"); if (void 0 === A && (A = e ? e.length : 0), void 0 === r && (r = 0), void 0 === i && (i = this.length), (t = void 0 === t ? 0 : t) < 0 || A > e.length || r < 0 || i > this.length) throw new RangeError("out of range index"); if (i <= r && A <= t) return 0; if (i <= r) return -1; if (A <= t) return 1; if (this === e) return 0; for (var o = (i >>>= 0) - (r >>>= 0), n = (A >>>= 0) - (t >>>= 0), s = Math.min(o, n), a = this.slice(r, i), g = e.slice(t, A), u = 0; u < s; ++u)if (a[u] !== g[u]) { o = a[u], n = g[u]; break } return o < n ? -1 : n < o ? 1 : 0 }, c.prototype.includes = function (e, t, A) { return -1 !== this.indexOf(e, t, A) }, c.prototype.indexOf = function (e, t, A) { return g(this, e, t, A, !0) }, c.prototype.lastIndexOf = function (e, t, A) { return g(this, e, t, A, !1) }, c.prototype.write = function (e, t, A, r) { if (void 0 === t) r = "utf8", A = this.length, t = 0; else if (void 0 === A && "string" == typeof t) r = t, A = this.length, t = 0; else { if (!isFinite(t)) throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported"); t |= 0, isFinite(A) ? (A |= 0, void 0 === r && (r = "utf8")) : (r = A, A = void 0) } var i = this.length - t; if ((void 0 === A || i < A) && (A = i), 0 < e.length && (A < 0 || t < 0) || t > this.length) throw new RangeError("Attempt to write outside buffer bounds"); r = r || "utf8"; for (var o, n, s, a, c = !1; ;)switch (r) { case "hex": var g, u = e, l = A, h = (g = Number(t) || 0, this.length - g); if ((!l || h < (l = Number(l))) && (l = h), (h = u.length) % 2 != 0) throw new TypeError("Invalid hex string"); h / 2 < l && (l = h / 2); for (var d = 0; d < l; ++d) { var C = parseInt(u.substr(2 * d, 2), 16); if (isNaN(C)) return d; this[g + d] = C } return d; case "utf8": case "utf-8": return h = t, n = A, M(N(e, (o = this).length - h), o, h, n); case "ascii": case "latin1": case "binary": return y(this, e, t, A); case "base64": return o = this, n = t, s = A, M(I(e), o, n, s); case "ucs2": case "ucs-2": case "utf16le": case "utf-16le": return s = t, a = A, M(function (e, t) { for (var A, r, i = [], o = 0; o < e.length && !((t -= 2) < 0); ++o)r = (A = e.charCodeAt(o)) >> 8, i.push(A % 256), i.push(r); return i }(e, this.length - s), this, s, a); default: if (c) throw new TypeError("Unknown encoding: " + r); r = ("" + r).toLowerCase(), c = !0 } }, c.prototype.toJSON = function () { return { "type": "Buffer", "data": Array.prototype.slice.call(this._arr || this, 0) } }; var n = 4096; function E(e, t, A) { if (e % 1 != 0 || e < 0) throw new RangeError("offset is not uint"); if (A < e + t) throw new RangeError("Trying to access beyond buffer length") } function O(e, t, A, r, i, o) { if (!c.isBuffer(e)) throw new TypeError('"buffer" argument must be a Buffer instance'); if (i < t || t < o) throw new RangeError('"value" argument is out of bounds'); if (A + r > e.length) throw new RangeError("Index out of range") } function S(e, t, A, r) { t < 0 && (t = 65535 + t + 1); for (var i = 0, o = Math.min(e.length - A, 2); i < o; ++i)e[A + i] = (t & 255 << 8 * (r ? i : 1 - i)) >>> 8 * (r ? i : 1 - i) } function T(e, t, A, r) { t < 0 && (t = 4294967295 + t + 1); for (var i = 0, o = Math.min(e.length - A, 4); i < o; ++i)e[A + i] = t >>> 8 * (r ? i : 3 - i) & 255 } function k(e, t, A, r) { if (A + r > e.length) throw new RangeError("Index out of range"); if (A < 0) throw new RangeError("Index out of range") } function R(e, t, A, r, o) { return o || k(e, 0, A, 4), i.write(e, t, A, r, 23, 4), A + 4 } function C(e, t, A, r, o) { return o || k(e, 0, A, 8), i.write(e, t, A, r, 52, 8), A + 8 } c.prototype.slice = function (e, t) { var A = this.length; if ((e = ~~e) < 0 ? (e += A) < 0 && (e = 0) : A < e && (e = A), (t = void 0 === t ? A : ~~t) < 0 ? (t += A) < 0 && (t = 0) : A < t && (t = A), t < e && (t = e), c.TYPED_ARRAY_SUPPORT) (i = this.subarray(e, t)).__proto__ = c.prototype; else for (var r = t - e, i = new c(r, void 0), o = 0; o < r; ++o)i[o] = this[o + e]; return i }, c.prototype.readUIntLE = function (e, t, A) { e |= 0, t |= 0, A || E(e, t, this.length); for (var r = this[e], i = 1, o = 0; ++o < t && (i *= 256);)r += this[e + o] * i; return r }, c.prototype.readUIntBE = function (e, t, A) { e |= 0, t |= 0, A || E(e, t, this.length); for (var r = this[e + --t], i = 1; 0 < t && (i *= 256);)r += this[e + --t] * i; return r }, c.prototype.readUInt8 = function (e, t) { return t || E(e, 1, this.length), this[e] }, c.prototype.readUInt16LE = function (e, t) { return t || E(e, 2, this.length), this[e] | this[e + 1] << 8 }, c.prototype.readUInt16BE = function (e, t) { return t || E(e, 2, this.length), this[e] << 8 | this[e + 1] }, c.prototype.readUInt32LE = function (e, t) { return t || E(e, 4, this.length), (this[e] | this[e + 1] << 8 | this[e + 2] << 16) + 16777216 * this[e + 3] }, c.prototype.readUInt32BE = function (e, t) { return t || E(e, 4, this.length), 16777216 * this[e] + (this[e + 1] << 16 | this[e + 2] << 8 | this[e + 3]) }, c.prototype.readIntLE = function (e, t, A) { e |= 0, t |= 0, A || E(e, t, this.length); for (var r = this[e], i = 1, o = 0; ++o < t && (i *= 256);)r += this[e + o] * i; return (i *= 128) <= r && (r -= Math.pow(2, 8 * t)), r }, c.prototype.readIntBE = function (e, t, A) { e |= 0, t |= 0, A || E(e, t, this.length); for (var r = t, i = 1, o = this[e + --r]; 0 < r && (i *= 256);)o += this[e + --r] * i; return (i *= 128) <= o && (o -= Math.pow(2, 8 * t)), o }, c.prototype.readInt8 = function (e, t) { return t || E(e, 1, this.length), 128 & this[e] ? -1 * (255 - this[e] + 1) : this[e] }, c.prototype.readInt16LE = function (e, t) { return t || E(e, 2, this.length), 32768 & (t = this[e] | this[e + 1] << 8) ? 4294901760 | t : t }, c.prototype.readInt16BE = function (e, t) { return t || E(e, 2, this.length), 32768 & (t = this[e + 1] | this[e] << 8) ? 4294901760 | t : t }, c.prototype.readInt32LE = function (e, t) { return t || E(e, 4, this.length), this[e] | this[e + 1] << 8 | this[e + 2] << 16 | this[e + 3] << 24 }, c.prototype.readInt32BE = function (e, t) { return t || E(e, 4, this.length), this[e] << 24 | this[e + 1] << 16 | this[e + 2] << 8 | this[e + 3] }, c.prototype.readFloatLE = function (e, t) { return t || E(e, 4, this.length), i.read(this, e, !0, 23, 4) }, c.prototype.readFloatBE = function (e, t) { return t || E(e, 4, this.length), i.read(this, e, !1, 23, 4) }, c.prototype.readDoubleLE = function (e, t) { return t || E(e, 8, this.length), i.read(this, e, !0, 52, 8) }, c.prototype.readDoubleBE = function (e, t) { return t || E(e, 8, this.length), i.read(this, e, !1, 52, 8) }, c.prototype.writeUIntLE = function (e, t, A, r) { e = +e, t |= 0, A |= 0, r || O(this, e, t, A, Math.pow(2, 8 * A) - 1, 0); var i = 1, o = 0; for (this[t] = 255 & e; ++o < A && (i *= 256);)this[t + o] = e / i & 255; return t + A }, c.prototype.writeUIntBE = function (e, t, A, r) { e = +e, t |= 0, A |= 0, r || O(this, e, t, A, Math.pow(2, 8 * A) - 1, 0); var i = A - 1, o = 1; for (this[t + i] = 255 & e; 0 <= --i && (o *= 256);)this[t + i] = e / o & 255; return t + A }, c.prototype.writeUInt8 = function (e, t, A) { return e = +e, t |= 0, A || O(this, e, t, 1, 255, 0), c.TYPED_ARRAY_SUPPORT || (e = Math.floor(e)), this[t] = 255 & e, t + 1 }, c.prototype.writeUInt16LE = function (e, t, A) { return e = +e, t |= 0, A || O(this, e, t, 2, 65535, 0), c.TYPED_ARRAY_SUPPORT ? (this[t] = 255 & e, this[t + 1] = e >>> 8) : S(this, e, t, !0), t + 2 }, c.prototype.writeUInt16BE = function (e, t, A) { return e = +e, t |= 0, A || O(this, e, t, 2, 65535, 0), c.TYPED_ARRAY_SUPPORT ? (this[t] = e >>> 8, this[t + 1] = 255 & e) : S(this, e, t, !1), t + 2 }, c.prototype.writeUInt32LE = function (e, t, A) { return e = +e, t |= 0, A || O(this, e, t, 4, 4294967295, 0), c.TYPED_ARRAY_SUPPORT ? (this[t + 3] = e >>> 24, this[t + 2] = e >>> 16, this[t + 1] = e >>> 8, this[t] = 255 & e) : T(this, e, t, !0), t + 4 }, c.prototype.writeUInt32BE = function (e, t, A) { return e = +e, t |= 0, A || O(this, e, t, 4, 4294967295, 0), c.TYPED_ARRAY_SUPPORT ? (this[t] = e >>> 24, this[t + 1] = e >>> 16, this[t + 2] = e >>> 8, this[t + 3] = 255 & e) : T(this, e, t, !1), t + 4 }, c.prototype.writeIntLE = function (e, t, A, r) { e = +e, t |= 0, r || O(this, e, t, A, (r = Math.pow(2, 8 * A - 1)) - 1, -r); var i = 0, o = 1, n = 0; for (this[t] = 255 & e; ++i < A && (o *= 256);)e < 0 && 0 === n && 0 !== this[t + i - 1] && (n = 1), this[t + i] = (e / o >> 0) - n & 255; return t + A }, c.prototype.writeIntBE = function (e, t, A, r) { e = +e, t |= 0, r || O(this, e, t, A, (r = Math.pow(2, 8 * A - 1)) - 1, -r); var i = A - 1, o = 1, n = 0; for (this[t + i] = 255 & e; 0 <= --i && (o *= 256);)e < 0 && 0 === n && 0 !== this[t + i + 1] && (n = 1), this[t + i] = (e / o >> 0) - n & 255; return t + A }, c.prototype.writeInt8 = function (e, t, A) { return e = +e, t |= 0, A || O(this, e, t, 1, 127, -128), c.TYPED_ARRAY_SUPPORT || (e = Math.floor(e)), this[t] = 255 & (e = e < 0 ? 255 + e + 1 : e), t + 1 }, c.prototype.writeInt16LE = function (e, t, A) { return e = +e, t |= 0, A || O(this, e, t, 2, 32767, -32768), c.TYPED_ARRAY_SUPPORT ? (this[t] = 255 & e, this[t + 1] = e >>> 8) : S(this, e, t, !0), t + 2 }, c.prototype.writeInt16BE = function (e, t, A) { return e = +e, t |= 0, A || O(this, e, t, 2, 32767, -32768), c.TYPED_ARRAY_SUPPORT ? (this[t] = e >>> 8, this[t + 1] = 255 & e) : S(this, e, t, !1), t + 2 }, c.prototype.writeInt32LE = function (e, t, A) { return e = +e, t |= 0, A || O(this, e, t, 4, 2147483647, -2147483648), c.TYPED_ARRAY_SUPPORT ? (this[t] = 255 & e, this[t + 1] = e >>> 8, this[t + 2] = e >>> 16, this[t + 3] = e >>> 24) : T(this, e, t, !0), t + 4 }, c.prototype.writeInt32BE = function (e, t, A) { return e = +e, t |= 0, A || O(this, e, t, 4, 2147483647, -2147483648), e < 0 && (e = 4294967295 + e + 1), c.TYPED_ARRAY_SUPPORT ? (this[t] = e >>> 24, this[t + 1] = e >>> 16, this[t + 2] = e >>> 8, this[t + 3] = 255 & e) : T(this, e, t, !1), t + 4 }, c.prototype.writeFloatLE = function (e, t, A) { return R(this, e, t, !0, A) }, c.prototype.writeFloatBE = function (e, t, A) { return R(this, e, t, !1, A) }, c.prototype.writeDoubleLE = function (e, t, A) { return C(this, e, t, !0, A) }, c.prototype.writeDoubleBE = function (e, t, A) { return C(this, e, t, !1, A) }, c.prototype.copy = function (e, t, A, r) { if (A = A || 0, r || 0 === r || (r = this.length), t >= e.length && (t = e.length), (r = 0 < r && r < A ? A : r) === A) return 0; if (0 === e.length || 0 === this.length) return 0; if ((t = t || 0) < 0) throw new RangeError("targetStart out of bounds"); if (A < 0 || A >= this.length) throw new RangeError("sourceStart out of bounds"); if (r < 0) throw new RangeError("sourceEnd out of bounds"); r > this.length && (r = this.length); var i, o = (r = e.length - t < r - A ? e.length - t + A : r) - A; if (this === e && A < t && t < r) for (i = o - 1; 0 <= i; --i)e[i + t] = this[i + A]; else if (o < 1e3 || !c.TYPED_ARRAY_SUPPORT) for (i = 0; i < o; ++i)e[i + t] = this[i + A]; else Uint8Array.prototype.set.call(e, this.subarray(A, A + o), t); return o }, c.prototype.fill = function (e, t, A, r) { if ("string" == typeof e) { var i; if ("string" == typeof t ? (r = t, t = 0, A = this.length) : "string" == typeof A && (r = A, A = this.length), 1 === e.length && (i = e.charCodeAt(0)) < 256 && (e = i), void 0 !== r && "string" != typeof r) throw new TypeError("encoding must be a string"); if ("string" == typeof r && !c.isEncoding(r)) throw new TypeError("Unknown encoding: " + r) } else "number" == typeof e && (e &= 255); if (t < 0 || this.length < t || this.length < A) throw new RangeError("Out of range index"); if (!(A <= t)) if (t >>>= 0, A = void 0 === A ? this.length : A >>> 0, "number" == typeof (e = e || 0)) for (s = t; s < A; ++s)this[s] = e; else for (var o = c.isBuffer(e) ? e : N(new c(e, r).toString()), n = o.length, s = 0; s < A - t; ++s)this[s + t] = o[s % n]; return this }; var B = /[^+\/0-9A-Za-z-_]/g; function N(e, t) { t = t || 1 / 0; for (var A, r = e.length, i = null, o = [], n = 0; n < r; ++n) { if (55295 < (A = e.charCodeAt(n)) && A < 57344) { if (!i) { if (56319 < A) { -1 < (t -= 3) && o.push(239, 191, 189); continue } if (n + 1 === r) { -1 < (t -= 3) && o.push(239, 191, 189); continue } i = A; continue } if (A < 56320) { -1 < (t -= 3) && o.push(239, 191, 189), i = A; continue } A = 65536 + (i - 55296 << 10 | A - 56320) } else i && -1 < (t -= 3) && o.push(239, 191, 189); if (i = null, A < 128) { if (--t < 0) break; o.push(A) } else if (A < 2048) { if ((t -= 2) < 0) break; o.push(A >> 6 | 192, 63 & A | 128) } else if (A < 65536) { if ((t -= 3) < 0) break; o.push(A >> 12 | 224, A >> 6 & 63 | 128, 63 & A | 128) } else { if (!(A < 1114112)) throw new Error("Invalid code point"); if ((t -= 4) < 0) break; o.push(A >> 18 | 240, A >> 12 & 63 | 128, A >> 6 & 63 | 128, 63 & A | 128) } } return o } function I(e) { return r.toByteArray(function (e) { var t; if ((e = ((t = e).trim ? t.trim() : t.replace(/^\s+|\s+$/g, "")).replace(B, "")).length < 2) return ""; for (; e.length % 4 != 0;)e += "="; return e }(e)) } function M(e, t, A, r) { for (var i = 0; i < r && !(i + A >= t.length || i >= e.length); ++i)t[i + A] = e[i]; return i } }).call(this, A(34)) }, function (e, t) { var A = function () { return this }(); try { A = A || new Function("return this")() } catch (e) { "object" == ("undefined" == typeof window ? "undefined" : u(window)) && (A = window) } e.exports = A }, function (e, t, A) { "use strict"; t.byteLength = function (e) { return 3 * ((e = u(e))[0] + (e = e[1])) / 4 - e }, t.toByteArray = function (e) { for (var t, A = (r = u(e))[0], r = r[1], n = new o(3 * (A + r) / 4 - r), s = 0, a = 0 < r ? A - 4 : A, c = 0; c < a; c += 4)t = i[e.charCodeAt(c)] << 18 | i[e.charCodeAt(c + 1)] << 12 | i[e.charCodeAt(c + 2)] << 6 | i[e.charCodeAt(c + 3)], n[s++] = t >> 16 & 255, n[s++] = t >> 8 & 255, n[s++] = 255 & t; return 2 === r && (t = i[e.charCodeAt(c)] << 2 | i[e.charCodeAt(c + 1)] >> 4, n[s++] = 255 & t), 1 === r && (t = i[e.charCodeAt(c)] << 10 | i[e.charCodeAt(c + 1)] << 4 | i[e.charCodeAt(c + 2)] >> 2, n[s++] = t >> 8 & 255, n[s++] = 255 & t), n }, t.fromByteArray = function (e) { for (var t, A = e.length, i = A % 3, o = [], n = 0, s = A - i; n < s; n += 16383)o.push(function (e, t) { for (var A, i = [], o = n; o < t; o += 3)A = (e[o] << 16 & 16711680) + (e[o + 1] << 8 & 65280) + (255 & e[o + 2]), i.push(r[A >> 18 & 63] + r[A >> 12 & 63] + r[A >> 6 & 63] + r[63 & A]); return i.join("") }(e, s < n + 16383 ? s : n + 16383)); return 1 == i ? (t = e[A - 1], o.push(r[t >> 2] + r[t << 4 & 63] + "==")) : 2 == i && (t = (e[A - 2] << 8) + e[A - 1], o.push(r[t >> 10] + r[t >> 4 & 63] + r[t << 2 & 63] + "=")), o.join("") }; for (var r = [], i = [], o = "undefined" != typeof Uint8Array ? Uint8Array : Array, n = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/", s = 0, a = n.length; s < a; ++s)r[s] = n[s], i[n.charCodeAt(s)] = s; function u(e) { var t = e.length; if (0 < t % 4) throw new Error("Invalid string. Length must be a multiple of 4"); return t = (e = -1 === (e = e.indexOf("=")) ? t : e) === t ? 0 : 4 - e % 4, [e, t] } i["-".charCodeAt(0)] = 62, i["_".charCodeAt(0)] = 63 }, function (e, t) { t.read = function (e, t, A, r, i) { var o, n, s = 8 * i - r - 1, a = (1 << s) - 1, c = a >> 1, g = -7, u = A ? i - 1 : 0, l = A ? -1 : 1; for (i = e[t + u], u += l, o = i & (1 << -g) - 1, i >>= -g, g += s; 0 < g; o = 256 * o + e[t + u], u += l, g -= 8); for (n = o & (1 << -g) - 1, o >>= -g, g += r; 0 < g; n = 256 * n + e[t + u], u += l, g -= 8); if (0 === o) o = 1 - c; else { if (o === a) return n ? NaN : 1 / 0 * (i ? -1 : 1); n += Math.pow(2, r), o -= c } return (i ? -1 : 1) * n * Math.pow(2, o - r) }, t.write = function (e, t, A, r, i, o) { var n, s, a = 8 * o - i - 1, c = (1 << a) - 1, g = c >> 1, u = 23 === i ? Math.pow(2, -24) - Math.pow(2, -77) : 0, l = r ? 0 : o - 1, h = r ? 1 : -1; for (o = t < 0 || 0 === t && 1 / t < 0 ? 1 : 0, t = Math.abs(t), isNaN(t) || t === 1 / 0 ? (s = isNaN(t) ? 1 : 0, n = c) : (n = Math.floor(Math.log(t) / Math.LN2), t * (r = Math.pow(2, -n)) < 1 && (n--, r *= 2), 2 <= (t += 1 <= n + g ? u / r : u * Math.pow(2, 1 - g)) * r && (n++, r /= 2), c <= n + g ? (s = 0, n = c) : 1 <= n + g ? (s = (t * r - 1) * Math.pow(2, i), n += g) : (s = t * Math.pow(2, g - 1) * Math.pow(2, i), n = 0)); 8 <= i; e[A + l] = 255 & s, l += h, s /= 256, i -= 8); for (n = n << i | s, a += i; 0 < a; e[A + l] = 255 & n, l += h, n /= 256, a -= 8); e[A + l - h] |= 128 * o } }, function (e, t) { var A = {}.toString; e.exports = Array.isArray || function (e) { return "[object Array]" == A.call(e) } }, function (e, t, A) { "use strict"; var r = this && this.__read || function (e, t) { var A = "function" == typeof Symbol && e[Symbol.iterator]; if (!A) return e; var r, i, o = A.call(e), n = []; try { for (; (void 0 === t || 0 < t--) && !(r = o.next()).done;)n.push(r.value) } catch (e) { i = { "error": e } } finally { try { r && !r.done && (A = o.return) && A.call(o) } finally { if (i) throw i.error } } return n }, i = this && this.__spread || function () { for (var e = [], t = 0; t < arguments.length; t++)e = e.concat(r(arguments[t])); return e }, o = (Object.defineProperty(t, "__esModule", { "value": !0 }), t.PendingQueue = void 0, A(0)), n = A(5); function a(e, t, A, r) { var i = this; this.levels = e, this.product = t, this.staticConfig = A, this.stateCenter = r, this.byteLength = 0, this.size = 0, this.pendingDataSize = 0, this.cacheMap = new Map, e.forEach(function (e) { i.cacheMap.set(e, new o.Queue) }) } a.prototype.enqueue = function (e, t) { (t = this.cacheMap.get(t)) && !t.all().find(function (t) { return t.content == e.content }) && (t.enqueue(e), t = n.calculateMemSize(e.content), this.pendingDataSize += t, this.size++, this.staticConfig.totalAvailCache -= t, this.enCallback && this.enCallback(this.byteLength, this.size, this.pendingDataSize)) }, a.prototype.dequeue = function (e) { return e = null == (e = this.cacheMap.get(e)) ? void 0 : e.dequeue(), this.size--, this.deCallback && this.deCallback(), e }, a.prototype.findInQueue = function (e) { var t = null == (t = this.cacheMap.get(e.level)) ? void 0 : t.all(); return null == t ? void 0 : t.find(function (t) { return t.key === e.key }) }, a.prototype.readReportData = function (e) { var t = i(this.cacheMap.entries()); return t = this.readData(t, e, !0), this.reset(), { "totalLen": t.totalLen, "reportDataArr": t.resArr } }, a.prototype.readStoreData = function (e) { e = Math.ceil(this.pendingDataSize * e); var t = i(this.cacheMap.entries()).reverse(); return t = this.readData(t, e, !1), this.refresh(t.totalLen), { "totalLen": t.totalLen, "storeArr": t.resArr } }, a.prototype.readData = function (e, t, A) { var i = [], o = 0; e: for (var s = 0; s < e.length; s++)for (var a = r(e[s], 2), c = a[0], g = a[1]; g.size();) { var u = this.dequeue(c); if (i.push(u), t < (o += n.calculateMemSize(u.content))) break e } return { "totalLen": o, "resArr": i } }, a.prototype.decodeReportData = function (e) { var t = this; e.forEach(function (e) { t.enqueue(e, e.level) }) }, a.prototype.setListener = function (e) { this.enCallback = e.enCallback, this.deCallback = e.deCallback }, a.prototype.getPendingDataInfo = function () { return { "pendingDataSize": this.pendingDataSize, "size": this.size } }, a.prototype.refresh = function (e) { this.pendingDataSize -= e, this.staticConfig.totalAvailCache += e }, a.prototype.reset = function () { this.byteLength = 0 }, t.PendingQueue = a }, function (e, t, A) { "use strict"; var r = this && this.__awaiter || function (e, t, A, r) { return new (A = A || Promise)(function (i, o) { function s(e) { try { c(r.next(e)) } catch (e) { o(e) } } function a(e) { try { c(r.throw(e)) } catch (e) { o(e) } } function c(e) { var t; e.done ? i(e.value) : ((t = e.value) instanceof A ? t : new A(function (e) { e(t) })).then(s, a) } c((r = r.apply(e, t || [])).next()) }) }, i = this && this.__generator || function (e, t) { var A, r, i, o = { "label": 0, "sent": function sent() { if (1 & i[0]) throw i[1]; return i[1] }, "trys": [], "ops": [] }, n = { "next": a(0), "throw": a(1), "return": a(2) }; return "function" == typeof Symbol && (n[Symbol.iterator] = function () { return this }), n; function a(n) { return function (s) { var a = [n, s]; if (A) throw new TypeError("Generator is already executing."); for (; o;)try { if (A = 1, r && (i = 2 & a[0] ? r.return : a[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, a[1])).done) return i; switch (r = 0, (a = i ? [2 & a[0], i.value] : a)[0]) { case 0: case 1: i = a; break; case 4: return o.label++, { "value": a[1], "done": !1 }; case 5: o.label++, r = a[1], a = [0]; continue; case 7: a = o.ops.pop(), o.trys.pop(); continue; default: if (!(i = 0 < (i = o.trys).length && i[i.length - 1]) && (6 === a[0] || 2 === a[0])) { o = 0; continue } if (3 === a[0] && (!i || a[1] > i[0] && a[1] < i[3])) o.label = a[1]; else if (6 === a[0] && o.label < i[1]) o.label = i[1], i = a; else { if (!(i && o.label < i[2])) { i[2] && o.ops.pop(), o.trys.pop(); continue } o.label = i[2], o.ops.push(a) } }a = t.call(e, o) } catch (s) { a = [6, s], r = 0 } finally { A = i = 0 } if (5 & a[0]) throw a[1]; return { "value": a[0] ? a[1] : void 0, "done": !0 } } } }, o = (Object.defineProperty(t, "__esModule", { "value": !0 }), t.loadJS = void 0, A(40)); function s(e, t, A) { return (e = o.decrypt(e, t)) && o.hashMd5(e) === A ? e : "" } t.loadJS = function (e, t, A, o, n, a, c) { var g = this; return new Promise(function (u, l) { return r(g, void 0, void 0, function () { var g, h, d, C, I; return i(this, function (E) { switch (E.label) { case 0: if (g = "dy", e) return [3, 7]; E.label = 1; case 1: return E.trys.push([1, 5, , 6]), [4, t.getItem("code")]; case 2: return h = E.sent(), [4, t.getItem("key")]; case 3: return d = E.sent(), [4, t.getItem("hash")]; case 4: C = E.sent(); var p = s(h, d, C) || a, f = g, B = c, _ = document.getElementsByTagName("HEAD").item(0), m = document.createElement("script"); m.language = "javascript", m.type = "text/javascript", m.id = f, m.param = B; try { m.appendChild(document.createTextNode(p)) } catch (f) { m.text = p } return _.appendChild(m), u(), [3, 6]; case 5: return E.sent(), l(), [3, 6]; case 6: return [2]; case 7: if (window.ActiveXObject) try { I = new ActiveXObject("Msxml2.XMLHTTP") } catch (E) { I = new ActiveXObject("Microsoft.XMLHTTP") } else window.XMLHttpRequest && (I = new XMLHttpRequest); return I.open("GET", A, !0), I.send(null), I.onreadystatechange = function () { return r(this, void 0, void 0, function () { return i(this, function (e) { switch (e.label) { case 0: if (4 != I.readyState) return [3, 10]; if (!(200 <= I.status && I.status < 300 || 0 == I.status || 304 == I.status)) return [3, 8]; e.label = 1; case 1: return e.trys.push([1, 6, , 7]), s(I.responseText, o, n) ? [4, t.setItem("code", I.responseText)] : [3, 5]; case 2: return e.sent(), [4, t.setItem("key", o)]; case 3: return e.sent(), [4, t.setItem("hash", n)]; case 4: e.sent(), e.label = 5; case 5: return u(), [3, 7]; case 6: return e.sent(), l(), [3, 7]; case 7: return [2]; case 8: return l(), [2]; case 9: return [3, 11]; case 10: case 11: return [2] } }) }) }, [2] } }) }) }) } }, function (e, t, A) { "use strict"; var r = this && this.__importDefault || function (e) { return e && e.__esModule ? e : { "default": e } }, i = (Object.defineProperty(t, "__esModule", { "value": !0 }), t.hashMd5 = t.decrypt = void 0, r(A(41))), o = r(A(42)), n = r(A(43)); t.decrypt = function (e, t) { var A = ""; try { A = o.default.decrypt(e, t).toString(n.default) } catch (e) { } return A }, t.hashMd5 = function (e) { return i.default(e).toString() } }, function (e, t) { e.exports = o }, function (e, t) { e.exports = n }, function (e, t) { e.exports = s }, function (e, t, A) { "use strict"; function r() { this.logLevel = t.ENUM_LOG_LEVEL.DISABLE } Object.defineProperty(t, "__esModule", { "value": !0 }), t.ZegoLog = t.ENUM_LOG_LEVEL = void 0, t.ENUM_LOG_LEVEL = { "DEBUG": 0, "INFO": 1, "WARN": 2, "ERROR": 3, "REPORT": 99, "DISABLE": 100, "debug": 0, "info": 1, "warn": 2, "error": 3, "report": 99, "disable": 100 }, r.prototype.setLogLevel = function (e) { return void 0 !== (e = t.ENUM_LOG_LEVEL[e]) && (this.logLevel = e, !0) }, r.prototype.debug = function () { for (var e = [], A = 0; A < arguments.length; A++)e[A] = arguments[A]; var r = e.join(" "); this.logLevel !== t.ENUM_LOG_LEVEL.DISABLE && this.logLevel <= t.ENUM_LOG_LEVEL.DEBUG && console.debug(r) }, r.prototype.log = function () { for (var e = [], A = 0; A < arguments.length; A++)e[A] = arguments[A]; var r = e.join(" "); this.logLevel !== t.ENUM_LOG_LEVEL.DISABLE && this.logLevel <= t.ENUM_LOG_LEVEL.INFO && console.log(r) }, r.prototype.info = function () { for (var e = [], A = 0; A < arguments.length; A++)e[A] = arguments[A]; var r = e.join(" "); this.logLevel !== t.ENUM_LOG_LEVEL.DISABLE && this.logLevel <= t.ENUM_LOG_LEVEL.INFO && console.info(r) }, r.prototype.warn = function () { for (var e = [], A = 0; A < arguments.length; A++)e[A] = arguments[A]; var r = e.join(" "); this.logLevel !== t.ENUM_LOG_LEVEL.DISABLE && this.logLevel <= t.ENUM_LOG_LEVEL.WARN && console.warn(r) }, r.prototype.error = function () { for (var e = [], A = 0; A < arguments.length; A++)e[A] = arguments[A]; var r = e.join(" "); this.logLevel !== t.ENUM_LOG_LEVEL.DISABLE && this.logLevel <= t.ENUM_LOG_LEVEL.ERROR && console.error(r) }, t.ZegoLog = r }, function (e, t, A) { "use strict"; function r(e) { this.logger = e, this._log = e } Object.defineProperty(t, "__esModule", { "value": !0 }), t.StateCenter = void 0, r.prototype.isLogin = function () { return !0 }, t.StateCenter = r }, function (e, t, A) { "use strict"; var r = this && this.__read || function (e, t) { var A = "function" == typeof Symbol && e[Symbol.iterator]; if (!A) return e; var r, i, o = A.call(e), n = []; try { for (; (void 0 === t || 0 < t--) && !(r = o.next()).done;)n.push(r.value) } catch (e) { i = { "error": e } } finally { try { r && !r.done && (A = o.return) && A.call(o) } finally { if (i) throw i.error } } return n }, i = this && this.__spread || function () { for (var e = [], t = 0; t < arguments.length; t++)e = e.concat(r(arguments[t])); return e }, o = (Object.defineProperty(t, "__esModule", { "value": !0 }), t.DynamicCode = void 0, A(3)); function s() { this.init() } s.prototype.init = function () { window.dyObj = {} }, s.prototype.runExecution = function (e, t, A) { e = new (Function.bind.apply(Function, i([void 0], e, [A]))); try { e.apply(void 0, i(t)) } catch (e) { o.log.error(e) } }, t.DynamicCode = s }], c = {}, r.m = a, r.c = c, r.d = function (e, t, A) { r.o(e, t) || Object.defineProperty(e, t, { "enumerable": !0, "get": A }) }, r.r = function (e) { "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, { "value": "Module" }), Object.defineProperty(e, "__esModule", { "value": !0 }) }, r.t = function (e, t) { if (1 & t && (e = r(e)), 8 & t) return e; if (4 & t && "object" == (void 0 === e ? "undefined" : u(e)) && e && e.__esModule) return e; var A = Object.create(null); if (r.r(A), Object.defineProperty(A, "default", { "enumerable": !0, "value": e }), 2 & t && "string" != typeof e) for (var i in e) r.d(A, i, function (t) { return e[t] }.bind(null, i)); return A }, r.n = function (e) { var t = e && e.__esModule ? function () { return e.default } : function () { return e }; return r.d(t, "a", t), t }, r.o = function (e, t) { return Object.prototype.hasOwnProperty.call(e, t) }, r.p = "", r(r.s = 13)) }, function (e, t, A) { e.exports = A(2).enc.Hex }, function (e, A) { e.exports = t }, function (e, t, A) { var r, i, o, n, s; e.exports = (e = A(2), A(19), A(20), r = (o = (A = e).lib).Base, i = o.WordArray, n = (o = A.algo).MD5, s = o.EvpKDF = r.extend({ "cfg": r.extend({ "keySize": 4, "hasher": n, "iterations": 1 }), "init": function init(e) { this.cfg = this.cfg.extend(e) }, "compute": function compute(e, t) { for (var A, r = this.cfg, o = r.hasher.create(), n = i.create(), s = n.words, a = r.keySize, c = r.iterations; s.length < a;) { A && o.update(A), A = o.update(e).finalize(t), o.reset(); for (var g = 1; g < c; g++)A = o.finalize(A), o.reset(); n.concat(A) } return n.sigBytes = 4 * a, n } }), A.EvpKDF = function (e, t, A) { return s.create(A).compute(e, t) }, e.EvpKDF) }, function (e, t, A) { function r(e) { var t; return (n[e] || (t = n[e] = { "i": e, "l": !1, "exports": {} }, o[e].call(t.exports, t, t.exports, r), t.l = !0, t)).exports } var i, o, n; e.exports = (i = A(11), n = {}, r.m = o = [function (e, t, A) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.ZEGO_SETTING_ACTION = void 0, (t = t.ZEGO_SETTING_ACTION || (t.ZEGO_SETTING_ACTION = {})).CONSTRUCTOR = "zs.0", t.SETTING_INIT = "zs.ii.0", t.SETTING_FETCH_SETTING = "zs.fs.0", t.SETTING__FETCH_SETTING = "zs.fs.1", t.SETTING_GET_CLOUD_SETTING = "zs.gcs.0", t.SETTING_POLLING_SETTING = "zs.ps.0", t.SETTINGCACHEHANDLER_GET_CACHE_SETTING = "zs.sch.gcs.0", t.SETTINGCACHEHANDLER_STORE_SETTING = "zs.sch.ss.0", t.SETTINGFETCHHANDLER_FETCHSETTING = "zs.sfh.fs.0" }, function (e, t, A) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.errorList = void 0, t.errorList = { "NOT_INIT": { "code": 1001, "msg": "not init" }, "FILE_REQUEST_FAIL": { "code": 1002, "msg": "fetch request fail" }, "INFLATE_DATA_FAIL": { "code": 1003, "msg": "inflate fail" }, "MULTI_FILE_NOT_EXIST": { "code": 1004, "msg": "get multi file fail" }, "AUTH_FAIL": { "code": 1005, "msg": "auth failed" } } }, function (e, t, A) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.generateUUID = t.checkValidNumber = t.analyzeKey = t.getCurrentTime = t.getBrowser = void 0, t.getBrowser = function () { var e = window.navigator.userAgent, t = null != window.ActiveXObject && -1 != e.indexOf("MSIE"), A = -1 != e.indexOf("Firefox"), r = null != window.opr, i = e.indexOf("Chrome") && window.chrome, o = -1 != e.indexOf("Safari") && -1 != e.indexOf("Version"); return e = e.toLowerCase().match(/MicroMessenger/i) && "micromessenger" === e.toLowerCase().match(/MicroMessenger/i)[0], t ? "IE" : A ? "FIREFOX" : r ? "OPERA" : i ? "CHROME" : o ? "SAFARI" : e ? "WEIXIN" : "UNKOWN" }; var r = ["00", "01", "02", "03", "04", "05", "06", "07", "08", "09"]; t.getCurrentTime = function () { var e = new Date; return [e.getFullYear() + "/", (r[e.getMonth() + 1] || e.getMonth() + 1) + "/", (r[e.getDate()] || e.getDate()) + " ", (r[e.getHours()] || e.getHours()) + ":", (r[e.getMinutes()] || e.getMinutes()) + ":", r[e.getSeconds()] || e.getSeconds(), "." + e.getTime() % 1e3].join("") }, t.analyzeKey = function (e) { return e = e.split("_"), { "level": Number(e[0]), "timestamp": e[1], "seq": e[2] } }, t.checkValidNumber = function (e, t, A) { return t = t || 1, A = A || 1e4, "number" == typeof e && e % 1 == 0 && t <= e && e <= A }, t.generateUUID = function (e) { var t, A; return 0 === (e = void 0 === e ? 0 : e) ? A = localStorage.getItem("z_deviceID") : wx.getStorageSync("z_deviceID"), A || (t = (new Date).getTime(), A = "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function (e) { var A = (t + 16 * Math.random()) % 16 | 0; return t = Math.floor(t / 16), ("x" == e ? A : 3 & A | 8).toString(36) }), 0 === e ? localStorage.setItem("z_deviceID", A) : wx.setStorageSync("z_deviceID", A)), A } }, function (e, t, A) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.ZegoSetting = void 0; var r = A(4); Object.defineProperty(t, "ZegoSetting", { "enumerable": !0, "get": function get() { return r.ZegoSetting } }) }, function (e, t, A) { "use strict"; var r = this && this.__assign || function () { return (r = Object.assign || function (e) { for (var t, A = 1, r = arguments.length; A < r; A++)for (var i in t = arguments[A]) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]); return e }).apply(this, arguments) }, i = this && this.__awaiter || function (e, t, A, r) { return new (A = A || Promise)(function (i, o) { function s(e) { try { c(r.next(e)) } catch (e) { o(e) } } function a(e) { try { c(r.throw(e)) } catch (e) { o(e) } } function c(e) { var t; e.done ? i(e.value) : ((t = e.value) instanceof A ? t : new A(function (e) { e(t) })).then(s, a) } c((r = r.apply(e, t || [])).next()) }) }, o = this && this.__generator || function (e, t) { var A, r, i, o = { "label": 0, "sent": function sent() { if (1 & i[0]) throw i[1]; return i[1] }, "trys": [], "ops": [] }, n = { "next": a(0), "throw": a(1), "return": a(2) }; return "function" == typeof Symbol && (n[Symbol.iterator] = function () { return this }), n; function a(n) { return function (s) { var a = [n, s]; if (A) throw new TypeError("Generator is already executing."); for (; o;)try { if (A = 1, r && (i = 2 & a[0] ? r.return : a[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, a[1])).done) return i; switch (r = 0, (a = i ? [2 & a[0], i.value] : a)[0]) { case 0: case 1: i = a; break; case 4: return o.label++, { "value": a[1], "done": !1 }; case 5: o.label++, r = a[1], a = [0]; continue; case 7: a = o.ops.pop(), o.trys.pop(); continue; default: if (!(i = 0 < (i = o.trys).length && i[i.length - 1]) && (6 === a[0] || 2 === a[0])) { o = 0; continue } if (3 === a[0] && (!i || a[1] > i[0] && a[1] < i[3])) o.label = a[1]; else if (6 === a[0] && o.label < i[1]) o.label = i[1], i = a; else { if (!(i && o.label < i[2])) { i[2] && o.ops.pop(), o.trys.pop(); continue } o.label = i[2], o.ops.push(a) } }a = t.call(e, o) } catch (s) { a = [6, s], r = 0 } finally { A = i = 0 } if (5 & a[0]) throw a[1]; return { "value": a[0] ? a[1] : void 0, "done": !0 } } } }, n = (Object.defineProperty(t, "__esModule", { "value": !0 }), t.ZegoSetting = void 0, A(5)), s = A(6), a = A(10), c = A(0), g = A(12), u = A(1), l = A(2); function d() { this.fileList = [], this.publicEnvVariable = {}, this.proEnvVariable = {}, this.pollingTimer = null, this.pollingInterval = 300, this.inited = !1, this.checkFailCount = 0, this.checkFailed = !1, this.log = new n.ZegoLog } Object.defineProperty(d.prototype, "envVariable", { "get": function get() { return Object.assign({}, this.publicEnvVariable, this.proEnvVariable) }, "enumerable": !1, "configurable": !0 }), d.prototype.init = function (e) { var t = this; return e.pollingFreq && !l.checkValidNumber(e.pollingFreq) ? (this.log.error(c.ZEGO_SETTING_ACTION.SETTING_INIT + " pollingFreq must be integer number"), !1) : (this.options = Object.assign({}, g.INIT_CONFIG, e), this.getPublicEnvVariable(), this.settingFetchHandler = new a.SettingFetchHandler(this.options, this.log), this.settingFetchHandler.setDataReport(this.options.reportNotify), e = Math.round(60 * Math.random()), this.log.info(c.ZEGO_SETTING_ACTION.SETTING_INIT + " delay " + e), this.delayTimer && (clearTimeout(this.delayTimer), this.delayTimer = null), this.options.pollingFreq && 60 <= this.options.pollingFreq && (this.pollingInterval = this.options.pollingFreq), this.delayTimer = setTimeout(function () { t.pollingSetting(1e3 * t.pollingInterval) }, 1e3 * e), this.settingCacheHandler = new s.SettingCacheHandler("setting_" + (this.options.online ? "online_" : "test_") + this.options.product + "_" + this.options.appID, this.log, this.options.env), this.refreshAuthCheck(), this.inited = !0) }, d.prototype.uninit = function () { this.pollingTimer && (clearTimeout(this.pollingTimer), this.pollingTimer = null) }, d.prototype.setEnvVariable = function (e, t) { this.proEnvVariable[e] = String(t) }, d.prototype.getEnvVariable = function (e) { return this.envVariable[e] }, d.prototype.setEnvVariables = function (e) { var t = this; Object.keys(e).forEach(function (A) { "string" != typeof e[A] && "number" != typeof e[A] && t.log.error("zs.sev env " + A + " type error"), t.proEnvVariable[A] = String(e[A]) }) }, d.prototype.getEnvVariables = function () { return this.envVariable }, d.prototype.enablePolling = function (e, t) { var A = this; t ? t.forEach(function (t) { var r = A.fileList.find(function (e) { return e.fileName === t }); r && (r.needPolling = e) }) : this.fileList.forEach(function (t) { return t.needPolling = e }) }, d.prototype.setToken = function (e) { this.token !== e && this.refreshAuthCheck(), this.token = e }, d.prototype.setUserID = function (e) { this.userID !== e && this.refreshAuthCheck(), this.userID = e }, d.prototype.getSettingCache = function (e) { return i(this, void 0, void 0, function () { var t, A, r; return o(this, function (i) { switch (i.label) { case 0: return this.inited ? (t = this.fileList.find(function (t) { return t.fileName === e })) ? [2, Promise.resolve({ "setting": t.setting, "versions": t.versions })] : [3, 1] : [2, Promise.reject(u.errorList.NOT_INIT)]; case 1: return A = this._getFileName(e), [4, this.settingCacheHandler.getCacheSetting(A)]; case 2: return (A = i.sent()) && (this.fileList.find(function (t) { return t.fileName === e }) || this.fileList.push({ "fileName": e, "fetchedTime": 0, "needPolling": !1, "setting": A.setting, "versions": A.versions }), r = { "setting": A.setting, "versions": A.versions }), [2, Promise.resolve(r)] } }) }) }, d.prototype.fetchSetting = function (e, t, A) { return void 0 === t && (t = {}), void 0 === A && (A = !0), this.log.info(c.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING + " call " + e), this.inited ? (this.activePolling(), 0 < Object.keys(t).length ? (this.log.info(c.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING + " get file with params"), this._getCloudSetting(e, r(r({}, this.envVariable), t))) : (t = this.fileList.find(function (t) { return t.fileName === e })) ? (this.log.info(c.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING + " file exist"), (new Date).getTime() - t.fetchedTime < 1e3 * this.pollingInterval ? (this.log.info(c.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING + " fetch time interval in freq"), t.needPolling = A, Promise.resolve({ "setting": t.setting, "versions": t.versions })) : this._fetchSetting(e, t, A)) : (this.log.info(c.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING + " file not found"), this._fetchSetting(e, t, A))) : Promise.reject(u.errorList.NOT_INIT) }, d.prototype.fetchMultiSetting = function (e, t, A) { var n = this; return void 0 === t && (t = {}), void 0 === A && (A = !0), this.log.info(c.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING + " call"), this.inited ? (this.activePolling(), 0 < Object.keys(t).length ? (this.log.info(c.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING + " get file with params"), this._getCloudSetting(e, r(r({}, this.envVariable), t))) : new Promise(function (t, r) { var s = {}, a = []; if (e.forEach(function (e) { return i(n, void 0, void 0, function () { var t; return o(this, function (A) { return (t = this.fileList.find(function (t) { return t.fileName === e })) && (new Date).getTime() - t.fetchedTime < 1e3 * this.pollingInterval ? (this.log.info(c.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING + " fetch time interval in freq"), s[e] = { "setting": t.setting, "versions": t.versions }) : a.push(e), [2] }) }) }), !(0 < a.length)) return t(s); n._getCloudSetting(a, n.envVariable).then(function (e) { return n.handleFetchFiles(e, A), Object.assign(s, e), t(s) }).catch(function (e) { a.forEach(function (e) { return i(n, void 0, void 0, function () { var t; return o(this, function (r) { switch (r.label) { case 0: return (t = this.fileList.find(function (t) { return t.fileName == e })) ? t.fetchedTime = (new Date).getTime() : this.fileList.find(function (t) { return t.fileName === e }) || this.fileList.push({ "fileName": e, "fetchedTime": (new Date).getTime(), "needPolling": A, "setting": {}, "versions": {} }), [4, this.settingCacheHandler.getCacheSetting(e)]; case 1: return t = r.sent(), s[e] = { "setting": t.setting, "versions": t.versions }, [2] } }) }) }), 0 < Object.keys(s).length ? t(s) : r(e) }) })) : (this.log.info(c.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING + " not init"), Promise.reject(u.errorList.NOT_INIT)) }, d.prototype.setOptions = function (e) { e && "boolean" == typeof e.unify && (this.options.unify = e.unify, this.settingFetchHandler.setOptions(this.options)) }, d.prototype.setLog = function (e) { this.log = e }, d.prototype._getCloudSetting = function (e, t) { var A = this; return new Promise(function (r, n) { return i(A, void 0, void 0, function () { var A, i, s, a, g; return o(this, function (o) { switch (o.label) { case 0: return o.trys.push([0, 2, , 3]), this.checkFailed ? (this.log.warn(c.ZEGO_SETTING_ACTION.SETTING_GET_CLOUD_SETTING + " check fail"), n(u.errorList.AUTH_FAIL), [2]) : (s = e instanceof Array, [4, this.settingFetchHandler.fetchSetting(s ? e : [e], t, this.token, this.userID, !1)]); case 1: return a = o.sent(), A = a.data, a = a.polling_interval, this.checkFailCount = 0, this.log.info(c.ZEGO_SETTING_ACTION.SETTING_GET_CLOUD_SETTING + " suc"), "number" == typeof a && 5 <= a && this.pollingInterval !== 60 * a && (this.log.warn(c.ZEGO_SETTING_ACTION.SETTING_GET_CLOUD_SETTING + " polling interval change"), this.pollingInterval = 60 * a, this.uninit(), this.activePolling()), s ? (i = {}, e.forEach(function (e) { var t; 0 == (null == (t = A[e]) ? void 0 : t.code) && void 0 !== (null == (t = A[e]) ? void 0 : t.data) && (i[e] = { "setting": null == (t = A[e]) ? void 0 : t.data, "versions": null == (e = A[e]) ? void 0 : e.versions }) }), 0 < Object.keys(i).length ? r(i) : n(u.errorList.MULTI_FILE_NOT_EXIST)) : 0 === (null == (s = A[e]) ? void 0 : s.code) && null != (a = A[e]) && a.data ? r({ "setting": null == (a = A[e]) ? void 0 : a.data, "versions": null == (a = A[e]) ? void 0 : a.versions }) : n({ "code": null == (g = A[e]) ? void 0 : g.code, "msg": null == (g = A[e]) ? void 0 : g.message }), [3, 3]; case 2: return g = o.sent(), this.log.error(c.ZEGO_SETTING_ACTION.SETTING_GET_CLOUD_SETTING + " fail " + JSON.stringify(g)), 21002 === (null == g ? void 0 : g.code) && (this.checkFailCount += 1), 2 <= this.checkFailCount && (this.checkFailed = !0), n(g), [3, 3]; case 3: return [2] } }) }) }) }, d.prototype.handleFetchFiles = function (e, t) { var A = this; Object.keys(e).forEach(function (r) { var i = A.fileList.find(function (e) { return e.fileName == r }); i ? (i.fetchedTime = (new Date).getTime(), i.setting = e[r].setting, i.versions = e[r].versions, i.needPolling = t) : A.fileList.find(function (e) { return e.fileName === r }) || A.fileList.push({ "fileName": r, "fetchedTime": (new Date).getTime(), "needPolling": t, "setting": e[r].setting, "versions": e[r].versions }), i = A._getFileName(r), A.settingCacheHandler.storeSetting(i, e[r]) }) }, d.prototype._fetchSetting = function (e, t, A) { var r = this; return new Promise(function (n, s) { r.log.info(c.ZEGO_SETTING_ACTION.SETTING__FETCH_SETTING + " call"), r._getCloudSetting(e, r.envVariable).then(function (i) { t ? (t.fetchedTime = (new Date).getTime(), t.setting = i.setting, t.versions = i.versions, t.needPolling = A) : r.fileList.find(function (t) { return t.fileName === e }) || r.fileList.push({ "fileName": e, "fetchedTime": (new Date).getTime(), "needPolling": A, "setting": i.setting, "versions": i.versions }); var o = r._getFileName(e); r.settingCacheHandler.storeSetting(o, i), n(i), r.log.info(c.ZEGO_SETTING_ACTION.SETTING__FETCH_SETTING + " call suc") }).catch(function (a) { return i(r, void 0, void 0, function () { var r; return o(this, function (i) { switch (i.label) { case 0: t ? t.fetchedTime = (new Date).getTime() : this.fileList.find(function (t) { return t.fileName === e }) || this.fileList.push({ "fileName": e, "fetchedTime": (new Date).getTime(), "needPolling": A, "setting": {}, "versions": {} }), r = this._getFileName(e), i.label = 1; case 1: return i.trys.push([1, 3, , 4]), [4, this.settingCacheHandler.getCacheSetting(r)]; case 2: return r = i.sent(), n(r), [3, 4]; case 3: return i.sent(), s(a), [3, 4]; case 4: return this.log.info(c.ZEGO_SETTING_ACTION.SETTING__FETCH_SETTING + " setting not contain or fetch file fail"), [2] } }) }) }) }) }, d.prototype.getPublicEnvVariable = function () { var e; 0 == this.options.env ? (this.publicEnvVariable.userAgent = navigator.userAgent, this.publicEnvVariable.platform = navigator.platform, this.publicEnvVariable.browser = l.getBrowser(), this.publicEnvVariable.deviceid = l.generateUUID()) : 1 == this.options.env && (e = wx.getSystemInfoSync(), this.publicEnvVariable.brand = e.brand, this.publicEnvVariable.model = e.model, this.publicEnvVariable.system = e.system, this.publicEnvVariable.platform = e.platform, this.publicEnvVariable.wechatVersion = e.version, this.publicEnvVariable.wechatSDKVersion = e.SDKVersion, this.publicEnvVariable.deviceid = l.generateUUID(this.options.env)) }, d.prototype.pollingSetting = function (e) { return i(this, void 0, void 0, function () { var t, A, r, n, s = this; return o(this, function (a) { switch (a.label) { case 0: return this.log.info(c.ZEGO_SETTING_ACTION.SETTING_POLLING_SETTING + " call " + e), t = [], this.fileList.forEach(function (e) { e.fileName, e.needPolling && t.push(e.fileName) }), A = e, this.checkFailed ? (this.log.warn(c.ZEGO_SETTING_ACTION.SETTING_GET_CLOUD_SETTING + " has checked fail"), [3, 7]) : [3, 1]; case 1: if (!(0 < t.length)) return [3, 6]; a.label = 2; case 2: return a.trys.push([2, 4, , 5]), [4, this.settingFetchHandler.fetchSetting(t, this.envVariable, this.token, this.userID)]; case 3: return n = a.sent(), r = n.data, n = n.polling_interval, this.log.info(c.ZEGO_SETTING_ACTION.SETTING_POLLING_SETTING + " fetch suc"), this.checkFailCount = 0, "number" == typeof n && 5 <= n && this.pollingInterval !== 60 * n && (this.log.warn(c.ZEGO_SETTING_ACTION.SETTING_POLLING_SETTING + " polling interval change"), this.pollingInterval = 60 * n, A = 1e3 * this.pollingInterval), this.fileList.forEach(function (e) { return i(s, void 0, void 0, function () { var t, A, i, n; return o(this, function (o) { switch (o.label) { case 0: return e.fetchedTime = (new Date).getTime(), t = this._getFileName(e.fileName), r[e.fileName] && 0 === r[e.fileName].code && r[e.fileName].data ? (A = JSON.stringify(r[e.fileName].data), i = JSON.stringify(e.setting), n = { "setting": r[e.fileName].data, "versions": null == (n = r[e.fileName]) ? void 0 : n.versions, "code": null == (n = r[e.fileName]) ? void 0 : n.code, "message": null == (n = r[e.fileName]) ? void 0 : n.message }, i !== A && (this.log.info(c.ZEGO_SETTING_ACTION.SETTING_POLLING_SETTING + " " + e.fileName + " setting changed"), e.setting = n.setting, e.versions = n.versions, this.options.pollingNotify(e.fileName, n)), [4, this.settingCacheHandler.getCacheSetting(t)]) : [3, 2]; case 1: i = o.sent(), A = JSON.stringify(i), i = JSON.stringify(n), A !== i && this.settingCacheHandler.storeSetting(t, n), o.label = 2; case 2: return [2] } }) }) }), [3, 5]; case 4: return n = a.sent(), this.log.error(c.ZEGO_SETTING_ACTION.SETTING_POLLING_SETTING + " fetch fail " + JSON.stringify(n)), 21002 === (null == n ? void 0 : n.code) && (this.checkFailCount += 1), 2 <= this.checkFailCount && (this.checkFailed = !0), [3, 5]; case 5: return [3, 7]; case 6: this.log.info(c.ZEGO_SETTING_ACTION.SETTING_POLLING_SETTING + " polling no file"), a.label = 7; case 7: return this.pollingTimer && clearTimeout(this.pollingTimer), this.pollingTimer = setTimeout(function () { s.pollingSetting(A) }, A), [2] } }) }) }, d.prototype._getFileName = function (e) { return e }, d.prototype.activePolling = function () { this.pollingTimer || this.pollingSetting(1e3 * this.pollingInterval) }, d.prototype.refreshAuthCheck = function () { this.checkFailCount = 0, this.checkFailed = !1 }, t.ZegoSetting = A = d }, function (e, t, A) { "use strict"; function r() { } Object.defineProperty(t, "__esModule", { "value": !0 }), t.ZegoLog = void 0, r.prototype.log = function () { for (var e = [], t = 0; t < arguments.length; t++)e[t] = arguments[t]; e.join(" ") }, r.prototype.debug = function () { for (var e = [], t = 0; t < arguments.length; t++)e[t] = arguments[t]; e.join(" ") }, r.prototype.info = function () { for (var e = [], t = 0; t < arguments.length; t++)e[t] = arguments[t]; e.join(" ") }, r.prototype.warn = function () { for (var e = [], t = 0; t < arguments.length; t++)e[t] = arguments[t]; e.join(" ") }, r.prototype.error = function () { for (var e = [], t = 0; t < arguments.length; t++)e[t] = arguments[t]; e.join(" ") }, t.ZegoLog = r }, function (e, t, A) { "use strict"; var r = this && this.__awaiter || function (e, t, A, r) { return new (A = A || Promise)(function (i, o) { function s(e) { try { c(r.next(e)) } catch (e) { o(e) } } function a(e) { try { c(r.throw(e)) } catch (e) { o(e) } } function c(e) { var t; e.done ? i(e.value) : ((t = e.value) instanceof A ? t : new A(function (e) { e(t) })).then(s, a) } c((r = r.apply(e, t || [])).next()) }) }, i = this && this.__generator || function (e, t) { var A, r, i, o = { "label": 0, "sent": function sent() { if (1 & i[0]) throw i[1]; return i[1] }, "trys": [], "ops": [] }, n = { "next": a(0), "throw": a(1), "return": a(2) }; return "function" == typeof Symbol && (n[Symbol.iterator] = function () { return this }), n; function a(n) { return function (s) { var a = [n, s]; if (A) throw new TypeError("Generator is already executing."); for (; o;)try { if (A = 1, r && (i = 2 & a[0] ? r.return : a[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, a[1])).done) return i; switch (r = 0, (a = i ? [2 & a[0], i.value] : a)[0]) { case 0: case 1: i = a; break; case 4: return o.label++, { "value": a[1], "done": !1 }; case 5: o.label++, r = a[1], a = [0]; continue; case 7: a = o.ops.pop(), o.trys.pop(); continue; default: if (!(i = 0 < (i = o.trys).length && i[i.length - 1]) && (6 === a[0] || 2 === a[0])) { o = 0; continue } if (3 === a[0] && (!i || a[1] > i[0] && a[1] < i[3])) o.label = a[1]; else if (6 === a[0] && o.label < i[1]) o.label = i[1], i = a; else { if (!(i && o.label < i[2])) { i[2] && o.ops.pop(), o.trys.pop(); continue } o.label = i[2], o.ops.push(a) } }a = t.call(e, o) } catch (s) { a = [6, s], r = 0 } finally { A = i = 0 } if (5 & a[0]) throw a[1]; return { "value": a[0] ? a[1] : void 0, "done": !0 } } } }, o = (Object.defineProperty(t, "__esModule", { "value": !0 }), t.SettingCacheHandler = void 0, A(0)), n = A(7); function a(e, t, A) { void 0 === A && (A = 0), this.storeName = e, this.log = t, this.store = n.createZegoStore(e, A) } a.prototype.getCacheSetting = function (e) { return r(this, void 0, void 0, function () { return i(this, function (t) { switch (t.label) { case 0: return this.log.info(o.ZEGO_SETTING_ACTION.SETTINGCACHEHANDLER_GET_CACHE_SETTING + " call"), [4, this.store.getItem(e)]; case 1: return [2, t.sent() || ""] } }) }) }, a.prototype.storeSetting = function (e, t) { return r(this, void 0, void 0, function () { return i(this, function (A) { switch (A.label) { case 0: return this.log.info(o.ZEGO_SETTING_ACTION.SETTINGCACHEHANDLER_STORE_SETTING + " call"), [4, this.store.setItem(e, t)]; case 1: return A.sent(), [2] } }) }) }, t.SettingCacheHandler = A = a }, function (e, t, A) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.createZegoStore = t.ZegoWechatMiniStore = void 0; var r = A(8), i = A(9), o = (s.prototype.getItem = function (e) { var t = this; return new Promise(function (A, r) { try { A(wx.getStorageSync(t.keyPrefix + e)) } catch (A) { r(A) } }) }, s.prototype.setItem = function (e, t) { var A = this; return new Promise(function (r, i) { try { wx.setStorageSync(A.keyPrefix + e, t), r() } catch (r) { i(r) } }) }, s.prototype.removeItem = function (e) { var t = this; return new Promise(function (A, r) { try { A(wx.removeStorageSync(t.keyPrefix + e)) } catch (A) { r(A) } }) }, s.prototype.clear = function () { return new Promise(function (e, t) { try { wx.clearStorageSync(), e() } catch (e) { t(e) } }) }, s.prototype.keys = function () { var e = this; return new Promise(function (t, A) { try { var r = wx.getStorageInfoSync().keys, i = []; r.forEach(function (t) { 0 == t.indexOf(e.keyPrefix) && i.push(t.replace(e.keyPrefix, "")) }), i.sort(), t(i) } catch (t) { A(t) } }) }, s); function s(e) { this.storeName = e, this.keyPrefix = e + "/", this.storeName } t.ZegoWechatMiniStore = o, t.createZegoStore = function (e, t) { return t === i.ZEGO_ENV.BROWSER ? r.createInstance({ "name": e }) : new o(e) } }, function (e, t) { e.exports = i }, function (e, t, A) { "use strict"; var r; Object.defineProperty(t, "__esModule", { "value": !0 }), t.SOCKET_DISCONNECT = t.ENUM_REMOTE_TYPE = t.ZEGO_BROWSER_TYPE = t.ZEGO_ENV = t.PROTO_VERSION = void 0, t.PROTO_VERSION = "1.0.6", (r = t.ZEGO_ENV || (t.ZEGO_ENV = {}))[r.BROWSER = 0] = "BROWSER", r[r.WEIXINMINI = 1] = "WEIXINMINI", (r = t.ZEGO_BROWSER_TYPE || (t.ZEGO_BROWSER_TYPE = {}))[r.IE = 0] = "IE", r[r.FIREFOX = 1] = "FIREFOX", r[r.CHROME = 2] = "CHROME", r[r.SAFARI = 3] = "SAFARI", r[r.OPERA = 4] = "OPERA", r[r.WEIXIN = 5] = "WEIXIN", r[r.WEIXINMINI = 6] = "WEIXINMINI", r[r.UNKOWN = 7] = "UNKOWN", (r = t.ENUM_REMOTE_TYPE || (t.ENUM_REMOTE_TYPE = {}))[r.DISABLE = 0] = "DISABLE", r[r.WEBSOCKET = 1] = "WEBSOCKET", r[r.HTTPS = 2] = "HTTPS", t.SOCKET_DISCONNECT = -1 }, function (e, t, A) { "use strict"; var r = this && this.__assign || function () { return (r = Object.assign || function (e) { for (var t, A = 1, r = arguments.length; A < r; A++)for (var i in t = arguments[A]) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]); return e }).apply(this, arguments) }; Object.defineProperty(t, "__esModule", { "value": !0 }), t.SettingFetchHandler = void 0; var i, o, n = A(0), s = A(1), a = A(11), c = A(2); function l(e, t) { this.options = e, this.log = t, this.seq = 0, this.userID = "" } A = i = { "SERVICE_ClOUD_SETTING": 10, "10": "SERVICE_ClOUD_SETTING" }, A = o = { "METHOD_UNSET": 0, "0": "METHOD_UNSET", "METHOD_GET": 1, "1": "METHOD_GET", "METHOD_POST": 2, "2": "METHOD_POST" }, l.prototype.setOptions = function (e) { this.options = e }, l.prototype.setDataReport = function (e) { this.reportFunc = e }, l.prototype.setUserID = function (e) { this.userID = e }, l.prototype.fetchSetting = function (e, t, A, i, o) { var s = this; return void 0 === o && (o = !0), new Promise(function (g, u) { var l, h = { "product": s.options.product, "files": e, "param": r(r({}, t), { "deviceid": void 0 }), "appid": s.options.appID, "token": A, "id_name": i, "timestamp": (new Date).getTime(), "biztype": 0, "deviceid": t.deviceid || c.generateUUID(s.options.env), "compress": !1, "mode": s.options.online ? "online" : "test" }, d = h.param, C = { "appid": h.appid, "token": h.token, "id_name": h.id_name, "deviceid": h.deviceid }, I = s.seq++; s.reportFunc && s.reportFunc(I, "request_start", { "polling": o }), null != (l = s.options) && l.unify && s.options.connection ? s.sendCloudRequest(i, h, "/cloud-setting/get", function (e) { var t, A = e.code, r = (e.msg, e.data), i = e.polling_interval; e = e.reportData, s.log.info(n.ZEGO_SETTING_ACTION.SETTINGFETCHHANDLER_FETCHSETTING + " unify " + A), r && (t = [], Object.keys(r).forEach(function (e) { var A; t.push({ "name": e, "code": r[e].code, "message": null == (A = r[e]) ? void 0 : A.message, "versions": JSON.stringify(null == (A = r[e]) ? void 0 : A.versions), "content": JSON.stringify(null == (e = r[e]) ? void 0 : e.data) }) })), s.reportFunc && s.reportFunc(I, "request_end", { "code": A, "reportData": e, "params": C, "requestKV": d, "files": t, "polling": o }), g({ "data": r, "polling_interval": i }) }, function (e) { var t = e.code, A = e.msg; e.data, e = e.reportData, s.log.warn(n.ZEGO_SETTING_ACTION.SETTINGFETCHHANDLER_FETCHSETTING + " unify " + t), s.reportFunc && s.reportFunc(I, "request_end", { "code": t, "params": C, "requestKV": d, "reportData": e, "polling": o }), u({ "code": t, "msg": A }) }) : a.fetch(s.options.urls, h, s.options.env || 0).then(function (e) { var t, A = e.code, r = (e.msg, e.data), i = e.polling_interval; e = e.reportData, s.log.info(n.ZEGO_SETTING_ACTION.SETTINGFETCHHANDLER_FETCHSETTING + " " + A), r && (t = [], Object.keys(r).forEach(function (e) { var A; t.push({ "name": e, "code": r[e].code, "message": null == (A = r[e]) ? void 0 : A.message, "versions": JSON.stringify(null == (A = r[e]) ? void 0 : A.versions), "content": JSON.stringify(null == (e = r[e]) ? void 0 : e.data) }) })), s.reportFunc && s.reportFunc(I, "request_end", { "code": A, "reportData": e, "params": C, "requestKV": d, "files": t, "polling": o }), g({ "data": r, "polling_interval": i }) }).catch(function (e) { var t = e.code, A = e.msg; e.data, e = e.reportData, s.log.warn(n.ZEGO_SETTING_ACTION.SETTINGFETCHHANDLER_FETCHSETTING + " " + t), s.reportFunc && s.reportFunc(I, "request_end", { "code": t, "params": C, "requestKV": d, "reportData": e, "polling": o }), u({ "code": t, "msg": A }) }) }) }, l.prototype.sendCloudRequest = function (e, t, A, n, a, c, g) { var u, l = this, h = (void 0 === c && (c = 3), void 0 === g && (g = []), (new Date).getTime()); null != (u = this.options.connection) && u.startHttpRequest({ "service": i.SERVICE_ClOUD_SETTING, "body": t, "ack": !1, "idName": e, "method_no": o.METHOD_POST, "location": A }, function (i) { var o, u, d, C, I; 200 === (null == i ? void 0 : i.status_code) ? (o = (C = JSON.parse(i.body)).code, I = C.message, u = C.data, d = C.polling_interval, C = (new Date).getTime() - h, g.push({ "timestamp": h, "url": A, "error": o, "duration": C }), 0 === o ? n({ "code": o, "msg": I, "data": u, "polling_interval": d, "reportData": g }) : a({ "code": o, "msg": I, "reportData": g })) : (I = (new Date).getTime() - h, g.push({ "timestamp": h, "url": A, "error": null == i ? void 0 : i.status_code, "duration": I }), 0 < c ? (c--, l.sendCloudRequest(e, t, A, n, a, c, g)) : a(r(r({}, s.errorList.FILE_REQUEST_FAIL), { "reportData": g }))) }, function (i) { var o = (new Date).getTime() - h; g.push({ "timestamp": h, "url": A, "error": i.code, "duration": o }), 0 < c ? (c--, l.sendCloudRequest(e, t, A, n, a, c, g)) : a(r(r({}, s.errorList.FILE_REQUEST_FAIL), { "reportData": g })) }, null, { "timeout": 4e3 }) }, t.SettingFetchHandler = A = l }, function (t, A, r) { "use strict"; var i = this && this.__assign || function () { return (i = Object.assign || function (e) { for (var t, A = 1, r = arguments.length; A < r; A++)for (var i in t = arguments[A]) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]); return e }).apply(this, arguments) }, o = (Object.defineProperty(A, "__esModule", { "value": !0 }), A.fetch = void 0, r(1)); A.fetch = function e(t, A, r, n, s, a) { return void 0 === n && (n = 5), void 0 === s && (s = 0), void 0 === a && (a = []), new Promise(function (c, g) { s = s || (new Date).getTime(); var u, l, h, d = (new Date).getTime(); 0 === r ? (u = new XMLHttpRequest, l = t[(n + 1) % 2] || t[0], u.open("post", l), 1 == A.compress && (u.responseType = "arraybuffer"), u.ontimeout = function () { }, u.onreadystatechange = function () { var h, C, I, E, p; 4 == u.readyState && (200 <= u.status && u.status < 300 || 304 == u.status ? (C = void 0, 1 != A.compress && (C = u.responseText), p = (new Date).getTime() - d, h = (I = JSON.parse(C)).code, E = I.message, C = I.data, I = I.polling_interval, a.push({ "timestamp": d, "url": l, "error": h, "duration": p }), 0 === h ? c({ "code": h, "msg": E, "data": C, "polling_interval": I, "reportData": a }) : g({ "code": h, "msg": E, "reportData": a })) : (E = (new Date).getTime() - d, a.push({ "timestamp": d, "url": l, "error": u.status, "duration": E }), p = (new Date).getTime() - s, 0 < n && p < 8e3 ? e(t, A, r, --n, s, a).then(function (e) { c(e) }).catch(function (e) { g(e) }) : g(i(i({}, o.errorList.FILE_REQUEST_FAIL), { "reportData": a })))) }, u.timeout = 8e3, u.send(JSON.stringify(A))) : (h = t[(n + 1) % 2] || t[0], wx.request({ "url": h, "data": A, "method": "POST", "success": function success(u) { var l = (E = u.data).code, C = E.message, I = E.data, E = E.polling_interval; void 0 !== l ? 0 === l ? c({ "code": l, "msg": C, "data": I, "polling_interval": E, "reportData": a }) : g({ "code": l, "msg": C, "reportData": a }) : (C = (new Date).getTime() - d, a.push({ "timestamp": d, "url": h, "error": o.errorList.FILE_REQUEST_FAIL.code, "msg": u.data, "duration": C }), 0 < n ? e(t, A, r, --n, s, a).then(function (e) { c(e) }).catch(function (e) { g(e) }) : g(i(i({}, o.errorList.FILE_REQUEST_FAIL), { "reportData": a }))) }, "fail": function fail(u) { var l = (new Date).getTime() - d; a.push({ "timestamp": d, "url": h, "error": o.errorList.FILE_REQUEST_FAIL.code, "msg": u.errMsg, "duration": l }), 0 < n ? e(t, A, r, --n, s, a).then(function (e) { c(e) }).catch(function (e) { g(e) }) : g(i(i({}, o.errorList.FILE_REQUEST_FAIL), { "reportData": a })) } })) }) } }, function (e, t, A) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.INIT_CONFIG = void 0, t.INIT_CONFIG = { "env": 0 } }], r.c = n, r.d = function (e, t, A) { r.o(e, t) || Object.defineProperty(e, t, { "enumerable": !0, "get": A }) }, r.r = function (e) { "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, { "value": "Module" }), Object.defineProperty(e, "__esModule", { "value": !0 }) }, r.t = function (e, t) { if (1 & t && (e = r(e)), 8 & t) return e; if (4 & t && "object" == (void 0 === e ? "undefined" : u(e)) && e && e.__esModule) return e; var A = Object.create(null); if (r.r(A), Object.defineProperty(A, "default", { "enumerable": !0, "value": e }), 2 & t && "string" != typeof e) for (var i in e) r.d(A, i, function (t) { return e[t] }.bind(null, i)); return A }, r.n = function (e) { var t = e && e.__esModule ? function () { return e.default } : function () { return e }; return r.d(t, "a", t), t }, r.o = function (e, t) { return Object.prototype.hasOwnProperty.call(e, t) }, r.p = "", r(r.s = 3)) }, function (e, t, A) { function r(e) { var t; return (s[e] || (t = s[e] = { "i": e, "l": !1, "exports": {} }, n[e].call(t.exports, t, t.exports, r), t.l = !0, t)).exports } var i, o, n, s; e.exports = (i = A(7), o = A(1), n = [function (e, t, A) { "use strict"; var r, i; Object.defineProperty(t, "__esModule", { "value": !0 }), t.typeMap = t.BrokenType = t.ConnectedType = t.DisconnectedType = t.Method = t.ConnectionClosedAction = t.NetWorkState = t.externalErrorList = t.Stick = t.PcConnectState = t.ENUM_CONNECT_STATE = t.DestroyType = t.StreamType = t.ModeMap = t.Mode = t.ZegoconnRunEnv = t.BusinessService = t.AccessHub_Error_Code = t.AccessHubMessageType = t.ENUM_NETWORK_STATE = t.PROTO_VERSION = void 0, t.PROTO_VERSION = "1.0.9", (i = t.ENUM_NETWORK_STATE || (t.ENUM_NETWORK_STATE = {}))[i.offline = 0] = "offline", i[i.online = 1] = "online", (i = t.AccessHubMessageType || (t.AccessHubMessageType = {}))[i.MSG_TYPE_STREAM_CLOSED = 2] = "MSG_TYPE_STREAM_CLOSED", i[i.MSG_TYPE_CLOSE_CONNECTION = 3] = "MSG_TYPE_CLOSE_CONNECTION", i[i.MSG_TYPE_HTTP_REQUEST = 4] = "MSG_TYPE_HTTP_REQUEST", i[i.MSG_TYPE_HTTP_RESPONSE = 5] = "MSG_TYPE_HTTP_RESPONSE", i[i.MSG_TYPE_HB_REQUEST = 12] = "MSG_TYPE_HB_REQUEST", i[i.MSG_TYPE_HB_RESPONSE = 13] = "MSG_TYPE_HB_RESPONSE", i[i.MSG_TYPE_GET_CONFIG_REQUEST = 14] = "MSG_TYPE_GET_CONFIG_REQUEST", i[i.MSG_TYPE_GET_CONFIG_RESPONSE = 15] = "MSG_TYPE_GET_CONFIG_RESPONSE", i[i.MSG_TYPE_HTTP_REQUEST_ACK = 16] = "MSG_TYPE_HTTP_REQUEST_ACK", i[i.MSG_TYPE_PC_UPWARD_MESSAGE = 17] = "MSG_TYPE_PC_UPWARD_MESSAGE", i[i.MSG_TYPE_PC_UPWARD_MESSAGE_ACK = 18] = "MSG_TYPE_PC_UPWARD_MESSAGE_ACK", i[i.MSG_TYPE_PC_ESTABLISHED = 19] = "MSG_TYPE_PC_ESTABLISHED", i[i.MSG_TYPE_PC_BROKEN = 20] = "MSG_TYPE_PC_BROKEN", i[i.MSG_TYPE_PC_DOWNWARD_MESSAGE = 21] = "MSG_TYPE_PC_DOWNWARD_MESSAGE", i[i.MSG_TYPE_REDIRECT = 22] = "MSG_TYPE_REDIRECT", i[i.MSG_TYPE_GET_APPCONFIG_REQUEST = 23] = "MSG_TYPE_GET_APPCONFIG_REQUEST", i[i.MSG_TYPE_GET_APPCONFIG_RESPONSE = 24] = "MSG_TYPE_GET_APPCONFIG_RESPONSE", i[i.MSG_TYPE_PUSH_APPCONFIG = 25] = "MSG_TYPE_PUSH_APPCONFIG", i[i.MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST = 26] = "MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST", i[i.MSG_TYPE_ACCESSHUB_DISPATCH_RESPONSE = 27] = "MSG_TYPE_ACCESSHUB_DISPATCH_RESPONSE", i[i.MSG_TYPE_PUSH_EXCEPTION = 30] = "MSG_TYPE_PUSH_EXCEPTION", (r = i = t.AccessHub_Error_Code || (t.AccessHub_Error_Code = {}))[r.ACCESSHUB_INVALID_FRAME = 2e4] = "ACCESSHUB_INVALID_FRAME", r[r.ACCESSHUB_NEED_ENCRYPT = 20001] = "ACCESSHUB_NEED_ENCRYPT", r[r.ACCESSHUB_DECRYPT = 20002] = "ACCESSHUB_DECRYPT", r[r.ACCESSHUB_MSGTYPE = 20003] = "ACCESSHUB_MSGTYPE", r[r.ACCESSHUB_UNMARSHAL = 20004] = "ACCESSHUB_UNMARSHAL", r[r.ACCESSHUB_TIMEOUT = 20005] = "ACCESSHUB_TIMEOUT", r[r.ACCESSHUB_CONNECT = 20006] = "ACCESSHUB_CONNECT", r[r.ACCESSHUB_BROKEN = 20007] = "ACCESSHUB_BROKEN", r[r.ACCESSHUB_INTERNAL_ERROR = 20008] = "ACCESSHUB_INTERNAL_ERROR", r[r.ACCESSHUB_MARSHAL = 20009] = "ACCESSHUB_MARSHAL", r[r.ACCESSHUB_UNSUPPORTED_SERVICE = 20010] = "ACCESSHUB_UNSUPPORTED_SERVICE", r[r.ACCESSHUB_TOO_FREQUENTLY = 20011] = "ACCESSHUB_TOO_FREQUENTLY", r[r.ACCESSHUB_INVALID_APPID = 20012] = "ACCESSHUB_INVALID_APPID", r[r.ACCESSHUB_HB_TIMEOUT = 20013] = "ACCESSHUB_HB_TIMEOUT", r[r.ACCESSHUB_INVALID_SIGNATURE = 20014] = "ACCESSHUB_INVALID_SIGNATURE", (r = t.BusinessService || (t.BusinessService = {}))[r.SERVICE_UNSET = 0] = "SERVICE_UNSET", r[r.SERVICE_MEDIAGW = 1] = "SERVICE_MEDIAGW", r[r.SERVICE_LIVEROOM = 2] = "SERVICE_LIVEROOM", r[r.SERVICE_MIX = 3] = "SERVICE_MIX", r[r.SERVICE_ZEUS = 4] = "SERVICE_ZEUS", r[r.SERVICE_ZPUSH = 5] = "SERVICE_ZPUSH", r[r.SERVICE_L3 = 6] = "SERVICE_L3", r[r.SERVICE_TALKLINE = 7] = "SERVICE_TALKLINE", r[r.SERVICE_EDUSUITE = 8] = "SERVICE_EDUSUITE", r[r.SERVICE_ZIM = 9] = "SERVICE_ZIM", r[r.SERVICE_ClOUD_SETTING = 10] = "SERVICE_ClOUD_SETTING", r[r.SERVICE_ZEUSHB = 11] = "SERVICE_ZEUSHB", r[r.SERVICE_USER_LOGIC = 12] = "SERVICE_USER_LOGIC", r[r.SERVICE_UNIFYDISPATCH = 13] = "SERVICE_UNIFYDISPATCH", r[r.SERVICE_QUALITY = 14] = "SERVICE_QUALITY", r[r.SERVICE_SECURITY = 15] = "SERVICE_SECURITY", r[r.SERVICE_KTVCPR = 16] = "SERVICE_KTVCPR", r[r.SERVICE_SWITCH4LIVEROOM = 17] = "SERVICE_SWITCH4LIVEROOM", r[r.SERVICE_WEBRTC_SIGNAL = 18] = "SERVICE_WEBRTC_SIGNAL", r[r.SERVICE_L3_WEBRTC_SIGNAL = 19] = "SERVICE_L3_WEBRTC_SIGNAL", r[r.SERVICE_VIDEOCPR = 20] = "SERVICE_VIDEOCPR", r[r.SERVICE_CDN = 21] = "SERVICE_CDN", r[r.SERVICE_CLOUDRECORD = 22] = "SERVICE_CLOUDRECORD", r[r.SERVICE_INNER_ECHO = 23] = "SERVICE_INNER_ECHO", r[r.SERVICE_OUTER_ECHO = 24] = "SERVICE_OUTER_ECHO", r[r.SERVICE_LOCALHOST_ECHO = 25] = "SERVICE_LOCALHOST_ECHO", r[r.SERVICE_ECHO = 26] = "SERVICE_ECHO", r[r.SERVICE_DOCSERVICE = 27] = "SERVICE_DOCSERVICE", r[r.SERVICE_AUTHSVR = 28] = "SERVICE_AUTHSVR", (r = t.ZegoconnRunEnv || (t.ZegoconnRunEnv = {}))[r.ZEGOCONN_RUN_ENV_UNSET = 0] = "ZEGOCONN_RUN_ENV_UNSET", r[r.ZEGOCONN_RUN_ENV_BROWSER = 1] = "ZEGOCONN_RUN_ENV_BROWSER", r[r.ZEGOCONN_RUN_ENV_APPLET = 2] = "ZEGOCONN_RUN_ENV_APPLET", (r = t.Mode || (t.Mode = {}))[r.Mode_UNSET = 0] = "Mode_UNSET", r[r.MODE_ONLINE = 1] = "MODE_ONLINE", r[r.MODE_TEST = 2] = "MODE_TEST", r[r.MODE_ALPHA = 3] = "MODE_ALPHA", t.ModeMap = { "1": "online", "2": "test", "3": "alpha" }, (r = t.StreamType || (t.StreamType = {}))[r.HTTP = 0] = "HTTP", r[r.PC = 1] = "PC", r[r.OTHER = 2] = "OTHER", (r = t.DestroyType || (t.DestroyType = {}))[r.NONE = 0] = "NONE", r[r.BROKEN = 1] = "BROKEN", r[r.DISCONNECT = 2] = "DISCONNECT", t.ENUM_CONNECT_STATE = { "disconnect": 0, "connecting": 1, "connected": 2 }, (r = t.PcConnectState || (t.PcConnectState = {}))[r.CONNECTED = 0] = "CONNECTED", r[r.DISCONNECT = 1] = "DISCONNECT", r[r.BROKEN = 2] = "BROKEN", t.Stick = { "DISPATCH": "zego-action-dispatch", "RETRY": "zego-action-retry", "ABORT": "zego-action-abort", "NEXT_GROUP": "zego-action-next-group", "PUSH_APP_CONFIG": "push-app-config:" }, t.externalErrorList = [i.ACCESSHUB_INVALID_APPID, i.ACCESSHUB_INVALID_SIGNATURE], (r = t.NetWorkState || (t.NetWorkState = {}))[r.offline = 0] = "offline", r[r.online = 1] = "online", (i = t.ConnectionClosedAction || (t.ConnectionClosedAction = {}))[i.ACTION_RESERVED = 0] = "ACTION_RESERVED", i[i.ACTION_DISPATCH = 1] = "ACTION_DISPATCH", i[i.ACTION_RETRY = 2] = "ACTION_RETRY", i[i.ACTION_NEXT_NODE = 3] = "ACTION_NEXT_NODE", i[i.ACTION_ABORT = 4] = "ACTION_ABORT", i[i.ACTION_NEXT_GROUP = 5] = "ACTION_NEXT_GROUP", (r = t.Method || (t.Method = {}))[r.METHOD_UNSET = 0] = "METHOD_UNSET", r[r.METHOD_GET = 1] = "METHOD_GET", r[r.METHOD_POST = 2] = "METHOD_POST", (i = t.DisconnectedType || (t.DisconnectedType = {}))[i.CLOSE = 0] = "CLOSE", i[i.TEMP = 1] = "TEMP", i[i.TIMEOUT = 2] = "TIMEOUT", (r = t.ConnectedType || (t.ConnectedType = {}))[r.AUTO = 0] = "AUTO", r[r.MANUAL = 1] = "MANUAL", (i = t.BrokenType || (t.BrokenType = {}))[i.EMPTY = 0] = "EMPTY", i[i.CLOSE = 1] = "CLOSE", t.typeMap = { "2": "stream_closed", "3": "close_connection", "4": "http_request", "5": "http_response", "12": "hb_request", "13": "hb_response", "14": "get_config_request", "15": "get_config_response", "16": "http_request_ack", "17": "pc_upward_message", "18": "pc_upward_message_ack", "19": "pc_established", "20": "pc_broken", "21": "pc_downward_message", "22": "redirect", "23": "get_appconfig_request", "24": "get_appconfig_response", "25": "push_appconfig", "26": "accesshub_dispatch_request", "27": "accesshub_dispatch_response", "30": "push_exception" } }, function (e, t, A) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.APP_CONFIG_KEY = t.NET_ACCESS_SERVERS = t.NET_ACCESS_CONFIG = void 0, A = A(0), t.NET_ACCESS_CONFIG = { "domains": ["accesshub-wss.zego.im"], "mode": "online", "modeNo": A.Mode.MODE_ONLINE, "sdkType": 3, "connectVer": 2, "pcEstablishTimeout": 15, "scheme": "wss", "location": "accesshub", "wssMessageType": 1 }, t.NET_ACCESS_SERVERS = "z_net_access_servers", t.APP_CONFIG_KEY = "z_appconfig" }, function (e, t) { e.exports = i }, function (e, t, A) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.errorCodeList = void 0, t.errorCodeList = { "TIMEOUT": { "code": 1100002, "msg": "network timeout." }, "SOCKET_CLOSE": { "code": 1100003, "msg": "socket close" }, "NET_SOCKET_TIMEOUT": { "code": 1100004, "msg": "net agent timeout" }, "NET_HB_TIMEOUT": { "code": 1100005, "msg": "net hb timeout" }, "NET_CONNECT_TIMEOUT": { "code": 1100006, "msg": "net connect timeout" } } }, function (e, t, A) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.uuidNum = t.decodeString = t.encodeString = void 0, t.encodeString = function (e) { return Uint8Array.from(Array.from(unescape(encodeURIComponent(e))).map(function (e) { return e.charCodeAt(0) })) }, t.decodeString = function (e) { return decodeURIComponent(escape(String.fromCharCode.apply(String, Array.from(e)))) }, t.uuidNum = function (e, t) { var A, r, i = "0123456789".split(""), o = []; if (t = i.length, e) for (A = 0; A < e; A++)o[A] = i[0 | Math.random() * t]; else for (o[8] = o[13] = o[18] = o[23] = "-", o[14] = "4", A = 0; A < 36; A++)o[A] || (r = 0 | 16 * Math.random(), o[A] = i[19 == A ? 3 & r | 8 : r]); return o.join("") } }, function (e, t, A) { "use strict"; var r = this && this.__assign || function () { return (r = Object.assign || function (e) { for (var t, A = 1, r = arguments.length; A < r; A++)for (var i in t = arguments[A]) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]); return e }).apply(this, arguments) }, i = (Object.defineProperty(t, "__esModule", { "value": !0 }), t.NetAgentPCRequest = void 0, A(0)), o = A(1), n = A(6), s = A(4), a = [i.BusinessService.SERVICE_WEBRTC_SIGNAL, i.BusinessService.SERVICE_L3_WEBRTC_SIGNAL]; function u(e, t, A, r, o) { this.logger = e, this.service = t, this.streamManager = A, this.pcEstablishTimeout = r, this.option = o, this.connectState = i.PcConnectState.DISCONNECT, this.lastConnectState = i.PcConnectState.DISCONNECT, this.brokenTimer = null, this.listenerList = { "connected": [], "broken": [] }, this.netPcStream = this.streamManager.createStream(i.StreamType.PC), this.eventManager = new n.EventManager, this.netPcStream.onPushEvent = this.onPushEvent.bind(this) } u.prototype.sendRequest = function (e, t, A) { var r = this, n = e.payload, c = ((a.includes(this.service) || null != (c = this.option) && c.encode) && (n = (0, s.encodeString)(e.payload)), { "service_no": this.service, "ack": e.ack, "payload": n, "wss_message_type": o.NET_ACCESS_CONFIG.wssMessageType, "wss_path": null == (c = this.option) ? void 0 : c.path, "wss_raw_query": null == (n = this.option) ? void 0 : n.query, "zegoconn_version": o.NET_ACCESS_CONFIG.connectVer }); this.netPcStream.isConnect() || (this.logger.info("zn.napr.sr pc is not connect"), this.eventManager.emit("connectStart")), this.netPcStream.sendMessage(i.AccessHubMessageType.MSG_TYPE_PC_UPWARD_MESSAGE, c, function () { r.logger.info("zn.napr.sr suc"), A && A() }, function (e) { r.logger.error("zn.napr.sr fail"), t && t(e) }, null, { "isInSendMap": "boolean" == typeof e.isInSendMap && e.isInSendMap }), this.netPcStream.isFirst = !1 }, u.prototype.onPushEvent = function (e, t) { var A; switch (this.logger.info("zn.napr.ope" + " msgType: ".concat(e)), e) { case i.AccessHubMessageType.MSG_TYPE_PC_ESTABLISHED: this.pcEstablished(t, this.netPcStream.StreamID); break; case i.AccessHubMessageType.MSG_TYPE_PC_BROKEN: this.pcBroken(); break; case i.AccessHubMessageType.MSG_TYPE_PC_DOWNWARD_MESSAGE: this.logger.info("zn.napr.ope" + " ".concat(this.service, " down ").concat(null == (r = null == t ? void 0 : t.ts) ? void 0 : r.toNumber())); var r = t.payload; (a.includes(this.service) || null != (A = this.option) && A.encode) && (r = (0, s.decodeString)(t.payload)), this.eventManager.emit("downLoadMessage", r) } }, u.prototype.on = function (e, t) { return this.eventManager.addEventHandler(e, t) }, u.prototype.off = function (e, t) { this.eventManager.removeEventHandler(e, t) }, u.prototype.pcEstablished = function (e, t) { this.logger.info("zn.napr.pe call " + JSON.stringify(e)), this.setConnectState(i.PcConnectState.CONNECTED); var A = i.ConnectedType.MANUAL; this.lastConnectState === i.PcConnectState.BROKEN && this.connectState === i.PcConnectState.CONNECTED && (A = i.ConnectedType.AUTO), this.eventManager.emit("connected", A), this.reportEvent("pcConnectedEvent", { "proxy_link_sources": null == e ? void 0 : e.from, "connect_stream": t }), this.brokenTimer && clearTimeout(this.brokenTimer) }, u.prototype.pcBroken = function () { var e = this; this.logger.info("zn.napr.pb call"), this.setConnectState(i.PcConnectState.BROKEN), this.eventManager.emit("broken"), this.reportEvent("pcBrokenEvent"), this.brokenTimer = setTimeout(function () { e.eventManager.emit("disconnected", i.DisconnectedType.TEMP), e.reportEvent("pcDisconnectedEvent") }, 1e3 * this.pcEstablishTimeout) }, u.prototype.resetBrokenTimer = function () { this.brokenTimer && clearTimeout(this.brokenTimer) }, u.prototype._close = function (e, t) { var A; this.logger.info("zn.napr.cr call " + this.service + " " + this.connectState), this.connectState !== i.PcConnectState.DISCONNECT && (this.netPcStream.closeStream(0, ""), this.resetBrokenTimer(), A = this.streamManager.getStreamID(), this.netPcStream.refresh(A), this.eventManager.emit(e, t), A = "", "broken" === e ? A = "pcBrokenEvent" : "disconnected" === e && (A = "pcDisconnectedEvent"), A && this.reportEvent(A)), this.setConnectState(i.PcConnectState.DISCONNECT) }, u.prototype.closePc = function () { this._close("broken") }, u.prototype.closeRequest = function () { this._close("disconnected", i.DisconnectedType.CLOSE) }, u.prototype.setConnectState = function (e) { this.connectState !== e && (this.lastConnectState = this.connectState, this.connectState = e) }, u.prototype.reportEvent = function (e, t) { this.eventManager.emit(e, r({ "service_no": this.service }, t)) }, t.NetAgentPCRequest = u }, function (e, t, A) { "use strict"; function r() { this.handlerListMap = {} } Object.defineProperty(t, "__esModule", { "value": !0 }), t.EventManager = void 0, r.prototype.addEventHandler = function (e, t) { if (this.handlerListMap[e] || (this.handlerListMap[e] = []), "function" != typeof t) throw new Error("Params callBack is not a Function"); return this.handlerListMap[e] && -1 == this.handlerListMap[e].indexOf(t) && this.handlerListMap[e].push(t), !0 }, r.prototype.removeEventHandler = function (e, t) { return !!this.handlerListMap[e] && (this.handlerListMap[e] = t ? this.handlerListMap[e].filter(function (e) { return e !== t }) : [], !0) }, r.prototype.emit = function (e) { for (var t = [], A = 1; A < arguments.length; A++)t[A - 1] = arguments[A]; this.handlerListMap[e] && this.handlerListMap[e].forEach(function (A) { try { setTimeout(function () { A.apply(void 0, t) }, 0) } catch (A) { console.error('Fail to execute callback of event "'.concat(e, '" : ').concat(A)) } }) }, t.EventManager = r }, function (e, t, A) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.NetAgentHttpRequest = void 0; var r = A(0), i = A(4), o = A(1); function s(e, t, A) { this.logger = e, this.service = t, this.streamManager = A, this.netHttpStream = this.streamManager.createStream(r.StreamType.HTTP) } s.prototype.sendRequest = function (e, t, A, n, s) { var a = this, c = e.disableLog; e = { "service_no": this.service, "ack": e.ack, "headers": e.headers, "body": (0, i.encodeString)(JSON.stringify(e.body)), "id_name": e.idName, "method_no": e.method_no, "stick": e.stick, "location": e.location, "zegoconn_version": o.NET_ACCESS_CONFIG.connectVer }, this.netHttpStream.sendMessage(r.AccessHubMessageType.MSG_TYPE_HTTP_REQUEST, e, function (e) { var A = (null == e ? void 0 : e.headers).find(function (e) { return "Content-Encoding" === (null == e ? void 0 : e.name) }); "gzip" === (null == A ? void 0 : A.val) ? c || a.logger.info("zn.nahr.sr gzip") : e.body && (A = (0, i.decodeString)(e.body), e.body = A), c || a.logger.info("zn.nahr.sr suc " + JSON.stringify(e)), t && t(e) }, function (e, t, r) { c || a.logger.error("zn.nahr.sr fail"), A && A(r || e) }, function (e) { c || a.logger.error("zn.nahr.sr ack"), n && n(e) }, s), this.netHttpStream.isFirst = !1 }, t.NetAgentHttpRequest = s }, function (e, t, A) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.Method = t.Mode = t.DisconnectedType = t.ConnectedType = t.NET_ACCESS_CONFIG = t.BrokenType = t.BusinessService = t.NetAgentHttpRequest = t.NetAgentPCRequest = t.ZegoConnectionAgent = void 0; var r = A(0), i = (Object.defineProperty(t, "BrokenType", { "enumerable": !0, "get": function get() { return r.BrokenType } }), Object.defineProperty(t, "BusinessService", { "enumerable": !0, "get": function get() { return r.BusinessService } }), Object.defineProperty(t, "ConnectedType", { "enumerable": !0, "get": function get() { return r.ConnectedType } }), Object.defineProperty(t, "DisconnectedType", { "enumerable": !0, "get": function get() { return r.DisconnectedType } }), Object.defineProperty(t, "Mode", { "enumerable": !0, "get": function get() { return r.Mode } }), Object.defineProperty(t, "Method", { "enumerable": !0, "get": function get() { return r.Method } }), A(9)), o = (Object.defineProperty(t, "ZegoConnectionAgent", { "enumerable": !0, "get": function get() { return i.ZegoConnectionAgent } }), A(7)), n = (Object.defineProperty(t, "NetAgentHttpRequest", { "enumerable": !0, "get": function get() { return o.NetAgentHttpRequest } }), A(1)), s = (Object.defineProperty(t, "NET_ACCESS_CONFIG", { "enumerable": !0, "get": function get() { return n.NET_ACCESS_CONFIG } }), A(5)); Object.defineProperty(t, "NetAgentPCRequest", { "enumerable": !0, "get": function get() { return s.NetAgentPCRequest } }) }, function (e, t, A) { "use strict"; var r = this && this.__assign || function () { return (r = Object.assign || function (e) { for (var t, A = 1, r = arguments.length; A < r; A++)for (var i in t = arguments[A]) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]); return e }).apply(this, arguments) }, i = this && this.__spreadArray || function (e, t, A) { if (A || 2 === arguments.length) for (var r, i = 0, o = t.length; i < o; i++)!r && i in t || ((r = r || Array.prototype.slice.call(t, 0, i))[i] = t[i]); return e.concat(r || Array.prototype.slice.call(t)) }, o = (Object.defineProperty(t, "__esModule", { "value": !0 }), t.ZegoConnectionAgent = void 0, A(0)), n = A(10), s = A(13), a = A(18), c = A(19), g = A(20), u = A(1), l = A(6), h = A(21), d = A(3), C = A(22), I = A(4), E = A(23), p = A(7), f = A(24); function b() { var e = this; this.linkCheckTimer = null, this.connectServers = [], this.specifiedServers = [], this.getAppConfigFailCount = 0, this.getAppConfigTime = 0, this.inited = !1, this.linkMsgMaxInterval = 90, this.linkMsgCheckInterval = 5, this.isDestroy = !1, this.connectedTime = 0, this.connectid = "", this.reportSeq = 0, this.connectSeq = 0, this.primaryDomains = [], this._linkConnectState = o.ENUM_CONNECT_STATE.disconnect, this.lastLinkConnectState = o.ENUM_CONNECT_STATE.disconnect, this.onConnectedEvent = function (t, A) { var r; e.linkConnectState = o.ENUM_CONNECT_STATE.connected, e.getConfig(), e.stateCenter.specified || (r = e.reportSeq++, e.eventManager.emit("dispatchEvent", r, "start"), e.dispatch().then(function (t) { var A = t.servers; t = t.domains, e.eventManager.emit("dispatchEvent", r, "end", { "domains": t }), 0 < A.length && e.eventManager.emit("dispatchResultUpdate", { "servers": A }) }).catch(function (e) { })), e.eventManager.emit("connected"), e.connectedTime = (new Date).getTime(), e.connectid = (0, I.uuidNum)(16), e.eventManager.emit("connectedEvent", e.connectSeq, "end", { "servers": t, "count": t.length, "connectid": e.connectid, "connectEvents": A }) }, this.onConnectingEvent = function () { e.logger.info("zn.zca.oce call"), e.linkConnectState = o.ENUM_CONNECT_STATE.connecting }, this.onDisConnectedEvent = function (t) { e.logger.info("zn.zca.ode" + " ".concat(t)), e.linkConnectState = o.ENUM_CONNECT_STATE.disconnect, t ? (e.disConnect(), e.netAgentPCRequestMgr.updateConnectState(o.PcConnectState.BROKEN)) : (e.eventManager.emit("disconnected"), e.netAgentPCRequestMgr.updateConnectState(o.PcConnectState.DISCONNECT)) }, this.onPushEvent = function (t, A, r) { switch (A) { case o.AccessHubMessageType.MSG_TYPE_REDIRECT: e.redirect(r); break; case o.AccessHubMessageType.MSG_TYPE_CLOSE_CONNECTION: e.connectClosed(r); break; case o.AccessHubMessageType.MSG_TYPE_PC_BROKEN: case o.AccessHubMessageType.MSG_TYPE_PC_ESTABLISHED: case o.AccessHubMessageType.MSG_TYPE_PC_DOWNWARD_MESSAGE: e.streamManager.onPushEvent(t, A, r); break; case o.AccessHubMessageType.MSG_TYPE_PUSH_APPCONFIG: e.businessRequestMgr.decodeConfigMessage(r.data) } } } Object.defineProperty(b.prototype, "clientIP", { "get": function get() { return this.stateCenter.clientIP }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(b.prototype, "timeOffset", { "get": function get() { return this.stateCenter.timeOffset }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(b.prototype, "linkConnectState", { "get": function get() { return this._linkConnectState }, "set": function set(e) { this.lastLinkConnectState = this._linkConnectState, this._linkConnectState = e }, "enumerable": !1, "configurable": !0 }), b.prototype.init = function () { this.logger = new E.ZegoLogger, this.protobuf = new n.AccessHubProtoBuf, this.stateCenter = new C.StateCenter, this.eventManager = new l.EventManager, this.checkLinkMsg(), this.inited = !0 }, b.prototype.unInit = function () { this.inited = !1 }, b.prototype.setAppInfo = function (e) { this.stateCenter.appInfo = e, this.stateCenter.networkState = !navigator || navigator.onLine ? o.ENUM_NETWORK_STATE.online : o.ENUM_NETWORK_STATE.offline, 0 === e.env ? this.bindWindowListener() : 1 === e.env && this.bindWxListener(), this.zegoLink = new s.ZegoWssLink(e.appID, e.env, this.protobuf, this.logger, this.stateCenter), this.zegoLink.initEvent(this.onConnectedEvent, this.onDisConnectedEvent, this.onConnectingEvent, this.onPushEvent), this.streamManager = new f.StreamManager(this.zegoLink), this.businessRequestMgr = new a.NetAgentBusinessRequestMgr(this.streamManager, this.protobuf, this.logger, this.stateCenter), this.netHeartBeatHandler = new c.NetHeartBeatHandler(this.streamManager, this.logger, this.stateCenter), this.netAgentPCRequestMgr = new g.NetAgentPCRequestMgr(this.streamManager, this.logger), this.heartBeatHandler() }, b.prototype.setUserInfo = function (e) { this.stateCenter.userId = e }, b.prototype.setNetAgentDefaultServers = function (e) { this.connectServers = i([], e, !0) }, b.prototype.setNetAgentSpecifiedServers = function (e) { this.logger.info("zn.sss.0 " + JSON.stringify(e)), this.stateCenter.specified = !0, this.specifiedServers = i([], e, !0) }, b.prototype.setBackupDomains = function (e) { this.primaryDomains = e }, b.prototype.setDispatchConnectServers = function (e) { this.connect(e) }, b.prototype.startHttpRequest = function (e, t, A, r, i) { var o = this, n = this.reportSeq++; this.eventManager.emit("requestEvent", n, "start"), this.isConnect() || (this.logger.info("zn.shq.0 link is not connect"), this.connectUa()), new p.NetAgentHttpRequest(this.logger, e.service, this.streamManager).sendRequest(e, function (A) { o.eventManager.emit("requestEvent", n, "end", { "na_req_location": e.location, "status_code": A.status_code, "err_code": 0 }), t && t(A) }, function (t) { o.eventManager.emit("requestEvent", n, "end", { "na_req_location": e.location, "err_code": t.code || 0 }), A && A(t) }, r, i) }, b.prototype.getAppConfigByAgent = function (e, t, A) { return this.isConnect() || (this.logger.info("zn.gab.0 link is not connect"), this.connectUa()), this.getAppConfig(e, this.stateCenter.userId, t, A) }, b.prototype.getPCRequest = function (e, t) { var A = this; return (t = this.netAgentPCRequestMgr.getRequest(e, t)).on("disconnected", function (t) { A.logger.warn("zn.zca.gpr " + e + " disconnect " + t), t === o.DisconnectedType.TEMP && (A.disConnect(), A.connectStart()) }), t.on("connectStart", function () { A.connectUa() }), t }, b.prototype.connectUa = function () { this.isDestroy || (this.logger.info("zn.zca.cua call"), this.retryLinkHandler && (this.retryLinkHandler.init(), this.connectStart(!1, !0))) }, b.prototype.destroyConnect = function () { this.logger.info("zn.zca.dc.0 call"), this.resetNetAgent() }, b.prototype.destroy = function () { this.logger.info("zn.zca.dy.0 call"), this.destroyConnect(), this.linkCheckTimer && clearTimeout(this.linkCheckTimer), this.retryLinkHandler.invalid(), this.retryLinkHandler.stopMaxTime(), this.isDestroy = !0 }, b.prototype.isConnect = function () { return this.zegoLink && this.zegoLink.isConnect() }, b.prototype.on = function (e, t) { return this.logger.info("zn.zca.o.0 " + e), this.eventManager.addEventHandler(e, t) }, b.prototype.off = function (e, t) { this.logger.info("zn.zca.o.1 " + e), this.eventManager.removeEventHandler(e, t) }, b.prototype.setLogger = function (e) { this.logger = e }, b.prototype.setAccess = function (e) { this.stateCenter.useNetAgent = e }, b.prototype.getVersion = function () { return o.PROTO_VERSION }, b.prototype.heartBeatHandler = function () { var e = this; this.netHeartBeatHandler.netHbLogout = function (t) { e.retryLinkHandler && ([d.errorCodeList.NET_HB_TIMEOUT.code].includes(t.code) ? (e.retryLinkHandler.startMaxTime(), e.disConnect(), e.connectStart()) : (e.retryLinkHandler.stopMaxTime(), e.retryLinkHandler.invalid(), e.eventManager.emit("disconnected"))) } }, b.prototype.bindWindowListener = function () { var e = this; window.addEventListener("offline", function () { e.netOffLineHandle() }), window.addEventListener("online", function () { e.netOnLineHandle() }) }, b.prototype.bindWxListener = function () { var e = this; wx.onNetworkStatusChange(function (t) { t.isConnected ? e.netOnLineHandle() : e.netOffLineHandle() }) }, b.prototype.netOnLineHandle = function () { this.logger.info("zn.zca.noh.0 network is online"), this.stateCenter.networkState = o.ENUM_NETWORK_STATE.online, this.stateCenter.useNetAgent && this.netOnLineHandler() }, b.prototype.netOffLineHandle = function () { this.logger.info("zn.zca.noh.1 network is broken"), this.stateCenter.networkState = o.ENUM_NETWORK_STATE.offline, this.stateCenter.useNetAgent && this.netOffLineHandler() }, b.prototype.checkLinkMsg = function () { var e = this; if (this.stateCenter.useNetAgent) { if (this.isConnect()) { var t = Date.now() - this.zegoLink.updatedMsgTime; if (t > 1e3 * this.linkMsgMaxInterval) return this.logger.info("zn.zca.clm interval: " + t), void this.resetNetAgent() } this.linkCheckTimer && clearTimeout(this.linkCheckTimer), this.linkCheckTimer = setTimeout(function () { e.checkLinkMsg() }, 1e3 * this.linkMsgCheckInterval) } }, b.prototype.connect = function (e) { var t = this; 0 < e.length && (this.connectServers = i([], e, !0)), this.stateCenter.specified && 0 < this.specifiedServers.length && (this.connectServers = this.specifiedServers), this.zegoLink.createSocket(this.connectServers), this.retryLinkHandler || (this.retryLinkHandler = new h.NetRetryLinkHandler(this.logger, this.stateCenter)), this.retryLinkHandler.init(), this.retryLinkHandler.initLink(this.zegoLink), this.retryLinkHandler.onactive = function (e, A) { A === d.errorCodeList.NET_SOCKET_TIMEOUT && (t.eventManager.emit("disconnected", A), t.netAgentPCRequestMgr.updateConnectState(o.PcConnectState.DISCONNECT, o.DisconnectedType.TIMEOUT, A)) }, this.connectStart(!1, !0) }, b.prototype.resetNetAgent = function () { this.netHeartBeatHandler.reset(), this.zegoLink.destroySocket(o.DestroyType.DISCONNECT) }, b.prototype.getConfig = function () { function e(e, r, i) { i ? t.logger.info("zn.zca.gc fail " + JSON.stringify(i)) : 0 === e.code ? (t.logger.info("zn.zca.gc suc " + JSON.stringify(e)), t.getConfigSuccess(e, A)) : t.logger.info("zn.zca.gc fail") } var t = this, A = (new Date).getTime(); this.businessRequestMgr.getConfig(e, e) }, b.prototype.getConfigSuccess = function (e, t) { var A; this.netHeartBeatHandler.init(e), this.netAgentPCRequestMgr.setEstablishTimeout(e.data.pc_establish_timeout), null != (A = null == e ? void 0 : e.data) && A.client_outer_ip && (this.stateCenter.clientIP = e.data.client_outer_ip), null != (A = null == e ? void 0 : e.data) && A.ntp_time && (A = e.data.ntp_time.toNumber(), e = (new Date).getTime(), A += Math.round((e - t) / 2), this.stateCenter.timeOffset = A - e), this.eventManager.emit("clientInfo", { "clientIP": this.clientIP, "timeOffset": this.timeOffset }) }, b.prototype.dispatch = function () { var e = this; return new Promise(function (t, A) { e.businessRequestMgr.dispatchURL(function (A) { A = A.data.wss_groups; var r = (e.logger.info("zn.nab.du wss_groups: " + JSON.stringify(A)), e.getConnectionDomains(A, e.primaryDomains)); r = e.handleWssGroups(r), t({ "servers": r, "domains": A }) }, function (e) { A(e) }) }) }, b.prototype.handleWssGroups = function (e) { return Array.isArray(e) && 0 < e.length ? e.map(function (e) { return u.NET_ACCESS_CONFIG.scheme + "://" + e.host + "/" + u.NET_ACCESS_CONFIG.location }) : [] }, b.prototype.getConnectionDomains = function (e, t) { var A = i([], e, !0); return t.forEach(function (t) { e.forEach(function (e) { var r; (r = e.main_domain || (r = e.host.split("."))[r.length - 2] + "." + r[r.length - 1]) !== t && (r = e.host.replace(r, t), A.push({ "group": e.group, "host": r })) }) }), A }, b.prototype.getAppConfig = function (e, t, A, i) { var n = this; return new Promise(function (s, a) { "string" == typeof t && "string" == typeof A ? n.businessRequestMgr.getAppConfig(e, t, A, i).then(function (e) { s(r(r({}, e), { "retryCount": n.getAppConfigFailCount })) }).catch(function (i) { var c; n.logger.error("zn.zca.gac " + JSON.stringify(i)), -1 < o.externalErrorList.indexOf(i.code) || (n.getAppConfigFailCount++, 20008 !== i.code && 1100002 !== i.code || !(n.getAppConfigFailCount < 3)) ? (c = n.getAppConfigFailCount, n.getAppConfigFailCount = 0, a(r(r({}, i), { "retryCount": c }))) : n.getAppConfig(e, t, A).then(function (e) { return s(e) }).catch(function (e) { return a(e) }) }) : n.logger.error("zn.zca.gac userID or token must be string") }) }, b.prototype.reportDisConnectEvent = function () { var e = (new Date).getTime() - this.connectedTime; console.warn("reportDisConnectEvent"), this.connectid && this.eventManager.emit("disConnectedEvent", { "duration": e, "server": this.zegoLink.connectServer, "connectid": this.connectid }) }, b.prototype.redirect = function (e) { this.logger.info("zn.zca.rd" + " ".concat(JSON.stringify(e.wss_groups))), (e = this.handleWssGroups(e.wss_groups)) && Array.isArray(e) && 0 < e.length ? (this.disConnect(), this.stateCenter.specified && (this.logger.info("zn.zca.rd specified"), e = this.specifiedServers), this.zegoLink.createSocket(e), this.connectStart(!1, !0)) : this.logger.warn("zn.zca.rd wss_groups null") }, b.prototype.connectClosed = function (e) { var t = this; switch (this.logger.info("zn.zca.cc" + " ".concat(e.reason, " ").concat(e.msg, " ").concat(e.action)), e.action) { case o.ConnectionClosedAction.ACTION_DISPATCH: var A = this.reportSeq++; this.eventManager.emit("dispatchEvent", A, "start"), this.dispatch().then(function (e) { var r = e.servers; e = e.domains, t.eventManager.emit("dispatchEvent", A, "end", { "domains": e, "reason": "ConnectClosed" }), Array.isArray(r) && 0 < r.length && (t.eventManager.emit("dispatchResultUpdate", { "servers": r }), e = t.stateCenter.specified ? t.specifiedServers : r, t.disConnect(), t.zegoLink.createSocket(e), t.connectStart(!1, !0)) }).catch(function (e) { t.logger.info("zn.zca.cc dispatch fail") }); break; case o.ConnectionClosedAction.ACTION_RETRY: this.disConnect(), this.connectStart(!1); break; case o.ConnectionClosedAction.ACTION_NEXT_GROUP: this.netAgentPCRequestMgr.closePCs(), this.eventManager.emit("broken", o.BrokenType.CLOSE), this.connectStart(); case o.ConnectionClosedAction.ACTION_ABORT: case o.ConnectionClosedAction.ACTION_RESERVED: } }, b.prototype.netOnLineHandler = function () { this.retryLinkHandler && (this.zegoLink.isConnect() ? this.retryLinkHandler.stopMaxTime() : this.connectStart()) }, b.prototype.netOffLineHandler = function () { this.disConnect(), this.retryLinkHandler && (this.retryLinkHandler.invalid(), this.retryLinkHandler.startMaxTime(), this.zegoLink.setState(o.ENUM_CONNECT_STATE.disconnect)) }, b.prototype.connectStart = function (e, t) { this.retryLinkHandler.active(e, t) && this.reportConnectEvent() }, b.prototype.reportConnectEvent = function () { var e = this.reportSeq++; this.connectSeq = e, this.eventManager.emit("connectedEvent", e, "start") }, b.prototype.disConnect = function () { this.netAgentPCRequestMgr.closePCs(), this.eventManager.emit("broken"), this.lastLinkConnectState === o.ENUM_CONNECT_STATE.connected && this.linkConnectState === o.ENUM_CONNECT_STATE.disconnect && this.reportDisConnectEvent() }, b.prototype.testConnect = function () { this.startHttpRequest({ "service": o.BusinessService.SERVICE_ClOUD_SETTING, "headers": [], "body": { "appid": 3349318446, "biztype": 0, "deviceid": "27a315ae-ff78-4ded-8581-8b7b7afe6f2e", "files": ["init", "room"], "id_name": "sample1647345322471", "mode": "online", "param": {}, "product": "Web_SDK", "timestamp": 1647345362932, "token": "eyJ2ZXIiOjEsImhhc2giOiIwOGQxMDYzMzQ0M2EzNjk1ZmE4YTg2ZDNmZGRlNGNiNyIsIm5vbmNlIjoiYWEyZDFmMDJmOGRiYjBlM2Q1YjY5NzA3NzMzOGYyODIiLCJleHBpcmVkIjoxNjQ5OTM3MzI2fQ==" }, "idName": "sample1647345322471", "ack": !0, "stick": "zego-action-dispatch", "method_no": o.Method.METHOD_POST, "location": "/cloud-setting/get" }, function (e) { console.warn("suc", e) }, function (e) { console.warn("err", e) }, function (e) { console.warn("suc", e) }) }, t.ZegoConnectionAgent = b }, function (e, t, A) { "use strict"; var r = this && this.__assign || function () { return (r = Object.assign || function (e) { for (var t, A = 1, r = arguments.length; A < r; A++)for (var i in t = arguments[A]) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]); return e }).apply(this, arguments) }, i = this && this.__createBinding || (Object.create ? function (e, t, A, r) { void 0 === r && (r = A); var i = Object.getOwnPropertyDescriptor(t, A); i && !("get" in i ? !t.__esModule : i.writable || i.configurable) || (i = { "enumerable": !0, "get": function get() { return t[A] } }), Object.defineProperty(e, r, i) } : function (e, t, A, r) { e[r = void 0 === r ? A : r] = t[A] }), o = this && this.__setModuleDefault || (Object.create ? function (e, t) { Object.defineProperty(e, "default", { "enumerable": !0, "value": t }) } : function (e, t) { e.default = t }), n = this && this.__importStar || function (e) { if (e && e.__esModule) return e; var t = {}; if (null != e) for (var A in e) "default" !== A && Object.prototype.hasOwnProperty.call(e, A) && i(t, e, A); return o(t, e), t }, s = this && this.__importDefault || function (e) { return e && e.__esModule ? e : { "default": e } }, a = (Object.defineProperty(t, "__esModule", { "value": !0 }), t.AccessHubProtoBuf = void 0, s(A(11))), c = (n = n(A(2)), A(0)), g = s(A(12)); function h() { var e; this.protoInstance = g.default, this.protoMap = ((e = {})[c.AccessHubMessageType.MSG_TYPE_STREAM_CLOSED] = ["proto_accesshub", "ConnectionClosed"], e[c.AccessHubMessageType.MSG_TYPE_CLOSE_CONNECTION] = ["proto_accesshub", "CloseConnection"], e[c.AccessHubMessageType.MSG_TYPE_HTTP_REQUEST] = ["proto_accesshub", "HTTPRequest"], e[c.AccessHubMessageType.MSG_TYPE_HTTP_RESPONSE] = ["proto_accesshub", "HTTPResponse"], e[c.AccessHubMessageType.MSG_TYPE_HB_REQUEST] = ["proto_accesshub", "HBRequest"], e[c.AccessHubMessageType.MSG_TYPE_HB_RESPONSE] = ["proto_accesshub", "HBResponse"], e[c.AccessHubMessageType.MSG_TYPE_GET_CONFIG_REQUEST] = ["proto_accesshub", "GetConfigRequest"], e[c.AccessHubMessageType.MSG_TYPE_GET_CONFIG_RESPONSE] = ["proto_accesshub", "GetConfigResponse"], e[c.AccessHubMessageType.MSG_TYPE_HTTP_REQUEST_ACK] = ["proto_accesshub", "HBResponse"], e[c.AccessHubMessageType.MSG_TYPE_PC_UPWARD_MESSAGE] = ["proto_accesshub", "PCUpwardMessage"], e[c.AccessHubMessageType.MSG_TYPE_PC_UPWARD_MESSAGE_ACK] = ["proto_accesshub", "PCUpwardMessageAck"], e[c.AccessHubMessageType.MSG_TYPE_PC_ESTABLISHED] = ["proto_accesshub", "PCEstablished"], e[c.AccessHubMessageType.MSG_TYPE_PC_BROKEN] = ["proto_accesshub", "PCBroken"], e[c.AccessHubMessageType.MSG_TYPE_PC_DOWNWARD_MESSAGE] = ["proto_accesshub", "PCDownwardMessage"], e[c.AccessHubMessageType.MSG_TYPE_REDIRECT] = ["proto_accesshub", "Redirect"], e[c.AccessHubMessageType.MSG_TYPE_GET_APPCONFIG_REQUEST] = ["proto_accesshub", "GetAppConfigRequest"], e[c.AccessHubMessageType.MSG_TYPE_GET_APPCONFIG_RESPONSE] = ["proto_accesshub", "GetAppConfigResponse"], e[c.AccessHubMessageType.MSG_TYPE_PUSH_APPCONFIG] = ["proto_accesshub", "PushAppConfig"], e[c.AccessHubMessageType.MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST] = ["proto_accesshub", "AccesshubDispatchRequest"], e[c.AccessHubMessageType.MSG_TYPE_ACCESSHUB_DISPATCH_RESPONSE] = ["proto_accesshub", "AccesshubDispatchResponse"], e[c.AccessHubMessageType.MSG_TYPE_PUSH_EXCEPTION] = ["proto_accesshub", "PushException"], e) } n.util.Long = a.default, n.configure(), h.prototype.encodeRequest = function (e, t, A) { var r = (i = this.protoMap[e])[0], i = i[1]; return i = (r = this.encode(this.protoInstance[r][i], t)).length, (t = new Uint8Array(13 + i))[0] = 175, t[1] = 0, t[2] = e >> 8, t[3] = e - (t[2] << 8), t.set(new Uint8Array(Int32Array.from([i]).buffer).reverse(), 4), t.set(new Uint8Array(Int32Array.from([A]).buffer).reverse(), 8), t[12] = 0, t.set(r, 13), t }, h.prototype.decodeResponse = function (e) { var t = (e[2] << 8) + e[3], A = new DataView(e.buffer).getUint32(8), r = e.slice(13); try { var i = this.protoMap[t], o = i[0], n = i[1]; return [A, t, this.decode(this.protoInstance[o][n], r)] } catch (e) { return [A, t, { "code": 1 }] } }, h.prototype.decodeConfigMessage = function (e) { return this.decode(this.protoInstance.proto_initconfig.InitConfig, e) }, h.prototype.encode = function (e, t) { return e.encode(new e(t)).finish() }, h.prototype.decode = function (e, t) { return r({}, e.decode(t)) }, t.AccessHubProtoBuf = h }, function (e, t) { e.exports = o }, function (e, t, r) { "use strict"; var i; r.r(t), r.d(t, "proto_accesshub", function () { return c }), r.d(t, "proto_initconfig", function () { return u }), r.d(t, "default", function () { return a }); var o = (t = r(2)).Reader, n = t.Writer, s = t.util, a = t.roots.default || (t.roots.default = {}), c = a.proto_accesshub = ((r = {}).MessageType = (t = {}, (i = Object.create(t))[t[0] = "MSG_TYPE_EMPTY"] = 0, i[t[1] = "MSG_TYPE_CONNECTION_CLOSED"] = 1, i[t[2] = "MSG_TYPE_STREAM_CLOSED"] = 2, i[t[3] = "MSG_TYPE_CLOSE_CONNECTION"] = 3, i[t[4] = "MSG_TYPE_HTTP_REQUEST"] = 4, i[t[5] = "MSG_TYPE_HTTP_RESPONSE"] = 5, i[t[6] = "MSG_TYPE_HTTP_REQUEST_DROPED"] = 6, i[t[7] = "MSG_TYPE_PROXY_CONNECT"] = 7, i[t[8] = "MSG_TYPE_PROXY_CONNECTED"] = 8, i[t[9] = "MSG_TYPE_PROXY_CONNECTION_CLOSED"] = 9, i[t[10] = "MSG_TYPE_PROXY_SEND_DATA"] = 10, i[t[11] = "MSG_TYPE_PROXY_RECV_DATA"] = 11, i[t[12] = "MSG_TYPE_HB_REQUEST"] = 12, i[t[13] = "MSG_TYPE_HB_RESPONSE"] = 13, i[t[14] = "MSG_TYPE_GET_CONFIG_REQUEST"] = 14, i[t[15] = "MSG_TYPE_GET_CONFIG_RESPONSE"] = 15, i[t[16] = "MSG_TYPE_HTTP_REQUEST_ACK"] = 16, i[t[17] = "MSG_TYPE_PC_UPWARD_MESSAGE"] = 17, i[t[18] = "MSG_TYPE_PC_UPWARD_MESSAGE_ACK"] = 18, i[t[19] = "MSG_TYPE_PC_ESTABLISHED"] = 19, i[t[20] = "MSG_TYPE_PC_BROKEN"] = 20, i[t[21] = "MSG_TYPE_PC_DOWNWARD_MESSAGE"] = 21, i[t[22] = "MSG_TYPE_REDIRECT"] = 22, i[t[23] = "MSG_TYPE_GET_APPCONFIG_REQUEST"] = 23, i[t[24] = "MSG_TYPE_GET_APPCONFIG_RESPONSE"] = 24, i[t[25] = "MSG_TYPE_PUSH_APPCONFIG"] = 25, i[t[26] = "MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST"] = 26, i[t[27] = "MSG_TYPE_ACCESSHUB_DISPATCH_RESPONSE"] = 27, i[t[28] = "MSG_TYPE_GET_IM_CONFIG_REQUEST"] = 28, i[t[29] = "MSG_TYPE_GET_IM_CONFIG_RESPONSE"] = 29, i[t[30] = "MSG_TYPE_PUSH_EXCEPTION"] = 30, i[t[31] = "MSG_TYPE_RESOLVE_DOMAIN_REQUEST"] = 31, i[t[32] = "MSG_TYPE_RESOLVE_DOMAIN_RESPONSE"] = 32, i[t[50] = "MSG_TYPE_UA_DISPATCH_REQUEST"] = 50, i[t[51] = "MSG_TYPE_UA_DISPATCH_RESPONSE"] = 51, i[t[52] = "MSG_TYPE_UA_ECHO_REQUEST"] = 52, i[t[53] = "MSG_TYPE_UA_ECHO_RESPONSE"] = 53, i[t[100] = "MSG_TYPE_NODE_REGISTER_REQUEST"] = 100, i[t[101] = "MSG_TYPE_NODE_REGISTER_RESPONSE"] = 101, i[t[102] = "MSG_TYPE_NODE_HB_REQUEST"] = 102, i[t[103] = "MSG_TYPE_NODE_HB_RESPONSE"] = 103, i), r.ErrorCode = (t = {}, (i = Object.create(t))[t[0] = "OK"] = 0, i[t[1e4] = "DISPATCH_NO_AVAILABLE_NODE"] = 1e4, i[t[10001] = "DISPATCH_INTERNAL_ERROR"] = 10001, i[t[10002] = "DISPATCH_INVALID_FRAME"] = 10002, i[t[10003] = "DISPATCH_UNMARSHAL"] = 10003, i[t[10004] = "DISPATCH_MSGTYPE"] = 10004, i[t[10005] = "DISPATCH_MARSHAL"] = 10005, i[t[10006] = "DISPATCH_TOO_FREQUENTLY"] = 10006, i[t[2e4] = "ACCESSHUB_INVALID_FRAME"] = 2e4, i[t[20001] = "ACCESSHUB_NEED_ENCRYPT"] = 20001, i[t[20002] = "ACCESSHUB_DECRYPT"] = 20002, i[t[20003] = "ACCESSHUB_MSGTYPE"] = 20003, i[t[20004] = "ACCESSHUB_UNMARSHAL"] = 20004, i[t[20005] = "ACCESSHUB_TIMEOUT"] = 20005, i[t[20006] = "ACCESSHUB_CONNECT"] = 20006, i[t[20007] = "ACCESSHUB_BROKEN"] = 20007, i[t[20008] = "ACCESSHUB_INTERNAL_ERROR"] = 20008, i[t[20009] = "ACCESSHUB_MARSHAL"] = 20009, i[t[20010] = "ACCESSHUB_UNSUPPORTED_SERVICE"] = 20010, i[t[20011] = "ACCESSHUB_TOO_FREQUENTLY"] = 20011, i[t[20012] = "ACCESSHUB_INVALID_APPID"] = 20012, i[t[20013] = "ACCESSHUB_HB_TIMEOUT"] = 20013, i[t[20014] = "ACCESSHUB_INVALID_SIGNATURE"] = 20014, i[t[20015] = "ACCESSHUB_AUTH_FAILED"] = 20015, i[t[3e4] = "ACCESSHUB_GET_STREAM_FAILED"] = 3e4, i[t[30001] = "ACCESSHUB_GET_CONN_FAILED"] = 30001, i[t[30002] = "ACCESSHUB_DO_HTTP_REQUEST_FAILED"] = 30002, i[t[30003] = "ACCESSHUB_UNMARSHAL_HB_FAILED"] = 30003, i[t[30004] = "ACCESSHUB_DO_BACKEND_DISPATCH_FAILED"] = 30004, i), r.Mode = (t = {}, (i = Object.create(t))[t[0] = "Mode_UNSET"] = 0, i[t[1] = "MODE_ONLINE"] = 1, i[t[2] = "MODE_TEST"] = 2, i[t[3] = "MODE_ALPHA"] = 3, i), r.Service = (t = {}, (i = Object.create(t))[t[0] = "SERVICE_UNSET"] = 0, i[t[1] = "SERVICE_MEDIAGW"] = 1, i[t[2] = "SERVICE_LIVEROOM"] = 2, i[t[3] = "SERVICE_MIX"] = 3, i[t[4] = "SERVICE_ZEUS"] = 4, i[t[5] = "SERVICE_ZPUSH"] = 5, i[t[6] = "SERVICE_L3"] = 6, i[t[7] = "SERVICE_TALKLINE"] = 7, i[t[8] = "SERVICE_EDUSUITE"] = 8, i[t[9] = "SERVICE_ZIM"] = 9, i[t[10] = "SERVICE_ClOUD_SETTING"] = 10, i[t[11] = "SERVICE_ZEUSHB"] = 11, i[t[12] = "SERVICE_USER_LOGIC"] = 12, i[t[13] = "SERVICE_UNIFYDISPATCH"] = 13, i[t[14] = "SERVICE_QUALITY"] = 14, i[t[15] = "SERVICE_SECURITY"] = 15, i[t[16] = "SERVICE_KTVCPR"] = 16, i[t[17] = "SERVICE_SWITCH4LIVEROOM"] = 17, i[t[18] = "SERVICE_WEBRTC_SIGNAL"] = 18, i[t[19] = "SERVICE_L3_WEBRTC_SIGNAL"] = 19, i[t[20] = "SERVICE_VIDEOCPR"] = 20, i[t[21] = "SERVICE_CDN"] = 21, i[t[22] = "SERVICE_CLOUDRECORD"] = 22, i[t[23] = "SERVICE_INNER_ECHO"] = 23, i[t[24] = "SERVICE_OUTER_ECHO"] = 24, i[t[25] = "SERVICE_LOCALHOST_ECHO"] = 25, i[t[26] = "SERVICE_ECHO"] = 26, i[t[27] = "SERVICE_DOCSERVICE"] = 27, i[t[28] = "SERVICE_AUTHSVR"] = 28, i[t[29] = "SERVICE_WEBLIVEROOM"] = 29, i[t[30] = "SERVICE_WHITEBOARD"] = 30, i[t[31] = "SERVICE_METAWORLD"] = 31, i[t[32] = "SERVICE_ZEGOLAND"] = 32, i), r.Method = (t = {}, (i = Object.create(t))[t[0] = "METHOD_UNSET"] = 0, i[t[1] = "METHOD_GET"] = 1, i[t[2] = "METHOD_POST"] = 2, i), r.SdkType = (t = {}, (i = Object.create(t))[t[0] = "SDK_TYPE_UNSET"] = 0, i[t[1] = "SDK_TYPE_QUIC_MTCP_NATIVE"] = 1, i[t[2] = "SDK_TYPE_WSS_NATIVE"] = 2, i[t[3] = "SDK_TYPE_WSS_WEB"] = 3, i), r.ZegoconnRunEnv = (t = {}, (i = Object.create(t))[t[0] = "ZEGOCONN_RUN_ENV_UNSET"] = 0, i[t[1] = "ZEGOCONN_RUN_ENV_BROWSER"] = 1, i[t[2] = "ZEGOCONN_RUN_ENV_APPLET"] = 2, i), r.BackendConnType = (t = {}, (i = Object.create(t))[t[0] = "BACKEND_CONN_TYPE_UNSET"] = 0, i[t[1] = "BACKEND_CONN_TYPE_TCP"] = 1, i[t[2] = "BACKEND_CONN_TYPE_WSS"] = 2, i), r.ConnectionClosed = (K.prototype.code = 0, K.prototype.msg = "", K.encode = function (e, t) { return t = t || n.create(), null != e.code && Object.hasOwnProperty.call(e, "code") && t.uint32(8).int32(e.code), null != e.msg && Object.hasOwnProperty.call(e, "msg") && t.uint32(18).string(e.msg), t }, K.decode = function (e, t) { e instanceof o || (e = o.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new a.proto_accesshub.ConnectionClosed; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.code = e.int32(); break; case 2: r.msg = e.string(); break; default: e.skipType(7 & i) } } return r }, K), r.StreamClosed = (Z.prototype.code = 0, Z.prototype.msg = "", Z.encode = function (e, t) { return t = t || n.create(), null != e.code && Object.hasOwnProperty.call(e, "code") && t.uint32(8).int32(e.code), null != e.msg && Object.hasOwnProperty.call(e, "msg") && t.uint32(18).string(e.msg), t }, Z.decode = function (e, t) { e instanceof o || (e = o.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new a.proto_accesshub.StreamClosed; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.code = e.int32(); break; case 2: r.msg = e.string(); break; default: e.skipType(7 & i) } } return r }, Z), r.CloseConnection = (F.prototype.reason = 0, F.prototype.msg = "", F.prototype.action = 0, F.encode = function (e, t) { return t = t || n.create(), null != e.reason && Object.hasOwnProperty.call(e, "reason") && t.uint32(8).int32(e.reason), null != e.msg && Object.hasOwnProperty.call(e, "msg") && t.uint32(18).string(e.msg), null != e.action && Object.hasOwnProperty.call(e, "action") && t.uint32(24).int32(e.action), t }, F.decode = function (e, t) { e instanceof o || (e = o.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new a.proto_accesshub.CloseConnection; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.reason = e.int32(); break; case 2: r.msg = e.string(); break; case 3: r.action = e.int32(); break; default: e.skipType(7 & i) } } return r }, F.Action = (t = {}, (i = Object.create(t))[t[0] = "ACTION_RESERVED"] = 0, i[t[1] = "ACTION_DISPATCH"] = 1, i[t[2] = "ACTION_RETRY"] = 2, i[t[3] = "ACTION_NEXT_NODE"] = 3, i[t[4] = "ACTION_ABORT"] = 4, i[t[5] = "ACTION_NEXT_GROUP"] = 5, i), F), r.HTTPRequest = (z.prototype.txid = s.Long ? s.Long.fromBits(0, 0, !0) : 0, z.prototype.appid = 0, z.prototype.biz_type = 0, z.prototype.mode = "", z.prototype.id_name = "", z.prototype.reqid = "", z.prototype.stick = "", z.prototype.service = "", z.prototype.location = "", z.prototype.method = "", z.prototype.headers = s.emptyArray, z.prototype.body = s.newBuffer([]), z.prototype.ack = !1, z.prototype.mode_no = 0, z.prototype.service_no = 0, z.prototype.method_no = 0, z.prototype.sdk_type = 0, z.prototype.zegoconn_run_env = 0, z.prototype.zegoconn_version = 0, z.encode = function (e, t) { if (t = t || n.create(), null != e.txid && Object.hasOwnProperty.call(e, "txid") && t.uint32(8).uint64(e.txid), null != e.appid && Object.hasOwnProperty.call(e, "appid") && t.uint32(16).uint32(e.appid), null != e.biz_type && Object.hasOwnProperty.call(e, "biz_type") && t.uint32(24).uint32(e.biz_type), null != e.mode && Object.hasOwnProperty.call(e, "mode") && t.uint32(34).string(e.mode), null != e.id_name && Object.hasOwnProperty.call(e, "id_name") && t.uint32(42).string(e.id_name), null != e.reqid && Object.hasOwnProperty.call(e, "reqid") && t.uint32(50).string(e.reqid), null != e.stick && Object.hasOwnProperty.call(e, "stick") && t.uint32(58).string(e.stick), null != e.service && Object.hasOwnProperty.call(e, "service") && t.uint32(66).string(e.service), null != e.location && Object.hasOwnProperty.call(e, "location") && t.uint32(74).string(e.location), null != e.method && Object.hasOwnProperty.call(e, "method") && t.uint32(82).string(e.method), null != e.headers && e.headers.length) for (var A = 0; A < e.headers.length; ++A)a.proto_accesshub.HTTPRequest.HTTPHeader.encode(e.headers[A], t.uint32(90).fork()).ldelim(); return null != e.body && Object.hasOwnProperty.call(e, "body") && t.uint32(98).bytes(e.body), null != e.ack && Object.hasOwnProperty.call(e, "ack") && t.uint32(104).bool(e.ack), null != e.mode_no && Object.hasOwnProperty.call(e, "mode_no") && t.uint32(112).int32(e.mode_no), null != e.service_no && Object.hasOwnProperty.call(e, "service_no") && t.uint32(120).int32(e.service_no), null != e.method_no && Object.hasOwnProperty.call(e, "method_no") && t.uint32(128).int32(e.method_no), null != e.sdk_type && Object.hasOwnProperty.call(e, "sdk_type") && t.uint32(136).int32(e.sdk_type), null != e.zegoconn_run_env && Object.hasOwnProperty.call(e, "zegoconn_run_env") && t.uint32(144).int32(e.zegoconn_run_env), null != e.zegoconn_version && Object.hasOwnProperty.call(e, "zegoconn_version") && t.uint32(152).uint32(e.zegoconn_version), t }, z.decode = function (e, t) { e instanceof o || (e = o.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new a.proto_accesshub.HTTPRequest; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.txid = e.uint64(); break; case 2: r.appid = e.uint32(); break; case 3: r.biz_type = e.uint32(); break; case 4: r.mode = e.string(); break; case 5: r.id_name = e.string(); break; case 6: r.reqid = e.string(); break; case 7: r.stick = e.string(); break; case 8: r.service = e.string(); break; case 9: r.location = e.string(); break; case 10: r.method = e.string(); break; case 11: r.headers && r.headers.length || (r.headers = []), r.headers.push(a.proto_accesshub.HTTPRequest.HTTPHeader.decode(e, e.uint32())); break; case 12: r.body = e.bytes(); break; case 13: r.ack = e.bool(); break; case 14: r.mode_no = e.int32(); break; case 15: r.service_no = e.int32(); break; case 16: r.method_no = e.int32(); break; case 17: r.sdk_type = e.int32(); break; case 18: r.zegoconn_run_env = e.int32(); break; case 19: r.zegoconn_version = e.uint32(); break; default: e.skipType(7 & i) } } return r }, z.HTTPHeader = (V.prototype.name = "", V.prototype.val = "", V.encode = function (e, t) { return t = t || n.create(), null != e.name && Object.hasOwnProperty.call(e, "name") && t.uint32(10).string(e.name), null != e.val && Object.hasOwnProperty.call(e, "val") && t.uint32(18).string(e.val), t }, V.decode = function (e, t) { e instanceof o || (e = o.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new a.proto_accesshub.HTTPRequest.HTTPHeader; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.name = e.string(); break; case 2: r.val = e.string(); break; default: e.skipType(7 & i) } } return r }, V), z), r.HTTPResponse = (G.prototype.txid = s.Long ? s.Long.fromBits(0, 0, !0) : 0, G.prototype.headers = s.emptyArray, G.prototype.status_code = 0, G.prototype.body = s.newBuffer([]), G.encode = function (e, t) { if (t = t || n.create(), null != e.txid && Object.hasOwnProperty.call(e, "txid") && t.uint32(8).uint64(e.txid), null != e.headers && e.headers.length) for (var A = 0; A < e.headers.length; ++A)a.proto_accesshub.HTTPRequest.HTTPHeader.encode(e.headers[A], t.uint32(18).fork()).ldelim(); return null != e.status_code && Object.hasOwnProperty.call(e, "status_code") && t.uint32(24).int32(e.status_code), null != e.body && Object.hasOwnProperty.call(e, "body") && t.uint32(34).bytes(e.body), t }, G.decode = function (e, t) { e instanceof o || (e = o.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new a.proto_accesshub.HTTPResponse; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.txid = e.uint64(); break; case 2: r.headers && r.headers.length || (r.headers = []), r.headers.push(a.proto_accesshub.HTTPRequest.HTTPHeader.decode(e, e.uint32())); break; case 3: r.status_code = e.int32(); break; case 4: r.body = e.bytes(); break; default: e.skipType(7 & i) } } return r }, G), r.HTTPRequestAck = (q.prototype.txid = s.Long ? s.Long.fromBits(0, 0, !0) : 0, q.encode = function (e, t) { return t = t || n.create(), null != e.txid && Object.hasOwnProperty.call(e, "txid") && t.uint32(8).uint64(e.txid), t }, q.decode = function (e, t) { e instanceof o || (e = o.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new a.proto_accesshub.HTTPRequestAck; e.pos < A;) { var i = e.uint32(); i >>> 3 == 1 ? r.txid = e.uint64() : e.skipType(7 & i) } return r }, q), r.HTTPRequestDroped = (B.prototype.txid = s.Long ? s.Long.fromBits(0, 0, !0) : 0, B.prototype.reason = 0, B.prototype.msg = "", B.encode = function (e, t) { return t = t || n.create(), null != e.txid && Object.hasOwnProperty.call(e, "txid") && t.uint32(8).uint64(e.txid), null != e.reason && Object.hasOwnProperty.call(e, "reason") && t.uint32(16).int32(e.reason), null != e.msg && Object.hasOwnProperty.call(e, "msg") && t.uint32(26).string(e.msg), t }, B.decode = function (e, t) { e instanceof o || (e = o.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new a.proto_accesshub.HTTPRequestDroped; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.txid = e.uint64(); break; case 2: r.reason = e.int32(); break; case 3: r.msg = e.string(); break; default: e.skipType(7 & i) } } return r }, B), r.ProxyConnectionClosed = (x.prototype.code = 0, x.prototype.msg = "", x.prototype.connected = 0, x.encode = function (e, t) { return t = t || n.create(), null != e.code && Object.hasOwnProperty.call(e, "code") && t.uint32(8).int32(e.code), null != e.msg && Object.hasOwnProperty.call(e, "msg") && t.uint32(18).string(e.msg), null != e.connected && Object.hasOwnProperty.call(e, "connected") && t.uint32(24).int32(e.connected), t }, x.decode = function (e, t) { e instanceof o || (e = o.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new a.proto_accesshub.ProxyConnectionClosed; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.code = e.int32(); break; case 2: r.msg = e.string(); break; case 3: r.connected = e.int32(); break; default: e.skipType(7 & i) } } return r }, x), r.HBRequest = (j.prototype.txid = s.Long ? s.Long.fromBits(0, 0, !0) : 0, j.prototype.ts = s.Long ? s.Long.fromBits(0, 0, !1) : 0, j.encode = function (e, t) { return t = t || n.create(), null != e.txid && Object.hasOwnProperty.call(e, "txid") && t.uint32(8).uint64(e.txid), null != e.ts && Object.hasOwnProperty.call(e, "ts") && t.uint32(16).int64(e.ts), t }, j.decode = function (e, t) { e instanceof o || (e = o.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new a.proto_accesshub.HBRequest; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.txid = e.uint64(); break; case 2: r.ts = e.int64(); break; default: e.skipType(7 & i) } } return r }, j), r.HBResponse = (U.prototype.txid = s.Long ? s.Long.fromBits(0, 0, !0) : 0, U.prototype.ts = s.Long ? s.Long.fromBits(0, 0, !1) : 0, U.prototype.ntp_time = s.Long ? s.Long.fromBits(0, 0, !0) : 0, U.encode = function (e, t) { return t = t || n.create(), null != e.txid && Object.hasOwnProperty.call(e, "txid") && t.uint32(8).uint64(e.txid), null != e.ts && Object.hasOwnProperty.call(e, "ts") && t.uint32(16).int64(e.ts), null != e.ntp_time && Object.hasOwnProperty.call(e, "ntp_time") && t.uint32(24).uint64(e.ntp_time), t }, U.decode = function (e, t) { e instanceof o || (e = o.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new a.proto_accesshub.HBResponse; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.txid = e.uint64(); break; case 2: r.ts = e.int64(); break; case 3: r.ntp_time = e.uint64(); break; default: e.skipType(7 & i) } } return r }, U), r.GetConfigRequest = (H.prototype.txid = s.Long ? s.Long.fromBits(0, 0, !0) : 0, H.prototype.appid = 0, H.prototype.biz_type = 0, H.prototype.mode = "", H.prototype.id_name = "", H.prototype.reqid = "", H.prototype.zegoconn_version = 0, H.prototype.sdk_type = 0, H.prototype.zegoconn_run_env = 0, H.encode = function (e, t) { return t = t || n.create(), null != e.txid && Object.hasOwnProperty.call(e, "txid") && t.uint32(8).uint64(e.txid), null != e.appid && Object.hasOwnProperty.call(e, "appid") && t.uint32(16).uint32(e.appid), null != e.biz_type && Object.hasOwnProperty.call(e, "biz_type") && t.uint32(24).uint32(e.biz_type), null != e.mode && Object.hasOwnProperty.call(e, "mode") && t.uint32(34).string(e.mode), null != e.id_name && Object.hasOwnProperty.call(e, "id_name") && t.uint32(42).string(e.id_name), null != e.reqid && Object.hasOwnProperty.call(e, "reqid") && t.uint32(50).string(e.reqid), null != e.zegoconn_version && Object.hasOwnProperty.call(e, "zegoconn_version") && t.uint32(56).uint32(e.zegoconn_version), null != e.sdk_type && Object.hasOwnProperty.call(e, "sdk_type") && t.uint32(64).int32(e.sdk_type), null != e.zegoconn_run_env && Object.hasOwnProperty.call(e, "zegoconn_run_env") && t.uint32(72).int32(e.zegoconn_run_env), t }, H.decode = function (e, t) { e instanceof o || (e = o.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new a.proto_accesshub.GetConfigRequest; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.txid = e.uint64(); break; case 2: r.appid = e.uint32(); break; case 3: r.biz_type = e.uint32(); break; case 4: r.mode = e.string(); break; case 5: r.id_name = e.string(); break; case 6: r.reqid = e.string(); break; case 7: r.zegoconn_version = e.uint32(); break; case 8: r.sdk_type = e.int32(); break; case 9: r.zegoconn_run_env = e.int32(); break; default: e.skipType(7 & i) } } return r }, H), r.GetConfigResponseData = (D.prototype.txid = s.Long ? s.Long.fromBits(0, 0, !0) : 0, D.prototype.quic_hb_interval = 0, D.prototype.quic_hb_timeout = 0, D.prototype.logic_hb_interval = 0, D.prototype.logic_hb_timeout = 0, D.prototype.pc_establish_timeout = 0, D.prototype.sdk_link_detect_interval = 0, D.prototype.sdk_link_detect_duration = 0, D.prototype.client_outer_ip = "", D.prototype.ntp_time = s.Long ? s.Long.fromBits(0, 0, !0) : 0, D.encode = function (e, t) { return t = t || n.create(), null != e.txid && Object.hasOwnProperty.call(e, "txid") && t.uint32(8).uint64(e.txid), null != e.quic_hb_interval && Object.hasOwnProperty.call(e, "quic_hb_interval") && t.uint32(16).uint32(e.quic_hb_interval), null != e.quic_hb_timeout && Object.hasOwnProperty.call(e, "quic_hb_timeout") && t.uint32(24).uint32(e.quic_hb_timeout), null != e.logic_hb_interval && Object.hasOwnProperty.call(e, "logic_hb_interval") && t.uint32(32).uint32(e.logic_hb_interval), null != e.logic_hb_timeout && Object.hasOwnProperty.call(e, "logic_hb_timeout") && t.uint32(40).uint32(e.logic_hb_timeout), null != e.pc_establish_timeout && Object.hasOwnProperty.call(e, "pc_establish_timeout") && t.uint32(48).uint32(e.pc_establish_timeout), null != e.sdk_link_detect_interval && Object.hasOwnProperty.call(e, "sdk_link_detect_interval") && t.uint32(56).uint32(e.sdk_link_detect_interval), null != e.sdk_link_detect_duration && Object.hasOwnProperty.call(e, "sdk_link_detect_duration") && t.uint32(64).uint32(e.sdk_link_detect_duration), null != e.client_outer_ip && Object.hasOwnProperty.call(e, "client_outer_ip") && t.uint32(74).string(e.client_outer_ip), null != e.ntp_time && Object.hasOwnProperty.call(e, "ntp_time") && t.uint32(80).uint64(e.ntp_time), t }, D.decode = function (e, t) { e instanceof o || (e = o.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new a.proto_accesshub.GetConfigResponseData; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.txid = e.uint64(); break; case 2: r.quic_hb_interval = e.uint32(); break; case 3: r.quic_hb_timeout = e.uint32(); break; case 4: r.logic_hb_interval = e.uint32(); break; case 5: r.logic_hb_timeout = e.uint32(); break; case 6: r.pc_establish_timeout = e.uint32(); break; case 7: r.sdk_link_detect_interval = e.uint32(); break; case 8: r.sdk_link_detect_duration = e.uint32(); break; case 9: r.client_outer_ip = e.string(); break; case 10: r.ntp_time = e.uint64(); break; default: e.skipType(7 & i) } } return r }, D), r.GetConfigResponse = (A.prototype.code = 0, A.prototype.message = "", A.prototype.data = null, A.encode = function (e, t) { return t = t || n.create(), null != e.code && Object.hasOwnProperty.call(e, "code") && t.uint32(8).int32(e.code), null != e.message && Object.hasOwnProperty.call(e, "message") && t.uint32(18).string(e.message), null != e.data && Object.hasOwnProperty.call(e, "data") && a.proto_accesshub.GetConfigResponseData.encode(e.data, t.uint32(26).fork()).ldelim(), t }, A.decode = function (e, t) { e instanceof o || (e = o.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new a.proto_accesshub.GetConfigResponse; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.code = e.int32(); break; case 2: r.message = e.string(); break; case 3: r.data = a.proto_accesshub.GetConfigResponseData.decode(e, e.uint32()); break; default: e.skipType(7 & i) } } return r }, A), r.PCUpwardMessage = (P.prototype.txid = s.Long ? s.Long.fromBits(0, 0, !0) : 0, P.prototype.appid = 0, P.prototype.biz_type = 0, P.prototype.mode_no = 0, P.prototype.id_name = "", P.prototype.service_no = 0, P.prototype.ack = !1, P.prototype.payload = s.newBuffer([]), P.prototype.sdk_type = 0, P.prototype.wss_message_type = 0, P.prototype.wss_path = "", P.prototype.wss_raw_query = "", P.prototype.zegoconn_version = 0, P.prototype.zegoconn_run_env = 0, P.prototype.backend_conn_type = 0, P.encode = function (e, t) { return t = t || n.create(), null != e.txid && Object.hasOwnProperty.call(e, "txid") && t.uint32(8).uint64(e.txid), null != e.appid && Object.hasOwnProperty.call(e, "appid") && t.uint32(16).uint32(e.appid), null != e.biz_type && Object.hasOwnProperty.call(e, "biz_type") && t.uint32(24).uint32(e.biz_type), null != e.mode_no && Object.hasOwnProperty.call(e, "mode_no") && t.uint32(32).int32(e.mode_no), null != e.id_name && Object.hasOwnProperty.call(e, "id_name") && t.uint32(42).string(e.id_name), null != e.service_no && Object.hasOwnProperty.call(e, "service_no") && t.uint32(48).int32(e.service_no), null != e.ack && Object.hasOwnProperty.call(e, "ack") && t.uint32(56).bool(e.ack), null != e.payload && Object.hasOwnProperty.call(e, "payload") && t.uint32(66).bytes(e.payload), null != e.sdk_type && Object.hasOwnProperty.call(e, "sdk_type") && t.uint32(72).int32(e.sdk_type), null != e.wss_message_type && Object.hasOwnProperty.call(e, "wss_message_type") && t.uint32(80).uint32(e.wss_message_type), null != e.wss_path && Object.hasOwnProperty.call(e, "wss_path") && t.uint32(90).string(e.wss_path), null != e.wss_raw_query && Object.hasOwnProperty.call(e, "wss_raw_query") && t.uint32(98).string(e.wss_raw_query), null != e.zegoconn_version && Object.hasOwnProperty.call(e, "zegoconn_version") && t.uint32(104).uint32(e.zegoconn_version), null != e.zegoconn_run_env && Object.hasOwnProperty.call(e, "zegoconn_run_env") && t.uint32(112).int32(e.zegoconn_run_env), null != e.backend_conn_type && Object.hasOwnProperty.call(e, "backend_conn_type") && t.uint32(120).int32(e.backend_conn_type), t }, P.decode = function (e, t) { e instanceof o || (e = o.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new a.proto_accesshub.PCUpwardMessage; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.txid = e.uint64(); break; case 2: r.appid = e.uint32(); break; case 3: r.biz_type = e.uint32(); break; case 4: r.mode_no = e.int32(); break; case 5: r.id_name = e.string(); break; case 6: r.service_no = e.int32(); break; case 7: r.ack = e.bool(); break; case 8: r.payload = e.bytes(); break; case 9: r.sdk_type = e.int32(); break; case 10: r.wss_message_type = e.uint32(); break; case 11: r.wss_path = e.string(); break; case 12: r.wss_raw_query = e.string(); break; case 13: r.zegoconn_version = e.uint32(); break; case 14: r.zegoconn_run_env = e.int32(); break; case 15: r.backend_conn_type = e.int32(); break; default: e.skipType(7 & i) } } return r }, P), r.PCUpwardMessageAck = (L.prototype.txid = s.Long ? s.Long.fromBits(0, 0, !0) : 0, L.encode = function (e, t) { return t = t || n.create(), null != e.txid && Object.hasOwnProperty.call(e, "txid") && t.uint32(8).uint64(e.txid), t }, L.decode = function (e, t) { e instanceof o || (e = o.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new a.proto_accesshub.PCUpwardMessageAck; e.pos < A;) { var i = e.uint32(); i >>> 3 == 1 ? r.txid = e.uint64() : e.skipType(7 & i) } return r }, L), r.PCEstablished = (M.prototype.elapse = 0, M.prototype.from = 0, M.encode = function (e, t) { return t = t || n.create(), null != e.elapse && Object.hasOwnProperty.call(e, "elapse") && t.uint32(8).uint32(e.elapse), null != e.from && Object.hasOwnProperty.call(e, "from") && t.uint32(16).uint32(e.from), t }, M.decode = function (e, t) { e instanceof o || (e = o.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new a.proto_accesshub.PCEstablished; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.elapse = e.uint32(); break; case 2: r.from = e.uint32(); break; default: e.skipType(7 & i) } } return r }, M), r.PCBroken = (I.encode = function (e, t) { return t || n.create() }, I.decode = function (e, t) { e instanceof o || (e = o.create(e)); var A = void 0 === t ? e.len : e.pos + t; for (t = new a.proto_accesshub.PCBroken; e.pos < A;) { var r = e.uint32(); e.skipType(7 & r) } return t }, I), r.PCDownwardMessage = (N.prototype.payload = s.newBuffer([]), N.prototype.wss_message_type = 0, N.prototype.ts = s.Long ? s.Long.fromBits(0, 0, !0) : 0, N.encode = function (e, t) { return t = t || n.create(), null != e.payload && Object.hasOwnProperty.call(e, "payload") && t.uint32(10).bytes(e.payload), null != e.wss_message_type && Object.hasOwnProperty.call(e, "wss_message_type") && t.uint32(16).uint32(e.wss_message_type), null != e.ts && Object.hasOwnProperty.call(e, "ts") && t.uint32(24).uint64(e.ts), t }, N.decode = function (e, t) { e instanceof o || (e = o.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new a.proto_accesshub.PCDownwardMessage; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.payload = e.bytes(); break; case 2: r.wss_message_type = e.uint32(); break; case 3: r.ts = e.uint64(); break; default: e.skipType(7 & i) } } return r }, N), r.Redirect = (w.prototype.rand = "", w.prototype.secret = "", w.prototype.groups = s.emptyArray, w.prototype.opt_ports = s.emptyArray, w.prototype.wss_groups = s.emptyArray, w.encode = function (e, t) { if (t = t || n.create(), null != e.rand && Object.hasOwnProperty.call(e, "rand") && t.uint32(10).string(e.rand), null != e.secret && Object.hasOwnProperty.call(e, "secret") && t.uint32(18).string(e.secret), null != e.groups && e.groups.length) for (var A = 0; A < e.groups.length; ++A)a.proto_accesshub.AccesshubDispatchGroup.encode(e.groups[A], t.uint32(26).fork()).ldelim(); if (null != e.opt_ports && e.opt_ports.length) for (var r = 0; r < e.opt_ports.length; ++r)t.uint32(32).uint32(e.opt_ports[r]); if (null != e.wss_groups && e.wss_groups.length) for (var i = 0; i < e.wss_groups.length; ++i)a.proto_accesshub.WssAccesshubDispatchGroup.encode(e.wss_groups[i], t.uint32(42).fork()).ldelim(); return t }, w.decode = function (e, t) { e instanceof o || (e = o.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new a.proto_accesshub.Redirect; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.rand = e.string(); break; case 2: r.secret = e.string(); break; case 3: r.groups && r.groups.length || (r.groups = []), r.groups.push(a.proto_accesshub.AccesshubDispatchGroup.decode(e, e.uint32())); break; case 4: if (r.opt_ports && r.opt_ports.length || (r.opt_ports = []), 2 == (7 & i)) for (var n = e.uint32() + e.pos; e.pos < n;)r.opt_ports.push(e.uint32()); else r.opt_ports.push(e.uint32()); break; case 5: r.wss_groups && r.wss_groups.length || (r.wss_groups = []), r.wss_groups.push(a.proto_accesshub.WssAccesshubDispatchGroup.decode(e, e.uint32())); break; default: e.skipType(7 & i) } } return r }, w), r.GetAppConfigRequest = (C.prototype.txid = s.Long ? s.Long.fromBits(0, 0, !0) : 0, C.prototype.appid = 0, C.prototype.biz_type = 0, C.prototype.mode_no = 0, C.prototype.id_name = "", C.prototype.config_key = "", C.prototype.ts = s.Long ? s.Long.fromBits(0, 0, !0) : 0, C.prototype.signature = s.newBuffer([]), C.prototype.lite_sign = "", C.prototype.token = "", C.prototype.sdk_type = 0, C.prototype.zegoconn_version = 0, C.prototype.zegoconn_run_env = 0, C.encode = function (e, t) { return t = t || n.create(), null != e.txid && Object.hasOwnProperty.call(e, "txid") && t.uint32(8).uint64(e.txid), null != e.appid && Object.hasOwnProperty.call(e, "appid") && t.uint32(16).uint32(e.appid), null != e.biz_type && Object.hasOwnProperty.call(e, "biz_type") && t.uint32(24).uint32(e.biz_type), null != e.mode_no && Object.hasOwnProperty.call(e, "mode_no") && t.uint32(32).int32(e.mode_no), null != e.id_name && Object.hasOwnProperty.call(e, "id_name") && t.uint32(42).string(e.id_name), null != e.config_key && Object.hasOwnProperty.call(e, "config_key") && t.uint32(50).string(e.config_key), null != e.ts && Object.hasOwnProperty.call(e, "ts") && t.uint32(56).uint64(e.ts), null != e.signature && Object.hasOwnProperty.call(e, "signature") && t.uint32(66).bytes(e.signature), null != e.lite_sign && Object.hasOwnProperty.call(e, "lite_sign") && t.uint32(74).string(e.lite_sign), null != e.token && Object.hasOwnProperty.call(e, "token") && t.uint32(82).string(e.token), null != e.sdk_type && Object.hasOwnProperty.call(e, "sdk_type") && t.uint32(88).int32(e.sdk_type), null != e.zegoconn_version && Object.hasOwnProperty.call(e, "zegoconn_version") && t.uint32(96).uint32(e.zegoconn_version), null != e.zegoconn_run_env && Object.hasOwnProperty.call(e, "zegoconn_run_env") && t.uint32(104).int32(e.zegoconn_run_env), t }, C.decode = function (e, t) { e instanceof o || (e = o.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new a.proto_accesshub.GetAppConfigRequest; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.txid = e.uint64(); break; case 2: r.appid = e.uint32(); break; case 3: r.biz_type = e.uint32(); break; case 4: r.mode_no = e.int32(); break; case 5: r.id_name = e.string(); break; case 6: r.config_key = e.string(); break; case 7: r.ts = e.uint64(); break; case 8: r.signature = e.bytes(); break; case 9: r.lite_sign = e.string(); break; case 10: r.token = e.string(); break; case 11: r.sdk_type = e.int32(); break; case 12: r.zegoconn_version = e.uint32(); break; case 13: r.zegoconn_run_env = e.int32(); break; default: e.skipType(7 & i) } } return r }, C), r.GetAppConfigResponseData = (R.prototype.txid = s.Long ? s.Long.fromBits(0, 0, !0) : 0, R.prototype.data = s.newBuffer([]), R.prototype.ts = s.Long ? s.Long.fromBits(0, 0, !0) : 0, R.encode = function (e, t) { return t = t || n.create(), null != e.txid && Object.hasOwnProperty.call(e, "txid") && t.uint32(8).uint64(e.txid), null != e.data && Object.hasOwnProperty.call(e, "data") && t.uint32(18).bytes(e.data), null != e.ts && Object.hasOwnProperty.call(e, "ts") && t.uint32(24).uint64(e.ts), t }, R.decode = function (e, t) { e instanceof o || (e = o.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new a.proto_accesshub.GetAppConfigResponseData; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.txid = e.uint64(); break; case 2: r.data = e.bytes(); break; case 3: r.ts = e.uint64(); break; default: e.skipType(7 & i) } } return r }, R), r.GetAppConfigResponse = (k.prototype.code = 0, k.prototype.message = "", k.prototype.data = null, k.encode = function (e, t) { return t = t || n.create(), null != e.code && Object.hasOwnProperty.call(e, "code") && t.uint32(8).int32(e.code), null != e.message && Object.hasOwnProperty.call(e, "message") && t.uint32(18).string(e.message), null != e.data && Object.hasOwnProperty.call(e, "data") && a.proto_accesshub.GetAppConfigResponseData.encode(e.data, t.uint32(26).fork()).ldelim(), t }, k.decode = function (e, t) { e instanceof o || (e = o.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new a.proto_accesshub.GetAppConfigResponse; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.code = e.int32(); break; case 2: r.message = e.string(); break; case 3: r.data = a.proto_accesshub.GetAppConfigResponseData.decode(e, e.uint32()); break; default: e.skipType(7 & i) } } return r }, k), r.PushAppConfig = (T.prototype.config_key = "", T.prototype.data = s.newBuffer([]), T.encode = function (e, t) { return t = t || n.create(), null != e.config_key && Object.hasOwnProperty.call(e, "config_key") && t.uint32(10).string(e.config_key), null != e.data && Object.hasOwnProperty.call(e, "data") && t.uint32(18).bytes(e.data), t }, T.decode = function (e, t) { e instanceof o || (e = o.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new a.proto_accesshub.PushAppConfig; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.config_key = e.string(); break; case 2: r.data = e.bytes(); break; default: e.skipType(7 & i) } } return r }, T), r.AccesshubDispatchRequest = (S.prototype.txid = s.Long ? s.Long.fromBits(0, 0, !0) : 0, S.prototype.appid = 0, S.prototype.biz_type = 0, S.prototype.mode_no = 0, S.prototype.id_name = "", S.prototype.sdk_type = 0, S.prototype.zegoconn_version = 0, S.prototype.zegoconn_run_env = 0, S.encode = function (e, t) { return t = t || n.create(), null != e.txid && Object.hasOwnProperty.call(e, "txid") && t.uint32(8).uint64(e.txid), null != e.appid && Object.hasOwnProperty.call(e, "appid") && t.uint32(16).uint32(e.appid), null != e.biz_type && Object.hasOwnProperty.call(e, "biz_type") && t.uint32(24).uint32(e.biz_type), null != e.mode_no && Object.hasOwnProperty.call(e, "mode_no") && t.uint32(32).int32(e.mode_no), null != e.id_name && Object.hasOwnProperty.call(e, "id_name") && t.uint32(42).string(e.id_name), null != e.sdk_type && Object.hasOwnProperty.call(e, "sdk_type") && t.uint32(48).int32(e.sdk_type), null != e.zegoconn_version && Object.hasOwnProperty.call(e, "zegoconn_version") && t.uint32(56).uint32(e.zegoconn_version), null != e.zegoconn_run_env && Object.hasOwnProperty.call(e, "zegoconn_run_env") && t.uint32(64).int32(e.zegoconn_run_env), t }, S.decode = function (e, t) { e instanceof o || (e = o.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new a.proto_accesshub.AccesshubDispatchRequest; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.txid = e.uint64(); break; case 2: r.appid = e.uint32(); break; case 3: r.biz_type = e.uint32(); break; case 4: r.mode_no = e.int32(); break; case 5: r.id_name = e.string(); break; case 6: r.sdk_type = e.int32(); break; case 7: r.zegoconn_version = e.uint32(); break; case 8: r.zegoconn_run_env = e.int32(); break; default: e.skipType(7 & i) } } return r }, S), r.AccesshubDispatchGroup = (O.prototype.group = "", O.prototype.quic_nodes = s.emptyArray, O.prototype.mtcp_nodes = s.emptyArray, O.prototype.wss_nodes = s.emptyArray, O.encode = function (e, t) { if (t = t || n.create(), null != e.group && Object.hasOwnProperty.call(e, "group") && t.uint32(10).string(e.group), null != e.quic_nodes && e.quic_nodes.length) for (var A = 0; A < e.quic_nodes.length; ++A)t.uint32(18).string(e.quic_nodes[A]); if (null != e.mtcp_nodes && e.mtcp_nodes.length) for (var r = 0; r < e.mtcp_nodes.length; ++r)t.uint32(26).string(e.mtcp_nodes[r]); if (null != e.wss_nodes && e.wss_nodes.length) for (var i = 0; i < e.wss_nodes.length; ++i)t.uint32(34).string(e.wss_nodes[i]); return t }, O.decode = function (e, t) { e instanceof o || (e = o.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new a.proto_accesshub.AccesshubDispatchGroup; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.group = e.string(); break; case 2: r.quic_nodes && r.quic_nodes.length || (r.quic_nodes = []), r.quic_nodes.push(e.string()); break; case 3: r.mtcp_nodes && r.mtcp_nodes.length || (r.mtcp_nodes = []), r.mtcp_nodes.push(e.string()); break; case 4: r.wss_nodes && r.wss_nodes.length || (r.wss_nodes = []), r.wss_nodes.push(e.string()); break; default: e.skipType(7 & i) } } return r }, O), r.WssAccesshubDispatchGroup = (E.prototype.group = "", E.prototype.host = "", E.prototype.main_domain = "", E.encode = function (e, t) { return t = t || n.create(), null != e.group && Object.hasOwnProperty.call(e, "group") && t.uint32(10).string(e.group), null != e.host && Object.hasOwnProperty.call(e, "host") && t.uint32(18).string(e.host), null != e.main_domain && Object.hasOwnProperty.call(e, "main_domain") && t.uint32(26).string(e.main_domain), t }, E.decode = function (e, t) { e instanceof o || (e = o.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new a.proto_accesshub.WssAccesshubDispatchGroup; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.group = e.string(); break; case 2: r.host = e.string(); break; case 3: r.main_domain = e.string(); break; default: e.skipType(7 & i) } } return r }, E), r.AccesshubDispatchResponseData = (b.prototype.txid = s.Long ? s.Long.fromBits(0, 0, !0) : 0, b.prototype.rand = "", b.prototype.secret = "", b.prototype.groups = s.emptyArray, b.prototype.opt_ports = s.emptyArray, b.prototype.wss_groups = s.emptyArray, b.encode = function (e, t) { if (t = t || n.create(), null != e.txid && Object.hasOwnProperty.call(e, "txid") && t.uint32(8).uint64(e.txid), null != e.rand && Object.hasOwnProperty.call(e, "rand") && t.uint32(18).string(e.rand), null != e.secret && Object.hasOwnProperty.call(e, "secret") && t.uint32(26).string(e.secret), null != e.groups && e.groups.length) for (var A = 0; A < e.groups.length; ++A)a.proto_accesshub.AccesshubDispatchGroup.encode(e.groups[A], t.uint32(34).fork()).ldelim(); if (null != e.opt_ports && e.opt_ports.length) for (var r = 0; r < e.opt_ports.length; ++r)t.uint32(40).uint32(e.opt_ports[r]); if (null != e.wss_groups && e.wss_groups.length) for (var i = 0; i < e.wss_groups.length; ++i)a.proto_accesshub.WssAccesshubDispatchGroup.encode(e.wss_groups[i], t.uint32(50).fork()).ldelim(); return t }, b.decode = function (e, t) { e instanceof o || (e = o.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new a.proto_accesshub.AccesshubDispatchResponseData; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.txid = e.uint64(); break; case 2: r.rand = e.string(); break; case 3: r.secret = e.string(); break; case 4: r.groups && r.groups.length || (r.groups = []), r.groups.push(a.proto_accesshub.AccesshubDispatchGroup.decode(e, e.uint32())); break; case 5: if (r.opt_ports && r.opt_ports.length || (r.opt_ports = []), 2 == (7 & i)) for (var n = e.uint32() + e.pos; e.pos < n;)r.opt_ports.push(e.uint32()); else r.opt_ports.push(e.uint32()); break; case 6: r.wss_groups && r.wss_groups.length || (r.wss_groups = []), r.wss_groups.push(a.proto_accesshub.WssAccesshubDispatchGroup.decode(e, e.uint32())); break; default: e.skipType(7 & i) } } return r }, b), r.AccesshubDispatchResponse = (v.prototype.code = 0, v.prototype.message = "", v.prototype.data = null, v.encode = function (e, t) { return t = t || n.create(), null != e.code && Object.hasOwnProperty.call(e, "code") && t.uint32(8).int32(e.code), null != e.message && Object.hasOwnProperty.call(e, "message") && t.uint32(18).string(e.message), null != e.data && Object.hasOwnProperty.call(e, "data") && a.proto_accesshub.AccesshubDispatchResponseData.encode(e.data, t.uint32(26).fork()).ldelim(), t }, v.decode = function (e, t) { e instanceof o || (e = o.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new a.proto_accesshub.AccesshubDispatchResponse; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.code = e.int32(); break; case 2: r.message = e.string(); break; case 3: r.data = a.proto_accesshub.AccesshubDispatchResponseData.decode(e, e.uint32()); break; default: e.skipType(7 & i) } } return r }, v), r.PushException = (y.prototype.reason = 0, y.prototype.msg = "", y.prototype.txid = s.Long ? s.Long.fromBits(0, 0, !0) : 0, y.encode = function (e, t) { return t = t || n.create(), null != e.reason && Object.hasOwnProperty.call(e, "reason") && t.uint32(8).int32(e.reason), null != e.msg && Object.hasOwnProperty.call(e, "msg") && t.uint32(18).string(e.msg), null != e.txid && Object.hasOwnProperty.call(e, "txid") && t.uint32(24).uint64(e.txid), t }, y.decode = function (e, t) { e instanceof o || (e = o.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new a.proto_accesshub.PushException; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.reason = e.int32(); break; case 2: r.msg = e.string(); break; case 3: r.txid = e.uint64(); break; default: e.skipType(7 & i) } } return r }, y), r), u = a.proto_initconfig = ((t = {}).ResourceType = (i = {}, (r = Object.create(i))[i[0] = "CDN"] = 0, r[i[1] = "RTC"] = 1, r[i[2] = "L3"] = 2, r[i[3] = "CDN_PLUS"] = 3, r[i[4] = "CDN_PLUS_BACKUP"] = 4, r), t.ProtocolType = (i = {}, (r = Object.create(i))[i[0] = "UDP"] = 0, r[i[1] = "RTMP"] = 1, r[i[2] = "FLV"] = 2, r[i[3] = "HLS"] = 3, r[i[4] = "WEBRTC"] = 4, r), t.ResolveType = (i = {}, (r = Object.create(i))[i[0] = "LOCAL_DNS"] = 0, r[i[1] = "DISPATCH"] = 1, r), t.AppConfig = (m.prototype.test_id = null, m.prototype.domain = null, m.prototype.flexible_domain = null, m.prototype.replace_flexible_domain = null, Object.defineProperty(m.prototype, "_test_id", { "get": s.oneOfGetter(i = ["test_id"]), "set": s.oneOfSetter(i) }), Object.defineProperty(m.prototype, "_domain", { "get": s.oneOfGetter(i = ["domain"]), "set": s.oneOfSetter(i) }), Object.defineProperty(m.prototype, "_flexible_domain", { "get": s.oneOfGetter(i = ["flexible_domain"]), "set": s.oneOfSetter(i) }), Object.defineProperty(m.prototype, "_replace_flexible_domain", { "get": s.oneOfGetter(i = ["replace_flexible_domain"]), "set": s.oneOfSetter(i) }), m.encode = function (e, t) { return t = t || n.create(), null != e.test_id && Object.hasOwnProperty.call(e, "test_id") && t.uint32(8).int32(e.test_id), null != e.domain && Object.hasOwnProperty.call(e, "domain") && t.uint32(18).string(e.domain), null != e.flexible_domain && Object.hasOwnProperty.call(e, "flexible_domain") && t.uint32(26).string(e.flexible_domain), null != e.replace_flexible_domain && Object.hasOwnProperty.call(e, "replace_flexible_domain") && t.uint32(34).string(e.replace_flexible_domain), t }, m.decode = function (e, t) { e instanceof o || (e = o.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new a.proto_initconfig.AppConfig; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.test_id = e.int32(); break; case 2: r.domain = e.string(); break; case 3: r.flexible_domain = e.string(); break; case 4: r.replace_flexible_domain = e.string(); break; default: e.skipType(7 & i) } } return r }, m), t.SpeedlogConfig = (g.prototype.report_count = null, g.prototype.report_retry_interval = null, g.prototype.push_quality_sample_count = null, g.prototype.pull_quality_sample_count = null, g.prototype.hardware_report_cycle = null, g.prototype.room_user_max_count = null, g.prototype.room_stream_max_count = null, g.prototype.charge_info_report_cycle = null, g.prototype.charge_info_report_mode = null, g.prototype.disable_report_pull = s.emptyArray, g.prototype.report_max_bytes = null, g.prototype.push_quality_report_freq = null, g.prototype.pull_quality_report_freq = null, g.prototype.charge_info_report_no_playing = null, Object.defineProperty(g.prototype, "_report_count", { "get": s.oneOfGetter(r = ["report_count"]), "set": s.oneOfSetter(r) }), Object.defineProperty(g.prototype, "_report_retry_interval", { "get": s.oneOfGetter(r = ["report_retry_interval"]), "set": s.oneOfSetter(r) }), Object.defineProperty(g.prototype, "_push_quality_sample_count", { "get": s.oneOfGetter(r = ["push_quality_sample_count"]), "set": s.oneOfSetter(r) }), Object.defineProperty(g.prototype, "_pull_quality_sample_count", { "get": s.oneOfGetter(r = ["pull_quality_sample_count"]), "set": s.oneOfSetter(r) }), Object.defineProperty(g.prototype, "_hardware_report_cycle", { "get": s.oneOfGetter(r = ["hardware_report_cycle"]), "set": s.oneOfSetter(r) }), Object.defineProperty(g.prototype, "_room_user_max_count", { "get": s.oneOfGetter(r = ["room_user_max_count"]), "set": s.oneOfSetter(r) }), Object.defineProperty(g.prototype, "_room_stream_max_count", { "get": s.oneOfGetter(r = ["room_stream_max_count"]), "set": s.oneOfSetter(r) }), Object.defineProperty(g.prototype, "_charge_info_report_cycle", { "get": s.oneOfGetter(r = ["charge_info_report_cycle"]), "set": s.oneOfSetter(r) }), Object.defineProperty(g.prototype, "_charge_info_report_mode", { "get": s.oneOfGetter(r = ["charge_info_report_mode"]), "set": s.oneOfSetter(r) }), Object.defineProperty(g.prototype, "_report_max_bytes", { "get": s.oneOfGetter(r = ["report_max_bytes"]), "set": s.oneOfSetter(r) }), Object.defineProperty(g.prototype, "_push_quality_report_freq", { "get": s.oneOfGetter(r = ["push_quality_report_freq"]), "set": s.oneOfSetter(r) }), Object.defineProperty(g.prototype, "_pull_quality_report_freq", { "get": s.oneOfGetter(r = ["pull_quality_report_freq"]), "set": s.oneOfSetter(r) }), Object.defineProperty(g.prototype, "_charge_info_report_no_playing", { "get": s.oneOfGetter(r = ["charge_info_report_no_playing"]), "set": s.oneOfSetter(r) }), g.encode = function (e, t) { if (t = t || n.create(), null != e.report_count && Object.hasOwnProperty.call(e, "report_count") && t.uint32(8).int32(e.report_count), null != e.report_retry_interval && Object.hasOwnProperty.call(e, "report_retry_interval") && t.uint32(16).int32(e.report_retry_interval), null != e.push_quality_sample_count && Object.hasOwnProperty.call(e, "push_quality_sample_count") && t.uint32(24).int32(e.push_quality_sample_count), null != e.pull_quality_sample_count && Object.hasOwnProperty.call(e, "pull_quality_sample_count") && t.uint32(32).int32(e.pull_quality_sample_count), null != e.hardware_report_cycle && Object.hasOwnProperty.call(e, "hardware_report_cycle") && t.uint32(40).int32(e.hardware_report_cycle), null != e.room_user_max_count && Object.hasOwnProperty.call(e, "room_user_max_count") && t.uint32(48).int32(e.room_user_max_count), null != e.room_stream_max_count && Object.hasOwnProperty.call(e, "room_stream_max_count") && t.uint32(56).int32(e.room_stream_max_count), null != e.charge_info_report_cycle && Object.hasOwnProperty.call(e, "charge_info_report_cycle") && t.uint32(64).int32(e.charge_info_report_cycle), null != e.charge_info_report_mode && Object.hasOwnProperty.call(e, "charge_info_report_mode") && t.uint32(72).int32(e.charge_info_report_mode), null != e.disable_report_pull && e.disable_report_pull.length) { t.uint32(82).fork(); for (var A = 0; A < e.disable_report_pull.length; ++A)t.int32(e.disable_report_pull[A]); t.ldelim() } return null != e.report_max_bytes && Object.hasOwnProperty.call(e, "report_max_bytes") && t.uint32(88).int32(e.report_max_bytes), null != e.push_quality_report_freq && Object.hasOwnProperty.call(e, "push_quality_report_freq") && t.uint32(96).int32(e.push_quality_report_freq), null != e.pull_quality_report_freq && Object.hasOwnProperty.call(e, "pull_quality_report_freq") && t.uint32(104).int32(e.pull_quality_report_freq), null != e.charge_info_report_no_playing && Object.hasOwnProperty.call(e, "charge_info_report_no_playing") && t.uint32(112).int32(e.charge_info_report_no_playing), t }, g.decode = function (e, t) { e instanceof o || (e = o.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new a.proto_initconfig.SpeedlogConfig; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.report_count = e.int32(); break; case 2: r.report_retry_interval = e.int32(); break; case 3: r.push_quality_sample_count = e.int32(); break; case 4: r.pull_quality_sample_count = e.int32(); break; case 5: r.hardware_report_cycle = e.int32(); break; case 6: r.room_user_max_count = e.int32(); break; case 7: r.room_stream_max_count = e.int32(); break; case 8: r.charge_info_report_cycle = e.int32(); break; case 9: r.charge_info_report_mode = e.int32(); break; case 10: if (r.disable_report_pull && r.disable_report_pull.length || (r.disable_report_pull = []), 2 == (7 & i)) for (var n = e.uint32() + e.pos; e.pos < n;)r.disable_report_pull.push(e.int32()); else r.disable_report_pull.push(e.int32()); break; case 11: r.report_max_bytes = e.int32(); break; case 12: r.push_quality_report_freq = e.int32(); break; case 13: r.pull_quality_report_freq = e.int32(); break; case 14: r.charge_info_report_no_playing = e.int32(); break; default: e.skipType(7 & i) } } return r }, g), t.MediaServiceProtocolInfo = (f.prototype.config_id = null, f.prototype.protocol = null, f.prototype.url_template = null, f.prototype.resolve_type = null, f.prototype.push_cdn_authentication = null, f.prototype.cdn_quic_version = s.emptyArray, Object.defineProperty(f.prototype, "_config_id", { "get": s.oneOfGetter(i = ["config_id"]), "set": s.oneOfSetter(i) }), Object.defineProperty(f.prototype, "_protocol", { "get": s.oneOfGetter(i = ["protocol"]), "set": s.oneOfSetter(i) }), Object.defineProperty(f.prototype, "_url_template", { "get": s.oneOfGetter(i = ["url_template"]), "set": s.oneOfSetter(i) }), Object.defineProperty(f.prototype, "_resolve_type", { "get": s.oneOfGetter(i = ["resolve_type"]), "set": s.oneOfSetter(i) }), Object.defineProperty(f.prototype, "_push_cdn_authentication", { "get": s.oneOfGetter(i = ["push_cdn_authentication"]), "set": s.oneOfSetter(i) }), f.encode = function (e, t) { if (t = t || n.create(), null != e.config_id && Object.hasOwnProperty.call(e, "config_id") && t.uint32(10).string(e.config_id), null != e.protocol && Object.hasOwnProperty.call(e, "protocol") && t.uint32(16).int32(e.protocol), null != e.url_template && Object.hasOwnProperty.call(e, "url_template") && t.uint32(26).string(e.url_template), null != e.resolve_type && Object.hasOwnProperty.call(e, "resolve_type") && t.uint32(32).int32(e.resolve_type), null != e.push_cdn_authentication && Object.hasOwnProperty.call(e, "push_cdn_authentication") && t.uint32(40).int32(e.push_cdn_authentication), null != e.cdn_quic_version && e.cdn_quic_version.length) { t.uint32(50).fork(); for (var A = 0; A < e.cdn_quic_version.length; ++A)t.int32(e.cdn_quic_version[A]); t.ldelim() } return t }, f.decode = function (e, t) { e instanceof o || (e = o.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new a.proto_initconfig.MediaServiceProtocolInfo; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.config_id = e.string(); break; case 2: r.protocol = e.int32(); break; case 3: r.url_template = e.string(); break; case 4: r.resolve_type = e.int32(); break; case 5: r.push_cdn_authentication = e.int32(); break; case 6: if (r.cdn_quic_version && r.cdn_quic_version.length || (r.cdn_quic_version = []), 2 == (7 & i)) for (var n = e.uint32() + e.pos; e.pos < n;)r.cdn_quic_version.push(e.int32()); else r.cdn_quic_version.push(e.int32()); break; default: e.skipType(7 & i) } } return r }, f), t.MediaResourceInfo = (_.prototype.resource_type = null, _.prototype.service_info = s.emptyArray, Object.defineProperty(_.prototype, "_resource_type", { "get": s.oneOfGetter(r = ["resource_type"]), "set": s.oneOfSetter(r) }), _.encode = function (e, t) { if (t = t || n.create(), null != e.resource_type && Object.hasOwnProperty.call(e, "resource_type") && t.uint32(8).int32(e.resource_type), null != e.service_info && e.service_info.length) for (var A = 0; A < e.service_info.length; ++A)a.proto_initconfig.MediaServiceProtocolInfo.encode(e.service_info[A], t.uint32(18).fork()).ldelim(); return t }, _.decode = function (e, t) { e instanceof o || (e = o.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new a.proto_initconfig.MediaResourceInfo; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.resource_type = e.int32(); break; case 2: r.service_info && r.service_info.length || (r.service_info = []), r.service_info.push(a.proto_initconfig.MediaServiceProtocolInfo.decode(e, e.uint32())); break; default: e.skipType(7 & i) } } return r }, _), t.MediaPublishConfig = (d.prototype.resource_info = s.emptyArray, d.prototype.enable_subject_segmentation = null, d.prototype.object_segmentation_platform = null, Object.defineProperty(d.prototype, "_enable_subject_segmentation", { "get": s.oneOfGetter(i = ["enable_subject_segmentation"]), "set": s.oneOfSetter(i) }), Object.defineProperty(d.prototype, "_object_segmentation_platform", { "get": s.oneOfGetter(i = ["object_segmentation_platform"]), "set": s.oneOfSetter(i) }), d.encode = function (e, t) { if (t = t || n.create(), null != e.resource_info && e.resource_info.length) for (var A = 0; A < e.resource_info.length; ++A)a.proto_initconfig.MediaResourceInfo.encode(e.resource_info[A], t.uint32(18).fork()).ldelim(); return null != e.enable_subject_segmentation && Object.hasOwnProperty.call(e, "enable_subject_segmentation") && t.uint32(40).int32(e.enable_subject_segmentation), null != e.object_segmentation_platform && Object.hasOwnProperty.call(e, "object_segmentation_platform") && t.uint32(48).int32(e.object_segmentation_platform), t }, d.decode = function (e, t) { e instanceof o || (e = o.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new a.proto_initconfig.MediaPublishConfig; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 2: r.resource_info && r.resource_info.length || (r.resource_info = []), r.resource_info.push(a.proto_initconfig.MediaResourceInfo.decode(e, e.uint32())); break; case 5: r.enable_subject_segmentation = e.int32(); break; case 6: r.object_segmentation_platform = e.int32(); break; default: e.skipType(7 & i) } } return r }, d), t.MediaPlayConfig = (p.prototype.resource_info = s.emptyArray, p.encode = function (e, t) { if (t = t || n.create(), null != e.resource_info && e.resource_info.length) for (var A = 0; A < e.resource_info.length; ++A)a.proto_initconfig.MediaResourceInfo.encode(e.resource_info[A], t.uint32(42).fork()).ldelim(); return t }, p.decode = function (e, t) { e instanceof o || (e = o.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new a.proto_initconfig.MediaPlayConfig; e.pos < A;) { var i = e.uint32(); i >>> 3 == 5 ? (r.resource_info && r.resource_info.length || (r.resource_info = []), r.resource_info.push(a.proto_initconfig.MediaResourceInfo.decode(e, e.uint32()))) : e.skipType(7 & i) } return r }, p), t.MediaConfig = (h.prototype.play_config = null, h.prototype.publish_config = null, Object.defineProperty(h.prototype, "_play_config", { "get": s.oneOfGetter(r = ["play_config"]), "set": s.oneOfSetter(r) }), Object.defineProperty(h.prototype, "_publish_config", { "get": s.oneOfGetter(r = ["publish_config"]), "set": s.oneOfSetter(r) }), h.encode = function (e, t) { return t = t || n.create(), null != e.play_config && Object.hasOwnProperty.call(e, "play_config") && a.proto_initconfig.MediaPlayConfig.encode(e.play_config, t.uint32(10).fork()).ldelim(), null != e.publish_config && Object.hasOwnProperty.call(e, "publish_config") && a.proto_initconfig.MediaPublishConfig.encode(e.publish_config, t.uint32(18).fork()).ldelim(), t }, h.decode = function (e, t) { e instanceof o || (e = o.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new a.proto_initconfig.MediaConfig; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.play_config = a.proto_initconfig.MediaPlayConfig.decode(e, e.uint32()); break; case 2: r.publish_config = a.proto_initconfig.MediaPublishConfig.decode(e, e.uint32()); break; default: e.skipType(7 & i) } } return r }, h), t.InitConfig = (l.prototype.app_config = null, l.prototype.speedlog_config = null, l.prototype.media_config = null, Object.defineProperty(l.prototype, "_app_config", { "get": s.oneOfGetter(i = ["app_config"]), "set": s.oneOfSetter(i) }), Object.defineProperty(l.prototype, "_speedlog_config", { "get": s.oneOfGetter(i = ["speedlog_config"]), "set": s.oneOfSetter(i) }), Object.defineProperty(l.prototype, "_media_config", { "get": s.oneOfGetter(i = ["media_config"]), "set": s.oneOfSetter(i) }), l.encode = function (e, t) { return t = t || n.create(), null != e.app_config && Object.hasOwnProperty.call(e, "app_config") && a.proto_initconfig.AppConfig.encode(e.app_config, t.uint32(10).fork()).ldelim(), null != e.speedlog_config && Object.hasOwnProperty.call(e, "speedlog_config") && a.proto_initconfig.SpeedlogConfig.encode(e.speedlog_config, t.uint32(34).fork()).ldelim(), null != e.media_config && Object.hasOwnProperty.call(e, "media_config") && a.proto_initconfig.MediaConfig.encode(e.media_config, t.uint32(42).fork()).ldelim(), t }, l.decode = function (e, t) { e instanceof o || (e = o.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new a.proto_initconfig.InitConfig; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.app_config = a.proto_initconfig.AppConfig.decode(e, e.uint32()); break; case 4: r.speedlog_config = a.proto_initconfig.SpeedlogConfig.decode(e, e.uint32()); break; case 5: r.media_config = a.proto_initconfig.MediaConfig.decode(e, e.uint32()); break; default: e.skipType(7 & i) } } return r }, l), t); function l(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function h(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function p(e) { if (this.resource_info = [], e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function d(e) { if (this.resource_info = [], e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function _(e) { if (this.service_info = [], e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function f(e) { if (this.cdn_quic_version = [], e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function g(e) { if (this.disable_report_pull = [], e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function m(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function y(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function v(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function b(e) { if (this.groups = [], this.opt_ports = [], this.wss_groups = [], e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function E(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function O(e) { if (this.quic_nodes = [], this.mtcp_nodes = [], this.wss_nodes = [], e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function S(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function T(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function k(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function R(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function C(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function w(e) { if (this.groups = [], this.opt_ports = [], this.wss_groups = [], e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function N(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function I(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function M(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function L(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function P(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function A(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function D(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function H(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function U(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function j(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function x(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function B(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function q(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function G(e) { if (this.headers = [], e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function z(e) { if (this.headers = [], e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function V(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function F(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function Z(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } function K(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } }, function (e, t, A) { "use strict"; var i, o, s = this && this.__extends || (i = function r(e, t) { return (i = Object.setPrototypeOf || ({ "__proto__": [] } instanceof Array ? function (e, t) { e.__proto__ = t } : function (e, t) { for (var A in t) Object.prototype.hasOwnProperty.call(t, A) && (e[A] = t[A]) }))(e, t) }, function (e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Class extends value " + String(t) + " is not a constructor or null"); function n() { this.constructor = e } i(e, t), e.prototype = null === t ? Object.create(t) : (n.prototype = t.prototype, new n) }), a = this && this.__assign || function () { return (a = Object.assign || function (e) { for (var t, A = 1, r = arguments.length; A < r; A++)for (var i in t = arguments[A]) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]); return e }).apply(this, arguments) }, c = this && this.__spreadArray || function (e, t, A) { if (A || 2 === arguments.length) for (var r, i = 0, o = t.length; i < o; i++)!r && i in t || ((r = r || Array.prototype.slice.call(t, 0, i))[i] = t[i]); return e.concat(r || Array.prototype.slice.call(t)) }, g = (Object.defineProperty(t, "__esModule", { "value": !0 }), t.ZegoWssLink = void 0, A(14)), u = A(0), l = A(15), h = A(16), d = A(3), C = A(1); function _(e, t, A, r, i) { var n = o.call(this) || this; return n.appID = e, n.env = t, n.protobuf = A, n.logger = r, n.stateCenter = i, n.socketService = new h.NetSocketService(n.env), n.urlIndex = 0, n.updatedMsgTime = 0, n.unUpdateMsgTimeTypes = [u.AccessHubMessageType.MSG_TYPE_HB_REQUEST, u.AccessHubMessageType.MSG_TYPE_HB_RESPONSE, u.AccessHubMessageType.MSG_TYPE_GET_CONFIG_REQUEST, u.AccessHubMessageType.MSG_TYPE_GET_CONFIG_RESPONSE], n.netLinkState = u.ENUM_CONNECT_STATE.disconnect, n.sendCommandList = new g.LinkedList, n.unSendCommandList = new g.LinkedList, n.sendCommandMap = {}, n.unSendCommandMap = {}, n.sendDataCheckOnceCount = 100, n.sendDataDropTimeout = 1e4, n.sendDataCheckInterval = 2e3, n.timeout = 5e3, n.connectInterval = 1e4, n.connectTimer = null, n.connectRsp = {}, n.unlogTypes = [12, 13], n.tryServers = [], n.tryConnectEvents = [], n.connectStartTime = 0, n.updatedMsgTime = Date.now(), n } s(_, o = l.ZegoLink), _.prototype.initEvent = function (e, t, A, r) { this.onConnectedEvent = e, this.onDisConnectedEvent = t, this.onConnectingEvent = A, this.onPushEvent = r }, _.prototype.createSocket = function (e) { this.servers = e, this.urlIndex = 0 }, _.prototype.destroySocket = function (e) { this.logger.info("zn.wl.ds.0 call " + e), this.socketService.closeSocket(), this.netLinkState = u.ENUM_CONNECT_STATE.disconnect, e !== u.DestroyType.NONE && this.onDisConnectedEvent && this.onDisConnectedEvent(e === u.DestroyType.BROKEN), this.resetConnect() }, _.prototype.refreshServers = function (e) { this.servers = c(c([], e, !0), this.servers, !0) }, _.prototype.connectSocket = function (e, t, A) { var r = this, i = (void 0 === e && (e = !0), this.logger.info("zn.wl.cs.0 call"), this.connectRsp.suc = t, !1), o = (this.connectRsp.fail = function () { A && (i ? r.logger.info("zn.wl.cs.0 fail cb has exec") : (A(), i = !0)) }, e && (this.urlIndex = (this.urlIndex + 1) % this.servers.length), this.servers[this.urlIndex]); return this.connectServer = o, this.logger.info("zn.wl.cs.0 server " + o), this.tryServers.push(o), this.connectStartTime = Date.now(), this.closeSocket(), this.netLinkState = u.ENUM_CONNECT_STATE.connecting, this.socketService.createSocket(o), this.onConnectingEvent && this.onConnectingEvent(!0), this.bindSocketEvent(), this.connectTimer = setTimeout(function () { r.logger.info("zn.wl.cs.0 timeout"), r.connectEvent(o, d.errorCodeList.NET_CONNECT_TIMEOUT.code), r.connectRsp.fail && r.connectRsp.fail() }, this.connectInterval), !0 }, _.prototype.bindSocketEvent = function () { var e = this; this.openHandler(function () { e.logger.info("zn.wl.bse open"), e.resetConnect(), e.connectRsp.suc && e.connectRsp.suc(), e.netLinkState = u.ENUM_CONNECT_STATE.connected, e.connectEvent(e.connectServer, 0), e.onConnectedEvent && e.onConnectedEvent(e.tryServers, e.tryConnectEvents), e.tryConnectEvents = [], e.checkUnSendMsgs(e.unSendCommandList), e.startCheck() }), this.closeHandler(function (t) { e.logger.warn("zn.wl.bse close " + JSON.stringify(t.code || t)), e.resetConnect(), e.connectRsp.fail && e.connectRsp.fail(), e.connectEvent(e.connectServer, (null == t ? void 0 : t.code) || d.errorCodeList.NET_CONNECT_TIMEOUT.code), e.onDisConnectedEvent && e.onDisConnectedEvent(!0), e.netLinkState = u.ENUM_CONNECT_STATE.disconnect }), this.errorHandler(function (t) { e.logger.warn("zn.wl.bse error " + JSON.stringify(t.code || t)), e.resetConnect(), e.connectRsp.fail && e.connectRsp.fail(), e.connectEvent(e.connectServer, (null == t ? void 0 : t.code) || d.errorCodeList.NET_CONNECT_TIMEOUT.code), e.onDisConnectedEvent && e.onDisConnectedEvent(!0), e.netLinkState = u.ENUM_CONNECT_STATE.disconnect }), this.onMessage() }, _.prototype.closeSocket = function () { this.logger.info("zn.wl.cs.1 call"), this.socketService.closeSocket(), this.netLinkState = u.ENUM_CONNECT_STATE.disconnect }, _.prototype.connectEvent = function (e, t) { var A; this.connectStartTime && (A = Date.now() - this.connectStartTime, this.tryConnectEvents.push({ "url": e, "time_consumed": A, "connect_type": 3, "error": t })) }, _.prototype.resetConnect = function () { this.connectTimer && (clearTimeout(this.connectTimer), this.connectTimer = null), this.stopCheck() }, _.prototype.isConnect = function () { return this.netLinkState === u.ENUM_CONNECT_STATE.connected }, _.prototype.isDisConnect = function () { return !this.socketService || this.socketService.isDisConnect() }, _.prototype.isConnecting = function () { return this.netLinkState === u.ENUM_CONNECT_STATE.connecting }, _.prototype.setState = function (e) { this.netLinkState = e }, _.prototype.closeHandler = function (e) { this.socketService.closeHandler(e) }, _.prototype.openHandler = function (e) { this.socketService.openHandler(e) }, _.prototype.errorHandler = function (e) { this.socketService.errorHandler(e) }, _.prototype.updateMsgTime = function () { this.updatedMsgTime = Date.now() }, _.prototype.sendMessage = function (e, t, A, r, i, o, n, s) { void 0 === r && (r = !0), void 0 === i && (i = null), void 0 === o && (o = null), void 0 === n && (n = null), void 0 === (s = void 0 === s ? {} : s).timeout && (s.timeout = 5e3), void 0 === s.isInSendMap && (s.isInSendMap = !0), this.txid++, r = { "appid": this.appID, "biz_type": 0, "mode_no": (null == (r = this.stateCenter.appInfo) ? void 0 : r.mode) || C.NET_ACCESS_CONFIG.modeNo, "id_name": this.stateCenter.userId, "sdk_type": C.NET_ACCESS_CONFIG.sdkType, "zegoconn_run_env": 0 === this.env ? u.ZegoconnRunEnv.ZEGOCONN_RUN_ENV_BROWSER : u.ZegoconnRunEnv.ZEGOCONN_RUN_ENV_APPLET }, A = { "data": r = a(a({ "txid": this.txid }, r), A), "txid": this.txid, "sendTime": Date.now(), "streamID": t, "type": e, "timeOut": s.timeout || this.timeout, "ack": A.ack, "success": i, "error": o, "ackFunc": n, "isSend": !0, "isCheck": e !== u.AccessHubMessageType.MSG_TYPE_PC_UPWARD_MESSAGE }, s.isInSendMap && (i = this.sendCommandList.push(A), this.sendCommandMap[this.txid] = i), this.unUpdateMsgTimeTypes.includes(e) || (this.updatedMsgTime = Date.now()), -1 === this.unlogTypes.indexOf(e) && this.logger.info("zn.wl.sm type: " + e + "-" + u.typeMap[e] + " streamID: " + t + " txid: " + this.txid), this.isConnect() ? this.sendUint8Data(e, r, t) : (A.isSend = !1, o = this.unSendCommandList.push(A), this.unSendCommandMap[this.txid] = o) }, _.prototype.checkUnSendMsgs = function (e) { for (var t, A = e.getFirst(); null != A;)e.remove(A), A._data && !1 === (null == (t = A._data) ? void 0 : t.isSend) && A._data.type && A._data.streamID && A._data.data && (this.sendUint8Data(A._data.type, A._data.data, A._data.streamID), A._data.isSend = !0), A = e.getFirst() }, _.prototype.sendUint8Data = function (e, t, A) { e = this.protobuf.encodeRequest(e, t, A), this.socketService.sendMessage(e) }, _.prototype.onMessage = function () { var e = this; this.socketService.onMessage = function (t) { t = new Uint8Array(t); var A, r = (t = e.protobuf.decodeResponse(t))[0], i = t[1]; t = t[2], e.unUpdateMsgTimeTypes.includes(i) || (e.updatedMsgTime = Date.now()), -1 === e.unlogTypes.indexOf(i) && e.logger.info("zn.wl.om" + " streamID: ".concat(r, ", msgType: ").concat(i, "-").concat(u.typeMap[i])), (null != t && t.txid || null != (A = null == t ? void 0 : t.data) && A.txid) && e.isRspMsg((null == t ? void 0 : t.txid) || (null == (A = null == t ? void 0 : t.data) ? void 0 : A.txid)) ? e.handleSendCommandMsgRsp(r, i, (null == t ? void 0 : t.txid) || (null == (A = null == t ? void 0 : t.data) ? void 0 : A.txid), t) : e.onPushEvent(r, i, t) } }, _.prototype.isRspMsg = function (e) { return void 0 !== this.sendCommandMap[e] }, _.prototype.startCheck = function () { var e = this; this.checkMessageListTimeout(this.sendCommandList, this.sendCommandMap), this.sendDataCheckTimer = setTimeout(function () { e.startCheck() }, this.sendDataCheckInterval) }, _.prototype.stopCheck = function () { this.checkSendMessageList(this.sendCommandList), clearTimeout(this.sendDataCheckTimer) }, _.prototype.checkMessageListTimeout = function (e, t) { for (var A, r = e.getFirst(), i = Date.now(), o = 0, n = this; null != r && "break" !== function () { var s, a, c; return r._data && r._data.sendTime + r._data.timeOut > i || (r._data && delete t[r._data.data.txid], e.remove(r), r._data && null == r._data.error || r._data && r._data.sendTime + n.sendDataDropTimeout < i || (s = r && r._data && r._data.error, a = r && r._data && r._data.txid, c = r && r._data && (null == (A = r._data) ? void 0 : A.isCheck), setTimeout(function () { c && s && s({}, a, d.errorCodeList.TIMEOUT) }, 0)), ++o >= n.sendDataCheckOnceCount) ? "break" : void (r = e.getFirst()) }();); }, _.prototype.checkSendMessageList = function (e) { for (var t, A = e.getFirst(); null != A && A._data;)!function () { var r, i, o; e.remove(A), A._data.isSend && A._data.error && (r = A && A._data && A._data.error, i = A && A._data && A._data.txid, o = A && A._data && (null == (t = A._data) ? void 0 : t.isCheck), setTimeout(function () { o && r && r({}, i, d.errorCodeList.TIMEOUT) }, 0)), A = e.getFirst() }() }, _.prototype.handleSendCommandMsgRsp = function (e, t, A, r) { var i, o = this.sendCommandMap[A]; null != o && (null != (i = o._data) && i.ack || (delete this.sendCommandMap[A], this.sendCommandList.remove(o)), r.code && 0 !== r.code ? i && null != i.error && i.error(r, A) : t === u.AccessHubMessageType.MSG_TYPE_PUSH_EXCEPTION ? (r.code = r.reason, r.message = r.msg, i && null != i.error && i.error(r, A)) : t === u.AccessHubMessageType.MSG_TYPE_HTTP_REQUEST_ACK ? i && null != i.ackFunc && i.ackFunc(r, A) : i && null != i.success && i.success(r, A)) }, A = _, t.ZegoWssLink = A }, function (e, t, A) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.LinkedList = t.ListNode = void 0, Object.defineProperty(o.prototype, "id", { "get": function get() { return this._id || null }, "set": function set(e) { this._id = e }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(o.prototype, "data", { "get": function get() { return this._data }, "set": function set(e) { this._data = e }, "enumerable": !1, "configurable": !0 }), o.prototype.hasNext = function () { return this.next && this.next.id }, o.prototype.hasPrev = function () { return this.prev && this.prev.id }; var r = o; function o(e, t) { void 0 === e && (e = null), void 0 === t && (t = null), this.next = null, this.prev = null, this._id = e, this._data = t } function i() { this.start = new r, this.end = new r, this._idCounter = 0, this._numNodes = 0, this.start.next = this.end, this.start.prev = null, this.end.prev = this.start, this.end.next = null } t.ListNode = r, i.prototype.insertBefore = function (e, t) { return (t = new r(this._idCounter, t)).next = e, t.prev = e.prev, e.prev && (e.prev.next = t), e.prev = t, ++this._idCounter, ++this._numNodes, t }, i.prototype.addLast = function (e) { return this.insertBefore(this.end, e) }, i.prototype.add = function (e) { return this.addLast(e) }, i.prototype.getFirst = function () { return 0 === this._numNodes ? null : this.start.next }, i.prototype.getLast = function () { return 0 === this._numNodes ? null : this.end.prev }, i.prototype.size = function () { return this._numNodes }, i.prototype.getFromFirst = function (e) { var t = 0, A = this.start.next; if (0 <= e) for (; t < e && null !== A;)A = A.next, ++t; else A = null; if (null === A) throw "Index out of bounds."; return A }, i.prototype.get = function (e) { return 0 === e ? this.getFirst() : e === this._numNodes - 1 ? this.getLast() : this.getFromFirst(e) }, i.prototype.remove = function (e) { return e.prev && (e.prev.next = e.next), e.next && (e.next.prev = e.prev), --this._numNodes, e }, i.prototype.removeFirst = function () { return 0 < this._numNodes && this.start.next ? this.remove(this.start.next) : null }, i.prototype.removeLast = function () { return 0 < this._numNodes && this.end.prev ? this.remove(this.end.prev) : null }, i.prototype.removeAll = function () { this.start.next = this.end, this.end.prev = this.start, this._numNodes = 0, this._idCounter = 0 }, i.prototype.each = function (e) { for (var t = this.start; t.hasNext();)e(t = t.next) }, i.prototype.find = function (e) { for (var t = this.start, A = !1, r = null; t.hasNext() && !A;)e(t = t.next) && (r = t, A = !0); return r }, i.prototype.map = function (e) { for (var t = this.start, A = []; t.hasNext();)e(t = t.next) && A.push(t); return A }, i.prototype.push = function (e) { return this.addLast(e) }, i.prototype.unshift = function (e) { 0 < this._numNodes ? this.insertBefore(this.start.next, e) : this.insertBefore(this.end, e) }, i.prototype.pop = function () { return this.removeLast() }, i.prototype.shift = function () { return this.removeFirst() }, t.LinkedList = i }, function (e, t, A) { "use strict"; function r() { this.txid = 0, this.linkRetryTime = 60, this.updatedMsgTime = 0, this.connectServer = "" } Object.defineProperty(t, "__esModule", { "value": !0 }), t.ZegoLink = void 0, r.prototype.createSocket = function (e) { }, r.prototype.setState = function (e) { }, r.prototype.initEvent = function (e, t, A, r) { }, r.prototype.sendMessage = function (e, t, A, r, i, o, n, s) { void 0 === r && (r = !0), void 0 === i && (i = null), void 0 === o && (o = null), void 0 === n && (n = null) }, t.ZegoLink = r }, function (e, t, A) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.NetSocketService = void 0; var r = A(17); function o(e) { this.socket = null, this.ENV = e } o.prototype.createSocket = function (e) { this.socket = (0, r.createZegoWebSocket)(e, this.ENV % 2) }, o.prototype.openHandler = function (e) { var t = this; this.socket && (this.socket.onopen = function (A) { t.socket.binaryType = "arraybuffer", t.responseHandler(), e(A) }) }, o.prototype.responseHandler = function () { var e = this; this.socket && (this.socket.onmessage = function (t) { t = "string" == typeof t.data ? JSON.parse(t.data) : t.data, e.onMessage(t) }) }, o.prototype.onMessage = function (e) { }, o.prototype.closeHandler = function (e) { this.socket && (this.socket.onclose = function (t) { e(t) }) }, o.prototype.errorHandler = function (e) { this.socket && (this.socket.onerror = e) }, o.prototype.closeSocket = function () { this.socket && (this.socket.onclose = null, this.socket.onerror = null, this.socket.close(), this.socket = null) }, o.prototype.isDisConnect = function () { return !this.socket || 1 !== this.socket.readyState }, o.prototype.sendMessage = function (e) { this.isDisConnect() || this.socket && this.ENV % 2 != 1 && this.socket.send(e) }, t.NetSocketService = o }, function (e, t, A) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.createZegoWebSocket = t.ZegoWeiXinMiniWebSocket = t.ZEGO_ENV = void 0, (i = r = t.ZEGO_ENV || (t.ZEGO_ENV = {}))[i.BROWSER = 0] = "BROWSER", i[i.WEIXINMINI = 1] = "WEIXINMINI", s.prototype.init = function () { var e = this; this._websocket && (this.readyState = 0, this._websocket.onOpen(function (t) { e.readyState = e._websocket.readyState, "function" == typeof e.onopen && (e.onopen(t), e._websocket.onClose(function (t) { e.readyState = e._websocket.readyState, "function" == typeof e.onclose && e.onclose(t) }), e._websocket.onMessage(function (t) { "function" == typeof e.onmessage && e.onmessage(t) })) }), this._websocket.onError(function (t) { e.readyState = e._websocket.readyState, "function" == typeof e.onerror && e.onerror(t) })) }, s.prototype.onopen = function (e) { }, s.prototype.onerror = function (e) { }, s.prototype.onclose = function (e) { }, s.prototype.onmessage = function (e) { }, s.prototype.send = function (e) { this._websocket && this._websocket.send({ "data": e }) }, s.prototype.close = function () { this._websocket && this._websocket.close() }; var r, i, o = s; function s(e, t) { this.url = e, this.readyState = 3, this._websocket = wx.connectSocket({ "url": e }), this.init() } t.ZegoWeiXinMiniWebSocket = o, t.createZegoWebSocket = function (e, t) { return new (t % 2 === r.BROWSER ? WebSocket : o)(e) } }, function (e, t, A) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.NetAgentBusinessRequestMgr = void 0; var r = A(0), o = A(1); function i(e, t, A, r) { this.streamManager = e, this.protobuf = t, this.logger = A, this.stateCenter = r } i.prototype.getConfig = function (e, t) { var A; this.logger.info("zn.nab.gc call"), this.streamManager.createStream(r.StreamType.OTHER).sendMessage(r.AccessHubMessageType.MSG_TYPE_GET_CONFIG_REQUEST, { "zegoconn_version": o.NET_ACCESS_CONFIG.connectVer, "mode": r.ModeMap[(null == (A = this.stateCenter.appInfo) ? void 0 : A.mode) || o.NET_ACCESS_CONFIG.modeNo] }, e, t) }, i.prototype.dispatchURL = function (e, t) { var A = this; this.logger.info("zn.nab.du call"), this.streamManager.createStream(r.StreamType.OTHER).sendMessage(r.AccessHubMessageType.MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST, {}, function (t) { A.logger.info("zn.nab.du suc "), e && e(t) }, function (e, r, i) { A.logger.info("zn.nab.du fail"), t && t(i || e) }) }, i.prototype.getAppConfig = function (e, t, A, i) { var n = this; return new Promise(function (s, a) { function u(e, t, A) { A ? (n.logger.error("zn.nab.gac fail " + JSON.stringify(A)), a(A)) : 0 === e.code ? (n.logger.info("zn.nab.gac suc"), A = n.decodeConfigMessage(e.data.data), s({ "code": 0, "data": A })) : (n.logger.error("zn.nab.gac fail " + e.code), a({ "code": e.code })) } n.logger.info("zn.nab.gac call"); var c = { "id_name": t, "config_key": e, "token": A, "mode_no": (null == (c = n.stateCenter.appInfo) ? void 0 : c.mode) || o.NET_ACCESS_CONFIG.modeNo }; n.streamManager.createStream(r.StreamType.OTHER).sendMessage(r.AccessHubMessageType.MSG_TYPE_GET_APPCONFIG_REQUEST, c, u, u, null, { "timeout": i }) }) }, i.prototype.decodeConfigMessage = function (e) { return this.protobuf.decodeConfigMessage(e) }, t.NetAgentBusinessRequestMgr = i }, function (e, t, A) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.NetHeartBeatHandler = void 0; var r = A(3), o = A(0); function i(e, t, A) { this.streamManager = e, this.logger = t, this.stateCenter = A, this.hbTimer = null, this.hbInterval = 5, this.hbTimeout = 10, this.hbTimeoutMaxCount = 0, this.tryHbCount = 0 } i.prototype.init = function (e) { var t = this; this.logger.info("zn.nhb.ii call"), this.hbStream || (this.hbStream = this.streamManager.createStream(o.StreamType.OTHER)), 1 <= e.data.logic_hb_interval && e.data.logic_hb_interval <= 10 && (this.hbInterval = e.data.logic_hb_interval), 3 <= e.data.logic_hb_timeout && e.data.logic_hb_timeout <= 30 && (this.hbTimeout = e.data.logic_hb_timeout), this.tryHbCount = 0, this.hbTimeoutMaxCount = this.hbTimeout / this.hbInterval, this.hbTimer && clearTimeout(this.hbTimer), this.hbTimer = setTimeout(function () { t.start() }, 1e3 * this.hbInterval) }, i.prototype.start = function () { var e, A, i, n = this; this.logger.debug("zn.nhb.s call "), this.tryHbCount++ > this.hbTimeoutMaxCount ? (this.logger.error("zn.nhb.s come to try limit"), this.reset(), this.netHbLogout(r.errorCodeList.NET_HB_TIMEOUT)) : (e = (new Date).getTime(), A = function t(A, r, i) { var o = (new Date).getTime() - e; n.logger.debug("zn.nhb.s hb callback " + o), i && 0 !== (null == i ? void 0 : i.code) ? n.logger.info("zn.nhb.s fail " + JSON.stringify(i)) : (null != A && A.ntp_time && (i = A.ntp_time.toNumber(), A = (new Date).getTime(), i += Math.round(o / 2), n.stateCenter.timeOffset = i - A), n.tryHbCount = 0) }, i = { "ts": Date.now() }, this.hbStream.sendMessage(o.AccessHubMessageType.MSG_TYPE_HB_REQUEST, i, A, A, null), this.hbTimer && clearTimeout(this.hbTimer), this.hbTimer = setTimeout(function () { n.start() }, 1e3 * this.hbInterval)) }, i.prototype.netHbLogout = function (e) { }, i.prototype.reset = function () { this.hbTimer && (clearTimeout(this.hbTimer), this.hbTimer = null), this.tryHbCount = 0 }, t.NetHeartBeatHandler = i }, function (e, t, A) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.NetAgentPCRequestMgr = void 0; var r = A(0), i = A(1), o = A(5); function s(e, t) { this.streamManager = e, this.logger = t, this.pcStreamRequests = [], this.pcEstablishTimeout = i.NET_ACCESS_CONFIG.pcEstablishTimeout } s.prototype.getRequest = function (e, t) { return e = new o.NetAgentPCRequest(this.logger, e, this.streamManager, this.pcEstablishTimeout, t), this.pcStreamRequests.push(e), e }, s.prototype.updateConnectState = function (e, t, A) { this.pcStreamRequests.forEach(function (i) { e === r.PcConnectState.BROKEN ? (i.eventManager.emit("broken"), i.reportEvent("pcBrokenEvent")) : e === r.PcConnectState.DISCONNECT && (i.eventManager.emit("disconnected", t, A), i.reportEvent("pcDisconnectedEvent")) }) }, s.prototype.closePCs = function () { this.pcStreamRequests.forEach(function (e) { e.closePc() }) }, s.prototype.setEstablishTimeout = function (e) { this.pcEstablishTimeout = e }, t.NetAgentPCRequestMgr = s }, function (e, t, A) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.NetRetryLinkHandler = void 0; var r = A(3), o = A(0); function i(e, t) { this.logger = e, this.stateCenter = t, this.RETRY_START_TIME_INTERVAL = 4, this.RETRY_CONTINUE_COUNT = 2, this.RETRY_MAX_TIME_INTERVAL = 32, this.retryTimer = null, this.maxTimer = null, this.retryActiveCount = 1, this.retryNetCount = 0, this.retryNetMaxTimes = 3, this.isOverTime = !1, this.RETRY_MAX_TIME = 90 } i.prototype.initLink = function (e) { this.link = e }, i.prototype.startMaxTime = function () { var e = this; this.logger.info("zn.rlh.sm call"), this.maxTimer || (this.logger.info("zn.rlh.sm start max timer"), this.maxTimer = setTimeout(function () { e.logger.warn("zn.rlh.sm" + " over max time ".concat(e.RETRY_MAX_TIME, "s, stop retry")), e.isOverTime = !0, e.link.destroySocket(o.DestroyType.NONE), e.stopMaxTime(), e.invalid(), e.onactive(!1, r.errorCodeList.NET_SOCKET_TIMEOUT) }, 1e3 * this.RETRY_MAX_TIME)) }, i.prototype.stopMaxTime = function () { this.maxTimer && clearTimeout(this.maxTimer), this.maxTimer = null }, i.prototype.active = function (e, t, A) { var r = this; if (void 0 === A && (A = !1), this.logger.info("zn.rlh.at call " + e + " " + (t = void 0 !== t && t)), this.retryTimer) return this.logger.info("zn.rlh.at has actived, ignore"), !1; var i = this.stateCenter.networkState == o.ENUM_NETWORK_STATE.offline; if (i) { if (this.logger.info("zn.rlh.at  check if really offline. " + this.retryNetCount), this.retryNetCount >= this.retryNetMaxTimes) return this.logger.warn("zn.rlh.at network is broken, stop retry"), !1 } else this.retryNetCount = 0; return this.link.isConnecting() && !A ? (this.logger.info("zn.rlh.at link is connecting, ignore"), !1) : this.isOverTime ? (this.logger.info("zn.rlh.at retry over time, stop retry"), !1) : (1 == this.retryActiveCount ? this.retryActiveInterval = Math.floor(Math.random() * (1 - this.RETRY_START_TIME_INTERVAL) + this.RETRY_START_TIME_INTERVAL) : (A = Math.pow(2, Math.round(this.retryActiveCount / this.RETRY_CONTINUE_COUNT + 1)), this.retryActiveInterval = A > this.RETRY_MAX_TIME_INTERVAL ? this.RETRY_MAX_TIME_INTERVAL : A), this.logger.info("zn.rlh.at interval " + this.retryActiveInterval), this.retryTimer = setTimeout(function () { r.link.destroySocket(o.DestroyType.BROKEN), r.link.connectSocket(e, function () { r.logger.info("zn.rlh.at suc"), r.stateCenter.networkState = o.ENUM_NETWORK_STATE.online, r.stopMaxTime(), r.invalid(), r.onactive(!0) }, function () { r.logger.info("zn.rlh.at fail"), r.maxTimer || r.startMaxTime(), r.active(!0, !1, !0) }), r.retryTimer && clearTimeout(r.retryTimer), r.retryTimer = null, i ? r.retryNetCount++ : r.retryActiveCount++ }, t ? 0 : 1e3 * this.retryActiveInterval), !0) }, i.prototype.onactive = function () { for (var e = 0; e < arguments.length; e++); }, i.prototype.init = function (e, t, A, r) { this.invalid(), this.stopMaxTime(), this.isOverTime = !1, "number" == typeof e && e < 3600 && (this.RETRY_MAX_TIME = e), "number" == typeof t && (this.RETRY_START_TIME_INTERVAL = t), "number" == typeof A && (this.RETRY_CONTINUE_COUNT = A), "number" == typeof r && (this.RETRY_MAX_TIME_INTERVAL = r) }, i.prototype.invalid = function () { this.logger.info("zn.rlh.ivd end retry"), this.retryTimer && clearTimeout(this.retryTimer), this.retryTimer = null, this.retryActiveCount = 1, this.retryNetCount = 0 }, t.NetRetryLinkHandler = i }, function (e, t, A) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.StateCenter = void 0; var r = A(0); t.StateCenter = function () { this.networkState = r.ENUM_NETWORK_STATE.online, this.useNetAgent = !0, this.specified = !1, this.clientIP = "", this.timeOffset = 0 } }, function (e, t, A) { "use strict"; function r() { } Object.defineProperty(t, "__esModule", { "value": !0 }), t.ZegoLogger = void 0, r.prototype.log = function () { for (var e = [], t = 0; t < arguments.length; t++)e[t] = arguments[t]; var A = e.join(" "); console.log(A) }, r.prototype.debug = function () { for (var e = [], t = 0; t < arguments.length; t++)e[t] = arguments[t]; var A = e.join(" "); console.debug(A) }, r.prototype.info = function () { for (var e = [], t = 0; t < arguments.length; t++)e[t] = arguments[t]; var A = e.join(" "); console.info(A) }, r.prototype.warn = function () { for (var e = [], t = 0; t < arguments.length; t++)e[t] = arguments[t]; var A = e.join(" "); console.warn(A) }, r.prototype.error = function () { for (var e = [], t = 0; t < arguments.length; t++)e[t] = arguments[t]; var A = e.join(" "); console.error(A) }, t.ZegoLogger = r }, function (e, t, A) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.StreamManager = void 0; var r = A(0), o = A(25); function i(e) { this.zegoLink = e, this.streamID = 1, this.httpStreams = [], this.pcStreams = [] } i.prototype.createStream = function (e) { var t; return e !== r.StreamType.HTTP && e === r.StreamType.PC ? (t = new o.ZegoLinkStream(e, this.streamID++, this.zegoLink), this.pcStreams.push(t), t) : this.getStream(e, this.httpStreams) }, i.prototype.getStream = function (e, t) { return (t = t.find(function (e) { return !0 === e.isFree })) ? (t.isFree = !1, t.isFirst = !1) : (t = new o.ZegoLinkStream(e, this.streamID++, this.zegoLink), this.httpStreams.push(t)), t }, i.prototype.onPushEvent = function (e, t, A) { var r = this.pcStreams.find(function (t) { return t.StreamID === e }); r && r.onPushEvent(t, A) }, i.prototype.getStreamID = function () { return this.streamID++ }, t.StreamManager = i }, function (e, t, A) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.ZegoLinkStream = void 0; var r = A(0); function o(e, t, A) { this.type = e, this.streamID = t, this.zegoLink = A, this.isFree = !1, this.isFirst = !0 } Object.defineProperty(o.prototype, "StreamID", { "get": function get() { return this.streamID }, "enumerable": !1, "configurable": !0 }), o.prototype.refresh = function (e) { this.streamID = e }, o.prototype.sendMessage = function (e, t, A, i, o, n) { var s = this; void 0 === A && (A = null), void 0 === i && (i = null), this.zegoLink.sendMessage(e, this.streamID, t, this.isFirst, function (e) { s.type !== r.StreamType.PC && (s.isFree = !0), A && A(e) }, function (e, t, A) { s.type !== r.StreamType.PC && (s.isFree = !0), i && i(e, t, A) }, o = void 0 === o ? null : o, n = void 0 === n ? { "timeout": 5e3, "isInSendMap": !0 } : n) }, o.prototype.onPushEvent = function (e, t) { }, o.prototype.closeStream = function (e, t) { this.zegoLink.sendMessage(r.AccessHubMessageType.MSG_TYPE_STREAM_CLOSED, this.streamID, { "code": e, "msg": t }) }, o.prototype.isConnect = function () { return this.zegoLink.isConnect() }, t.ZegoLinkStream = o }], s = {}, r.m = n, r.c = s, r.d = function (e, t, A) { r.o(e, t) || Object.defineProperty(e, t, { "enumerable": !0, "get": A }) }, r.r = function (e) { "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, { "value": "Module" }), Object.defineProperty(e, "__esModule", { "value": !0 }) }, r.t = function (e, t) { if (1 & t && (e = r(e)), 8 & t) return e; if (4 & t && "object" == (void 0 === e ? "undefined" : u(e)) && e && e.__esModule) return e; var A = Object.create(null); if (r.r(A), Object.defineProperty(A, "default", { "enumerable": !0, "value": e }), 2 & t && "string" != typeof e) for (var i in e) r.d(A, i, function (t) { return e[t] }.bind(null, i)); return A }, r.n = function (e) { var t = e && e.__esModule ? function () { return e.default } : function () { return e }; return r.d(t, "a", t), t }, r.o = function (e, t) { return Object.prototype.hasOwnProperty.call(e, t) }, r.p = "", r(r.s = 8)) }, function (e, t, A) { var r; e.exports = (r = A(2), function () { var e, t; "function" == typeof ArrayBuffer && (e = r.lib.WordArray, t = e.init, (e.init = function (e) { if ((e = (e = e instanceof ArrayBuffer ? new Uint8Array(e) : e) instanceof Int8Array || "undefined" != typeof Uint8ClampedArray && e instanceof Uint8ClampedArray || e instanceof Int16Array || e instanceof Uint16Array || e instanceof Int32Array || e instanceof Uint32Array || e instanceof Float32Array || e instanceof Float64Array ? new Uint8Array(e.buffer, e.byteOffset, e.byteLength) : e) instanceof Uint8Array) { for (var A = e.byteLength, r = [], i = 0; i < A; i++)r[i >>> 2] |= e[i] << 24 - i % 4 * 8; t.call(this, r, A) } else t.apply(this, arguments) }).prototype = e) }(), r.lib.WordArray) }, function (e, t) { var A = function () { return this }(); try { A = A || new Function("return this")() } catch (e) { "object" == ("undefined" == typeof window ? "undefined" : u(window)) && (A = window) } e.exports = A }, function (e, t) { }, function (e, t, A) { var r; e.exports = (e = A(2), r = e.lib.WordArray, e.enc.Base64 = { "stringify": function stringify(e) { for (var t = e.words, A = e.sigBytes, r = this._map, i = (e.clamp(), []), o = 0; o < A; o += 3)for (var n = (t[o >>> 2] >>> 24 - o % 4 * 8 & 255) << 16 | (t[o + 1 >>> 2] >>> 24 - (o + 1) % 4 * 8 & 255) << 8 | t[o + 2 >>> 2] >>> 24 - (o + 2) % 4 * 8 & 255, s = 0; s < 4 && o + .75 * s < A; s++)i.push(r.charAt(n >>> 6 * (3 - s) & 63)); var a = r.charAt(64); if (a) for (; i.length % 4;)i.push(a); return i.join("") }, "parse": function parse(e) { var t = e.length, A = this._map; if (!(i = this._reverseMap)) for (var i = this._reverseMap = [], o = 0; o < A.length; o++)i[A.charCodeAt(o)] = o; var n = A.charAt(64); return n && -1 !== (n = e.indexOf(n)) && (t = n), function (e, t, A) { for (var i, o, n = [], s = 0, a = 0; a < t; a++)a % 4 && (i = A[e.charCodeAt(a - 1)] << a % 4 * 2, o = A[e.charCodeAt(a)] >>> 6 - a % 4 * 2, n[s >>> 2] |= (i | o) << 24 - s % 4 * 8, s++); return r.create(n, s) }(e, t, i) }, "_map": "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=" }, e.enc.Base64) }, function (e, t, A) { var r, i, o, n; e.exports = (n = (A = e = A(2)).lib, r = n.WordArray, i = n.Hasher, n = A.algo, o = [], n = n.SHA1 = i.extend({ "_doReset": function _doReset() { this._hash = new r.init([1732584193, 4023233417, 2562383102, 271733878, 3285377520]) }, "_doProcessBlock": function _doProcessBlock(e, t) { for (var A = this._hash.words, r = A[0], i = A[1], n = A[2], s = A[3], a = A[4], c = 0; c < 80; c++) { c < 16 ? o[c] = 0 | e[t + c] : (g = o[c - 3] ^ o[c - 8] ^ o[c - 14] ^ o[c - 16], o[c] = g << 1 | g >>> 31); var g = (r << 5 | r >>> 27) + a + o[c]; g += c < 20 ? 1518500249 + (i & n | ~i & s) : c < 40 ? 1859775393 + (i ^ n ^ s) : c < 60 ? (i & n | i & s | n & s) - 1894007588 : (i ^ n ^ s) - 899497514, a = s, s = n, n = i << 30 | i >>> 2, i = r, r = g } A[0] = A[0] + r | 0, A[1] = A[1] + i | 0, A[2] = A[2] + n | 0, A[3] = A[3] + s | 0, A[4] = A[4] + a | 0 }, "_doFinalize": function _doFinalize() { var e = this._data, t = e.words, A = 8 * this._nDataBytes, r = 8 * e.sigBytes; return t[r >>> 5] |= 128 << 24 - r % 32, t[14 + (64 + r >>> 9 << 4)] = Math.floor(A / 4294967296), t[15 + (64 + r >>> 9 << 4)] = A, e.sigBytes = 4 * t.length, this._process(), this._hash }, "clone": function clone() { var e = i.clone.call(this); return e._hash = this._hash.clone(), e } }), A.SHA1 = i._createHelper(n), A.HmacSHA1 = i._createHmacHelper(n), e.SHA1) }, function (e, t, A) { var r; e.exports = (A = (e = A(2)).lib.Base, r = e.enc.Utf8, void (e.algo.HMAC = A.extend({ "init": function init(e, t) { e = this._hasher = new e.init, "string" == typeof t && (t = r.parse(t)); for (var A = e.blockSize, i = 4 * A, o = ((t = t.sigBytes > i ? e.finalize(t) : t).clamp(), e = this._oKey = t.clone(), t = this._iKey = t.clone(), e.words), n = t.words, s = 0; s < A; s++)o[s] ^= 1549556828, n[s] ^= 909522486; e.sigBytes = t.sigBytes = i, this.reset() }, "reset": function reset() { var e = this._hasher; e.reset(), e.update(this._iKey) }, "update": function update(e) { return this._hasher.update(e), this }, "finalize": function finalize(e) { var t = this._hasher; return e = t.finalize(e), t.reset(), t.finalize(this._oKey.clone().concat(e)) } }))) }, function (A, r, i) { var o, n, s, a, c, g, u, l, h, d, C, I; A.exports = (A = i(2), i(12), void (A.lib.Cipher || (i = A.lib, o = i.Base, n = i.WordArray, s = i.BufferedBlockAlgorithm, (h = A.enc).Utf8, a = h.Base64, c = A.algo.EvpKDF, g = i.Cipher = s.extend({ "cfg": o.extend(), "createEncryptor": function createEncryptor(e, t) { return this.create(this._ENC_XFORM_MODE, e, t) }, "createDecryptor": function createDecryptor(e, t) { return this.create(this._DEC_XFORM_MODE, e, t) }, "init": function init(e, t, A) { this.cfg = this.cfg.extend(A), this._xformMode = e, this._key = t, this.reset() }, "reset": function reset() { s.reset.call(this), this._doReset() }, "process": function process(e) { return this._append(e), this._process() }, "finalize": function finalize(e) { return e && this._append(e), this._doFinalize() }, "keySize": 4, "ivSize": 4, "_ENC_XFORM_MODE": 1, "_DEC_XFORM_MODE": 2, "_createHelper": function () { function e(e) { return "string" == typeof e ? I : d } return function (t) { return { "encrypt": function encrypt(A, r, i) { return e(r).encrypt(t, A, r, i) }, "decrypt": function decrypt(A, r, i) { return e(r).decrypt(t, A, r, i) } } } }() }), i.StreamCipher = g.extend({ "_doFinalize": function _doFinalize() { return this._process(!0) }, "blockSize": 1 }), h = A.mode = {}, u = i.BlockCipherMode = o.extend({ "createEncryptor": function createEncryptor(e, t) { return this.Encryptor.create(e, t) }, "createDecryptor": function createDecryptor(e, t) { return this.Decryptor.create(e, t) }, "init": function init(e, t) { this._cipher = e, this._iv = t } }), h = h.CBC = function () { var e = u.extend(); function t(e, t, A) { var r, i = this._iv; i ? (r = i, this._iv = void 0) : r = this._prevBlock; for (var o = 0; o < A; o++)e[t + o] ^= r[o] } return e.Encryptor = e.extend({ "processBlock": function processBlock(e, A) { var r = this._cipher, i = r.blockSize; t.call(this, e, A, i), r.encryptBlock(e, A), this._prevBlock = e.slice(A, A + i) } }), e.Decryptor = e.extend({ "processBlock": function processBlock(e, A) { var r = this._cipher, i = r.blockSize, o = e.slice(A, A + i); r.decryptBlock(e, A), t.call(this, e, A, i), this._prevBlock = o } }), e }(), C = (A.pad = {}).Pkcs7 = { "pad": function pad(e, t) { for (var A = (t *= 4) - e.sigBytes % t, r = A << 24 | A << 16 | A << 8 | A, i = [], o = 0; o < A; o += 4)i.push(r); t = n.create(i, A), e.concat(t) }, "unpad": function unpad(e) { var t = 255 & e.words[e.sigBytes - 1 >>> 2]; e.sigBytes -= t } }, i.BlockCipher = g.extend({ "cfg": g.cfg.extend({ "mode": h, "padding": C }), "reset": function reset() { g.reset.call(this); var e, t = (A = this.cfg).iv, A = A.mode; this._xformMode == this._ENC_XFORM_MODE ? e = A.createEncryptor : (e = A.createDecryptor, this._minBufferSize = 1), this._mode && this._mode.__creator == e ? this._mode.init(this, t && t.words) : (this._mode = e.call(A, this, t && t.words), this._mode.__creator = e) }, "_doProcessBlock": function _doProcessBlock(e, t) { this._mode.processBlock(e, t) }, "_doFinalize": function _doFinalize() { var e, t = this.cfg.padding; return this._xformMode == this._ENC_XFORM_MODE ? (t.pad(this._data, this.blockSize), e = this._process(!0)) : (e = this._process(!0), t.unpad(e)), e }, "blockSize": 4 }), l = i.CipherParams = o.extend({ "init": function init(e) { this.mixIn(e) }, "toString": function toString(e) { return (e || this.formatter).stringify(this) } }), h = (A.format = {}).OpenSSL = { "stringify": function stringify(e) { var t = e.ciphertext; return (e = (e = e.salt) ? n.create([1398893684, 1701076831]).concat(e).concat(t) : t).toString(a) }, "parse": function parse(e) { var t, A = (e = a.parse(e)).words; return 1398893684 == A[0] && 1701076831 == A[1] && (t = n.create(A.slice(2, 4)), A.splice(0, 4), e.sigBytes -= 16), l.create({ "ciphertext": e, "salt": t }) } }, d = i.SerializableCipher = o.extend({ "cfg": o.extend({ "format": h }), "encrypt": function encrypt(e, t, A, r) { r = this.cfg.extend(r), t = (i = e.createEncryptor(A, r)).finalize(t); var i = i.cfg; return l.create({ "ciphertext": t, "key": A, "iv": i.iv, "algorithm": e, "mode": i.mode, "padding": i.padding, "blockSize": e.blockSize, "formatter": r.format }) }, "decrypt": function decrypt(e, t, A, r) { return r = this.cfg.extend(r), t = this._parse(t, r.format), e.createDecryptor(A, r).finalize(t.ciphertext) }, "_parse": function _parse(e, t) { return "string" == typeof e ? t.parse(e, this) : e } }), C = (A.kdf = {}).OpenSSL = { "execute": function execute(e, t, A, r) { return r = r || n.random(8), e = c.create({ "keySize": t + A }).compute(e, r), A = n.create(e.words.slice(t), 4 * A), e.sigBytes = 4 * t, l.create({ "key": e, "iv": A, "salt": r }) } }, I = i.PasswordBasedCipher = d.extend({ "cfg": d.cfg.extend({ "kdf": C }), "encrypt": function encrypt(e, t, A, r) { return A = (r = this.cfg.extend(r)).kdf.execute(A, e.keySize, e.ivSize), r.iv = A.iv, (e = d.encrypt.call(this, e, t, A.key, r)).mixIn(A), e }, "decrypt": function decrypt(e, t, A, r) { return r = this.cfg.extend(r), t = this._parse(t, r.format), A = r.kdf.execute(A, e.keySize, e.ivSize, t.salt), r.iv = A.iv, d.decrypt.call(this, e, t, A.key, r) } })))) }, function (A, r, s) { "use strict"; s.r(r), s.d(r, "ZegoExpressWebRTMEngine", function () { return Bt }), s.d(r, "getReportSeq", function () { return Q }), s.d(r, "getSeq", function () { return _ }), s.d(r, "ZegoLogger", function () { return f.ZegoLogger }), s.d(r, "ZegoDataReport", function () { return f.ZegoDataReport }), s.d(r, "ZegoExpressWebRTM", function () { return ut }), s.d(r, "BusinessService", function () { return w }), s.d(r, "NetConnection", function () { return U }), s.d(r, "ZReporter", function () { return ft }); var a, c, g, l, h, C, I, E, p, f = s(5), B = ((r = a = a || {})[r.SWITCH_ONE = 1] = "SWITCH_ONE", r[r.SWITCH_TWO = 2] = "SWITCH_TWO", { "debug": 0, "info": 1, "warn": 2, "error": 3, "report": 99, "disable": 100 }), _ = ((r = c = c || {})[r.TT_NONE = 0] = "TT_NONE", r[r.TT_PC = 1] = "TT_PC", r[r.TT_IOS = 2] = "TT_IOS", r[r.TT_ANDROID = 3] = "TT_ANDROID", r[r.TT_MAC = 4] = "TT_MAC", r[r.TT_LINUX = 5] = "TT_LINUX", r[r.TT_WEB = 6] = "TT_WEB", r[r.TT_MINIPROGRAM = 7] = "TT_MINIPROGRAM", r[r.TT_UNKNOWN = 32] = "TT_UNKNOWN", (r = g = g || {})[r.logout = 0] = "logout", r[r.trylogin = 1] = "trylogin", r[r.login = 2] = "login", (r = l = l || {})[r.I = 0] = "I", r[r.H = 10] = "H", r[r.M = 100] = "M", r[r.L = 1e3] = "L", (r = h = h || {})[r.offline = 0] = "offline", r[r.online = 1] = "online", (r = C = C || {})[r.NT_NONE = 0] = "NT_NONE", r[r.NT_LINE = 1] = "NT_LINE", r[r.NT_WIFI = 2] = "NT_WIFI", r[r.NT_2G = 3] = "NT_2G", r[r.NT_3G = 4] = "NT_3G", r[r.NT_4G = 5] = "NT_4G", r[r.NT_UNKNOWN = 32] = "NT_UNKNOWN", (r = I = I || {})[r.ClientType_None = 0] = "ClientType_None", r[r.ClientType_H5 = 1] = "ClientType_H5", r[r.ClientType_SmallProgram = 2] = "ClientType_SmallProgram", r[r.ClientType_Webrtc = 3] = "ClientType_Webrtc", function () { return E++ }), Q = (p = E = 1, function () { return p++ }), y = (Object.defineProperty(m.prototype, "id", { "get": function get() { return this._id || null }, "set": function set(e) { this._id = e }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(m.prototype, "data", { "get": function get() { return this._data }, "set": function set(e) { this._data = e }, "enumerable": !1, "configurable": !0 }), m.prototype.hasNext = function () { return this.next && this.next.id }, m.prototype.hasPrev = function () { return this.prev && this.prev.id }, m); function m(e, t) { void 0 === e && (e = null), void 0 === t && (t = null), this.next = null, this.prev = null, this._id = e, this._data = t } v.prototype.insertBefore = function (e, t) { return (t = new y(this._idCounter, t)).next = e, t.prev = e.prev, e.prev && (e.prev.next = t), e.prev = t, ++this._idCounter, ++this._numNodes, t }, v.prototype.addLast = function (e) { return this.insertBefore(this.end, e) }, v.prototype.add = function (e) { return this.addLast(e) }, v.prototype.getFirst = function () { return 0 === this._numNodes ? null : this.start.next }, v.prototype.getLast = function () { return 0 === this._numNodes ? null : this.end.prev }, v.prototype.size = function () { return this._numNodes }, v.prototype.getFromFirst = function (e) { var t = 0, A = this.start.next; if (0 <= e) for (; t < e && null !== A;)A = A.next, ++t; else A = null; if (null === A) throw "Index out of bounds."; return A }, v.prototype.get = function (e) { return 0 === e ? this.getFirst() : e === this._numNodes - 1 ? this.getLast() : this.getFromFirst(e) }, v.prototype.remove = function (e) { return e.prev && (e.prev.next = e.next), e.next && (e.next.prev = e.prev), --this._numNodes, e }, v.prototype.removeFirst = function () { return 0 < this._numNodes && this.start.next ? this.remove(this.start.next) : null }, v.prototype.removeLast = function () { return 0 < this._numNodes && this.end.prev ? this.remove(this.end.prev) : null }, v.prototype.removeAll = function () { this.start.next = this.end, this.end.prev = this.start, this._numNodes = 0, this._idCounter = 0 }, v.prototype.each = function (e) { for (var t = this.start; t.hasNext();)e(t = t.next) }, v.prototype.find = function (e) { for (var t = this.start, A = !1, r = null; t.hasNext() && !A;)e(t = t.next) && (r = t, A = !0); return r }, v.prototype.map = function (e) { for (var t = this.start, A = []; t.hasNext();)e(t = t.next) && A.push(t); return A }, v.prototype.push = function (e) { return this.addLast(e) }, v.prototype.unshift = function (e) { 0 < this._numNodes ? this.insertBefore(this.start.next, e) : this.insertBefore(this.end, e) }, v.prototype.pop = function () { return this.removeLast() }, v.prototype.shift = function () { return this.removeFirst() }; var S = v; function v() { this.start = new y, this.end = new y, this._idCounter = 0, this._numNodes = 0, this.start.next = this.end, this.start.prev = null, this.end.prev = this.start, this.end.next = null } var R, b, T, k, w, O, M = "未引入消息模块", P = s(14), U = (Object.defineProperty(N.prototype, "clientIP", { "get": function get() { var e; return (null == (e = this.connection) ? void 0 : e.clientIP) || "" }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(N.prototype, "timeOffset", { "get": function get() { var e; return null == (e = this.connection) ? void 0 : e.timeOffset }, "enumerable": !1, "configurable": !0 }), N.prototype.init = function () { var e; null != (e = this.connection) && e.init() }, N.prototype.unInit = function () { var e; null != (e = this.connection) && e.unInit() }, N.prototype.setAppInfo = function (e) { var t; null != (t = this.connection) && t.setAppInfo(e) }, N.prototype.setUserInfo = function (e) { var t; null != (t = this.connection) && t.setUserInfo(e) }, N.prototype.setNetAgentDefaultServers = function (e) { var t; null != (t = this.connection) && t.setNetAgentDefaultServers(e) }, N.prototype.setBackupDomains = function (e) { var t; null != (t = this.connection) && t.setBackupDomains(e) }, N.prototype.setDispatchConnectServers = function (e) { var t; null != (t = this.connection) && t.setDispatchConnectServers(e) }, N.prototype.setNetAgentSpecifiedServers = function (e) { var t; null != (t = this.connection) && t.setNetAgentSpecifiedServers(e) }, N.prototype.startHttpRequest = function (e, t, A, r, i) { var o; null != (o = this.connection) && o.startHttpRequest(e, t, A, r, i) }, N.prototype.getAppConfigByAgent = function (e, t, A) { var r; return null == (r = this.connection) ? void 0 : r.getAppConfigByAgent(e, t, A) }, N.prototype.getPCRequest = function (e, t) { var A; return (null == (A = this.connection) ? void 0 : A.getPCRequest(e, t)) || null }, N.prototype.connectUa = function () { var e; null != (e = this.connection) && e.connectUa() }, N.prototype.destroyConnect = function () { var e; null != (e = this.connection) && e.destroyConnect() }, N.prototype.destroy = function () { var e; null != (e = this.connection) && e.destroy() }, N.prototype.isConnect = function () { return !!this.connection && this.connection.isConnect() }, N.prototype.on = function (e, t) { var A; return (null == (A = this.connection) ? void 0 : A.on(e, t)) || !0 }, N.prototype.off = function (e, t) { var A; return null == (A = this.connection) ? void 0 : A.off(e, t) }, N.prototype.setLogger = function (e) { var t; return null == (t = this.connection) ? void 0 : t.setLogger(e) }, N.prototype.setAccess = function (e) { var t; return null == (t = this.connection) ? void 0 : t.setAccess(e) }, N); function N() { this.isLoad = !1, this.callBackList = [], this.connection = new P.ZegoConnectionAgent } (r = R = R || {})[r.AUTO = 0] = "AUTO", r[r.MANUAL = 1] = "MANUAL", (r = b = b || {})[r.EMPTY = 0] = "EMPTY", r[r.CLOSE = 1] = "CLOSE", (r = T = T || {})[r.Mode_UNSET = 0] = "Mode_UNSET", r[r.MODE_ONLINE = 1] = "MODE_ONLINE", r[r.MODE_TEST = 2] = "MODE_TEST", r[r.MODE_ALPHA = 3] = "MODE_ALPHA", (r = k = k || {})[r.CLOSE = 0] = "CLOSE", r[r.TEMP = 1] = "TEMP", r[r.TIMEOUT = 2] = "TIMEOUT", (r = w = w || {})[r.SERVICE_UNSET = 0] = "SERVICE_UNSET", r[r.SERVICE_MEDIAGW = 1] = "SERVICE_MEDIAGW", r[r.SERVICE_LIVEROOM = 2] = "SERVICE_LIVEROOM", r[r.SERVICE_MIX = 3] = "SERVICE_MIX", r[r.SERVICE_ZEUS = 4] = "SERVICE_ZEUS", r[r.SERVICE_ZPUSH = 5] = "SERVICE_ZPUSH", r[r.SERVICE_L3 = 6] = "SERVICE_L3", r[r.SERVICE_TALKLINE = 7] = "SERVICE_TALKLINE", r[r.SERVICE_EDUSUITE = 8] = "SERVICE_EDUSUITE", r[r.SERVICE_ZIM = 9] = "SERVICE_ZIM", r[r.SERVICE_ClOUD_SETTING = 10] = "SERVICE_ClOUD_SETTING", r[r.SERVICE_ZEUSHB = 11] = "SERVICE_ZEUSHB", r[r.SERVICE_USER_LOGIC = 12] = "SERVICE_USER_LOGIC", r[r.SERVICE_UNIFYDISPATCH = 13] = "SERVICE_UNIFYDISPATCH", r[r.SERVICE_QUALITY = 14] = "SERVICE_QUALITY", r[r.SERVICE_SECURITY = 15] = "SERVICE_SECURITY", r[r.SERVICE_KTVCPR = 16] = "SERVICE_KTVCPR", r[r.SERVICE_SWITCH4LIVEROOM = 17] = "SERVICE_SWITCH4LIVEROOM", r[r.SERVICE_WEBRTC_SIGNAL = 18] = "SERVICE_WEBRTC_SIGNAL", r[r.SERVICE_L3_WEBRTC_SIGNAL = 19] = "SERVICE_L3_WEBRTC_SIGNAL", r[r.SERVICE_VIDEOCPR = 20] = "SERVICE_VIDEOCPR", r[r.SERVICE_CDN = 21] = "SERVICE_CDN", r[r.SERVICE_CLOUDRECORD = 22] = "SERVICE_CLOUDRECORD", r[r.SERVICE_INNER_ECHO = 23] = "SERVICE_INNER_ECHO", r[r.SERVICE_OUTER_ECHO = 24] = "SERVICE_OUTER_ECHO", r[r.SERVICE_LOCALHOST_ECHO = 25] = "SERVICE_LOCALHOST_ECHO", r[r.SERVICE_ECHO = 26] = "SERVICE_ECHO", r[r.SERVICE_DOCSERVICE = 27] = "SERVICE_DOCSERVICE", r[r.SERVICE_AUTHSVR = 28] = "SERVICE_AUTHSVR", (r = O = O || {}).Logining = "LOGINING", r.Logined = "LOGINED", r.LoginFailed = "LOGIN_FAILED", r.Reconnecting = "RECONNECTING", r.Reconnected = "RECONNECTED", r.ReconnectFailed = "RECONNECT_FAILED", r.Kickout = "KICKOUT", r.Logout = "LOGOUT", r.LogoutFailed = "LOGOUT_FAILED"; var G = { "SERVER": { "code": 0, "msg": "liverooom cmd error" }, "SUCCESS": { "code": 0, "msg": "success." }, "INIT": { "code": 2000000001, "msg": "init sdk wrong" }, "NOT_LOGIN": { "code": 1000002, "msg": "not login" }, "APPID_INVALID": { "code": 1001004, "msg": "appid invalid" }, "NETWORK_BROKEN": { "code": 1000017, "msg": "network is broken" }, "INPUT_PARAM": { "code": 1100001, "msg": "input parm error." }, "TIMEOUT": { "code": 1100002, "msg": "network timeout." }, "SOCKET_CLOSE": { "code": 1100003, "msg": "socket close" }, "NET_SOCKET_TIMEOUT": { "code": 1100004, "msg": "net agent timeout" }, "NET_HB_TIMEOUT": { "code": 1100005, "msg": "net hb timeout" }, "INIT_SDK_WRONG": { "code": 1101e3, "msg": "init sdk wrong" }, "ROOM_COUNT_EXCEED": { "code": 1002001, "msg": "login rooms exceeds the upper limit" }, "USER_ID_NULL": { "code": 1002005, "msg": "user ID is empty" }, "USER_ID_INVALID_CHARACTER": { "code": 1002006, "msg": "user ID contains illegal characters" }, "USER_ID_TOO_LONG": { "code": 1002007, "msg": "user ID is too long" }, "USER_NAME_NULL": { "code": 1002008, "msg": "username is empty" }, "USER_NAME_TOO_LONG": { "code": 1002010, "msg": "username is too long" }, "ROOM_ID_NULL": { "code": 1002011, "msg": "room ID is empty" }, "ROOM_ID_INVALID_CHARACTER": { "code": 1002012, "msg": "room ID contains illegal characters" }, "ROOM_ID_TOO_LONG": { "code": 1002013, "msg": "room ID is too long" }, "ROOM_NOT_EXIST": { "code": 1002014, "msg": "room not exist" }, "LOGIN_TIMEOUT": { "code": 1002031, "msg": "login timeout" }, "ROOM_MAX_USER_COUNT": { "code": 1002034, "msg": "users logging into the room exceeds the maximum number" }, "MULTI_ROOM_UNABLE": { "code": 1002036, "msg": "multi room unable" }, "MULTIPLE_LOGIN_KICKOUT": { "code": 1002050, "msg": "kickout may be the same user ID login other" }, "NETWORK_RECOVERY": { "code": 1002051, "msg": "network recovery" }, "ROOM_RETRY_TIMEOUT": { "code": 1002053, "msg": "network is broken and login fail." }, "MANUAL_KICKOUT": { "code": 1002055, "msg": "server has sent a signal to kick out" }, "REPEATEDLY_LOGIN": { "code": 1002056, "msg": "user repeatedly login" }, "REPEATEDLY_ENTER_ROOM": { "code": 1002057, "msg": "user repeatedly enter room" }, "ALREADY_LOGIN": { "code": 1002058, "msg": "user already logged in" }, "FORBID_BLACK_USER": { "code": 1002066, "msg": "forbid black user" }, "ROOM_INNER_ERROR": { "code": 1002099, "msg": "room inner error" }, "HEARTBEAT_TIMEOUT": { "code": 1102001, "msg": "heartbeat timeout." }, "PARSE_JSON_ERROR": { "code": 1102011, "msg": "parse json error." }, "LOGIN_PROCESSING": { "code": 1102012, "msg": "login is processing." }, "LIVEROMM_REQUEST_ERROR": { "code": 1102013, "msg": "liveroom request error." }, "ZPUSH_REQUEST_FAIL": { "code": 1102014, "msg": "zpush request fail." }, "LOGIN_STATE_WRONG": { "code": 1102015, "msg": "user login state is wrong." }, "TOKEN_ERROR": { "code": 1102016, "msg": "token error" }, "DIAPATCH_ERROR": { "code": 1102017, "msg": "dispatch error" }, "TOKEN_EXPIRED": { "code": 1102018, "msg": "token expired" }, "SUBCMD_ERROR": { "code": 1102019, "msg": "subcmd error." }, "ZEGO_AUTH_ERROR": { "code": 1102020, "msg": "zego auth error." }, "BIZ_CHANNEL_ERROR": { "code": 1102021, "msg": "biz channel error." } }, F = (L.base64encode = function (e) { for (var t, A, r, i = e.length, o = 0, n = ""; o < i;) { if (t = 255 & e.charCodeAt(o++), o == i) { n = (n += L.base64EncodeChars.charAt(t >> 2)) + L.base64EncodeChars.charAt((3 & t) << 4) + "=="; break } if (A = e.charCodeAt(o++), o == i) { n = (n = (n += L.base64EncodeChars.charAt(t >> 2)) + L.base64EncodeChars.charAt((3 & t) << 4 | (240 & A) >> 4)) + L.base64EncodeChars.charAt((15 & A) << 2) + "="; break } r = e.charCodeAt(o++), n = (n = (n = (n += L.base64EncodeChars.charAt(t >> 2)) + L.base64EncodeChars.charAt((3 & t) << 4 | (240 & A) >> 4)) + L.base64EncodeChars.charAt((15 & A) << 2 | (192 & r) >> 6)) + L.base64EncodeChars.charAt(63 & r) } return n }, L.base64decode = function (e) { for (var t, A, r, i, o = e.length, n = 0, s = ""; n < o;) { for (; t = L.base64DecodeChars[255 & e.charCodeAt(n++)], n < o && -1 == t;); if (-1 == t) break; for (; A = L.base64DecodeChars[255 & e.charCodeAt(n++)], n < o && -1 == A;); if (-1 == A) break; s += String.fromCharCode(t << 2 | (48 & A) >> 4); do { if (61 == (r = 255 & e.charCodeAt(n++))) return s } while (r = L.base64DecodeChars[r], n < o && -1 == r); if (-1 == r) break; s += String.fromCharCode((15 & A) << 4 | (60 & r) >> 2); do { if (61 == (i = 255 & e.charCodeAt(n++))) return s } while (i = L.base64DecodeChars[i], n < o && -1 == i); if (-1 == i) break; s += String.fromCharCode((3 & r) << 6 | i) } return s }, L.utf16to8 = function (e) { for (var t, A = "", r = e.length, i = 0; i < r; i++)1 <= (t = e.charCodeAt(i)) && t <= 127 ? A += e.charAt(i) : A = 2047 < t ? (A = (A += String.fromCharCode(224 | t >> 12 & 15)) + String.fromCharCode(128 | t >> 6 & 63)) + String.fromCharCode(128 | t >> 0 & 63) : (A += String.fromCharCode(192 | t >> 6 & 31)) + String.fromCharCode(128 | t >> 0 & 63); return A }, L.utf8to16 = function (e) { for (var t, A, r, i = "", o = e.length, n = 0; n < o;)switch ((t = e.charCodeAt(n++)) >> 4) { case 0: case 1: case 2: case 3: case 4: case 5: case 6: case 7: i += e.charAt(n - 1); break; case 12: case 13: A = e.charCodeAt(n++), i += String.fromCharCode((31 & t) << 6 | 63 & A); break; case 14: A = e.charCodeAt(n++), r = e.charCodeAt(n++), i += String.fromCharCode((15 & t) << 12 | (63 & A) << 6 | (63 & r) << 0) }return i }, L.base64EncodeChars = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/", L.base64DecodeChars = [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 62, -1, -1, -1, 63, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, -1, -1, -1, -1, -1, -1, -1, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, -1, -1, -1, -1, -1, -1, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, -1, -1, -1, -1, -1], L); function L() { } r = s(3); var H = s.n(r), x = (r = s(6), s.n(r)), q = function D() { return (q = Object.assign || function (e) { for (var t, A = 1, r = arguments.length; A < r; A++)for (var i in t = arguments[A]) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]); return e }).apply(this, arguments) }, Z = ["00", "01", "02", "03", "04", "05", "06", "07", "08", "09"], V = (j.checkConfigParam = function (e, t, A) { return e && "number" == typeof e && this.checkInteger(e) ? !(!t || "string" != typeof t && !Array.isArray(t) || "" == t) || (A.error("ccp.0 server must be string or string array and not empty"), !1) : (A.error("ccp.0 appid must be positive integer number and not empty"), !1) }, j.checkPriConfigParam = function (e, t, A, r, i) { return e && "number" == typeof e && this.checkInteger(e) ? t && "string" == typeof t ? "object" != (void 0 === A ? "undefined" : u(A)) || "string" != typeof A.deviceID ? (i.error("ccp.0 deviceID must be string and not empty"), !1) : 1 === r || 0 === r || (i.error("ccp.0 anType must be 0 or 1"), !1) : (i.error("ccp.0 dispatchServer must be string and not empty"), !1) : (i.error("ccp.0 appid must be positive integer number and not empty"), !1) }, j.checkIllegalCharacters = function (e) { return /^([0-9a-zA-Z#!$%&()`'+-;<=.>@^_~,\\*])+$/.test(e) && /^[^:/]*$/g.test(e) }, j.isUrl = function (e) { return !!(e.startsWith("rtmp://") || e.startsWith("https://") && e.endsWith(".flv") || e.startsWith("https://") && e.endsWith(".m3u8")) }, j.registerCallback = function (e, t, A) { var r; t.success && (r = t.success, A[e + "SuccessCallback"] = r), t.error && (r = t.error, A[e + "ErrorCallback"] = r) }, j.actionErrorCallback = function (e, t) { return t[e + "ErrorCallback"] }, j.actionSuccessCallback = function (e, t) { return t[e + "SuccessCallback"] }, j.logReportCallback = function (e, t, A, r) { j.registerCallback(e, { "success": function success(e, r) { for (var i = [], o = 2; o < arguments.length; o++)i[o - 2] = arguments[o]; j.dataReportEvent(t, A, e, r, i) } }, r) }, j.proxyRes = function (e, t, A, r) { return { "interResolve": function interResolve(r) { e.uploadReport(t), A(r) }, "interReject": function interReject(A, i) { var o; void 0 === i && (i = ""), (o = A.code < 2e9 && 1e9 < A.code ? j.decodeServerError(A.code, A.msg) : { "code": A.code, "message": A.msg }) && e.addMsgInfo(t, { "error": o.code, "message": o.message + i }), e.uploadReport(t), r({ "errorCode": A.code || A.errorCode }) } } }, j.getServerError = function (e) { var t, A, r = { "1": "parse json error.", "1001": "login is processing.", "1002": "liveroom request error.", "1003": "zpush connect fail.", "1004": "zpush handshake fail.", "1005": "zpush login fail.", "1006": "user login state is wrong.", "1007": "got no zpush addr", "1008": "token error", "1009": "dispatch error", "1010": "token expired", "1011": "token format error", "2002": "biz channel error", "1000000000": "liveroom cmd error, code:", "1000002001": "need relogin", "1000002002": "third token auth error", "1000002003": "token nonce type should be int64", "1000002004": "token appid type  should be uint32", "1000002005": "token timeout type should be int64", "1000002006": "token user_id type should be string", "1000002007": "token room_id type should be string", "1000002008": "token format error", "1000002009": "token privilege type should be map", "1000002010": "token expire_time type should be int64", "1000002011": "token user_id type should be string", "1000002012": "token not exist", "1000002013": "token update error", "1000002014": "token not need to check" }; return 0 === e ? G.SUCCESS : ((t = q({}, G.ROOM_INNER_ERROR)).code = e, t.msg = 1e9 < e ? (A = r[e]) ? "liveroom cmd error, code: " + e + ", message: " + A : r[1e9] + e : r[e] ? r[e] + " code:" + e : "unknown error code:" + e, t) }, j.unregisterCallback = function (e, t) { delete t[e + "SuccessCallback"], delete t[e + "ErrorCallback"] }, j.decodeServerError = function (e, t) { var A = { "code": -1, "message": "server error" }; return A.code = 1e9 < e ? e - 1e9 + 52e6 : e + 2002e6, t && (A.message = t), A }, j.getLiveRoomError = function (e, t) { var A = { "1016": "MULTI_ROOM_UNABLE", "1105": "ROOM_MAX_USER_COUNT", "1012": "PUBLISHER_ERROR_REPETITIVE_PUBLISH_STREAM", "2002": "TOKEN_ERROR", "2003": "ROOM_ERROR_LOGIN_TIMEOUT", "2010": "TOKEN_ERROR", "5022": "ROOM_COUNT_EXCEED", "5030": "FORBID_BLACK_USER" }; return t ? 2e5 < e && e < 3e5 ? A[e - 2e5] : e < 2e5 ? { "50116": "TOKEN_ERROR", "50117": "TOKEN_EXPIRED", "50118": "TOKEN_ERROR", "50119": "TOKEN_ERROR", "50120": "TOKEN_ERROR", "50121": "TOKEN_ERROR", "50122": "TOKEN_ERROR", "50123": "TOKEN_EXPIRED", "50124": "TOKEN_ERROR", "50125": "TOKEN_ERROR", "50126": "TOKEN_ERROR", "50127": "TOKEN_ERROR", "50128": "TOKEN_ERROR" }[e] || A[e] || "ROOM_INNER_ERROR" : A[e] || "ROOM_INNER_ERROR" : 1e9 < e ? A[e - 1e9] || "" : { "1": "PARSE_JSON_ERROR", "1001": "LOGIN_PROCESSING", "1002": "LIVEROMM_REQUEST_ERROR", "1003": "ZPUSH_REQUEST_FAIL", "1004": "ZPUSH_REQUEST_FAIL", "1005": "ZPUSH_REQUEST_FAIL", "1006": "LOGIN_STATE_WRONG", "1007": "ZPUSH_REQUEST_FAIL", "1008": "TOKEN_ERROR", "1009": "DIAPATCH_ERROR", "1010": "TOKEN_EXPIRED", "1011": "TOKEN_ERROR", "1012": "SUBCMD_ERROR", "1101": "ZEGO_AUTH_ERROR", "2001": "BIZ_CHANNEL_ERROR", "2002": "BIZ_CHANNEL_ERROR" }[e] || "ROOM_INNER_ERROR" }, j.getKickoutError = function (e, t) { var A = { "code": e, "message": "kickout reason = " + e }; if (t) switch (e) { case 1: A.code = 63000001, A.message = "zpush multiple login kickout", A.name = "MULTIPLE_LOGIN_KICKOUT"; break; case 2: A.code = 63000002, A.message = "zpush manual kickout", A.name = "MANUAL_KICKOUT"; break; case 4: A.code = 63000005, A.message = "zpush token expired", A.name = "TOKEN_EXPIRED"; break; default: A.code = e, A.message = "kickout reason = " + e } else switch (e) { case 1: A.code = 63000001, A.message = "zpush multiple login kickout", A.name = "MULTIPLE_LOGIN_KICKOUT"; break; case 2: A.code = 63000002, A.message = "zpush manual kickout", A.name = "MANUAL_KICKOUT"; break; case 3: A.code = 63000003, A.message = "kickout reason = " + e; break; case 4: A.code = 63000004, A.message = "zpush multiple login kickout", A.name = "MULTIPLE_LOGIN_KICKOUT"; break; case 5: A.code = 63000005, A.message = "zpush token expired", A.name = "TOKEN_EXPIRED"; break; default: A.code = e, A.message = "kickout reason = " + e }return A }, j.dataReportEvent = function (e, t, A, r, i) { switch (A) { case "eventStart": e.eventStart(t, r); break; case "eventEndWithMsgInfo": e.eventEndWithMsgInfo(t, r, i[0]); break; case "addEventMsg": e.addEventMsg(t, r, i[0], i[1]); break; case "addEvent": e.addEvent(t, r); break; case "eventEnd": e.eventEnd(t, r); break; case "addMsgInfo": e.addMsgInfo(t, i[0]) } }, j.isKeepTryLogin = function (e) { switch (e) { case 1002: case 1003: return !0; default: return !1 } }, j.mergeUserList = function (e, t, A, r) { e.debug("msl.0 call"); var i = [], o = []; A = A || []; for (var n = 0; n < A.length; n++) { for (var s = !1, a = 0; a < t.length; a++)if (A[n].userID === t[a].userID) { s = !0; break } s || i.push(A[n]) } for (var c = 0; c < t.length; c++) { s = !1; for (var g = 0; g < A.length; g++)if (t[c].userID === A[g].userID) { s = !0; break } s || o.push(t[c]) } for (t.splice(0), n = 0; n < A.length; n++)t.push(t[n]); r(i, o), e.debug("msl.0 call success") }, j.checkInteger = function (e, t) { return 0 == t ? "number" == typeof e && e % 1 == 0 && 0 <= e : "number" == typeof e && e % 1 == 0 && 0 < e }, j.checkValidNumber = function (e, t, A) { return t = t || 1, A = A || 1e4, "number" == typeof e && e % 1 == 0 && t <= e && e <= A }, j.generateRandumNumber = function (e) { return parseInt(Math.random() * (e + 1) + "", 10) }, j.uuid = function (e, t) { var A, r, i = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""), o = []; if (t = t || i.length, e) for (A = 0; A < e; A++)o[A] = i[0 | Math.random() * t]; else for (o[8] = o[13] = o[18] = o[23] = "-", o[14] = "4", A = 0; A < 36; A++)o[A] || (r = 0 | 16 * Math.random(), o[A] = i[19 == A ? 3 & r | 8 : r]); return o.join("") }, j.compareVersion = function (e, t) { e = e.split("."), t = t.split("."); for (var A = Math.max(e.length, t.length); e.length < A;)e.push("0"); for (; t.length < A;)t.push("0"); for (var r = 0; r < A; r++) { var i = parseInt(e[r]), o = parseInt(t[r]); if (o < i) return 1; if (i < o) return -1 } return 0 }, j.getBrowser = function () { var e = window.navigator.userAgent, t = null != window.ActiveXObject && -1 != e.indexOf("MSIE"), A = -1 != e.indexOf("Firefox"), r = null != window.opr, i = e.indexOf("Chrome") && window.chrome; return e = -1 != e.indexOf("Safari") && -1 != e.indexOf("Version"), t ? "IE" : A ? "Firefox" : r ? "Opera" : i ? "Chrome" : e ? "Safari" : "Unkown" }, j.isTestEnv = function (e) { return !(!e.startsWith("wss") || -1 === e.indexOf("test") || !e.endsWith("ws")) }, j.getLogLevel = function (e) { return B[e] }, j.getUint64 = function (e, t, A) { var r = A.getUint32(e, t); return A = A.getUint32(e + 4, t), e = t ? r + Math.pow(2, 32) * A : Math.pow(2, 32) * r + A, Number.isSafeInteger(e) || console.warn(e, "exceeds MAX_SAFE_INTEGER. Precision may be lost"), e }, j.decodeTokenExpire = function (e) { try { var t, A = Uint8Array.from(F.base64decode(e), function (e) { return e.charCodeAt(0) }), r = new DataView(A.buffer); return 0 < (t = "function" == typeof r.getBigInt64 ? r.getBigUint64(0) : j.getUint64(0, !1, r)) ? Number(t) : Number(r.getBigUint64(0, !0)) } catch (e) { console.error("token error") } return -1 }, j.bin2hex = function (e) { for (var t, A = "", r = 0, i = (e += "").length; r < i; r++)A += (t = e.charCodeAt(r).toString(16)).length < 2 ? "0" + t : t; return A }, j.getCanvasFingerprint = function (e) { var t = document.createElement("canvas"), A = ((A = t.getContext("2d")).textBaseline = "top", A.font = "14px 'Arial'", A.fillStyle = "#f60", A.fillRect(125, 1, 62, 20), A.fillStyle = "#069", A.fillText(e, 2, 15), A.fillStyle = "rgba(102, 204, 0, 0.7)", A.fillText(e, 4, 17), t.toDataURL().replace("data:image/png;base64,", "")); return e = atob(A), this.bin2hex(e.slice(-16, -12)) }, j.generateUUID = function (e) { var t, A; return 0 === (e = void 0 === e ? 0 : e) ? A = localStorage.getItem("z_deviceID") : wx.getStorageSync("z_deviceID"), A || (t = (new Date).getTime(), A = "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function (e) { var A = (t + 16 * Math.random()) % 16 | 0; return t = Math.floor(t / 16), ("x" == e ? A : 3 & A | 8).toString(36) }), 0 === e ? (e = this.getCanvasFingerprint("hello, zego") + A.slice(8), localStorage.setItem("z_deviceID", e)) : wx.setStorageSync("z_deviceID", A), A) }, j.getNetType = function () { var e = navigator.connection || navigator.mozConnection || navigator.webkitConnection; return ((null == e ? void 0 : e.effectiveType) || (null == e ? void 0 : e.type) || "unknwon").toUpperCase() }, j.getNetTypeNum = function () { var e; return -1 < (e = ((null == (e = navigator.connection || navigator.mozConnection || navigator.webkitConnection) ? void 0 : e.effectiveType) || (null == e ? void 0 : e.type) || "unknwon").toUpperCase()).indexOf("4G") ? C.NT_4G : -1 < e.indexOf("2G") ? C.NT_2G : -1 < e.indexOf("3G") ? C.NT_3G : -1 < e.indexOf("WIFI") ? C.NT_WIFI : -1 < e.indexOf("LINE") ? C.NT_LINE : -1 < e.indexOf("NONE") ? C.NT_NONE : C.NT_UNKNOWN }, j.encryptStores = function (e, t) { return H.a.encrypt(e, t).toString() }, j.decryptStores = function (e, t) { try { return H.a.decrypt(e, t).toString(x.a) } catch (e) { return "" } }, j.getCurrentTime = function () { var e = new Date; return [e.getFullYear() + "/", (Z[e.getMonth() + 1] || e.getMonth() + 1) + "/", (Z[e.getDate()] || e.getDate()) + " ", (Z[e.getHours()] || e.getHours()) + ":", (Z[e.getMinutes()] || e.getMinutes()) + ":", Z[e.getSeconds()] || e.getSeconds(), "." + e.getTime() % 1e3].join("") }, j.isRightServerForAppid = function (e, t) { return !(e = ((null == e ? void 0 : e.replace("webliveroom", "-")) || "").split("-") || [])[1] || !/\d*/i.test(e[1]) || +e[1] == t }, j); function j() { } var z, ee = { "product": "Web_SDK", "URL": ["https://cloud-setting-api.zego.im/cloud-setting/get", "https://cloud-setting-api.zegocloud.com/cloud-setting/get"], "ONLINE": !1 }, te = { "product": "rtc_web", "importLevel": l.H, "levels": [0, 10, 100, 1e3], "bps": 32e3 }, ie = "init", oe = "0c9e6e0f8c0a8f4e", ne = "z_net_access_servers", se = "z_appconfig", ce = { "domains": ["accesshub-wss.zego.im", "accesshub-wss.coolzcloud.com", "accesshub-wss.zegocloud.com"], "primaryDomains": ["zego.im", "coolzcloud.com", "zegocloud.com"], "mode": "online", "modeNo": T.MODE_ONLINE, "sdkType": 3, "connectVer": 4, "pcEstablishTimeout": 15, "scheme": "wss", "location": "accesshub", "wssMessageType": 1 }; function K(e, t) { this.logger = e, this.stateCenter = t, this.RETRY_MAX_TIME = 300, this.RETRY_START_TIME_INTERVAL = 4, this.RETRY_CONTINUE_COUNT = 2, this.RETRY_MAX_TIME_INTERVAL = 32, this.retryTimer = null, this.maxTimer = null, this.retryStartTime = 0, this.retryActiveCount = 1, this.isOverTime = !1 } function W(e) { return e } function Y(e) { return e } function X(e) { return e } function J(e) { return e } K.prototype.init = function (e, t, A, r) { this.invalid(), this.stopMaxTime(), this.isOverTime = !1, "number" == typeof e && e < 3600 && (this.RETRY_MAX_TIME = e), "number" == typeof t && (this.RETRY_START_TIME_INTERVAL = t), "number" == typeof A && (this.RETRY_CONTINUE_COUNT = A), "number" == typeof r && (this.RETRY_MAX_TIME_INTERVAL = r) }, K.prototype.invalid = function () { this.logger.info("zm.rh.ivd end retry"), this.retryTimer && clearTimeout(this.retryTimer), this.retryTimer = null, this.retryStartTime = 0, this.retryActiveCount = 1 }, r = K, (Fe = z = z || {}).RTM_CONSTRUCTOR = "zm.0", Fe.RTM_BIND_WINDOW_LISTENER = "zm.wl", Fe.RTM_SET_LOG_CONFIG = "zm.slf", Fe.RTM_SET_DEBUG_VERBOSE = "zm.sdv", Fe.RTM_LOGIN_ROOM = "zm.lg", Fe.RTM_LOGOUT_ROOM = "zm.lo", Fe.RTM_GET_SETTING_UNIFY = "zm.gsu", Fe.RTM_FETCH_APP_CONFIG = "zm.fac", Fe.RTM_FETCH_APP_CONFIG_TARGET_TOKEN = "zm.fac.tk", Fe.RTM_HANDLE_LOG_UPLOAD = "zm.hlu", Fe.RTM_SET_ACCESS = "zm.sa", Fe.RTM_CREATENETAGENT = "zm.cna", Fe.RTM_GETSTOREAPPCONFIG = "zm.gsac", Fe.LIVEROOMMODULES_BINDROOMHANDLER = "zm.lrm.brh", Fe.RTM_SET_CLOUD_SETTING_URLS = "zm.scsu", Fe.RTM_CLOUD_REPORT_NOTIFY = "zm.crn", Fe.RTM_ON = "zm.on", Fe.RTM_OFF = "zm.off", Fe.RTM_RENEWTOKEN = "zm.rntk", Fe.RTM_RESETTOKENTIMER = "zm.rstt", Fe.RTM_ENABLE_MULTI_ROOM = "zm.emr", Fe.RTM_SEND_PB = "zm.spb", Fe.RTM_GET_HEADER = "zm.gh", Fe.ROOM_LOGIN_ROOM = "zm.rm.lg", Fe.ROOM_RENEW_LOCAL_TOKEN = "zm.rm.rlt", Fe.ROOM_TRY_LOGIN = "zm.rm.tl", Fe.ROOM_OPEN_HANDLER = "zm.rm.op", Fe.ROOM_HANDLE_LOGINRSP = "zm.rm.lgr", Fe.ROOM_CLOSEHANDLER = "zm.rm.clh", Fe.ROOM_LOGOUT = "zm.rm.lo", Fe.ROOM_RESET_ROOM = "zm.rm.rr", Fe.ROOM_DISCONNECT = "zm.rm.dcn", Fe.ROOM_KICK_OUT = "zm.rm.kco", Fe.ROOM_STATUS_CALLBACK = "zm.rm.scb", Fe.ROOM_RESETTOKEN_TIMER = "zm.rm.rst", Fe.ROOM_HANDLE_Hb_LOGOUT = "zm.hhl", Fe.HEARTBEAT_START = "zm.hb.st", Fe.HEARTBEAT_HEARTBEAT_RSP = "zm.hb.rsp", Fe.HEARTBEAT_RESET = "zm.hb.rst", Fe.SERVICE_START_CHECK = "zm.sc.0", Fe.SERVICE_STOP_CHECK = "zm.sc.1", Fe.SERVICE_PUSH = "zm.sv.ps", Fe.SERVICE_SEND = "zm.sv.sd", Fe.RETRYROOMHANDLER_HANDLE_LOGIN_FINISH = "zm.rrh.hlf", Fe.RETRYROOMHANDLER_HANDLE_ERROR = "zm.rrh.he", Fe.USER_LOGIN_RSP = "zm.us.lgr", Fe.USER_FETCH_USER = "zm.us.ftu", Fe.USER_FETCH_USER_RSP = "zm.us.urp", Fe.USER_USER_PUSH = "zm.us.uph", Fe.USER_MERGE_SEQ = "zm.us.mg", Fe.USER_MERGE_TIMEOUT = "zm.us.mto", Fe.USER_MERGE = "zm.us.mg", Fe.USER_HB_PATCH = "zm.us.pt", Fe.STATE_ACTION = "zm.st.at", Fe.ON_LISTENER = "ON_LISTENER", Fe.OFF_LISTENER = "zm.st.ofls", Fe.LIVEROOMHANDLER_SENDMESSAGE = "zm.lrh.sm", Fe.LIVEROOMHANDLER_HANDLEPUSH = "zm.lrh.hp", Fe.LIVEROOMHANDLER_HANDLESWITCHPUSH = "zm.lrh.hsp", Fe.LIVEROOMHANDLER_PUSHUSERUPDATE = "zm.lrh.puu", Fe.LIVEROOMHANDLER_PUSHKICKOUT = "zm.lrh.pk", Fe.LIVEROOMHANDLER_GETSTREAMLIST = "zm.lrh.gs", Fe.LIVEROOMHANDLER_LOGIN = "zm.lrh.lgi", Fe.LIVEROOMHANDLER_FETCH_USER_LIST = "zm.lrh.ful", Fe.LIVEROOMHANDLER_LOGOUT = "zm.lrh.lgo", Fe.LIVEROOMHANDLER_SENDSTREAMUPDATE = "zm.lrh.sru", Fe.LIVEROOMHANDLER_RENEW_TOKEN = "zm.lrh.rt", Fe.LIVEROOMHANDLER_SENDSIGNALCMD = "zm.lrh.ssc", Fe.LIVEROOMHANDLER_SENDBIGROOMMESSAGE = "zm.lrh.sbrm", Fe.LIVEROOMHANDLER_SENDCUSTOMCOMMAND = "zm.lrh.scc", Fe.LIVEROOMHANDLER_FETCHRELIABLEMESSAGE = "zm.lrh.frm", Fe.LIVEROOMHANDLER_SENDRELIABLEMESSAGE = "zm.lrh.srm.0", Fe.LIVEROOMHANDLER_SENDROOMMSG = "zm.lrh.srm.1", Fe.LIVEROOMHANDLER_HANDLEDISCONNECTED = "zm.lrh.hd", Fe.LIVEROOMHANDLER_HANDLEBROKEN = "zm.lrh.hb", Fe.LIVEROOMHANDLER_HANDLECONNECTED = "zm.lrh.hc", Fe.LIVEROOMHANDLER_RESET = "zm.lrh.r.0", Fe.TRACER_INIT = "zm.tc.ii", Fe.TRACER_LOAD_SCRIPT = "zm.tc.ls"; var le = { "kZMInitSetting": { "event": "/sdk/init", "error": { "kInvalidParamError": G.INPUT_PARAM }, "system_info": Y, "servers": function servers(e) { return e }, "is_from_cache": J, "project": Y, "liveroom_version": Y, "biz_type": X, "lua_md5": Y, "sev_env": Y, "use_na": X }, "kZMListener": { "event": "listener" }, "kZMRoomContext": { "event": "room_context" }, "kZMHB": { "event": "room_hb" }, "kZMSetDebug": { "event": "/sdk/set_debug", "debug": Y }, "kZMSetLog": { "event": "/sdk/set_log_config", "error": { "kInvalidParamError": G.INPUT_PARAM }, "log_level": function log_level(e) { return e }, "remote_log_level": Y, "log_url": Y }, "kZMOnListener": { "event": "/sdk/on_listener", "listener": Y, "error": { "INPUT_PARAM": G.INPUT_PARAM } }, "kZMOffListener": { "event": "/sdk/off_listener", "listener": Y, "error": { "INPUT_PARAM": G.INPUT_PARAM } }, "kZMLoginRoom": { "event": "/sdk/login", "room_id": Y, "room_sid_string": Y, "user_state_update": X, "max_member_cnt": X, "message": Y, "token": Y, "svr_env": Y, "server": Y, "try_cnt": X, "room_mode": X, "role": X, "audience_create_room": X, "liveroom_sid_string": Y, "error": { "ROOM_ID_NULL": G.ROOM_ID_NULL, "INPUT_PARAM": G.INPUT_PARAM, "ROOM_ID_TOO_LONG": G.ROOM_ID_TOO_LONG, "ROOM_ID_INVALID_CHARACTER": G.ROOM_ID_INVALID_CHARACTER, "USER_ID_NULL": G.USER_ID_NULL, "USER_ID_TOO_LONG": G.USER_ID_TOO_LONG, "USER_ID_INVALID_CHARACTER": G.USER_ID_INVALID_CHARACTER, "USER_NAME_NULL": G.USER_NAME_NULL, "USER_NAME_TOO_LONG": G.USER_NAME_TOO_LONG, "REPEATEDLY_LOGIN": G.REPEATEDLY_LOGIN, "LOGIN_TIMEOUT": G.LOGIN_TIMEOUT, "INNER_ERROR": G.ROOM_INNER_ERROR, "NETWORK_BROKEN": G.NETWORK_BROKEN } }, "kZMSubLogin": { "event": "/sdk/sublogin", "server": Y, "room_id": Y, "room_sid_string": Y }, "kZMSwitchLogin": { "event": "/zpush/login", "sdk_zpush_sessionid_string": Y }, "kZMLiveRoomEnter": { "event": "/liveroom/enter" }, "kZegoLiveRoomConnect": { "event": "/liveroom/connect" }, "kZMReNewToken": { "event": "/sdk/renew_token", "error": { "INPUT_PARAM": G.INPUT_PARAM, "NOT_LOGIN": G.NOT_LOGIN }, "token": Y }, "kZMHbTimeout": { "event": "/zpush/hb_timeout" }, "kZMLogoutRoom": { "event": "/sdk/logout", "error": { "INPUT_PARAM": G.INPUT_PARAM, "ROOM_NOT_EXIST": G.ROOM_NOT_EXIST }, "room_id": Y, "room_sid_string": Y, "is_multi": J, "is_send_cmd_net": J, "liveroom_sid_string": Y }, "kZMSwitchLogout": { "event": "/switch/logout_user", "error": { "INPUT_PARAM": G.INPUT_PARAM, "ROOM_NOT_EXIST": G.ROOM_NOT_EXIST } }, "kZMQuitLiveroom": { "event": "/liveroom/quit", "error": { "INPUT_PARAM": G.INPUT_PARAM, "ROOM_NOT_EXIST": G.ROOM_NOT_EXIST }, "is_multi": J, "liveroom_sid_string": Y, "sdk_zpush_sessionid_string": Y }, "kZMMultiLogout": { "event": "/zpush/multi_logout_user", "error": { "INPUT_PARAM": G.INPUT_PARAM, "ROOM_NOT_EXIST": G.ROOM_NOT_EXIST } }, "kZMReLoginRoom": { "event": "/sdk/relogin", "error": { "ROOM_ID_NULL": G.ROOM_ID_NULL, "ROOM_DISCONNECT": G.NETWORK_BROKEN }, "server": Y, "try_cnt": X }, "kZMTempBroken": { "event": "/liveroom/tempbroken" }, "kZMReconnect": { "event": "/sdk/reconnect", "room_broken_time": X }, "kZMSdkDisconnect": { "event": "/sdk/disconnect" }, "kZMKickout": { "event": "/sdk/kickout", "user_id": Y, "kickout_reason": X, "need_relogin": X, "error": {} }, "kZMRoomHB": { "event": "/liveroom/hb", "room_id": Y, "room_sid_string": Y, "interval": X, "stream_seq": X, "server_user_seq": X, "error": { "NOT_LOGIN": G.NOT_LOGIN, "HB_TIMEOUT": G.TIMEOUT } }, "kZMRoomRecvUserUpdateInfo": { "event": "/liveroom/recv_user_update_info", "user_list_seq": X, "update_user": W, "error": { "ROOM_NOT_EXIST": G.ROOM_NOT_EXIST } }, "kZegoListener": { "event": "/sdk/listener" }, "kZegoEnableMultiRoom": { "event": "/sdk/enable_multi_room", "is_multi": J, "error": { "kInvalidParamError": G.INPUT_PARAM, "kAlreadyLoginError": G.ALREADY_LOGIN } }, "kZMCloudSettingCache": { "event": "/cloud_setting/cache", "files": W }, "kZMCloudSettingRefresh": { "event": "/cloud_setting/refresh", "request_kv": W, "files": W }, "kZMCloudSettingRequest": { "event": "/cloud_setting/request", "request_detail": W, "files": W }, "kZMGetCurrentUserList": { "event": "/liveroom/get_current_user_list", "user_index": X, "is_time_ascend": J, "use_na": X }, "kZegoConnConnect": { "event": "/zegoconn/connect", "connect_id": Y, "request_count": X, "events": W }, "kZegoConnDisConnect": { "event": "/zegoconn/disconnect", "connect_id": Y, "url": Y, "connect_duration": X }, "kZegoConnDispatch": { "event": "/zegoconn/auto_dispatch", "domain_list": function domain_list(e) { return e } }, "kZegoRequest": { "event": "/zegoconn/request", "req_location": W }, "kZegoSDKConfigInit": { "event": "/sdk_config/init", "trigger_reason": W, "try_count": X }, "kZegoSDKProxyConnect": { "event": "/zegoconn/proxy_connect", "service_no": X, "proxy_link_sources": X, "recv_time": X, "connect_stream": X }, "kZegoSDKProxyBroken": { "event": "/zegoconn/proxy_broken", "service_no": X }, "kZegoSDKProxyDisconnect": { "event": "/zegoconn/proxy_disconnect", "service_no": X } }; de = function $(e, t) { return (de = Object.setPrototypeOf || ({ "__proto__": [] } instanceof Array ? function (e, t) { e.__proto__ = t } : function (e, t) { for (var A in t) Object.prototype.hasOwnProperty.call(t, A) && (e[A] = t[A]) }))(e, t) }, function (e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Class extends value " + String(t) + " is not a constructor or null"); function n() { this.constructor = e } de(e, t), e.prototype = null === t ? Object.create(t) : (n.prototype = t.prototype, new n) }(re, Ce = r), re.prototype.renewLocalToken = function (e, t) { this.token = e, this.room.token = this.token; var A = (new Date).getTime(), r = void 0; t && "number" == typeof t ? r = 1e3 * t : "string" == typeof e && ["03", "04"].includes(e.substring(0, 2)) && (t = 1e3 * V.decodeTokenExpire(e.substring(2)), this.logger.info(z.ROOM_RENEW_LOCAL_TOKEN + " time " + t + " " + A + " " + this.stateCenter.local_time_deviation), r = t - (A - this.stateCenter.local_time_deviation)), r && this.roomHandler.resetTokenTimer(r), this.stateCenter.actionListener("_tokenRenewed", e, this.room.roomID) }, re.prototype.initRoom = function (e, t, A, r, i, o, n) { this.roomHandler = e, this.roomID = t, this.renewLocalToken(A), this.user = r, this.server = i, this.serverBak = o || i, this.config = n }, re.prototype.active = function (e) { var t = this, A = (void 0 === e && (e = !1), this.logger.info(z.ROOM_LOGIN_ROOM + " retry call " + (null == (A = this.room) ? void 0 : A.roomID)), (null != (A = this.loginRoomCallback) && A.success ? le.kZMSubLogin : le.kZMReLoginRoom).event); if (this.subLoginSpan || (this.subLoginSpan = this.stateCenter.reporter.createSpan(l.H, { "key": le.kZMLoginRoom.event, "par": this.roomID }, { "key": A, "par": this.roomID }, A, !0), this.spanKey = A), this.roomHandler.setRunState(g.trylogin), this.room.isMulti && (null == (A = this.stateCenter.roomModulesList.find(function (e) { return !e.isMulti })) ? void 0 : A.runState) !== g.login) this.logger.info(z.ROOM_LOGIN_ROOM + " service is disconnected, multi room stop retry"); else if (this.retryTimer) this.logger.info(z.ROOM_LOGIN_ROOM + " has actived, ignore"); else { var r = this.stateCenter.networkState == h.offline; if (r) { if (this.logger.info(z.ROOM_LOGIN_ROOM + " check if really offline. " + this.retryNetCount), this.retryNetCount >= this.retryNetMaxTimes) return void this.logger.warn(z.ROOM_LOGIN_ROOM + " network is broken, stop retry") } else this.retryNetCount = 0; this.isOverTime ? this.logger.info(z.ROOM_LOGIN_ROOM + " retry over time, stop retry") : (1 == this.retryActiveCount ? this.retryActiveInterval = Math.floor(Math.random() * (1 - this.RETRY_START_TIME_INTERVAL) + this.RETRY_START_TIME_INTERVAL) : (A = Math.pow(2, Math.round(this.retryActiveCount / this.RETRY_CONTINUE_COUNT + 1)), this.retryActiveInterval = A > this.RETRY_MAX_TIME_INTERVAL ? this.RETRY_MAX_TIME_INTERVAL : A), this.retryTimer = setTimeout(function () { t.roomHandler.login(t.retryActiveCount % 2 == 1 ? t.server : t.serverBak, t.roomID, t.token, t.user, t.config, function (e) { t.stateCenter.networkState = h.online, t.handleLoginFinish(e) }, function (e, A) { t.handleLoginFinish(!1, e, A) }), t.retryTimer && clearTimeout(t.retryTimer), t.retryTimer = null, r ? t.retryNetCount++ : t.retryActiveCount++ }, e ? 0 : 1e3 * this.retryActiveInterval)) } }, re.prototype.startMaxTime = function () { var e = this; this.maxTimer || (this.logger.info(z.ROOM_LOGIN_ROOM + " start max timer"), this.maxTimer = setTimeout(function () { e.logger.info(z.ROOM_LOGIN_ROOM + " over max time ".concat(e.RETRY_MAX_TIME, "s, stop retry")), e.isOverTime = !0, e.roomHandler.resetRoom(), e.stopMaxTime(), e.invalid(), e.onactive(!1, G.LOGIN_TIMEOUT), e.subLoginSpan && (e.stateCenter.reporter.spanEnd({ "key": e.spanKey, "par": e.roomID }, { "error": G.LOGIN_TIMEOUT.code, "message": G.LOGIN_TIMEOUT.msg }), e.subLoginSpan = null), e.loginRoomCallback.fail && (e.loginRoomCallback.fail(G.LOGIN_TIMEOUT), e.roomHandler.disconnectedHandle(G.LOGIN_TIMEOUT), e.resetCallBack()) }, 1e3 * this.RETRY_MAX_TIME)) }, re.prototype.stopMaxTime = function () { this.maxTimer && clearTimeout(this.maxTimer), this.maxTimer = null }, re.prototype.onactive = function (e, t) { }, re.prototype.handleError = function (e, t) { if (this.RETRY_MAX_TIME < 3) return !1; if (t) { t = void 0; var A = void 0, r = void 0, i = (this.stateCenter.useNetAgent ? (t = ["202002", "205030", "205035", "50116", "50117", "50118", "50119", "50120", "50121", "50122", "50123", "50124", "50125", "50126", "50127", "50128"], A = ["40001", "40100"], r = ["201002", "30019"]) : (t = ["1000002002", "1000005030", "1000005035", "1010", "1011", "1013", "1014", "1015", "1016", "1017", "1018", "1019", "1020", "1021", "1023"], A = ["1100040001", "1100040100"]), e.code + ""); if (this.stateCenter.useNetAgent) { if (10015 === e.code) return this.room.retryConnect(), !0; if (40001 <= e.code && e.code <= 40100 || 50200 <= e.code && e.code <= 50299 || null != r && r.includes(i)) return this.room.resetSessionInfo(), !0 } return !t.includes(i) && (!!A.includes(i) || this.room.lastRunState == g.login && (this.logger.warn(z.RETRYROOMHANDLER_HANDLE_ERROR + " reset"), this.room.sessionID = "0", this.invalid(), !0)) } return !0 }, re.prototype.setLoginRoomCallback = function (e, t) { this.loginRoomCallback.success = e, this.loginRoomCallback.fail = t }, re.prototype.loginFail = function (e) { this.roomHandler.resetRoom(), this.stopMaxTime(), this.invalid(), this.onactive(!1, e), this.loginRoomCallback.fail && (this.loginRoomCallback.fail(e), this.roomHandler.disconnectedHandle(e), this.resetCallBack()) }, re.prototype.handleLoginFinish = function (e, t, A) { this.logger.info(z.RETRYROOMHANDLER_HANDLE_LOGIN_FINISH + " " + e + " " + JSON.stringify(t)), t ? (this.subLoginSpan && (this.stateCenter.reporter.spanEnd({ "key": this.spanKey, "par": this.roomID }, { "error": t.code, "message": t.msg }), this.subLoginSpan = null), this.handleError(t, A) ? (this.maxTimer || this.startMaxTime(), this.active()) : (this.roomHandler.resetRoom(), this.stopMaxTime(), this.invalid(), this.onactive(e, t), this.loginRoomCallback.fail && (this.loginRoomCallback.fail(t), this.roomHandler.disconnectedHandle(t), this.resetCallBack()))) : (this.stopMaxTime(), this.invalid(), this.onactive(e, { "code": 0, "msg": "" }), this.subLoginSpan && (this.stateCenter.reporter.spanEnd({ "key": this.spanKey, "par": this.roomID }, { "room_id": this.roomID, "room_sid_string": null == (A = this.room) ? void 0 : A.roomSessionID }), this.subLoginSpan = null), this.loginRoomCallback.success && (this.loginRoomCallback.success(e), this.resetCallBack())) }, re.prototype.invalid = function () { this.logger.info("zm.rh.ivd end retry"), this.retryTimer && clearTimeout(this.retryTimer), this.retryTimer = null, this.retryActiveCount = 1, this.retryNetCount = 0 }, re.prototype.resetCallBack = function () { this.loginRoomCallback.success = void 0, this.loginRoomCallback.fail = void 0 }; var de, Ce, Ie, pe = re; function re(e, t, A) { var r = Ce.call(this, e, t) || this; return r.logger = e, r.stateCenter = t, r.room = A, r.retryNetCount = 0, r.retryNetMaxTimes = 3, r.spanKey = "", r.loginRoomCallback = {}, r } (Fe = Ie = Ie || {}).NOT_EMPTY = "NOT_EMPTY", Fe.ILLEGAL_CHARACTERS = "ILLEGAL_CHARACTERS", Fe.TYPE_STRING = "TYPE_STRING", Fe.TYPE_INTEGER = "TYPE_INTEGER", Fe.TYPE_OBJECT = "TYPE_OBJECT", Fe.MAX_LENGTH_10 = "MAX_LENGTH_10", Fe.MAX_LENGTH_64 = "MAX_LENGTH_64", Fe.MAX_LENGTH_100 = "MAX_LENGTH_100", Fe.MAX_LENGTH_128 = "MAX_LENGTH_128", Fe.MAX_LENGTH_256 = "MAX_LENGTH_256", Fe.MAX_LENGTH_1024 = "MAX_LENGTH_1024"; var fe = { "error": { "code": 0, "msg": "suc" } }, Be = { "NOT_EMPTY": function NOT_EMPTY(e, t, A, r, i) { return void 0 === t || "" === t || null === t ? (r.error("".concat(A, " ").concat(e, " is empty")), i) : fe }, "ILLEGAL_CHARACTERS": function ILLEGAL_CHARACTERS(e, t, A, r, i) { return V.checkIllegalCharacters(t) ? fe : (r.error("".concat(A, " ").concat(e, " contains illegal characters")), i) }, "TYPE_STRING": function TYPE_STRING(e, t, A, r, i) { return "string" != typeof t ? (r.error("".concat(A, " ").concat(e, " must be string")), i) : fe }, "TYPE_INTEGER": function TYPE_INTEGER(e, t, A, r, i) { return V.checkInteger(t, !1) ? fe : (r.error("".concat(A, " ").concat(e, "  must be integer number")), i) }, "TYPE_OBJECT": function TYPE_OBJECT(e, t, A, r, i) { return t && "object" == (void 0 === t ? "undefined" : u(t)) ? fe : (r.error("".concat(A, " ").concat(e, "  must be object")), i) }, "MAX_LENGTH_10": function MAX_LENGTH_10(e, t, A, r, i) { return 10 < t.length ? (r.error("".concat(A, " ").concat(e, " is too long")), i) : fe }, "MAX_LENGTH_64": function MAX_LENGTH_64(e, t, A, r, i) { return 64 < t.length ? (r.error("".concat(A, " ").concat(e, " is too long")), i) : fe }, "MAX_LENGTH_100": function MAX_LENGTH_100(e, t, A, r, i) { return 100 < t.length ? (r.error("".concat(A, " ").concat(e, " is too long")), i) : fe }, "MAX_LENGTH_128": function MAX_LENGTH_128(e, t, A, r, i) { return 128 < t.length ? (r.error("".concat(A, " ").concat(e, " is too long")), i) : fe }, "MAX_LENGTH_256": function MAX_LENGTH_256(e, t, A, r, i) { return 256 < t.length ? (r.error("".concat(A, " ").concat(e, " is too long")), i) : fe }, "MAX_LENGTH_1024": function MAX_LENGTH_1024(e, t, A, r, i) { return 1024 < t.length ? (r.error("".concat(A, " ").concat(e, " is too long")), i) : fe } }; Object.defineProperty(ae.prototype, "debug", { "get": function get() { return this._debug }, "set": function set(e) { this._debug = e, f.LoggerStateCenter.getInstance().debug = e }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(ae.prototype, "testEnvironment", { "get": function get() { return this._testEnvironment }, "set": function set(e) { this._testEnvironment = e, f.LoggerStateCenter.getInstance().testEnvironment = e }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(ae.prototype, "ENV", { "get": function get() { return this._env }, "set": function set(e) { this._env = e, f.LoggerStateCenter.getInstance().ENV = e }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(ae.prototype, "roomid", { "get": function get() { return this.roomModulesList[0] ? this.roomModulesList[0].roomID : "" }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(ae.prototype, "serverTimeOffset", { "get": function get() { return this.roomModulesList[0] ? this.roomModulesList[0].messageHandler.serverTimeOffset : 0 }, "enumerable": !1, "configurable": !0 }), ae.prototype.getRequestId = function () { return this.idName + "-" + _() }, ae.prototype.actionListener = function (e) { for (var t, A = this, r = [], i = 1; i < arguments.length; i++)r[i - 1] = arguments[i];["getAnchorInfo", "HBResponse", "roomOnlineUserCountUpdate", "roomLoginResponse"].includes(e) || e.startsWith("_") || !this.listenerList[e] || ((t = this.reporter.createSpan(l.H, { "key": le.kZMListener.event }, { "key": "" }, le.kZegoListener.event)).setAttributes({ "listener": e, "listener_params": JSON.stringify(r) }), t.end()), ["roomStateChanged", "tokenWillExpire"].includes(e) && this.logger.info("zm.al ".concat(e, " ").concat(JSON.stringify(r))), this.listenerList[e] && this.listenerList[e].forEach(function (t) { try { t.apply(void 0, r) } catch (t) { A.logger.error(z.STATE_ACTION + " ", e, " ", JSON.stringify(t)) } }) }, ae.prototype.onListener = function (e, t) { return this.listenerList[e] ? "function" != typeof t ? (this.logger.error(z.ON_LISTENER + " listener callBack must be funciton"), !1) : (-1 == this.listenerList[e].indexOf(t) && this.listenerList[e].push(t), !0) : (this.logger.error(z.ON_LISTENER + " event " + e + " no found"), !1) }, ae.prototype.offListener = function (e, t) { return this.listenerList[e] ? "function" != typeof t ? (this.logger.error(z.OFF_LISTENER + " listener callBack must be funciton"), !1) : (-1 !== this.listenerList[e].indexOf(t) && (this.listenerList[e] = this.listenerList[e].filter(function (e) { return e !== t })), !0) : (this.logger.error(z.OFF_LISTENER + " event " + e + " no found"), !1) }, Object.defineProperty(ae.prototype, "sdKVersion", { "get": function get() { return this._sdkVersion }, "set": function set(e) { this._sdkVersion = e }, "enumerable": !1, "configurable": !0 }), ae.prototype.proxyRes = function (e, t, A) { return { "interResolve": function interResolve(A) { t(A), e.end() }, "interReject": function interReject(t, r) { var i; void 0 === r && (r = ""), (i = t.code < 2e9 && 1e9 < t.code ? V.decodeServerError(t.code, t.msg) : { "code": t.code, "message": t.msg }) && e.setAttributes({ "error": i.code, "message": i.message + r }), e.end(), A({ "errorCode": t.code }) } } }; var me = ae; function ae(e, t) { this.logger = e, this.dataReport = t, this._debug = !1, this.appConfigFetched = !1, this.requestList = {}, this.mode = T.MODE_ONLINE, this.connectState = "connected", this._testEnvironment = !1, this._env = 0, this.type = "PUBLIC", this.debugCustom = !1, this.configOK = !1, this.role = 2, this.relateService = [], this.maxMemberCount = 0, this.roomCreateFlag = 1, this.local_time_deviation = 0, this.callbackList = {}, this.listenerList = { "roomUserUpdate": [], "roomOnlineUserCountUpdate": [], "getAnchorInfo": [], "_getAnchorInfo": [], "IMRecvCustomCommand": [], "IMRecvBroadcastMessage": [], "recvReliableMessage": [], "roomExtraInfoUpdate": [], "IMRecvBarrageMessage": [], "recvJoinLiveRequest": [], "recvInviteJoinLiveRequest": [], "recvEndJoinLiveCommand": [], "roomLoginResponse": [], "_roomLogin": [], "_appConfigRsp": [], "_netAppConfigRsp": [], "_connectChanged": [], "HBResponse": [], "roomStateUpdate": [], "_roomStateUpdate": [], "_getTotalUserList": [], "_userStateUpdate": [], "_recvBigRoomMessage": [], "_recvRoomMsg": [], "_kickout": [], "tokenWillExpire": [], "_tokenExpired": [], "roomStateChanged": [], "hallStateUpdate": [], "_hallStateUpdate": [], "roomTokenWillExpire": [], "_tokenRenewed": [], "_protobufResponse": [], "_cloudSettingNotify": [], "_settingCanFetch": [] }, this.reportList = {}, this.reportSeqList = { "login": 0, "relogin": 0 }, this.networkState = h.online, this.roomRetryTime = 300, this.roomModulesList = [], this.isMultiRoom = !1, this.setMultiRoom = !1, this.protoFormat = "json", this.settingFetched = !1, this.useNetAgent = !0, this.netHasSet = !1, this.configRoomAuth = !1, this.configCheckToken = !1, this._sdkVersion = "unknown", this.mode = ce.modeNo } ue.prototype.init = function (e) { var t = this, A = e.body.hearbeat_interval < 3e3 ? 3e3 : e.body.hearbeat_interval; this.tryHeartbeatCount = 0, this.heartbeatTimer && clearTimeout(this.heartbeatTimer), this.loginHeartbeatTimer = setTimeout(function () { t.start(A) }, A), this.initCount++ }, ue.prototype.start = function (e) { var A, r = this, i = (this.logger.info(z.HEARTBEAT_START + " call"), this.stateCenter.reporter.createSpan(l.H, { "key": le.kZMLoginRoom.event, "par": this.room.roomID }, { "key": "" }, le.kZMRoomHB.event)); this.room.isLogin() ? 3 < ++this.tryHeartbeatCount ? (this.logger.error(z.HEARTBEAT_START + " come to try limit"), this.stateCenter.reporter.setError(i, le.kZMRoomHB.error.HB_TIMEOUT), this.hbLogout(G.HEARTBEAT_TIMEOUT), this.stateCenter.reporter.createSpan(l.H, { "key": le.kZMLoginRoom.event, "par": this.room.roomID }, { "key": "" }, le.kZMHbTimeout.event).end()) : ((this.stateCenter.useNetAgent ? this.liveRoomHandler : this.service).heartBeat(A = function t(e, A) { var o = e.body && e.body.err_code; e.header && e.body ? 0 !== o && (o = V.decodeServerError(e.body.err_code || e.body.code, e.body.err_message || e.body.message), i.setAttributes({ "error": o.code, "message": o.message + e.body.err_code })) : i.setAttributes({ "error": (0 < e.code ? e : G.ROOM_INNER_ERROR).code, "message": e.msg || G.ROOM_INNER_ERROR }), r.handleHeartbeatRsp(e, A), 0 === (null == (o = null == e ? void 0 : e.body) ? void 0 : o.err_code) && i.setAttributes({ "interval": le.kZMRoomHB.interval(null == (A = null == e ? void 0 : e.body) ? void 0 : A.hearbeat_interval), "stream_seq": le.kZMRoomHB.stream_seq(null == (o = null == e ? void 0 : e.body) ? void 0 : o.stream_seq), "server_user_seq": le.kZMRoomHB.server_user_seq(null == (A = null == e ? void 0 : e.body) ? void 0 : A.server_user_seq) }), i.end() }, A, this.room), this.heartbeatInterval = e, A = this.heartbeatInterval, 2 <= this.initCount ? (A = Math.round(Math.random() * (this.heartbeatInterval + 1)), this.initCount = 1) : A = this.heartbeatInterval, this.heartbeatTimer = setTimeout(function () { r.start(r.heartbeatInterval) }, A), this.logger.info(z.HEARTBEAT_START + " call success")) : (this.logger.error(z.HEARTBEAT_START + " state error"), this.stateCenter.reporter.setError(i, le.kZMRoomHB.error.NOT_LOGIN)) }, ue.prototype.handleHeartbeatRsp = function (e, t) { if (e.body && e.body.err_code && 0 !== e.body.err_code) return this.logger.error(z.HEARTBEAT_HEARTBEAT_RSP + " disconnect, server error=", e.body.err_code), 1000000152 == e.body.err_code ? void this.hbLogout(G.HEARTBEAT_TIMEOUT) : void this.hbLogout(V.getServerError(e.body.err_code)); e.header && e.body ? ((this.tryHeartbeatCount = 0) !== e.body.hearbeat_interval && (this.heartbeatInterval = e.body.hearbeat_interval, this.heartbeatInterval < 3e3 && (this.heartbeatInterval = 3e3)), this.heartbeatRspNotiFy(e, this.room.roomID), this.logger.info(z.HEARTBEAT_HEARTBEAT_RSP + " call success")) : (this.logger.error(z.HEARTBEAT_HEARTBEAT_RSP + " disconnect, error=", JSON.stringify(e) + ", seq = " + t), this.hbLogout(e)) }, ue.prototype.heartbeatRspNotiFy = function (e, t) { }, ue.prototype.hbLogout = function (e) { }, ue.prototype.resetHeartbeat = function () { clearTimeout(this.heartbeatTimer), this.heartbeatTimer = null, clearTimeout(this.loginHeartbeatTimer), this.loginHeartbeatTimer = null, this.tryHeartbeatCount = 0, this.initCount = 0, this.logger.info(z.HEARTBEAT_RESET + " call success") }; var Re = ue; function ue(e, t, A, r, i, o) { this.logger = e, this.stateCenter = t, this.dataReport = A, this.service = r, this.liveRoomHandler = i, this.room = o, this.tryHeartbeatCount = 0, this.heartbeatTimer = null, this.loginHeartbeatTimer = null, this.initCount = 0 } he.prototype.resetTokenTimer = function (e) { var t = this; this.logger.info(z.ROOM_RESETTOKEN_TIMER + "  call: " + (e = 2147483647 < (e = (e -= 3e4) < 0 ? 0 : e) ? 2147483647 : e)), this.tokenTimer && clearTimeout(this.tokenTimer), this.tokenTimer = setTimeout(function () { t.stateCenter.actionListener("tokenWillExpire", t.room.roomID), t.stateCenter.actionListener("roomTokenWillExpire", t.room.roomID) }, e) }, he.prototype.stopTokenTimer = function () { this.tokenTimer && clearTimeout(this.tokenTimer), this.tokenTimer = null }, he.prototype.setRunState = function (e) { this.room.runState !== e && (this.room.lastRunState = this.room.runState, this.room.runState = e) }, he.prototype.resetTryLogin = function () { this.tryLoginTimer && clearTimeout(this.tryLoginTimer), this.tryLoginTimer = null }, he.prototype.reportLogoutSpan = function (e) { var t, A = (this.stateCenter.isMultiRoom ? le.kZMQuitLiveroom : le.kZMSwitchLogout).event; A = this.stateCenter.reporter.createSpan(l.H, { "key": le.kZMLogoutRoom.event, "par": this.room.roomID }, { "key": "" }, A), e && this.stateCenter.useNetAgent && "0" === this.liveRoomHandler.roomServicer.zPushSid && (this.liveRoomHandler.roomServicer.zPushSid = null == (t = null == (t = null == (t = this.liveRoomHandler) ? void 0 : t.roomServicer) ? void 0 : t.switchSessionID) ? void 0 : t.toString()), e = this.stateCenter.useNetAgent ? e ? null == (e = null == (t = this.liveRoomHandler) ? void 0 : t.roomServicer) ? void 0 : e.zPushSid : null == (t = null == (e = null == (t = this.liveRoomHandler) ? void 0 : t.roomServicer) ? void 0 : e.switchSessionID) ? void 0 : t.toString() : void 0, A.setAttributes({ "room_id": le.kZMLogoutRoom.room_id(null == (t = this.room) ? void 0 : t.roomID), "room_sid_string": le.kZMLogoutRoom.room_sid_string(null == (t = this.room) ? void 0 : t.roomSessionID), "liveroom_sid_string": le.kZMQuitLiveroom.liveroom_sid_string(null == (t = this.room) ? void 0 : t.sessionID), "sdk_zpush_sessionid_string": le.kZMQuitLiveroom.sdk_zpush_sessionid_string(e) }), A.end() }, he.prototype.resetRoom = function (e) { var A, r = this; this.logger.info(z.ROOM_RESET_ROOM + " call"), 1 < this.stateCenter.roomModulesList.length && !e && (this.room.isMulti = !0), this.resetTryLogin(), "0" === this.room.sessionID || this.room.runState === g.logout || this.room.isDisConnect() || (this.stateCenter.useNetAgent ? this.liveRoomHandler : this.service).logout(this.room, A = function t(e) { r.handleLogoutRsp(e, !r.room.isMulti) }, A), this.reportLogoutSpan(e), this.setRunState(g.logout), this.room.sessionID = "0", this.room.roomSessionID = "0", this.room.isMulti || (this.stateCenter.userid = "", this.logger.setSessionInfo(this.stateCenter.appid, this.room.roomID, this.room.sessionID, this.stateCenter.idName, this.stateCenter.nickName, this.stateCenter.sdKVersion), this.stateCenter.useNetAgent ? null != (A = this.liveRoomHandler) && A.reset() : this.service.closeSocket()), this.resetRoomCallBack(), this.stateCenter.roomModulesList = this.stateCenter.roomModulesList.filter(function (e) { return e !== r.room }), (e = this.stateCenter.roomModulesList[0]) && (e.isMulti = !1, e.runState !== g.login && e.roomTryHandler && (e.roomTryHandler.startMaxTime(), e.roomTryHandler.active())), this.stateCenter.isMultiRoom && 0 === this.stateCenter.roomModulesList.length && (this.stateCenter.reporter.createSpan(l.H, { "key": le.kZMLogoutRoom.event, "par": this.room.roomID }, { "key": "" }, le.kZMMultiLogout.event).end(), this.liveRoomHandler.roomServicer.zPushSid = "0"), this.logger.info(z.ROOM_RESET_ROOM + " call success") }, he.prototype.resetRoomCallBack = function () { }, he.prototype.loginSuccessCallBack = function (e, t) { }, he.prototype.handlePushKickout = function (e, t, A) { var r, i, o = this; this.logger.info(z.ROOM_KICK_OUT + "  call " + JSON.stringify(e)), A || this.room.sessionID === e.header.session_id || this.room.sessionID === e.body.session_id ? (A = V.getKickoutError(e.body.reason || (null == (A = e.body) ? void 0 : A.kickout_reason), this.stateCenter.useNetAgent), (r = this.stateCenter.reporter.createSpan(l.H, { "key": le.kZMLoginRoom.event, "par": this.room.roomID }, { "key": "" }, le.kZMKickout.event)).setAttributes({ "error": null == (i = G[A.name || "ROOM_INNER_ERROR"]) ? void 0 : i.code, "message": A.message, "kickout_reason": le.kZMKickout.kickout_reason((null == (i = e.body) ? void 0 : i.reason) || (null == (i = e.body) ? void 0 : i.kickout_reason)), "need_relogin": le.kZMKickout.need_relogin(null == (i = null == e ? void 0 : e.body) ? void 0 : i.need_relogin) }), r.end(), (i = this.room.roomTryHandler) ? (i.onactive = function (e, t) { o.disconnectedHandle(t), o.stateCenter.actionListener("_kickout", t) }, e.body.need_relogin && 1 == e.body.need_relogin ? (this.room.sessionID = "0", i.startMaxTime(), i.active()) : (this.setRunState(g.logout), this.resetRoom(t), r = {}, e && e.body.custom_reason ? r.custom_kickout_message = e.body.custom_reason : A.name && G[A.name] && (i = e.body.reason || e.body.kickout_reason, r.custom_kickout_message = G[A.name].msg + "; kickout reason: " + i), A.name && G[A.name] ? this.disconnectedHandle(G[A.name], { "extendedData": JSON.stringify(r), "isKickout": !0 }) : this.disconnectedHandle(G.ROOM_INNER_ERROR, { "extendedData": JSON.stringify(r), "isKickout": !0 }), this.stateCenter.actionListener("_kickout", { "code": G.MANUAL_KICKOUT.code, "msg": G.MANUAL_KICKOUT.msg + e.body.reason || e.body.kickout_reason }))) : this.logger.info(z.ROOM_KICK_OUT + " try handler no found")) : this.logger.info(z.ROOM_KICK_OUT + " session id wrong, ignore") }, he.prototype.handleHbLogout = function (e) { var t = this, A = this.room.roomTryHandler; A && (A.onactive = function (e, A) { t.disconnectedHandle(A) }, [G.HEARTBEAT_TIMEOUT, G.SOCKET_CLOSE].includes(e) || [105, 152, 2001].includes(null == e ? void 0 : e.code) || e.msg.endsWith("1000002001") || e.msg.endsWith("1000000152") || e.msg.endsWith("1000000105") ? (A.startMaxTime(), A.active()) : [G.TIMEOUT].includes(e) ? this.logger.warn(z.ROOM_HANDLE_Hb_LOGOUT + " timeout") : (this.logger.warn(z.ROOM_HANDLE_Hb_LOGOUT + " unexpected error: ".concat(JSON.stringify(e))), A.stopMaxTime(), A.invalid(), this.resetRoom(), this.disconnectedHandle(e))) }, he.prototype.onDisconnect = function (e) { var t = this; this.logger.error(z.ROOM_DISCONNECT + " " + e.msg), "string" == typeof e.code && "Error.Network" === e.code || "number" == typeof e.code && (e.code < 2e9 && 1e9 < e.code || e.code < 1e6 ? V.decodeServerError(e.code, e.msg) : (e.code, e.msg)), V.unregisterCallback(le.kZMReLoginRoom.event, this.stateCenter.reportList), (e = this.room.roomTryHandler) ? (e.onactive = function (e, A) { A && 0 !== A.code ? t.roomStateHandle("DISCONNECTED", O.ReconnectFailed, A) : t.roomStateHandle("CONNECTED", O.Reconnected, A) }, e.startMaxTime(), e.active()) : this.logger.error(z.ROOM_DISCONNECT + " try handler no found") }, he.prototype.onConnecting = function (e) { this.roomStateHandle("CONNECTING", O.Logining, e) }, he.prototype.disconnectedHandle = function (e, t) { var A; e && 0 !== e.code ? (this.stopTokenTimer(), A = null != t && t.isKickout ? O.Kickout : O.ReconnectFailed, this.roomStateHandle("DISCONNECTED", A, e, (null == t ? void 0 : t.extendedData) || e.msg)) : this.roomStateHandle("CONNECTED", O.Reconnected, e, null == t ? void 0 : t.extendedData) }, he.prototype.roomStateHandle = function (e, t, A, r, i) { if (!t || t != O.Reconnecting || (this.reconectTimes++, 1 != this.reconectTimes)) { this.logger.info(z.ROOM_STATUS_CALLBACK + " " + e + " " + JSON.stringify(A)), ["CONNECTED", "DISCONNECTED"].includes(e) && (this.reconectTimes = 0); var o, n, s = 0; switch (t = (t = (t = t && [O.LoginFailed, O.ReconnectFailed].includes(t) ? null != (n = this.room.roomTryHandler) && n.loginRoomCallback.fail ? O.LoginFailed : O.ReconnectFailed : t) && [O.Logined, O.Reconnected].includes(t) ? null != (n = this.room.roomTryHandler) && n.loginRoomCallback.success ? O.Logined : O.Reconnected : t) && [O.Logining, O.Reconnecting].includes(t) ? null != (n = this.room.roomTryHandler) && n.loginRoomCallback.success ? O.Logining : O.Reconnecting : t) { case O.Reconnecting: o = le.kZMTempBroken, this.tempBrokenTime = (new Date).getTime(); break; case O.ReconnectFailed: o = le.kZMSdkDisconnect; break; case O.Reconnected: o = le.kZMReconnect, s = (new Date).getTime() - this.tempBrokenTime }this.room.lastRoomState = this.room.roomState, this.room.roomState = e, this.room.roomState !== this.room.lastRoomState && (this.stateCenter.actionListener("_roomStateUpdate", this.room.roomID, e, A ? A.code : 0, r, i), i || (this.stateCenter.actionListener("roomStateUpdate", this.room.roomID, e, A ? A.code : 0, r), this.stateCenter.actionListener("roomStateChanged", this.room.roomID, t, A ? A.code : 0, r)), o && (n = this.stateCenter.reporter.createSpan(l.H, { "key": le.kZMLoginRoom.event, "par": this.room.roomID }, { "key": "" }, o.event), t === O.Reconnected ? n.setAttributes({ "room_broken_time": le.kZMReconnect.room_broken_time(s) }) : n.setAttributes({ "error": (null == A ? void 0 : A.code) || 0, "message": r || "" }), n.end())) } }, he.prototype.login = function (e, t, A, r, i, o, n) { this.logger.info(z.ROOM_LOGIN_ROOM + " call:" + t + " " + A), this.room.isMulti || this.logger.setSessionInfo(this.stateCenter.appid, t, "", r.userID, "", this.stateCenter.sdKVersion), i && (i.userUpdate && "boolean" == typeof i.userUpdate && (this.stateCenter.userStateUpdate = i.userUpdate), i.maxMemberCount && "number" == typeof i.maxMemberCount && (this.room.maxMemberCount = i.maxMemberCount)), this.stateCenter.configOK ? (this.room.runState !== g.trylogin && this.setRunState(g.trylogin), this.room.roomID = t, this.room.token = A, this.room.thirdToken = A, this.stateCenter.idName = r.userID, this.stateCenter.nickName = r.userName || r.userID, this.loginCallback.success = o, this.loginCallback.fail = n, this.server = e, this.stateCenter.reporter.spanSetAttributes({ "key": le.kZMSubLogin.event, "bak_key": le.kZMReLoginRoom.event, "par": t }, { "server": this.stateCenter.useNetAgent ? void 0 : le.kZMSubLogin.server(this.server) }), this.liveRoomLoginKey = this.room.isMulti ? le.kZMLiveRoomEnter : le.kZMSwitchLogin, this.stateCenter.reporter.createSpan(l.H, { "key": le.kZMSubLogin.event, "bak_key": le.kZMReLoginRoom.event, "par": this.room.roomID }, { "key": this.liveRoomLoginKey.event, "par": this.room.roomID }, this.liveRoomLoginKey.event, !0), this.resetTryLogin(), this.onConnecting({ "code": 0, "msg": "" }), this.tryLogin(e), this.logger.info(z.ROOM_LOGIN_ROOM + " call success")) : (this.logger.error(z.ROOM_LOGIN_ROOM + " init sdk wrong"), n(G.INIT)) }, he.prototype.tryLogin = function (e) { var t, A = this; if (this.room.runState !== g.trylogin) this.logger.error("zb.rh.tl state error"); else { if ((0 !== this.stateCenter.reportSeqList.login ? le.kZMLoginRoom : le.kZMReLoginRoom).event, this.stateCenter.useNetAgent) return this.room.isMulti && this.room.isDisConnect() ? void this.logger.warn(z.ROOM_TRY_LOGIN + " liveroom is not connected") : (i = function o(e, t) { A.handleLoginRsp(e, t) }, void (null != (t = this.liveRoomHandler) && t.isUaConnect() ? (this.stateCenter.reporter.spanSetAttributes({ "key": this.liveRoomLoginKey.event, "par": null == (t = this.room) ? void 0 : t.roomID }, { "sdk_zpush_sessionid_string": null == (t = null == (t = null == (t = this.liveRoomHandler) ? void 0 : t.roomServicer) ? void 0 : t.switchSessionID) ? void 0 : t.toString() }), this.liveRoomHandler.login(this.room, i, i)) : (this.tryLoginTimer = setTimeout(function () { A.logger.info(z.ROOM_TRY_LOGIN + " over time no response, login timeout"), A.loginCallback.fail && A.loginCallback.fail(le.kZMLoginRoom.error.LOGIN_TIMEOUT) }, this.tryLoginInterval), this.logger.warn(z.ROOM_TRY_LOGIN + " ua is not connected")))); if (this.service.isDisConnect()) try { if (this.service.closeSocket(), this.logger.debug(z.ROOM_TRY_LOGIN + " new websocket"), !this.stateCenter.useNetAgent && !V.isRightServerForAppid(e, this.stateCenter.appid)) throw this.logger.error("".concat(z.ROOM_TRY_LOGIN, " the server does not match the appID")), new Error("The server does not match the appID"); this.service.createSocket(e); var r = Date.now(); this.service.openHandler(function () { var e; A.stateCenter.reporter.spanSetAttributes({ "key": A.liveRoomLoginKey.event, "par": null == (e = A.room) ? void 0 : e.roomID }, { "connect_consume": Date.now() - r }), A.openHandler() }), this.service.closeHandler(function (e) { A.logger.error(z.ROOM_TRY_LOGIN + " close " + JSON.stringify(e.code || e)), A.service.closeSocket(), A.closeHandler(e) }), this.service.errorHandler(function (e) { A.logger.error(z.ROOM_TRY_LOGIN + " error " + JSON.stringify(e.code || e)), A.service.closeSocket(), A.closeHandler(e) }) } catch (e) { this.logger.error(z.ROOM_TRY_LOGIN + "  websocket err:" + JSON.stringify(e)) } else { this.logger.info(z.ROOM_TRY_LOGIN + " use current websocket and sent login"); var i = function o(e, t) { A.handleLoginRsp(e, t) }; this.service.login(this.room, i, i) } this.tryLoginTimer = setTimeout(function () { A.logger.info(z.ROOM_TRY_LOGIN + " over time no response, login timeout"), A.loginCallback.fail && A.loginCallback.fail(le.kZMLoginRoom.error.LOGIN_TIMEOUT) }, this.tryLoginInterval), this.logger.info(z.ROOM_TRY_LOGIN + " call success") } }, he.prototype.openHandler = function () { function e(e, A) { t.handleLoginRsp(e, A) } var t = this; this.logger.info(z.ROOM_OPEN_HANDLER + " websocket.onpen call"), this.service.onPush(), this.service.login(this.room, e, e) }, he.prototype.handleLoginRsp = function (e, t) { this.logger.info(z.ROOM_HANDLE_LOGINRSP + " seq: " + t + " " + JSON.stringify(e)), (0 !== this.stateCenter.reportSeqList.login ? le.kZMLoginRoom : le.kZMReLoginRoom).event, this.room.runState !== g.trylogin ? this.logger.error(z.ROOM_HANDLE_LOGINRSP + " state error") : e.header && e.body ? e.header.seq !== t && 0 == this.room.isMulti ? this.logger.error(z.ROOM_HANDLE_LOGINRSP + " in wrong seq, local=", t + "", ",recv=", e.header.seq) : 0 !== e.body.err_code ? (this.logger.error(z.ROOM_HANDLE_LOGINRSP + " server error=", e.body.err_code), this.handleLoginFail(e)) : (this.logger.info(z.ROOM_HANDLE_LOGINRSP + " call success."), this.handleLoginSuccess(e)) : (this.logger.error(z.ROOM_HANDLE_LOGINRSP + " " + JSON.stringify(e)), this.handleLoginFail(e)) }, he.prototype.handleLoginFail = function (e) { this.resetTryLogin(); var t = le.kZMLoginRoom.error.INNER_ERROR; e.header && e.body ? t = V.getServerError(e.body.err_code) : e.code && e.msg && (t = e), this.stateCenter.reporter.spanEnd({ "key": this.liveRoomLoginKey.event, "par": this.room.roomID }, { "error": t.code, "message": t.msg }), this.loginCallback.fail && this.loginCallback.fail(t, !0) }, he.prototype.handleLoginSuccess = function (e) { this.room.roomSessionID !== e.body.room_session_id && (this.room.loginTime = Date.now()); var t, A, r = this.room.lastRunState, i = (this.setRunState(g.login), this.stateCenter.userid = e.body.user_id, this.room.sessionID = e.body.session_id, this.room.roomSessionID = e.body.room_session_id, (i = {})[this.room.roomID] = { "room_sid_string": this.room.roomSessionID }, this.stateCenter.reporter.setPublicPros(i), this.room.lvKey = e.body.lv_key, null == (i = null == e ? void 0 : e.body) ? void 0 : i.token_remain_time); this.stateCenter.configRoomAuth = 0 < i, e.body.ret_timestamp && ["03", "04"].includes(this.room.token.substring(0, 2)) && (A = (t = (new Date).getTime()) - e.body.ret_timestamp, this.stateCenter.local_time_deviation = A < 5e3 ? 0 : A, A = 0 < i ? 1e3 * i : 1e3 * V.decodeTokenExpire(this.room.token.substring(2)) - (t - this.stateCenter.local_time_deviation), this.resetTokenTimer(A)), this.room.isMulti || this.logger.setSessionInfo(this.stateCenter.appid, this.room.roomID, this.room.sessionID, this.stateCenter.idName, this.stateCenter.nickName, this.stateCenter.sdKVersion), this.stateCenter.useNetAgent || (e.body.config_info && (i = this.stateCenter.settingConfig.getSetting("remote_log_level", !0) || e.body.config_info.log_level, this.logger.setRemoteLogLevel(i), "" == e.body.config_info.log_url || this.logger.url || (this.logger.setLogServer(e.body.config_info.log_url), 0 === this.stateCenter.ENV && (this.stateCenter.logDomain = null == (t = this.logger.url) ? void 0 : t.split("/")[2], this.stateCenter.reporter.setConfig({ "serverUrl": "wss://" + this.stateCenter.logDomain + "/zglog/tlog" })), e.body.config_info.log_url)), e.body.cluster_env && 1 === e.body.cluster_env && (this.stateCenter.testEnvironment = !0, this.stateCenter.debugCustom || (this.stateCenter.debug = !0))), this.stateCenter.reporter.spanEnd({ "key": this.liveRoomLoginKey.event, "par": this.room.roomID }, { "server": this.stateCenter.useNetAgent ? void 0 : le.kZMSubLogin.server(this.server), "room_id": null == (A = this.room) ? void 0 : A.roomID, "room_sid_string": null == (i = this.room) ? void 0 : i.roomSessionID, "zpush_sessionid_string": this.stateCenter.useNetAgent && null != (A = null == (t = null == e ? void 0 : e.header) ? void 0 : t.session_id) ? A.toString() : void 0, "liveroom_sid_string": null == (i = null == e ? void 0 : e.body) ? void 0 : i.session_id }), this.resetTryLogin(), this.loginSuccessCallBack(r, e), this.roomStateHandle("CONNECTED", O.Logined, { "code": 0, "msg": "" }), this.loginCallback.success && this.loginCallback.success(!0) }, he.prototype.closeHandler = function (e) { this.logger.error(z.ROOM_CLOSEHANDLER + " room websocket close " + JSON.stringify(e.code || e)), this.room.runState !== g.logout ? this.room.runState === g.trylogin ? (this.resetTryLogin(), this.loginCallback.fail && this.loginCallback.fail(1006 == e.code ? le.kZMLoginRoom.error.LOGIN_TIMEOUT : e)) : this.room.runState === g.login && (this.logger.info(z.ROOM_CLOSEHANDLER + " is called because of network broken"), this.resetTryLogin(), this.onDisconnect(le.kZMLoginRoom.error.NETWORK_BROKEN)) : this.logger.info(z.ROOM_CLOSEHANDLER + " onclose logout flow call websocket.close") }, he.prototype.logout = function (e, t) { this.logger.info(z.ROOM_LOGOUT + " call"), this.room.runState === g.logout ? this.logger.warn("zb.rh.lo at logout") : (this.resetRoom(e), this.roomStateHandle("DISCONNECTED", O.Logout, { "code": 0, "msg": "" }, void 0, t), this.stopTokenTimer(), this.logger.info(z.ROOM_LOGOUT + " call success")) }, he.prototype.handleLogoutRsp = function (e, t) { this.logger.info(z.ROOM_LOGOUT + " result=", e.body && e.body.err_code ? e.body.err_code : "-1"), this.stateCenter.useNetAgent && t && null != (e = this.liveRoomHandler) && e.closeRequest() }; var be = he; function he(e, t, A, r, i, o) { this.logger = e, this.stateCenter = t, this.dataReport = A, this.service = r, this.room = i, this.liveRoomHandler = o, this.tryLoginTimer = null, this.tryLoginCount = 0, this.tryLoginInterval = 1e4, this.tokenTimer = null, this.beforeExpire = 30, this.server = "", this.tempBrokenTime = 0, this.reconectTimes = 0, this.loginCallback = {} } var Te = function pe(e, t, A) { if (A || 2 === arguments.length) for (var r, i = 0, o = t.length; i < o; i++)!r && i in t || ((r = r || Array.prototype.slice.call(t, 0, i))[i] = t[i]); return e.concat(r || Array.prototype.slice.call(t)) }, ke = (_e.prototype.loginRsp = function (e, t) { this.anchor_info = e.body.anchor_info || this.anchor_info, this.userListInterval = e.body.userlist_interval || this.userListInterval, this.userListMergeInterval = e.body.userlist_merge_timeout || this.userListMergeInterval, e.body.anchor_info && (this.stateCenter.actionListener("getAnchorInfo", e.body.anchor_info.anchor_id_name, e.body.anchor_info.anchor_nick_name), this.stateCenter.actionListener("_getAnchorInfo", e.body.anchor_info.anchor_id_name, e.body.anchor_info.anchor_nick_name)), e.body.online_count && this.stateCenter.actionListener("roomOnlineUserCountUpdate", this.room.roomID, e.body.online_count), this.logger.info(z.USER_LOGIN_RSP + "  userStateUpdate " + this.stateCenter.userStateUpdate), this.stateCenter.userStateUpdate && this.fetchUserList(t) }, _e.prototype.patchUserList = function (e) { var t = this; e.body.server_user_seq !== this.userSeq && this.stateCenter.userStateUpdate && !this.userSeqMergeMap && (this.logger.info(z.USER_HB_PATCH + " call update user " + this.userSeq + " server " + e.body.server_user_seq), this.userSeqMergeMap || (this.userSeqMergeMap = {}), this.userSeqMergeTimer && clearTimeout(this.userSeqMergeTimer), this.userSeqMergeTimer = setTimeout(function () { t.handleMergeTimeout() }, this.userListMergeInterval)), this.minUserSeq = e.body.server_user_seq, null != e.body.online_count && 0 != e.body.online_count && this.stateCenter.actionListener("roomOnlineUserCountUpdate", this.room.roomID, e.body.online_count) }, _e.prototype.resetUserHandler = function () { this.userQuerying = !1, this.lastUserQueryTime = 0, this.userTempList = [], this.userSeq = 0, this.minUserSeq = 0, this.userList = void 0, this.userSeqMergeMap = {}, this.userSeqMergeTimer = void 0, this.userQueryTimer = void 0, this.userListInterval = 3e4, this.userListMergeInterval = 5e3, this.anchor_info = { "anchor_id": "", "anchor_id_name": "", "anchor_nick_name": "" } }, _e.prototype.fetchUserList = function (e) { this.userQuerying ? this.logger.warn(z.USER_FETCH_USER + " is already querying") : (this.userQuerying = !0, this.userTempList = [], this.fetchUserListWithPage(0, e || 0), this.logger.info(z.USER_FETCH_USER + " the first time call")) }, _e.prototype.fetchUserListWithPage = function (e, t) { function n(e) { A.handleFetchUserListRsp(e, t) } var A = this, r = { "user_index": e, "sort_type": 0 }, i = le.kZMGetCurrentUserList; this.stateCenter.reporter.createSpan(l.H, { "key": le.kZMLoginRoom.event, "par": this.room.roomID }, { "key": i.event, "par": this.room.roomID }, i.event, !0).setAttribute("user_index", i.user_index(e)), (this.stateCenter.useNetAgent ? this.liveRoomHandler : this.service).fetchUserList(r, n, n, this.room) }, _e.prototype.handleFetchUserListRsp = function (e, t) { var A = this; if (this.stateCenter.reporter.spanEnd({ "key": le.kZMGetCurrentUserList.event, "par": this.room.roomID }, { "error": (null == (r = null == e ? void 0 : e.body) ? void 0 : r.err_code) || (null == e ? void 0 : e.code), "message": (null == (r = null == e ? void 0 : e.body) ? void 0 : r.err_message) || (null == e ? void 0 : e.msg) }), e.body && 0 != e.body.err_code) this.userQuerying = !1, this.lastUserQueryTime = Date.now() + this.userListInterval, this.logger.info(z.USER_FETCH_USER_RSP + " fetch error " + e.body.err_code); else if (e.header && e.body) { if (this.stateCenter.userStateUpdate) { this.userTempList = Te(Te([], this.userTempList, !0), e.body.user_baseinfos, !0); var r = e.body.ret_user_index; if (r != e.body.server_user_index) this.logger.info(z.USER_FETCH_USER_RSP + " fetch another page"), this.fetchUserListWithPage(r + 1, t); else { this.userSeq = e.body.server_user_seq; for (var i = [], o = [], n = 0; n < this.userTempList.length; n++) { var s = { "userID": this.userTempList[n].id_name, "userName": this.userTempList[n].nick_name, "role": this.userTempList[n].role }; 4 !== s.role && (i.push(s), o.push({ "idName": this.userTempList[n].id_name, "nickName": this.userTempList[n].nick_name, "role": this.userTempList[n].role })) } this.stateCenter.actionListener("_getTotalUserList", this.room.roomID, o), t == g.login ? (this.userList && V.mergeUserList(this.logger, this.userList, i, function (e, t) { 0 !== e.length && A.onUserStateUpdate(A.room.roomID, "ADD", e), 0 !== t.length && A.onUserStateUpdate(A.room.roomID, "DELETE", t) }), this.userList = i) : 0 !== (this.userList = i).length && this.onUserStateUpdate(this.room.roomID, "ADD", i), this.userQuerying = !1, this.lastUserQueryTime = Date.now() + this.userListInterval, this.userTempList = [], this.logger.info(z.USER_FETCH_USER_RSP + " call success user_list " + i + " count " + i.length) } } } else this.userQuerying = !1, this.lastUserQueryTime = Date.now() + this.userListInterval, this.logger.info(z.USER_FETCH_USER_RSP + " fetch error " + e) }, _e.prototype.handlePushUserStateUpdateMsg = function (e) { if (this.logger.info(z.USER_USER_PUSH + " call"), this.stateCenter.userStateUpdate) if (this.userSeq === e.body.user_list_seq) this.logger.warn(z.USER_USER_PUSH + " user_list_seq is the same with local seq"); else if (this.userSeq + e.body.user_actions.length !== e.body.user_list_seq) this.mergeUserByUserSeq(e.body.user_list_seq, e.body.user_actions); else { this.userSeq = e.body.user_list_seq; for (var t = [], A = 0; A < e.body.user_actions.length; A++) { var r = { "action": e.body.user_actions[A].Action, "idName": e.body.user_actions[A].IdName, "nickName": e.body.user_actions[A].NickName, "role": e.body.user_actions[A].Role, "loginTime": e.body.user_actions[A].LoginTime }; 4 !== r.role && t.push(r) } this.stateCenter.actionListener("_userStateUpdate", e.body.room_id, t); var i = [], o = []; t.forEach(function (e) { 1 == e.action ? i.push({ "userID": e.idName, "userName": e.nickName, "role": e.role }) : 2 == e.action && o.push({ "userID": e.idName, "userName": e.nickName, "role": e.role }) }), this.userList && (this.userList = this.userList.concat(i).filter(function (e) { return !o.some(function (t) { return t.userID == e.userID }) })), 0 !== i.length && this.onUserStateUpdate(e.body.room_id || e.body.room_pushheader.room_id, "ADD", i), 0 !== o.length && this.onUserStateUpdate(e.body.room_id || e.body.room_pushheader.room_id, "DELETE", o), this.logger.info(z.USER_USER_PUSH + " call success") } else this.logger.info(z.USER_USER_PUSH + " userStateUpdate is false") }, _e.prototype.onUserStateUpdate = function (e, t, A) { var r = this; 0 != (A = A.filter(function (e) { return e.userID !== r.stateCenter.idName })).length && (A = A.map(function (e) { return { "userID": e.userID, "userName": e.userName } }), this.stateCenter.actionListener("roomUserUpdate", e, t, A)) }, _e.prototype.mergeUserByUserSeq = function (e, t) { var A = this; this.userSeqMergeMap || (this.logger.warn(z.USER_MERGE_SEQ + " new merge userlist " + this.userSeq + " server " + e), this.userSeqMergeMap = {}, this.userSeqMergeTimer && clearTimeout(this.userSeqMergeTimer), this.userSeqMergeTimer = setTimeout(function () { A.handleMergeTimeout() }, this.userListMergeInterval)), this.userSeqMergeMap[e] = t, this.logger.warn(z.USER_MERGE_SEQ + "  merge userlist " + this.userSeq + " server " + e + " userlist " + t.length) }, _e.prototype.mergeUser = function (e) { var t = this, A = (this.logger.info(z.USER_MERGE + " merge userlist " + this.userSeq + " userSeqList " + e.join(",")), this.userSeq = e[e.length - 1], this.lastUserQueryTime = Date.now() + this.userListInterval, {}), r = ((e.forEach(function (e) { t.userSeqMergeMap && t.userSeqMergeMap[e].forEach(function (e) { A[e.IdName] = e }) }), this.userSeqMergeMap = null, e = Object.values(A).map(function (e) { return { "action": e.Action, "idName": e.IdName, "nickName": e.NickName, "role": e.Role, "loginTime": e.LoginTime ? String(e.LoginTime) : "" } })).sort(function (e, t) { return e.loginTime.localeCompare(t.loginTime) }), []), i = []; e.forEach(function (e) { 1 == e.action ? r.push({ "userID": e.idName, "userName": e.nickName, "role": e.role }) : 2 == e.action && i.push({ "userID": e.idName, "userName": e.nickName, "role": e.role }) }), this.userList = this.userList && this.userList.concat(r).filter(function (e) { return !i.some(function (t) { return t.userID == e.userID }) }), 0 !== r.length && this.onUserStateUpdate(this.room.roomID, "ADD", r), 0 !== i.length && this.onUserStateUpdate(this.room.roomID, "DELETE", i), this.stateCenter.actionListener("_userStateUpdate", this.room.roomID, e) }, _e.prototype.handleMergeTimeout = function () { var e, t = this, A = Object.keys(this.userSeqMergeMap).map(function (e) { return +e }).sort(function (e, t) { return e - t }); A[A.length - 1] - A[0] + 1 === A.length || A[A.length - 1] >= this.minUserSeq ? this.mergeUser(A) : (this.userSeqMergeMap = null, e = this.lastUserQueryTime - Date.now(), this.logger.info(z.USER_MERGE_TIMEOUT + "  fetch merge userlist " + this.userSeq + " userSeqList " + A.join(",") + " wait " + e), 0 < e ? (this.userQueryTimer && clearTimeout(this.userQueryTimer), this.userQueryTimer = setTimeout(function () { t.fetchUserList() }, e)) : this.fetchUserList()) }, _e.prototype.loginPrivateRsp = function (e) { this.logger.info(z.USER_FETCH_USER, " userStateUpdate " + this.stateCenter.userStateUpdate), this.stateCenter.userStateUpdate && this.fetchUserList() }, _e); function _e(e, t, A, r, i, o) { this.logger = e, this.stateCenter = t, this.dataReport = A, this.service = r, this.liveRoomHandler = i, this.room = o, this.userQuerying = !1, this.userTempList = [], this.userSeq = 0, this.minUserSeq = 0, this.userList = [], this.userSeqMergeMap = null, this.userListInterval = 3e4, this.userListMergeInterval = 5e3, this.anchor_info = { "anchor_id": "", "anchor_id_name": "", "anchor_nick_name": "" } } ge.prototype.initMessageHandler = function () { }, ge.prototype.initLiveHandler = function () { }, ge.prototype.init = function () { this.bindHeatBeatHandler(), this.bindRoomHandler(), this.bindMessageHandler(), this.bindLiveHandler() }, ge.prototype.bindHeatBeatHandler = function () { var e = this; this.heartBeatHandler.hbLogout = function (t) { e.roomHandler.handleHbLogout(t) }, this.heartBeatHandler.heartbeatRspNotiFy = function (t, A) { e.messageHandler && e.messageHandler.loginRsp(t), e.userHandler.patchUserList(t), e.HBResponse(t, A) } }, ge.prototype.bindRoomHandler = function () { var e = this; this.roomHandler.loginSuccessCallBack = function (t, A) { e.logger.info(z.LIVEROOMMODULES_BINDROOMHANDLER + " login suc " + t), e.heartBeatHandler.init(A), (e.stateCenter.useNetAgent ? e.liveRoomHandler : (e.service.stopCheck(), e.service)).startCheck(), e.userHandler.loginRsp(A, t), e.messageHandler && e.messageHandler.loginRsp(A), e.isMulti || e.handleMultiRoom(), e.roomLoginResponse(A) }, this.roomHandler.resetRoomCallBack = function () { e.heartBeatHandler.resetHeartbeat(), e.liveHandler && e.liveHandler.resetLiveHandler(), e.messageHandler && e.messageHandler.resetMessageInfo(), e.stateCenter.useNetAgent && e.liveRoomHandler && e.liveRoomHandler.stopCheck(), e.userHandler.resetUserHandler(), e.service.stopCheck(), e.roomTryHandler && (e.roomTryHandler.invalid(), e.roomTryHandler.stopMaxTime()) } }, ge.prototype.bindUserHandler = function () { }, ge.prototype.bindMessageHandler = function () { }, ge.prototype.bindLiveHandler = function () { }, ge.prototype.HBResponse = function (e, t) { this.stateCenter.actionListener("HBResponse", e, t) }, ge.prototype.roomLoginResponse = function (e) { this.stateCenter.actionListener("roomLoginResponse", e) }, ge.prototype.handleMultiRoom = function () { var e = this; this.stateCenter.roomModulesList.forEach(function (t) { t.runState !== g.login && t.roomTryHandler && 1 == t.isMulti && (t.roomTryHandler.onactive = function (A, r) { var i; r && 0 !== r.code ? (0 !== r.code && (i = V.getLiveRoomError(r.code, e.stateCenter.useNetAgent)) && G[i] && (r = G[i]), t.roomHandler.roomStateHandle("DISCONNECTED", O.ReconnectFailed, r, r.msg)) : t.roomHandler.roomStateHandle("CONNECTED", O.Reconnected, r) }, t.roomTryHandler.startMaxTime(), t.roomTryHandler.active()) }) }, ge.prototype.isLogin = function () { return this.runState === g.login }, ge.prototype.isLogout = function () { return this.runState === g.logout }, ge.prototype.isTryLogin = function () { return this.runState === g.trylogin }, ge.prototype.isDisConnect = function () { return (this.stateCenter.useNetAgent ? this.liveRoomHandler : this.service).isDisConnect() }, ge.prototype.retryConnect = function () { this.logger.info("zm.lrm.rc call"), this.stateCenter.useNetAgent && (this.resetSessionInfo(), this.liveRoomHandler.closeRequest()) }, ge.prototype.retryRoom = function () { this.logger.info("zm.lrm.rr.0 call"), this.roomTryHandler && this.rtm.netAgent.isConnect() && (this.sessionID = "0", this.roomSessionID = "0", this.roomTryHandler.active(!0)) }, ge.prototype.resetSessionInfo = function () { var e; this.logger.info("zm.lrm.rsi call"), this.sessionID = "0", this.roomSessionID = "0", null != (e = this.liveRoomHandler) && e.reset() }; var we = ge; function ge(e, t, A, r, i, o, n) { this.roomID = e, this.stateCenter = t, this.logger = A, this.dataReport = r, this.service = i, this.rtm = o, this.liveRoomHandler = n, this.runState = g.logout, this.lastRunState = g.logout, this.lastRoomState = "DISCONNECTED", this.roomState = "DISCONNECTED", this.roomSessionID = "0", this.sessionID = "0", this.isMulti = !1, this.token = "", this.thirdToken = "", this.loginTime = 0, this.maxMemberCount = 0, this.lvKey = "", this.roomName = "", this.roomHandler = new be(this.logger, this.stateCenter, this.dataReport, this.service, this, n), this.heartBeatHandler = new Re(this.logger, this.stateCenter, this.dataReport, this.service, this.liveRoomHandler, this), this.userHandler = new ke(this.logger, this.stateCenter, this.dataReport, this.service, this.liveRoomHandler, this), this.initMessageHandler(), this.initLiveHandler(), this.init() } ye.prototype.createSocket = function (e) { this.socket = Object(f.createZegoWebSocket)(e, this.ENV % 2) }, ye.prototype.closeSocket = function () { this.socket && (this.socket.onclose = null, this.socket.onerror = null, this.socket.close(), this.socket = null) }, ye.prototype.isDisConnect = function () { return !this.socket || 1 !== this.socket.readyState }, ye.prototype.sendMessage = function (e, t, A, r, i) { return void 0 === A && (A = null), void 0 === r && (r = null), void 0 === i && (i = { "timeOut": 6e3 }), i = { "data": t = { "header": e, "body": t }, "seq": e.seq, "deleted": !1, "sendTime": Date.parse(new Date + ""), "timeOut": i.timeOut, "success": A, "error": r }, A = this.sendCommandList.push(i), this.sendCommandMap[i.seq] = A, this.socket && this.socket.send(JSON.stringify(t)), e.seq }, ye.prototype.sendPB = function (e) { return this.socket && this.socket.send(e), !0 }, ye.prototype.checkSendMessageList = function (e) { for (var t = e.getFirst(); null != t;)!function () { var A, r, i; e.remove(t), t && t._data && (A = t._data.error, r = t._data.seq, i = t._data.data.body.custom_msg, setTimeout(function () { A && A(G.TIMEOUT, r, i) }, 0)), t = e.getFirst() }() }, ye.prototype.checkMessageListTimeout = function (e, t) { for (var A = e.getFirst(), r = Date.parse(new Date + ""), i = 0, o = this; null != A && "break" !== function () { var n, s, a; return A._data && A._data.sendTime + A._data.timeOut > r || (A._data && delete t[A._data.data.header.seq], e.remove(A), A._data && null == A._data.error || A._data && A._data.sendTime + o.sendDataDropTimeout < r || A && A._data && (n = A._data.error, s = A._data.seq, a = A._data.data.body.custom_msg, setTimeout(function () { n && n(G.TIMEOUT, s, a) }, 0)), ++i >= o.sendDataCheckOnceCount) ? "break" : void (A = e.getFirst()) }();); }, ye.prototype.startCheck = function () { var e = this; this.checkMessageListTimeout(this.sendCommandList, this.sendCommandMap), this.sendDataCheckTimer = setTimeout(function () { e.startCheck() }, this.sendDataCheckInterval) }, ye.prototype.stopCheck = function () { this.checkSendMessageList(this.sendCommandList), this.sendCommandMap = {}, clearTimeout(this.sendDataCheckTimer) }, ye.prototype.openHandler = function (e) { var t = this; this.socket && (this.socket.onopen = function (A) { t.socket.binaryType = "arraybuffer", t.responseHandler(), e(A) }) }, ye.prototype.responseHandler = function () { var e = this; this.socket && (this.socket.onmessage = function (t) { t = "string" == typeof t.data ? JSON.parse(t.data) : t.data, e.onMessage(t) }) }, ye.prototype.closeHandler = function (e) { this.socket && (this.socket.onclose = function (t) { e(t) }) }, ye.prototype.errorHandler = function (e) { this.socket && (this.socket.onerror = e) }, ye.prototype.onMessage = function (e) { }; var Ne = ye; function ye(e) { this.socket = null, this.sendCommandList = new S, this.sendCommandMap = {}, this.sendDataCheckOnceCount = 100, this.sendDataDropTimeout = 1e4, this.sendDataCheckInterval = 2e3, this.ENV = e } var Le = function ve() { return (Le = Object.assign || function (e) { for (var t, A = 1, r = arguments.length; A < r; A++)for (var i in t = arguments[A]) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]); return e }).apply(this, arguments) }, Oe = (Ee.prototype.checkResponse = function (e) { return 0 != this.stateCenter.roomModulesList.filter(function (e) { return e.runState !== g.logout }).length && (e.header.appid !== this.stateCenter.appid || e.header.user_id !== this.stateCenter.userid) }, Ee.prototype.handleSendCommandMsgRsp = function (e) { var t, A = this, r = this.service.sendCommandMap[e.header.seq]; null != r && (t = r._data, delete this.service.sendCommandMap[e.header.seq], this.service.sendCommandList.remove(r), 0 === e.body.err_code ? setTimeout(function () { t && null != t.success && t.success(e, A.cmdSeq) }, 0) : setTimeout(function () { t && null != t.error && t.error(e, A.cmdSeq) }, 0)) }, Ee.prototype.onPush = function () { var e = this; this.service.onMessage = function (t) { t instanceof ArrayBuffer ? e.stateCenter.actionListener("_protobufResponse", t) : t.header ? (0 !== t.body.err_code ? t.body.err_message && e.logger.error("".concat(z.SERVICE_PUSH, " cmd=").concat(t.header.cmd, ", err_code=").concat(t.body.err_code, ", err_message=").concat(t.body.err_message, " ")) : e.logger.info("".concat(z.SERVICE_PUSH, " cmd=").concat(t.header.cmd, ", msg=").concat(JSON.stringify(t), " ")), -1 < ["login", "logout"].indexOf(t.header.cmd) ? e.handleSendCommandMsgRsp(t) : e.checkResponse(t) ? e.logger.error(z.SERVICE_PUSH + "  check session fail.") : (e.logger.info("".concat(z.SERVICE_PUSH, " cmd=").concat(t.header.cmd, ",function=").concat(!!e.responseRouters[t.header.cmd])), e.handleSendCommandMsgRsp(t), e.responseRouters[t.header.cmd] && e.responseRouters[t.header.cmd](t, e.cmdSeq))) : e.logger.error("".concat(z.SERVICE_PUSH, " msg type error ")) } }, Ee.prototype.handlePushKickout = function (e) { var t, A; void 0 === (null == (A = null == e ? void 0 : e.body) ? void 0 : A.protocol) || 1 === (null == (A = null == e ? void 0 : e.body) ? void 0 : A.protocol) ? function (e, t, A) { if (A || 2 === arguments.length) for (var r, i = 0, o = t.length; i < o; i++)!r && i in t || ((r = r || Array.prototype.slice.call(t, 0, i))[i] = t[i]); return e.concat(r || Array.prototype.slice.call(t)) }([], this.stateCenter.roomModulesList, !0).forEach(function (t) { return t.roomHandler.handlePushKickout(e, !0) }) : (t = null == (A = null == e ? void 0 : e.header) ? void 0 : A.room_id, (A = this.stateCenter.roomModulesList.find(function (e) { return e.roomID == t })) ? A.roomHandler.handlePushKickout(e) : this.logger.error(z.SERVICE_PUSH + " room no found ignore " + JSON.stringify(null == (A = e.header) ? void 0 : A.room_id))) }, Ee.prototype.handlePushCustomMsg = function (e) { }, Ee.prototype.handlePushRoomMsg = function (e) { }, Ee.prototype.handlePushUserStateUpdateMsg = function (e) { var t, A = null == (r = null == e ? void 0 : e.header) ? void 0 : r.room_id, r = this.stateCenter.roomModulesList.find(function (e) { return e.roomID == A }), i = this.stateCenter.reporter.createSpan(l.H, { "key": le.kZMLoginRoom.event, "par": A }, { "key": "" }, le.kZMRoomRecvUserUpdateInfo.event); r ? (i.setAttributes({ "user_list_seq": null == (t = null == e ? void 0 : e.body) ? void 0 : t.user_list_seq, "update_user": null == (t = null == e ? void 0 : e.body) ? void 0 : t.user_actions }), i.end(), r.userHandler.handlePushUserStateUpdateMsg(e)) : (this.logger.error(z.SERVICE_PUSH + " room no found ignore " + JSON.stringify(e)), this.stateCenter.reporter.setError(i, le.kZMRoomRecvUserUpdateInfo.error.ROOM_NOT_EXIST)) }, Ee.prototype.handlePushMergeMsg = function (e) { }, Ee.prototype.handlePushTransMsg = function (e) { }, Ee.prototype.handleBigImMsgRsp = function (e) { }, Ee.prototype.handlePushSignalMsg = function (e) { }, Ee.prototype.handlePushTokenExpire = function (e) { this.stateCenter.actionListener("_tokenExpired", e) }, Ee.prototype.closeHandler = function (e) { this.service.closeHandler(e) }, Ee.prototype.openHandler = function (e) { this.service.openHandler(e) }, Ee.prototype.errorHandler = function (e) { this.service.errorHandler(e) }, Ee.prototype.getHeader = function (e, t, A, r) { return { "Protocol": "req", "cmd": e, "appid": this.stateCenter.appid, "seq": ++this.cmdSeq, "user_id": this.stateCenter.userid, "session_id": t || "", "room_id": A || "", "room_session_id": r || "", "biz_version": this.stateCenter.bizVersion || "" } }, Ee.prototype.startCheck = function () { this.logger.info(z.SERVICE_START_CHECK + " start"), this.service.startCheck() }, Ee.prototype.stopCheck = function () { this.logger.info(z.SERVICE_STOP_CHECK + " stop"), this.service.stopCheck() }, Ee.prototype.isDisConnect = function () { return !this.service || this.service.isDisConnect() }, Ee.prototype.createSocket = function (e) { var t = this; this.stateCenter.roomServer = e, this.service.createSocket(e), this.responseRouters = Le(Le({}, this.responseRouters), { "push_kickout": function push_kickout(e) { t.handlePushKickout(e) }, "push_custommsg": function push_custommsg(e) { t.handlePushCustomMsg(e) }, "push_im_chat": function push_im_chat(e) { t.handlePushRoomMsg(e) }, "push_userlist_update": function push_userlist_update(e) { t.handlePushUserStateUpdateMsg(e) }, "push_merge_message": function push_merge_message(e) { t.handlePushMergeMsg(e) }, "push_trans": function push_trans(e) { t.handlePushTransMsg(e) }, "push_signal": function push_signal(e) { t.handlePushSignalMsg(e) }, "push_token_expire": function push_token_expire(e) { t.handlePushTokenExpire(e) } }) }, Ee.prototype.closeSocket = function () { this.service.closeSocket() }, Ee.prototype.sendMessage = function (e, t, A, r, i, o) { var n, s; return this.service.isDisConnect() ? (this.logger.error(z.SERVICE_SEND + " socket is disconnect"), r(G.SOCKET_CLOSE), 0) : (n = null != o && o.roomID ? o.roomID : null == (n = this.stateCenter.roomModulesList[0]) ? void 0 : n.roomID, s = null != o && o.roomSessionID ? o.roomSessionID : null == (s = this.stateCenter.roomModulesList[0]) ? void 0 : s.roomSessionID, o = null != o && o.sessionID ? o.sessionID : null == (o = this.stateCenter.roomModulesList[0]) ? void 0 : o.sessionID, i = i || this.getHeader(e, o, n, s), this.logger.info(z.SERVICE_SEND + " sendMsg:" + JSON.stringify({ "header": i, "body": t })), this.service.sendMessage(i, t, A, r)) }, Ee.prototype.on = function (e, t) { this.responseRouters[e] = t }, Ee.prototype.login = function (e, t, A) { var r = this.getHeader(e.isMulti ? "enter" : "login", e.sessionID, e.roomID, e.roomSessionID); return e = { "id_name": this.stateCenter.idName, "nick_name": this.stateCenter.nickName, "role": this.stateCenter.role, "token": e.token, "version": this.stateCenter.sdKVersion, "room_name": e.roomID, "user_state_flag": this.stateCenter.userStateUpdate ? 1 : 0, "room_create_flag": this.stateCenter.roomCreateFlag, "client_type": 0 === this.stateCenter.ENV ? I.ClientType_Webrtc : I.ClientType_SmallProgram, "third_token": e.thirdToken, "user_count_limit": e.maxMemberCount, "relate_service": this.stateCenter.relateService.join() || "", "login_logic": this.stateCenter.isMultiRoom ? 3 : 1, "proto_format": this.stateCenter.protoFormat }, this.sendMessage("", e, t, A, r) }, Ee.prototype.logout = function (e, t, A) { var r = e.isMulti ? "quit" : "logout", i = { "reserve": 0 }; return "logout" == r && (i.login_logic = this.stateCenter.isMultiRoom ? 3 : 1), this.sendMessage(r, i, t, A, void 0, { "sessionID": e.sessionID, "roomID": e.roomID, "roomSessionID": e.roomSessionID }) }, Ee.prototype.heartBeat = function (e, t, A) { return this.sendMessage("hb", { "reserve": 0 }, e, t, void 0, A) }, Ee.prototype.fetchUserList = function (e, t, A, r) { return this.sendMessage("user_list", e, t, A, void 0, r) }, Ee.prototype.fetchUserListV2 = function (e, t, A, r) { return this.sendMessage("user_list_v2", e, t, A, void 0, r) }, Ee.prototype.fetchReliableMessage = function (e, t, A, r) { return this.sendMessage("trans_fetch", e, t, A, void 0, r) }, Ee.prototype.sendReliableMessage = function (e, t, A, r) { return this.sendMessage("trans", e, t, A, void 0, r) }, Ee.prototype.sendRoomMsg = function (e, t, A, r) { return this.sendMessage("im_chat", e, t, A, void 0, r) }, Ee.prototype.sendCustomCommand = function (e, t, A, r) { return this.sendMessage("custommsg", e, t, A, void 0, r) }, Ee.prototype.sendBigRoomMessage = function (e, t, A, r) { return this.sendMessage("bigim_chat", e, t, A, void 0, r) }, Ee.prototype.sendRelayMessage = function (e, t, A, r) { return this.sendMessage("relay", e, t, A, void 0, r) }, Ee.prototype.sendSignalCmd = function (e, t, A, r) { return this.sendMessage("signal", e, t, A, void 0, r) }, Ee.prototype.sendPB = function (e) { return this.service.isDisConnect() || this.stateCenter.networkState == h.offline ? (this.logger.error(z.RTM_SEND_PB + " socket is disconnected"), !1) : this.service.sendPB(e) }, Ee); function Ee(e, t, A) { this.stateCenter = e, this.logger = t, this.rtm = A, this.service = new Ne(this.stateCenter.ENV), this.cmdSeq = 0, this.responseRouters = {} } Se.prototype.setSetting = function (e, t) { var A, r, i = Array.isArray(t) && 0 < t.length; for (A in e) if ("number" == typeof e[A].ctrlmode && [1, 2].includes(e[A].ctrlmode)) this.setting[A] = e[A], this.setting[A + "_ctrlmode"] = e[A].ctrlmode; else for (var o in e[A]) o.endsWith("_ctrlmode") || i && -1 == t.indexOf(o) || (1 === (r = e[A][o + "_ctrlmode"]) || 2 === r ? this.setting[o] = e[A][o] : this.defaultSetting[o] && (this.setting[o] = this.defaultSetting[o]), "number" == typeof r && (this.setting[o + "_ctrlmode"] = e[A][o + "_ctrlmode"])) }, Se.prototype.getSetting = function (e, t) { return (t = void 0 !== t && t) && 2 != this.setting[e + "_ctrlmode"] ? void 0 : this.setting[e] }; var Me = Se; function Se() { this.defaultSetting = { "remote_log_level": "info" }, this.requestList = {}, this.setting = JSON.parse(JSON.stringify(this.defaultSetting)) } var Pe = s(0), Ue = s.n(Pe), Fe = (r = s(7), s(8)), qe = s.n(Fe), Je = (Fe = s(10), s.n(Fe)), Ke = (Fe = s(15), s.n(Fe)), Ze = (Fe = s(4), s.n(Fe)), je = { "d": function d(e, t) { for (var A in t) je.o(t, A) && !je.o(e, A) && Object.defineProperty(e, A, { "enumerable": !0, "get": t[A] }) }, "o": function o(e, t) { return Object.prototype.hasOwnProperty.call(e, t) } }, ze = (function (e, n, g) { function r(e) { return "0123456789abcdefghijklmnopqrstuvwxyz".charAt(e) } function o(e, t) { return e & t } function i(e, t) { return e | t } function s(e, t) { return e ^ t } function a(e, t) { return e & ~t } g.d(n, { "default": function _default() { return ce } }); var u, d = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"; function l(e) { for (var t, A = "", r = 0; r + 3 <= e.length; r += 3)t = parseInt(e.substring(r, r + 3), 16), A += d.charAt(t >> 6) + d.charAt(63 & t); for (r + 1 == e.length ? (t = parseInt(e.substring(r, r + 1), 16), A += d.charAt(t << 2)) : r + 2 == e.length && (t = parseInt(e.substring(r, r + 2), 16), A += d.charAt(t >> 2) + d.charAt((3 & t) << 4)); 0 < (3 & A.length);)A += "="; return A } function h(e) { for (var t = "", A = 0, i = 0, o = 0; o < e.length && "=" != e.charAt(o); ++o) { var n = d.indexOf(e.charAt(o)); n < 0 || (A = 0 == A ? (t += r(n >> 2), i = 3 & n, 1) : 1 == A ? (t += r(i << 2 | n >> 4), i = 15 & n, 2) : 2 == A ? (t = (t += r(i)) + r(n >> 2), i = 3 & n, 3) : (t = (t += r(i << 2 | n >> 4)) + r(15 & n), 0)) } return 1 == A && (t += r(i << 2)), t } var C, E = { "decode": function decode(e) { if (void 0 === C) { var t = "= \f\n\r\t \u2028\u2029"; for (C = Object.create(null), o = 0; o < 64; ++o)C["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(o)] = o; for (C["-"] = 62, C._ = 63, o = 0; o < t.length; ++o)C[t.charAt(o)] = -1 } for (var A = [], r = 0, i = 0, o = 0; o < e.length; ++o) { var n = e.charAt(o); if ("=" == n) break; if (-1 != (n = C[n])) { if (void 0 === n) throw new Error("Illegal character at offset " + o); r |= n, 4 <= ++i ? (A[A.length] = r >> 16, A[A.length] = r >> 8 & 255, A[A.length] = 255 & r, i = r = 0) : r <<= 6 } } switch (i) { case 1: throw new Error("Base64 encoding incomplete: at least 2 bits missing"); case 2: A[A.length] = r >> 10; break; case 3: A[A.length] = r >> 16, A[A.length] = r >> 8 & 255 }return A }, "re": /-----BEGIN [^-]+-----([A-Za-z0-9+\/=\s]+)-----END [^-]+-----|begin-base64[^\n]+\n([A-Za-z0-9+\/=\s]+)====/, "unarmor": function unarmor(e) { var t = E.re.exec(e); if (t) if (t[1]) e = t[1]; else { if (!t[2]) throw new Error("RegExp out of sync"); e = t[2] } return E.decode(e) } }, p = (m.prototype.mulAdd = function (e, t) { for (var A, r = this.buf, i = r.length, o = 0; o < i; ++o)(A = r[o] * e + t) < 1e13 ? t = 0 : A -= 1e13 * (t = 0 | A / 1e13), r[o] = A; 0 < t && (r[o] = t) }, m.prototype.sub = function (e) { for (var t, A = this.buf, r = A.length, i = 0; i < r; ++i)e = (t = A[i] - e) < 0 ? (t += 1e13, 1) : 0, A[i] = t; for (; 0 === A[A.length - 1];)A.pop() }, m.prototype.toString = function (e) { if (10 != (e || 10)) throw new Error("only base 10 is supported"); for (var t = this.buf, A = t[t.length - 1].toString(), r = t.length - 2; 0 <= r; --r)A += (1e13 + t[r]).toString().substring(1); return A }, m.prototype.valueOf = function () { for (var e = this.buf, t = 0, A = e.length - 1; 0 <= A; --A)t = 1e13 * t + e[A]; return t }, m.prototype.simplify = function () { var e = this.buf; return 1 == e.length ? e[0] : this }, m), f = /^(\d\d)(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])([01]\d|2[0-3])(?:([0-5]\d)(?:([0-5]\d)(?:[.,](\d{1,3}))?)?)?(Z|[-+](?:[0]\d|1[0-2])([0-5]\d)?)?$/, B = /^(\d\d\d\d)(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])([01]\d|2[0-3])(?:([0-5]\d)(?:([0-5]\d)(?:[.,](\d{1,3}))?)?)?(Z|[-+](?:[0]\d|1[0-2])([0-5]\d)?)?$/; function m(e) { this.buf = [+e || 0] } function y(e, t) { return e.length > t ? e.substring(0, t) + "…" : e } H.prototype.get = function (e) { if ((e = void 0 === e ? this.pos++ : e) >= this.enc.length) throw new Error("Requesting byte offset " + e + " on a stream of length " + this.enc.length); return "string" == typeof this.enc ? this.enc.charCodeAt(e) : this.enc[e] }, H.prototype.hexByte = function (e) { return this.hexDigits.charAt(e >> 4 & 15) + this.hexDigits.charAt(15 & e) }, H.prototype.hexDump = function (e, t, A) { for (var r = "", i = e; i < t; ++i)if (r += this.hexByte(this.get(i)), !0 !== A) switch (15 & i) { case 7: r += "  "; break; case 15: r += "\n"; break; default: r += " " }return r }, H.prototype.isASCII = function (e, t) { for (var A = e; A < t; ++A) { var r = this.get(A); if (r < 32 || 176 < r) return !1 } return !0 }, H.prototype.parseStringISO = function (e, t) { for (var A = "", r = e; r < t; ++r)A += String.fromCharCode(this.get(r)); return A }, H.prototype.parseStringUTF = function (e, t) { for (var A = "", r = e; r < t;) { var i = this.get(r++); A += i < 128 ? String.fromCharCode(i) : 191 < i && i < 224 ? String.fromCharCode((31 & i) << 6 | 63 & this.get(r++)) : String.fromCharCode((15 & i) << 12 | (63 & this.get(r++)) << 6 | 63 & this.get(r++)) } return A }, H.prototype.parseStringBMP = function (e, t) { for (var A, r, i = "", o = e; o < t;)A = this.get(o++), r = this.get(o++), i += String.fromCharCode(A << 8 | r); return i }, H.prototype.parseTime = function (e, t, A) { return e = this.parseStringISO(e, t), (t = (A ? f : B).exec(e)) ? (A && (t[1] = +t[1], t[1] += +t[1] < 70 ? 2e3 : 1900), e = t[1] + "-" + t[2] + "-" + t[3] + " " + t[4], t[5] && (e += ":" + t[5], t[6] && (e += ":" + t[6], t[7] && (e += "." + t[7]))), t[8] && (e += " UTC", "Z" != t[8] && (e += t[8], t[9] && (e += ":" + t[9]))), e) : "Unrecognized time: " + e }, H.prototype.parseInteger = function (e, t) { for (var A, r = this.get(e), i = 127 < r, o = i ? 255 : 0, n = ""; r == o && ++e < t;)r = this.get(e); if (0 == (A = t - e)) return i ? -1 : 0; if (4 < A) { for (n = r, A <<= 3; 0 == (128 & (+n ^ o));)n = +n << 1, --A; n = "(" + A + " bit)\n" } i && (r -= 256); for (var s = new p(r), a = e + 1; a < t; ++a)s.mulAdd(256, this.get(a)); return n + s.toString() }, H.prototype.parseBitString = function (e, t, A) { for (var r = this.get(e), i = "(" + ((t - e - 1 << 3) - r) + " bit)\n", o = "", n = e + 1; n < t; ++n) { for (var s = this.get(n), a = n == t - 1 ? r : 0, c = 7; a <= c; --c)o += s >> c & 1 ? "1" : "0"; if (o.length > A) return i + y(o, A) } return i + o }, H.prototype.parseOctetString = function (e, t, A) { if (this.isASCII(e, t)) return y(this.parseStringISO(e, t), A); var r = t - e, i = "(" + r + " byte)\n"; r > (A /= 2) && (t = e + A); for (var o = e; o < t; ++o)i += this.hexByte(this.get(o)); return A < r && (i += "…"), i }, H.prototype.parseOID = function (e, t, A) { for (var r = "", i = new p, o = 0, n = e; n < t; ++n) { var s = this.get(n); if (i.mulAdd(128, 127 & s), o += 7, !(128 & s)) { if ("" === r ? r = (i = i.simplify()) instanceof p ? (i.sub(80), "2." + i.toString()) : (s = i < 80 ? i < 40 ? 0 : 1 : 2) + "." + (i - 40 * s) : r += "." + i.toString(), r.length > A) return y(r, A); i = new p, o = 0 } } return 0 < o && (r += ".incomplete"), r }; var _ = H, Q = (D.prototype.typeName = function () { switch (this.tag.tagClass) { case 0: switch (this.tag.tagNumber) { case 0: return "EOC"; case 1: return "BOOLEAN"; case 2: return "INTEGER"; case 3: return "BIT_STRING"; case 4: return "OCTET_STRING"; case 5: return "NULL"; case 6: return "OBJECT_IDENTIFIER"; case 7: return "ObjectDescriptor"; case 8: return "EXTERNAL"; case 9: return "REAL"; case 10: return "ENUMERATED"; case 11: return "EMBEDDED_PDV"; case 12: return "UTF8String"; case 16: return "SEQUENCE"; case 17: return "SET"; case 18: return "NumericString"; case 19: return "PrintableString"; case 20: return "TeletexString"; case 21: return "VideotexString"; case 22: return "IA5String"; case 23: return "UTCTime"; case 24: return "GeneralizedTime"; case 25: return "GraphicString"; case 26: return "VisibleString"; case 27: return "GeneralString"; case 28: return "UniversalString"; case 30: return "BMPString" }return "Universal_" + this.tag.tagNumber.toString(); case 1: return "Application_" + this.tag.tagNumber.toString(); case 2: return "[" + this.tag.tagNumber.toString() + "]"; case 3: return "Private_" + this.tag.tagNumber.toString() } }, D.prototype.content = function (e) { if (void 0 !== this.tag) { void 0 === e && (e = 1 / 0); var t = this.posContent(), A = Math.abs(this.length); if (!this.tag.isUniversal()) return null !== this.sub ? "(" + this.sub.length + " elem)" : this.stream.parseOctetString(t, t + A, e); switch (this.tag.tagNumber) { case 1: return 0 === this.stream.get(t) ? "false" : "true"; case 2: return this.stream.parseInteger(t, t + A); case 3: return this.sub ? "(" + this.sub.length + " elem)" : this.stream.parseBitString(t, t + A, e); case 4: return this.sub ? "(" + this.sub.length + " elem)" : this.stream.parseOctetString(t, t + A, e); case 6: return this.stream.parseOID(t, t + A, e); case 16: case 17: return null !== this.sub ? "(" + this.sub.length + " elem)" : "(no elem)"; case 12: return y(this.stream.parseStringUTF(t, t + A), e); case 18: case 19: case 20: case 21: case 22: case 26: return y(this.stream.parseStringISO(t, t + A), e); case 30: return y(this.stream.parseStringBMP(t, t + A), e); case 23: case 24: return this.stream.parseTime(t, t + A, 23 == this.tag.tagNumber) } } return null }, D.prototype.toString = function () { return this.typeName() + "@" + this.stream.pos + "[header:" + this.header + ",length:" + this.length + ",sub:" + (null === this.sub ? "null" : this.sub.length) + "]" }, D.prototype.toPrettyString = function (e) { var t = (e = void 0 === e ? "" : e) + this.typeName() + " @" + this.stream.pos; if (0 <= this.length && (t += "+"), t += this.length, this.tag.tagConstructed ? t += " (constructed)" : !this.tag.isUniversal() || 3 != this.tag.tagNumber && 4 != this.tag.tagNumber || null === this.sub || (t += " (encapsulates)"), t += "\n", null !== this.sub) { e += "  "; for (var A = 0, r = this.sub.length; A < r; ++A)t += this.sub[A].toPrettyString(e) } return t }, D.prototype.posStart = function () { return this.stream.pos }, D.prototype.posContent = function () { return this.stream.pos + this.header }, D.prototype.posEnd = function () { return this.stream.pos + this.header + Math.abs(this.length) }, D.prototype.toHexString = function () { return this.stream.hexDump(this.posStart(), this.posEnd(), !0) }, D.decodeLength = function (e) { var t = 127 & (A = e.get()); if (t == A) return t; if (6 < t) throw new Error("Length over 48 bits not supported at position " + (e.pos - 1)); if (0 == t) return null; for (var A = 0, r = 0; r < t; ++r)A = 256 * A + e.get(); return A }, D.prototype.getHexStringValue = function () { var e = this.toHexString(), t = 2 * this.header, A = 2 * this.length; return e.substr(t, A) }, D.decode = function (e) { function t() { var e = []; if (null !== i) { for (var t = o + i; A.pos < t;)e[e.length] = D.decode(A); if (A.pos != t) throw new Error("Content size is not correct for container starting at offset " + o) } else try { for (; ;) { var r = D.decode(A); if (r.tag.isEOC()) break; e[e.length] = r } i = o - A.pos } catch (e) { throw new Error("Exception while decoding undefined length content: " + e) } return e } var A = e instanceof _ ? e : new _(e, 0), r = (e = new _(A), new v(A)), i = D.decodeLength(A), o = A.pos, n = o - e.pos, s = null; if (r.tagConstructed) s = t(); else if (r.isUniversal() && (3 == r.tagNumber || 4 == r.tagNumber)) try { if (3 == r.tagNumber && 0 != A.get()) throw new Error("BIT STRINGs with unused bits cannot encapsulate."); s = t(); for (var a = 0; a < s.length; ++a)if (s[a].tag.isEOC()) throw new Error("EOC is not supposed to be actual content.") } catch (e) { s = null } if (null === s) { if (null === i) throw new Error("We can't skip over an invalid tag with undefined length at offset " + o); A.pos = o + Math.abs(i) } return new D(e, n, i, r, s) }, D), v = (A.prototype.isUniversal = function () { return 0 === this.tagClass }, A.prototype.isEOC = function () { return 0 === this.tagClass && 0 === this.tagNumber }, A), S = [2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, 71, 73, 79, 83, 89, 97, 101, 103, 107, 109, 113, 127, 131, 137, 139, 149, 151, 157, 163, 167, 173, 179, 181, 191, 193, 197, 199, 211, 223, 227, 229, 233, 239, 241, 251, 257, 263, 269, 271, 277, 281, 283, 293, 307, 311, 313, 317, 331, 337, 347, 349, 353, 359, 367, 373, 379, 383, 389, 397, 401, 409, 419, 421, 431, 433, 439, 443, 449, 457, 461, 463, 467, 479, 487, 491, 499, 503, 509, 521, 523, 541, 547, 557, 563, 569, 571, 577, 587, 593, 599, 601, 607, 613, 617, 619, 631, 641, 643, 647, 653, 659, 661, 673, 677, 683, 691, 701, 709, 719, 727, 733, 739, 743, 751, 757, 761, 769, 773, 787, 797, 809, 811, 821, 823, 827, 829, 839, 853, 857, 859, 863, 877, 881, 883, 887, 907, 911, 919, 929, 937, 941, 947, 953, 967, 971, 977, 983, 991, 997], R = (1 << 26) / S[S.length - 1], b = (P.prototype.toString = function (e) { if (this.s < 0) return "-" + this.negate().toString(e); var t; if (16 == e) t = 4; else if (8 == e) t = 3; else if (2 == e) t = 1; else if (32 == e) t = 5; else { if (4 != e) return this.toRadix(e); t = 2 } var A, i = (1 << t) - 1, o = !1, n = "", s = this.t, a = this.DB - s * this.DB % t; if (0 < s--) for (a < this.DB && 0 < (A = this[s] >> a) && (o = !0, n = r(A)); 0 <= s;)a < t ? (A = (this[s] & (1 << a) - 1) << t - a, A |= this[--s] >> (a += this.DB - t)) : (A = this[s] >> (a -= t) & i, a <= 0 && (a += this.DB, --s)), (o = 0 < A || o) && (n += r(A)); return o ? n : "0" }, P.prototype.negate = function () { var e = U(); return P.ZERO.subTo(this, e), e }, P.prototype.abs = function () { return this.s < 0 ? this.negate() : this }, P.prototype.compareTo = function (e) { var t = this.s - e.s; if (0 != t) return t; var A = this.t; if (0 != (t = A - e.t)) return this.s < 0 ? -t : t; for (; 0 <= --A;)if (0 != (t = this[A] - e[A])) return t; return 0 }, P.prototype.bitLength = function () { return this.t <= 0 ? 0 : this.DB * (this.t - 1) + V(this[this.t - 1] ^ this.s & this.DM) }, P.prototype.mod = function (e) { var t = U(); return this.abs().divRemTo(e, null, t), this.s < 0 && 0 < t.compareTo(P.ZERO) && e.subTo(t, t), t }, P.prototype.modPowInt = function (e, t) { return t = new (e < 256 || t.isEven() ? k : w)(t), this.exp(e, t) }, P.prototype.clone = function () { var e = U(); return this.copyTo(e), e }, P.prototype.intValue = function () { if (this.s < 0) { if (1 == this.t) return this[0] - this.DV; if (0 == this.t) return -1 } else { if (1 == this.t) return this[0]; if (0 == this.t) return 0 } return (this[1] & (1 << 32 - this.DB) - 1) << this.DB | this[0] }, P.prototype.byteValue = function () { return 0 == this.t ? this.s : this[0] << 24 >> 24 }, P.prototype.shortValue = function () { return 0 == this.t ? this.s : this[0] << 16 >> 16 }, P.prototype.signum = function () { return this.s < 0 ? -1 : this.t <= 0 || 1 == this.t && this[0] <= 0 ? 0 : 1 }, P.prototype.toByteArray = function () { var e = this.t, t = []; t[0] = this.s; var A, r = this.DB - e * this.DB % 8, i = 0; if (0 < e--) for (r < this.DB && (A = this[e] >> r) != (this.s & this.DM) >> r && (t[i++] = A | this.s << this.DB - r); 0 <= e;)r < 8 ? (A = (this[e] & (1 << r) - 1) << 8 - r, A |= this[--e] >> (r += this.DB - 8)) : (A = this[e] >> (r -= 8) & 255, r <= 0 && (r += this.DB, --e)), 0 != (128 & A) && (A |= -256), 0 == i && (128 & this.s) != (128 & A) && ++i, (0 < i || A != this.s) && (t[i++] = A); return t }, P.prototype.equals = function (e) { return 0 == this.compareTo(e) }, P.prototype.min = function (e) { return this.compareTo(e) < 0 ? this : e }, P.prototype.max = function (e) { return 0 < this.compareTo(e) ? this : e }, P.prototype.and = function (e) { var t = U(); return this.bitwiseTo(e, o, t), t }, P.prototype.or = function (e) { var t = U(); return this.bitwiseTo(e, i, t), t }, P.prototype.xor = function (e) { var t = U(); return this.bitwiseTo(e, s, t), t }, P.prototype.andNot = function (e) { var t = U(); return this.bitwiseTo(e, a, t), t }, P.prototype.not = function () { for (var e = U(), t = 0; t < this.t; ++t)e[t] = this.DM & ~this[t]; return e.t = this.t, e.s = ~this.s, e }, P.prototype.shiftLeft = function (e) { var t = U(); return e < 0 ? this.rShiftTo(-e, t) : this.lShiftTo(e, t), t }, P.prototype.shiftRight = function (e) { var t = U(); return e < 0 ? this.lShiftTo(-e, t) : this.rShiftTo(e, t), t }, P.prototype.getLowestSetBit = function () { for (var e, t, A = 0; A < this.t; ++A)if (0 != this[A]) return A * this.DB + (t = void 0, 0 == (e = this[A]) ? -1 : ((t = 0) == (65535 & e) && (e >>= 16, t += 16), 0 == (255 & e) && (e >>= 8, t += 8), 0 == (15 & e) && (e >>= 4, t += 4), 0 == (3 & e) && (e >>= 2, t += 2), 0 == (1 & e) && ++t, t)); return this.s < 0 ? this.t * this.DB : -1 }, P.prototype.bitCount = function () { for (var e = 0, t = this.s & this.DM, A = 0; A < this.t; ++A)e += function (e) { for (var t = 0; 0 != e;)e &= e - 1, ++t; return t }(this[A] ^ t); return e }, P.prototype.testBit = function (e) { var t = Math.floor(e / this.DB); return t >= this.t ? 0 != this.s : 0 != (this[t] & 1 << e % this.DB) }, P.prototype.setBit = function (e) { return this.changeBit(e, i) }, P.prototype.clearBit = function (e) { return this.changeBit(e, a) }, P.prototype.flipBit = function (e) { return this.changeBit(e, s) }, P.prototype.add = function (e) { var t = U(); return this.addTo(e, t), t }, P.prototype.subtract = function (e) { var t = U(); return this.subTo(e, t), t }, P.prototype.multiply = function (e) { var t = U(); return this.multiplyTo(e, t), t }, P.prototype.divide = function (e) { var t = U(); return this.divRemTo(e, t, null), t }, P.prototype.remainder = function (e) { var t = U(); return this.divRemTo(e, null, t), t }, P.prototype.divideAndRemainder = function (e) { var t = U(), A = U(); return this.divRemTo(e, t, A), [t, A] }, P.prototype.modPow = function (e, t) { var A = e.bitLength(), r = z(1); if (A <= 0) return r; var i = A < 18 ? 1 : A < 48 ? 3 : A < 144 ? 4 : A < 768 ? 5 : 6, o = new (A < 8 ? k : t.isEven() ? O : w)(t), n = [], s = 3, a = i - 1, c = (1 << i) - 1; if (n[1] = o.convert(this), 1 < i) { var g = U(); for (o.sqrTo(n[1], g); s <= c;)n[s] = U(), o.mulTo(g, n[s - 2], n[s]), s += 2 } var u, l, h = e.t - 1, d = !0, C = U(); for (A = V(e[h]) - 1; 0 <= h;) { for (a <= A ? u = e[h] >> A - a & c : (u = (e[h] & (1 << A + 1) - 1) << a - A, 0 < h && (u |= e[h - 1] >> this.DB + A - a)), s = i; 0 == (1 & u);)u >>= 1, --s; if ((A -= s) < 0 && (A += this.DB, --h), d) n[u].copyTo(r), d = !1; else { for (; 1 < s;)o.sqrTo(r, C), o.sqrTo(C, r), s -= 2; 0 < s ? o.sqrTo(r, C) : (l = r, r = C, C = l), o.mulTo(C, n[u], r) } for (; 0 <= h && 0 == (e[h] & 1 << A);)o.sqrTo(r, C), l = r, r = C, C = l, --A < 0 && (A = this.DB - 1, --h) } return o.revert(r) }, P.prototype.modInverse = function (e) { var t = e.isEven(); if (this.isEven() && t || 0 == e.signum()) return P.ZERO; for (var A = e.clone(), r = this.clone(), i = z(1), o = z(0), n = z(0), s = z(1); 0 != A.signum();) { for (; A.isEven();)A.rShiftTo(1, A), t ? (i.isEven() && o.isEven() || (i.addTo(this, i), o.subTo(e, o)), i.rShiftTo(1, i)) : o.isEven() || o.subTo(e, o), o.rShiftTo(1, o); for (; r.isEven();)r.rShiftTo(1, r), t ? (n.isEven() && s.isEven() || (n.addTo(this, n), s.subTo(e, s)), n.rShiftTo(1, n)) : s.isEven() || s.subTo(e, s), s.rShiftTo(1, s); 0 <= A.compareTo(r) ? (A.subTo(r, A), t && i.subTo(n, i), o.subTo(s, o)) : (r.subTo(A, r), t && n.subTo(i, n), s.subTo(o, s)) } return 0 != r.compareTo(P.ONE) ? P.ZERO : 0 <= s.compareTo(e) ? s.subtract(e) : s.signum() < 0 && (s.addTo(e, s), s.signum() < 0) ? s.add(e) : s }, P.prototype.pow = function (e) { return this.exp(e, new T) }, P.prototype.gcd = function (e) { var t = this.s < 0 ? this.negate() : this.clone(), A = e.s < 0 ? e.negate() : e.clone(), r = (t.compareTo(A) < 0 && (e = t, t = A, A = e), t.getLowestSetBit()); if ((e = A.getLowestSetBit()) < 0) return t; for (0 < (e = r < e ? r : e) && (t.rShiftTo(e, t), A.rShiftTo(e, A)); 0 < t.signum();)0 < (r = t.getLowestSetBit()) && t.rShiftTo(r, t), 0 < (r = A.getLowestSetBit()) && A.rShiftTo(r, A), 0 <= t.compareTo(A) ? (t.subTo(A, t), t.rShiftTo(1, t)) : (A.subTo(t, A), A.rShiftTo(1, A)); return 0 < e && A.lShiftTo(e, A), A }, P.prototype.isProbablePrime = function (e) { var t, A = this.abs(); if (1 == A.t && A[0] <= S[S.length - 1]) { for (t = 0; t < S.length; ++t)if (A[0] == S[t]) return !0; return !1 } if (A.isEven()) return !1; for (t = 1; t < S.length;) { for (var r = S[t], i = t + 1; i < S.length && r < R;)r *= S[i++]; for (r = A.modInt(r); t < i;)if (r % S[t++] == 0) return !1 } return A.millerRabin(e) }, P.prototype.copyTo = function (e) { for (var t = this.t - 1; 0 <= t; --t)e[t] = this[t]; e.t = this.t, e.s = this.s }, P.prototype.fromInt = function (e) { this.t = 1, this.s = e < 0 ? -1 : 0, 0 < e ? this[0] = e : e < -1 ? this[0] = e + this.DV : this.t = 0 }, P.prototype.fromString = function (e, t) { var A; if (16 == t) A = 4; else if (8 == t) A = 3; else if (256 == t) A = 8; else if (2 == t) A = 1; else if (32 == t) A = 5; else { if (4 != t) return void this.fromRadix(e, t); A = 2 } this.t = 0, this.s = 0; for (var r = e.length, i = !1, o = 0; 0 <= --r;) { var n = 8 == A ? 255 & +e[r] : G(e, r); n < 0 ? "-" == e.charAt(r) && (i = !0) : (i = !1, 0 == o ? this[this.t++] = n : o + A > this.DB ? (this[this.t - 1] |= (n & (1 << this.DB - o) - 1) << o, this[this.t++] = n >> this.DB - o) : this[this.t - 1] |= n << o, (o += A) >= this.DB && (o -= this.DB)) } 8 == A && 0 != (128 & +e[0]) && (this.s = -1, 0 < o && (this[this.t - 1] |= (1 << this.DB - o) - 1 << o)), this.clamp(), i && P.ZERO.subTo(this, this) }, P.prototype.clamp = function () { for (var e = this.s & this.DM; 0 < this.t && this[this.t - 1] == e;)--this.t }, P.prototype.dlShiftTo = function (e, t) { for (var A = this.t - 1; 0 <= A; --A)t[A + e] = this[A]; for (A = e - 1; 0 <= A; --A)t[A] = 0; t.t = this.t + e, t.s = this.s }, P.prototype.drShiftTo = function (e, t) { for (var A = e; A < this.t; ++A)t[A - e] = this[A]; t.t = Math.max(this.t - e, 0), t.s = this.s }, P.prototype.lShiftTo = function (e, t) { for (var A = e % this.DB, r = this.DB - A, i = (1 << r) - 1, o = Math.floor(e / this.DB), n = this.s << A & this.DM, s = this.t - 1; 0 <= s; --s)t[s + o + 1] = this[s] >> r | n, n = (this[s] & i) << A; for (s = o - 1; 0 <= s; --s)t[s] = 0; t[o] = n, t.t = this.t + o + 1, t.s = this.s, t.clamp() }, P.prototype.rShiftTo = function (e, t) { t.s = this.s; var A = Math.floor(e / this.DB); if (A >= this.t) t.t = 0; else { var r = e % this.DB, i = this.DB - r, o = (1 << r) - 1; t[0] = this[A] >> r; for (var n = A + 1; n < this.t; ++n)t[n - A - 1] |= (this[n] & o) << i, t[n - A] = this[n] >> r; 0 < r && (t[this.t - A - 1] |= (this.s & o) << i), t.t = this.t - A, t.clamp() } }, P.prototype.subTo = function (e, t) { for (var A = 0, r = 0, i = Math.min(e.t, this.t); A < i;)r += this[A] - e[A], t[A++] = r & this.DM, r >>= this.DB; if (e.t < this.t) { for (r -= e.s; A < this.t;)r += this[A], t[A++] = r & this.DM, r >>= this.DB; r += this.s } else { for (r += this.s; A < e.t;)r -= e[A], t[A++] = r & this.DM, r >>= this.DB; r -= e.s } t.s = r < 0 ? -1 : 0, r < -1 ? t[A++] = this.DV + r : 0 < r && (t[A++] = r), t.t = A, t.clamp() }, P.prototype.multiplyTo = function (e, t) { var A = this.abs(), r = e.abs(), i = A.t; for (t.t = i + r.t; 0 <= --i;)t[i] = 0; for (i = 0; i < r.t; ++i)t[i + A.t] = A.am(0, r[i], t, i, 0, A.t); t.s = 0, t.clamp(), this.s != e.s && P.ZERO.subTo(t, t) }, P.prototype.squareTo = function (e) { for (var t = this.abs(), A = e.t = 2 * t.t; 0 <= --A;)e[A] = 0; for (A = 0; A < t.t - 1; ++A) { var r = t.am(A, t[A], e, 2 * A, 0, 1); (e[A + t.t] += t.am(A + 1, 2 * t[A], e, 2 * A + 1, r, t.t - A - 1)) >= t.DV && (e[A + t.t] -= t.DV, e[A + t.t + 1] = 1) } 0 < e.t && (e[e.t - 1] += t.am(A, t[A], e, 2 * A, 0, 1)), e.s = 0, e.clamp() }, P.prototype.divRemTo = function (e, t, A) { if (!((c = e.abs()).t <= 0)) { var r = this.abs(); if (r.t < c.t) null != t && t.fromInt(0), null != A && this.copyTo(A); else { null == A && (A = U()); var i = U(), o = this.s, n = (e = e.s, this.DB - V(c[c.t - 1])), s = (0 < n ? (c.lShiftTo(n, i), r.lShiftTo(n, A)) : (c.copyTo(i), r.copyTo(A)), i.t), a = i[s - 1]; if (0 != a) { var c = a * (1 << this.F1) + (1 < s ? i[s - 2] >> this.F2 : 0), g = this.FV / c, u = (1 << this.F1) / c, l = 1 << this.F2, h = A.t, d = h - s, C = null == t ? U() : t; for (i.dlShiftTo(d, C), 0 <= A.compareTo(C) && (A[A.t++] = 1, A.subTo(C, A)), P.ONE.dlShiftTo(s, C), C.subTo(i, i); i.t < s;)i[i.t++] = 0; for (; 0 <= --d;) { var I = A[--h] == a ? this.DM : Math.floor(A[h] * g + (A[h - 1] + l) * u); if ((A[h] += i.am(0, I, A, d, 0, s)) < I) for (i.dlShiftTo(d, C), A.subTo(C, A); A[h] < --I;)A.subTo(C, A) } null != t && (A.drShiftTo(s, t), o != e && P.ZERO.subTo(t, t)), A.t = s, A.clamp(), 0 < n && A.rShiftTo(n, A), o < 0 && P.ZERO.subTo(A, A) } } } }, P.prototype.invDigit = function () { var e, t; return this.t < 1 || 0 == (1 & (e = this[0])) ? 0 : 0 < (t = (t = (t = (t = (t = 3 & e) * (2 - (15 & e) * t) & 15) * (2 - (255 & e) * t) & 255) * (2 - ((65535 & e) * t & 65535)) & 65535) * (2 - e * t % this.DV) % this.DV) ? this.DV - t : -t }, P.prototype.isEven = function () { return 0 == (0 < this.t ? 1 & this[0] : this.s) }, P.prototype.exp = function (e, t) { if (4294967295 < e || e < 1) return P.ONE; var A, r = U(), i = U(), o = t.convert(this), n = V(e) - 1; for (o.copyTo(r); 0 <= --n;)t.sqrTo(r, i), 0 < (e & 1 << n) ? t.mulTo(i, o, r) : (A = r, r = i, i = A); return t.revert(r) }, P.prototype.chunkSize = function (e) { return Math.floor(Math.LN2 * this.DB / Math.log(e)) }, P.prototype.toRadix = function (e) { if (null == e && (e = 10), 0 == this.signum() || e < 2 || 36 < e) return "0"; var t = this.chunkSize(e), A = Math.pow(e, t), r = z(A), i = U(), o = U(), n = ""; for (this.divRemTo(r, i, o); 0 < i.signum();)n = (A + o.intValue()).toString(e).substr(1) + n, i.divRemTo(r, i, o); return o.intValue().toString(e) + n }, P.prototype.fromRadix = function (e, t) { this.fromInt(0); for (var A = this.chunkSize(t = null == t ? 10 : t), r = Math.pow(t, A), i = !1, o = 0, n = 0, s = 0; s < e.length; ++s) { var a = G(e, s); a < 0 ? "-" == e.charAt(s) && 0 == this.signum() && (i = !0) : (n = t * n + a, ++o >= A && (this.dMultiply(r), this.dAddOffset(n, 0), n = o = 0)) } 0 < o && (this.dMultiply(Math.pow(t, o)), this.dAddOffset(n, 0)), i && P.ZERO.subTo(this, this) }, P.prototype.fromNumber = function (e, t, A) { if ("number" == typeof t) if (e < 2) this.fromInt(1); else for (this.fromNumber(e, A), this.testBit(e - 1) || this.bitwiseTo(P.ONE.shiftLeft(e - 1), i, this), this.isEven() && this.dAddOffset(1, 0); !this.isProbablePrime(t);)this.dAddOffset(2, 0), this.bitLength() > e && this.subTo(P.ONE.shiftLeft(e - 1), this); else { var r = 7 & e; (A = []).length = 1 + (e >> 3), t.nextBytes(A), 0 < r ? A[0] &= (1 << r) - 1 : A[0] = 0, this.fromString(A, 256) } }, P.prototype.bitwiseTo = function (e, t, A) { for (var r, i = Math.min(e.t, this.t), o = 0; o < i; ++o)A[o] = t(this[o], e[o]); if (e.t < this.t) { for (r = e.s & this.DM, o = i; o < this.t; ++o)A[o] = t(this[o], r); A.t = this.t } else { for (r = this.s & this.DM, o = i; o < e.t; ++o)A[o] = t(r, e[o]); A.t = e.t } A.s = t(this.s, e.s), A.clamp() }, P.prototype.changeBit = function (e, t) { return e = P.ONE.shiftLeft(e), this.bitwiseTo(e, t, e), e }, P.prototype.addTo = function (e, t) { for (var A = 0, r = 0, i = Math.min(e.t, this.t); A < i;)r += this[A] + e[A], t[A++] = r & this.DM, r >>= this.DB; if (e.t < this.t) { for (r += e.s; A < this.t;)r += this[A], t[A++] = r & this.DM, r >>= this.DB; r += this.s } else { for (r += this.s; A < e.t;)r += e[A], t[A++] = r & this.DM, r >>= this.DB; r += e.s } t.s = r < 0 ? -1 : 0, 0 < r ? t[A++] = r : r < -1 && (t[A++] = this.DV + r), t.t = A, t.clamp() }, P.prototype.dMultiply = function (e) { this[this.t] = this.am(0, e - 1, this, 0, 0, this.t), ++this.t, this.clamp() }, P.prototype.dAddOffset = function (e, t) { if (0 != e) { for (; this.t <= t;)this[this.t++] = 0; for (this[t] += e; this[t] >= this.DV;)this[t] -= this.DV, ++t >= this.t && (this[this.t++] = 0), ++this[t] } }, P.prototype.multiplyLowerTo = function (e, t, A) { var r = Math.min(this.t + e.t, t); for (A.s = 0, A.t = r; 0 < r;)A[--r] = 0; for (var i = A.t - this.t; r < i; ++r)A[r + this.t] = this.am(0, e[r], A, r, 0, this.t); for (i = Math.min(e.t, t); r < i; ++r)this.am(0, e[r], A, r, 0, t - r); A.clamp() }, P.prototype.multiplyUpperTo = function (e, t, A) { var r = A.t = this.t + e.t - --t; for (A.s = 0; 0 <= --r;)A[r] = 0; for (r = Math.max(t - this.t, 0); r < e.t; ++r)A[this.t + r - t] = this.am(t - r, e[r], A, 0, 0, this.t + r - t); A.clamp(), A.drShiftTo(1, A) }, P.prototype.modInt = function (e) { if (e <= 0) return 0; var t = this.DV % e, A = this.s < 0 ? e - 1 : 0; if (0 < this.t) if (0 == t) A = this[0] % e; else for (var r = this.t - 1; 0 <= r; --r)A = (t * A + this[r]) % e; return A }, P.prototype.millerRabin = function (e) { var t = this.subtract(P.ONE), A = t.getLowestSetBit(); if (A <= 0) return !1; var r = t.shiftRight(A); (e = e + 1 >> 1) > S.length && (e = S.length); for (var i = U(), o = 0; o < e; ++o) { i.fromInt(S[Math.floor(Math.random() * S.length)]); var n = i.modPow(r, this); if (0 != n.compareTo(P.ONE) && 0 != n.compareTo(t)) { for (var s = 1; s++ < A && 0 != n.compareTo(t);)if (0 == (n = n.modPowInt(2, this)).compareTo(P.ONE)) return !1; if (0 != n.compareTo(t)) return !1 } } return !0 }, P.prototype.square = function () { var e = U(); return this.squareTo(e), e }, P.prototype.gcda = function (e, t) { var A, r = this.s < 0 ? this.negate() : this.clone(), i = e.s < 0 ? e.negate() : e.clone(), o = (r.compareTo(i) < 0 && (e = r, r = i, i = e), r.getLowestSetBit()), s = i.getLowestSetBit(); s < 0 ? t(r) : (0 < (s = o < s ? o : s) && (r.rShiftTo(s, r), i.rShiftTo(s, i)), A = function n() { 0 < (o = r.getLowestSetBit()) && r.rShiftTo(o, r), 0 < (o = i.getLowestSetBit()) && i.rShiftTo(o, i), 0 <= r.compareTo(i) ? (r.subTo(i, r), r.rShiftTo(1, r)) : (i.subTo(r, i), i.rShiftTo(1, i)), 0 < r.signum() ? setTimeout(A, 0) : (0 < s && i.lShiftTo(s, i), setTimeout(function () { t(i) }, 0)) }, setTimeout(A, 10)) }, P.prototype.fromNumberAsync = function (e, t, A, r) { var o, n, a; "number" == typeof t ? e < 2 ? this.fromInt(1) : (this.fromNumber(e, A), this.testBit(e - 1) || this.bitwiseTo(P.ONE.shiftLeft(e - 1), i, this), this.isEven() && this.dAddOffset(1, 0), o = this, n = function s() { o.dAddOffset(2, 0), o.bitLength() > e && o.subTo(P.ONE.shiftLeft(e - 1), o), o.isProbablePrime(t) ? setTimeout(function () { r() }, 0) : setTimeout(n, 0) }, setTimeout(n, 0)) : (A = 7 & e, (a = []).length = 1 + (e >> 3), t.nextBytes(a), 0 < A ? a[0] &= (1 << A) - 1 : a[0] = 0, this.fromString(a, 256)) }, P), T = (L.prototype.convert = function (e) { return e }, L.prototype.revert = function (e) { return e }, L.prototype.mulTo = function (e, t, A) { e.multiplyTo(t, A) }, L.prototype.sqrTo = function (e, t) { e.squareTo(t) }, L), k = (M.prototype.convert = function (e) { return e.s < 0 || 0 <= e.compareTo(this.m) ? e.mod(this.m) : e }, M.prototype.revert = function (e) { return e }, M.prototype.reduce = function (e) { e.divRemTo(this.m, null, e) }, M.prototype.mulTo = function (e, t, A) { e.multiplyTo(t, A), this.reduce(A) }, M.prototype.sqrTo = function (e, t) { e.squareTo(t), this.reduce(t) }, M), w = (I.prototype.convert = function (e) { var t = U(); return e.abs().dlShiftTo(this.m.t, t), t.divRemTo(this.m, null, t), e.s < 0 && 0 < t.compareTo(b.ZERO) && this.m.subTo(t, t), t }, I.prototype.revert = function (e) { var t = U(); return e.copyTo(t), this.reduce(t), t }, I.prototype.reduce = function (e) { for (; e.t <= this.mt2;)e[e.t++] = 0; for (var t = 0; t < this.m.t; ++t) { var A = 32767 & e[t], r = A * this.mpl + ((A * this.mph + (e[t] >> 15) * this.mpl & this.um) << 15) & e.DM; for (e[A = t + this.m.t] += this.m.am(0, r, e, t, 0, this.m.t); e[A] >= e.DV;)e[A] -= e.DV, e[++A]++ } e.clamp(), e.drShiftTo(this.m.t, e), 0 <= e.compareTo(this.m) && e.subTo(this.m, e) }, I.prototype.mulTo = function (e, t, A) { e.multiplyTo(t, A), this.reduce(A) }, I.prototype.sqrTo = function (e, t) { e.squareTo(t), this.reduce(t) }, I), O = (N.prototype.convert = function (e) { var t; return e.s < 0 || e.t > 2 * this.m.t ? e.mod(this.m) : e.compareTo(this.m) < 0 ? e : (t = U(), e.copyTo(t), this.reduce(t), t) }, N.prototype.revert = function (e) { return e }, N.prototype.reduce = function (e) { for (e.drShiftTo(this.m.t - 1, this.r2), e.t > this.m.t + 1 && (e.t = this.m.t + 1, e.clamp()), this.mu.multiplyUpperTo(this.r2, this.m.t + 1, this.q3), this.m.multiplyLowerTo(this.q3, this.m.t + 1, this.r2); e.compareTo(this.r2) < 0;)e.dAddOffset(1, this.m.t + 1); for (e.subTo(this.r2, e); 0 <= e.compareTo(this.m);)e.subTo(this.m, e) }, N.prototype.mulTo = function (e, t, A) { e.multiplyTo(t, A), this.reduce(A) }, N.prototype.sqrTo = function (e, t) { e.squareTo(t), this.reduce(t) }, N); function N(e) { this.m = e, this.r2 = U(), this.q3 = U(), b.ONE.dlShiftTo(2 * e.t, this.r2), this.mu = this.r2.divide(e) } function I(e) { this.m = e, this.mp = e.invDigit(), this.mpl = 32767 & this.mp, this.mph = this.mp >> 15, this.um = (1 << e.DB - 15) - 1, this.mt2 = 2 * e.t } function M(e) { this.m = e } function L() { } function P(e, t, A) { null != e && ("number" == typeof e ? this.fromNumber(e, t, A) : null == t && "string" != typeof e ? this.fromString(e, 256) : this.fromString(e, t)) } function A(e) { var t = e.get(); if (this.tagClass = t >> 6, this.tagConstructed = 0 != (32 & t), this.tagNumber = 31 & t, 31 == this.tagNumber) { for (var A = new p; t = e.get(), A.mulAdd(128, 127 & t), 128 & t;); this.tagNumber = A.simplify() } } function D(e, t, A, r, i) { if (!(r instanceof v)) throw new Error("Invalid tag value."); this.stream = e, this.header = t, this.length = A, this.tag = r, this.sub = i } function H(e, t) { this.hexDigits = "0123456789ABCDEF", e instanceof H ? (this.enc = e.enc, this.pos = e.pos) : (this.enc = e, this.pos = t) } function U() { return new b(null) } function j(e, t) { return new b(e, t) } n = (g = "undefined" != typeof navigator) && "Microsoft Internet Explorer" == navigator.appName ? (b.prototype.am = function (e, t, A, r, i, o) { for (var n = 32767 & t, s = t >> 15; 0 <= --o;) { var a = 32767 & this[e], c = this[e++] >> 15, g = s * a + c * n; i = ((a = n * a + ((32767 & g) << 15) + A[r] + (1073741823 & i)) >>> 30) + (g >>> 15) + s * c + (i >>> 30), A[r++] = 1073741823 & a } return i }, 30) : g && "Netscape" != navigator.appName ? (b.prototype.am = function (e, t, A, r, i, o) { for (; 0 <= --o;) { var n = t * this[e++] + A[r] + i; i = Math.floor(n / 67108864), A[r++] = 67108863 & n } return i }, 26) : (b.prototype.am = function (e, t, A, r, i, o) { for (var n = 16383 & t, s = t >> 14; 0 <= --o;) { var a = 16383 & this[e], c = this[e++] >> 14, g = s * a + c * n; i = ((a = n * a + ((16383 & g) << 14) + A[r] + i) >> 28) + (g >> 14) + s * c, A[r++] = 268435455 & a } return i }, 28), b.prototype.DB = n, b.prototype.DM = (1 << n) - 1, b.prototype.DV = 1 << n, b.prototype.FV = Math.pow(2, 52), b.prototype.F1 = 52 - n, b.prototype.F2 = 2 * n - 52; for (var F = [], x = "0".charCodeAt(0), q = 0; q <= 9; ++q)F[x++] = q; for (x = "a".charCodeAt(0), q = 10; q < 36; ++q)F[x++] = q; for (x = "A".charCodeAt(0), q = 10; q < 36; ++q)F[x++] = q; function G(e, t) { return null == (e = F[e.charCodeAt(t)]) ? -1 : e } function z(e) { var t = U(); return t.fromInt(e), t } function V(e) { var t, A = 1; return 0 != (t = e >>> 16) && (e = t, A += 16), 0 != (t = e >> 8) && (e = t, A += 8), 0 != (t = e >> 4) && (e = t, A += 4), 0 != (t = e >> 2) && (e = t, A += 2), 0 != (t = e >> 1) && (e = t, A += 1), A } b.ZERO = z(0), b.ONE = z(1), K.prototype.init = function (e) { for (var t, A, r = 0; r < 256; ++r)this.S[r] = r; for (r = t = 0; r < 256; ++r)t = t + this.S[r] + e[r % e.length] & 255, A = this.S[r], this.S[r] = this.S[t], this.S[t] = A; this.i = 0, this.j = 0 }, K.prototype.next = function () { var e; return this.i = this.i + 1 & 255, this.j = this.j + this.S[this.i] & 255, e = this.S[this.i], this.S[this.i] = this.S[this.j], this.S[this.j] = e, this.S[e + this.S[this.i] & 255] }; var Y, J = K; function K() { this.i = 0, this.j = 0, this.S = [] } if (null == (Z = null)) { var Z = [], W = 0, X = void 0; if ("undefined" != typeof window && window.crypto && window.crypto.getRandomValues) { var $ = new Uint32Array(256); for (window.crypto.getRandomValues($), X = 0; X < $.length; ++X)Z[W++] = 255 & $[X] } } te.prototype.nextBytes = function (e) { for (var t = 0; t < e.length; ++t)e[t] = function () { if (null == Y) { for (Y = new J; W < 256;) { var e = Math.floor(65536 * Math.random()); Z[W++] = 255 & e } for (Y.init(Z), W = 0; W < Z.length; ++W)Z[W] = 0; W = 0 } return Y.next() }() }; var Ae = te, ie = (ee.prototype.doPublic = function (e) { return e.modPowInt(this.e, this.n) }, ee.prototype.doPrivate = function (e) { if (null == this.p || null == this.q) return e.modPow(this.d, this.n); for (var t = e.mod(this.p).modPow(this.dmp1, this.p), A = e.mod(this.q).modPow(this.dmq1, this.q); t.compareTo(A) < 0;)t = t.add(this.p); return t.subtract(A).multiply(this.coeff).mod(this.p).multiply(this.q).add(A) }, ee.prototype.setPublic = function (e, t) { null != e && null != t && 0 < e.length && 0 < t.length ? (this.n = j(e, 16), this.e = parseInt(t, 16)) : console.error("Invalid RSA public key") }, ee.prototype.encrypt = function (e) { var t = this.n.bitLength() + 7 >> 3; if (null == (e = function (e, t) { if (t < e.length + 11) return console.error("Message too long for RSA"), null; for (var A = [], r = e.length - 1; 0 <= r && 0 < t;) { var i = e.charCodeAt(r--); i < 128 ? A[--t] = i : 127 < i && i < 2048 ? (A[--t] = 63 & i | 128, A[--t] = i >> 6 | 192) : (A[--t] = 63 & i | 128, A[--t] = i >> 6 & 63 | 128, A[--t] = i >> 12 | 224) } A[--t] = 0; for (var o = new Ae, n = []; 2 < t;) { for (n[0] = 0; 0 == n[0];)o.nextBytes(n); A[--t] = n[0] } return A[--t] = 2, A[--t] = 0, new b(A) }(e, t))) return null; if (null == (e = this.doPublic(e))) return null; for (var A = e.toString(16), r = A.length, i = 0; i < 2 * t - r; i++)A = "0" + A; return A }, ee.prototype.setPrivate = function (e, t, A) { null != e && null != t && 0 < e.length && 0 < t.length ? (this.n = j(e, 16), this.e = parseInt(t, 16), this.d = j(A, 16)) : console.error("Invalid RSA private key") }, ee.prototype.setPrivateEx = function (e, t, A, r, i, o, n, s) { null != e && null != t && 0 < e.length && 0 < t.length ? (this.n = j(e, 16), this.e = parseInt(t, 16), this.d = j(A, 16), this.p = j(r, 16), this.q = j(i, 16), this.dmp1 = j(o, 16), this.dmq1 = j(n, 16), this.coeff = j(s, 16)) : console.error("Invalid RSA private key") }, ee.prototype.generate = function (e, t) { var A = new Ae, r = e >> 1; this.e = parseInt(t, 16); for (var i = new b(t, 16); ;) { for (; this.p = new b(e - r, 1, A), 0 != this.p.subtract(b.ONE).gcd(i).compareTo(b.ONE) || !this.p.isProbablePrime(10);); for (; this.q = new b(r, 1, A), 0 != this.q.subtract(b.ONE).gcd(i).compareTo(b.ONE) || !this.q.isProbablePrime(10);); this.p.compareTo(this.q) <= 0 && (o = this.p, this.p = this.q, this.q = o); var o = this.p.subtract(b.ONE), n = this.q.subtract(b.ONE), s = o.multiply(n); if (0 == s.gcd(i).compareTo(b.ONE)) { this.n = this.p.multiply(this.q), this.d = i.modInverse(s), this.dmp1 = this.d.mod(o), this.dmq1 = this.d.mod(n), this.coeff = this.q.modInverse(this.p); break } } }, ee.prototype.decrypt = function (e) { if (e = j(e, 16), null == (e = this.doPrivate(e))) return null; for (var t = this.n.bitLength() + 7 >> 3, A = e.toByteArray(), r = 0; r < A.length && 0 == A[r];)++r; if (A.length - r != t - 1 || 2 != A[r]) return null; for (++r; 0 != A[r];)if (++r >= A.length) return null; for (var i = ""; ++r < A.length;) { var o = 255 & A[r]; o < 128 ? i += String.fromCharCode(o) : 191 < o && o < 224 ? (i += String.fromCharCode((31 & o) << 6 | 63 & A[r + 1]), ++r) : (i += String.fromCharCode((15 & o) << 12 | (63 & A[r + 1]) << 6 | 63 & A[r + 2]), r += 2) } return i }, ee.prototype.generateAsync = function (e, A, r) { var i = new Ae, o = e >> 1, n = (this.e = parseInt(A, 16), new b(A, 16)), s = this; setTimeout(function a() { var A = function t() { s.p.compareTo(s.q) <= 0 && (e = s.p, s.p = s.q, s.q = e); var e = s.p.subtract(b.ONE), t = s.q.subtract(b.ONE), A = e.multiply(t); 0 == A.gcd(n).compareTo(b.ONE) ? (s.n = s.p.multiply(s.q), s.d = n.modInverse(A), s.dmp1 = s.d.mod(e), s.dmq1 = s.d.mod(t), s.coeff = s.q.modInverse(s.p), setTimeout(function () { r() }, 0)) : setTimeout(a, 0) }, g = function c() { s.q = U(), s.q.fromNumberAsync(o, 1, i, function () { s.q.subtract(b.ONE).gcda(n, function (e) { 0 == e.compareTo(b.ONE) && s.q.isProbablePrime(10) ? setTimeout(A, 0) : setTimeout(c, 0) }) }) }; setTimeout(function t() { s.p = U(), s.p.fromNumberAsync(e - o, 1, i, function () { s.p.subtract(b.ONE).gcda(n, function (e) { 0 == e.compareTo(b.ONE) && s.p.isProbablePrime(10) ? setTimeout(g, 0) : setTimeout(t, 0) }) }) }, 0) }, 0) }, ee.prototype.sign = function (e, t, A) { return null == (A = function (e, t) { if (t < e.length + 22) return console.error("Message too long for RSA"), null; for (var A = t - e.length - 6, r = "", i = 0; i < A; i += 2)r += "ff"; return j("0001" + r + "00" + e, 16) }((ie[A] || "") + t(e).toString(), this.n.bitLength() / 4)) || null == (t = this.doPrivate(A)) ? null : 0 == (1 & (e = t.toString(16)).length) ? e : "0" + e }, ee.prototype.verify = function (e, t, A) { return t = j(t, 16), null == (t = this.doPublic(t)) ? null : function (e) { for (var t in ie) if (ie.hasOwnProperty(t)) { var A = (t = ie[t]).length; if (e.substr(0, A) == t) return e.substr(A) } return e }(t.toString(16).replace(/^1f+00/, "")) == A(e).toString() }, g = ee, { "md2": "3020300c06082a864886f70d020205000410", "md5": "3020300c06082a864886f70d020505000410", "sha1": "3021300906052b0e03021a05000414", "sha224": "302d300d06096086480165030402040500041c", "sha256": "3031300d060960864801650304020105000420", "sha384": "3041300d060960864801650304020205000430", "sha512": "3051300d060960864801650304020305000440", "ripemd160": "3021300906052b2403020105000414" }); function ee() { this.n = null, this.e = 0, this.d = null, this.p = null, this.q = null, this.dmp1 = null, this.dmq1 = null, this.coeff = null } function te() { } (n = {}).lang = { "extend": function extend(e, A, i) { if (!A || !e) throw new Error("YAHOO.lang.extend failed, please check that all dependencies are included."); function r() { } if (r.prototype = A.prototype, e.prototype = new r, (e.prototype.constructor = e).superclass = A.prototype, A.prototype.constructor == Object.prototype.constructor && (A.prototype.constructor = A), i) { for (var o in i) e.prototype[o] = i[o]; A = function t() { }; var n = ["toString", "valueOf"]; try { "undefined" != typeof navigator && /MSIE/.test(navigator.userAgent) && (A = function t(e, A) { for (o = 0; o < n.length; o += 1) { var r = n[o], i = A[r]; "function" == typeof i && i != Object.prototype[r] && (e[r] = i) } }) } catch (e) { } A(e.prototype, i) } } }; var oe = {}; void 0 !== oe.asn1 && oe.asn1 || (oe.asn1 = {}), oe.asn1.ASN1Util = new function () { this.integerToByteHex = function (e) { return (e = e.toString(16)).length % 2 == 1 ? "0" + e : e }, this.bigIntToMinTwosComplementsHex = function (e) { var t = e.toString(16); if ("-" != t.substr(0, 1)) t.length % 2 == 1 ? t = "0" + t : t.match(/^[0-7]/) || (t = "00" + t); else { var A = t.substr(1).length; A % 2 == 1 ? A += 1 : t.match(/^[0-7]/) || (A += 2); for (var r = "", i = 0; i < A; i++)r += "f"; t = new b(r, 16).xor(e).add(b.ONE).toString(16).replace(/^-/, "") } return t }, this.getPEMStringFromHex = function (e, t) { return hextopem(e, t) }, this.newObject = function (e) { var t, A = (t = oe.asn1).DERBoolean, r = t.DERInteger, i = t.DERBitString, o = t.DEROctetString, n = t.DERNull, s = t.DERObjectIdentifier, a = t.DEREnumerated, c = t.DERUTF8String, g = t.DERNumericString, u = t.DERPrintableString, l = t.DERTeletexString, h = t.DERIA5String, d = t.DERUTCTime, C = t.DERGeneralizedTime, I = t.DERSequence, E = t.DERSet, p = t.DERTaggedObject, f = t.ASN1Util.newObject; if (1 != (t = Object.keys(e)).length) throw "key of param shall be only one."; if (t = t[0], -1 == ":bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:seq:set:tag:".indexOf(":" + t + ":")) throw "undefined key: " + t; if ("bool" == t) return new A(e[t]); if ("int" == t) return new r(e[t]); if ("bitstr" == t) return new i(e[t]); if ("octstr" == t) return new o(e[t]); if ("null" == t) return new n(e[t]); if ("oid" == t) return new s(e[t]); if ("enum" == t) return new a(e[t]); if ("utf8str" == t) return new c(e[t]); if ("numstr" == t) return new g(e[t]); if ("prnstr" == t) return new u(e[t]); if ("telstr" == t) return new l(e[t]); if ("ia5str" == t) return new h(e[t]); if ("utctime" == t) return new d(e[t]); if ("gentime" == t) return new C(e[t]); if ("seq" == t) { for (var B = e[t], _ = [], m = 0; m < B.length; m++) { var Q = f(B[m]); _.push(Q) } return new I({ "array": _ }) } if ("set" == t) { for (B = e[t], _ = [], m = 0; m < B.length; m++)Q = f(B[m]), _.push(Q); return new E({ "array": _ }) } if ("tag" == t) { if (A = e[t], "[object Array]" === Object.prototype.toString.call(A) && 3 == A.length) return r = f(A[2]), new p({ "tag": A[0], "explicit": A[1], "obj": r }); if (i = {}, void 0 !== A.explicit && (i.explicit = A.explicit), void 0 !== A.tag && (i.tag = A.tag), void 0 === A.obj) throw "obj shall be specified for 'tag'."; return i.obj = f(A.obj), new p(i) } }, this.jsonToASN1HEX = function (e) { return this.newObject(e).getEncodedHex() } }, oe.asn1.ASN1Util.oidHexToInt = function (e) { for (var t = "", A = parseInt(e.substr(0, 2), 16), r = (t = Math.floor(A / 40) + "." + A % 40, ""), i = 2; i < e.length; i += 2) { var o = ("00000000" + parseInt(e.substr(i, 2), 16).toString(2)).slice(-8); r += o.substr(1, 7), "0" == o.substr(0, 1) && (t = t + "." + new b(r, 2).toString(10), r = "") } return t }, oe.asn1.ASN1Util.oidIntToHex = function (e) { function t(e) { return 1 == (e = e.toString(16)).length ? "0" + e : e } if (!e.match(/^[0-9.]+$/)) throw "malformed oid string: " + e; var A = "", r = e.split("."); A += t(e = 40 * parseInt(r[0]) + parseInt(r[1])), r.splice(0, 2); for (var i = 0; i < r.length; i++)A += function (e) { var A = "", r = new b(e, 10).toString(2), i = 7 - r.length % 7; 7 == i && (i = 0); for (var o = "", n = 0; n < i; n++)o += "0"; for (r = o + r, n = 0; n < r.length - 1; n += 7) { var s = r.substr(n, 7); n != r.length - 7 && (s = "1" + s), A += t(parseInt(s, 2)) } return A }(r[i]); return A }, oe.asn1.ASN1Object = function () { this.getLengthHexFromValue = function () { if (void 0 === this.hV || null == this.hV) throw "this.hV is null or undefined."; if (this.hV.length % 2 == 1) throw "value hex must be even length: n=" + "".length + ",v=" + this.hV; var e = this.hV.length / 2, t = e.toString(16); if (t.length % 2 == 1 && (t = "0" + t), e < 128) return t; var A = t.length / 2; if (15 < A) throw "ASN.1 length too long to represent by 8x: n = " + e.toString(16); return (128 + A).toString(16) + t }, this.getEncodedHex = function () { return null != this.hTLV && !this.isModified || (this.hV = this.getFreshValueHex(), this.hL = this.getLengthHexFromValue(), this.hTLV = this.hT + this.hL + this.hV, this.isModified = !1), this.hTLV }, this.getValueHex = function () { return this.getEncodedHex(), this.hV }, this.getFreshValueHex = function () { return "" } }, oe.asn1.DERAbstractString = function (e) { oe.asn1.DERAbstractString.superclass.constructor.call(this), this.getString = function () { return this.s }, this.setString = function (e) { this.hTLV = null, this.isModified = !0, this.s = e, this.hV = stohex(this.s) }, this.setStringHex = function (e) { this.hTLV = null, this.isModified = !0, this.s = null, this.hV = e }, this.getFreshValueHex = function () { return this.hV }, void 0 !== e && ("string" == typeof e ? this.setString(e) : void 0 !== e.str ? this.setString(e.str) : void 0 !== e.hex && this.setStringHex(e.hex)) }, n.lang.extend(oe.asn1.DERAbstractString, oe.asn1.ASN1Object), oe.asn1.DERAbstractTime = function (e) { oe.asn1.DERAbstractTime.superclass.constructor.call(this), this.localDateToUTC = function (e) { return utc = e.getTime() + 6e4 * e.getTimezoneOffset(), new Date(utc) }, this.formatDate = function (e, t, A) { var r = this.zeroPadding, i = (e = this.localDateToUTC(e), String(e.getFullYear())); return t = (i = "utc" == t ? i.substr(2, 2) : i) + r(String(e.getMonth() + 1), 2) + r(String(e.getDate()), 2) + r(String(e.getHours()), 2) + r(String(e.getMinutes()), 2) + r(String(e.getSeconds()), 2), (t = !0 === A && 0 != (i = e.getMilliseconds()) ? t + "." + r(String(i), 3).replace(/[0]+$/, "") : t) + "Z" }, this.zeroPadding = function (e, t) { return e.length >= t ? e : new Array(t - e.length + 1).join("0") + e }, this.getString = function () { return this.s }, this.setString = function (e) { this.hTLV = null, this.isModified = !0, this.s = e, this.hV = stohex(e) }, this.setByDateValue = function (e, t, A, r, i, o) { e = new Date(Date.UTC(e, t - 1, A, r, i, o, 0)), this.setByDate(e) }, this.getFreshValueHex = function () { return this.hV } }, n.lang.extend(oe.asn1.DERAbstractTime, oe.asn1.ASN1Object), oe.asn1.DERAbstractStructured = function (e) { oe.asn1.DERAbstractString.superclass.constructor.call(this), this.setByASN1ObjectArray = function (e) { this.hTLV = null, this.isModified = !0, this.asn1Array = e }, this.appendASN1Object = function (e) { this.hTLV = null, this.isModified = !0, this.asn1Array.push(e) }, this.asn1Array = new Array, void 0 !== e && void 0 !== e.array && (this.asn1Array = e.array) }, n.lang.extend(oe.asn1.DERAbstractStructured, oe.asn1.ASN1Object), oe.asn1.DERBoolean = function () { oe.asn1.DERBoolean.superclass.constructor.call(this), this.hT = "01", this.hTLV = "0101ff" }, n.lang.extend(oe.asn1.DERBoolean, oe.asn1.ASN1Object), oe.asn1.DERInteger = function (e) { oe.asn1.DERInteger.superclass.constructor.call(this), this.hT = "02", this.setByBigInteger = function (e) { this.hTLV = null, this.isModified = !0, this.hV = oe.asn1.ASN1Util.bigIntToMinTwosComplementsHex(e) }, this.setByInteger = function (e) { e = new b(String(e), 10), this.setByBigInteger(e) }, this.setValueHex = function (e) { this.hV = e }, this.getFreshValueHex = function () { return this.hV }, void 0 !== e && (void 0 !== e.bigint ? this.setByBigInteger(e.bigint) : void 0 !== e.int ? this.setByInteger(e.int) : "number" == typeof e ? this.setByInteger(e) : void 0 !== e.hex && this.setValueHex(e.hex)) }, n.lang.extend(oe.asn1.DERInteger, oe.asn1.ASN1Object), oe.asn1.DERBitString = function (e) { var t; void 0 !== e && void 0 !== e.obj && (t = oe.asn1.ASN1Util.newObject(e.obj), e.hex = "00" + t.getEncodedHex()), oe.asn1.DERBitString.superclass.constructor.call(this), this.hT = "03", this.setHexValueIncludingUnusedBits = function (e) { this.hTLV = null, this.isModified = !0, this.hV = e }, this.setUnusedBitsAndHexValue = function (e, t) { if (e < 0 || 7 < e) throw "unused bits shall be from 0 to 7: u = " + e; e = "0" + e, this.hTLV = null, this.isModified = !0, this.hV = e + t }, this.setByBinaryString = function (e) { var t = 8 - (e = e.replace(/0+$/, "")).length % 8; 8 == t && (t = 0); for (var A = 0; A <= t; A++)e += "0"; var r = ""; for (A = 0; A < e.length - 1; A += 8) { var i = e.substr(A, 8); r += i = 1 == (i = parseInt(i, 2).toString(16)).length ? "0" + i : i } this.hTLV = null, this.isModified = !0, this.hV = "0" + t + r }, this.setByBooleanArray = function (e) { for (var t = "", A = 0; A < e.length; A++)1 == e[A] ? t += "1" : t += "0"; this.setByBinaryString(t) }, this.newFalseArray = function (e) { for (var t = new Array(e), A = 0; A < e; A++)t[A] = !1; return t }, this.getFreshValueHex = function () { return this.hV }, void 0 !== e && ("string" == typeof e && e.toLowerCase().match(/^[0-9a-f]+$/) ? this.setHexValueIncludingUnusedBits(e) : void 0 !== e.hex ? this.setHexValueIncludingUnusedBits(e.hex) : void 0 !== e.bin ? this.setByBinaryString(e.bin) : void 0 !== e.array && this.setByBooleanArray(e.array)) }, n.lang.extend(oe.asn1.DERBitString, oe.asn1.ASN1Object), oe.asn1.DEROctetString = function (e) { var t; void 0 !== e && void 0 !== e.obj && (t = oe.asn1.ASN1Util.newObject(e.obj), e.hex = t.getEncodedHex()), oe.asn1.DEROctetString.superclass.constructor.call(this, e), this.hT = "04" }, n.lang.extend(oe.asn1.DEROctetString, oe.asn1.DERAbstractString), oe.asn1.DERNull = function () { oe.asn1.DERNull.superclass.constructor.call(this), this.hT = "05", this.hTLV = "0500" }, n.lang.extend(oe.asn1.DERNull, oe.asn1.ASN1Object), oe.asn1.DERObjectIdentifier = function (e) { var t = function t(e) { return 1 == (e = e.toString(16)).length ? "0" + e : e }; oe.asn1.DERObjectIdentifier.superclass.constructor.call(this), this.hT = "06", this.setValueHex = function (e) { this.hTLV = null, this.isModified = !0, this.s = null, this.hV = e }, this.setValueOidString = function (e) { if (!e.match(/^[0-9.]+$/)) throw "malformed oid string: " + e; var A = "", r = e.split("."); e = 40 * parseInt(r[0]) + parseInt(r[1]), A += t(e), r.splice(0, 2); for (var i = 0; i < r.length; i++)A += function (e) { var A = "", r = new b(e, 10).toString(2), i = 7 - r.length % 7; 7 == i && (i = 0); for (var o = "", n = 0; n < i; n++)o += "0"; for (r = o + r, n = 0; n < r.length - 1; n += 7) { var s = r.substr(n, 7); n != r.length - 7 && (s = "1" + s), A += t(parseInt(s, 2)) } return A }(r[i]); this.hTLV = null, this.isModified = !0, this.s = null, this.hV = A }, this.setValueName = function (e) { var t = oe.asn1.x509.OID.name2oid(e); if ("" === t) throw "DERObjectIdentifier oidName undefined: " + e; this.setValueOidString(t) }, this.getFreshValueHex = function () { return this.hV }, void 0 !== e && ("string" == typeof e ? e.match(/^[0-2].[0-9.]+$/) ? this.setValueOidString(e) : this.setValueName(e) : void 0 !== e.oid ? this.setValueOidString(e.oid) : void 0 !== e.hex ? this.setValueHex(e.hex) : void 0 !== e.name && this.setValueName(e.name)) }, n.lang.extend(oe.asn1.DERObjectIdentifier, oe.asn1.ASN1Object), oe.asn1.DEREnumerated = function (e) { oe.asn1.DEREnumerated.superclass.constructor.call(this), this.hT = "0a", this.setByBigInteger = function (e) { this.hTLV = null, this.isModified = !0, this.hV = oe.asn1.ASN1Util.bigIntToMinTwosComplementsHex(e) }, this.setByInteger = function (e) { e = new b(String(e), 10), this.setByBigInteger(e) }, this.setValueHex = function (e) { this.hV = e }, this.getFreshValueHex = function () { return this.hV }, void 0 !== e && (void 0 !== e.int ? this.setByInteger(e.int) : "number" == typeof e ? this.setByInteger(e) : void 0 !== e.hex && this.setValueHex(e.hex)) }, n.lang.extend(oe.asn1.DEREnumerated, oe.asn1.ASN1Object), oe.asn1.DERUTF8String = function (e) { oe.asn1.DERUTF8String.superclass.constructor.call(this, e), this.hT = "0c" }, n.lang.extend(oe.asn1.DERUTF8String, oe.asn1.DERAbstractString), oe.asn1.DERNumericString = function (e) { oe.asn1.DERNumericString.superclass.constructor.call(this, e), this.hT = "12" }, n.lang.extend(oe.asn1.DERNumericString, oe.asn1.DERAbstractString), oe.asn1.DERPrintableString = function (e) { oe.asn1.DERPrintableString.superclass.constructor.call(this, e), this.hT = "13" }, n.lang.extend(oe.asn1.DERPrintableString, oe.asn1.DERAbstractString), oe.asn1.DERTeletexString = function (e) { oe.asn1.DERTeletexString.superclass.constructor.call(this, e), this.hT = "14" }, n.lang.extend(oe.asn1.DERTeletexString, oe.asn1.DERAbstractString), oe.asn1.DERIA5String = function (e) { oe.asn1.DERIA5String.superclass.constructor.call(this, e), this.hT = "16" }, n.lang.extend(oe.asn1.DERIA5String, oe.asn1.DERAbstractString), oe.asn1.DERUTCTime = function (e) { oe.asn1.DERUTCTime.superclass.constructor.call(this, e), this.hT = "17", this.setByDate = function (e) { this.hTLV = null, this.isModified = !0, this.date = e, this.s = this.formatDate(this.date, "utc"), this.hV = stohex(this.s) }, this.getFreshValueHex = function () { return void 0 === this.date && void 0 === this.s && (this.date = new Date, this.s = this.formatDate(this.date, "utc"), this.hV = stohex(this.s)), this.hV }, void 0 !== e && (void 0 !== e.str ? this.setString(e.str) : "string" == typeof e && e.match(/^[0-9]{12}Z$/) ? this.setString(e) : void 0 !== e.hex ? this.setStringHex(e.hex) : void 0 !== e.date && this.setByDate(e.date)) }, n.lang.extend(oe.asn1.DERUTCTime, oe.asn1.DERAbstractTime), oe.asn1.DERGeneralizedTime = function (e) { oe.asn1.DERGeneralizedTime.superclass.constructor.call(this, e), this.hT = "18", this.withMillis = !1, this.setByDate = function (e) { this.hTLV = null, this.isModified = !0, this.date = e, this.s = this.formatDate(this.date, "gen", this.withMillis), this.hV = stohex(this.s) }, this.getFreshValueHex = function () { return void 0 === this.date && void 0 === this.s && (this.date = new Date, this.s = this.formatDate(this.date, "gen", this.withMillis), this.hV = stohex(this.s)), this.hV }, void 0 !== e && (void 0 !== e.str ? this.setString(e.str) : "string" == typeof e && e.match(/^[0-9]{14}Z$/) ? this.setString(e) : void 0 !== e.hex ? this.setStringHex(e.hex) : void 0 !== e.date && this.setByDate(e.date), !0 === e.millis && (this.withMillis = !0)) }, n.lang.extend(oe.asn1.DERGeneralizedTime, oe.asn1.DERAbstractTime), oe.asn1.DERSequence = function (e) { oe.asn1.DERSequence.superclass.constructor.call(this, e), this.hT = "30", this.getFreshValueHex = function () { for (var e = "", t = 0; t < this.asn1Array.length; t++)e += this.asn1Array[t].getEncodedHex(); return this.hV = e, this.hV } }, n.lang.extend(oe.asn1.DERSequence, oe.asn1.DERAbstractStructured), oe.asn1.DERSet = function (e) { oe.asn1.DERSet.superclass.constructor.call(this, e), this.hT = "31", this.sortFlag = !0, this.getFreshValueHex = function () { for (var e = new Array, t = 0; t < this.asn1Array.length; t++) { var A = this.asn1Array[t]; e.push(A.getEncodedHex()) } return 1 == this.sortFlag && e.sort(), this.hV = e.join(""), this.hV }, void 0 !== e && void 0 !== e.sortflag && 0 == e.sortflag && (this.sortFlag = !1) }, n.lang.extend(oe.asn1.DERSet, oe.asn1.DERAbstractStructured), oe.asn1.DERTaggedObject = function (e) { oe.asn1.DERTaggedObject.superclass.constructor.call(this), this.hT = "a0", this.hV = "", this.isExplicit = !0, this.asn1Object = null, this.setASN1Object = function (e, t, A) { this.hT = t, this.isExplicit = e, this.asn1Object = A, this.isExplicit ? (this.hV = this.asn1Object.getEncodedHex(), this.hTLV = null, this.isModified = !0) : (this.hV = null, this.hTLV = A.getEncodedHex(), this.hTLV = this.hTLV.replace(/^../, t), this.isModified = !1) }, this.getFreshValueHex = function () { return this.hV }, void 0 !== e && (void 0 !== e.tag && (this.hT = e.tag), void 0 !== e.explicit && (this.isExplicit = e.explicit), void 0 !== e.obj && (this.asn1Object = e.obj, this.setASN1Object(this.isExplicit, this.hT, this.asn1Object))) }, n.lang.extend(oe.asn1.DERTaggedObject, oe.asn1.ASN1Object), ne = function re(e, t) { return (ne = Object.setPrototypeOf || ({ "__proto__": [] } instanceof Array ? function (e, t) { e.__proto__ = t } : function (e, t) { for (var A in t) Object.prototype.hasOwnProperty.call(t, A) && (e[A] = t[A]) }))(e, t) }; var ne, ae = function (e) { function t(A) { var r = e.call(this) || this; return A && ("string" == typeof A ? r.parseKey(A) : (t.hasPrivateKeyProperty(A) || t.hasPublicKeyProperty(A)) && r.parsePropertiesFrom(A)), r } var A = t, r = e; if ("function" != typeof r && null !== r) throw new TypeError("Class extends value " + String(r) + " is not a constructor or null"); function o() { this.constructor = A } return ne(A, r), A.prototype = null === r ? Object.create(r) : (o.prototype = r.prototype, new o), t.prototype.parseKey = function (e) { try { var t = 0, A = 0, r = /^\s*(?:[0-9A-Fa-f][0-9A-Fa-f]\s*)+$/.test(e) ? function (e) { if (void 0 === u) { var t = "0123456789ABCDEF", A = " \f\n\r\t \u2028\u2029"; for (u = {}, n = 0; n < 16; ++n)u[t.charAt(n)] = n; for (t = t.toLowerCase(), n = 10; n < 16; ++n)u[t.charAt(n)] = n; for (n = 0; n < A.length; ++n)u[A.charAt(n)] = -1 } for (var r = [], i = 0, o = 0, n = 0; n < e.length; ++n) { var s = e.charAt(n); if ("=" == s) break; if (-1 != (s = u[s])) { if (void 0 === s) throw new Error("Illegal character at offset " + n); i |= s, 2 <= ++o ? (r[r.length] = i, o = i = 0) : i <<= 4 } } if (o) throw new Error("Hex encoding incomplete: 4 bits missing"); return r }(e) : E.unarmor(e), i = Q.decode(r); if (9 === (i = 3 === i.sub.length ? i.sub[2].sub[0] : i).sub.length) { t = i.sub[1].getHexStringValue(), this.n = j(t, 16), A = i.sub[2].getHexStringValue(), this.e = parseInt(A, 16); var o = i.sub[3].getHexStringValue(), n = (this.d = j(o, 16), i.sub[4].getHexStringValue()), s = (this.p = j(n, 16), i.sub[5].getHexStringValue()), a = (this.q = j(s, 16), i.sub[6].getHexStringValue()), c = (this.dmp1 = j(a, 16), i.sub[7].getHexStringValue()), g = (this.dmq1 = j(c, 16), i.sub[8].getHexStringValue()); this.coeff = j(g, 16) } else { if (2 !== i.sub.length) return !1; var l = i.sub[1].sub[0]; t = l.sub[0].getHexStringValue(), this.n = j(t, 16), A = l.sub[1].getHexStringValue(), this.e = parseInt(A, 16) } return !0 } catch (e) { return !1 } }, t.prototype.getPrivateBaseKey = function () { var e = { "array": [new oe.asn1.DERInteger({ "int": 0 }), new oe.asn1.DERInteger({ "bigint": this.n }), new oe.asn1.DERInteger({ "int": this.e }), new oe.asn1.DERInteger({ "bigint": this.d }), new oe.asn1.DERInteger({ "bigint": this.p }), new oe.asn1.DERInteger({ "bigint": this.q }), new oe.asn1.DERInteger({ "bigint": this.dmp1 }), new oe.asn1.DERInteger({ "bigint": this.dmq1 }), new oe.asn1.DERInteger({ "bigint": this.coeff })] }; return new oe.asn1.DERSequence(e).getEncodedHex() }, t.prototype.getPrivateBaseKeyB64 = function () { return l(this.getPrivateBaseKey()) }, t.prototype.getPublicBaseKey = function () { var e = new oe.asn1.DERSequence({ "array": [new oe.asn1.DERObjectIdentifier({ "oid": "1.2.840.113549.1.1.1" }), new oe.asn1.DERNull] }), t = new oe.asn1.DERSequence({ "array": [new oe.asn1.DERInteger({ "bigint": this.n }), new oe.asn1.DERInteger({ "int": this.e })] }); return t = new oe.asn1.DERBitString({ "hex": "00" + t.getEncodedHex() }), new oe.asn1.DERSequence({ "array": [e, t] }).getEncodedHex() }, t.prototype.getPublicBaseKeyB64 = function () { return l(this.getPublicBaseKey()) }, t.wordwrap = function (e, t) { return e && (t = "(.{1," + (t = t || 64) + "})( +|$\n?)|(.{1," + t + "})", e.match(RegExp(t, "g")).join("\n")) }, t.prototype.getPrivateKey = function () { return "-----BEGIN RSA PRIVATE KEY-----\n" + t.wordwrap(this.getPrivateBaseKeyB64()) + "\n-----END RSA PRIVATE KEY-----" }, t.prototype.getPublicKey = function () { return "-----BEGIN PUBLIC KEY-----\n" + t.wordwrap(this.getPublicBaseKeyB64()) + "\n-----END PUBLIC KEY-----" }, t.hasPublicKeyProperty = function (e) { return (e = e || {}).hasOwnProperty("n") && e.hasOwnProperty("e") }, t.hasPrivateKeyProperty = function (e) { return (e = e || {}).hasOwnProperty("n") && e.hasOwnProperty("e") && e.hasOwnProperty("d") && e.hasOwnProperty("p") && e.hasOwnProperty("q") && e.hasOwnProperty("dmp1") && e.hasOwnProperty("dmq1") && e.hasOwnProperty("coeff") }, t.prototype.parsePropertiesFrom = function (e) { this.n = e.n, this.e = e.e, e.hasOwnProperty("d") && (this.d = e.d, this.p = e.p, this.q = e.q, this.dmp1 = e.dmp1, this.dmq1 = e.dmq1, this.coeff = e.coeff) }, t }(g); se.prototype.setKey = function (e) { this.log && this.key && console.warn("A key was already set, overriding existing."), this.key = new ae(e) }, se.prototype.setPrivateKey = function (e) { this.setKey(e) }, se.prototype.setPublicKey = function (e) { this.setKey(e) }, se.prototype.decrypt = function (e) { try { return this.getKey().decrypt(h(e)) } catch (e) { return !1 } }, se.prototype.encrypt = function (e) { try { return l(this.getKey().encrypt(e)) } catch (e) { return !1 } }, se.prototype.sign = function (e, t, A) { try { return l(this.getKey().sign(e, t, A)) } catch (e) { return !1 } }, se.prototype.verify = function (e, t, A) { try { return this.getKey().verify(e, h(t), A) } catch (e) { return !1 } }, se.prototype.getKey = function (e) { if (!this.key) { if (this.key = new ae, e && "[object Function]" === {}.toString.call(e)) return void this.key.generateAsync(this.default_key_size, this.default_public_exponent, e); this.key.generate(this.default_key_size, this.default_public_exponent) } return this.key }, se.prototype.getPrivateKey = function () { return this.getKey().getPrivateKey() }, se.prototype.getPrivateKeyB64 = function () { return this.getKey().getPrivateBaseKeyB64() }, se.prototype.getPublicKey = function () { return this.getKey().getPublicKey() }, se.prototype.getPublicKeyB64 = function () { return this.getKey().getPublicBaseKeyB64() }, se.version = "3.2.1"; var ce = se; function se(e) { this.default_key_size = (e = (e = void 0 === e ? {} : e) || {}).default_key_size ? parseInt(e.default_key_size, 10) : 1024, this.default_public_exponent = e.default_public_exponent || "010001", this.log = e.log || !1, this.key = null } }(0, Fe = {}, je), Fe.default), We = (Object.defineProperty(Ae.prototype, "publicKey", { "get": function get() { return "-----BEGIN PUBLIC KEY-----\n        MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAxtEM51skf+Bg29Mdb+WN\n        IkgbGDZ/wOP4MTntlut65WpPpXOkg2m9EKscmzfE6kUNLYnYV77fZGFSjr+Wkmoz\n        VK1lJ3seswBNyP6X5LUszkf1WoeEyBbfegTf3XkHEeWJ5BlD9syurlA2Fh+cTaNO\n        RNlAGBZO7SdgTHPYAcHu0fAnJZwCZ9+ZZkVnjyTBqQckovMttKqvtoUKcp7NgGve\n        w0OJxFKwIITu1keGdZ+yN9wBul4qJfTy8otOcwGL4bnoABMhCNvJc3xA70BuaaF0\n        fvhxA8diV/2W+qg+LAzdqajLaNciuDHIY5Y+z5kZI1eBa3J3aqUASse4YzzTYv48\n        7wIDAQAB\n        -----END PUBLIC KEY-----" }, "enumerable": !1, "configurable": !0 }), Ae.prototype.encrypt = function (e) { return e = H.a.encrypt(this.uint8Array2WordArray(e), this.key2, { "iv": this.iv2 }).toString(), qe.a.toByteArray(e) }, Ae.prototype.decrypt = function (e) { return this.wordArray2Uint8Array(H.a.decrypt(qe.a.fromByteArray(e), this.key2, { "iv": this.iv2 })) }, Ae.prototype.generateK1Sign = function () { var e = this.generateNonce(), t = ((this.key1 = x.a.parse(e), this.iv1 = Je.a.parse(Ze()(e).toString().toLowerCase()), t = new ze).setPublicKey(this.publicKey), t.getKey().encrypt(e)); return this.wordArray2Uint8Array(Je.a.parse(t)) }, Ae.prototype.decryptK2Sign = function (e) { try { this.key2 = H.a.decrypt(qe.a.fromByteArray(e), this.key1, { "iv": this.iv1 }), this.iv2 = Ze()(this.key2) } catch (e) { } }, Ae.prototype.generateNonce = function () { var e = Math.random().toString().substr(2, 16); return e.length < 16 && (e += e.substr(0, 16 - e.length)), e }, Ae.prototype.md5 = function (e) { return Ze()(e).toString() }, Ae.prototype.md5Bytes = function (e) { return this.wordArray2Uint8Array(Ze()(this.uint8Array2WordArray(e))) }, Ae.prototype.wordArray2Uint8Array = function (e) { for (var t = e.words, A = e.sigBytes, r = new Uint8Array(A), i = 0; i < A; i++) { var o = t[i >>> 2] >>> 24 - i % 4 * 8 & 255; r[i] = o } return r }, Ae.prototype.uint8Array2WordArray = function (e) { for (var t = e.length, A = [], r = 0; r < t; r++)A[r >>> 2] |= (255 & e[r]) << 24 - r % 4 * 8; return Ke.a.create(A, t) }, Ae); function Ae() { } function De(e) { return Uint8Array.from(Array.from(unescape(encodeURIComponent(e))).map(function (e) { return e.charCodeAt(0) })) } function He(e) { return decodeURIComponent(escape(String.fromCharCode.apply(String, Array.from(e)))) } var Xe = { "/lr/login_room_rsp": "LoginRoomRsp", "/lr/logout_room_rsp": "LogoutRoomRsp", "/sw/push_kickout": "PushKickout", "/sw/push": "PushReq", "/sw/merge_push": "CmdMergePushReq", "/lr/room/hb_rsp": "HbRsp", "/lr/userlist/userlist_rsp": "UserlistRsp", "/lr/stream/add_rsp": "StreamAddRsp", "/lr/stream/delete_rsp": "StreamDeleteRsp", "/lr/stream/update_rsp": "StreamUpdateRsp", "/lr/stream/list_rsp": "StreamListRsp", "/lr/push/stream_add": "PushStream", "/lr/push/stream_delete": "PushStream", "/lr/push/stream_update": "PushStream", "/lr/signal/liverequest_rsp": "SignalLiveRsp", "/lr/signal/liverresult_rsp": "SignalLiveResulRsp", "/lr/signal/liveinvite_rsp": "SignalLiveInviteRsp", "/lr/signal/livestop_rsp": "SignalLiveStopRsp", "/lr/signal/livescustom_rsp": "SignalLiveCustomRsp", "/lr/im/chat_rsp": "ImChatRsp", "/lr/room/enter_rsp": "EnterRsp", "/lr/room/quit_rsp": "QuitRsp", "/lr/trans/trans_rsp": "TransRsp", "/lr/trans/transfetch_rsp": "TransFetchRsp", "/lr/bigim/chat_rsp": "BigimChatRsp", "/lr/relay_rsp": "RelayRsp", "/lr/token/renew_token_rsp": "RenewTokenRsp", "/lr/push/user_updated": "PushUserInfoUpdated", "/lr/push/user_token_expire": "PushUserTokenExpire", "/lr/push/im_chat": "PushImChat", "/lr/push/bigim_chat": "PushBigImChat", "/lr/push/trans": "PushTrans", "/lr/push/user_kickout": "PushUserKickout", "/lr/push/user_logreport": "PushUserLogReport", "/lr/push/usertrans": "PushUserTrans" }, $e = (Fe = s(1), s.n(Fe)), tt = function xe() { return (tt = Object.assign || function (e) { for (var t, A = 1, r = arguments.length; A < r; A++)for (var i in t = arguments[A]) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]); return e }).apply(this, arguments) }; r.util.Long = $e.a, r.configure(); var At, rt = ((Fe = At = At || {})[Fe.disconnected = 0] = "disconnected", Fe[Fe.broken = 1] = "broken", Fe[Fe.connected = 2] = "connected", Object.defineProperty(Ge.prototype, "nickName", { "get": function get() { return De(this.stateCenter.nickName) }, "enumerable": !1, "configurable": !0 }), Ge.prototype.isDisConnect = function () { return this.state !== At.connected }, Ge.prototype.getHeader = function (e) { e = { "cmd": e, "seq": ++this.seq, "timestamp": (new Date).getTime(), "session_id": this.switchSessionID, "controls": this.controls, "flags": this.flags }; var t = Pe.proto_switch.Header.create(e); return t = Pe.proto_switch.Header.encode(t).finish(), [e.seq, t] }, Ge.prototype.isUaConnect = function () { return this.ua.isConnect() }, Ge.prototype.sendMessage = function (e, t, A, r, i, o, n) { var s, a, c, g = this; return void 0 === i && (i = { "timeout": 6e3 }), void 0 === o && (o = !0), this.logger.info(z.LIVEROOMHANDLER_SENDMESSAGE + " call"), "/lr/login_room" !== e && this.state !== At.connected ? (this.logger.warn(z.LIVEROOMHANDLER_SENDMESSAGE + " state " + this.state), -1) : (a = (s = this.getHeader(e))[1], c = t, !this.unEncryptCmdList.includes(e) && this.isEncrypt && (c = this.crypto.encrypt(t)), t = this.getHead(a.length, c.length), t = new Uint8Array(Array.from(t).concat(Array.from(a)).concat(Array.from(c))), o && (a = { "seq": this.seq, "deleted": !1, "sendTime": Date.parse(new Date + ""), "timeout": i.timeout, "success": A, "error": function error(e, t, A) { var i; if (g.logger.info(z.LIVEROOMHANDLER_SENDMESSAGE + " seq: " + t + " " + JSON.stringify(e) + " " + JSON.stringify(A)), "/lr/login_room_rsp" !== (null == (i = null == e ? void 0 : e.header) ? void 0 : i.cmd) && -1 < [1002, 105].indexOf(null == (i = null == e ? void 0 : e.body) ? void 0 : i.err_code)) return null != A && A.roomID ? (i = g.stateCenter.roomModulesList.find(function (e) { return e.roomID == A.roomID })) ? void i.retryRoom() : void g.logger.error(z.LIVEROOMHANDLER_SENDMESSAGE + " room no found ignore ") : void g.rtm.retryRoom();[207, 208].indexOf(null == (i = null == e ? void 0 : e.body) ? void 0 : i.err_code), r && r(e, t) }, "params": n }, c = this.sendCommandList.push(a), this.sendCommandMap[a.seq] = c), this.logger.info(z.LIVEROOMHANDLER_SENDMESSAGE + " seq: " + s[0] + " cmd: " + e), null != (o = this.liveroomRequest) && o.sendRequest({ "payload": t, "ack": "/lr/login_room" === e }, function (e) { g.logger.info(z.LIVEROOMHANDLER_SENDMESSAGE + " fail") }, function () { g.logger.info(z.LIVEROOMHANDLER_SENDMESSAGE + " ack") }), s[0]) }, Ge.prototype.getHead = function (e, t) { var A = new Uint8Array(7); return A[0] = 33, A[1] = e >> 8, A[2] = e - (A[1] << 8), A.set(new Uint8Array(Int32Array.from([t]).buffer).reverse(), 3), A }, Ge.prototype.handlePush = function (e, t) { if (void 0 === t && (t = !1), 33 === (A = e[0])) { var A = (e[1] << 8) + e[2], r = Pe.proto_switch.Header.decode(e.slice(7, 7 + A)), i = A = e.slice(7 + A); if (!this.unEncryptCmdList.includes(r.cmd) && this.isEncrypt) { if (!this.hasCryptSign) return this.logger.warn(z.LIVEROOMHANDLER_HANDLEPUSH + " decrypt early " + r.cmd), void this.waitDecryptCmdList.push(e); try { i = this.crypto.decrypt(A) } catch (e) { this.logger.warn(z.LIVEROOMHANDLER_HANDLEPUSH + " decrypt fail " + r.cmd) } } if (Xe[r.cmd]) { if (e = this.decodeResponseBody(r, i), this.swPushCmdList.includes(r.cmd)) return t && "/lr/push/user_updated" === (null == (A = null == e ? void 0 : e.head) ? void 0 : A.sub_cmd) ? void this.logger.info(z.LIVEROOMHANDLER_HANDLEPUSH + " ignore user updated") : void this.handleSwitchPush(r, e); this.logger.info(z.LIVEROOMHANDLER_HANDLEPUSH + " down " + r.cmd + " " + JSON.stringify(this.transBuf(e))), t = { "header": this.transHeader(r), "body": this.transRsp(e) }, this.handleSendCommandMsgRsp(t) } else this.logger.info(z.LIVEROOMHANDLER_HANDLEPUSH + " cmd is not rtc"), this.onSwitchMessage(r, i) } }, Ge.prototype.handleSwitchPush = function (e, t) { if ("/sw/push" === e.cmd) { var A = (s = this.transRsp(t.head)).room_id; if (this.stateCenter.roomModulesList.find(function (e) { return e.roomID == A })) { var r = void 0, i = { "header": s, "body": r = this.unStructCmdList.includes(t.head.sub_cmd) ? { "signal_msg": He(t.msg_body), "sub_cmd": this.joinLiveMap[t.head.sub_cmd] } : "/lr/push/signal_custom" === t.head.sub_cmd ? { "custommsg": He(t.msg_body) } : Xe[t.head.sub_cmd] ? this.transRsp(this.decode(Pe.liveroom_cs[Xe[t.head.sub_cmd]], t.msg_body)) : {} }; if (this.logger.info(z.LIVEROOMHANDLER_HANDLESWITCHPUSH + " push " + JSON.stringify(this.transBuf(i))), this.whiteboardPushCmdList.includes(t.head.sub_cmd)) this.logger.info(z.LIVEROOMHANDLER_HANDLESWITCHPUSH + " white "), this.onSwitchMessage(e, t); else switch (t.head.sub_cmd) { case "/lr/push/user_updated": this.handlePushUserStateUpdateMsg(i); break; case "/lr/push/user_kickout": this.handlePushKickout(i, !1); break; case "/lr/push/trans": this.handlePushTransMsg(i); break; case "/lr/push/im_chat": this.handlePushRoomMsg(i); break; case "/lr/push/signal_custom": this.handlePushCustomMsg(i); break; case "/lr/push/stream_add": case "/lr/push/stream_delete": case "/lr/push/stream_update": this.handlePushStreamMsg(i); break; case "/lr/push/joinlive_request": case "/lr/push/joinlive_result": case "/lr/push/joinlive_invite": case "/lr/push/joinlive_stop": this.handlePushSignalMsg(i); break; case "/lr/push/user_token_expire": this.handlePushTokenExpire(i) }1 == t.head.qos_flag && (a = { "code": 0, "message": "", "sub_cmd": t.head.sub_cmd, "msg_id": t.head.msg_id, "server_send_time": t.head.send_time }, c = Pe.proto_switch.PushRsp.create(a), g = Pe.proto_switch.PushRsp.encode(c).finish(), this.sendMessage("/sw/push_rsp", g, void 0, void 0)) } else this.logger.warn(z.LIVEROOMHANDLER_HANDLESWITCHPUSH + " room no found ignore ") } else { var o, n, s, a, c, g; "/sw/merge_push" === e.cmd ? (o = (s = this.transRsp(t.head)).room_id, this.stateCenter.roomModulesList.find(function (e) { return e.roomID == o }) ? (n = [], t.messages.forEach(function (e) { var t; n.push({ "sub_cmd": e.sub_cmd, "sub_seq": e.sub_seq, "msg_id": e.msg_id }), "/lr/push/bigim_chat" === e.sub_cmd && (t = Pe.liveroom_cs.PushBigImChat.decode(e.msg_body), e.msg_body = t) }), delete (s = { "header": (r = this.transRsp(t)).head, "body": r }).body.head, this.handlePushMergeMsg(s), 1 == t.head.qos_flag && (c = Pe.proto_switch.CmdMergePushRsp.create(a = { "messages": n }), g = Pe.proto_switch.CmdMergePushRsp.encode(c).finish(), this.sendMessage("/sw/merge_push_rsp", g, void 0, void 0))) : this.logger.warn(z.LIVEROOMHANDLER_HANDLESWITCHPUSH + " room no found ignore ")) : "/sw/push_kickout" === e.cmd && (r = { "reason": 900 < t.reason ? t.reason - 900 : t.reason, "msg": t.message, "need_relogin": void 0 !== t.need_relogin ? t.need_relogin : 0 }, this.handlePushKickout({ "header": e, "body": r }, !0)) } }, Ge.prototype.handlePushTokenExpire = function (e) { }, Ge.prototype.handlePushKickout = function (e, t) { }, Ge.prototype.handlePushStreamMsg = function (e) { }, Ge.prototype.handlePushSignalMsg = function (e) { }, Ge.prototype.handlePushMergeMsg = function (e) { }, Ge.prototype.handlePushCustomMsg = function (e) { }, Ge.prototype.handlePushRoomMsg = function (e) { }, Ge.prototype.handlePushTransMsg = function (e) { }, Ge.prototype.onSwitchMessage = function (e, t) { }, Ge.prototype.decodeResponseBody = function (e, t) { var A = this.onSwitchCmdList.includes(e.cmd) ? "proto_switch" : "liveroom_cs"; return this.decode(this.protoInstance[A][Xe[e.cmd]], t) }, Ge.prototype.handleWaitDecryptCmdList = function () { var e = this; this.waitDecryptCmdList.forEach(function (t) { e.handlePush(t, !0) }), this.waitDecryptCmdList = [] }, Ge.prototype.handlePushUserStateUpdateMsg = function (e) { }, Ge.prototype.login = function (e, t, A) { var r, i, o, n, s = this, a = (this.state == At.disconnected && (this.logger.info(z.LIVEROOMHANDLER_LOGIN + " state disconnect"), this.closeRequest()), (new Date).getTime() + ""); e.isMulti ? (o = { "req_head": this.getReqHead(e), "switch_session_id": this.switchSessionID, "nick_name": this.nickName, "role": this.stateCenter.role, "net_type": V.getNetTypeNum(), "config": { "room_create_flag": this.stateCenter.roomCreateFlag, "user_state_flag": this.stateCenter.userStateUpdate ? 1 : 0 }, "lv_key": e.lvKey, "third_token": De(e.token), "user_count_limit": e.maxMemberCount, "relate_service": this.stateCenter.relateService.join() || "", "conn_type": 2, "room_name": De(e.roomName) }, i = tt(tt({}, o), { "room_name": e.roomName, "third_token": e.token }), this.logger.info(z.LIVEROOMHANDLER_LOGIN + " enter " + JSON.stringify(i)), o = Pe.liveroom_cs.EnterReq.create(o), n = Pe.liveroom_cs.EnterReq.encode(o).finish(), this.sendMessage("/lr/room/enter", n, function (e, A) { s.longToStringNumber(e.body, ["user_session_id", "room_session_id", "ret_timestamp"], "toString"), s.transKeysName(e.body, [["user_session_id", "session_id"], ["hb_interval", "hearbeat_interval"]]), s.keysExist(e.body, ["token_remain_time", "stream_seq"]), t && t(e, A) }, function (e, t) { A && A(e, t) }, void 0, void 0, { "roomID": e.roomID })) : (r = { "app_id": this.stateCenter.appid, "id_name": De(this.stateCenter.idName), "device_id": this.stateCenter.deviceID, "term_type": this.stateCenter.ENV % 2 == 0 ? c.TT_WEB : c.TT_MINIPROGRAM, "net_type": V.getNetTypeNum(), "sdk_ver": parseInt(this.rtm.version.replace(/\./g, "")), "proto_ver": 131072, "nick_name": this.nickName, "client_stamp": De(a), "crypt_version": 1, "k1_sign": this.crypto.generateK1Sign(), "relogin_token": this.switchSessionID.notEquals($e.a.fromInt(0)) ? De(this.reloginToken) : "", "role": this.stateCenter.role, "liveroom_session_id": $e.a.fromString(e.sessionID), "room_id": De(e.roomID), "room_name": De(e.roomName), "biz_type": 0, "room_create_flag": this.stateCenter.roomCreateFlag, "user_state_flag": this.stateCenter.userStateUpdate ? 1 : 0, "lv_key": e.lvKey, "third_token": De(e.token), "user_count_limit": e.maxMemberCount, "relate_service": this.stateCenter.relateService.join() || "", "biz_version": this.stateCenter.bizVersion || "", "login_logic": this.stateCenter.isMultiRoom ? 3 : 1, "sdk_conn_type": 2 }, i = tt(tt({}, r), { "id_name": this.stateCenter.idName, "nick_name": this.stateCenter.nickName, "client_stamp": a, "k1_sign": void 0, "relogin_token": this.reloginToken, "liveroom_session_id": e.sessionID, "room_id": e.roomID, "room_name": e.roomName, "third_token": e.token }), this.logoutCheckToken = e.token, this.logger.info(z.LIVEROOMHANDLER_LOGIN + " login " + JSON.stringify(i)), this.k1SignLogoutBuffer = this.crypto.md5Bytes(r.k1_sign), o = Pe.proto_switch.LoginRoomReq.create(r), n = Pe.proto_switch.LoginRoomReq.encode(o).finish(), this.sendMessage("/lr/login_room", n, function (e, A) { s.switchSessionID = e.header.session_id, s.reloginToken = e.body.relogin_token, s.logger.info(z.LIVEROOMHANDLER_LOGIN + " login rsp"), s.crypto.decryptK2Sign(e.body.k2_sign), 1 === e.body.crypt_option ? s.isEncrypt = !1 : void 0 === e.body.crypt_option && (s.isEncrypt = !0), s.hasCryptSign = !0, s.waitDecryptTimer = setTimeout(function () { s.handleWaitDecryptCmdList() }, 0), s.longToStringNumber(e.body, ["liveroom_session_id", "room_session_id", "ret_timestamp"], "toString"), delete e.body.heartbeat_interval, delete e.body.heartbeat_timeout, s.transKeysName(e.body, [["liveroom_session_id", "session_id"], ["liveroom_hb_interval", "hearbeat_interval"]]), s.keysExist(e.body, ["token_remain_time", "stream_seq"]), t && t(e, A) }, function (e, t) { A && A(e, t) })) }, Ge.prototype.transKeysName = function (e, t) { t.forEach(function (t) { e[t[1]] = e[t[0]], delete e[t[0]] }) }, Ge.prototype.keysExist = function (e, t) { t.forEach(function (t) { void 0 === e[t] && (e[t] = 0) }) }, Ge.prototype.longToStringNumber = function (e, t, A) { t.forEach(function (t) { $e.a.isLong(e[t]) && (e[t] = e[t][A]()) }) }, Ge.prototype.logout = function (e, t, A) { var r, i, o, n; return e.isMulti ? (r = { "req_head": this.getReqHead(e), "switch_session_id": this.switchSessionID, "nick_name": this.nickName, "role": this.stateCenter.role, "config_list": { "room_create_flag": this.stateCenter.roomCreateFlag, "user_state_flag": this.stateCenter.userStateUpdate ? 1 : 0 } }, i = this.transBuf(r), this.logger.info(z.LIVEROOMHANDLER_LOGOUT + " quit " + JSON.stringify(i)), o = Pe.liveroom_cs.QuitReq.create(r), n = Pe.liveroom_cs.QuitReq.encode(o).finish(), this.sendMessage("/lr/room/quit", n, t, A)) : (r = { "logout_code": 0, "logout_check": this.crypto.md5Bytes(De(this.logoutCheckToken)), "liveroom_session_id": $e.a.fromString(e.sessionID), "room_id": De(e.roomID), "role": this.stateCenter.role, "nickname": this.nickName, "logout_logic": this.stateCenter.isMultiRoom ? 3 : 1 }, this.logoutCheckToken = "", i = this.transBuf(r), this.logger.info(z.LIVEROOMHANDLER_LOGOUT + " logout " + JSON.stringify(i)), o = Pe.proto_switch.LogoutRoomReq.create(r), n = Pe.proto_switch.LogoutRoomReq.encode(o).finish(), this.sendMessage("/lr/logout_room", n, t, A)) }, Ge.prototype.checkSendMessageList = function (e) { for (var t = e.getFirst(); null != t;)e.remove(t), t._data && t._data.error && setTimeout(function () { t && t._data && t._data.error && t._data.error(G.TIMEOUT, t._data.seq) }, 0), t = e.getFirst() }, Ge.prototype.checkMessageListTimeout = function (e, t) { for (var A = e.getFirst(), r = Date.parse(new Date + ""), i = 0, o = this; null != A && "break" !== function () { var n, s; return A._data && A._data.sendTime + A._data.timeout > r || (A._data && delete t[A._data.seq], e.remove(A), A._data && null == A._data.error || A._data && A._data.sendTime + o.sendDataDropTimeout < r || (n = A && A._data && A._data.error, s = A && A._data && A._data.seq, setTimeout(function () { n && n(G.TIMEOUT, s) }, 0)), ++i >= o.sendDataCheckOnceCount) ? "break" : void (A = e.getFirst()) }();); }, Ge.prototype.startCheck = function () { var e = this; this.checkMessageListTimeout(this.sendCommandList, this.sendCommandMap), this.sendDataCheckTimer = setTimeout(function () { e.startCheck() }, this.sendDataCheckInterval) }, Ge.prototype.stopCheck = function () { this.checkSendMessageList(this.sendCommandList), clearTimeout(this.sendDataCheckTimer) }, Ge.prototype.handleSendCommandMsgRsp = function (e) { var t, A, r = this.sendCommandMap[e.header.seq]; null != r && (t = r._data, A = null == t ? void 0 : t.params, delete this.sendCommandMap[e.header.seq], this.sendCommandList.remove(r), 0 === e.body.err_code ? setTimeout(function () { t && null != t.success && t.success(e, e.header.seq) }, 0) : setTimeout(function () { t && null != t.error && t.error(e, e.header.seq, A) }, 0)) }, Ge.prototype.getReqHead = function (e) { return { "room_id": e.roomID, "user_session_id": $e.a.fromString(e.sessionID), "room_session_id": $e.a.fromString(e.roomSessionID) } }, Ge.prototype.heartBeat = function (e, t, A) { var r = this; A = { "req_head": this.getReqHead(A), "role": this.stateCenter.role, "lv_key": A.lvKey }, A = Pe.liveroom_cs.HbReq.create(A), A = Pe.liveroom_cs.HbReq.encode(A).finish(), this.sendMessage("/lr/room/hb", A, function (t, A) { r.transKeysName(t.body, [["hb_interval", "hearbeat_interval"], ["hb_timeout", "hearbeat_timeout"]]), t.body.server_user_seq = t.body.user_seq.toNumber(), r.longToStringNumber(t.body, ["dati_time_window"], "toNumber"), e && e(t, A) }, t) }, Ge.prototype.fetchUserList = function (e, t, A, r) { var i = this; return r = this.getReqHead(r), r = tt({ "req_head": r }, e), e = this.transBuf(r), this.logger.info(z.LIVEROOMHANDLER_FETCH_USER_LIST + " " + JSON.stringify(e)), e = Pe.liveroom_cs.UserlistReq.create(r), r = Pe.liveroom_cs.UserlistReq.encode(e).finish(), this.sendMessage("/lr/userlist/userlist", r, function (e, A) { i.logger.info(z.LIVEROOMHANDLER_FETCH_USER_LIST + " suc " + A), i.transKeysName(e.body, [["user_basic_list", "user_baseinfos"]]), i.longToStringNumber(e.body, ["server_user_seq", "server_user_index", "ret_user_index"], "toNumber"), t && t(e, A) }, A) }, Ge.prototype.sendRoomMsg = function (e, t, A, r) { var i = this; return r = { "req_head": this.getReqHead(r), "msg_category": e.msg_category, "msg_priority": e.msg_priority, "msg_type": e.msg_type, "msg_content": De(e.msg_content) }, e = this.transBuf(r), this.logger.info(z.LIVEROOMHANDLER_SENDROOMMSG + " " + JSON.stringify(e)), e = Pe.liveroom_cs.ImChatReq.create(r), r = Pe.liveroom_cs.ImChatReq.encode(e).finish(), this.sendMessage("/lr/im/chat", r, function (e, A) { i.longToStringNumber(e.body, ["msg_id"], "toNumber"), t && t(e, A) }, A) }, Ge.prototype.sendReliableMessage = function (e, t, A, r) { return r = { "req_head": this.getReqHead(r), "role": this.stateCenter.role, "nick_name": this.nickName, "trans_type": De(e.trans_type), "trans_data": De(e.trans_data), "trans_local_seq": e.trans_local_seq, "trans_channel": De(e.trans_channel) }, e = this.transBuf(r), this.logger.info(z.LIVEROOMHANDLER_SENDRELIABLEMESSAGE + " " + JSON.stringify(e)), e = Pe.liveroom_cs.TransReq.create(r), r = Pe.liveroom_cs.TransReq.encode(e).finish(), this.sendMessage("/lr/trans/trans", r, t, A) }, Ge.prototype.fetchReliableMessage = function (e, t, A, r) { r = this.getReqHead(r); var i = e.fetch_array.map(function (e) { return { "trans_type": De(e.trans_type), "trans_local_seq": e.trans_seq } }); return r = { "req_head": r, "trans_channel": De(e.trans_channel), "fetch_array": i }, e = this.transBuf(r), this.logger.info(z.LIVEROOMHANDLER_FETCHRELIABLEMESSAGE + " " + JSON.stringify(e)), i = Pe.liveroom_cs.TransFetchReq.create(r), e = Pe.liveroom_cs.TransFetchReq.encode(i).finish(), this.sendMessage("/lr/trans/transfetch", e, t, A) }, Ge.prototype.sendCustomCommand = function (e, t, A, r) { var i = this, o = (r = this.getReqHead(r), e.dest_id_name.map(function (e) { return { "id_name": De(e) } })); return r = tt({ "req_head": r, "dst_userlist": o, "push_message": De(e.custom_msg) }, e), o = this.transBuf(r), this.logger.info(z.LIVEROOMHANDLER_SENDCUSTOMCOMMAND + " " + JSON.stringify(o)), e = Pe.liveroom_cs.SignalLiveReq.create(r), o = Pe.liveroom_cs.SignalLiveReq.encode(e).finish(), this.sendMessage("/lr/signal/livescustom", o, function (e, A) { t && t(i.transRsp(e), A) }, function (e, t) { A && A(e, t) }) }, Ge.prototype.sendBigRoomMessage = function (e, t, A, r) { return r = this.getReqHead(r), e = e.msgs.map(function (e) { return { "msg_category": e.msg_category, "msg_type": e.msg_type, "msg_timestamp": $e.a.fromNumber(Date.now()), "msg_content": De(e.msg_content), "bigmsg_client_id": De(e.bigmsg_client_id) } }), r = { "req_head": r, "nick_name": this.nickName, "role": this.stateCenter.role, "msgs": e }, e = this.transBuf(r), this.logger.info(z.LIVEROOMHANDLER_SENDBIGROOMMESSAGE + " " + JSON.stringify(e)), e = Pe.liveroom_cs.BigimChatReq.create(r), r = Pe.liveroom_cs.BigimChatReq.encode(e).finish(), this.sendMessage("/lr/bigim/chat", r, t, A) }, Ge.prototype.sendRelayMessage = function (e, t, A, r) { return r = { "req_head": this.getReqHead(r), "nick_name": this.nickName, "role": this.stateCenter.role, "relay_type": De(e.relay_type), "relay_data": De(e.relay_data) }, e = Pe.liveroom_cs.RelayReq.create(r), r = Pe.liveroom_cs.RelayReq.encode(e).finish(), this.sendMessage("/lr/relay", r, t, A) }, Ge.prototype.sendSignalCmd = function (e, t, A, r) { var i = "", o = ""; switch (e.sub_cmd) { case 1003: i = "/lr/signal/liveinvite", o = "SignalLiveInviteReq"; break; case 1001: i = "/lr/signal/liverequest", o = "SignalLiveReq"; break; case 1002: i = "/lr/signal/liverresult", o = "SignalLiveResultReq"; break; case 1004: i = "/lr/signal/livestop", o = "SignalLiveStopReq" }r = this.getReqHead(r); var n = e.dest_id_name.map(function (e) { return { "id_name": De(e) } }); return r = { "req_head": r, "push_message": De(e.signal_msg), "dst_userlist": n }, e = this.transBuf(r), this.logger.info(z.LIVEROOMHANDLER_SENDSIGNALCMD + " " + JSON.stringify(e)), n = Pe.liveroom_cs[o].create(r), e = Pe.liveroom_cs[o].encode(n).finish(), Pe.liveroom_cs[o].decode(e), this.sendMessage(i, e, t, A) }, Ge.prototype.sendStreamUpdate = function (e, t, A, r) { var i, o = this; try { i = JSON.parse(e.stream_msg) } catch (e) { } var n, s, a = "", c = (this.logger.info(z.LIVEROOMHANDLER_SENDSTREAMUPDATE + " " + JSON.stringify(e)), this.stateCenter.roomModulesList.find(function (e) { return e.roomID == r.roomID })); if (!c) return this.logger.error(z.LIVEROOMHANDLER_SENDSTREAMUPDATE + " room no found ignore "), -1; switch (e.sub_cmd) { case 2001: a = "/lr/stream/add", n = "StreamAddReq", s = { "req_head": this.getReqHead(c), "stream_id": De(i.stream_id), "extra_info": De(i.extra_info), "client_req_seq": this.seq + 1, "login_mode": 1, "third_token": De(e.third_token || "") }; break; case 2002: a = "/lr/stream/delete", n = "StreamDeleteReq", s = { "req_head": this.getReqHead(c), "stream_id": De(i.stream_id), "stream_sid": i.stream_sid, "client_req_seq": this.seq + 1 }; break; case 2003: a = "/lr/stream/update", n = "StreamUpdateReq", s = { "req_head": this.getReqHead(c), "stream_id": De(i.stream_id), "stream_sid": i.stream_sid, "client_req_seq": this.seq + 1, "extra_info": De(i.extra_info) } }var g = this.transBuf(s); return this.logger.info(z.LIVEROOMHANDLER_SENDSTREAMUPDATE + " " + JSON.stringify(g)), g = Pe.liveroom_cs[n].create(s), g = Pe.liveroom_cs[n].encode(g).finish(), this.sendMessage(a, g, function (e, A) { o.logger.info(z.LIVEROOMHANDLER_SENDSTREAMUPDATE + " suc " + a + " " + JSON.stringify(e)), e.header.room_id = c.roomID, t && t(e, A) }, function (e, t) { o.logger.info(z.LIVEROOMHANDLER_SENDSTREAMUPDATE + " fail " + a + " " + JSON.stringify(e)), A && A(e, t) }) }, Ge.prototype.getStreamList = function (e, t, A, r) { var i, o = this.stateCenter.roomModulesList.find(function (e) { return e.roomID == r.roomID }); o ? (o = { "req_head": this.getReqHead(o) }, i = this.transBuf(o), this.logger.info(z.LIVEROOMHANDLER_GETSTREAMLIST + " " + JSON.stringify(i)), i = Pe.liveroom_cs.StreamListReq.create(o), o = Pe.liveroom_cs.StreamListReq.encode(i).finish(), this.sendMessage("/lr/stream/list", o, function (e, A) { var r; null != (r = e.body) && r.stream_info.forEach(function (e) { e.create_time = e.create_time.toNumber() }), t && t(e, A) }, function (e, t) { A && A(e, t) })) : this.logger.error(z.LIVEROOMHANDLER_GETSTREAMLIST + " room no found ignore " + r.roomID) }, Ge.prototype.transBuf = function (e) { var t = this, A = {}; return Object.keys(e).forEach(function (r) { ["logout_check", "k2_sign", "k1_sign"].includes(r) ? A[r] = e[r] : t.transReqBytes(A, e, r) }), A }, Ge.prototype.transReqBytes = function (e, t, A) { var r = this; if ($e.a.isLong(t[A])) e[A] = t[A].toString(); else if ("[object Object]" === Object.prototype.toString.call(t[A])) e[A] = {}, Object.keys(t[A]).forEach(function (i) { return r.transReqBytes(e[A], t[A], i) }); else if ("[object Array]" === Object.prototype.toString.call(t[A]) && "[object Object]" === Object.prototype.toString.call(t[A][0])) { e[A] = []; for (var i = 0; i < t[A].length; i++)!function (i) { var o = {}; Object.keys(t[A][i]).forEach(function (e) { r.transReqBytes(o, t[A][i], e) }), e[A].push(o) }(i) } else "[object Uint8Array]" === Object.prototype.toString.call(t[A]) ? e[A] = He(t[A]) : e[A] = t[A] }, Ge.prototype.transHeader = function (e) { return e.timestamp = $e.a.isLong(e.timestamp) ? e.timestamp.toString() : e.timestamp, e }, Ge.prototype.transRsp = function (e) { var t = this, A = e && e.rsp_head ? this.transRspHead(e.rsp_head) : {}, r = tt(tt({}, e), A), i = (delete r.rsp_head, {}); return Object.keys(r).forEach(function (e) { "k2_sign" === e ? i[e] = r[e] : t.transBytes(i, r, e) }), i }, Ge.prototype.transBytes = function (e, t, A) { var r = this; if ($e.a.isLong(t[A])) e[A] = t[A]; else if ("[object Object]" === Object.prototype.toString.call(t[A])) e[A] = {}, Object.keys(t[A]).forEach(function (i) { return r.transBytes(e[A], t[A], i) }); else if ("[object Array]" === Object.prototype.toString.call(t[A]) && "[object Object]" === Object.prototype.toString.call(t[A][0])) { e[A] = []; for (var i = 0; i < t[A].length; i++)!function (i) { var o = {}; Object.keys(t[A][i]).forEach(function (e) { r.transBytes(o, t[A][i], e) }), e[A].push(o) }(i) } else "[object Uint8Array]" === Object.prototype.toString.call(t[A]) ? e[A] = He(t[A]) : e[A] = t[A] }, Ge.prototype.transRspHead = function (e) { return e ? { "err_code": e.code || 0, "err_message": e.message } : {} }, Ge.prototype.decode = function (e, t) { return tt({}, e.decode(t)) }, Ge.prototype.handleDisconnected = function (e, t) { var A = this; this.logger.info(z.LIVEROOMHANDLER_HANDLEDISCONNECTED + " call"), this.state = At.disconnected, this.resetWaitCmd(), this.stateCenter.useNetAgent && e === k.TIMEOUT && this.stateCenter.roomModulesList.forEach(function (e) { e.roomTryHandler && (A.ua.isConnect() ? (A.logger.info(z.LIVEROOMHANDLER_HANDLEDISCONNECTED + " ua is connect"), e.roomTryHandler.active()) : (A.logger.info(z.LIVEROOMHANDLER_HANDLEDISCONNECTED + " ua is disconnect"), A.ua.connectUa())) }) }, Ge.prototype.handleBroken = function () { this.logger.info(z.LIVEROOMHANDLER_HANDLEBROKEN + " call"), this.state = At.broken, this.stateCenter.useNetAgent && this.stateCenter.roomModulesList.forEach(function (e) { e.roomTryHandler && (e.roomTryHandler.invalid(), e.roomTryHandler.onactive = function (t, A) { e.roomHandler.disconnectedHandle(A) }, e.roomTryHandler.startMaxTime(), e.roomHandler.roomStateHandle("CONNECTING", O.Reconnecting, G.NETWORK_BROKEN)) }) }, Ge.prototype.handleConnected = function (e) { var t = this; this.logger.info(z.LIVEROOMHANDLER_HANDLECONNECTED + " call " + e), this.state = At.connected, this.hasCryptSign = !1, this.resetWaitCmd(), this.stateCenter.useNetAgent && (e === R.AUTO ? this.stateCenter.roomModulesList.forEach(function (e) { e.roomTryHandler && t.ua.isConnect() && e.roomTryHandler.active() }) : this.stateCenter.roomModulesList.forEach(function (e) { e.roomTryHandler && (e.roomTryHandler.stopMaxTime(), e.roomTryHandler.invalid()) })) }, Ge.prototype.resetWaitCmd = function () { this.waitDecryptCmdList = [], clearTimeout(this.waitDecryptTimer), this.waitDecryptTimer = null }, Ge.prototype.renewToken = function (e, t, A, r) { var i = this; r = { "req_head": this.getReqHead(r), "token": e.token }, e = Pe.liveroom_cs.RenewTokenReq.create(r), e = Pe.liveroom_cs.RenewTokenReq.encode(e).finish(), r = this.transBuf(r), this.logger.info(z.LIVEROOMHANDLER_RENEW_TOKEN + " " + JSON.stringify(r)), this.sendMessage("/lr/token/renew_token", e, function (e, A) { i.keysExist(e.body, ["token_remain_time"]), t && t(e, A) }, A) }, Ge.prototype.reset = function () { this.logger.info(z.LIVEROOMHANDLER_RESET + " call "), this.state = At.disconnected, this.switchSessionID = $e.a.fromInt(0), this.sendDataCheckTimer && clearTimeout(this.sendDataCheckTimer) }, Ge.prototype.closeRequest = function () { var e; null != (e = this.liveroomRequest) && e.closeRequest() }, Ge.prototype.resetSessionInfo = function () { this.switchSessionID = $e.a.fromInt(0) }, Ge); function Ge(e, t, A, r, i) { var o = this; this.logger = e, this.stateCenter = t, this.ua = A, this.dataReport = r, this.rtm = i, this.seq = 0, this.controls = new Uint8Array(1), this.flags = new Uint8Array(1), this.sendCommandList = new S, this.sendCommandMap = {}, this.isEncrypt = !0, this.hasCryptSign = !1, this.waitDecryptCmdList = [], this.logoutCheckToken = "", this.zPushSid = "0", this.sendDataCheckOnceCount = 100, this.sendDataDropTimeout = 1e4, this.sendDataCheckInterval = 2e3, this.protoInstance = Ue.a, this.swPushCmdList = ["/sw/push", "/sw/merge_push", "/sw/push_kickout", "/sw/push_redirect"], this.onSwitchCmdList = ["/lr/login_room_rsp", "/lr/logout_room_rsp", "/sw/push_kickout", "/sw/push", "/sw/merge_push"], this.unEncryptCmdList = ["/lr/login_room", "/lr/login_room_rsp"], this.whiteboardPushCmdList = ["/edu/push/set_room", "/edu/push/set_user", "/edu/push/joinlive", "/edu/push/set_mod", "/edu/push/draw_graphics", "/edu/push/clear_graphics", "/edu/push/draw_page_graphics", "/edu/push/clear_page_graphics", "/edu/push/clear_user_graphic_list", "/edu/push/qaa", "/edu/push/set_user_auth", "/edu/push/set_room_auth"], this.state = At.disconnected, this.unStructCmdList = ["/lr/push/joinlive_request", "/lr/push/joinlive_result", "/lr/push/joinlive_invite", "/lr/push/joinlive_stop"], this.joinLiveMap = { "/lr/push/joinlive_request": 11001, "/lr/push/joinlive_result": 11002, "/lr/push/joinlive_invite": 11003, "/lr/push/joinlive_stop": 11004 }, this.reloginToken = "", this.crypto = new We, this.liveroomRequest = this.ua.getPCRequest(w.SERVICE_SWITCH4LIVEROOM), this.switchSessionID = $e.a.fromInt(0), null != (e = this.liveroomRequest) && e.on("connected", function (e) { o.handleConnected(e) }), null != (t = this.liveroomRequest) && t.on("broken", function (e) { o.handleBroken() }), null != (A = this.liveroomRequest) && A.on("disconnected", function (e, t) { o.handleDisconnected(e, t) }), null != (r = this.liveroomRequest) && r.on("downLoadMessage", function (e) { o.handlePush(e) }), null != (i = this.liveroomRequest) && i.on("pcBrokenEvent", function (e) { var t = le.kZegoSDKProxyBroken, A = o.stateCenter.reporter.createSpan(l.H, { "key": le.kZegoConnConnect.event }, { "key": "" }, t.event); A.setAttributes({ "service_no": t.service_no(null == e ? void 0 : e.service_no) }), A.end() }), null != (e = this.liveroomRequest) && e.on("pcDisconnectedEvent", function (e) { var t = le.kZegoSDKProxyDisconnect, A = o.stateCenter.reporter.createSpan(l.H, { "key": le.kZegoConnConnect.event }, { "key": "" }, t.event); A.setAttributes({ "service_no": t.service_no(null == e ? void 0 : e.service_no) }), A.end() }), null != (t = this.liveroomRequest) && t.on("pcConnectedEvent", function (e) { var t = le.kZegoSDKProxyConnect, A = o.stateCenter.reporter.createSpan(l.H, { "key": le.kZegoConnConnect.event }, { "key": "" }, t.event); A.setAttributes({ "service_no": t.service_no(e.service_no), "recv_time": t.recv_time((new Date).getTime()), "proxy_link_sources": t.proxy_link_sources(e.proxy_link_sources), "connect_stream": t.connect_stream(e.connect_stream) }), A.end() }) } var it = (Ve.prototype.listenCallBack = function () { var e = this; this.roomServicer.handlePushCustomMsg = function (t) { e.handlePushCustomMsg(t) }, this.roomServicer.handlePushTokenExpire = function (t) { var A, r = null == (r = null == (r = null == t ? void 0 : t.body) ? void 0 : r.stop_stream) ? void 0 : r.stream_id_list.map(He); null != (A = null == (A = null == t ? void 0 : t.body) ? void 0 : A.stop_stream) && (A.stream_id_list = r), e.stateCenter.actionListener("_tokenExpired", t) }, this.roomServicer.handlePushKickout = function (t, A) { var r; A ? function (e, t, A) { if (A || 2 === arguments.length) for (var r, i = 0, o = t.length; i < o; i++)!r && i in t || ((r = r || Array.prototype.slice.call(t, 0, i))[i] = t[i]); return e.concat(r || Array.prototype.slice.call(t)) }([], e.stateCenter.roomModulesList, !0).forEach(function (e) { e.roomHandler.handlePushKickout(t, !0, !0) }) : (r = null == (A = null == t ? void 0 : t.header) ? void 0 : A.room_id, A = e.stateCenter.roomModulesList.find(function (e) { return e.roomID == r }), e.roomServicer.longToStringNumber(t.body, ["session_id"], "toString"), A ? A.roomHandler.handlePushKickout(t) : e.logger.error(z.LIVEROOMHANDLER_PUSHKICKOUT + " room no found ignore " + JSON.stringify(null == (A = t.header) ? void 0 : A.room_id))) }, this.roomServicer.handlePushStreamMsg = function (t) { e.handlePushStreamMsg(t) }, this.roomServicer.handlePushSignalMsg = function (t) { e.handlePushSignalMsg(t) }, this.roomServicer.handlePushMergeMsg = function (t) { e.handlePushMergeMsg(t) }, this.roomServicer.handlePushRoomMsg = function (t) { e.handlePushRoomMsg(t) }, this.roomServicer.handlePushTransMsg = function (t) { e.handlePushTransMsg(t) }, this.roomServicer.onSwitchMessage = function (t, A) { e.onSwitchMessage(t, A) }, this.roomServicer.handlePushUserStateUpdateMsg = function (t) { var A, r, i, o = null == (n = null == t ? void 0 : t.header) ? void 0 : n.room_id, n = e.stateCenter.roomModulesList.find(function (e) { return e.roomID == o }); n ? (i = t.body.user_list.map(function (e) { return { "Action": e.action, "IdName": e.id_name, "NickName": e.nick_name, "Role": e.role, "LoginTime": e.login_time.toString() } }), r = e.stateCenter.reporter.createSpan(l.H, { "key": le.kZMLoginRoom.event, "par": o }, { "key": "" }, le.kZMRoomRecvUserUpdateInfo.event), i = { "body": { "user_actions": i, "user_list_seq": t.body.server_user_seq.toNumber(), "room_id": t.body.room_id } }, r.setAttributes({ "user_list_seq": null == (A = null === i ? void 0 : i.body) ? void 0 : A.user_list_seq, "update_user": null == (A = null === i ? void 0 : i.body) ? void 0 : A.user_actions }), r.end(), n.userHandler.handlePushUserStateUpdateMsg(i)) : e.logger.error(z.LIVEROOMHANDLER_PUSHUSERUPDATE + " room no found ignore " + JSON.stringify(t)) } }, Ve.prototype.isDisConnect = function () { return !!this.roomServicer && this.roomServicer.isDisConnect() }, Ve.prototype.isUaConnect = function () { var e; return null == (e = this.roomServicer) ? void 0 : e.isUaConnect() }, Ve.prototype.sendMessage = function (e, t, A, r, i, o) { var n; return null == (n = this.roomServicer) ? void 0 : n.sendMessage(e, t, A, r, i) }, Ve.prototype.handlePushTokenExpire = function (e) { }, Ve.prototype.handlePushKickout = function (e, t) { }, Ve.prototype.handlePushStreamMsg = function (e) { }, Ve.prototype.handlePushSignalMsg = function (e) { }, Ve.prototype.handlePushMergeMsg = function (e) { }, Ve.prototype.handlePushCustomMsg = function (e) { }, Ve.prototype.handlePushRoomMsg = function (e) { }, Ve.prototype.handlePushTransMsg = function (e) { }, Ve.prototype.onSwitchMessage = function (e, t) { }, Ve.prototype.handlePushUserStateUpdateMsg = function (e) { }, Ve.prototype.login = function (e, t, A) { var r; null != (r = this.roomServicer) && r.login(e, t, A) }, Ve.prototype.logout = function (e, t, A) { var r; return null == (r = this.roomServicer) ? void 0 : r.logout(e, t, A) }, Ve.prototype.startCheck = function () { var e; null != (e = this.roomServicer) && e.startCheck() }, Ve.prototype.stopCheck = function () { var e; null != (e = this.roomServicer) && e.stopCheck() }, Ve.prototype.getReqHead = function (e) { var t; return null == (t = this.roomServicer) ? void 0 : t.getReqHead(e) }, Ve.prototype.heartBeat = function (e, t, A) { var r; null != (r = this.roomServicer) && r.heartBeat(e, t, A) }, Ve.prototype.fetchUserList = function (e, t, A, r) { var i; return null == (i = this.roomServicer) ? void 0 : i.fetchUserList(e, t, A, r) }, Ve.prototype.sendRoomMsg = function (e, t, A, r) { var i; return null == (i = this.roomServicer) ? void 0 : i.sendRoomMsg(e, t, A, r) }, Ve.prototype.sendReliableMessage = function (e, t, A, r) { var i; return null == (i = this.roomServicer) ? void 0 : i.sendReliableMessage(e, t, A, r) }, Ve.prototype.fetchReliableMessage = function (e, t, A, r) { var i; return null == (i = this.roomServicer) ? void 0 : i.fetchReliableMessage(e, t, A, r) }, Ve.prototype.sendCustomCommand = function (e, t, A, r) { var i; return null == (i = this.roomServicer) ? void 0 : i.sendCustomCommand(e, t, A, r) }, Ve.prototype.sendBigRoomMessage = function (e, t, A, r) { var i; return null == (i = this.roomServicer) ? void 0 : i.sendBigRoomMessage(e, t, A, r) }, Ve.prototype.sendRelayMessage = function (e, t, A, r) { var i; return null == (i = this.roomServicer) ? void 0 : i.sendRelayMessage(e, t, A, r) }, Ve.prototype.sendSignalCmd = function (e, t, A, r) { var i; return null == (i = this.roomServicer) ? void 0 : i.sendSignalCmd(e, t, A, r) }, Ve.prototype.sendStreamUpdate = function (e, t, A, r) { var i; return null == (i = this.roomServicer) ? void 0 : i.sendStreamUpdate(e, t, A, r) }, Ve.prototype.getStreamList = function (e, t, A, r) { var i; return null == (i = this.roomServicer) ? void 0 : i.getStreamList(e, t, A, r) }, Ve.prototype.renewToken = function (e, t, A, r) { var i; null != (i = this.roomServicer) && i.renewToken(e, t, A, r) }, Ve.prototype.reset = function () { var e; null != (e = this.roomServicer) && e.reset() }, Ve.prototype.closeRequest = function () { var e; null != (e = this.roomServicer) && e.closeRequest() }, Ve); function Ve(e, t, A, r, i) { this.logger = e, this.stateCenter = t, this.ua = A, this.dataReport = r, this.rtm = i, this.roomServicer = new rt(e, t, A, r, i), this.listenCallBack() } var ot = function Fe(e, t, A, r) { return new (A = A || Promise)(function (i, o) { function s(e) { try { c(r.next(e)) } catch (e) { o(e) } } function a(e) { try { c(r.throw(e)) } catch (e) { o(e) } } function c(e) { var t; e.done ? i(e.value) : ((t = e.value) instanceof A ? t : new A(function (e) { e(t) })).then(s, a) } c((r = r.apply(e, t || [])).next()) }) }, at = function Ze(e, t) { var A, r, i, o = { "label": 0, "sent": function sent() { if (1 & i[0]) throw i[1]; return i[1] }, "trys": [], "ops": [] }, n = { "next": a(0), "throw": a(1), "return": a(2) }; return "function" == typeof Symbol && (n[Symbol.iterator] = function () { return this }), n; function a(n) { return function (s) { var a = [n, s]; if (A) throw new TypeError("Generator is already executing."); for (; o;)try { if (A = 1, r && (i = 2 & a[0] ? r.return : a[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, a[1])).done) return i; switch (r = 0, (a = i ? [2 & a[0], i.value] : a)[0]) { case 0: case 1: i = a; break; case 4: return o.label++, { "value": a[1], "done": !1 }; case 5: o.label++, r = a[1], a = [0]; continue; case 7: a = o.ops.pop(), o.trys.pop(); continue; default: if (!(i = 0 < (i = o.trys).length && i[i.length - 1]) && (6 === a[0] || 2 === a[0])) { o = 0; continue } if (3 === a[0] && (!i || a[1] > i[0] && a[1] < i[3])) o.label = a[1]; else if (6 === a[0] && o.label < i[1]) o.label = i[1], i = a; else { if (!(i && o.label < i[2])) { i[2] && o.ops.pop(), o.trys.pop(); continue } o.label = i[2], o.ops.push(a) } }a = t.call(e, o) } catch (s) { a = [6, s], r = 0 } finally { A = i = 0 } if (5 & a[0]) throw a[1]; return { "value": a[0] ? a[1] : void 0, "done": !0 } } } }, gt = function Ke(e, t, A) { if (A || 2 === arguments.length) for (var r, i = 0, o = t.length; i < o; i++)!r && i in t || ((r = r || Array.prototype.slice.call(t, 0, i))[i] = t[i]); return e.concat(r || Array.prototype.slice.call(t)) }, ut = (Object.defineProperty(Ye.prototype, "modules", { "get": function get() { return { "service": this.service } }, "enumerable": !1, "configurable": !0 }), Ye.prototype.destroyRTM = function () { this.stateCenter.roomModulesList.some(function (e) { return !(e.isLogout() || "DISCONNECTED" === e.roomState) }) && this.logoutRoom(), this.stateCenter.reporter.setUnloadState(l.I), this.reporter.destroy() }, Ye.prototype.getSettingUnify = function (e) { var t = this.stateCenter.settingConfig.getSetting("unify", e = void 0 !== e && e); return this.logger.info(z.RTM_GET_SETTING_UNIFY + " " + e + " " + JSON.stringify(t)), t ? (e = t.enable, t = t.sdk_conn_ver, !!(e && t <= ce.connectVer)) : this.stateCenter.useNetAgent }, Ye.prototype.initCallback = function () { this.proxyRes = V.proxyRes, this.actionSuccessCallback = V.actionSuccessCallback, this.actionErrorCallback = V.actionErrorCallback, this.getServerError = V.getServerError, this.generateRandumNumber = V.generateRandumNumber, this.unregisterCallback = V.unregisterCallback, this.logReportCallback = V.logReportCallback, this.registerCallback = V.registerCallback }, Ye.prototype.initSpans = function () { this.stateCenter.reporter.createSpan(l.H, { "key": le.kZMInitSetting.event }, { "key": le.kZMListener.event }, le.kZMListener.event, !0).end() }, Ye.prototype.getStoreAppConfig = function () { this.logger.info(z.RTM_GETSTOREAPPCONFIG + " call"); var e = localStorage.getItem(se + "_" + this.getAppID() + "_" + (this.stateCenter.mode || ce.modeNo)); if (e) try { var t = V.decryptStores(e, oe); t ? (this.stateCenter.appConfig = JSON.parse(t), this.stateCenter.reporter.spanSetAttributes({ "key": le.kZMInitSetting.event }, { "is_from_cache": le.kZMInitSetting.is_from_cache(!0) }), this.stateCenter.actionListener("_appConfigRsp"), this.handleLogUpload()) : localStorage.removeItem(se + "_" + this.getAppID() + "_" + (this.stateCenter.mode || ce.modeNo)) } catch (e) { this.logger.warn(z.RTM_GETSTOREAPPCONFIG + " " + JSON.stringify(e)) } else this.logger.info(z.RTM_GETSTOREAPPCONFIG + " no store config") }, Ye.prototype.createNetAgent = function () { var e = this, t = (this.logger.info(z.RTM_CREATENETAGENT + " call"), this.netAgent.on("disconnected", function (t) { e.logger.info("".concat(z.RTM_CREATENETAGENT, " netAgent disconnect")) }), this.netAgent.on("connected", function () { e.logger.info("".concat(z.RTM_CREATENETAGENT, " netAgent connect")), e.stateCenter.reporter.setNetStateCheck(), e.stateCenter.useNetAgent ? (e.fetchAppConfig(), e.stateCenter.roomModulesList.forEach(function (t) { t.roomTryHandler && e.netAgent.isConnect() && t.roomTryHandler.active(!0) })) : e.logger.info("".concat(z.RTM_CREATENETAGENT, " unify false")) }), this.netAgent.on("broken", function (t) { e.logger.info("".concat(z.RTM_CREATENETAGENT, " netAgent broken")), t === b.CLOSE && e.stateCenter.roomModulesList.forEach(function (e) { e.resetSessionInfo() }) }), this.netAgent.on("dispatchEvent", function (t, A, r) { var i; e.logger.info("".concat(z.RTM_CREATENETAGENT, " dispatch")), "start" === A ? (i = e.stateCenter.reporter.createSpan(l.H, { "key": le.kZegoConnConnect.event }, { "key": "" }, le.kZegoConnDispatch.event), e.stateCenter.requestList[t] = i) : "end" === A && (i = e.stateCenter.requestList[t]) && (i.setAttributes({ "domain_list": le.kZegoConnDispatch.domain_list(r.domains) }), i.end()) }), this.netAgent.on("dispatchResultUpdate", function (t) { t = t.servers, e.logger.info("".concat(z.RTM_CREATENETAGENT, " dispatchResult ").concat(JSON.stringify(t))), t = V.encryptStores(JSON.stringify(t), oe), localStorage.setItem(ne + "_" + e.stateCenter.appid + "_" + (e.stateCenter.mode || ce.modeNo), t) }), this.netAgent.on("connectedEvent", function (t, A, r) { var i; e.logger.info("".concat(z.RTM_CREATENETAGENT, " connect")), "start" === A ? (i = e.stateCenter.reporter.createSpan(l.H, { "key": le.kZMInitSetting.event }, { "key": le.kZegoConnConnect.event }, le.kZegoConnConnect.event, !0), e.stateCenter.requestList[t] = i) : "end" === A && (i = e.stateCenter.requestList[t]) && (i.setAttributes({ "request_count": le.kZegoConnConnect.request_count(r.count), "connect_id": le.kZegoConnConnect.connect_id(r.connectid), "events": le.kZegoConnConnect.events(r.connectEvents) }), i.end()) }), this.netAgent.on("requestEvent", function (t, A, r) { var i; e.logger.info("".concat(z.RTM_CREATENETAGENT, " request")), "start" === A ? (i = e.stateCenter.reporter.createSpan(l.H, { "key": le.kZMInitSetting.event }, { "key": le.kZegoRequest.event }, le.kZegoRequest.event, !0), e.stateCenter.requestList[t] = i) : "end" === A && (i = e.stateCenter.requestList[t]) && (i.setAttributes({ "req_location": le.kZegoRequest.req_location(r.na_req_location), "http_code": r.status_code, "error": r.err_code }), i.end()) }), this.netAgent.on("disConnectedEvent", function (t) { var A = t.duration, r = t.server, i = (t = t.connectid, e.logger.info("".concat(z.RTM_CREATENETAGENT, " disconnect")), e.stateCenter.reporter.createSpan(l.H, { "key": le.kZMInitSetting.event }, { "key": "" }, le.kZegoConnDisConnect.event)); i.setAttributes({ "url": le.kZegoConnDisConnect.url(r), "connect_duration": le.kZegoConnDisConnect.connect_duration(A), "connect_id": le.kZegoConnDisConnect.connect_id(t) }), i.end() }), null != (t = this.netAgent) && t.on("clientInfo", function (t) { "number" == typeof (null == t ? void 0 : t.timeOffset) && e.stateCenter.reporter.setTimeOffset(null == t ? void 0 : t.timeOffset), e.updateTimeOffsetInterval() }), (null != (t = this.options) && t.accessDomains && 0 < (null == (t = this.options) ? void 0 : t.accessDomains.length) ? null == (t = this.options) ? void 0 : t.accessDomains : ce.domains).map(function (e) { return "wss://".concat(e, "/accesshub") })); this.netAgent.setBackupDomains(ce.primaryDomains), this.netAgent.setNetAgentDefaultServers(t), null != (t = this.options) && t.customDomain && this.netAgent.setNetAgentSpecifiedServers(["wss://accesshub-wss." + this.options.customDomain + "/accesshub"]), this.dispatchServers = this.getDispatchUrl(), this.netAgent.setDispatchConnectServers(this.dispatchServers) }, Ye.prototype.getDispatchUrl = function () { var e = localStorage.getItem(ne + "_" + this.stateCenter.appid + "_" + (this.stateCenter.mode || ce.modeNo)); if (e && (e = V.decryptStores(e, oe))) try { return JSON.parse(e) } catch (e) { } return [] }, Ye.prototype.bindWindowListener = function () { var e = this, t = navigator.userAgent.match(/iPad/i) || navigator.userAgent.match(/iPhone/i), A = V.getBrowser(), r = "micromessenger" == (i = navigator.userAgent).toLowerCase().match(/MicroMessenger/i), i = -1 < i.indexOf("Android") || -1 < i.indexOf("Adr"), o = t || r && i ? "pagehide" : "Firefox" === A ? "beforeunload" : "unload"; window.addEventListener(o, function () { return ot(e, void 0, void 0, function () { return at(this, function (e) { switch (e.label) { case 0: return this.logger.info(z.RTM_BIND_WINDOW_LISTENER + " " + o), this.stateCenter.reporter.setUnloadState(l.I), this._onBeforePageUnload ? [4, this._onBeforePageUnload()] : [3, 2]; case 1: e.sent(), e.label = 2; case 2: return this.logoutRoom(), [2] } }) }) }), window.addEventListener("offline", function () { e.netOffLineHandle() }), window.addEventListener("online", function () { e.netOnLineHandle() }) }, Ye.prototype.bindWxListener = function () { var e = this; wx.onNetworkStatusChange(function (t) { t.isConnected ? e.netOnLineHandle() : e.netOffLineHandle() }) }, Ye.prototype.retryRoom = function () { var e = this; this.stateCenter.roomModulesList.forEach(function (t) { t.roomTryHandler && e.netAgent.isConnect() && (t.resetSessionInfo(), t.roomTryHandler.active(!0)) }) }, Ye.prototype.netOnLineHandle = function () { var e = this; this.logger.info(z.RTM_BIND_WINDOW_LISTENER + " network is online"), this.stateCenter.networkState = h.online, this.stateCenter.useNetAgent || this.stateCenter.roomModulesList.forEach(function (t) { t.roomTryHandler && e.service.isDisConnect() ? t.roomTryHandler.active() : t.roomTryHandler && (t.roomTryHandler.stopMaxTime(), t.roomHandler.roomStateHandle("CONNECTED", O.Reconnected, { "code": 0, "msg": "" })) }) }, Ye.prototype.netOffLineHandle = function () { this.logger.info(z.RTM_BIND_WINDOW_LISTENER + " network is broken"), this.stateCenter.networkState = h.offline, this.stateCenter.useNetAgent || this.stateCenter.roomModulesList.forEach(function (e) { e.roomTryHandler && (e.roomTryHandler.invalid(), e.roomTryHandler.onactive = function (t, A) { e.roomHandler.disconnectedHandle(A) }, e.roomTryHandler.startMaxTime(), e.roomHandler.roomStateHandle("CONNECTING", O.Reconnecting, G.NETWORK_BROKEN)) }) }, Ye.prototype.setLogConfig = function (e) { this.logger.info(z.RTM_SET_LOG_CONFIG + " call"); var t, A = this.stateCenter.reporter.createSpan(l.H, { "key": le.kZMInitSetting.event }, { "key": le.kZMSetLog.event }, le.kZMSetLog.event); if (e.logLevel && ["debug", "info", "warn", "error", "report", "disable"].includes(e.logLevel) && (this.logger.setLogLevel(e.logLevel), A.setAttributes({ "log_level": le.kZMSetLog.log_level(e.logLevel) })), e.remoteLogLevel && ["debug", "info", "warn", "error", "report", "disable"].includes(e.remoteLogLevel) && A.setAttributes({ "remote_log_level": le.kZMSetLog.remote_log_level(e.remoteLogLevel) }), "string" == typeof e.logURL && (e.logURL.startsWith("wss://") || e.logURL.startsWith("https://"))) this.logger.setLogServer(e.logURL), 0 === this.stateCenter.ENV && (this.stateCenter.logDomain = null == (t = this.logger.url) ? void 0 : t.split("/")[2], this.stateCenter.reporter.setConfig({ "serverUrl": "wss://" + this.stateCenter.logDomain + "/zglog/tlog" })), A.setAttributes({ "log_url": le.kZMSetLog.log_url(e.logURL) }), A.end(); else if (e.logURL) return this.logger.error(z.RTM_SET_LOG_CONFIG + "log url must be a wss or https url"), this.stateCenter.reporter.setError(A, le.kZMSetLog.error.kInvalidParamError), !1; return this.logger.info(z.RTM_SET_LOG_CONFIG + " call success"), A.end(), !0 }, Ye.prototype.setDebugVerbose = function (e) { var t = this.stateCenter.reporter.createSpan(l.H, { "key": le.kZMInitSetting.event }, { "key": le.kZMSetDebug.event }, le.kZMSetDebug.event); "boolean" == typeof e && (this.stateCenter.debug = e, this.stateCenter.debugCustom = !0, t.setAttributes({ "debug": le.kZMSetDebug.debug(e ? "true" : "false") })), t.end(), this.logger.info(z.RTM_SET_DEBUG_VERBOSE + " call success") }, Ye.prototype.setDebug = function (e) { "string" == typeof e && -1 < e.indexOf("wss") ? this.stateCenter.debug = V.isTestEnv(e) : Array.isArray(e) && 0 < e.length && e.every(function (e) { return "string" == typeof e && -1 < e.indexOf("wss") }) ? this.stateCenter.debug = V.isTestEnv(e[0]) : this.logger.info(z.RTM_CONSTRUCTOR + " server wrong"), this.stateCenter.testEnvironment = this.stateCenter.debug }, Ye.prototype.renewToken = function (e, t) { var A, r, n, s, a = this, c = this.stateCenter.reporter.createSpan(l.H, { "key": le.kZMLoginRoom.event, "par": t }, { "key": "" }, le.kZMReNewToken.event); return void 0 === t || "string" == typeof t && "" != t ? (r = this.getRoomModules(t) || this.stateCenter.roomModulesList[0]) ? "string" == typeof e && r.roomTryHandler ? (e === r.roomTryHandler.token ? (this.logger.info(z.RTM_RENEWTOKEN + " token has not changed"), c.setAttributes({ "error": le.kZMReNewToken.error.INPUT_PARAM.code, "message": "token has not changed" }), c.end()) : (c.setAttributes({ "token": le.kZMReNewToken.token(e) }), this.stateCenter.configRoomAuth ? (n = function o(t) { var A; null != (A = r.roomTryHandler) && A.renewLocalToken(e, null == (A = null == t ? void 0 : t.body) ? void 0 : A.token_remain_time), a.cloudSetting.setToken(e), a.reporter.setReporterInfo(a.stateCenter.idName || "", e), a.stateCenter.configCheckToken = !0, c.end(), a.logger.info(z.RTM_RENEWTOKEN + " " + JSON.stringify(t)) }, s = function i(t) { var A = null == (A = null == t ? void 0 : t.body) ? void 0 : A.err_code; a.stateCenter.reporter.setError(c, t), !A || 1000002014 !== A && 2014 !== A ? a.logger.error(z.RTM_RENEWTOKEN + " " + JSON.stringify(t)) : (a.stateCenter.configCheckToken = !1, null != (A = r.roomTryHandler) && A.renewLocalToken(e), a.cloudSetting.setToken(e), a.logger.warn(z.RTM_RENEWTOKEN + " " + JSON.stringify(t))) }, this.stateCenter.useNetAgent ? null != (A = this.liveRoomHandler) && A.renewToken({ "token": e }, n, s, r) : this.service.sendMessage("renew_token", { "token": e }, n, s, void 0, { "sessionID": r.sessionID, "roomID": t, "roomSessionID": r.roomSessionID })) : (null != (A = r.roomTryHandler) && A.renewLocalToken(e), this.cloudSetting.setToken(e), this.reporter.setReporterInfo(this.stateCenter.idName || "", e), c.end())), !0) : ("string" != typeof e || r.roomTryHandler ? (this.logger.error(z.RTM_RENEWTOKEN + " token must be string and not empty"), this.stateCenter.reporter.setError(c, le.kZMReNewToken.error.INPUT_PARAM)) : (this.logger.error(z.RTM_RENEWTOKEN + " calling must after loginRoom"), this.stateCenter.reporter.setError(c, le.kZMReNewToken.error.NOT_LOGIN)), !1) : (this.logger.error(z.RTM_RENEWTOKEN + " calling must after loginRoom"), this.stateCenter.reporter.setError(c, le.kZMReNewToken.error.NOT_LOGIN), !1) : (this.logger.error(z.RTM_RENEWTOKEN + " roomID must be string and no empty"), !1) }, Ye.prototype.setCloudSettingURLs = function (e) { var t = this; this.logger.info(z.RTM_SET_CLOUD_SETTING_URLS + " call "), Array.isArray(e) && 0 < e.length && e.every(function (e) { return "string" == typeof e && -1 < e.indexOf("http") }) && this.cloudSetting.init({ "product": ee.product, "appID": this.stateCenter.appid, "urls": e, "env": this.stateCenter.ENV, "pollingNotify": function pollingNotify(e, A) { t.logger.info(z.RTM_SET_CLOUD_SETTING_URLS, " setting file changed " + e + " " + JSON.stringify(A)), t.stateCenter.actionListener("_cloudSettingNotify", e, A) }, "reportNotify": this.cloudReportNotify.bind(this), "online": !this.stateCenter.testEnvironment, "unify": this.stateCenter.useNetAgent, "connection": this.netAgent }) }, Ye.prototype.loginRoom = function (e, t, A, r) { var i = this; return this.logger.info(z.RTM_LOGIN_ROOM + " call by user " + (null == A ? void 0 : A.userID) + " " + e + " " + this.version), new Promise(function (o, n) { return ot(i, void 0, void 0, function () { var i, s, a, c, u, l = this; return at(this, function (d) { switch (d.label) { case 0: return 1 !== this.stateCenter.ENV ? [3, 2] : [4, new Promise(function (e) { wx.getNetworkType({ "success": function success(t) { l.stateCenter.networkState = "none" === t.networkType ? h.offline : h.online, e() }, "fail": function fail(t) { l.logger.error(z.RTM_CONSTRUCTOR + " network " + JSON.stringify(t)), l.stateCenter.networkState = h.online, e() } }) })]; case 1: d.sent(), d.label = 2; case 2: return s = this.loginReport(o, n, e, t, r), c = s.interResolve, i = s.interReject, s = s.loginSpan, (r = r || {}).maxMemberCount || (r.maxMemberCount = 0), this.netAgent && (this.stateCenter.idName = A.userID, this.netAgent.setUserInfo(A.userID), this.stateCenter.actionListener("_roomLogin", e, t), this.netAgent.isConnect() && this.fetchAppConfig(t)), this.cloudSetting.setUserID(A.userID), this.cloudSetting.setToken(t), this.cloudSetting.activePolling(), this.stateCenter.reporter.setCommonAttributes({ "id_name": A.userID }), this.stateCenter.reporter.setReporterInfo(A.userID, t), a = this.getRoomModules(e), u = le.kZMLoginRoom.error, a ? (this.logger.setSessionInfo(this.stateCenter.appid, e, "", A.userID, "", this.stateCenter.sdKVersion), i(u.REPEATEDLY_LOGIN)) : ((a = new we(e, this.stateCenter, this.logger, this.dataReport, this.service, this, this.liveRoomHandler)).roomTryHandler || (a.roomTryHandler = new pe(this.logger, this.stateCenter, a)), a.roomTryHandler.init(this.stateCenter.roomRetryTime), a.roomTryHandler.initRoom(a.roomHandler, e, t, A, this.stateCenter.server, this.stateCenter.serverBak, r), a.roomTryHandler.setLoginRoomCallback(c, i), a.roomHandler.roomStateHandle("CONNECTING", O.Logining, { "code": 0, "msg": "" }), (c = function (e, t) { var A, r, i = [], o = {}; for (A in e) o[e[A].order] = e[A], e[A].key = A; for (r in o) i.push(o[r]); for (var n = 0; n < i.length; n++)for (var s = i[n].rules, a = 0; a < s.length; a++) { var c = { "key": i[n].key, "value": i[n].value, "action": t.action, "logger": t.logger }, g = c.value, u = s[a].name ? "" + s[a].name : ""; if ((void 0 === g && u === Ie.NOT_EMPTY || void 0 !== g) && Be[u] && (u = Be[u](c.key, g, c.action, c.logger, s[a])) != fe) return u } return fe }({ "roomID": { "order": 0, "value": e, "rules": [{ "name": Ie.NOT_EMPTY, "error": u.ROOM_ID_NULL }, { "name": Ie.TYPE_STRING, "error": u.INPUT_PARAM, "extMsg": "roomID must be string" }, { "name": Ie.MAX_LENGTH_128, "error": u.ROOM_ID_TOO_LONG }, { "name": Ie.ILLEGAL_CHARACTERS, "error": u.ROOM_ID_INVALID_CHARACTER }] }, "token": { "order": 1, "value": t, "rules": [{ "name": Ie.NOT_EMPTY, "error": u.INPUT_PARAM }, { "name": Ie.TYPE_STRING, "error": u.INPUT_PARAM }] }, "user": { "order": 2, "value": A, "rules": [{ "name": Ie.NOT_EMPTY, "error": u.INPUT_PARAM, "extMsg": " param user error." }, { "name": Ie.TYPE_OBJECT, "error": u.INPUT_PARAM, "extMsg": " param user error." }] }, "user.userID": { "order": 3, "value": A.userID, "rules": [{ "name": Ie.NOT_EMPTY, "error": u.USER_ID_NULL, "extMsg": " param user error." }, { "name": Ie.TYPE_STRING, "error": u.INPUT_PARAM, "extMsg": " param userID error." }, { "name": Ie.MAX_LENGTH_64, "error": u.USER_ID_TOO_LONG }, { "name": Ie.ILLEGAL_CHARACTERS, "error": u.USER_ID_INVALID_CHARACTER }] }, "user.userName": { "order": 4, "value": A.userName, "rules": [{ "name": Ie.TYPE_STRING, "error": u.INPUT_PARAM, "extMsg": " userName must be string." }, { "name": Ie.MAX_LENGTH_256, "error": u.USER_NAME_TOO_LONG }] }, "config": { "order": 5, "value": r, "rules": [] }, "config.maxMemberCount": { "order": 6, "value": r.maxMemberCount, "rules": [{ "name": Ie.TYPE_INTEGER, "error": u.INPUT_PARAM, "extMsg": " maxMemberCount must be integer number." }] } }, { "action": z.RTM_LOGIN_ROOM, "logger": this.logger })) !== fe ? (a.roomHandler.roomStateHandle("DISCONNECTED", O.LoginFailed, c.error, c.extMsg), i(c.error, c.extMsg)) : (0 < this.stateCenter.roomModulesList.length && 1 == this.stateCenter.isMultiRoom ? a.isMulti = !0 : gt([], this.stateCenter.roomModulesList, !0).forEach(function (e) { return e.roomHandler.logout() }), r && (a.config = r), this.stateCenter.roomModulesList.push(a), this.stateCenter.reporter.setSpanInMap(s, { "key": le.kZMLoginRoom.event, "par": e }), u = this.stateCenter.settingConfig.getSetting("room_server", !0), Array.isArray(u) && 0 < u.length && (this.logger.info(z.RTM_LOGIN_ROOM, " setting room_server " + u), this.stateCenter.server = u[0], this.stateCenter.serverBak = u[1] || u[0]), this.stateCenter.setMultiRoom = !0, a.roomTryHandler.startMaxTime(), this.stateCenter.useNetAgent && !this.netAgent.isConnect() ? (this.logger.info(z.RTM_LOGIN_ROOM, " us is not connected"), a.roomHandler.setRunState(g.trylogin), this.netAgent.connectUa()) : (this.stateCenter.useNetAgent && (this.stateCenter.networkState = h.online), a.roomTryHandler.active(!0)))), [2] } }) }) }) }, Ye.prototype.handleLogUpload = function (e) { var t = ""; e && e.app_config ? t = e.app_config.domain : this.stateCenter.appConfig && this.stateCenter.appConfig.app_config && (t = this.stateCenter.appConfig.app_config.domain), this.logger.info(z.RTM_HANDLE_LOG_UPLOAD + " call"), this.logger.url ? this.logger.info(z.RTM_HANDLE_LOG_UPLOAD + " log is connected") : (this.stateCenter.testEnvironment ? (this.stateCenter.logDomain = "weblogger-hk-test.zegocloud.com", t = "zegocloud.com") : this.stateCenter.logDomain = "weblogger".concat(this.stateCenter.appid, "-api.").concat(t), t ? (e = "", 0 === this.stateCenter.ENV ? (e = "wss://".concat(this.stateCenter.logDomain, "/log"), this.reporter.setConfig({ "serverUrl": "wss://".concat(this.stateCenter.logDomain, "/zglog/tlog") })) : e = "https://".concat(this.stateCenter.logDomain, "/httplog"), this.logger.setLogServer(e)) : this.logger.warn(z.RTM_HANDLE_LOG_UPLOAD + " appconfig no domain")) }, Ye.prototype.fetchAppConfigByTargetToken = function (e, t) { return ot(this, void 0, void 0, function () { var A, r, i, o, n, s; return at(this, function (a) { switch (a.label) { case 0: if (this.logger.info(z.RTM_FETCH_APP_CONFIG_TARGET_TOKEN + " call"), !t) return this.logger.warn(z.RTM_FETCH_APP_CONFIG_TARGET_TOKEN + " user not exist"), [2]; if (A = this.getUserID(), r = "", i = null, e) r = e; else { if (!(0 < this.stateCenter.roomModulesList.length)) return this.logger.warn(z.RTM_FETCH_APP_CONFIG_TARGET_TOKEN + " token not exist"), [2]; r = this.getToken() } this.logger.roomid || this.logger.setSessionInfo(this.stateCenter.appid, "player-no-room", "", t, "", this.stateCenter.sdKVersion), a.label = 1; case 1: return a.trys.push([1, 3, 4, 5]), this.netAgent.setUserInfo(t), [4, this.netAgent.getAppConfigByAgent("init", r, 5e3)]; case 2: return o = a.sent(), n = o.code, s = o.data, o.retryCount, 0 === n && (this.handleLogUpload(s), i = s), [3, 5]; case 3: return a.sent(), this.logger.error(z.RTM_FETCH_APP_CONFIG_TARGET_TOKEN + " token not validated"), [3, 5]; case 4: return A && this.netAgent.setUserInfo(A), this.logger.info(z.RTM_FETCH_APP_CONFIG_TARGET_TOKEN + " call success"), [2, i]; case 5: return [2] } }) }) }, Ye.prototype.fetchAppConfig = function (e) { return ot(this, void 0, void 0, function () { var t, A, r, i, o, n; return at(this, function (s) { switch (s.label) { case 0: if (this.stateCenter.appConfigFetched) return this.logger.warn(z.RTM_FETCH_APP_CONFIG + " config fetched"), [2]; if (!this.getUserID()) return this.logger.warn(z.RTM_FETCH_APP_CONFIG + " user not exist"), [2]; if (t = "", e) t = e; else { if (!(0 < this.stateCenter.roomModulesList.length)) return this.logger.warn(z.RTM_FETCH_APP_CONFIG + " token not exist"), [2]; t = this.getToken() } A = this.stateCenter.reporter.createSpan(l.H, { "key": le.kZMInitSetting.event }, { "key": "" }, le.kZegoSDKConfigInit.event), s.label = 1; case 1: return s.trys.push([1, 3, , 4]), [4, this.netAgent.getAppConfigByAgent("init", t, 5e3)]; case 2: return i = s.sent(), n = i.code, r = i.data, i = i.retryCount, A.setAttributes({ "trigger_reason": le.kZegoSDKConfigInit.trigger_reason(this.stateCenter.appConfig ? "refresh" : "normal"), "try_count": le.kZegoSDKConfigInit.try_count(i || 0) }), A.end(), this.stateCenter.appConfigFetched = !0, this.logger.info(z.RTM_LOGIN_ROOM + " initConfig code:" + n + " data: " + JSON.stringify(r)), i = r.app_config, n = r.media_config, o = n.publish_config, n = n.play_config, r = r.speedlog_config.charge_info_report_no_playing, this.stateCenter.appConfig = { "app_config": i, "media_config": { "publish_config": o, "play_config": n }, "speedlog_config": { "charge_info_report_no_playing": r || 0 } }, i = JSON.stringify(this.stateCenter.appConfig), o = V.encryptStores(i, oe), localStorage.setItem(se + "_" + this.getAppID() + "_" + (this.stateCenter.mode || ce.modeNo), o), this.handleLogUpload(), this.stateCenter.appConfig || this.stateCenter.actionListener("_appConfigRsp"), this.stateCenter.netAppConfig || (this.stateCenter.netAppConfig = Object.assign(this.stateCenter.appConfig), this.stateCenter.actionListener("_netAppConfigRsp", this.stateCenter.netAppConfig), this._onAppConfigUpdate && this._onAppConfigUpdate(this.stateCenter.netAppConfig)), [3, 4]; case 3: return n = s.sent(), this.logger.error(z.RTM_LOGIN_ROOM + " fail " + JSON.stringify(n)), A.setAttributes({ "error": null == n ? void 0 : n.code }), A.end(), [20012, 20008].includes(null == n ? void 0 : n.code) && this.stateCenter.roomModulesList.forEach(function (e) { e.roomTryHandler && e.roomTryHandler.loginFail(G.APPID_INVALID) }), [3, 4]; case 4: return [2] } }) }) }, Ye.prototype.getCloudSetting = function () { var e = this; this.cloudSetting.fetchMultiSetting([ie, "room"]).then(function (t) { var A, r; e.logger.info(z.RTM_LOGIN_ROOM, " settingConfig " + JSON.stringify(t)), t && (e.stateCenter.settingConfig.setSetting(null == (t = null == t ? void 0 : t.init) ? void 0 : t.setting, ["remote_log_level"]), (t = e.stateCenter.settingConfig.getSetting("remote_log_level", !0)) && (e.logger.info("".concat(z.RTM_LOGIN_ROOM, "  setting remote_log_level ").concat(t)), e.logger.setRemoteLogLevel(t)), (t = e.stateCenter.settingConfig.getSetting("unify", e.stateCenter.netHasSet)) && (e.logger.info("".concat(z.RTM_LOGIN_ROOM, " unify ").concat(JSON.stringify(t))), r = t.enable, t = t.sdk_conn_ver, A = !0, A = !!(r && t <= ce.connectVer), !0 === e.stateCenter.useNetAgent && !1 === A && (e.cloudSetting.setOptions({ "unify": !1 }), "connecting" !== e.stateCenter.connectState && (e.stateCenter.connectState = "connecting", e.stateCenter.actionListener("_connectChanged", "connecting")), r = gt([], e.stateCenter.roomModulesList, !0), gt([], e.stateCenter.roomModulesList, !0).forEach(function (e) { e.roomHandler.logout(!0, !0) }), e.stateCenter.useNetAgent = A, r.forEach(function (t) { var A; e.stateCenter.roomModulesList.push(t), t.roomTryHandler || (t.roomTryHandler = new pe(e.logger, e.stateCenter, t)), t.roomTryHandler.init(e.stateCenter.roomRetryTime), t.roomTryHandler.initRoom(t.roomHandler, t.roomID, t.token, { "userID": e.stateCenter.idName, "userName": e.stateCenter.nickName }, e.stateCenter.server, e.stateCenter.serverBak, t.config), null != (A = t.roomTryHandler) && A.startMaxTime(), t.roomTryHandler.onactive = function (A, r) { A ? "connected" !== e.stateCenter.connectState && (e.stateCenter.connectState = "connected", e.stateCenter.actionListener("_connectChanged", "connected", { "roomID": t.roomID })) : t.roomHandler.disconnectedHandle(r) }, null != (A = t.roomTryHandler) && A.active() }))), (t = e.stateCenter.settingConfig.getSetting("report_script")) && (A = t.url, r = t.key, t = t.hash, e.logger.info("".concat(z.RTM_LOGIN_ROOM, " report script ").concat(A, " ").concat(r, " ").concat(t)), e.stateCenter.reporter.loadScript(!0, A, r, t))) }).catch(function (t) { e.logger.warn(z.RTM_LOGIN_ROOM, " settingConfig " + JSON.stringify(t)) }), this.stateCenter.onListener("_cloudSettingNotify", function (t, A) { var r = e.cloudSetting.getEnvVariables(), i = e.stateCenter.reporter.createSpan(l.H, { "key": le.kZMInitSetting.event }, { "key": "" }, le.kZMCloudSettingRefresh.event); i.setAttributes({ "request_kv": le.kZMCloudSettingRefresh.request_kv(r), "files": le.kZMCloudSettingRefresh.files([{ "name": t, "content": A.setting, "versions": A.versions, "code": null == A ? void 0 : A.code, "message": null == A ? void 0 : A.message }]) }), i.end(), t === ie && (e.stateCenter.settingConfig.setSetting(null == A ? void 0 : A.setting, ["remote_log_level"]), (r = e.stateCenter.settingConfig.getSetting("remote_log_level")) && (e.logger.info(z.RTM_LOGIN_ROOM, " setting remote_log_level " + r), e.logger.setRemoteLogLevel(r))) }) }, Ye.prototype.cloudReportNotify = function (e, t, A) { 0 !== (null == A ? void 0 : A.code) || !1 === (null == A ? void 0 : A.polling) ? "request_start" === t ? this.stateCenter.reporter.createSpan(l.H, { "key": le.kZMInitSetting.event }, { "key": le.kZMCloudSettingRequest.event, "par": e + "" }, le.kZMCloudSettingRequest.event, !0) : "request_end" === t && this.stateCenter.reporter.spanEnd({ "key": le.kZMCloudSettingRequest.event, "par": e + "" }, { "request_detail": le.kZMCloudSettingRequest.request_detail(null == A ? void 0 : A.reportData), "files": le.kZMCloudSettingRequest.files(null == A ? void 0 : A.files), "code": null == A ? void 0 : A.code, "request_params": null == A ? void 0 : A.params, "request_kv": null == A ? void 0 : A.requestKV }) : this.logger.info(z.RTM_CLOUD_REPORT_NOTIFY + " not report") }, Ye.prototype.loginReport = function (e, t, A, r, i) { var o = this, n = le.kZMLoginRoom, s = this.stateCenter.reporter.createSpan(l.I, { "key": le.kZMInitSetting.event }, { "key": "" }, n.event); return s.setAttributes({ "svr_env": n.svr_env(this.stateCenter.testEnvironment ? "test" : "online"), "token": n.token(r) }), i && ("boolean" == typeof i.userUpdate && s.setAttribute("user_state_update", n.user_state_update(i.userUpdate ? 1 : 0)), "number" == typeof i.maxMemberCount && s.setAttributes({ "max_member_cnt": n.max_member_cnt(i.maxMemberCount) })), { "interResolve": function interResolve(t) { var r = o.getRoomSessionID(A), i = o.getRoomModules(A), a = o.getSessionId(A); s.setAttributes({ "room_id": n.room_id(A), "room_sid_string": n.room_sid_string(r), "liveroom_sid_string": n.liveroom_sid_string(a), "try_cnt": n.try_cnt(null == (r = null == i ? void 0 : i.roomTryHandler) ? void 0 : r.retryActiveCount), "server": n.server(null == (a = null == i ? void 0 : i.roomHandler) ? void 0 : a.server), "room_mode": n.room_mode(o.stateCenter.isMultiRoom ? 1 : 0), "role": n.role(o.stateCenter.role), "audience_create_room": n.audience_create_room(o.stateCenter.roomCreateFlag ? 1 : 0), "max_member_cnt": n.max_member_cnt((null == i ? void 0 : i.maxMemberCount) || 0) }), s.end(), e(t) }, "interReject": function interReject(e, r) { var i, a; void 0 === r && (r = ""), s.setAttributes({ "room_id": n.room_id(A) }), e.code < 2e9 && 1e9 < e.code || e.code < 1e6 ? (i = V.decodeServerError(e.code, e.msg), a = V.getLiveRoomError(e.code, o.stateCenter.useNetAgent)) : i = { "code": e.code, "message": e.msg }, i && o.stateCenter.reporter.setError(s, { "code": i.code, "msg": i.message + r }), a && G[a] && (e.code = G[a].code, e.msg.includes("unknown") && (e.msg = G[a].msg)), e.code && e.msg && "" !== r ? t({ "code": e.code, "msg": e.msg + r }) : t(e) }, "loginSpan": s } }, Ye.prototype.logoutRoom = function (e) { var t, A = this; this.logger.info(z.RTM_LOGOUT_ROOM + " call by user " + e), this.stateCenter.roomModulesList.length ? void 0 === e ? (gt([], this.stateCenter.roomModulesList, !0).forEach(function (e) { A.logoutSpan(e), e.roomHandler.logout(!0) }), this.cloudSetting.uninit()) : "string" != typeof e || "" == e ? (this.logger.error(z.RTM_LOGOUT_ROOM + " roomID must be string and not empty"), this.logoutSpan(void 0, le.kZMLogoutRoom.error.INPUT_PARAM)) : (t = this.getRoomModules(e)) ? (this.logoutSpan(t), t.roomHandler.logout(), 0 === this.stateCenter.roomModulesList.length && this.cloudSetting.uninit()) : (this.logger.error(z.RTM_LOGOUT_ROOM + " room not exist"), this.logoutSpan(void 0, le.kZMLogoutRoom.error.ROOM_NOT_EXIST, e)) : this.logger.warn(z.RTM_LOGOUT_ROOM + " no room") }, Ye.prototype.loginHall = function (e, t, A) { var r = this; return new Promise(function (e, t) { return ot(r, void 0, void 0, function () { return at(this, function (e) { return [2] }) }) }) }, Ye.prototype.loginHallReport = function (e, t, A, r) { }, Ye.prototype.logoutHall = function () { }, Ye.prototype.enterRoom = function (e, t) { return new Promise(function (e, t) { console.error(M), t() }) }, Ye.prototype.leaveRoom = function () { return new Promise(function (e, t) { console.error(M), t() }) }, Ye.prototype.sendCustomCommand = function (e, t, A) { return new Promise(function (e, t) { console.error(M), t() }) }, Ye.prototype._sendCustomCommand = function (e, t, A) { return new Promise(function (e, t) { console.error(M), t() }) }, Ye.prototype.sendBroadcastMessage = function (e, t) { return new Promise(function (e, t) { console.error(M), t() }) }, Ye.prototype._sendBroadcastMessage = function (e, t, A, r) { return void 0 === A && (A = 1), void 0 === r && (r = 1), new Promise(function (e, t) { console.error(M), t() }) }, Ye.prototype.setRoomExtraInfo = function (e, t, A) { return new Promise(function (e, t) { console.error(M), t() }) }, Ye.prototype._setRoomExtraInfo = function (e, t, A) { return new Promise(function (e, t) { console.error(M), t() }) }, Ye.prototype.sendBarrageMessage = function (e, t) { return new Promise(function (e, t) { console.error(M), t() }) }, Ye.prototype._sendBarrageMessage = function (e, t, A, r) { return void 0 === A && (A = 1), void 0 === r && (r = 1), new Promise(function (e, t) { console.error(M), t() }) }, Ye.prototype.sendRelayMessage = function (e, t, A, r, i) { console.error(M) }, Ye.prototype.requestJoinLive = function (e, t, A, r, i) { return console.error(M), !1 }, Ye.prototype.inviteJoinLive = function (e, t, A, r, i) { return console.error(M), !1 }, Ye.prototype.endJoinLive = function (e, t, A, r) { return console.error(M), !1 }, Ye.prototype.respondJoinLive = function (e, t, A, r, i) { return console.error(M), !1 }, Ye.prototype.getVersion = function () { return this.version }, Ye.prototype.setSdkBizVersion = function (e) { "string" == typeof e && "" !== e && (this.stateCenter.bizVersion = e) }, Ye.prototype.on = function (e, t) { var A = this.stateCenter.reporter.createSpan(l.H, { "key": le.kZMListener.event }, { "key": "" }, le.kZMOnListener.event); return A.setAttributes({ "listener": le.kZMOnListener.listener(e) }), this.stateCenter.listenerList[e] ? "function" != typeof t ? (this.logger.error(z.RTM_ON + " listener callBack must be funciton"), this.stateCenter.reporter.setError(A, le.kZMOnListener.error.INPUT_PARAM, " listener callBack must be function"), !1) : (-1 == this.stateCenter.listenerList[e].indexOf(t) && this.stateCenter.listenerList[e].push(t), A.end(), !0) : (this.logger.error(z.RTM_ON + " event " + e + " no found"), this.stateCenter.reporter.setError(A, le.kZMOnListener.error.INPUT_PARAM, " event " + e + " no found"), !1) }, Ye.prototype.off = function (e, t) { var A, r = this.stateCenter.reporter.createSpan(l.H, { "key": le.kZMListener.event }, { "key": "" }, le.kZMOffListener.event); return r.setAttributes({ "listener": le.kZMOffListener.listener(e) }), this.stateCenter.listenerList[e] ? (A = this.stateCenter.listenerList[e], t ? A.splice(A.indexOf(t), 1) : this.stateCenter.listenerList[e] = [], r.end(), !0) : (this.logger.error(z.RTM_OFF + " listener no found"), this.stateCenter.reporter.setError(r, le.kZMOnListener.error.INPUT_PARAM, " event " + e + " no found"), !1) }, Ye.prototype._on = function (e, t) { return this.stateCenter.listenerList[e] ? "function" != typeof t ? (this.logger.error(z.RTM_ON + " listener callBack must be funciton"), !1) : (-1 == this.stateCenter.listenerList[e].indexOf(t) && this.stateCenter.listenerList[e].push(t), !0) : (this.logger.error(z.RTM_ON + " event " + e + " no found"), !1) }, Ye.prototype._off = function (e, t) { var A; return this.stateCenter.listenerList[e] ? (A = this.stateCenter.listenerList[e], t ? A.splice(A.indexOf(t), 1) : this.stateCenter.listenerList[e] = [], !0) : (this.logger.error(z.RTM_OFF + " listener no found"), !1) }, Ye.prototype.isTestEnvironment = function () { return this.stateCenter.testEnvironment }, Ye.prototype.isLogin = function (e) { return !!(e = this.getRoomModules(e) || this.stateCenter.roomModulesList[0]) && e.isLogin() }, Ye.prototype.getMultiRoom = function () { return this.stateCenter.isMultiRoom }, Ye.prototype.getAppID = function () { return this.stateCenter.appid }, Ye.prototype.getUserID = function () { return this.stateCenter.idName }, Ye.prototype.getUseNetAgent = function () { return this.stateCenter.useNetAgent }, Ye.prototype.getUserName = function () { return this.stateCenter.nickName }, Ye.prototype.getToken = function (e) { return (this.getRoomModules(e) || this.stateCenter.roomModulesList[0]).token }, Ye.prototype.setRoomCreateFlag = function (e) { this.stateCenter.roomCreateFlag = e }, Ye.prototype.setRole = function (e) { this.stateCenter.role = e }, Ye.prototype.getSessionId = function (e) { return (e = this.getRoomModules(e) || this.stateCenter.roomModulesList[0]) ? e.sessionID : "0" }, Ye.prototype.getRoomSessionID = function (e) { return (e = this.getRoomModules(e) || this.stateCenter.roomModulesList[0]) ? e.roomSessionID : "0" }, Ye.prototype.getAppConfig = function () { return this.stateCenter.appConfig }, Ye.prototype.setAccess = function (e) { this.stateCenter.configOK && (this.stateCenter.netHasSet = !0, this.stateCenter.useNetAgent = e, this.stateCenter.useNetAgent = this.getSettingUnify(!0), this.netAgent.setAccess(this.stateCenter.useNetAgent), this.cloudSetting.setOptions({ "unify": this.stateCenter.useNetAgent })) }, Ye.prototype.enableMultiRoom = function (e) { var t = this.stateCenter.reporter.createSpan(l.H, { "key": le.kZMInitSetting.event }, { "key": "" }, le.kZegoEnableMultiRoom.event); return "boolean" != typeof e ? (this.logger.error(z.RTM_ENABLE_MULTI_ROOM + " param must be boolean"), this.stateCenter.reporter.setError(t, le.kZegoEnableMultiRoom.error.kAlreadyLoginError), !1) : (t.setAttribute("is_multi", le.kZegoEnableMultiRoom.is_multi(e)), 0 < this.stateCenter.roomModulesList.length || this.stateCenter.setMultiRoom ? (this.logger.error(z.RTM_ENABLE_MULTI_ROOM + " multi room can only be set once before first login"), this.stateCenter.reporter.setError(t, le.kZegoEnableMultiRoom.error.kInvalidParamError), !1) : (t.end(), this.stateCenter.isMultiRoom = e, this.stateCenter.setMultiRoom = !0)) }, Ye.prototype.getRoomModules = function (e) { return this.stateCenter.roomModulesList.find(function (t) { return t.roomID == e }) }, Ye.prototype._onAppConfigUpdate = function (e) { }, Ye.prototype._onBeforePageUnload = function () { }, Ye.use = function (e) { switch (e.type) { case "message": case "live": e.install(Ye, we, Oe, it) } }, Ye.prototype.resetRoomTokenTimer = function (e, t) { (e = this.getRoomModules(e) || this.stateCenter.roomModulesList[0]) && t && 0 < t && e.roomHandler.resetTokenTimer(1e3 * t) }, Ye.prototype.isDisConnect = function () { return (this.stateCenter.useNetAgent ? this.liveRoomHandler : this.service).isDisConnect() }, Ye.prototype.sendMessage = function (e, t, A, r) { (this.stateCenter.useNetAgent ? this.liveRoomHandler : this.service).sendMessage(e, t, A, r) }, Ye.prototype.setProtoFormat = function (e) { if (!["json", "pb"].includes(e = void 0 === e ? "json" : e)) throw new Error("Failed to execute 'setProtoFormat': Arguments 'format' must be 'json' or 'pb'."); this.stateCenter.protoFormat = e }, Ye.prototype.setSdkLoginRelateService = function (e) { Array.isArray(e) && e.every(function (e) { return "string" == typeof e }) && (this.stateCenter.relateService = e) }, Ye.prototype.sendMessageByService = function (e, t, A, r, i, o) { return this.service.sendMessage(e, t, A, r, i, o) }, Ye.prototype.getHeader = function (e) { var t, A, r = this.stateCenter.roomModulesList[0]; if (r && r.isLogin()) return t = r.roomID, A = r.sessionID, r = r.roomSessionID, this.service.getHeader(e, A, t, r); this.logger.error(z.RTM_GET_HEADER + " room no found or no login") }, Ye.prototype.sendPB = function (e) { return e instanceof Uint8Array ? this.service.sendPB(e) : (this.logger.error(z.RTM_SEND_PB + " type error"), !1) }, Ye.prototype.onPushBizChannel = function (e) { e && this.service.on("push_biz_channel", e) }, Ye.prototype.getRoomID = function () { return this.stateCenter.roomid }, Ye.prototype.getServerTimeOffset = function () { return this.stateCenter.serverTimeOffset }, Ye.prototype.isUseNetAgent = function () { return this.stateCenter.useNetAgent }, Ye.prototype.getReqHead = function (e) { return e = "string" == typeof e && "" !== e && this.getRoomModules(e) || this.stateCenter.roomModulesList[0], this.liveRoomHandler.getReqHead(e) }, Ye.prototype.sendSwitchMessage = function (e, t) { return "string" == typeof e && t ? this.liveRoomHandler.sendMessage(e, t, void 0, void 0, void 0, !1) : -1 }, Ye.prototype.onSwitchMessage = function (e) { e && this.liveRoomHandler && (this.liveRoomHandler.onSwitchMessage = e) }, Ye.prototype.getProtoVer = function () { return a.SWITCH_ONE }, Ye.prototype.onAppConfigUpdate = function (e) { e && (this._onAppConfigUpdate = e) }, Ye.prototype.onBeforePageUnload = function (e) { e && (this._onBeforePageUnload = e) }, Ye.prototype.logoutSpan = function (e, t, A) { var r = this, i = this.stateCenter.reporter.createSpan(l.I, { "key": le.kZMInitSetting.event }, { "key": le.kZMLogoutRoom.event, "par": null == e ? void 0 : e.roomID }, le.kZMLogoutRoom.event, !0); i.setAttributes({ "is_multi": le.kZMLogoutRoom.is_multi(this.stateCenter.isMultiRoom), "is_send_cmd_net": le.kZMLogoutRoom.is_send_cmd_net(!0) }), e ? i.setAttributes({ "room_id": le.kZMLogoutRoom.room_id(null == e ? void 0 : e.roomID), "room_sid_string": le.kZMLogoutRoom.room_sid_string(null == e ? void 0 : e.roomSessionID), "liveroom_sid_string": le.kZMLogoutRoom.liveroom_sid_string(null == e ? void 0 : e.sessionID) }) : "string" == typeof A && i.setAttributes({ "room_id": le.kZMLogoutRoom.room_id(A) }), t ? this.stateCenter.reporter.setError(i, t) : i.end(), setTimeout(function () { r.reporter.flush() }, 200) }, Ye.prototype.getMsgSpan = function (e, t, A) { return this.stateCenter.reporter.createSpan(l.H, { "key": le.kZMLoginRoom.event, "par": t }, { "key": e, "par": t }, e, A = void 0 !== A && A) }, Ye.prototype.updateTimeOffsetInterval = function () { var e = this; "number" == typeof this.netAgent.timeOffset && this.stateCenter.reporter.setTimeOffset(this.netAgent.timeOffset), this.timeOffsetUpdateTimer = setTimeout(function () { e.updateTimeOffsetInterval() }, 9e5) }, Ye); function Ye(e, t, A, r, i, o, n, s, a) { var c, g = this, u = (this.logger = A, this.dataReport = r, this.reporter = i, this.cloudSetting = o, this.version = n, this.options = a, this.roomLoginResponseListener = function () { clearTimeout(g.cloudSettingTimer), g.cloudSettingTimer = setTimeout(function () { g.logger.info(z.RTM_LOGIN_ROOM + "fetch cloud setting"), g.getCloudSetting(), g.stateCenter.actionListener("_settingCanFetch") }, 100) }, this.stateCenter = new me(this.logger, this.dataReport), this.stateCenter.ENV = s, this.stateCenter.product = te.product, this.getReportSeq = Q, this.getSeq = _, this.initCallback(), this.stateCenter.deviceID = V.generateUUID(s), this.reporter.init(e, s, this.stateCenter.deviceID), this.reporter.setLogger(this.logger), this.stateCenter.reporter = this.reporter, le.kZMInitSetting), d = this.stateCenter.reporter.createSpan(l.H, { "key": "" }, { "key": u.event }, u.event, !0); if (0 != s && 1 != s || this.setDebug(t), A = "Express", null != (r = this.options) && r.reportData && (c = null == (o = null == (i = this.options) ? void 0 : i.reportData) ? void 0 : o.version, A = (null == (a = null == (n = this.options) ? void 0 : n.reportData) ? void 0 : a.project) || A), d.setAttributes({ "biz_type": u.biz_type(0), "project": u.project(A), "servers": u.servers("string" == typeof t ? [t] : t), "liveroom_version": u.liveroom_version(c), "is_from_cache": u.is_from_cache(!1), "sev_env": u.sev_env(this.stateCenter.testEnvironment ? "test" : "online") }), V.checkConfigParam(e, t, this.logger)) { this.stateCenter.appid = e, this.stateCenter.configOK = !0, this.stateCenter.sdKVersion = this.version, this.stateCenter.testEnvironment && (this.stateCenter.mode = T.MODE_TEST), this.netAgent = new U, this.logger.setSessionInfo(this.stateCenter.appid, "", "", "", "", this.version), this.netAgent.init(), this.netAgent.setLogger(this.logger), this.netAgent.setAppInfo({ "appID": this.stateCenter.appid, "env": this.stateCenter.ENV, "mode": this.stateCenter.mode }), this.liveRoomHandler = new it(this.logger, this.stateCenter, this.netAgent, this.dataReport, this), this.service = new Oe(this.stateCenter, this.logger, this), this.stateCenter.settingConfig = new Me, this.cloudSetting.setLog(this.logger), this.cloudSetting.init({ "product": ee.product, "appID": e, "urls": ee.URL, "env": s, "pollingNotify": function pollingNotify(e, t) { g.logger.info(z.RTM_CONSTRUCTOR, " setting file changed " + e + " " + JSON.stringify(t)), g.stateCenter.actionListener("_cloudSettingNotify", e, t) }, "reportNotify": this.cloudReportNotify.bind(this), "online": !this.stateCenter.testEnvironment, "unify": this.stateCenter.useNetAgent, "connection": this.netAgent }), (r = this.stateCenter.settingConfig.getSetting("remote_log_level")) && (this.logger.info("".concat(z.RTM_CONSTRUCTOR, " setting remote_log_level default ").concat(r)), this.logger.setRemoteLogLevel(r)), i = "", 0 === s ? i = "rtc" : 1 === s && (i = "xcx"), this.cloudSetting.setEnvVariable("environment", i), o = this.cloudSetting.getSettingCache(ie), n = this.cloudSetting.getSettingCache("room"); var C = !1, I = setTimeout(function () { g.logger.warn("".concat(z.RTM_CONSTRUCTOR, " time out, get cache settings failed!")), g.stateCenter.useNetAgent && (C = !0, g.createNetAgent(), g.getStoreAppConfig()), d.setAttributes({ "use_na": u.use_na(g.stateCenter.useNetAgent ? 1 : 0) }), d.end() }, 3e3); if (Promise.all([o, n]).then(function (A) { I && clearTimeout(I); var r = null == A ? void 0 : A[0], i = (g.stateCenter.settingConfig.setSetting(null == r ? void 0 : r.setting), g.stateCenter.useNetAgent = g.getSettingUnify(g.stateCenter.netHasSet), g.cloudSetting.setOptions({ "unify": g.stateCenter.useNetAgent }), g.stateCenter.useNetAgent && !C && (g.createNetAgent(), g.getStoreAppConfig()), (n = g.stateCenter.settingConfig.getSetting("remote_log_level", !0)) && (g.logger.info("".concat(z.RTM_CONSTRUCTOR, "  setting remote_log_level ").concat(n)), g.logger.setRemoteLogLevel(n)), (n = g.stateCenter.settingConfig.getSetting("report_script")) ? (i = n.url, o = n.key, n = n.hash, g.logger.info("".concat(z.RTM_CONSTRUCTOR, " report script ").concat(i, " ").concat(o, " ").concat(n)), g.stateCenter.reporter.loadScript(!1, i, o, n), d.setAttributes({ "lua_md5": u.lua_md5(n) })) : g.stateCenter.reporter.loadScript(!1, "", "", ""), null == A ? void 0 : A[1]), o = (g.stateCenter.settingConfig.setSetting(null == i ? void 0 : i.setting), g.stateCenter.reporter.createSpan(l.H, { "key": u.event }, { "key": "" }, le.kZMCloudSettingCache.event)), n = (o.setAttributes({ "files": le.kZMCloudSettingCache.files([{ "name": ie, "content": JSON.stringify(null == r ? void 0 : r.setting), "versions": JSON.stringify(null == r ? void 0 : r.versions), "code": 0, "message": "" }, { "name": "room", "content": JSON.stringify(null == i ? void 0 : i.setting), "versions": JSON.stringify(null == i ? void 0 : i.versions), "code": 0, "message": "" }]) }), o.end(), d.setAttributes({ "use_na": u.use_na(g.stateCenter.useNetAgent ? 1 : 0) }), d.end(), Array.isArray(t) ? t[0] : t); if (!g.stateCenter.useNetAgent && !V.isRightServerForAppid(n, e)) throw g.logger.error("".concat(z.RTM_CONSTRUCTOR, " the server does not match the appID")), new Error("The server does not match the appID") }).catch(function (e) { I && clearTimeout(I), d.setAttributes({ "use_na": u.use_na(g.stateCenter.useNetAgent ? 1 : 0) }), d.end(), g.logger.warn("".concat(z.RTM_CONSTRUCTOR, "  initConfig ").concat(JSON.stringify(e))) }), "string" == typeof t ? (this.stateCenter.server = t, this.stateCenter.serverBak = t) : Array.isArray(t) && 0 < t.length && (this.stateCenter.server = t[0], this.stateCenter.serverBak = t[1] || t[0]), 0 == s || 2 == s) this.bindWindowListener(), this.logger.info("".concat(z.RTM_CONSTRUCTOR, "  ").concat(navigator.appVersion, " ").concat(this.version)), this.stateCenter.networkState = !navigator || navigator.onLine ? h.online : h.offline, a = "Firefox" === V.getBrowser() ? null === navigator || void 0 === navigator ? void 0 : navigator.userAgent : null === navigator || void 0 === navigator ? void 0 : navigator.appVersion, d.setAttribute("sys_info", a || ""), this.initSpans(); else if (1 == s || 3 == s) { this.bindWxListener(); try { var E = wx.getSystemInfoSync(), p = { "brand": E.brand, "model": E.model, "system": E.system, "platform": E.platform, "version": E.version, "SDKVersion": E.SDKVersion }; this.logger.warn(z.RTM_CONSTRUCTOR + " " + JSON.stringify(p)), d.setAttribute("mini_sys_infos", p), d.end() } catch (A) { this.logger.warn(z.RTM_CONSTRUCTOR + " get system info error") } } this.logger.setSessionInfo(this.stateCenter.appid, "", "", "", "", this.version) } else this.logger.error("".concat(z.RTM_CONSTRUCTOR, " init sdk error")), this.stateCenter.reporter.setError(d, u.error.kInvalidParamError); this.stateCenter.onListener("roomLoginResponse", this.roomLoginResponseListener) } var lt = s(13), ht = (Qe.prototype.setLog = function (e) { this.zegoSetting.setLog(e) }, Qe.prototype.init = function (e) { this.zegoSetting.init(e) }, Qe.prototype.setEnvVariable = function (e, t) { this.zegoSetting.setEnvVariable(e, t) }, Qe.prototype.getEnvVariables = function () { return this.zegoSetting.getEnvVariables() }, Qe.prototype.fetchSetting = function (e, t, A) { return this.zegoSetting.fetchSetting(e, t, A) }, Qe.prototype.fetchMultiSetting = function (e, t, A) { return this.zegoSetting.fetchMultiSetting(e, t, A) }, Qe.prototype.setOptions = function (e) { return this.zegoSetting.setOptions(e) }, Qe.prototype.getSettingCache = function (e) { return this.zegoSetting.getSettingCache(e) }, Qe.prototype.setToken = function (e) { this.zegoSetting.setToken(e) }, Qe.prototype.setUserID = function (e) { this.zegoSetting.setUserID(e) }, Qe.prototype.activePolling = function () { this.zegoSetting.activePolling() }, Qe.prototype.uninit = function () { var e; null != (e = this.zegoSetting) && e.uninit() }, Qe.prototype.getEnvVariable = function (e) { this.zegoSetting.getEnvVariable(e) }, Qe); function Qe() { this.isLoad = !1, this.callBackList = [], this.zegoSetting = new lt.ZegoSetting } var dt = s(9), Ct = function et() { return (Ct = Object.assign || function (e) { for (var t, A = 1, r = arguments.length; A < r; A++)for (var i in t = arguments[A]) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]); return e }).apply(this, arguments) }, It = (nt.prototype.init = function (e, t, A) { var r = this; this.tracer.init({ "product": this.product, "version": "1.0.0", "env": t, "appID": e, "deviceID": A, "importantLevel": te.importLevel, "levels": te.levels, "bps": te.bps, "spanStart": function spanStart(e) { try { "function" == typeof scriptSpanStart && scriptSpanStart(r.commonStates, r.tracer, e) } catch (e) { r.logger.warn(z.TRACER_INIT + " dy span start ", JSON.stringify(e)) } }, "spanBeforeEnd": function spanBeforeEnd(e) { e.setAttribute("ntype_end", V.getNetType()) }, "spanEnd": function spanEnd(e, t) { try { "function" == typeof scriptSpanEnd && scriptSpanEnd(r.commonStates, r.tracer, e) } catch (e) { r.logger.warn(z.TRACER_INIT + " dy span end ", JSON.stringify(e)) } }, "resources": { "product": this.product, "appid": e, "device_id": A, "console": 0 == t ? "rtc" : "xcx" } }) }, nt.prototype.setConfig = function (e) { this.tracer.setConfig(e) }, nt.prototype.loadScript = function (e, t, A, r) { return function (e, t, A, r) { return new (A = A || Promise)(function (t, i) { function s(e) { try { c(r.next(e)) } catch (e) { i(e) } } function a(e) { try { c(r.throw(e)) } catch (e) { i(e) } } function c(e) { var r; e.done ? t(e.value) : ((r = e.value) instanceof A ? r : new A(function (e) { e(r) })).then(s, a) } c((r = r.apply(e, [])).next()) }) }(this, 0, void 0, function () { var i; return function (e, t) { var A, r, i, o = { "label": 0, "sent": function sent() { if (1 & i[0]) throw i[1]; return i[1] }, "trys": [], "ops": [] }, n = { "next": a(0), "throw": a(1), "return": a(2) }; return "function" == typeof Symbol && (n[Symbol.iterator] = function () { return this }), n; function a(n) { return function (s) { var a = [n, s]; if (A) throw new TypeError("Generator is already executing."); for (; o;)try { if (A = 1, r && (i = 2 & a[0] ? r.return : a[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, a[1])).done) return i; switch (r = 0, (a = i ? [2 & a[0], i.value] : a)[0]) { case 0: case 1: i = a; break; case 4: return o.label++, { "value": a[1], "done": !1 }; case 5: o.label++, r = a[1], a = [0]; continue; case 7: a = o.ops.pop(), o.trys.pop(); continue; default: if (!(i = 0 < (i = o.trys).length && i[i.length - 1]) && (6 === a[0] || 2 === a[0])) { o = 0; continue } if (3 === a[0] && (!i || a[1] > i[0] && a[1] < i[3])) o.label = a[1]; else if (6 === a[0] && o.label < i[1]) o.label = i[1], i = a; else { if (!(i && o.label < i[2])) { i[2] && o.ops.pop(), o.trys.pop(); continue } o.label = i[2], o.ops.push(a) } }a = t.call(e, o) } catch (s) { a = [6, s], r = 0 } finally { A = i = 0 } if (5 & a[0]) throw a[1]; return { "value": a[0] ? a[1] : void 0, "done": !0 } } } }(this, function (o) { switch (o.label) { case 0: return o.trys.push([0, 2, , 3]), [4, this.tracer.loadJs(e, t, A, r, "\nfunction scriptSpanStart(states, tracer, span) {\n    \n}\nfunction scriptSpanEnd(states, tracer, span) {\n    if (span['tags']['msg_content']) {\n        span['tags']['msg_content_size'] = span['tags']['msg_content'].length;\n        delete span['tags']['msg_content'];\n    }\n    delete span['tags']['resp'];\n    const filterSpans = ['/rtc/login', '/rtc/hb', '/rtc/recv_remote_stream'];\n    if (filterSpans.includes(span.name)) {\n        console.log(span.name + ' do not report');\n        span.droped = true;\n    }\n}\nfunction scriptInit(states, tracer) {\n\n}\n\n", {})]; case 1: return o.sent(), "function" == typeof scriptInit && scriptInit(this.commonStates, this.tracer), [3, 3]; case 2: return i = o.sent(), this.logger.warn(z.TRACER_LOAD_SCRIPT, " load script fail " + JSON.stringify(i)), [3, 3]; case 3: return [2] } }) }) }, nt.prototype.setReporterInfo = function (e, t) { var A = new Map; A.set("userID", e), A.set("token", t), this.tracer.startReport(A) }, nt.prototype.flush = function (e) { this.tracer.flush(e) }, nt.prototype.destroy = function () { this.tracer.destroy() }, nt.prototype.setCommonStates = function (e) { this.commonStates = e }, nt.prototype.setResource = function (e) { this.tracer.setResource(e) }, nt.prototype.setCommonAttributes = function (e) { this.commonAttrs = Object.assign({}, this.commonAttrs, e) }, nt.prototype.createSpan = function (e, t, A) { return (e = this.tracer.createSpan(e, t, { "parent": A })).setAttributes(Ct({ "ntype": V.getNetType(), "error": 0, "message": "" }, this.commonAttrs)), e }, nt.prototype.spanEnd = function (e, t) { e && t && e.setAttributes(Ct({}, t)), e && e.end() }, nt.prototype.spanSetAttributes = function (e, t) { e && e.setAttributes(t) }, nt.prototype.spanAppendAttribute = function (e, t, A) { e && e.appendAttribute(t, A) }, nt.prototype.setError = function (e, t, A) { e.setAttributes({ "error": t.code || t.errorCode, "message": (t.msg || t.message || t.extendedData) + " " + (A = void 0 === A ? "" : A) }), e.end() }, nt.prototype.setLogger = function (e) { this.tracer.setLogger(e) }, nt.prototype.setTimeOffset = function (e) { this.tracer.setTimeOffset(e) }, nt.prototype.setUnloadState = function (e) { this.isUnload = !0, this.tracer.setUnloadState(e) }, nt.prototype.setNetStateCheck = function () { this.tracer.setNetStateCheck() }, nt); function nt(e) { this.logger = e, this.product = te.product, this.commonAttrs = {}, this.commonStates = {}, this.isUnload = !1, new dt.DynamicCode, this.tracer = new dt.ZegoTracer, this.tracer.setSampleConfig({ "level": l.L }) } var Et = ["/sdk/start_publish", "/publish/start", "/publish/restart"], pt = ["/sdk/start_play", "/play/start", "/play/restart"], ft = (st.prototype.init = function (e, t, A) { this.tracerHandler.init(e, t, A) }, st.prototype.setConfig = function (e) { this.tracerHandler.setConfig(e) }, st.prototype.loadScript = function (e, t, A, r) { return this.tracerHandler.loadScript(e, t, A, r) }, st.prototype.setReporterInfo = function (e, t) { this.tracerHandler.setReporterInfo(e, t) }, st.prototype.flush = function (e) { this.tracerHandler.flush(e) }, st.prototype.destroy = function () { this.tracerHandler.destroy() }, st.prototype.setCommonStates = function (e) { this.tracerHandler.setCommonStates(e) }, st.prototype.setResource = function (e) { this.tracerHandler.setResource(e) }, st.prototype.setCommonAttributes = function (e) { this.tracerHandler.setCommonAttributes(e) }, st.prototype.setPublicPros = function (e) { this.publicPros = Object.assign({}, this.publicPros, e) }, st.prototype.createSpan = function (e, t, A, r, i) { var o; t && t.key && t.par ? (n = t.par1 ? "_" + t.par1 : "", !(o = null == (o = this.reportList[t.key]) ? void 0 : o[t.par + n]) && t.bak_key && (o = null == (s = this.reportList[t.bak_key]) ? void 0 : s[t.par + n])) : t && !(o = this.reportList[t.key]) && t.bak_key && (o = this.reportList[t.bak_key]), o = o || this.reportList[le.kZMInitSetting.event]; var n, s = this.tracerHandler.createSpan(e, r, o); return "/sdk/login" === t.key && (s.setAttribute("room_id", t.par), this.publicPros[t.par] && s.setAttributes(this.publicPros[t.par])), (Et.includes(t.key) || pt.includes(t.key)) && s.setAttribute("stream_id", t.par), Et.includes(t.key) && this.publicPros["_publish_" + t.par] && s.setAttributes(this.publicPros["_publish_" + t.par]), pt.includes(t.key) && this.publicPros["_play_" + t.par] && s.setAttributes(this.publicPros["_play_" + t.par]), i && (A.par ? (this.reportList[A.key] || (this.reportList[A.key] = {}), n = A.par1 ? "_" + A.par1 : "", this.reportList[A.key][A.par + n] = s) : this.reportList[A.key] = s), s }, st.prototype.setSpanInMap = function (e, t) { var A; t.par ? (this.reportList[t.key] || (this.reportList[t.key] = {}), A = t.par2 ? "_" + t.par2 : "", this.reportList[t.key][t.par + A] = e) : this.reportList[t.key] = e }, st.prototype.spanEnd = function (e, t, A) { var r; e.par ? (r = e.par1 ? "_" + e.par1 : "", r = this.reportList[e.key] && this.reportList[e.key][e.par + r], this.reportList[e.key] && !A && delete this.reportList[e.key][e.par]) : (r = this.reportList[e.key], A || delete this.reportList[e.key]), this.tracerHandler.spanEnd(r, t) }, st.prototype.spanSetAttributes = function (e, t) { var A, r; e.par ? (A = e.par1 ? "_" + e.par1 : "", !(r = this.reportList[e.key] && this.reportList[e.key][e.par + A]) && e.bak_key && (r = this.reportList[e.bak_key] && this.reportList[e.bak_key][e.par + A])) : !(r = this.reportList[e.key]) && e.bak_key && (r = this.reportList[e.key]), this.tracerHandler.spanSetAttributes(r, t) }, st.prototype.spanAppendAttribute = function (e, t, A) { var r, i; e.par ? (r = e.par1 ? "_" + e.par1 : "", !(i = this.reportList[e.key] && this.reportList[e.key][e.par + r]) && e.bak_key && (i = this.reportList[e.bak_key] && this.reportList[e.bak_key][e.par + r])) : !(i = this.reportList[e.key]) && e.bak_key && (i = this.reportList[e.key]), this.tracerHandler.spanAppendAttribute(i, t, A) }, st.prototype.setError = function (e, t, A) { this.tracerHandler.setError(e, t, A) }, st.prototype.setLogger = function (e) { this.tracerHandler.setLogger(e) }, st.prototype.setTimeOffset = function (e) { this.tracerHandler.setTimeOffset(e) }, st.prototype.setUnloadState = function (e) { this.tracerHandler.setUnloadState(e) }, st.prototype.setNetStateCheck = function () { this.tracerHandler.setNetStateCheck() }, st); function st(e) { this.logger = e, this.reportList = {}, this.publicPros = {}, this.tracerHandler = new It(e) } ct.prototype.enableMultiRoom = function (e) { return this.zegoWebRTM.enableMultiRoom(e) }, ct.prototype.loginRoom = function (e, t, A, r) { return this.zegoWebRTM.loginRoom(e, t, A, r) }, ct.prototype.logoutRoom = function (e) { return this.zegoWebRTM.logoutRoom(e) }, ct.prototype.renewToken = function (e, t) { return this.zegoWebRTM.renewToken(e, t) }, ct.prototype.sendBarrageMessage = function (e, t) { return this.zegoWebRTM.sendBarrageMessage(e, t) }, ct.prototype.sendBroadcastMessage = function (e, t) { return this.zegoWebRTM.sendBroadcastMessage(e, t) }, ct.prototype.sendCustomCommand = function (e, t, A) { return this.zegoWebRTM.sendCustomCommand(e, t, A) }, ct.prototype.setRoomExtraInfo = function (e, t, A) { return this.zegoWebRTM.setRoomExtraInfo(e, t, A) }, ct.prototype.setLogConfig = function (e) { return this.zegoWebRTM.setLogConfig(e) }, ct.prototype.setDebugVerbose = function (e) { return this.zegoWebRTM.setDebugVerbose(e) }, ct.prototype.on = function (e, t) { return this.zegoWebRTM.on(e, t) }, ct.prototype.getVersion = function () { return this.zegoWebRTM.getVersion() }, ct.prototype.off = function (e, t) { return this.zegoWebRTM.off(e, t) }, ct.prototype.loginHall = function (e, t, A) { return this.zegoWebRTM.loginHall(e, t, A) }, ct.prototype.logoutHall = function () { return this.zegoWebRTM.logoutHall() }, ct.prototype.enterRoom = function (e, t) { return this.zegoWebRTM.enterRoom(e, t) }, ct.prototype.leaveRoom = function () { return this.zegoWebRTM.leaveRoom() }, ct.use = function (e) { ut.use(e) }, ct.version = "1.24.1"; var Bt = ct; function ct(e, t, A, r) { this.logger = new f.ZegoLogger(A = void 0 === A ? 0 : A), this.dataReport = new f.ZegoDataReport(this.logger), this.cloudSetting = new ht, this.reporter = new ft(this.logger), this.zegoWebRTM = new ut(e, t, this.logger, this.dataReport, this.reporter, this.cloudSetting, ct.version, A, r) } }], r = {}, n.m = A, n.c = r, n.d = function (e, t, A) { n.o(e, t) || Object.defineProperty(e, t, { "enumerable": !0, "get": A }) }, n.r = function (e) { "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, { "value": "Module" }), Object.defineProperty(e, "__esModule", { "value": !0 }) }, n.t = function (e, t) { if (1 & t && (e = n(e)), 8 & t) return e; if (4 & t && "object" == (void 0 === e ? "undefined" : u(e)) && e && e.__esModule) return e; var A = Object.create(null); if (n.r(A), Object.defineProperty(A, "default", { "enumerable": !0, "value": e }), 2 & t && "string" != typeof e) for (var r in e) n.d(A, r, function (t) { return e[t] }.bind(null, r)); return A }, n.n = function (e) { var t = e && e.__esModule ? function () { return e.default } : function () { return e }; return n.d(t, "a", t), t }, n.o = function (e, t) { return Object.prototype.hasOwnProperty.call(e, t) }, n.p = "", n(n.s = 22); function n(e) { var t; return (r[e] || (t = r[e] = { "i": e, "l": !1, "exports": {} }, A[e].call(t.exports, t, t.exports, n), t.l = !0, t)).exports } var A, r }, "object" == u(t) && "object" == u(e) ? e.exports = c(A(155), A(158)) : (s = [A(155), A(158)], void 0 === (a = "function" == typeof (o = c) ? o.apply(t, s) : o) || (e.exports = a)) }).call(this, A(29)(e)) }, "155": function (e, t, A) { "use strict"; e.exports = A(244) }, "156": function (e, t, A) { "use strict"; e.exports = Writer; var r, i = A(127), o = i.LongBits, n = i.base64, s = i.utf8; function Op(e, t, A) { this.fn = e, this.len = t, this.next = void 0, this.val = A } function noop() { } function Writer() { this.len = 0, this.head = new Op(noop, 0, 0), this.tail = this.head, this.states = null } var a = function create() { return i.Buffer ? function create_buffer_setup() { return (Writer.create = function create_buffer() { return new r })() } : function create_array() { return new Writer } }; function writeByte(e, t, A) { t[A] = 255 & e } function VarintOp(e, t) { this.len = e, this.next = void 0, this.val = t } function writeVarint64(e, t, A) { for (; e.hi;)t[A++] = 127 & e.lo | 128, e.lo = (e.lo >>> 7 | e.hi << 25) >>> 0, e.hi >>>= 7; for (; e.lo > 127;)t[A++] = 127 & e.lo | 128, e.lo = e.lo >>> 7; t[A++] = e.lo } function writeFixed32(e, t, A) { t[A] = 255 & e, t[A + 1] = e >>> 8 & 255, t[A + 2] = e >>> 16 & 255, t[A + 3] = e >>> 24 } Writer.create = a(), Writer.alloc = function alloc(e) { return new i.Array(e) }, i.Array !== Array && (Writer.alloc = i.pool(Writer.alloc, i.Array.prototype.subarray)), Writer.prototype._push = function push(e, t, A) { return this.tail = this.tail.next = new Op(e, t, A), this.len += t, this }, VarintOp.prototype = Object.create(Op.prototype), VarintOp.prototype.fn = function writeVarint32(e, t, A) { for (; e > 127;)t[A++] = 127 & e | 128, e >>>= 7; t[A] = e }, Writer.prototype.uint32 = function write_uint32(e) { return this.len += (this.tail = this.tail.next = new VarintOp((e >>>= 0) < 128 ? 1 : e < 16384 ? 2 : e < 2097152 ? 3 : e < 268435456 ? 4 : 5, e)).len, this }, Writer.prototype.int32 = function write_int32(e) { return e < 0 ? this._push(writeVarint64, 10, o.fromNumber(e)) : this.uint32(e) }, Writer.prototype.sint32 = function write_sint32(e) { return this.uint32((e << 1 ^ e >> 31) >>> 0) }, Writer.prototype.uint64 = function write_uint64(e) { var t = o.from(e); return this._push(writeVarint64, t.length(), t) }, Writer.prototype.int64 = Writer.prototype.uint64, Writer.prototype.sint64 = function write_sint64(e) { var t = o.from(e).zzEncode(); return this._push(writeVarint64, t.length(), t) }, Writer.prototype.bool = function write_bool(e) { return this._push(writeByte, 1, e ? 1 : 0) }, Writer.prototype.fixed32 = function write_fixed32(e) { return this._push(writeFixed32, 4, e >>> 0) }, Writer.prototype.sfixed32 = Writer.prototype.fixed32, Writer.prototype.fixed64 = function write_fixed64(e) { var t = o.from(e); return this._push(writeFixed32, 4, t.lo)._push(writeFixed32, 4, t.hi) }, Writer.prototype.sfixed64 = Writer.prototype.fixed64, Writer.prototype.float = function write_float(e) { return this._push(i.float.writeFloatLE, 4, e) }, Writer.prototype.double = function write_double(e) { return this._push(i.float.writeDoubleLE, 8, e) }; var c = i.Array.prototype.set ? function writeBytes_set(e, t, A) { t.set(e, A) } : function writeBytes_for(e, t, A) { for (var r = 0; r < e.length; ++r)t[A + r] = e[r] }; Writer.prototype.bytes = function write_bytes(e) { var t = e.length >>> 0; if (!t) return this._push(writeByte, 1, 0); if (i.isString(e)) { var A = Writer.alloc(t = n.length(e)); n.decode(e, A, 0), e = A } return this.uint32(t)._push(c, t, e) }, Writer.prototype.string = function write_string(e) { var t = s.length(e); return t ? this.uint32(t)._push(s.write, t, e) : this._push(writeByte, 1, 0) }, Writer.prototype.fork = function fork() { return this.states = new function State(e) { this.head = e.head, this.tail = e.tail, this.len = e.len, this.next = e.states }(this), this.head = this.tail = new Op(noop, 0, 0), this.len = 0, this }, Writer.prototype.reset = function reset() { return this.states ? (this.head = this.states.head, this.tail = this.states.tail, this.len = this.states.len, this.states = this.states.next) : (this.head = this.tail = new Op(noop, 0, 0), this.len = 0), this }, Writer.prototype.ldelim = function ldelim() { var e = this.head, t = this.tail, A = this.len; return this.reset().uint32(A), A && (this.tail.next = e.next, this.tail = t, this.len += A), this }, Writer.prototype.finish = function finish() { for (var e = this.head.next, t = this.constructor.alloc(this.len), A = 0; e;)e.fn(e.val, t, A), A += e.len, e = e.next; return t }, Writer._configure = function (e) { r = e, Writer.create = a(), r._configure() } }, "157": function (e, t, A) { "use strict"; e.exports = Reader; var r, i = A(127), o = i.LongBits, n = i.utf8; function indexOutOfRange(e, t) { return RangeError("index out of range: " + e.pos + " + " + (t || 1) + " > " + e.len) } function Reader(e) { this.buf = e, this.pos = 0, this.len = e.length } var s = "undefined" != typeof Uint8Array ? function create_typed_array(e) { if (e instanceof Uint8Array || Array.isArray(e)) return new Reader(e); throw Error("illegal buffer") } : function create_array(e) { if (Array.isArray(e)) return new Reader(e); throw Error("illegal buffer") }, a = function create() { return i.Buffer ? function create_buffer_setup(e) { return (Reader.create = function create_buffer(e) { return i.Buffer.isBuffer(e) ? new r(e) : s(e) })(e) } : s }; function readLongVarint() { var e = new o(0, 0), t = 0; if (!(this.len - this.pos > 4)) { for (; t < 3; ++t) { if (this.pos >= this.len) throw indexOutOfRange(this); if (e.lo = (e.lo | (127 & this.buf[this.pos]) << 7 * t) >>> 0, this.buf[this.pos++] < 128) return e } return e.lo = (e.lo | (127 & this.buf[this.pos++]) << 7 * t) >>> 0, e } for (; t < 4; ++t)if (e.lo = (e.lo | (127 & this.buf[this.pos]) << 7 * t) >>> 0, this.buf[this.pos++] < 128) return e; if (e.lo = (e.lo | (127 & this.buf[this.pos]) << 28) >>> 0, e.hi = (e.hi | (127 & this.buf[this.pos]) >> 4) >>> 0, this.buf[this.pos++] < 128) return e; if (t = 0, this.len - this.pos > 4) { for (; t < 5; ++t)if (e.hi = (e.hi | (127 & this.buf[this.pos]) << 7 * t + 3) >>> 0, this.buf[this.pos++] < 128) return e } else for (; t < 5; ++t) { if (this.pos >= this.len) throw indexOutOfRange(this); if (e.hi = (e.hi | (127 & this.buf[this.pos]) << 7 * t + 3) >>> 0, this.buf[this.pos++] < 128) return e } throw Error("invalid varint encoding") } function readFixed32_end(e, t) { return (e[t - 4] | e[t - 3] << 8 | e[t - 2] << 16 | e[t - 1] << 24) >>> 0 } function readFixed64() { if (this.pos + 8 > this.len) throw indexOutOfRange(this, 8); return new o(readFixed32_end(this.buf, this.pos += 4), readFixed32_end(this.buf, this.pos += 4)) } Reader.create = a(), Reader.prototype._slice = i.Array.prototype.subarray || i.Array.prototype.slice, Reader.prototype.uint32 = function read_uint32_setup() { var e = 4294967295; return function read_uint32() { if (e = (127 & this.buf[this.pos]) >>> 0, this.buf[this.pos++] < 128) return e; if (e = (e | (127 & this.buf[this.pos]) << 7) >>> 0, this.buf[this.pos++] < 128) return e; if (e = (e | (127 & this.buf[this.pos]) << 14) >>> 0, this.buf[this.pos++] < 128) return e; if (e = (e | (127 & this.buf[this.pos]) << 21) >>> 0, this.buf[this.pos++] < 128) return e; if (e = (e | (15 & this.buf[this.pos]) << 28) >>> 0, this.buf[this.pos++] < 128) return e; if ((this.pos += 5) > this.len) throw this.pos = this.len, indexOutOfRange(this, 10); return e } }(), Reader.prototype.int32 = function read_int32() { return 0 | this.uint32() }, Reader.prototype.sint32 = function read_sint32() { var e = this.uint32(); return e >>> 1 ^ -(1 & e) | 0 }, Reader.prototype.bool = function read_bool() { return 0 !== this.uint32() }, Reader.prototype.fixed32 = function read_fixed32() { if (this.pos + 4 > this.len) throw indexOutOfRange(this, 4); return readFixed32_end(this.buf, this.pos += 4) }, Reader.prototype.sfixed32 = function read_sfixed32() { if (this.pos + 4 > this.len) throw indexOutOfRange(this, 4); return 0 | readFixed32_end(this.buf, this.pos += 4) }, Reader.prototype.float = function read_float() { if (this.pos + 4 > this.len) throw indexOutOfRange(this, 4); var e = i.float.readFloatLE(this.buf, this.pos); return this.pos += 4, e }, Reader.prototype.double = function read_double() { if (this.pos + 8 > this.len) throw indexOutOfRange(this, 4); var e = i.float.readDoubleLE(this.buf, this.pos); return this.pos += 8, e }, Reader.prototype.bytes = function read_bytes() { var e = this.uint32(), t = this.pos, A = this.pos + e; if (A > this.len) throw indexOutOfRange(this, e); return this.pos += e, Array.isArray(this.buf) ? this.buf.slice(t, A) : t === A ? new this.buf.constructor(0) : this._slice.call(this.buf, t, A) }, Reader.prototype.string = function read_string() { var e = this.bytes(); return n.read(e, 0, e.length) }, Reader.prototype.skip = function skip(e) { if ("number" == typeof e) { if (this.pos + e > this.len) throw indexOutOfRange(this, e); this.pos += e } else do { if (this.pos >= this.len) throw indexOutOfRange(this) } while (128 & this.buf[this.pos++]); return this }, Reader.prototype.skipType = function (e) { switch (e) { case 0: this.skip(); break; case 1: this.skip(8); break; case 2: this.skip(this.uint32()); break; case 3: for (; 4 != (e = 7 & this.uint32());)this.skipType(e); break; case 5: this.skip(4); break; default: throw Error("invalid wire type " + e + " at offset " + this.pos) }return this }, Reader._configure = function (e) { r = e, Reader.create = a(), r._configure(); var t = i.Long ? "toLong" : "toNumber"; i.merge(Reader.prototype, { "int64": function read_int64() { return readLongVarint.call(this)[t](!1) }, "uint64": function read_uint64() { return readLongVarint.call(this)[t](!0) }, "sint64": function read_sint64() { return readLongVarint.call(this).zzDecode()[t](!1) }, "fixed64": function read_fixed64() { return readFixed64.call(this)[t](!0) }, "sfixed64": function read_sfixed64() { return readFixed64.call(this)[t](!1) } }) } }, "158": function (e, t, A) { (function (A) { var r, i, o, n, a, c = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) { return typeof e } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e }; a = function () { return function e(t, A, r) { function s(o, a) { if (!A[o]) { if (!t[o]) { if (!a && ("function" == typeof n && n)) return n(o, !0); if (i) return i(o, !0); var c = new Error("Cannot find module '" + o + "'"); throw c.code = "MODULE_NOT_FOUND", c } var g = A[o] = { "exports": {} }; t[o][0].call(g.exports, function (e) { var A = t[o][1][e]; return s(A || e) }, g, g.exports, e, t, A, r) } return A[o].exports } for (var i = "function" == typeof n && n, o = 0; o < r.length; o++)s(r[o]); return s }({ "1": [function (e, t, r) { (function (e) { "use strict"; var A, r, i = e.MutationObserver || e.WebKitMutationObserver; if (i) { var o = 0, n = new i(nextTick), s = e.document.createTextNode(""); n.observe(s, { "characterData": !0 }), A = function scheduleDrain() { s.data = o = ++o % 2 } } else if (e.setImmediate || void 0 === e.MessageChannel) A = "document" in e && "onreadystatechange" in e.document.createElement("script") ? function scheduleDrain() { var t = e.document.createElement("script"); t.onreadystatechange = function () { nextTick(), t.onreadystatechange = null, t.parentNode.removeChild(t), t = null }, e.document.documentElement.appendChild(t) } : function scheduleDrain() { setTimeout(nextTick, 0) }; else { var a = new e.MessageChannel; a.port1.onmessage = nextTick, A = function scheduleDrain() { a.port2.postMessage(0) } } var c = []; function nextTick() { var e, t; r = !0; for (var A = c.length; A;) { for (t = c, c = [], e = -1; ++e < A;)t[e](); A = c.length } r = !1 } t.exports = function immediate(e) { 1 !== c.push(e) || r || A() } }).call(this, void 0 !== A ? A : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {}) }, {}], "2": [function (e, t, A) { "use strict"; var r = e(1); function INTERNAL() { } var i = {}, o = ["REJECTED"], n = ["FULFILLED"], s = ["PENDING"]; function Promise(e) { if ("function" != typeof e) throw new TypeError("resolver must be a function"); this.state = s, this.queue = [], this.outcome = void 0, e !== INTERNAL && safelyResolveThenable(this, e) } function QueueItem(e, t, A) { this.promise = e, "function" == typeof t && (this.onFulfilled = t, this.callFulfilled = this.otherCallFulfilled), "function" == typeof A && (this.onRejected = A, this.callRejected = this.otherCallRejected) } function unwrap(e, t, A) { r(function () { var r; try { r = t(A) } catch (t) { return i.reject(e, t) } r === e ? i.reject(e, new TypeError("Cannot resolve promise with itself")) : i.resolve(e, r) }) } function getThen(e) { var t = e && e.then; if (e && ("object" === (void 0 === e ? "undefined" : c(e)) || "function" == typeof e) && "function" == typeof t) return function appyThen() { t.apply(e, arguments) } } function safelyResolveThenable(e, t) { var A = !1; function onError(t) { A || (A = !0, i.reject(e, t)) } function onSuccess(t) { A || (A = !0, i.resolve(e, t)) } var r = tryCatch(function tryToUnwrap() { t(onSuccess, onError) }); "error" === r.status && onError(r.value) } function tryCatch(e, t) { var A = {}; try { A.value = e(t), A.status = "success" } catch (e) { A.status = "error", A.value = e } return A } t.exports = Promise, Promise.prototype.catch = function (e) { return this.then(null, e) }, Promise.prototype.then = function (e, t) { if ("function" != typeof e && this.state === n || "function" != typeof t && this.state === o) return this; var A = new this.constructor(INTERNAL); this.state !== s ? unwrap(A, this.state === n ? e : t, this.outcome) : this.queue.push(new QueueItem(A, e, t)); return A }, QueueItem.prototype.callFulfilled = function (e) { i.resolve(this.promise, e) }, QueueItem.prototype.otherCallFulfilled = function (e) { unwrap(this.promise, this.onFulfilled, e) }, QueueItem.prototype.callRejected = function (e) { i.reject(this.promise, e) }, QueueItem.prototype.otherCallRejected = function (e) { unwrap(this.promise, this.onRejected, e) }, i.resolve = function (e, t) { var A = tryCatch(getThen, t); if ("error" === A.status) return i.reject(e, A.value); var r = A.value; if (r) safelyResolveThenable(e, r); else { e.state = n, e.outcome = t; for (var o = -1, s = e.queue.length; ++o < s;)e.queue[o].callFulfilled(t) } return e }, i.reject = function (e, t) { e.state = o, e.outcome = t; for (var A = -1, r = e.queue.length; ++A < r;)e.queue[A].callRejected(t); return e }, Promise.resolve = function resolve(e) { if (e instanceof this) return e; return i.resolve(new this(INTERNAL), e) }, Promise.reject = function reject(e) { var t = new this(INTERNAL); return i.reject(t, e) }, Promise.all = function all(e) { var t = this; if ("[object Array]" !== Object.prototype.toString.call(e)) return this.reject(new TypeError("must be an array")); var A = e.length, r = !1; if (!A) return this.resolve([]); var o = new Array(A), n = 0, s = -1, a = new this(INTERNAL); for (; ++s < A;)allResolver(e[s], s); return a; function allResolver(e, s) { t.resolve(e).then(function resolveFromAll(e) { o[s] = e, ++n !== A || r || (r = !0, i.resolve(a, o)) }, function (e) { r || (r = !0, i.reject(a, e)) }) } }, Promise.race = function race(e) { var t = this; if ("[object Array]" !== Object.prototype.toString.call(e)) return this.reject(new TypeError("must be an array")); var A = e.length, r = !1; if (!A) return this.resolve([]); var o = -1, n = new this(INTERNAL); for (; ++o < A;)s = e[o], t.resolve(s).then(function (e) { r || (r = !0, i.resolve(n, e)) }, function (e) { r || (r = !0, i.reject(n, e)) }); var s; return n } }, { "1": 1 }], "3": [function (e, t, r) { (function (t) { "use strict"; "function" != typeof t.Promise && (t.Promise = e(2)) }).call(this, void 0 !== A ? A : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {}) }, { "2": 2 }], "4": [function (e, t, A) { "use strict"; var r = "function" == typeof Symbol && "symbol" === c(Symbol.iterator) ? function (e) { return void 0 === e ? "undefined" : c(e) } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : void 0 === e ? "undefined" : c(e) }; var i = function getIDB() { try { if ("undefined" != typeof indexedDB) return indexedDB; if ("undefined" != typeof webkitIndexedDB) return webkitIndexedDB; if ("undefined" != typeof mozIndexedDB) return mozIndexedDB; if ("undefined" != typeof OIndexedDB) return OIndexedDB; if ("undefined" != typeof msIndexedDB) return msIndexedDB } catch (e) { return } }(); function createBlob(e, t) { e = e || [], t = t || {}; try { return new Blob(e, t) } catch (i) { if ("TypeError" !== i.name) throw i; for (var A = new ("undefined" != typeof BlobBuilder ? BlobBuilder : "undefined" != typeof MSBlobBuilder ? MSBlobBuilder : "undefined" != typeof MozBlobBuilder ? MozBlobBuilder : WebKitBlobBuilder), r = 0; r < e.length; r += 1)A.append(e[r]); return A.getBlob(t.type) } } "undefined" == typeof Promise && e(3); var o = Promise; function executeCallback(e, t) { t && e.then(function (e) { t(null, e) }, function (e) { t(e) }) } function executeTwoCallbacks(e, t, A) { "function" == typeof t && e.then(t), "function" == typeof A && e.catch(A) } function normalizeKey(e) { return "string" != typeof e && (console.warn(e + " used as a key, but it is not a string."), e = String(e)), e } function getCallback() { if (arguments.length && "function" == typeof arguments[arguments.length - 1]) return arguments[arguments.length - 1] } var n = "local-forage-detect-blob-support", s = void 0, a = {}, g = Object.prototype.toString, u = "readonly", l = "readwrite"; function _checkBlobSupport(e) { return "boolean" == typeof s ? o.resolve(s) : function _checkBlobSupportWithoutCaching(e) { return new o(function (t) { var A = e.transaction(n, l), r = createBlob([""]); A.objectStore(n).put(r, "key"), A.onabort = function (e) { e.preventDefault(), e.stopPropagation(), t(!1) }, A.oncomplete = function () { var e = navigator.userAgent.match(/Chrome\/(\d+)/), A = navigator.userAgent.match(/Edge\//); t(A || !e || parseInt(e[1], 10) >= 43) } }).catch(function () { return !1 }) }(e).then(function (e) { return s = e }) } function _deferReadiness(e) { var t = a[e.name], A = {}; A.promise = new o(function (e, t) { A.resolve = e, A.reject = t }), t.deferredOperations.push(A), t.dbReady ? t.dbReady = t.dbReady.then(function () { return A.promise }) : t.dbReady = A.promise } function _advanceReadiness(e) { var t = a[e.name].deferredOperations.pop(); if (t) return t.resolve(), t.promise } function _rejectReadiness(e, t) { var A = a[e.name].deferredOperations.pop(); if (A) return A.reject(t), A.promise } function _getConnection(e, t) { return new o(function (A, r) { if (a[e.name] = a[e.name] || { "forages": [], "db": null, "dbReady": null, "deferredOperations": [] }, e.db) { if (!t) return A(e.db); _deferReadiness(e), e.db.close() } var o = [e.name]; t && o.push(e.version); var s = i.open.apply(i, o); t && (s.onupgradeneeded = function (t) { var A = s.result; try { A.createObjectStore(e.storeName), t.oldVersion <= 1 && A.createObjectStore(n) } catch (A) { if ("ConstraintError" !== A.name) throw A; console.warn('The database "' + e.name + '" has been upgraded from version ' + t.oldVersion + " to version " + t.newVersion + ', but the storage "' + e.storeName + '" already exists.') } }), s.onerror = function (e) { e.preventDefault(), r(s.error) }, s.onsuccess = function () { var t = s.result; t.onversionchange = function (e) { e.target.close() }, A(t), _advanceReadiness(e) } }) } function _getOriginalConnection(e) { return _getConnection(e, !1) } function _getUpgradedConnection(e) { return _getConnection(e, !0) } function _isUpgradeNeeded(e, t) { if (!e.db) return !0; var A = !e.db.objectStoreNames.contains(e.storeName), r = e.version < e.db.version, i = e.version > e.db.version; if (r && (e.version !== t && console.warn('The database "' + e.name + "\" can't be downgraded from version " + e.db.version + " to version " + e.version + "."), e.version = e.db.version), i || A) { if (A) { var o = e.db.version + 1; o > e.version && (e.version = o) } return !0 } return !1 } function _decodeBlob(e) { return createBlob([function _binStringToArrayBuffer(e) { for (var t = e.length, A = new ArrayBuffer(t), r = new Uint8Array(A), i = 0; i < t; i++)r[i] = e.charCodeAt(i); return A }(atob(e.data))], { "type": e.type }) } function _isEncodedBlob(e) { return e && e.__local_forage_encoded_blob } function _fullyReady(e) { var t = this, A = t._initReady().then(function () { var e = a[t._dbInfo.name]; if (e && e.dbReady) return e.dbReady }); return executeTwoCallbacks(A, e, e), A } function createTransaction(e, t, A, r) { void 0 === r && (r = 1); try { var i = e.db.transaction(e.storeName, t); A(null, i) } catch (i) { if (r > 0 && (!e.db || "InvalidStateError" === i.name || "NotFoundError" === i.name)) return o.resolve().then(function () { if (!e.db || "NotFoundError" === i.name && !e.db.objectStoreNames.contains(e.storeName) && e.version <= e.db.version) return e.db && (e.version = e.db.version + 1), _getUpgradedConnection(e) }).then(function () { return function _tryReconnect(e) { _deferReadiness(e); for (var t = a[e.name], A = t.forages, r = 0; r < A.length; r++) { var i = A[r]; i._dbInfo.db && (i._dbInfo.db.close(), i._dbInfo.db = null) } return e.db = null, _getOriginalConnection(e).then(function (t) { return e.db = t, _isUpgradeNeeded(e) ? _getUpgradedConnection(e) : t }).then(function (r) { e.db = t.db = r; for (var i = 0; i < A.length; i++)A[i]._dbInfo.db = r }).catch(function (t) { throw _rejectReadiness(e, t), t }) }(e).then(function () { createTransaction(e, t, A, r - 1) }) }).catch(A); A(i) } } var h = { "_driver": "asyncStorage", "_initStorage": function _initStorage(e) { var t = this, A = { "db": null }; if (e) for (var r in e) A[r] = e[r]; var i = a[A.name]; i || (i = { "forages": [], "db": null, "dbReady": null, "deferredOperations": [] }, a[A.name] = i), i.forages.push(t), t._initReady || (t._initReady = t.ready, t.ready = _fullyReady); var n = []; function ignoreErrors() { return o.resolve() } for (var s = 0; s < i.forages.length; s++) { var c = i.forages[s]; c !== t && n.push(c._initReady().catch(ignoreErrors)) } var g = i.forages.slice(0); return o.all(n).then(function () { return A.db = i.db, _getOriginalConnection(A) }).then(function (e) { return A.db = e, _isUpgradeNeeded(A, t._defaultConfig.version) ? _getUpgradedConnection(A) : e }).then(function (e) { A.db = i.db = e, t._dbInfo = A; for (var r = 0; r < g.length; r++) { var o = g[r]; o !== t && (o._dbInfo.db = A.db, o._dbInfo.version = A.version) } }) }, "_support": function isIndexedDBValid() { try { if (!i || !i.open) return !1; var e = "undefined" != typeof openDatabase && /(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent) && !/Chrome/.test(navigator.userAgent) && !/BlackBerry/.test(navigator.platform), t = "function" == typeof fetch && -1 !== fetch.toString().indexOf("[native code"); return (!e || t) && "undefined" != typeof indexedDB && "undefined" != typeof IDBKeyRange } catch (e) { return !1 } }(), "iterate": function iterate(e, t) { var A = this, r = new o(function (t, r) { A.ready().then(function () { createTransaction(A._dbInfo, u, function (i, o) { if (i) return r(i); try { var n = o.objectStore(A._dbInfo.storeName).openCursor(), s = 1; n.onsuccess = function () { var A = n.result; if (A) { var r = A.value; _isEncodedBlob(r) && (r = _decodeBlob(r)); var i = e(r, A.key, s++); void 0 !== i ? t(i) : A.continue() } else t() }, n.onerror = function () { r(n.error) } } catch (e) { r(e) } }) }).catch(r) }); return executeCallback(r, t), r }, "getItem": function getItem(e, t) { var A = this; e = normalizeKey(e); var r = new o(function (t, r) { A.ready().then(function () { createTransaction(A._dbInfo, u, function (i, o) { if (i) return r(i); try { var n = o.objectStore(A._dbInfo.storeName).get(e); n.onsuccess = function () { var e = n.result; void 0 === e && (e = null), _isEncodedBlob(e) && (e = _decodeBlob(e)), t(e) }, n.onerror = function () { r(n.error) } } catch (e) { r(e) } }) }).catch(r) }); return executeCallback(r, t), r }, "setItem": function setItem(e, t, A) { var r = this; e = normalizeKey(e); var i = new o(function (A, i) { var n; r.ready().then(function () { return n = r._dbInfo, "[object Blob]" === g.call(t) ? _checkBlobSupport(n.db).then(function (e) { return e ? t : function _encodeBlob(e) { return new o(function (t, A) { var r = new FileReader; r.onerror = A, r.onloadend = function (A) { var r = btoa(A.target.result || ""); t({ "__local_forage_encoded_blob": !0, "data": r, "type": e.type }) }, r.readAsBinaryString(e) }) }(t) }) : t }).then(function (t) { createTransaction(r._dbInfo, l, function (o, n) { if (o) return i(o); try { var s = n.objectStore(r._dbInfo.storeName); null === t && (t = void 0); var a = s.put(t, e); n.oncomplete = function () { void 0 === t && (t = null), A(t) }, n.onabort = n.onerror = function () { var e = a.error ? a.error : a.transaction.error; i(e) } } catch (e) { i(e) } }) }).catch(i) }); return executeCallback(i, A), i }, "removeItem": function removeItem(e, t) { var A = this; e = normalizeKey(e); var r = new o(function (t, r) { A.ready().then(function () { createTransaction(A._dbInfo, l, function (i, o) { if (i) return r(i); try { var n = o.objectStore(A._dbInfo.storeName).delete(e); o.oncomplete = function () { t() }, o.onerror = function () { r(n.error) }, o.onabort = function () { var e = n.error ? n.error : n.transaction.error; r(e) } } catch (e) { r(e) } }) }).catch(r) }); return executeCallback(r, t), r }, "clear": function clear(e) { var t = this, A = new o(function (e, A) { t.ready().then(function () { createTransaction(t._dbInfo, l, function (r, i) { if (r) return A(r); try { var o = i.objectStore(t._dbInfo.storeName).clear(); i.oncomplete = function () { e() }, i.onabort = i.onerror = function () { var e = o.error ? o.error : o.transaction.error; A(e) } } catch (e) { A(e) } }) }).catch(A) }); return executeCallback(A, e), A }, "length": function length(e) { var t = this, A = new o(function (e, A) { t.ready().then(function () { createTransaction(t._dbInfo, u, function (r, i) { if (r) return A(r); try { var o = i.objectStore(t._dbInfo.storeName).count(); o.onsuccess = function () { e(o.result) }, o.onerror = function () { A(o.error) } } catch (e) { A(e) } }) }).catch(A) }); return executeCallback(A, e), A }, "key": function key(e, t) { var A = this, r = new o(function (t, r) { e < 0 ? t(null) : A.ready().then(function () { createTransaction(A._dbInfo, u, function (i, o) { if (i) return r(i); try { var n = o.objectStore(A._dbInfo.storeName), s = !1, a = n.openKeyCursor(); a.onsuccess = function () { var A = a.result; A ? 0 === e ? t(A.key) : s ? t(A.key) : (s = !0, A.advance(e)) : t(null) }, a.onerror = function () { r(a.error) } } catch (e) { r(e) } }) }).catch(r) }); return executeCallback(r, t), r }, "keys": function keys(e) { var t = this, A = new o(function (e, A) { t.ready().then(function () { createTransaction(t._dbInfo, u, function (r, i) { if (r) return A(r); try { var o = i.objectStore(t._dbInfo.storeName).openKeyCursor(), n = []; o.onsuccess = function () { var t = o.result; t ? (n.push(t.key), t.continue()) : e(n) }, o.onerror = function () { A(o.error) } } catch (e) { A(e) } }) }).catch(A) }); return executeCallback(A, e), A }, "dropInstance": function dropInstance(e, t) { t = getCallback.apply(this, arguments); var A, r = this.config(); if ((e = "function" != typeof e && e || {}).name || (e.name = e.name || r.name, e.storeName = e.storeName || r.storeName), e.name) { var n = e.name === r.name && this._dbInfo.db ? o.resolve(this._dbInfo.db) : _getOriginalConnection(e).then(function (t) { var A = a[e.name], r = A.forages; A.db = t; for (var i = 0; i < r.length; i++)r[i]._dbInfo.db = t; return t }); A = e.storeName ? n.then(function (t) { if (t.objectStoreNames.contains(e.storeName)) { var A = t.version + 1; _deferReadiness(e); var r = a[e.name], n = r.forages; t.close(); for (var s = 0; s < n.length; s++) { var c = n[s]; c._dbInfo.db = null, c._dbInfo.version = A } return new o(function (t, r) { var o = i.open(e.name, A); o.onerror = function (e) { o.result.close(), r(e) }, o.onupgradeneeded = function () { o.result.deleteObjectStore(e.storeName) }, o.onsuccess = function () { var e = o.result; e.close(), t(e) } }).then(function (e) { r.db = e; for (var t = 0; t < n.length; t++) { var A = n[t]; A._dbInfo.db = e, _advanceReadiness(A._dbInfo) } }).catch(function (t) { throw (_rejectReadiness(e, t) || o.resolve()).catch(function () { }), t }) } }) : n.then(function (t) { _deferReadiness(e); var A = a[e.name], r = A.forages; t.close(); for (var n = 0; n < r.length; n++)r[n]._dbInfo.db = null; return new o(function (t, A) { var r = i.deleteDatabase(e.name); r.onerror = function () { var e = r.result; e && e.close(), A(r.error) }, r.onblocked = function () { console.warn('dropInstance blocked for database "' + e.name + '" until all open connections are closed') }, r.onsuccess = function () { var e = r.result; e && e.close(), t(e) } }).then(function (e) { A.db = e; for (var t = 0; t < r.length; t++)_advanceReadiness(r[t]._dbInfo) }).catch(function (t) { throw (_rejectReadiness(e, t) || o.resolve()).catch(function () { }), t }) }) } else A = o.reject("Invalid arguments"); return executeCallback(A, t), A } }; var d = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/", C = "~~local_forage_type~", I = /^~~local_forage_type~([^~]+)~/, E = "__lfsc__:", p = E.length, f = "arbf", B = "blob", _ = "si08", m = "ui08", Q = "uic8", y = "si16", v = "si32", S = "ur16", D = "ui32", R = "fl32", b = "fl64", T = p + f.length, k = Object.prototype.toString; function stringToBuffer(e) { var t, A, r, i, o, n = .75 * e.length, s = e.length, a = 0; "=" === e[e.length - 1] && (n--, "=" === e[e.length - 2] && n--); var c = new ArrayBuffer(n), g = new Uint8Array(c); for (t = 0; t < s; t += 4)A = d.indexOf(e[t]), r = d.indexOf(e[t + 1]), i = d.indexOf(e[t + 2]), o = d.indexOf(e[t + 3]), g[a++] = A << 2 | r >> 4, g[a++] = (15 & r) << 4 | i >> 2, g[a++] = (3 & i) << 6 | 63 & o; return c } function bufferToString(e) { var t, A = new Uint8Array(e), r = ""; for (t = 0; t < A.length; t += 3)r += d[A[t] >> 2], r += d[(3 & A[t]) << 4 | A[t + 1] >> 4], r += d[(15 & A[t + 1]) << 2 | A[t + 2] >> 6], r += d[63 & A[t + 2]]; return A.length % 3 == 2 ? r = r.substring(0, r.length - 1) + "=" : A.length % 3 == 1 && (r = r.substring(0, r.length - 2) + "=="), r } var w = { "serialize": function serialize(e, t) { var A = ""; if (e && (A = k.call(e)), e && ("[object ArrayBuffer]" === A || e.buffer && "[object ArrayBuffer]" === k.call(e.buffer))) { var r, i = E; e instanceof ArrayBuffer ? (r = e, i += f) : (r = e.buffer, "[object Int8Array]" === A ? i += _ : "[object Uint8Array]" === A ? i += m : "[object Uint8ClampedArray]" === A ? i += Q : "[object Int16Array]" === A ? i += y : "[object Uint16Array]" === A ? i += S : "[object Int32Array]" === A ? i += v : "[object Uint32Array]" === A ? i += D : "[object Float32Array]" === A ? i += R : "[object Float64Array]" === A ? i += b : t(new Error("Failed to get type for BinaryArray"))), t(i + bufferToString(r)) } else if ("[object Blob]" === A) { var o = new FileReader; o.onload = function () { var A = C + e.type + "~" + bufferToString(this.result); t(E + B + A) }, o.readAsArrayBuffer(e) } else try { t(JSON.stringify(e)) } catch (A) { console.error("Couldn't convert value into a JSON string: ", e), t(null, A) } }, "deserialize": function deserialize(e) { if (e.substring(0, p) !== E) return JSON.parse(e); var t, A = e.substring(T), r = e.substring(p, T); if (r === B && I.test(A)) { var i = A.match(I); t = i[1], A = A.substring(i[0].length) } var o = stringToBuffer(A); switch (r) { case f: return o; case B: return createBlob([o], { "type": t }); case _: return new Int8Array(o); case m: return new Uint8Array(o); case Q: return new Uint8ClampedArray(o); case y: return new Int16Array(o); case S: return new Uint16Array(o); case v: return new Int32Array(o); case D: return new Uint32Array(o); case R: return new Float32Array(o); case b: return new Float64Array(o); default: throw new Error("Unkown type: " + r) } }, "stringToBuffer": stringToBuffer, "bufferToString": bufferToString }; function createDbTable(e, t, A, r) { e.executeSql("CREATE TABLE IF NOT EXISTS " + t.storeName + " (id INTEGER PRIMARY KEY, key unique, value)", [], A, r) } function tryExecuteSql(e, t, A, r, i, o) { e.executeSql(A, r, i, function (e, n) { n.code === n.SYNTAX_ERR ? e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?", [t.storeName], function (e, s) { s.rows.length ? o(e, n) : createDbTable(e, t, function () { e.executeSql(A, r, i, o) }, o) }, o) : o(e, n) }, o) } var N = { "_driver": "webSQLStorage", "_initStorage": function _initStorage$1(e) { var t = this, A = { "db": null }; if (e) for (var r in e) A[r] = "string" != typeof e[r] ? e[r].toString() : e[r]; var i = new o(function (e, r) { try { A.db = openDatabase(A.name, String(A.version), A.description, A.size) } catch (e) { return r(e) } A.db.transaction(function (i) { createDbTable(i, A, function () { t._dbInfo = A, e() }, function (e, t) { r(t) }) }, r) }); return A.serializer = w, i }, "_support": function isWebSQLValid() { return "function" == typeof openDatabase }(), "iterate": function iterate$1(e, t) { var A = this, r = new o(function (t, r) { A.ready().then(function () { var i = A._dbInfo; i.db.transaction(function (A) { tryExecuteSql(A, i, "SELECT * FROM " + i.storeName, [], function (A, r) { for (var o = r.rows, n = o.length, s = 0; s < n; s++) { var a = o.item(s), c = a.value; if (c && (c = i.serializer.deserialize(c)), void 0 !== (c = e(c, a.key, s + 1))) return void t(c) } t() }, function (e, t) { r(t) }) }) }).catch(r) }); return executeCallback(r, t), r }, "getItem": function getItem$1(e, t) { var A = this; e = normalizeKey(e); var r = new o(function (t, r) { A.ready().then(function () { var i = A._dbInfo; i.db.transaction(function (A) { tryExecuteSql(A, i, "SELECT * FROM " + i.storeName + " WHERE key = ? LIMIT 1", [e], function (e, A) { var r = A.rows.length ? A.rows.item(0).value : null; r && (r = i.serializer.deserialize(r)), t(r) }, function (e, t) { r(t) }) }) }).catch(r) }); return executeCallback(r, t), r }, "setItem": function setItem$1(e, t, A) { return function _setItem(e, t, A, r) { var i = this; e = normalizeKey(e); var n = new o(function (o, n) { i.ready().then(function () { void 0 === t && (t = null); var s = t, a = i._dbInfo; a.serializer.serialize(t, function (t, c) { c ? n(c) : a.db.transaction(function (A) { tryExecuteSql(A, a, "INSERT OR REPLACE INTO " + a.storeName + " (key, value) VALUES (?, ?)", [e, t], function () { o(s) }, function (e, t) { n(t) }) }, function (t) { if (t.code === t.QUOTA_ERR) { if (r > 0) return void o(_setItem.apply(i, [e, s, A, r - 1])); n(t) } }) }) }).catch(n) }); return executeCallback(n, A), n }.apply(this, [e, t, A, 1]) }, "removeItem": function removeItem$1(e, t) { var A = this; e = normalizeKey(e); var r = new o(function (t, r) { A.ready().then(function () { var i = A._dbInfo; i.db.transaction(function (A) { tryExecuteSql(A, i, "DELETE FROM " + i.storeName + " WHERE key = ?", [e], function () { t() }, function (e, t) { r(t) }) }) }).catch(r) }); return executeCallback(r, t), r }, "clear": function clear$1(e) { var t = this, A = new o(function (e, A) { t.ready().then(function () { var r = t._dbInfo; r.db.transaction(function (t) { tryExecuteSql(t, r, "DELETE FROM " + r.storeName, [], function () { e() }, function (e, t) { A(t) }) }) }).catch(A) }); return executeCallback(A, e), A }, "length": function length$1(e) { var t = this, A = new o(function (e, A) { t.ready().then(function () { var r = t._dbInfo; r.db.transaction(function (t) { tryExecuteSql(t, r, "SELECT COUNT(key) as c FROM " + r.storeName, [], function (t, A) { var r = A.rows.item(0).c; e(r) }, function (e, t) { A(t) }) }) }).catch(A) }); return executeCallback(A, e), A }, "key": function key$1(e, t) { var A = this, r = new o(function (t, r) { A.ready().then(function () { var i = A._dbInfo; i.db.transaction(function (A) { tryExecuteSql(A, i, "SELECT key FROM " + i.storeName + " WHERE id = ? LIMIT 1", [e + 1], function (e, A) { var r = A.rows.length ? A.rows.item(0).key : null; t(r) }, function (e, t) { r(t) }) }) }).catch(r) }); return executeCallback(r, t), r }, "keys": function keys$1(e) { var t = this, A = new o(function (e, A) { t.ready().then(function () { var r = t._dbInfo; r.db.transaction(function (t) { tryExecuteSql(t, r, "SELECT key FROM " + r.storeName, [], function (t, A) { for (var r = [], i = 0; i < A.rows.length; i++)r.push(A.rows.item(i).key); e(r) }, function (e, t) { A(t) }) }) }).catch(A) }); return executeCallback(A, e), A }, "dropInstance": function dropInstance$1(e, t) { t = getCallback.apply(this, arguments); var A = this.config(); (e = "function" != typeof e && e || {}).name || (e.name = e.name || A.name, e.storeName = e.storeName || A.storeName); var r, i = this; return executeCallback(r = e.name ? new o(function (t) { var r; r = e.name === A.name ? i._dbInfo.db : openDatabase(e.name, "", "", 0), e.storeName ? t({ "db": r, "storeNames": [e.storeName] }) : t(function getAllStoreNames(e) { return new o(function (t, A) { e.transaction(function (r) { r.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'", [], function (A, r) { for (var i = [], o = 0; o < r.rows.length; o++)i.push(r.rows.item(o).name); t({ "db": e, "storeNames": i }) }, function (e, t) { A(t) }) }, function (e) { A(e) }) }) }(r)) }).then(function (e) { return new o(function (t, A) { e.db.transaction(function (r) { function dropTable(e) { return new o(function (t, A) { r.executeSql("DROP TABLE IF EXISTS " + e, [], function () { t() }, function (e, t) { A(t) }) }) } for (var i = [], n = 0, s = e.storeNames.length; n < s; n++)i.push(dropTable(e.storeNames[n])); o.all(i).then(function () { t() }).catch(function (e) { A(e) }) }, function (e) { A(e) }) }) }) : o.reject("Invalid arguments"), t), r } }; function _getKeyPrefix(e, t) { var A = e.name + "/"; return e.storeName !== t.storeName && (A += e.storeName + "/"), A } function _isLocalStorageUsable() { return !function checkIfLocalStorageThrows() { try { return localStorage.setItem("_localforage_support_test", !0), localStorage.removeItem("_localforage_support_test"), !1 } catch (e) { return !0 } }() || localStorage.length > 0 } var L = { "_driver": "localStorageWrapper", "_initStorage": function _initStorage$2(e) { var t = {}; if (e) for (var A in e) t[A] = e[A]; return t.keyPrefix = _getKeyPrefix(e, this._defaultConfig), _isLocalStorageUsable() ? (this._dbInfo = t, t.serializer = w, o.resolve()) : o.reject() }, "_support": function isLocalStorageValid() { try { return "undefined" != typeof localStorage && "setItem" in localStorage && !!localStorage.setItem } catch (e) { return !1 } }(), "iterate": function iterate$2(e, t) { var A = this, r = A.ready().then(function () { for (var t = A._dbInfo, r = t.keyPrefix, i = r.length, o = localStorage.length, n = 1, s = 0; s < o; s++) { var a = localStorage.key(s); if (0 === a.indexOf(r)) { var c = localStorage.getItem(a); if (c && (c = t.serializer.deserialize(c)), void 0 !== (c = e(c, a.substring(i), n++))) return c } } }); return executeCallback(r, t), r }, "getItem": function getItem$2(e, t) { var A = this; e = normalizeKey(e); var r = A.ready().then(function () { var t = A._dbInfo, r = localStorage.getItem(t.keyPrefix + e); return r && (r = t.serializer.deserialize(r)), r }); return executeCallback(r, t), r }, "setItem": function setItem$2(e, t, A) { var r = this; e = normalizeKey(e); var i = r.ready().then(function () { void 0 === t && (t = null); var A = t; return new o(function (i, o) { var n = r._dbInfo; n.serializer.serialize(t, function (t, r) { if (r) o(r); else try { localStorage.setItem(n.keyPrefix + e, t), i(A) } catch (e) { "QuotaExceededError" !== e.name && "NS_ERROR_DOM_QUOTA_REACHED" !== e.name || o(e), o(e) } }) }) }); return executeCallback(i, A), i }, "removeItem": function removeItem$2(e, t) { var A = this; e = normalizeKey(e); var r = A.ready().then(function () { var t = A._dbInfo; localStorage.removeItem(t.keyPrefix + e) }); return executeCallback(r, t), r }, "clear": function clear$2(e) { var t = this, A = t.ready().then(function () { for (var e = t._dbInfo.keyPrefix, A = localStorage.length - 1; A >= 0; A--) { var r = localStorage.key(A); 0 === r.indexOf(e) && localStorage.removeItem(r) } }); return executeCallback(A, e), A }, "length": function length$2(e) { var t = this.keys().then(function (e) { return e.length }); return executeCallback(t, e), t }, "key": function key$2(e, t) { var A = this, r = A.ready().then(function () { var t, r = A._dbInfo; try { t = localStorage.key(e) } catch (e) { t = null } return t && (t = t.substring(r.keyPrefix.length)), t }); return executeCallback(r, t), r }, "keys": function keys$2(e) { var t = this, A = t.ready().then(function () { for (var e = t._dbInfo, A = localStorage.length, r = [], i = 0; i < A; i++) { var o = localStorage.key(i); 0 === o.indexOf(e.keyPrefix) && r.push(o.substring(e.keyPrefix.length)) } return r }); return executeCallback(A, e), A }, "dropInstance": function dropInstance$2(e, t) { if (t = getCallback.apply(this, arguments), !(e = "function" != typeof e && e || {}).name) { var A = this.config(); e.name = e.name || A.name, e.storeName = e.storeName || A.storeName } var r, i = this; return executeCallback(r = e.name ? new o(function (t) { e.storeName ? t(_getKeyPrefix(e, i._defaultConfig)) : t(e.name + "/") }).then(function (e) { for (var t = localStorage.length - 1; t >= 0; t--) { var A = localStorage.key(t); 0 === A.indexOf(e) && localStorage.removeItem(A) } }) : o.reject("Invalid arguments"), t), r } }, O = function sameValue(e, t) { return e === t || "number" == typeof e && "number" == typeof t && isNaN(e) && isNaN(t) }, M = function includes(e, t) { for (var A = e.length, r = 0; r < A;) { if (O(e[r], t)) return !0; r++ } return !1 }, P = Array.isArray || function (e) { return "[object Array]" === Object.prototype.toString.call(e) }, U = {}, G = {}, F = { "INDEXEDDB": h, "WEBSQL": N, "LOCALSTORAGE": L }, H = [F.INDEXEDDB._driver, F.WEBSQL._driver, F.LOCALSTORAGE._driver], x = ["dropInstance"], q = ["clear", "getItem", "iterate", "key", "keys", "length", "removeItem", "setItem"].concat(x), Y = { "description": "", "driver": H.slice(), "name": "localforage", "size": 4980736, "storeName": "keyvaluepairs", "version": 1 }; function callWhenReady(e, t) { e[t] = function () { var A = arguments; return e.ready().then(function () { return e[t].apply(e, A) }) } } function extend() { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; if (t) for (var A in t) t.hasOwnProperty(A) && (P(t[A]) ? arguments[0][A] = t[A].slice() : arguments[0][A] = t[A]) } return arguments[0] } var J = new (function () { function LocalForage(e) { for (var t in function _classCallCheck(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, LocalForage), F) if (F.hasOwnProperty(t)) { var A = F[t], r = A._driver; this[t] = r, U[r] || this.defineDriver(A) } this._defaultConfig = extend({}, Y), this._config = extend({}, this._defaultConfig, e), this._driverSet = null, this._initDriver = null, this._ready = !1, this._dbInfo = null, this._wrapLibraryMethodsWithReady(), this.setDriver(this._config.driver).catch(function () { }) } return LocalForage.prototype.config = function config(e) { if ("object" === (void 0 === e ? "undefined" : r(e))) { if (this._ready) return new Error("Can't call config() after localforage has been used."); for (var t in e) { if ("storeName" === t && (e[t] = e[t].replace(/\W/g, "_")), "version" === t && "number" != typeof e[t]) return new Error("Database version must be a number."); this._config[t] = e[t] } return !("driver" in e && e.driver) || this.setDriver(this._config.driver) } return "string" == typeof e ? this._config[e] : this._config }, LocalForage.prototype.defineDriver = function defineDriver(e, t, A) { var r = new o(function (t, A) { try { var r = e._driver, i = new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver"); if (!e._driver) return void A(i); for (var n = q.concat("_initStorage"), s = 0, a = n.length; s < a; s++) { var c = n[s]; if ((!M(x, c) || e[c]) && "function" != typeof e[c]) return void A(i) } !function configureMissingMethods() { for (var t = function methodNotImplementedFactory(e) { return function () { var t = new Error("Method " + e + " is not implemented by the current driver"), A = o.reject(t); return executeCallback(A, arguments[arguments.length - 1]), A } }, A = 0, r = x.length; A < r; A++) { var i = x[A]; e[i] || (e[i] = t(i)) } }(); var g = function setDriverSupport(A) { U[r] && console.info("Redefining LocalForage driver: " + r), U[r] = e, G[r] = A, t() }; "_support" in e ? e._support && "function" == typeof e._support ? e._support().then(g, A) : g(!!e._support) : g(!0) } catch (e) { A(e) } }); return executeTwoCallbacks(r, t, A), r }, LocalForage.prototype.driver = function driver() { return this._driver || null }, LocalForage.prototype.getDriver = function getDriver(e, t, A) { var r = U[e] ? o.resolve(U[e]) : o.reject(new Error("Driver not found.")); return executeTwoCallbacks(r, t, A), r }, LocalForage.prototype.getSerializer = function getSerializer(e) { var t = o.resolve(w); return executeTwoCallbacks(t, e), t }, LocalForage.prototype.ready = function ready(e) { var t = this, A = t._driverSet.then(function () { return null === t._ready && (t._ready = t._initDriver()), t._ready }); return executeTwoCallbacks(A, e, e), A }, LocalForage.prototype.setDriver = function setDriver(e, t, A) { var r = this; P(e) || (e = [e]); var i = this._getSupportedDrivers(e); function setDriverToConfig() { r._config.driver = r.driver() } function extendSelfWithDriver(e) { return r._extend(e), setDriverToConfig(), r._ready = r._initStorage(r._config), r._ready } var n = null !== this._driverSet ? this._driverSet.catch(function () { return o.resolve() }) : o.resolve(); return this._driverSet = n.then(function () { var e = i[0]; return r._dbInfo = null, r._ready = null, r.getDriver(e).then(function (e) { r._driver = e._driver, setDriverToConfig(), r._wrapLibraryMethodsWithReady(), r._initDriver = function initDriver(e) { return function () { var t = 0; return function driverPromiseLoop() { for (; t < e.length;) { var A = e[t]; return t++, r._dbInfo = null, r._ready = null, r.getDriver(A).then(extendSelfWithDriver).catch(driverPromiseLoop) } setDriverToConfig(); var i = new Error("No available storage method found."); return r._driverSet = o.reject(i), r._driverSet }() } }(i) }) }).catch(function () { setDriverToConfig(); var e = new Error("No available storage method found."); return r._driverSet = o.reject(e), r._driverSet }), executeTwoCallbacks(this._driverSet, t, A), this._driverSet }, LocalForage.prototype.supports = function supports(e) { return !!G[e] }, LocalForage.prototype._extend = function _extend(e) { extend(this, e) }, LocalForage.prototype._getSupportedDrivers = function _getSupportedDrivers(e) { for (var t = [], A = 0, r = e.length; A < r; A++) { var i = e[A]; this.supports(i) && t.push(i) } return t }, LocalForage.prototype._wrapLibraryMethodsWithReady = function _wrapLibraryMethodsWithReady() { for (var e = 0, t = q.length; e < t; e++)callWhenReady(this, q[e]) }, LocalForage.prototype.createInstance = function createInstance(e) { return new LocalForage(e) }, LocalForage }()); t.exports = J }, { "3": 3 }] }, {}, [4])(4) }, "object" === c(t) && void 0 !== e ? e.exports = a() : (i = [], void 0 === (o = "function" == typeof (r = a) ? r.apply(t, i) : r) || (e.exports = o)) }).call(this, A(13)) }, "243": function (module, exports, __webpack_require__) { (function (module) { var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__, _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) { return typeof e } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e }, e; "undefined" != typeof self && self, e = function (__WEBPACK_EXTERNAL_MODULE__4119__) { return function () { var __webpack_modules__ = { "4537": function _(e) { "use strict"; e.exports = function (e, t) { for (var A = new Array(arguments.length - 1), r = 0, i = 2, o = !0; i < arguments.length;)A[r++] = arguments[i++]; return new Promise(function (i, n) { A[r] = function (e) { if (o) if (o = !1, e) n(e); else { for (var t = new Array(arguments.length - 1), A = 0; A < t.length;)t[A++] = arguments[A]; i.apply(null, t) } }; try { e.apply(t || null, A) } catch (e) { o && (o = !1, n(e)) } }) } }, "7419": function _(e, t) { "use strict"; var A = t; A.length = function (e) { var t = e.length; if (!t) return 0; for (var A = 0; --t % 4 > 1 && "=" === e.charAt(t);)++A; return Math.ceil(3 * e.length) / 4 - A }; for (var r = new Array(64), i = new Array(123), o = 0; o < 64;)i[r[o] = o < 26 ? o + 65 : o < 52 ? o + 71 : o < 62 ? o - 4 : o - 59 | 43] = o++; A.encode = function (e, t, A) { for (var i, o = null, n = [], s = 0, a = 0; t < A;) { var c = e[t++]; switch (a) { case 0: n[s++] = r[c >> 2], i = (3 & c) << 4, a = 1; break; case 1: n[s++] = r[i | c >> 4], i = (15 & c) << 2, a = 2; break; case 2: n[s++] = r[i | c >> 6], n[s++] = r[63 & c], a = 0 }s > 8191 && ((o || (o = [])).push(String.fromCharCode.apply(String, n)), s = 0) } return a && (n[s++] = r[i], n[s++] = 61, 1 === a && (n[s++] = 61)), o ? (s && o.push(String.fromCharCode.apply(String, n.slice(0, s))), o.join("")) : String.fromCharCode.apply(String, n.slice(0, s)) }; var n = "invalid encoding"; A.decode = function (e, t, A) { for (var r, o = A, s = 0, a = 0; a < e.length;) { var c = e.charCodeAt(a++); if (61 === c && s > 1) break; if (void 0 === (c = i[c])) throw Error(n); switch (s) { case 0: r = c, s = 1; break; case 1: t[A++] = r << 2 | (48 & c) >> 4, r = c, s = 2; break; case 2: t[A++] = (15 & r) << 4 | (60 & c) >> 2, r = c, s = 3; break; case 3: t[A++] = (3 & r) << 6 | c, s = 0 } } if (1 === s) throw Error(n); return A - o }, A.test = function (e) { return /^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e) } }, "9211": function _(t) { "use strict"; function e() { this._listeners = {} } t.exports = e, e.prototype.on = function (e, t, A) { return (this._listeners[e] || (this._listeners[e] = [])).push({ "fn": t, "ctx": A || this }), this }, e.prototype.off = function (e, t) { if (void 0 === e) this._listeners = {}; else if (void 0 === t) this._listeners[e] = []; else for (var A = this._listeners[e], r = 0; r < A.length;)A[r].fn === t ? A.splice(r, 1) : ++r; return this }, e.prototype.emit = function (e) { var t = this._listeners[e]; if (t) { for (var A = [], r = 1; r < arguments.length;)A.push(arguments[r++]); for (r = 0; r < t.length;)t[r].fn.apply(t[r++].ctx, A) } return this } }, "945": function _(A) { "use strict"; function e(A) { return "undefined" != typeof Float32Array ? function () { var e = new Float32Array([-0]), t = new Uint8Array(e.buffer), i = 128 === t[3]; function r(A, r, i) { e[0] = A, r[i] = t[0], r[i + 1] = t[1], r[i + 2] = t[2], r[i + 3] = t[3] } function o(A, r, i) { e[0] = A, r[i] = t[3], r[i + 1] = t[2], r[i + 2] = t[1], r[i + 3] = t[0] } function n(A, r) { return t[0] = A[r], t[1] = A[r + 1], t[2] = A[r + 2], t[3] = A[r + 3], e[0] } function s(A, r) { return t[3] = A[r], t[2] = A[r + 1], t[1] = A[r + 2], t[0] = A[r + 3], e[0] } A.writeFloatLE = i ? r : o, A.writeFloatBE = i ? o : r, A.readFloatLE = i ? n : s, A.readFloatBE = i ? s : n }() : function () { function e(e, t, A, r) { var i = t < 0 ? 1 : 0; if (i && (t = -t), 0 === t) e(1 / t > 0 ? 0 : 2147483648, A, r); else if (isNaN(t)) e(2143289344, A, r); else if (t > 3.4028234663852886e38) e((i << 31 | 2139095040) >>> 0, A, r); else if (t < 1.1754943508222875e-38) e((i << 31 | Math.round(t / 1.401298464324817e-45)) >>> 0, A, r); else { var o = Math.floor(Math.log(t) / Math.LN2); e((i << 31 | o + 127 << 23 | 8388607 & Math.round(t * Math.pow(2, -o) * 8388608)) >>> 0, A, r) } } function n(e, t, A) { var r = e(t, A), i = 2 * (r >> 31) + 1, o = r >>> 23 & 255, n = 8388607 & r; return 255 === o ? n ? NaN : i * (1 / 0) : 0 === o ? 1.401298464324817e-45 * i * n : i * Math.pow(2, o - 150) * (n + 8388608) } A.writeFloatLE = e.bind(null, t), A.writeFloatBE = e.bind(null, i), A.readFloatLE = n.bind(null, r), A.readFloatBE = n.bind(null, o) }(), "undefined" != typeof Float64Array ? function () { var e = new Float64Array([-0]), t = new Uint8Array(e.buffer), i = 128 === t[7]; function r(A, r, i) { e[0] = A, r[i] = t[0], r[i + 1] = t[1], r[i + 2] = t[2], r[i + 3] = t[3], r[i + 4] = t[4], r[i + 5] = t[5], r[i + 6] = t[6], r[i + 7] = t[7] } function o(A, r, i) { e[0] = A, r[i] = t[7], r[i + 1] = t[6], r[i + 2] = t[5], r[i + 3] = t[4], r[i + 4] = t[3], r[i + 5] = t[2], r[i + 6] = t[1], r[i + 7] = t[0] } function n(A, r) { return t[0] = A[r], t[1] = A[r + 1], t[2] = A[r + 2], t[3] = A[r + 3], t[4] = A[r + 4], t[5] = A[r + 5], t[6] = A[r + 6], t[7] = A[r + 7], e[0] } function s(A, r) { return t[7] = A[r], t[6] = A[r + 1], t[5] = A[r + 2], t[4] = A[r + 3], t[3] = A[r + 4], t[2] = A[r + 5], t[1] = A[r + 6], t[0] = A[r + 7], e[0] } A.writeDoubleLE = i ? r : o, A.writeDoubleBE = i ? o : r, A.readDoubleLE = i ? n : s, A.readDoubleBE = i ? s : n }() : function () { function e(e, t, A, r, i, o) { var n = r < 0 ? 1 : 0; if (n && (r = -r), 0 === r) e(0, i, o + t), e(1 / r > 0 ? 0 : 2147483648, i, o + A); else if (isNaN(r)) e(0, i, o + t), e(2146959360, i, o + A); else if (r > 1.7976931348623157e308) e(0, i, o + t), e((n << 31 | 2146435072) >>> 0, i, o + A); else { var s; if (r < 2.2250738585072014e-308) e((s = r / 5e-324) >>> 0, i, o + t), e((n << 31 | s / 4294967296) >>> 0, i, o + A); else { var a = Math.floor(Math.log(r) / Math.LN2); 1024 === a && (a = 1023), e(4503599627370496 * (s = r * Math.pow(2, -a)) >>> 0, i, o + t), e((n << 31 | a + 1023 << 20 | 1048576 * s & 1048575) >>> 0, i, o + A) } } } function n(e, t, A, r, i) { var o = e(r, i + t), n = e(r, i + A), s = 2 * (n >> 31) + 1, a = n >>> 20 & 2047, c = 4294967296 * (1048575 & n) + o; return 2047 === a ? c ? NaN : s * (1 / 0) : 0 === a ? 5e-324 * s * c : s * Math.pow(2, a - 1075) * (c + 4503599627370496) } A.writeDoubleLE = e.bind(null, t, 0, 4), A.writeDoubleBE = e.bind(null, i, 4, 0), A.readDoubleLE = n.bind(null, r, 0, 4), A.readDoubleBE = n.bind(null, o, 4, 0) }(), A } function t(e, t, A) { t[A] = 255 & e, t[A + 1] = e >>> 8 & 255, t[A + 2] = e >>> 16 & 255, t[A + 3] = e >>> 24 } function i(e, t, A) { t[A] = e >>> 24, t[A + 1] = e >>> 16 & 255, t[A + 2] = e >>> 8 & 255, t[A + 3] = 255 & e } function r(e, t) { return (e[t] | e[t + 1] << 8 | e[t + 2] << 16 | e[t + 3] << 24) >>> 0 } function o(e, t) { return (e[t] << 24 | e[t + 1] << 16 | e[t + 2] << 8 | e[t + 3]) >>> 0 } A.exports = e(e) }, "7199": function _(module) { "use strict"; function inquire(moduleName) { try { var mod = eval("quire".replace(/^/, "re"))(moduleName); if (mod && (mod.length || Object.keys(mod).length)) return mod } catch (e) { } return null } module.exports = inquire }, "6662": function _(e) { "use strict"; e.exports = function (e, t, A) { var r = A || 8192, i = r >>> 1, o = null, n = r; return function (A) { if (A < 1 || A > i) return e(A); n + A > r && (o = e(r), n = 0); var s = t.call(o, n, n += A); return 7 & n && (n = 1 + (7 | n)), s } } }, "4997": function _(e, t) { "use strict"; var A = t; A.length = function (e) { for (var t = 0, A = 0, r = 0; r < e.length; ++r)(A = e.charCodeAt(r)) < 128 ? t += 1 : A < 2048 ? t += 2 : 55296 == (64512 & A) && 56320 == (64512 & e.charCodeAt(r + 1)) ? (++r, t += 4) : t += 3; return t }, A.read = function (e, t, A) { if (A - t < 1) return ""; for (var r, i = null, o = [], n = 0; t < A;)(r = e[t++]) < 128 ? o[n++] = r : r > 191 && r < 224 ? o[n++] = (31 & r) << 6 | 63 & e[t++] : r > 239 && r < 365 ? (r = ((7 & r) << 18 | (63 & e[t++]) << 12 | (63 & e[t++]) << 6 | 63 & e[t++]) - 65536, o[n++] = 55296 + (r >> 10), o[n++] = 56320 + (1023 & r)) : o[n++] = (15 & r) << 12 | (63 & e[t++]) << 6 | 63 & e[t++], n > 8191 && ((i || (i = [])).push(String.fromCharCode.apply(String, o)), n = 0); return i ? (n && i.push(String.fromCharCode.apply(String, o.slice(0, n))), i.join("")) : String.fromCharCode.apply(String, o.slice(0, n)) }, A.write = function (e, t, A) { for (var r, i, o = A, n = 0; n < e.length; ++n)(r = e.charCodeAt(n)) < 128 ? t[A++] = r : r < 2048 ? (t[A++] = r >> 6 | 192, t[A++] = 63 & r | 128) : 55296 == (64512 & r) && 56320 == (64512 & (i = e.charCodeAt(n + 1))) ? (++n, t[A++] = (r = 65536 + ((1023 & r) << 10) + (1023 & i)) >> 18 | 240, t[A++] = r >> 12 & 63 | 128, t[A++] = r >> 6 & 63 | 128, t[A++] = 63 & r | 128) : (t[A++] = r >> 12 | 224, t[A++] = r >> 6 & 63 | 128, t[A++] = 63 & r | 128); return A - o } }, "9483": function _(e, t, A) { e.exports = function A(e, t, i) { function r(n, s) { if (!t[n]) { if (!e[n]) { if (o) return o(n, !0); var a = new Error("Cannot find module '" + n + "'"); throw a.code = "MODULE_NOT_FOUND", a } var c = t[n] = { "exports": {} }; e[n][0].call(c.exports, function (t) { return r(e[n][1][t] || t) }, c, c.exports, A, e, t, i) } return t[n].exports } for (var o = void 0, n = 0; n < i.length; n++)r(i[n]); return r }({ "1": [function (e, t, r) { (function (e) { "use strict"; var A, r, i = e.MutationObserver || e.WebKitMutationObserver; if (i) { var o = 0, n = new i(C), s = e.document.createTextNode(""); n.observe(s, { "characterData": !0 }), A = function t() { s.data = o = ++o % 2 } } else if (e.setImmediate || void 0 === e.MessageChannel) A = "document" in e && "onreadystatechange" in e.document.createElement("script") ? function () { var t = e.document.createElement("script"); t.onreadystatechange = function () { C(), t.onreadystatechange = null, t.parentNode.removeChild(t), t = null }, e.document.documentElement.appendChild(t) } : function () { setTimeout(C, 0) }; else { var a = new e.MessageChannel; a.port1.onmessage = C, A = function t() { a.port2.postMessage(0) } } var c = []; function C() { var e, t; r = !0; for (var A = c.length; A;) { for (t = c, c = [], e = -1; ++e < A;)t[e](); A = c.length } r = !1 } t.exports = function I(e) { 1 !== c.push(e) || r || A() } }).call(this, void 0 !== A.g ? A.g : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {}) }, {}], "2": [function (e, t, A) { "use strict"; var o = e(1); function r() { } var s = {}, p = ["REJECTED"], f = ["FULFILLED"], _ = ["PENDING"]; function g(e) { if ("function" != typeof e) throw new TypeError("resolver must be a function"); this.state = _, this.queue = [], this.outcome = void 0, e !== r && E(this, e) } function C(e, t, A) { this.promise = e, "function" == typeof t && (this.onFulfilled = t, this.callFulfilled = this.otherCallFulfilled), "function" == typeof A && (this.onRejected = A, this.callRejected = this.otherCallRejected) } function I(e, t, A) { o(function () { var r; try { r = t(A) } catch (t) { return s.reject(e, t) } r === e ? s.reject(e, new TypeError("Cannot resolve promise with itself")) : s.resolve(e, r) }) } function c(e) { var t = e && e.then; if (e && ("object" == (void 0 === e ? "undefined" : _typeof(e)) || "function" == typeof e) && "function" == typeof t) return function () { t.apply(e, arguments) } } function E(e, t) { var A = !1; function i(t) { A || (A = !0, s.reject(e, t)) } function r(t) { A || (A = !0, s.resolve(e, t)) } var o = u(function n() { t(r, i) }); "error" === o.status && i(o.value) } function u(e, t) { var A = {}; try { A.value = e(t), A.status = "success" } catch (e) { A.status = "error", A.value = e } return A } t.exports = g, g.prototype.catch = function (e) { return this.then(null, e) }, g.prototype.then = function (e, t) { if ("function" != typeof e && this.state === f || "function" != typeof t && this.state === p) return this; var A = new this.constructor(r); return this.state !== _ ? I(A, this.state === f ? e : t, this.outcome) : this.queue.push(new C(A, e, t)), A }, C.prototype.callFulfilled = function (e) { s.resolve(this.promise, e) }, C.prototype.otherCallFulfilled = function (e) { I(this.promise, this.onFulfilled, e) }, C.prototype.callRejected = function (e) { s.reject(this.promise, e) }, C.prototype.otherCallRejected = function (e) { I(this.promise, this.onRejected, e) }, s.resolve = function (e, t) { var A = u(c, t); if ("error" === A.status) return s.reject(e, A.value); var r = A.value; if (r) E(e, r); else { e.state = f, e.outcome = t; for (var i = -1, o = e.queue.length; ++i < o;)e.queue[i].callFulfilled(t) } return e }, s.reject = function (e, t) { e.state = p, e.outcome = t; for (var A = -1, r = e.queue.length; ++A < r;)e.queue[A].callRejected(t); return e }, g.resolve = function l(e) { return e instanceof this ? e : s.resolve(new this(r), e) }, g.reject = function d(e) { var t = new this(r); return s.reject(t, e) }, g.all = function h(e) { var t = this; if ("[object Array]" !== Object.prototype.toString.call(e)) return this.reject(new TypeError("must be an array")); var A = e.length, i = !1; if (!A) return this.resolve([]); for (var o = new Array(A), n = 0, c = -1, g = new this(r); ++c < A;)C(e[c], c); return g; function C(e, r) { t.resolve(e).then(function a(e) { o[r] = e, ++n !== A || i || (i = !0, s.resolve(g, o)) }, function (e) { i || (i = !0, s.reject(g, e)) }) } }, g.race = function B(e) { var t = this; if ("[object Array]" !== Object.prototype.toString.call(e)) return this.reject(new TypeError("must be an array")); var A = e.length, i = !1; if (!A) return this.resolve([]); for (var o = -1, n = new this(r); ++o < A;)a(e[o]); return n; function a(e) { t.resolve(e).then(function (e) { i || (i = !0, s.resolve(n, e)) }, function (e) { i || (i = !0, s.reject(n, e)) }) } } }, { "1": 1 }], "3": [function (e, t, r) { (function (t) { "use strict"; "function" != typeof t.Promise && (t.Promise = e(2)) }).call(this, void 0 !== A.g ? A.g : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {}) }, { "2": 2 }], "4": [function (i, g, u) { "use strict"; var l = "function" == typeof Symbol && "symbol" == _typeof(Symbol.iterator) ? function (e) { return void 0 === e ? "undefined" : _typeof(e) } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : void 0 === e ? "undefined" : _typeof(e) }; var h = function o() { try { if ("undefined" != typeof indexedDB) return indexedDB; if ("undefined" != typeof webkitIndexedDB) return webkitIndexedDB; if ("undefined" != typeof mozIndexedDB) return mozIndexedDB; if ("undefined" != typeof OIndexedDB) return OIndexedDB; if ("undefined" != typeof msIndexedDB) return msIndexedDB } catch (e) { return } }(); function a(e, t) { e = e || [], t = t || {}; try { return new Blob(e, t) } catch (i) { if ("TypeError" !== i.name) throw i; for (var A = new ("undefined" != typeof BlobBuilder ? BlobBuilder : "undefined" != typeof MSBlobBuilder ? MSBlobBuilder : "undefined" != typeof MozBlobBuilder ? MozBlobBuilder : WebKitBlobBuilder), r = 0; r < e.length; r += 1)A.append(e[r]); return A.getBlob(t.type) } } "undefined" == typeof Promise && i(3); var d = Promise; function C(e, t) { t && e.then(function (e) { t(null, e) }, function (e) { t(e) }) } function I(e, t, A) { "function" == typeof t && e.then(t), "function" == typeof A && e.catch(A) } function c(e) { return "string" != typeof e && (console.warn(e + " used as a key, but it is not a string."), e = String(e)), e } function E() { if (arguments.length && "function" == typeof arguments[arguments.length - 1]) return arguments[arguments.length - 1] } var B = "local-forage-detect-blob-support", Q = void 0, O = {}, Z = Object.prototype.toString, j = "readonly", V = "readwrite"; function m(e) { return "boolean" == typeof Q ? d.resolve(Q) : function f(e) { return new d(function (t) { var A = e.transaction(B, V), r = a([""]); A.objectStore(B).put(r, "key"), A.onabort = function (e) { e.preventDefault(), e.stopPropagation(), t(!1) }, A.oncomplete = function () { var e = navigator.userAgent.match(/Chrome\/(\d+)/), A = navigator.userAgent.match(/Edge\//); t(A || !e || parseInt(e[1], 10) >= 43) } }).catch(function () { return !1 }) }(e).then(function (e) { return Q = e }) } function D(e) { var t = O[e.name], A = {}; A.promise = new d(function (e, t) { A.resolve = e, A.reject = t }), t.deferredOperations.push(A), t.dbReady = t.dbReady ? t.dbReady.then(function () { return A.promise }) : A.promise } function S(e) { var t = O[e.name].deferredOperations.pop(); if (t) return t.resolve(), t.promise } function y(e, t) { var A = O[e.name].deferredOperations.pop(); if (A) return A.reject(t), A.promise } function v(e, t) { return new d(function (A, r) { if (O[e.name] = O[e.name] || { "forages": [], "db": null, "dbReady": null, "deferredOperations": [] }, e.db) { if (!t) return A(e.db); D(e), e.db.close() } var i = [e.name]; t && i.push(e.version); var o = h.open.apply(h, i); t && (o.onupgradeneeded = function (t) { var A = o.result; try { A.createObjectStore(e.storeName), t.oldVersion <= 1 && A.createObjectStore(B) } catch (A) { if ("ConstraintError" !== A.name) throw A; console.warn('The database "' + e.name + '" has been upgraded from version ' + t.oldVersion + " to version " + t.newVersion + ', but the storage "' + e.storeName + '" already exists.') } }), o.onerror = function (e) { e.preventDefault(), r(o.error) }, o.onsuccess = function () { var t = o.result; t.onversionchange = function (e) { e.target.close() }, A(t), S(e) } }) } function _(e) { return v(e, !1) } function R(e) { return v(e, !0) } function k(e, t) { if (!e.db) return !0; var A = !e.db.objectStoreNames.contains(e.storeName), r = e.version > e.db.version; if (e.version < e.db.version && (e.version !== t && console.warn('The database "' + e.name + "\" can't be downgraded from version " + e.db.version + " to version " + e.version + "."), e.version = e.db.version), r || A) { if (A) { var i = e.db.version + 1; i > e.version && (e.version = i) } return !0 } return !1 } function w(e) { return a([function p(e) { for (var t = e.length, A = new ArrayBuffer(t), r = new Uint8Array(A), i = 0; i < t; i++)r[i] = e.charCodeAt(i); return A }(atob(e.data))], { "type": e.type }) } function T(e) { return e && e.__local_forage_encoded_blob } function L(e) { var t = this, A = t._initReady().then(function () { var e = O[t._dbInfo.name]; if (e && e.dbReady) return e.dbReady }); return I(A, e, e), A } function M(e, t, A, r) { void 0 === r && (r = 1); try { var i = e.db.transaction(e.storeName, t); A(null, i) } catch (i) { if (r > 0 && (!e.db || "InvalidStateError" === i.name || "NotFoundError" === i.name)) return d.resolve().then(function () { if (!e.db || "NotFoundError" === i.name && !e.db.objectStoreNames.contains(e.storeName) && e.version <= e.db.version) return e.db && (e.version = e.db.version + 1), R(e) }).then(function () { return function b(e) { D(e); for (var t = O[e.name], A = t.forages, r = 0; r < A.length; r++) { var i = A[r]; i._dbInfo.db && (i._dbInfo.db.close(), i._dbInfo.db = null) } return e.db = null, _(e).then(function (t) { return e.db = t, k(e) ? R(e) : t }).then(function (r) { e.db = t.db = r; for (var i = 0; i < A.length; i++)A[i]._dbInfo.db = r }).catch(function (t) { throw y(e, t), t }) }(e).then(function () { M(e, t, A, r - 1) }) }).catch(A); A(i) } } var z = { "_driver": "asyncStorage", "_initStorage": function G(e) { var t = this, A = { "db": null }; if (e) for (var r in e) A[r] = e[r]; var i = O[A.name]; i || (i = { "forages": [], "db": null, "dbReady": null, "deferredOperations": [] }, O[A.name] = i), i.forages.push(t), t._initReady || (t._initReady = t.ready, t.ready = L); var o = []; function n() { return d.resolve() } for (var s = 0; s < i.forages.length; s++) { var a = i.forages[s]; a !== t && o.push(a._initReady().catch(n)) } var c = i.forages.slice(0); return d.all(o).then(function () { return A.db = i.db, _(A) }).then(function (e) { return A.db = e, k(A, t._defaultConfig.version) ? R(A) : e }).then(function (e) { A.db = i.db = e, t._dbInfo = A; for (var r = 0; r < c.length; r++) { var o = c[r]; o !== t && (o._dbInfo.db = A.db, o._dbInfo.version = A.version) } }) }, "_support": function s() { try { if (!h || !h.open) return !1; var e = "undefined" != typeof openDatabase && /(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent) && !/Chrome/.test(navigator.userAgent) && !/BlackBerry/.test(navigator.platform), t = "function" == typeof fetch && -1 !== fetch.toString().indexOf("[native code"); return (!e || t) && "undefined" != typeof indexedDB && "undefined" != typeof IDBKeyRange } catch (e) { return !1 } }(), "iterate": function P(e, t) { var A = this, r = new d(function (t, r) { A.ready().then(function () { M(A._dbInfo, j, function (i, o) { if (i) return r(i); try { var n = o.objectStore(A._dbInfo.storeName).openCursor(), s = 1; n.onsuccess = function () { var A = n.result; if (A) { var r = A.value; T(r) && (r = w(r)); var i = e(r, A.key, s++); void 0 !== i ? t(i) : A.continue() } else t() }, n.onerror = function () { r(n.error) } } catch (e) { r(e) } }) }).catch(r) }); return C(r, t), r }, "getItem": function U(e, t) { var A = this; e = c(e); var r = new d(function (t, r) { A.ready().then(function () { M(A._dbInfo, j, function (i, o) { if (i) return r(i); try { var n = o.objectStore(A._dbInfo.storeName).get(e); n.onsuccess = function () { var e = n.result; void 0 === e && (e = null), T(e) && (e = w(e)), t(e) }, n.onerror = function () { r(n.error) } } catch (e) { r(e) } }) }).catch(r) }); return C(r, t), r }, "setItem": function F(e, t, A) { var r = this; e = c(e); var i = new d(function (A, i) { var o; r.ready().then(function () { return o = r._dbInfo, "[object Blob]" === Z.call(t) ? m(o.db).then(function (e) { return e ? t : function N(e) { return new d(function (t, A) { var r = new FileReader; r.onerror = A, r.onloadend = function (A) { var r = btoa(A.target.result || ""); t({ "__local_forage_encoded_blob": !0, "data": r, "type": e.type }) }, r.readAsBinaryString(e) }) }(t) }) : t }).then(function (t) { M(r._dbInfo, V, function (o, n) { if (o) return i(o); try { var s = n.objectStore(r._dbInfo.storeName); null === t && (t = void 0); var a = s.put(t, e); n.oncomplete = function () { void 0 === t && (t = null), A(t) }, n.onabort = n.onerror = function () { i(a.error ? a.error : a.transaction.error) } } catch (e) { i(e) } }) }).catch(i) }); return C(i, A), i }, "removeItem": function H(e, t) { var A = this; e = c(e); var r = new d(function (t, r) { A.ready().then(function () { M(A._dbInfo, V, function (i, o) { if (i) return r(i); try { var n = o.objectStore(A._dbInfo.storeName).delete(e); o.oncomplete = function () { t() }, o.onerror = function () { r(n.error) }, o.onabort = function () { r(n.error ? n.error : n.transaction.error) } } catch (e) { r(e) } }) }).catch(r) }); return C(r, t), r }, "clear": function J(e) { var t = this, A = new d(function (e, A) { t.ready().then(function () { M(t._dbInfo, V, function (r, i) { if (r) return A(r); try { var o = i.objectStore(t._dbInfo.storeName).clear(); i.oncomplete = function () { e() }, i.onabort = i.onerror = function () { A(o.error ? o.error : o.transaction.error) } } catch (e) { A(e) } }) }).catch(A) }); return C(A, e), A }, "length": function Y(e) { var t = this, A = new d(function (e, A) { t.ready().then(function () { M(t._dbInfo, j, function (r, i) { if (r) return A(r); try { var o = i.objectStore(t._dbInfo.storeName).count(); o.onsuccess = function () { e(o.result) }, o.onerror = function () { A(o.error) } } catch (e) { A(e) } }) }).catch(A) }); return C(A, e), A }, "key": function q(e, t) { var A = this, r = new d(function (t, r) { e < 0 ? t(null) : A.ready().then(function () { M(A._dbInfo, j, function (i, o) { if (i) return r(i); try { var n = o.objectStore(A._dbInfo.storeName), s = !1, a = n.openKeyCursor(); a.onsuccess = function () { var A = a.result; A ? 0 === e || s ? t(A.key) : (s = !0, A.advance(e)) : t(null) }, a.onerror = function () { r(a.error) } } catch (e) { r(e) } }) }).catch(r) }); return C(r, t), r }, "keys": function x(e) { var t = this, A = new d(function (e, A) { t.ready().then(function () { M(t._dbInfo, j, function (r, i) { if (r) return A(r); try { var o = i.objectStore(t._dbInfo.storeName).openKeyCursor(), n = []; o.onsuccess = function () { var t = o.result; t ? (n.push(t.key), t.continue()) : e(n) }, o.onerror = function () { A(o.error) } } catch (e) { A(e) } }) }).catch(A) }); return C(A, e), A }, "dropInstance": function K(e, t) { t = E.apply(this, arguments); var A, r = this.config(); if ((e = "function" != typeof e && e || {}).name || (e.name = e.name || r.name, e.storeName = e.storeName || r.storeName), e.name) { var i = e.name === r.name && this._dbInfo.db ? d.resolve(this._dbInfo.db) : _(e).then(function (t) { var A = O[e.name], r = A.forages; A.db = t; for (var i = 0; i < r.length; i++)r[i]._dbInfo.db = t; return t }); A = i.then(e.storeName ? function (t) { if (t.objectStoreNames.contains(e.storeName)) { var A = t.version + 1; D(e); var r = O[e.name], i = r.forages; t.close(); for (var o = 0; o < i.length; o++) { var n = i[o]; n._dbInfo.db = null, n._dbInfo.version = A } return new d(function (t, r) { var i = h.open(e.name, A); i.onerror = function (e) { i.result.close(), r(e) }, i.onupgradeneeded = function () { i.result.deleteObjectStore(e.storeName) }, i.onsuccess = function () { var e = i.result; e.close(), t(e) } }).then(function (e) { r.db = e; for (var t = 0; t < i.length; t++) { var A = i[t]; A._dbInfo.db = e, S(A._dbInfo) } }).catch(function (t) { throw (y(e, t) || d.resolve()).catch(function () { }), t }) } } : function (t) { D(e); var A = O[e.name], r = A.forages; t.close(); for (var i = 0; i < r.length; i++)r[i]._dbInfo.db = null; return new d(function (t, A) { var r = h.deleteDatabase(e.name); r.onerror = function () { var e = r.result; e && e.close(), A(r.error) }, r.onblocked = function () { console.warn('dropInstance blocked for database "' + e.name + '" until all open connections are closed') }, r.onsuccess = function () { var e = r.result; e && e.close(), t(e) } }).then(function (e) { A.db = e; for (var t = 0; t < r.length; t++)S(r[t]._dbInfo) }).catch(function (t) { throw (y(e, t) || d.resolve()).catch(function () { }), t }) }) } else A = d.reject("Invalid arguments"); return C(A, t), A } }; var X = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/", $ = "~~local_forage_type~", ee = /^~~local_forage_type~([^~]+)~/, te = "__lfsc__:", Ae = te.length, ie = "arbf", ne = "blob", se = "si08", ae = "ui08", ce = "uic8", ge = "si16", ue = "si32", le = "ur16", he = "ui32", de = "fl32", Ce = "fl64", Ie = Ae + ie.length, Ee = Object.prototype.toString; function EA(e) { var t, A, r, i, o, n = .75 * e.length, s = e.length, a = 0; "=" === e[e.length - 1] && (n--, "=" === e[e.length - 2] && n--); var c = new ArrayBuffer(n), g = new Uint8Array(c); for (t = 0; t < s; t += 4)A = X.indexOf(e[t]), r = X.indexOf(e[t + 1]), i = X.indexOf(e[t + 2]), o = X.indexOf(e[t + 3]), g[a++] = A << 2 | r >> 4, g[a++] = (15 & r) << 4 | i >> 2, g[a++] = (3 & i) << 6 | 63 & o; return c } function uA(e) { var t, A = new Uint8Array(e), r = ""; for (t = 0; t < A.length; t += 3)r += X[A[t] >> 2], r += X[(3 & A[t]) << 4 | A[t + 1] >> 4], r += X[(15 & A[t + 1]) << 2 | A[t + 2] >> 6], r += X[63 & A[t + 2]]; return A.length % 3 == 2 ? r = r.substring(0, r.length - 1) + "=" : A.length % 3 == 1 && (r = r.substring(0, r.length - 2) + "=="), r } var pe = { "serialize": function lA(e, t) { var A = ""; if (e && (A = Ee.call(e)), e && ("[object ArrayBuffer]" === A || e.buffer && "[object ArrayBuffer]" === Ee.call(e.buffer))) { var r, i = te; e instanceof ArrayBuffer ? (r = e, i += ie) : (r = e.buffer, "[object Int8Array]" === A ? i += se : "[object Uint8Array]" === A ? i += ae : "[object Uint8ClampedArray]" === A ? i += ce : "[object Int16Array]" === A ? i += ge : "[object Uint16Array]" === A ? i += le : "[object Int32Array]" === A ? i += ue : "[object Uint32Array]" === A ? i += he : "[object Float32Array]" === A ? i += de : "[object Float64Array]" === A ? i += Ce : t(new Error("Failed to get type for BinaryArray"))), t(i + uA(r)) } else if ("[object Blob]" === A) { var o = new FileReader; o.onload = function () { var A = $ + e.type + "~" + uA(this.result); t(te + ne + A) }, o.readAsArrayBuffer(e) } else try { t(JSON.stringify(e)) } catch (A) { console.error("Couldn't convert value into a JSON string: ", e), t(null, A) } }, "deserialize": function dA(e) { if (e.substring(0, Ae) !== te) return JSON.parse(e); var t, A = e.substring(Ie), r = e.substring(Ae, Ie); if (r === ne && ee.test(A)) { var i = A.match(ee); t = i[1], A = A.substring(i[0].length) } var o = EA(A); switch (r) { case ie: return o; case ne: return a([o], { "type": t }); case se: return new Int8Array(o); case ae: return new Uint8Array(o); case ce: return new Uint8ClampedArray(o); case ge: return new Int16Array(o); case le: return new Uint16Array(o); case ue: return new Int32Array(o); case he: return new Uint32Array(o); case de: return new Float32Array(o); case Ce: return new Float64Array(o); default: throw new Error("Unkown type: " + r) } }, "stringToBuffer": EA, "bufferToString": uA }; function BA(e, t, A, r) { e.executeSql("CREATE TABLE IF NOT EXISTS " + t.storeName + " (id INTEGER PRIMARY KEY, key unique, value)", [], A, r) } function pA(e, t, A, r, i, o) { e.executeSql(A, r, i, function (e, n) { n.code === n.SYNTAX_ERR ? e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?", [t.storeName], function (e, s) { s.rows.length ? o(e, n) : BA(e, t, function () { e.executeSql(A, r, i, o) }, o) }, o) : o(e, n) }, o) } var fe = { "_driver": "webSQLStorage", "_initStorage": function QA(e) { var t = this, A = { "db": null }; if (e) for (var r in e) A[r] = "string" != typeof e[r] ? e[r].toString() : e[r]; var i = new d(function (e, r) { try { A.db = openDatabase(A.name, String(A.version), A.description, A.size) } catch (e) { return r(e) } A.db.transaction(function (i) { BA(i, A, function () { t._dbInfo = A, e() }, function (e, t) { r(t) }) }, r) }); return A.serializer = pe, i }, "_support": function W() { return "function" == typeof openDatabase }(), "iterate": function mA(e, t) { var A = this, r = new d(function (t, r) { A.ready().then(function () { var i = A._dbInfo; i.db.transaction(function (A) { pA(A, i, "SELECT * FROM " + i.storeName, [], function (A, r) { for (var o = r.rows, n = o.length, s = 0; s < n; s++) { var a = o.item(s), c = a.value; if (c && (c = i.serializer.deserialize(c)), void 0 !== (c = e(c, a.key, s + 1))) return void t(c) } t() }, function (e, t) { r(t) }) }) }).catch(r) }); return C(r, t), r }, "getItem": function fA(e, t) { var A = this; e = c(e); var r = new d(function (t, r) { A.ready().then(function () { var i = A._dbInfo; i.db.transaction(function (A) { pA(A, i, "SELECT * FROM " + i.storeName + " WHERE key = ? LIMIT 1", [e], function (e, A) { var r = A.rows.length ? A.rows.item(0).value : null; r && (r = i.serializer.deserialize(r)), t(r) }, function (e, t) { r(t) }) }) }).catch(r) }); return C(r, t), r }, "setItem": function SA(e, t, A) { return function DA(e, t, A, r) { var i = this; e = c(e); var o = new d(function (o, n) { i.ready().then(function () { void 0 === t && (t = null); var s = t, a = i._dbInfo; a.serializer.serialize(t, function (t, c) { c ? n(c) : a.db.transaction(function (A) { pA(A, a, "INSERT OR REPLACE INTO " + a.storeName + " (key, value) VALUES (?, ?)", [e, t], function () { o(s) }, function (e, t) { n(t) }) }, function (t) { if (t.code === t.QUOTA_ERR) { if (r > 0) return void o(DA.apply(i, [e, s, A, r - 1])); n(t) } }) }) }).catch(n) }); return C(o, A), o }.apply(this, [e, t, A, 1]) }, "removeItem": function yA(e, t) { var A = this; e = c(e); var r = new d(function (t, r) { A.ready().then(function () { var i = A._dbInfo; i.db.transaction(function (A) { pA(A, i, "DELETE FROM " + i.storeName + " WHERE key = ?", [e], function () { t() }, function (e, t) { r(t) }) }) }).catch(r) }); return C(r, t), r }, "clear": function vA(e) { var t = this, A = new d(function (e, A) { t.ready().then(function () { var r = t._dbInfo; r.db.transaction(function (t) { pA(t, r, "DELETE FROM " + r.storeName, [], function () { e() }, function (e, t) { A(t) }) }) }).catch(A) }); return C(A, e), A }, "length": function _A(e) { var t = this, A = new d(function (e, A) { t.ready().then(function () { var r = t._dbInfo; r.db.transaction(function (t) { pA(t, r, "SELECT COUNT(key) as c FROM " + r.storeName, [], function (t, A) { var r = A.rows.item(0).c; e(r) }, function (e, t) { A(t) }) }) }).catch(A) }); return C(A, e), A }, "key": function RA(e, t) { var A = this, r = new d(function (t, r) { A.ready().then(function () { var i = A._dbInfo; i.db.transaction(function (A) { pA(A, i, "SELECT key FROM " + i.storeName + " WHERE id = ? LIMIT 1", [e + 1], function (e, A) { var r = A.rows.length ? A.rows.item(0).key : null; t(r) }, function (e, t) { r(t) }) }) }).catch(r) }); return C(r, t), r }, "keys": function kA(e) { var t = this, A = new d(function (e, A) { t.ready().then(function () { var r = t._dbInfo; r.db.transaction(function (t) { pA(t, r, "SELECT key FROM " + r.storeName, [], function (t, A) { for (var r = [], i = 0; i < A.rows.length; i++)r.push(A.rows.item(i).key); e(r) }, function (e, t) { A(t) }) }) }).catch(A) }); return C(A, e), A }, "dropInstance": function wA(e, t) { t = E.apply(this, arguments); var A = this.config(); (e = "function" != typeof e && e || {}).name || (e.name = e.name || A.name, e.storeName = e.storeName || A.storeName); var r, i = this; return C(r = e.name ? new d(function (t) { var r; r = e.name === A.name ? i._dbInfo.db : openDatabase(e.name, "", "", 0), t(e.storeName ? { "db": r, "storeNames": [e.storeName] } : function NA(e) { return new d(function (t, A) { e.transaction(function (r) { r.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'", [], function (A, r) { for (var i = [], o = 0; o < r.rows.length; o++)i.push(r.rows.item(o).name); t({ "db": e, "storeNames": i }) }, function (e, t) { A(t) }) }, function (e) { A(e) }) }) }(r)) }).then(function (e) { return new d(function (t, A) { e.db.transaction(function (i) { function r(e) { return new d(function (t, A) { i.executeSql("DROP TABLE IF EXISTS " + e, [], function () { t() }, function (e, t) { A(t) }) }) } for (var o = [], n = 0, s = e.storeNames.length; n < s; n++)o.push(r(e.storeNames[n])); d.all(o).then(function () { t() }).catch(function (e) { A(e) }) }, function (e) { A(e) }) }) }) : d.reject("Invalid arguments"), t), r } }; function bA(e, t) { var A = e.name + "/"; return e.storeName !== t.storeName && (A += e.storeName + "/"), A } function OA() { return !function MA() { var e = "_localforage_support_test"; try { return localStorage.setItem(e, !0), localStorage.removeItem(e), !1 } catch (e) { return !0 } }() || localStorage.length > 0 } var Be = { "_driver": "localStorageWrapper", "_initStorage": function GA(e) { var t = {}; if (e) for (var A in e) t[A] = e[A]; return t.keyPrefix = bA(e, this._defaultConfig), OA() ? (this._dbInfo = t, t.serializer = pe, d.resolve()) : d.reject() }, "_support": function LA() { try { return "undefined" != typeof localStorage && "setItem" in localStorage && !!localStorage.setItem } catch (e) { return !1 } }(), "iterate": function FA(e, t) { var A = this, r = A.ready().then(function () { for (var t = A._dbInfo, r = t.keyPrefix, i = r.length, o = localStorage.length, n = 1, s = 0; s < o; s++) { var a = localStorage.key(s); if (0 === a.indexOf(r)) { var c = localStorage.getItem(a); if (c && (c = t.serializer.deserialize(c)), void 0 !== (c = e(c, a.substring(i), n++))) return c } } }); return C(r, t), r }, "getItem": function PA(e, t) { var A = this; e = c(e); var r = A.ready().then(function () { var t = A._dbInfo, r = localStorage.getItem(t.keyPrefix + e); return r && (r = t.serializer.deserialize(r)), r }); return C(r, t), r }, "setItem": function xA(e, t, A) { var r = this; e = c(e); var i = r.ready().then(function () { void 0 === t && (t = null); var A = t; return new d(function (i, o) { var n = r._dbInfo; n.serializer.serialize(t, function (t, r) { if (r) o(r); else try { localStorage.setItem(n.keyPrefix + e, t), i(A) } catch (e) { "QuotaExceededError" !== e.name && "NS_ERROR_DOM_QUOTA_REACHED" !== e.name || o(e), o(e) } }) }) }); return C(i, A), i }, "removeItem": function qA(e, t) { var A = this; e = c(e); var r = A.ready().then(function () { localStorage.removeItem(A._dbInfo.keyPrefix + e) }); return C(r, t), r }, "clear": function UA(e) { var t = this, A = t.ready().then(function () { for (var e = t._dbInfo.keyPrefix, A = localStorage.length - 1; A >= 0; A--) { var r = localStorage.key(A); 0 === r.indexOf(e) && localStorage.removeItem(r) } }); return C(A, e), A }, "length": function YA(e) { var t = this.keys().then(function (e) { return e.length }); return C(t, e), t }, "key": function HA(e, t) { var A = this, r = A.ready().then(function () { var t, r = A._dbInfo; try { t = localStorage.key(e) } catch (e) { t = null } return t && (t = t.substring(r.keyPrefix.length)), t }); return C(r, t), r }, "keys": function JA(e) { var t = this, A = t.ready().then(function () { for (var e = t._dbInfo, A = localStorage.length, r = [], i = 0; i < A; i++) { var o = localStorage.key(i); 0 === o.indexOf(e.keyPrefix) && r.push(o.substring(e.keyPrefix.length)) } return r }); return C(A, e), A }, "dropInstance": function KA(e, t) { if (t = E.apply(this, arguments), !(e = "function" != typeof e && e || {}).name) { var A = this.config(); e.name = e.name || A.name, e.storeName = e.storeName || A.storeName } var r, i = this; return C(r = e.name ? new d(function (t) { t(e.storeName ? bA(e, i._defaultConfig) : e.name + "/") }).then(function (e) { for (var t = localStorage.length - 1; t >= 0; t--) { var A = localStorage.key(t); 0 === A.indexOf(e) && localStorage.removeItem(A) } }) : d.reject("Invalid arguments"), t), r } }, _e = function WA(e, t) { return e === t || "number" == typeof e && "number" == typeof t && isNaN(e) && isNaN(t) }, me = function VA(e, t) { for (var A = e.length, r = 0; r < A;) { if (_e(e[r], t)) return !0; r++ } return !1 }, Qe = Array.isArray || function (e) { return "[object Array]" === Object.prototype.toString.call(e) }, ye = {}, ve = {}, Se = { "INDEXEDDB": z, "WEBSQL": fe, "LOCALSTORAGE": Be }, De = [Se.INDEXEDDB._driver, Se.WEBSQL._driver, Se.LOCALSTORAGE._driver], Re = ["dropInstance"], be = ["clear", "getItem", "iterate", "key", "keys", "length", "removeItem", "setItem"].concat(Re), Te = { "description": "", "driver": De.slice(), "name": "localforage", "size": 4980736, "storeName": "keyvaluepairs", "version": 1 }; function re(e, t) { e[t] = function () { var A = arguments; return e.ready().then(function () { return e[t].apply(e, A) }) } } function oe() { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; if (t) for (var A in t) t.hasOwnProperty(A) && (arguments[0][A] = Qe(t[A]) ? t[A].slice() : t[A]) } return arguments[0] } var ke = new (function () { function A(e) { for (var t in function r(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, A), Se) if (Se.hasOwnProperty(t)) { var i = Se[t], o = i._driver; this[t] = o, ye[o] || this.defineDriver(i) } this._defaultConfig = oe({}, Te), this._config = oe({}, this._defaultConfig, e), this._driverSet = null, this._initDriver = null, this._ready = !1, this._dbInfo = null, this._wrapLibraryMethodsWithReady(), this.setDriver(this._config.driver).catch(function () { }) } return A.prototype.config = function (e) { if ("object" === (void 0 === e ? "undefined" : l(e))) { if (this._ready) return new Error("Can't call config() after localforage has been used."); for (var t in e) { if ("storeName" === t && (e[t] = e[t].replace(/\W/g, "_")), "version" === t && "number" != typeof e[t]) return new Error("Database version must be a number."); this._config[t] = e[t] } return !("driver" in e) || !e.driver || this.setDriver(this._config.driver) } return "string" == typeof e ? this._config[e] : this._config }, A.prototype.defineDriver = function (e, t, A) { var r = new d(function (t, A) { try { var r = e._driver, i = new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver"); if (!e._driver) return void A(i); for (var o = be.concat("_initStorage"), n = 0, s = o.length; n < s; n++) { var a = o[n]; if ((!me(Re, a) || e[a]) && "function" != typeof e[a]) return void A(i) } !function I() { for (var t = function e(t) { return function () { var e = new Error("Method " + t + " is not implemented by the current driver"), A = d.reject(e); return C(A, arguments[arguments.length - 1]), A } }, A = 0, r = Re.length; A < r; A++) { var i = Re[A]; e[i] || (e[i] = t(i)) } }(); var g = function c(A) { ye[r] && console.info("Redefining LocalForage driver: " + r), ye[r] = e, ve[r] = A, t() }; "_support" in e ? e._support && "function" == typeof e._support ? e._support().then(g, A) : g(!!e._support) : g(!0) } catch (e) { A(e) } }); return I(r, t, A), r }, A.prototype.driver = function () { return this._driver || null }, A.prototype.getDriver = function (e, t, A) { var r = ye[e] ? d.resolve(ye[e]) : d.reject(new Error("Driver not found.")); return I(r, t, A), r }, A.prototype.getSerializer = function (e) { var t = d.resolve(pe); return I(t, e), t }, A.prototype.ready = function (e) { var t = this, A = t._driverSet.then(function () { return null === t._ready && (t._ready = t._initDriver()), t._ready }); return I(A, e, e), A }, A.prototype.setDriver = function (e, A, r) { var i = this; Qe(e) || (e = [e]); var a = this._getSupportedDrivers(e); function o() { i._config.driver = i.driver() } function n(e) { return i._extend(e), o(), i._ready = i._initStorage(i._config), i._ready } var c = null !== this._driverSet ? this._driverSet.catch(function () { return d.resolve() }) : d.resolve(); return this._driverSet = c.then(function () { var e = a[0]; return i._dbInfo = null, i._ready = null, i.getDriver(e).then(function (e) { i._driver = e._driver, o(), i._wrapLibraryMethodsWithReady(), i._initDriver = function s(e) { return function () { var A = 0; return function t() { for (; A < e.length;) { var r = e[A]; return A++, i._dbInfo = null, i._ready = null, i.getDriver(r).then(n).catch(t) } o(); var s = new Error("No available storage method found."); return i._driverSet = d.reject(s), i._driverSet }() } }(a) }) }).catch(function () { o(); var e = new Error("No available storage method found."); return i._driverSet = d.reject(e), i._driverSet }), I(this._driverSet, A, r), this._driverSet }, A.prototype.supports = function (e) { return !!ve[e] }, A.prototype._extend = function (e) { oe(this, e) }, A.prototype._getSupportedDrivers = function (e) { for (var t = [], A = 0, r = e.length; A < r; A++) { var i = e[A]; this.supports(i) && t.push(i) } return t }, A.prototype._wrapLibraryMethodsWithReady = function () { for (var e = 0, t = be.length; e < t; e++)re(this, be[e]) }, A.prototype.createInstance = function (e) { return new A(e) }, A }()); g.exports = ke }, { "3": 3 }] }, {}, [4])(4) }, "3720": function _(e) { e.exports = t; var A = null; try { A = new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0, 97, 115, 109, 1, 0, 0, 0, 1, 13, 2, 96, 0, 1, 127, 96, 4, 127, 127, 127, 127, 1, 127, 3, 7, 6, 0, 1, 1, 1, 1, 1, 6, 6, 1, 127, 1, 65, 0, 11, 7, 50, 6, 3, 109, 117, 108, 0, 1, 5, 100, 105, 118, 95, 115, 0, 2, 5, 100, 105, 118, 95, 117, 0, 3, 5, 114, 101, 109, 95, 115, 0, 4, 5, 114, 101, 109, 95, 117, 0, 5, 8, 103, 101, 116, 95, 104, 105, 103, 104, 0, 0, 10, 191, 1, 6, 4, 0, 35, 0, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 126, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 127, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 128, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 129, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 130, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11])), {}).exports } catch (e) { } function t(e, t, A) { this.low = 0 | e, this.high = 0 | t, this.unsigned = !!A } function i(e) { return !0 === (e && e.__isLong__) } Object.defineProperty(t.prototype, "__isLong__", { "value": !0 }), t.isLong = i; var r = {}, o = {}; function n(e, t) { var A, i, n; return t ? (n = 0 <= (e >>>= 0) && e < 256) && (i = o[e]) ? i : (A = a(e, (0 | e) < 0 ? -1 : 0, !0), n && (o[e] = A), A) : (n = -128 <= (e |= 0) && e < 128) && (i = r[e]) ? i : (A = a(e, e < 0 ? -1 : 0, !1), n && (r[e] = A), A) } function s(e, t) { if (isNaN(e)) return t ? E : d; if (t) { if (e < 0) return E; if (e >= u) return Q } else { if (e <= -l) return y; if (e + 1 >= l) return m } return e < 0 ? s(-e, t).neg() : a(e % g | 0, e / g | 0, t) } function a(e, A, r) { return new t(e, A, r) } t.fromInt = n, t.fromNumber = s, t.fromBits = a; var c = Math.pow; function C(e, t, A) { if (0 === e.length) throw Error("empty string"); if ("NaN" === e || "Infinity" === e || "+Infinity" === e || "-Infinity" === e) return d; if ("number" == typeof t ? (A = t, t = !1) : t = !!t, (A = A || 10) < 2 || 36 < A) throw RangeError("radix"); var r; if ((r = e.indexOf("-")) > 0) throw Error("interior hyphen"); if (0 === r) return C(e.substring(1), t, A).neg(); for (var i = s(c(A, 8)), o = d, n = 0; n < e.length; n += 8) { var a = Math.min(8, e.length - n), g = parseInt(e.substring(n, n + a), A); if (a < 8) { var u = s(c(A, a)); o = o.mul(u).add(s(g)) } else o = (o = o.mul(i)).add(s(g)) } return o.unsigned = t, o } function I(e, t) { return "number" == typeof e ? s(e, t) : "string" == typeof e ? C(e, t) : a(e.low, e.high, "boolean" == typeof t ? t : e.unsigned) } t.fromString = C, t.fromValue = I; var g = 4294967296, u = g * g, l = u / 2, h = n(1 << 24), d = n(0); t.ZERO = d; var E = n(0, !0); t.UZERO = E; var p = n(1); t.ONE = p; var f = n(1, !0); t.UONE = f; var B = n(-1); t.NEG_ONE = B; var m = a(-1, 2147483647, !1); t.MAX_VALUE = m; var Q = a(-1, -1, !0); t.MAX_UNSIGNED_VALUE = Q; var y = a(0, -2147483648, !1); t.MIN_VALUE = y; var v = t.prototype; v.toInt = function () { return this.unsigned ? this.low >>> 0 : this.low }, v.toNumber = function () { return this.unsigned ? (this.high >>> 0) * g + (this.low >>> 0) : this.high * g + (this.low >>> 0) }, v.toString = function (e) { if ((e = e || 10) < 2 || 36 < e) throw RangeError("radix"); if (this.isZero()) return "0"; if (this.isNegative()) { if (this.eq(y)) { var t = s(e), A = this.div(t), r = A.mul(t).sub(this); return A.toString(e) + r.toInt().toString(e) } return "-" + this.neg().toString(e) } for (var i = s(c(e, 6), this.unsigned), o = this, n = ""; ;) { var a = o.div(i), g = (o.sub(a.mul(i)).toInt() >>> 0).toString(e); if ((o = a).isZero()) return g + n; for (; g.length < 6;)g = "0" + g; n = "" + g + n } }, v.getHighBits = function () { return this.high }, v.getHighBitsUnsigned = function () { return this.high >>> 0 }, v.getLowBits = function () { return this.low }, v.getLowBitsUnsigned = function () { return this.low >>> 0 }, v.getNumBitsAbs = function () { if (this.isNegative()) return this.eq(y) ? 64 : this.neg().getNumBitsAbs(); for (var e = 0 != this.high ? this.high : this.low, t = 31; t > 0 && 0 == (e & 1 << t); t--); return 0 != this.high ? t + 33 : t + 1 }, v.isZero = function () { return 0 === this.high && 0 === this.low }, v.eqz = v.isZero, v.isNegative = function () { return !this.unsigned && this.high < 0 }, v.isPositive = function () { return this.unsigned || this.high >= 0 }, v.isOdd = function () { return 1 == (1 & this.low) }, v.isEven = function () { return 0 == (1 & this.low) }, v.equals = function (e) { return i(e) || (e = I(e)), (this.unsigned === e.unsigned || this.high >>> 31 != 1 || e.high >>> 31 != 1) && this.high === e.high && this.low === e.low }, v.eq = v.equals, v.notEquals = function (e) { return !this.eq(e) }, v.neq = v.notEquals, v.ne = v.notEquals, v.lessThan = function (e) { return this.comp(e) < 0 }, v.lt = v.lessThan, v.lessThanOrEqual = function (e) { return this.comp(e) <= 0 }, v.lte = v.lessThanOrEqual, v.le = v.lessThanOrEqual, v.greaterThan = function (e) { return this.comp(e) > 0 }, v.gt = v.greaterThan, v.greaterThanOrEqual = function (e) { return this.comp(e) >= 0 }, v.gte = v.greaterThanOrEqual, v.ge = v.greaterThanOrEqual, v.compare = function (e) { if (i(e) || (e = I(e)), this.eq(e)) return 0; var t = this.isNegative(), A = e.isNegative(); return t && !A ? -1 : !t && A ? 1 : this.unsigned ? e.high >>> 0 > this.high >>> 0 || e.high === this.high && e.low >>> 0 > this.low >>> 0 ? -1 : 1 : this.sub(e).isNegative() ? -1 : 1 }, v.comp = v.compare, v.negate = function () { return !this.unsigned && this.eq(y) ? y : this.not().add(p) }, v.neg = v.negate, v.add = function (e) { i(e) || (e = I(e)); var t = 0, A = 0, r = 0, o = 0; return r += (o += (65535 & this.low) + (65535 & e.low)) >>> 16, A += (r += (this.low >>> 16) + (e.low >>> 16)) >>> 16, t += (A += (65535 & this.high) + (65535 & e.high)) >>> 16, t += (this.high >>> 16) + (e.high >>> 16), a((r &= 65535) << 16 | (o &= 65535), (t &= 65535) << 16 | (A &= 65535), this.unsigned) }, v.subtract = function (e) { return i(e) || (e = I(e)), this.add(e.neg()) }, v.sub = v.subtract, v.multiply = function (e) { if (this.isZero()) return d; if (i(e) || (e = I(e)), A) return a(A.mul(this.low, this.high, e.low, e.high), A.get_high(), this.unsigned); if (e.isZero()) return d; if (this.eq(y)) return e.isOdd() ? y : d; if (e.eq(y)) return this.isOdd() ? y : d; if (this.isNegative()) return e.isNegative() ? this.neg().mul(e.neg()) : this.neg().mul(e).neg(); if (e.isNegative()) return this.mul(e.neg()).neg(); if (this.lt(h) && e.lt(h)) return s(this.toNumber() * e.toNumber(), this.unsigned); var t = 65535 & this.high, r = this.low >>> 16, o = 65535 & this.low, n = 65535 & e.high, c = e.low >>> 16, g = 65535 & e.low, u = 0, l = 0, C = 0, E = 0; return C += (E += o * g) >>> 16, l += (C += r * g) >>> 16, C &= 65535, l += (C += o * c) >>> 16, u += (l += t * g) >>> 16, l &= 65535, u += (l += r * c) >>> 16, l &= 65535, u += (l += o * n) >>> 16, u += (this.high >>> 16) * g + t * c + r * n + o * (e.high >>> 16), a((C &= 65535) << 16 | (E &= 65535), (u &= 65535) << 16 | (l &= 65535), this.unsigned) }, v.mul = v.multiply, v.divide = function (e) { if (i(e) || (e = I(e)), e.isZero()) throw Error("division by zero"); var t, r, o; if (A) return this.unsigned || -2147483648 !== this.high || -1 !== e.low || -1 !== e.high ? a((this.unsigned ? A.div_u : A.div_s)(this.low, this.high, e.low, e.high), A.get_high(), this.unsigned) : this; if (this.isZero()) return this.unsigned ? E : d; if (this.unsigned) { if (e.unsigned || (e = e.toUnsigned()), e.gt(this)) return E; if (e.gt(this.shru(1))) return f; o = E } else { if (this.eq(y)) return e.eq(p) || e.eq(B) ? y : e.eq(y) ? p : (t = this.shr(1).div(e).shl(1)).eq(d) ? e.isNegative() ? p : B : (r = this.sub(e.mul(t)), o = t.add(r.div(e))); if (e.eq(y)) return this.unsigned ? E : d; if (this.isNegative()) return e.isNegative() ? this.neg().div(e.neg()) : this.neg().div(e).neg(); if (e.isNegative()) return this.div(e.neg()).neg(); o = d } for (r = this; r.gte(e);) { t = Math.max(1, Math.floor(r.toNumber() / e.toNumber())); for (var n = Math.ceil(Math.log(t) / Math.LN2), g = n <= 48 ? 1 : c(2, n - 48), u = s(t), l = u.mul(e); l.isNegative() || l.gt(r);)l = (u = s(t -= g, this.unsigned)).mul(e); u.isZero() && (u = p), o = o.add(u), r = r.sub(l) } return o }, v.div = v.divide, v.modulo = function (e) { return i(e) || (e = I(e)), A ? a((this.unsigned ? A.rem_u : A.rem_s)(this.low, this.high, e.low, e.high), A.get_high(), this.unsigned) : this.sub(this.div(e).mul(e)) }, v.mod = v.modulo, v.rem = v.modulo, v.not = function () { return a(~this.low, ~this.high, this.unsigned) }, v.and = function (e) { return i(e) || (e = I(e)), a(this.low & e.low, this.high & e.high, this.unsigned) }, v.or = function (e) { return i(e) || (e = I(e)), a(this.low | e.low, this.high | e.high, this.unsigned) }, v.xor = function (e) { return i(e) || (e = I(e)), a(this.low ^ e.low, this.high ^ e.high, this.unsigned) }, v.shiftLeft = function (e) { return i(e) && (e = e.toInt()), 0 == (e &= 63) ? this : e < 32 ? a(this.low << e, this.high << e | this.low >>> 32 - e, this.unsigned) : a(0, this.low << e - 32, this.unsigned) }, v.shl = v.shiftLeft, v.shiftRight = function (e) { return i(e) && (e = e.toInt()), 0 == (e &= 63) ? this : e < 32 ? a(this.low >>> e | this.high << 32 - e, this.high >> e, this.unsigned) : a(this.high >> e - 32, this.high >= 0 ? 0 : -1, this.unsigned) }, v.shr = v.shiftRight, v.shiftRightUnsigned = function (e) { if (i(e) && (e = e.toInt()), 0 == (e &= 63)) return this; var t = this.high; return e < 32 ? a(this.low >>> e | t << 32 - e, t >>> e, this.unsigned) : a(32 === e ? t : t >>> e - 32, 0, this.unsigned) }, v.shru = v.shiftRightUnsigned, v.shr_u = v.shiftRightUnsigned, v.toSigned = function () { return this.unsigned ? a(this.low, this.high, !1) : this }, v.toUnsigned = function () { return this.unsigned ? this : a(this.low, this.high, !0) }, v.toBytes = function (e) { return e ? this.toBytesLE() : this.toBytesBE() }, v.toBytesLE = function () { var e = this.high, t = this.low; return [255 & t, t >>> 8 & 255, t >>> 16 & 255, t >>> 24, 255 & e, e >>> 8 & 255, e >>> 16 & 255, e >>> 24] }, v.toBytesBE = function () { var e = this.high, t = this.low; return [e >>> 24, e >>> 16 & 255, e >>> 8 & 255, 255 & e, t >>> 24, t >>> 16 & 255, t >>> 8 & 255, 255 & t] }, t.fromBytes = function (e, A, r) { return r ? t.fromBytesLE(e, A) : t.fromBytesBE(e, A) }, t.fromBytesLE = function (e, A) { return new t(e[0] | e[1] << 8 | e[2] << 16 | e[3] << 24, e[4] | e[5] << 8 | e[6] << 16 | e[7] << 24, A) }, t.fromBytesBE = function (e, A) { return new t(e[4] << 24 | e[5] << 16 | e[6] << 8 | e[7], e[0] << 24 | e[1] << 16 | e[2] << 8 | e[3], A) } }, "2100": function _(e, t, A) { "use strict"; e.exports = A(9482) }, "9482": function _(e, t, A) { "use strict"; var i = t; function r() { i.util._configure(), i.Writer._configure(i.BufferWriter), i.Reader._configure(i.BufferReader) } i.build = "minimal", i.Writer = A(1173), i.BufferWriter = A(3155), i.Reader = A(1408), i.BufferReader = A(593), i.util = A(9693), i.rpc = A(5994), i.roots = A(5054), i.configure = r, r() }, "1408": function _(e, t, A) { "use strict"; e.exports = a; var r, i = A(9693), o = i.LongBits, n = i.utf8; function s(e, t) { return RangeError("index out of range: " + e.pos + " + " + (t || 1) + " > " + e.len) } function a(e) { this.buf = e, this.pos = 0, this.len = e.length } var g, l = "undefined" != typeof Uint8Array ? function (e) { if (e instanceof Uint8Array || Array.isArray(e)) return new a(e); throw Error("illegal buffer") } : function (e) { if (Array.isArray(e)) return new a(e); throw Error("illegal buffer") }, h = function I() { return i.Buffer ? function (e) { return (a.create = function (e) { return i.Buffer.isBuffer(e) ? new r(e) : l(e) })(e) } : l }; function c() { var e = new o(0, 0), t = 0; if (!(this.len - this.pos > 4)) { for (; t < 3; ++t) { if (this.pos >= this.len) throw s(this); if (e.lo = (e.lo | (127 & this.buf[this.pos]) << 7 * t) >>> 0, this.buf[this.pos++] < 128) return e } return e.lo = (e.lo | (127 & this.buf[this.pos++]) << 7 * t) >>> 0, e } for (; t < 4; ++t)if (e.lo = (e.lo | (127 & this.buf[this.pos]) << 7 * t) >>> 0, this.buf[this.pos++] < 128) return e; if (e.lo = (e.lo | (127 & this.buf[this.pos]) << 28) >>> 0, e.hi = (e.hi | (127 & this.buf[this.pos]) >> 4) >>> 0, this.buf[this.pos++] < 128) return e; if (t = 0, this.len - this.pos > 4) { for (; t < 5; ++t)if (e.hi = (e.hi | (127 & this.buf[this.pos]) << 7 * t + 3) >>> 0, this.buf[this.pos++] < 128) return e } else for (; t < 5; ++t) { if (this.pos >= this.len) throw s(this); if (e.hi = (e.hi | (127 & this.buf[this.pos]) << 7 * t + 3) >>> 0, this.buf[this.pos++] < 128) return e } throw Error("invalid varint encoding") } function E(e, t) { return (e[t - 4] | e[t - 3] << 8 | e[t - 2] << 16 | e[t - 1] << 24) >>> 0 } function u() { if (this.pos + 8 > this.len) throw s(this, 8); return new o(E(this.buf, this.pos += 4), E(this.buf, this.pos += 4)) } a.create = h(), a.prototype._slice = i.Array.prototype.subarray || i.Array.prototype.slice, a.prototype.uint32 = (g = 4294967295, function () { if (g = (127 & this.buf[this.pos]) >>> 0, this.buf[this.pos++] < 128) return g; if (g = (g | (127 & this.buf[this.pos]) << 7) >>> 0, this.buf[this.pos++] < 128) return g; if (g = (g | (127 & this.buf[this.pos]) << 14) >>> 0, this.buf[this.pos++] < 128) return g; if (g = (g | (127 & this.buf[this.pos]) << 21) >>> 0, this.buf[this.pos++] < 128) return g; if (g = (g | (15 & this.buf[this.pos]) << 28) >>> 0, this.buf[this.pos++] < 128) return g; if ((this.pos += 5) > this.len) throw this.pos = this.len, s(this, 10); return g }), a.prototype.int32 = function () { return 0 | this.uint32() }, a.prototype.sint32 = function () { var e = this.uint32(); return e >>> 1 ^ -(1 & e) | 0 }, a.prototype.bool = function () { return 0 !== this.uint32() }, a.prototype.fixed32 = function () { if (this.pos + 4 > this.len) throw s(this, 4); return E(this.buf, this.pos += 4) }, a.prototype.sfixed32 = function () { if (this.pos + 4 > this.len) throw s(this, 4); return 0 | E(this.buf, this.pos += 4) }, a.prototype.float = function () { if (this.pos + 4 > this.len) throw s(this, 4); var e = i.float.readFloatLE(this.buf, this.pos); return this.pos += 4, e }, a.prototype.double = function () { if (this.pos + 8 > this.len) throw s(this, 4); var e = i.float.readDoubleLE(this.buf, this.pos); return this.pos += 8, e }, a.prototype.bytes = function () { var e = this.uint32(), t = this.pos, A = this.pos + e; if (A > this.len) throw s(this, e); return this.pos += e, Array.isArray(this.buf) ? this.buf.slice(t, A) : t === A ? new this.buf.constructor(0) : this._slice.call(this.buf, t, A) }, a.prototype.string = function () { var e = this.bytes(); return n.read(e, 0, e.length) }, a.prototype.skip = function (e) { if ("number" == typeof e) { if (this.pos + e > this.len) throw s(this, e); this.pos += e } else do { if (this.pos >= this.len) throw s(this) } while (128 & this.buf[this.pos++]); return this }, a.prototype.skipType = function (e) { switch (e) { case 0: this.skip(); break; case 1: this.skip(8); break; case 2: this.skip(this.uint32()); break; case 3: for (; 4 != (e = 7 & this.uint32());)this.skipType(e); break; case 5: this.skip(4); break; default: throw Error("invalid wire type " + e + " at offset " + this.pos) }return this }, a._configure = function (e) { r = e, a.create = h(), r._configure(); var t = i.Long ? "toLong" : "toNumber"; i.merge(a.prototype, { "int64": function int64() { return c.call(this)[t](!1) }, "uint64": function uint64() { return c.call(this)[t](!0) }, "sint64": function sint64() { return c.call(this).zzDecode()[t](!1) }, "fixed64": function fixed64() { return u.call(this)[t](!0) }, "sfixed64": function sfixed64() { return u.call(this)[t](!1) } }) } }, "593": function _(e, t, A) { "use strict"; e.exports = o; var r = A(1408); (o.prototype = Object.create(r.prototype)).constructor = o; var i = A(9693); function o(e) { r.call(this, e) } o._configure = function () { i.Buffer && (o.prototype._slice = i.Buffer.prototype.slice) }, o.prototype.string = function () { var e = this.uint32(); return this.buf.utf8Slice ? this.buf.utf8Slice(this.pos, this.pos = Math.min(this.pos + e, this.len)) : this.buf.toString("utf-8", this.pos, this.pos = Math.min(this.pos + e, this.len)) }, o._configure() }, "5054": function _(e) { "use strict"; e.exports = {} }, "5994": function _(e, t, A) { "use strict"; t.Service = A(7948) }, "7948": function _(e, t, i) { "use strict"; e.exports = r; var o = i(9693); function r(e, t, A) { if ("function" != typeof e) throw TypeError("rpcImpl must be a function"); o.EventEmitter.call(this), this.rpcImpl = e, this.requestDelimited = Boolean(t), this.responseDelimited = Boolean(A) } (r.prototype = Object.create(o.EventEmitter.prototype)).constructor = r, r.prototype.rpcCall = function A(e, t, r, i, n) { if (!i) throw TypeError("request must be specified"); var s = this; if (!n) return o.asPromise(A, s, e, t, r, i); if (s.rpcImpl) try { return s.rpcImpl(e, t[s.requestDelimited ? "encodeDelimited" : "encode"](i).finish(), function (t, A) { if (t) return s.emit("error", t, e), n(t); if (null !== A) { if (!(A instanceof r)) try { A = r[s.responseDelimited ? "decodeDelimited" : "decode"](A) } catch (t) { return s.emit("error", t, e), n(t) } return s.emit("data", A, e), n(null, A) } s.end(!0) }) } catch (A) { return s.emit("error", A, e), void setTimeout(function () { n(A) }, 0) } else setTimeout(function () { n(Error("already ended")) }, 0) }, r.prototype.end = function (e) { return this.rpcImpl && (e || this.rpcImpl(null, null, null), this.rpcImpl = null, this.emit("end").off()), this } }, "1945": function _(e, t, A) { "use strict"; e.exports = r; var i = A(9693); function r(e, t) { this.lo = e >>> 0, this.hi = t >>> 0 } var o = r.zero = new r(0, 0); o.toNumber = function () { return 0 }, o.zzEncode = o.zzDecode = function () { return this }, o.length = function () { return 1 }; var n = r.zeroHash = "\0\0\0\0\0\0\0\0"; r.fromNumber = function (e) { if (0 === e) return o; var t = e < 0; t && (e = -e); var A = e >>> 0, i = (e - A) / 4294967296 >>> 0; return t && (i = ~i >>> 0, A = ~A >>> 0, ++A > 4294967295 && (A = 0, ++i > 4294967295 && (i = 0))), new r(A, i) }, r.from = function (e) { if ("number" == typeof e) return r.fromNumber(e); if (i.isString(e)) { if (!i.Long) return r.fromNumber(parseInt(e, 10)); e = i.Long.fromString(e) } return e.low || e.high ? new r(e.low >>> 0, e.high >>> 0) : o }, r.prototype.toNumber = function (e) { if (!e && this.hi >>> 31) { var t = 1 + ~this.lo >>> 0, A = ~this.hi >>> 0; return t || (A = A + 1 >>> 0), -(t + 4294967296 * A) } return this.lo + 4294967296 * this.hi }, r.prototype.toLong = function (e) { return i.Long ? new i.Long(0 | this.lo, 0 | this.hi, Boolean(e)) : { "low": 0 | this.lo, "high": 0 | this.hi, "unsigned": Boolean(e) } }; var s = String.prototype.charCodeAt; r.fromHash = function (e) { return e === n ? o : new r((s.call(e, 0) | s.call(e, 1) << 8 | s.call(e, 2) << 16 | s.call(e, 3) << 24) >>> 0, (s.call(e, 4) | s.call(e, 5) << 8 | s.call(e, 6) << 16 | s.call(e, 7) << 24) >>> 0) }, r.prototype.toHash = function () { return String.fromCharCode(255 & this.lo, this.lo >>> 8 & 255, this.lo >>> 16 & 255, this.lo >>> 24, 255 & this.hi, this.hi >>> 8 & 255, this.hi >>> 16 & 255, this.hi >>> 24) }, r.prototype.zzEncode = function () { var e = this.hi >> 31; return this.hi = ((this.hi << 1 | this.lo >>> 31) ^ e) >>> 0, this.lo = (this.lo << 1 ^ e) >>> 0, this }, r.prototype.zzDecode = function () { var e = -(1 & this.lo); return this.lo = ((this.lo >>> 1 | this.hi << 31) ^ e) >>> 0, this.hi = (this.hi >>> 1 ^ e) >>> 0, this }, r.prototype.length = function () { var e = this.lo, t = (this.lo >>> 28 | this.hi << 4) >>> 0, A = this.hi >>> 24; return 0 === A ? 0 === t ? e < 16384 ? e < 128 ? 1 : 2 : e < 2097152 ? 3 : 4 : t < 16384 ? t < 128 ? 5 : 6 : t < 2097152 ? 7 : 8 : A < 128 ? 9 : 10 } }, "9693": function _(t, A, i) { "use strict"; var n = A; function r(e, t, A) { for (var r = Object.keys(t), i = 0; i < r.length; ++i)void 0 !== e[r[i]] && A || (e[r[i]] = t[r[i]]); return e } function o(t) { function e(t, A) { if (!(this instanceof e)) return new e(t, A); Object.defineProperty(this, "message", { "get": function get() { return t } }), Error.captureStackTrace ? Error.captureStackTrace(this, e) : Object.defineProperty(this, "stack", { "value": (new Error).stack || "" }), A && r(this, A) } return (e.prototype = Object.create(Error.prototype)).constructor = e, Object.defineProperty(e.prototype, "name", { "get": function get() { return t } }), e.prototype.toString = function () { return this.name + ": " + this.message }, e } n.asPromise = i(4537), n.base64 = i(7419), n.EventEmitter = i(9211), n.float = i(945), n.inquire = i(7199), n.utf8 = i(4997), n.pool = i(6662), n.LongBits = i(1945), n.isNode = Boolean(void 0 !== i.g && i.g && i.g.process && i.g.process.versions && i.g.process.versions.node), n.global = n.isNode && i.g || "undefined" != typeof window && window || "undefined" != typeof self && self || this, n.emptyArray = Object.freeze ? Object.freeze([]) : [], n.emptyObject = Object.freeze ? Object.freeze({}) : {}, n.isInteger = Number.isInteger || function (e) { return "number" == typeof e && isFinite(e) && Math.floor(e) === e }, n.isString = function (e) { return "string" == typeof e || e instanceof String }, n.isObject = function (e) { return e && "object" == (void 0 === e ? "undefined" : _typeof(e)) }, n.isset = n.isSet = function (e, t) { var A = e[t]; return !(null == A || !e.hasOwnProperty(t)) && ("object" != (void 0 === A ? "undefined" : _typeof(A)) || (Array.isArray(A) ? A.length : Object.keys(A).length) > 0) }, n.Buffer = function () { try { var e = n.inquire("buffer").Buffer; return e.prototype.utf8Write ? e : null } catch (e) { return null } }(), n._Buffer_from = null, n._Buffer_allocUnsafe = null, n.newBuffer = function (e) { return "number" == typeof e ? n.Buffer ? n._Buffer_allocUnsafe(e) : new n.Array(e) : n.Buffer ? n._Buffer_from(e) : "undefined" == typeof Uint8Array ? e : new Uint8Array(e) }, n.Array = "undefined" != typeof Uint8Array ? Uint8Array : Array, n.Long = n.global.dcodeIO && n.global.dcodeIO.Long || n.global.Long || n.inquire("long"), n.key2Re = /^true|false|0|1$/, n.key32Re = /^-?(?:0|[1-9][0-9]*)$/, n.key64Re = /^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/, n.longToHash = function (e) { return e ? n.LongBits.from(e).toHash() : n.LongBits.zeroHash }, n.longFromHash = function (e, t) { var A = n.LongBits.fromHash(e); return n.Long ? n.Long.fromBits(A.lo, A.hi, t) : A.toNumber(Boolean(t)) }, n.merge = r, n.lcFirst = function (e) { return e.charAt(0).toLowerCase() + e.substring(1) }, n.newError = o, n.ProtocolError = o("ProtocolError"), n.oneOfGetter = function (e) { for (var t = {}, A = 0; A < e.length; ++A)t[e[A]] = 1; return function () { for (var e = Object.keys(this), A = e.length - 1; A > -1; --A)if (1 === t[e[A]] && null != this[e[A]]) return e[A] } }, n.oneOfSetter = function (e) { return function (t) { for (var A = 0; A < e.length; ++A)e[A] !== t && delete this[e[A]] } }, n.toJSONOptions = { "longs": String, "enums": String, "bytes": String, "json": !0 }, n._configure = function () { var e = n.Buffer; e ? (n._Buffer_from = e.from !== Uint8Array.from && e.from || function (t, A) { return new e(t, A) }, n._Buffer_allocUnsafe = e.allocUnsafe || function (t) { return new e(t) }) : n._Buffer_from = n._Buffer_allocUnsafe = null } }, "1173": function _(e, t, A) { "use strict"; e.exports = I; var r, i = A(9693), o = i.LongBits, n = i.base64, s = i.utf8; function a(e, t, A) { this.fn = e, this.len = t, this.next = void 0, this.val = A } function g() { } function I() { this.len = 0, this.head = new a(g, 0, 0), this.tail = this.head, this.states = null } var h = function c() { return i.Buffer ? function () { return (I.create = function () { return new r })() } : function () { return new I } }; function E(e, t, A) { t[A] = 255 & e } function u(e, t) { this.len = e, this.next = void 0, this.val = t } function l(e, t, A) { for (; e.hi;)t[A++] = 127 & e.lo | 128, e.lo = (e.lo >>> 7 | e.hi << 25) >>> 0, e.hi >>>= 7; for (; e.lo > 127;)t[A++] = 127 & e.lo | 128, e.lo = e.lo >>> 7; t[A++] = e.lo } function d(e, t, A) { t[A] = 255 & e, t[A + 1] = e >>> 8 & 255, t[A + 2] = e >>> 16 & 255, t[A + 3] = e >>> 24 } I.create = h(), I.alloc = function (e) { return new i.Array(e) }, i.Array !== Array && (I.alloc = i.pool(I.alloc, i.Array.prototype.subarray)), I.prototype._push = function (e, t, A) { return this.tail = this.tail.next = new a(e, t, A), this.len += t, this }, (u.prototype = Object.create(a.prototype)).fn = function (e, t, A) { for (; e > 127;)t[A++] = 127 & e | 128, e >>>= 7; t[A] = e }, I.prototype.uint32 = function (e) { return this.len += (this.tail = this.tail.next = new u((e >>>= 0) < 128 ? 1 : e < 16384 ? 2 : e < 2097152 ? 3 : e < 268435456 ? 4 : 5, e)).len, this }, I.prototype.int32 = function (e) { return e < 0 ? this._push(l, 10, o.fromNumber(e)) : this.uint32(e) }, I.prototype.sint32 = function (e) { return this.uint32((e << 1 ^ e >> 31) >>> 0) }, I.prototype.int64 = I.prototype.uint64 = function (e) { var t = o.from(e); return this._push(l, t.length(), t) }, I.prototype.sint64 = function (e) { var t = o.from(e).zzEncode(); return this._push(l, t.length(), t) }, I.prototype.bool = function (e) { return this._push(E, 1, e ? 1 : 0) }, I.prototype.sfixed32 = I.prototype.fixed32 = function (e) { return this._push(d, 4, e >>> 0) }, I.prototype.sfixed64 = I.prototype.fixed64 = function (e) { var t = o.from(e); return this._push(d, 4, t.lo)._push(d, 4, t.hi) }, I.prototype.float = function (e) { return this._push(i.float.writeFloatLE, 4, e) }, I.prototype.double = function (e) { return this._push(i.float.writeDoubleLE, 8, e) }; var p = i.Array.prototype.set ? function (e, t, A) { t.set(e, A) } : function (e, t, A) { for (var r = 0; r < e.length; ++r)t[A + r] = e[r] }; I.prototype.bytes = function (e) { var t = e.length >>> 0; if (!t) return this._push(E, 1, 0); if (i.isString(e)) { var A = I.alloc(t = n.length(e)); n.decode(e, A, 0), e = A } return this.uint32(t)._push(p, t, e) }, I.prototype.string = function (e) { var t = s.length(e); return t ? this.uint32(t)._push(s.write, t, e) : this._push(E, 1, 0) }, I.prototype.fork = function () { return this.states = new function C(e) { this.head = e.head, this.tail = e.tail, this.len = e.len, this.next = e.states }(this), this.head = this.tail = new a(g, 0, 0), this.len = 0, this }, I.prototype.reset = function () { return this.states ? (this.head = this.states.head, this.tail = this.states.tail, this.len = this.states.len, this.states = this.states.next) : (this.head = this.tail = new a(g, 0, 0), this.len = 0), this }, I.prototype.ldelim = function () { var e = this.head, t = this.tail, A = this.len; return this.reset().uint32(A), A && (this.tail.next = e.next, this.tail = t, this.len += A), this }, I.prototype.finish = function () { for (var e = this.head.next, t = this.constructor.alloc(this.len), A = 0; e;)e.fn(e.val, t, A), A += e.len, e = e.next; return t }, I._configure = function (e) { r = e, I.create = h(), r._configure() } }, "3155": function _(e, t, A) { "use strict"; e.exports = o; var r = A(1173); (o.prototype = Object.create(r.prototype)).constructor = o; var i = A(9693); function o() { r.call(this) } function n(e, t, A) { e.length < 40 ? i.utf8.write(e, t, A) : t.utf8Write ? t.utf8Write(e, A) : t.write(e, A) } o._configure = function () { o.alloc = i._Buffer_allocUnsafe, o.writeBytesBuffer = i.Buffer && i.Buffer.prototype instanceof Uint8Array && "set" === i.Buffer.prototype.set.name ? function (e, t, A) { t.set(e, A) } : function (e, t, A) { if (e.copy) e.copy(t, A, 0, e.length); else for (var r = 0; r < e.length;)t[A++] = e[r++] } }, o.prototype.bytes = function (e) { i.isString(e) && (e = i._Buffer_from(e, "base64")); var t = e.length >>> 0; return this.uint32(t), t && this._push(o.writeBytesBuffer, t, e), this }, o.prototype.string = function (e) { var t = i.Buffer.byteLength(e); return this.uint32(t), t && this._push(n, t, e), this }, o._configure() }, "5527": function _(e, t, A) { "use strict"; A.r(t), t.default = '\nvar Module = (() => {\n  var _scriptDir = typeof document !== \'undefined\' && document.currentScript ? document.currentScript.src : undefined;\n  \n  return (\nfunction(Module) {\n  Module = Module || {};\n\n\nvar g;\ng || (g = typeof Module !== \'undefined\' ? Module : {});\nvar aa, t;\ng.ready = new Promise(function(a, c) {\n  aa = a;\n  t = c;\n});\nvar ba = Object.assign({}, g), ca = "./this.program", u = "";\n"undefined" != typeof document && document.currentScript && (u = document.currentScript.src);\n_scriptDir && (u = _scriptDir);\n0 !== u.indexOf("blob:") ? u = u.substr(0, u.replace(/[?#].*/, "").lastIndexOf("/") + 1) : u = "";\nvar da = g.print || console.log.bind(console), v = g.printErr || console.warn.bind(console);\nObject.assign(g, ba);\nba = null;\ng.thisProgram && (ca = g.thisProgram);\nvar x;\ng.wasmBinary && (x = g.wasmBinary);\nvar noExitRuntime = g.noExitRuntime || !0;\n"object" != typeof WebAssembly && y("no native wasm support detected");\nvar z, ea = !1, fa = "undefined" != typeof TextDecoder ? new TextDecoder("utf8") : void 0;\nfunction ha(a, c, b) {\n  var d = c + b;\n  for (b = c; a[b] && !(b >= d);) {\n    ++b;\n  }\n  if (16 < b - c && a.buffer && fa) {\n    return fa.decode(a.subarray(c, b));\n  }\n  for (d = ""; c < b;) {\n    var f = a[c++];\n    if (f & 128) {\n      var k = a[c++] & 63;\n      if (192 == (f & 224)) {\n        d += String.fromCharCode((f & 31) << 6 | k);\n      } else {\n        var h = a[c++] & 63;\n        f = 224 == (f & 240) ? (f & 15) << 12 | k << 6 | h : (f & 7) << 18 | k << 12 | h << 6 | a[c++] & 63;\n        65536 > f ? d += String.fromCharCode(f) : (f -= 65536, d += String.fromCharCode(55296 | f >> 10, 56320 | f & 1023));\n      }\n    } else {\n      d += String.fromCharCode(f);\n    }\n  }\n  return d;\n}\nfunction A(a, c) {\n  return a ? ha(C, a, c) : "";\n}\nfunction D(a, c, b, d) {\n  if (!(0 < d)) {\n    return 0;\n  }\n  var f = b;\n  d = b + d - 1;\n  for (var k = 0; k < a.length; ++k) {\n    var h = a.charCodeAt(k);\n    if (55296 <= h && 57343 >= h) {\n      var l = a.charCodeAt(++k);\n      h = 65536 + ((h & 1023) << 10) | l & 1023;\n    }\n    if (127 >= h) {\n      if (b >= d) {\n        break;\n      }\n      c[b++] = h;\n    } else {\n      if (2047 >= h) {\n        if (b + 1 >= d) {\n          break;\n        }\n        c[b++] = 192 | h >> 6;\n      } else {\n        if (65535 >= h) {\n          if (b + 2 >= d) {\n            break;\n          }\n          c[b++] = 224 | h >> 12;\n        } else {\n          if (b + 3 >= d) {\n            break;\n          }\n          c[b++] = 240 | h >> 18;\n          c[b++] = 128 | h >> 12 & 63;\n        }\n        c[b++] = 128 | h >> 6 & 63;\n      }\n      c[b++] = 128 | h & 63;\n    }\n  }\n  c[b] = 0;\n  return b - f;\n}\nfunction E(a) {\n  for (var c = 0, b = 0; b < a.length; ++b) {\n    var d = a.charCodeAt(b);\n    127 >= d ? c++ : 2047 >= d ? c += 2 : 55296 <= d && 57343 >= d ? (c += 4, ++b) : c += 3;\n  }\n  return c;\n}\nvar G, H, C, I, J, K, L, ia, ja;\nfunction ka() {\n  var a = z.buffer;\n  G = a;\n  g.HEAP8 = H = new Int8Array(a);\n  g.HEAP16 = I = new Int16Array(a);\n  g.HEAP32 = K = new Int32Array(a);\n  g.HEAPU8 = C = new Uint8Array(a);\n  g.HEAPU16 = J = new Uint16Array(a);\n  g.HEAPU32 = L = new Uint32Array(a);\n  g.HEAPF32 = ia = new Float32Array(a);\n  g.HEAPF64 = ja = new Float64Array(a);\n}\nvar la = [], ma = [], na = [];\nfunction oa() {\n  var a = g.preRun.shift();\n  la.unshift(a);\n}\nvar M = 0, N = null, O = null;\nfunction y(a) {\n  if (g.onAbort) {\n    g.onAbort(a);\n  }\n  a = "Aborted(" + a + ")";\n  v(a);\n  ea = !0;\n  a = new WebAssembly.RuntimeError(a + ". Build with -sASSERTIONS for more info.");\n  t(a);\n  throw a;\n}\nfunction pa(a) {\n  return a.startsWith("data:application/octet-stream;base64,");\n}\nvar P;\nP = "data:application/octet-stream;base64,AGFzbQEAAAAByISAgABGYAF/AX9gAn9/AX9gAn9/AGABfwBgA39/fwF/YAN/f38AYAR/f39/AGAGf39/f39/AX9gBH9/f38Bf2AAAGAFf39/f38Bf2AAAX9gBn9/f39/fwBgBX9/f39/AGAIf39/f39/f38Bf2AHf39/f39/fwF/YAd/f39/f39/AGAFf35+fn4AYAABfmAFf39/f34Bf2AFf39+f38AYAJ/fgF/YAR/f39/AX5gBn9/f39+fwF/YAp/f39/f39/f39/AGAHf39/f39+fgF/YAR/fn5/AGADf35/AX5gAn9+AGAKf39/f39/f39/fwF/YAZ/f39/fn4Bf2ABfwF+YAJ8fwF8YAZ/fH9/f38Bf2ACfn8Bf2AEfn5+fgF/YAR/f39+AX5gA39/fwF+YAJ/fwF9YAJ/fwF8YAN/f38BfWADf39/AXxgDH9/f39/f39/f39/fwF/YAV/f39/fAF/YAZ/f39/fH8Bf2AHf39/f35+fwF/YAt/f39/f39/f39/fwF/YA9/f39/f39/f39/f39/f38AYAh/f39/f39/fwBgBH9/f34AYAF+AX9gDn9/f39/f39/f39/f39/AX9gDX9/f39/f39/f39/f38Bf2ADfn9/AX9gAXwBfmACfn4BfGACf30AYAJ/fABgAn5+AX9gA39+fgBgAn9/AX5gAn5+AX1gA39/fgBgBn9/f35/fwBgBn9/f39/fgF/YAh/f39/f39+fgF/YAR/f35/AX5gCX9/f39/f39/fwF/YAV/f39+fgBgBH9+f38BfwK1hICAABMDZW52C19fY3hhX3Rocm93AAUDZW52FV9lbWJpbmRfcmVnaXN0ZXJfdm9pZAACA2VudhVfZW1iaW5kX3JlZ2lzdGVyX2Jvb2wADQNlbnYYX2VtYmluZF9yZWdpc3Rlcl9pbnRlZ2VyAA0DZW52Fl9lbWJpbmRfcmVnaXN0ZXJfZmxvYXQABQNlbnYbX2VtYmluZF9yZWdpc3Rlcl9zdGRfc3RyaW5nAAIDZW52HF9lbWJpbmRfcmVnaXN0ZXJfc3RkX3dzdHJpbmcABQNlbnYWX2VtYmluZF9yZWdpc3Rlcl9lbXZhbAACA2VudhxfZW1iaW5kX3JlZ2lzdGVyX21lbW9yeV92aWV3AAUDZW52FWVtc2NyaXB0ZW5fbWVtY3B5X2JpZwAF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mAKZAp0CsQKyAtAC0QLTAtQC1QLXAtgC2QLaAuEC4wLlAuYC5wKEA4YDhQOHA9sD3APWA90D0APRA9MD3gPgA+ED4gPMBM0E9ASlAssH9gn/CfIK9Qr5CvwK/wqCC4QLhguIC4oLjAuOC5ALkgviCeoJ+wmSCpMKlAqVCpYKlwqYCpkKmgqbCu8IpgqnCqoKrQquCrEKsgq0Ct0K3grhCuMK5QrnCusK3wrgCuIK5ArmCugK7AqYBfoJgQqCCoMKhAqFCoYKiAqJCosKjAqNCo4KjwqcCp0KngqfCqAKoQqiCqMKtQq2CrgKugq7CrwKvQq/CsAKwQrCCsMKxArFCsYKxwrICskKywrNCs4KzwrQCtIK0wrUCtUK1grXCtgK2QraCpcFmQWaBZsFngWfBaAFoQWiBacFlguoBbUFvgXBBcQFxwXKBc0F0gXVBdgFlwvfBekF7gXwBfIF9AX2BfgF/AX+BYAGmAuNBpUGmwadBp8GoQaqBqwGmQuwBrkGvQa/BsEGwwbJBssGmgucC9QG1QbWBtcG2QbbBt4G8Ar3Cv0KiwuPC4MLhwudC58L7QbuBu8G9Qb3BvkG/AbzCvoKgAuNC5ELhQuJC6ELoAuJB6MLoguPB6QLlgeZB5oHmwecB50HngefB6AHpQuhB6IHowekB6UHpgenB6gHqQemC6oHrQeuB68HsgezB7QHtQe2B6cLtwe4B7kHuge7B7wHvQe+B78HqAvKB+IHqQuJCJsIqgvHCNMIqwvUCOEIrAvpCOoI6witC+wI7QjuCKENog2nDs0CywLKAqgOqw6pDqoOsQ6sDrQOrQ61DsoOxw64Dq4OyQ7GDrkOrw7IDsMOvA6wDr4O0A7RDtMO1A7NDs4O2Q7aDtwO3Q4Kh6yOgADdDhMAEPYEEBwQgAEQwgEQ4gEQoQILGwACQEHQqwEsAAtBf0oNAEEAKALQqwEQsA0LCxsAAkBB4KsBLAALQX9KDQBBACgC4KsBELANCwv3BQEEfyMAQdAAayIBJAACQCAAEP8BIgJB8P///wdPDQACQAJAIAJBCksNACABIAI6AEsgAUHAAGohAwwBCyACQQ9yQQFqIgQQrg0hAyABIARBgICAgHhyNgJIIAEgAzYCQCABIAI2AkQgAyEDCyADIgQgAmohAwJAIAJFDQAgBCAAIAIQ5wEaCyADQQA6AAAgAUHA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G0F/Sg0AIAEoAhAQsA0LIAEQsA0LIARBEGokAAvpAQECfyMAQRBrIgQkAAJAAkAgASAEQQxqQSgQrg0iBUEQaiACIAMQfRB2IgMoAgAiAkUNACAFIQFBACEDIAIhBQwBCyAFIAQoAgw2AgggBUIANwIAIAMgBTYCAAJAIAEoAgAoAgAiAkUNACABIAI2AgALIAEoAgQgAygCABBMIAEgASgCCEEBajYCCEEAIQFBASEDIAUhBQsgACADOgAEIAAgBTYCAAJAIAEiAUUNAAJAIAEsACdBf0oNACABQRxqKAIAELANCwJAIAEsABtBf0oNACABKAIQELANCyABELANCyAEQRBqJAALhwIBA38jAEEgayIEJAAgBEEQaiABIAIgAxB+QQAhAyABIARBDGogBCgCEEEQahB2IgUoAgAiBiECAkAgBg0AIAQoAhAiAyAEKAIMNgIIIANCADcCACAFIAM2AgACQCABKAIAKAIAIgNFDQAgASADNgIACyABKAIEIAUoAgAQTCABIAEoAghBAWo2AgggBCgCECEBIARBADYCEEEBIQMgASECCyAAIAM6AAQgACACNgIAIAQoAhAhASAEQQA2AhACQCABRQ0AAkAgBC0AGEUNAAJAIAEsACdBf0oNACABQRxqKAIAELANCyABLAAbQX9KDQAgASgCEBCwDQsgARCwDQsgBEEgaiQAC4cCAQN/IwBBIGsiBCQAIARBEGogASACIAMQf0EAIQMgASAEQQxqIAQoAhBBEGoQdiIFKAIAIgYhAgJAIAYNACAEKAIQIgMgBCgCDDYCCCADQgA3AgAgBSADNgIAAkAgASgCACgCACIDRQ0AIAEgAzYCAAsgASgCBCAFKAIAEEwgASABKAIIQQFqNgIIIAQoAhAhASAEQQA2AhBBASEDIAEhAgsgACADOgAEIAAgAjYCACAEKAIQIQEgBEEANgIQAkAgAUUNAAJAIAQtABhFDQACQCABLAAnQX9KDQAgAUEcaigCABCwDQsgASwAG0F/Sg0AIAEoAhAQsA0LIAEQsA0LIARBIGokAAvsBAEDfyABIAEgAEYiAjoADAJAIAINACABIQEDQCABIgIoAggiAS0ADA0BAkACQCABKAIIIgMoAgAiBCABRw0AAkAgAygCBCIERQ0AIAQtAAwNACABQQE6AAwgAyADIABGOgAMIARBAToA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QQApA/gcNwAAIAFBIGpBACkD8Bw3AAAgAUEYakEAKQPoHDcAACABQRBqQQApA+AcNwAAIAFBCGpBACkD2Bw3AAAgAUEAKQPQHDcAACAAQSRqQQE6AAAgAEEcakK6gICAgIiAgIB/NwIAIAAgATYCGEHQABCuDUGQHUHJABDnASIBQQA6AEkgAEE0akECOgAAIABBLGpCyYCAgICKgICAfzcCACAAIAE2AihBwAAQrg0iAUEAOgA5IAFBOGpBAC0AmB46AAAgAUEwakEAKQOQHjcAACABQShqQQApA4geNwAAIAFBIGpBACkDgB43AAAgAUEYakEAKQP4HTcAACABQRBqQQApA/AdNwAAIAFBCGpBACkD6B03AAAgAUEAKQPgHTcAACAAQcQAakEDOgAAIABBPGpCuYCAgICIgICAfzcCACAAIAE2AjhBwAAQrg0iAUEAOgA5IAFBOGpBAC0A2B46AAAgAUEwakEAKQPQHjcAACABQShqQQApA8geNwAAIAFBIGpBACkDwB43AAAgAUEYakEAKQO4HjcAACABQRBqQQApA7AeNwAAIAFBCGpBACkDqB43AAAgAUEAKQOgHjcAACAAQdQAakEEOgAAIABBzABqQrmAgICAiICAgH83AgAgACABNgJIQcAAEK4NIgFBADoAOSABQThqQQAtAJgfOgAAIAFBMGpBACkDkB83AAAgAUEoakEAKQOIHzcAACABQSBqQQApA4AfNwAAIAFBGGpBACkD+B43AAAgAUEQakEAKQPwHjcAACABQQhqQQApA+geNwAAIAFBACkD4B43AAAgAEHkAGpBBToAACAAQdwAakK5gICAgIiAgIB/NwIAIAAgATYCWEHAABCuDSIBQQA6AD8gAUE3akEAKQDXHzcAACABQTBqQQApA9AfNwAAIAFBKGpBACkDyB83AAAgAUEgakEAKQPAHzcAACABQRhqQQApA7gfNwAAIAFBEGpBACkDsB83AAAgAUEIakEAKQOoHzcAACABQQApA6AfNwAAIABB9ABqQQY6AAAgAEHsAGpCv4CAgICIgICAfzcCACAAIAE2AmhB0AAQrg1B4B9BwwAQ5wEiAUEAOgBDIABBhAFqQQc6AAAgAEH8AGpCw4CAgICKgICAfzcCACAAIAE2AnhBwAAQrg0iAUEAOgA9IAFBNWpBACkA5SA3AAAgAUEwakEAKQPgIDcAACABQShqQQApA9ggNwAAIAFBIGpBACkD0CA3AAAgAUEYakEAKQPIIDcAACABQRBqQQApA8AgNwAAIAFBCGpBACkDuCA3AAAgAUEAKQOwIDcAACAAQZQBakEIOgAAIABBjAFqQr2AgICAiICAgH83AgAgACABNgKIAUEwEK4NIgFBADoALyABQSdqQQApAJchNwAAIAFBIGpBACkDkCE3AAAgAUEYakEAKQOIITcAACABQRBqQQApA4AhNwAAIAFBCGpBACkD+CA3AAAgAUEAKQPwIDcAACAAQZwBakKvgICAgIaAgIB/NwIAIABBpAFqQQk6AAAgACABNgKYAUEwEK4NIgFBADoAIyABQR9qQQAoAL8hNgAAIAFBGGpBACkDuCE3AAAgAUEQakEAKQOwITcAACABQQhqQQApA6ghNwAAIAFBACkDoCE3AAAgAEGsAWpCo4CAgICGgICAfzcCACAAQbQBakEKOgAAIAAgATYCqAFBMBCuDSIBQQA6AC0gAUElakEAKQD1ITcAACABQSBqQQApA/AhNwAAIAFBGGpBACkD6CE3AAAgAUEQakEAKQPgITcAACABQQhqQQApA9ghNwAAIAFBACkD0CE3AAAgAEG8AWpCrYCAgICGgICAfzcCACAAQcQBakELOgAAIAAgATYCuAFBwAAQrg0iAUEAOgA2IAFBLmpBACkBriI3AAAgAUEoakEAKQOoIjcAACABQSBqQQApA6AiNwAAIAFBGGpBACkDmCI3AAAgAUEQakEAKQOQIjcAACABQQhqQQApA4giNwAAIAFBACkDgCI3AAAgAEHMAWpCtoCAgICIgICAfzcCACAAQdQBakEMOgAAIAAgATYCyAFBMBCuDSIBQQA6ACIgAUEgakEALwHgIjsAACABQRhqQQApA9giNwAAIAFBEGpBACkD0CI3AAAgAUEIakEAKQPIIjcAACABQQApA8AiNwAAIABB3AFqQqKAgICAhoCAgH83AgAgAEHkAWpBDToAACAAIAE2AtgBQTAQrg0iAUEAOgArIAFBJ2pBACgAlyM2AAAgAUEgakEAKQOQIzcAACABQRhqQQApA4gjNwAAIAFBEGpBACkDgCM3AAAgAUEIakEAKQP4IjcAACABQQApA/AiNwAAIABB7AFqQquAgICAhoCAgH83AgAgAEH0AWpBDjoAACAAIAE2AugBQSAQrg0iAUEAOgAaIAFBGGpBAC8BuCM7AAAgAUEQakEAKQOwIzcAACABQQhqQQApA6gjNwAAIAFBACkDoCM3AAAgAEH8AWpCmoCAgICEgICAfzcCACAAQYQCakEPOgAAIAAgATYC+AFBwAAQrg0iAUEAOgA/IAFBN2pBACkA9yM3AAAgAUEwakEAKQPwIzcAACABQShqQQApA+gjNwAAIAFBIGpBACkD4CM3AAAgAUEYakEAKQPYIzcAACABQRBqQQApA9AjNwAAIAFBCGpBACkDyCM3AAAgAUEAKQPAIzcAACAAQZQCakEQOgAAIABBjAJqQr+AgICAiICAgH83AgAgACABNgKIAkHAABCuDSIBQQA6ADkgAUE4akEALQC4JDoAACABQTBqQQApA7AkNwAAIAFBKGpBACkDqCQ3AAAgAUEgakEAKQOgJDcAACABQRhqQQApA5gkNwAAIAFBEGpBACkDkCQ3AAAgAUEIakEAKQOIJDcAACABQQApA4AkNwAAIABBpAJqQRE6AAAgAEGcAmpCuYCAgICIgICAfzcCACAAIAE2ApgCQcAAEK4NIgFBADoAOCABQTBqQQApA/AkNwAAIAFBKGpBACkD6CQ3AAAgAUEgakEAKQPgJDcAACABQRhqQQApA9gkNwAAIAFBEGpBACkD0CQ3AAAgAUEIakEAKQPIJDcAACABQQApA8AkNwAAIABBrAJqQriAgICAiICAgH83AgAgAEG0AmpBEjoAAEEAQgA3Aty4AUEAQgA3AuS4AUEAQYCAgPwDNgLsuAEgACABNgKoAkEAIQEDQCAAQbgCakHcuAEgAEEIaiABIgFBBHRqIgIgAhBoIAFBAWoiAiEBIAJBE0cNAAsgAEG4AmohAgNAIAIiAkFwaiEBAkAgAkF7aiwAAEF/Sg0AIAEoAgAQsA0LIAEhAiABIABBCGpHDQALQRRBAEGACBDjARogAEHAABCuDSIBNgIIIABCuoCAgICIgICAfzcCDCABQThqQQAvAcgcOwAAIAFBMGpBACkDwBw3AAAgAUEoakEAKQO4HDcAACABQSBqQQApA7AcNwAAIAFBGGpBACkDqBw3AAAgAUEQakEAKQOgHDcAACABQQhqQQApA5gcNwAAIAFBACkDkBw3AAAgAUEAOgA6QcAAEK4NIQEgAEEIakEQakK6gICAgIiAgIB/NwMAIAAgATYCFCABQThqQQAvAYgdOwAAIAFBMGpBACkDgB03AAAgAUEoakEAKQP4HDcAACABQSBqQQApA/AcNwAAIAFBGGpBACkD6Bw3AAAgAUEQakEAKQPgHDcAACABQQhqQQApA9gcNwAAIAFBACkD0Bw3AAAgAUEAOgA6QdAAEK4NIQEgAEEkakLJgICAgIqAgIB/NwIAIAAgATYCICABQZAdQckAEOcBQQA6AElBwAAQrg0hASAAQQhqQShqQrmAgICAiICAgH83AwAgACABNgIsIAFBOGpBAC0AmB46AAAgAUEwakEAKQOQHjcAACABQShqQQApA4geNwAAIAFBIGpBACkDgB43AAAgAUEYakEAKQP4HTcAACABQRBqQQApA/AdNwAAIAFBCGpBACkD6B03AAAgAUEAKQPgHTcAACABQQA6ADlBwAAQrg0hASAAQTxqQrmAgICAiICAgH83AgAgACABNgI4IAFBOGpBAC0A2B46AAAgAUEwakEAKQPQHjcAACABQShqQQApA8geNwAAIAFBIGpBACkDwB43AAAgAUEYakEAKQO4HjcAACABQRBqQQApA7AeNwAAIAFBCGpBACkDqB43AAAgAUEAKQOgHjcAACABQQA6ADlBwAAQrg0hASAAQQhqQcAAakK5gICAgIiAgIB/NwMAIAAgATYCRCABQThqQQAtAJgfOgAAIAFBMGpBACkDkB83AAAgAUEoakEAKQOIHzcAACABQSBqQQApA4AfNwAAIAFBGGpBACkD+B43AAAgAUEQakEAKQPwHjcAACABQQhqQQApA+geNwAAIAFBACkD4B43AAAgAUEAOgA5QcAAEK4NIQEgAEHUAGpCv4CAgICIgICAfzcCACAAIAE2AlAgAUE3akEAKQDXHzcAACABQTBqQQApA9AfNwAAIAFBKGpBACkDyB83AAAgAUEgakEAKQPAHzcAACABQRhqQQApA7gfNwAAIAFBEGpBACkDsB83AAAgAUEIakEAKQOoHzcAACABQQApA6AfNwAAIAFBADoAP0HQABCuDSEBIABB4ABqQsOAgICAioCAgH83AwAgACABNgJcIAFB4B9BwwAQ5wFBADoAQ0HAABCuDSEBIABB7ABqQr2AgICAiICAgH83AgAgACABNgJoIAFBNWpBACkA5SA3AAAgAUEwakEAKQPgIDcAACABQShqQQApA9ggNwAAIAFBIGpBACkD0CA3AAAgAUEYakEAKQPIIDcAACABQRBqQQApA8AgNwAAIAFBCGpBACkDuCA3AAAgAUEAKQOwIDcAACABQQA6AD1BMBCuDSEBIABB+ABqQq+AgICAhoCAgH83AwAgACABNgJ0IAFBJ2pBACkAlyE3AAAgAUEgakEAKQOQITcAACABQRhqQQApA4ghNwAAIAFBEGpBACkDgCE3AAAgAUEIakEAKQP4IDcAACABQQApA/AgNwAAIAFBADoAL0EwEK4NIQEgAEGEAWpCo4CAgICGgICAfzcCACAAIAE2AoABIAFBH2pBACgAvyE2AAAgAUEYakEAKQO4ITcAACABQRBqQQApA7AhNwAAIAFBCGpBACkDqCE3AAAgAUEAKQOgITcAACABQQA6ACNBMBCuDSEBIABBkAFqQq2AgICAhoCAgH83AwAgACABNgKMASABQSVqQQApAPUhNwAAIAFBIGpBACkD8CE3AAAgAUEYakEAKQPoITcAACABQRBqQQApA+AhNwAAIAFBCGpBACkD2CE3AAAgAUEAKQPQITcAACABQQA6AC1BwAAQrg0hASAAQZwBakK2gICAgIiAgIB/NwIAIAAgATYCmAEgAUEuakEAKQGuIjcAACABQShqQQApA6giNwAAIAFBIGpBACkDoCI3AAAgAUEYakEAKQOYIjcAACABQRBqQQApA5AiNwAAIAFBCGpBACkDiCI3AAAgAUEAKQOAIjcAACABQQA6ADZBMBCuDSEBIABBqAFqQqKAgICAhoCAgH83AwAgACABNgKkASABQSBqQQAvAeAiOwAAIAFBGGpBACkD2CI3AAAgAUEQakEAKQPQIjcAACABQQhqQQApA8giNwAAIAFBACkDwCI3AAAgAUEAOgAiQSAQrg0hASAAQbQBakKagICAgISAgIB/NwIAIAAgATYCsAEgAUEYakEALwG4IzsAACABQRBqQQApA7AjNwAAIAFBCGpBACkDqCM3AAAgAUEAKQOgIzcAACABQQA6ABpBMBCuDSEBIABBwAFqQquAgICAhoCAgH83AwAgACABNgK8ASABQSdqQQAoAJcjNgAAIAFBIGpBACkDkCM3AAAgAUEYakEAKQOIIzcAACABQRBqQQApA4AjNwAAIAFBCGpBACkD+CI3AAAgAUEAKQPw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ACAIIAcgAxDoARoLIAJBADoAAAJAAkAgASAEQQxqIAYQdCIDKAIAIgZFDQAgBSEDQQAhASAGIQUMAQsgBSAEKAIMNgIIIAVCADcCACADIAU2AgACQCABKAIAKAIAIgZFDQAgASAGNgIACyABKAIEIAMoAgAQTCABIAEoAghBAWo2AghBACEDQQEhASAFIQULIAAgAToABCAAIAU2AgACQCADIgNFDQACQCADLAAbQX9KDQAgAygCEBCwDQsgAxCwDQsgBEEQaiQADwsgBhAXAAvoCwEJfyMAQdAAayIEJAAgBEHAAGogAiADQSBBARDYAUEAIQMCQCAEKAJEIAQoAkAiAmtBEEcNACAEIAIoAgAQ5AEiBaw3AzhBACEDAkAgBUH/AUsNACAAKAIAIgZBiAFqIgchCAJAIAcoAgAiA0UNACAFQf8BcSEJIAchAiADIQMDQCACIAMiAyADLQAQIAlJIgobIgghAiADQQRqIAMgChsoAgAiCiEDIAghCCAKDQALCwJAAkAgCCICIAdGDQAgAiEDIAItABAgBUH/AXFNDQELIAchAwsgAyICIQMCQAJAAkACQAJAAkAgAiAHRw0AQcQAEK4NIgNBHGpCADcCACADQSxqIgJCADcCACADQTRqIgpCADcCACADQgA3AgQgA0IANwIMIANBqClBCGo2AgAgA0EUakIANwIAIANBJGoiCEIANwIAIANBPGoiCUIANwIAIANBIGogCDYCACACIANBMGoiCDYCACAIQQA2AgAgA0E4aiAJNgIAIApBADYCACAEIAM2AhwgBCADQQxqNgIYIARBKGogBkGEAWogBEE4aiAEQRhqEJEBIAQoAhwhAyAELQAsRQ0BIAQoAighAgJAIANFDQAgAyADKAIEIgpBf2o2AgQgCg0AIAMgAygCACgCCBEDACADEKMNCyACIQMLIAMhBiAEQShqIAQoAkAiAygCCCADQQxqKAIAQTtBARDYASAEKAIoIgMgBCgCLCILRg0EIAMhAwNAIAYoAhQiCUEgaiEIAkACQCADIgMoAgBBPSADKAIEEPUBIgoNACADKAIEIgJB8P///wdPDQQgAygCACEJAkACQCACQQpLDQAgBCACOgAjIARBGGohCgwBCyACQQ9yQQFqIgcQrg0hCiAEIAdBgICAgHhyNgIgIAQgCjYCGCAEIAI2AhwgCiEK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QCABRQ0AIAEQsA0LC0gAIABCADcAFyAAQX82AgggACACNgIEIAAgATYCACAAQQxqQQA6AAAgAEEfakIANwAAIABBJ2pCADcAACAAQSxqQgA3AAAgAAuIAQECfwJAIABBJGooAgAiAUUNACABIAEoAgQiAkF/ajYCBCACDQAgASABKAIAKAIIEQMAIAEQow0LAkAgAEEcaigCACIBRQ0AIAEgASgCBCICQX9qNgIEIAINACABIAEoAgAoAggRAwAgARCjDQsCQCAALAAXQX9KDQAgAEEMaigCABCwDQsgAAuyAwEFf0GwARCuDSIBQbwnQQhqNgIAIAFCADcCBCABQQxqQQBBpAEQ6QEhAiABQZgBakIANwIAIAFBiAFqIAFBjAFqNgIAIAFBoAFqQQA2AgAgAUGoAWoiA0IANwIAIAFBpAFqIAM2AgAgACACNgIYIABBHGoiAygCACECIAMgATYCAAJAIAJFDQAgAiACKAIEIgFBf2o2AgQgAQ0AIAIgAigCACgCCBEDACACEKMNCwJAAkADQCAAKAIEIgRFDQEgAEEANgI4IAAgACgCACIBNgI0QQAhAiABIQMCQANAIAIiASEFAkAgAyICLQAAQXZqDgQCAAACAAsgACACQQFqIgM2AgAgACABQQFqIgE2AjggASECIAMhAyABIARHDQALIAQhBQsgACAEIAVrIgE2AgQCQCABRQ0AIAEhAiAAKAIAIQMDQCACIQECQCADIgItAABBdmoOBAACAgACCyAAIAFBf2oiATYCBCAAIAJBAWoiAzYCACABIQIgAyEDIAENAAsLIAAgACgCMEEBajYCMCAERQ0BIAAQnwENAAwCCwALIAAoAiBFDQAgABCgAQsgBEUL8QQBBX8jAEEQayIBJABBASECAkACQAJAAkACQAJAAkACQAJAIAAoAjQiAywAAEGff2oOGgAHAQYHBgYGAgYHBgMGBAcGBwUHBwcGBgYHBgsgABChASECDAYLIAAQogEhAgwFCyAAKAI4QX5qIgJB8P///wdPDQUCQAJAIAJBCksNACABIAI6AAsgASEEDAELIAJBD3JBAWoiBRCuDSEEIAEgBUGAgICAeHI2AgggASAENgIAIAEgAjYCBCAEIQQLIAQiBSACaiEEAkAgAkUNACAFIANBAmogAhDoARoLIARBADoAACAAKAIYIgJBNGoh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IAAoAjAQpQECQCABLAATQX9KDQAgASgCCBCwDQtBACECDAELAkAgAkUNACADQfD///8HTw0GAkACQCADQQpLDQAgASADOgATIAFBCGohAAwBCyADQQ9yQQFqIgQQrg0hACABIARBgICAgHhyNgIQIAEgADYCCCABIAM2AgwgACEACyAAIgQgA2ohAAJAIANFDQAgBCACIAMQ6AEaCyAAQQA6AAAgBSABQRhqIAFBCGoQ0AECQCABLAATQX9KDQAgASgCCBCwDQtBASECDAELIAFBADoACCABQQA6ABMgBSABQRhqIAFBCGoQ0AECQCABLAATQX9KDQAgASgCCBCwDQtBASECCyACIQACQCABLAAjQX9KDQAgASgCGBCwDQsgAUEwaiQAIAAPCxCpAQALIAFBCGoQFwALIAFBCGoQFwALIAFBCGoQFwALIAFBCGoQFwALjgMBA38jAEEgayIBJAAgAUEQaiAAKAI0QQJqIAAoAjhBfmpBIEEBENgBAkACQAJAIAEoAhAiAkEMaigCACIDQQNHDQAgAigCCCICQbUrIAMQgAJFDQEgAkG5KyADEIACRQ0BCyABQRAQrg0iAzYCACABQouAgICAgoCAgH83AgQgA0EHakEAKACOCzYAACADQQApAIcLNwAAIANBADoACyAAQQIgASAAKAIwEKUBAkAgASwAC0F/Sg0AIAEoAgAQsA0LQQAhAAwBCwJAIAAoAiAiA0UNACADQQA2AlxBASEADAELAkAgACgCGCgCTA0AQQEhAAwBCyABQSAQrg0iAzYCACABQpKAgICAhICAgH83AgQgA0EQakEALwCwCjsAACADQQhqQQApAKgKNwAAIANBACkAoAo3AAAgA0EAOgASIABBAiABIAAoAjAQpQECQCABLAALQX9KDQAgASgCABCwDQtBACEACyAAIQMCQCABKAIQIgBFDQAgASAANgIUIAAQsA0LIAFBIGokACADC7kJAQh/IwBBIGsiASQAIAFBEGogACgCNEECaiAAKAI4QX5qQSBBARDYAQJAAkACQCABKAIUIAEoAhAiAmtBH0sNACABQRAQrg0iAjYCACABQoyAgICAgoCAgH83AgQgAkEIakEAKACACzYAACACQQApAPgKNwAAIAJBADoADCAAQQEgASAAKAIwEKUBAkAgASwAC0F/Sg0AIAEoAgAQsA0LQQAhAAwBCyACKAIAIQMCQAJAAkACQCACKAIEIgJBe2oOBwACAgICAgECCwJAIANBvSsgAhCAAg0AQQAhAkEAIQNBASEEDAMLAkAgA0HDKyACEIACDQBBACECQQEhA0EBIQQMAwsgAkELRw0BCyADQckrIAIQgAINAEEBIQJBAiEDQQEhBAwBC0EAIgQhAkEAIQMgBCEECyADIQUgAiEGAkACQCAEIgMNACABQSAQrg0iAjYCACABQpiAgICAhICAgH83AgQgAkEQakEAKQDjDzcAACACQQhqQQApANsPNwAAIAJBACkA0w83AAAgAkEAOgAYIABBAiABIAAoAjAQpQEgASwAC0F/Sg0BIAEoAgAQsA0MAQsCQCAAKAIgRQ0AIAAQoAELQdgBEK4NIgJBtChBCGo2AgAgAkIANwIEIAJBDGpBAEHMARDpASEEIAJBiAFqIgdCADcCACACQRBqQQk7AQAgAkEUakEAQe4AEOkBGiACQZQBaiIIQgA3AgAgAkGEAWogBzYCACACQaABaiIHQgA3AgAgAkGQAWogCDYCACACQdABaiIIQgA3AgAgAkGcAWogBzYCACACQagBakIANwIAIAJBsAFqQgA3AgAgAkG4AWpCADcCACACQcABakIANwIAIAJByAFqQQA2AgAgAkHMAWogCDYCACAAIAQ2AiAgAEEkaiIHKAIAIQQgByACNgIAAkAgBEUNACAEIAQoAgQiAkF/ajYCBCACDQAgBCAEKAIAKAIIEQMAIAQQow0LIAAoAiAiBCAFNgIAIAQgASgCECIFKAIIEOQBOwEEIAVBFGooAgAiAkHw////B08NAiAFKAIQIQcCQAJAIAJBCksNACABIAI6AAsgASEFDAELIAJBD3JBAWoiCBCuDSEFIAEgCEGAgICAeHI2AgggASAFNgIAIAEgAjYCBCAFIQULIAUiCCACaiEFAkAgAkUNACAIIAcgAhDoARoLIAVBADoAACAEQQhqIQICQCAELAATQX9KDQAgAigCABCwDQsgAiABKQMANwIAIAJBCGogAUEIaigCADYCACAGRQ0AIAEoAhAiBEEcaigCACICQfD///8HTw0CIAQoAhghBQJAAkAgAkEKSw0AIAEgAjoACyABIQQMAQsgAkEPckEBaiIGEK4NIQQgASAGQYCAgIB4cjYCCCABIAQ2AgAgASACNgIEIAQhBAsgBCIGIAJqIQQCQCACRQ0AIAYgBSACEOgBGgsgBEEAOgAAIAAoAiAiAkEgaiEAAkAgAiwAK0F/Sg0AIAAoAgAQsA0LIAAgASkDADcCACAAQQhqIAFBCGooAgA2AgALIAMhAAsgACECAkAgASgCECIARQ0AIAEgADYCFCAAELANCyABQSBqJAAgAg8LIAEQFwAL7QcBBX8jAEEgayIBJAAgAUEQaiAAKAI0QQJqIAAoAjhBfmpBIEEBENgBAkACQAJAIAEoAhQgASgCECICa0EwRg0AIAFBEBCuDSIDNgIAIAFCjICAgICCgICAfzcCBCADQQhqQQAoAIALNgAAIANBACkA+Ao3AAAgA0EAOgAMIABBASABIAAoAjAQpQECQCABLAALQX9KDQAgASgCABCwDQtBACEADAELIAIoAgQiA0Hw////B08NASACKAIAIQQCQAJAIANBCksNACABIAM6AAsgASECDAELIANBD3JBAWoiBRCuDSECIAEgBUGAgICAeHI2AgggASACNgIAIAEgAzYCBCACIQILIAIiBSADaiECAkAgA0UNACAFIAQgAxDoARoLIAJBADoAACAAKAIYIgJBBGohAwJAIAIsAA9Bf0oNACADKAIAELANCyADIAEpAwA3AgAgA0EIaiABQQhqKAIANgIAIAEoAhAiAkEMaigCACIDQfD///8HTw0BIAIoAgghBAJAAkAgA0EKSw0AIAEgAzoACyABIQIMAQsgA0EPckEBaiIFEK4NIQIgASAFQYCAgIB4cjYCCCABIAI2AgAgASADNgIEIAIhAgsgAiIFIANqIQICQCADRQ0AIAUgBCADEOgBGgsgAkEAOgAAIAAoAhgiAkEQaiEDAkAgAiwAG0F/Sg0AIAMoAgAQsA0LIAMgASkDADcCACADQQhqIAFBCGooAgA2AgAgASgCECICQRRqKAIAIgNB8P///wdPDQEgAigCECEEAkACQCADQQpLDQAgASADOgALIAEhAgwBCyADQQ9yQQFqIgUQrg0hAiABIAVBgICAgHhyNgIIIAEgAjYCACABIAM2AgQgAiECCyACIgUgA2ohAgJAIANFDQAgBSAEIAMQ6AEaCyACQQA6AAAgACgCGCICQRxqIQMCQCACLAAnQX9KDQAgAygCABCwDQsgAyABKQMANwIAIANBCGogAUEIaigCADYC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ODYCOCACIAEoAjw2AjwgAUHAAGohASACQcAAaiICIAVNDQALCyACIARPDQEDQCACIAEoAgA2AgAgAUEEaiEBIAJBBGoiAiAESQ0ADAILAAsCQCADQQRPDQAgACECDAELAkAgA0F8aiIEIABPDQAgACECDAELIAAhAgNAIAIgAS0AADoAACACIAEtAAE6AAEgAiABLQACOgACIAIgAS0AAzoAAyABQQRqIQEgAkEEaiICIARNDQALCwJAIAIgA08NAANAIAIgAS0AADoAACABQQFqIQEgAkEBaiICIANHDQALCyAAC/cCAQJ/AkAgACABRg0AAkAgASAAIAJqIgNrQQAgAkEBdGtLDQAgACABIAIQ5wEPCyABIABzQQNxIQQCQAJAAkAgACABTw0AAkAgBEUNACAAIQMMAwsCQCAAQQNxDQAgACEDDAILIAAhAwNAIAJFDQQgAyABLQAAOgAAIAFBAWohASACQX9qIQIgA0EBaiIDQQNxRQ0CDAALAAsCQCAEDQACQCADQQNxRQ0AA0AgAkUNBSAAIAJBf2oiAmoiAyABIAJqLQAAOgAAIANBA3ENAAsLIAJBA00NAANAIAAgAkF8aiICaiABIAJqKAIANgIAIAJBA0sNAAsLIAJFDQIDQCAAIAJBf2oiAmogASACai0AADoAACACDQAMAwsACyACQQNNDQADQCADIAEoAgA2AgAgAUEEaiEBIANBBGohAyACQXxqIgJBA0sNAAsLIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8gICA38BfgJAIAJFDQAgACABOgAAIAIgAGoiA0F/aiABOgAAIAJBA0kNACAAIAE6AAIgACABOgABIANBfWogAToAACADQX5qIAE6AAAgAkEHSQ0AIAAgAToAAyADQXxqIAE6AAAgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIFayICQSBJDQAgAa1CgYCAgBB+IQYgAyAFaiEBA0AgASAGNwMYIAEgBjcDECABIAY3AwggASAGNwMAIAFBIGohASACQWBqIgJBH0sNAAsLIAALBwAgABDrAQsjACAAQRh0IABBgP4DcUEIdHIgAEEIdkGA/gNxIABBGHZycgsHACAAEO0BCxIAIABBCHQgAEEIdnJB//8DcQsGAEHQuQELzAUBCX8jAEHQAWsiBCQAAkACQAJAAkACQCAAQQpGDQAgAEECRw0BIAEtAAAhACABLQABIQUgAS0AAiEGIAQgAS0AAzYCDCAEIAY2AgggBCAFNgIEIAQgADYCACACIANBmRAgBBD7ASADSQ0EDAILIAFBuDxBDBD2ASEAIAEtAApBCHQgAS0AC3IhBSABLQAIQQh0IAEtAAlyIQYgAS0ABkEIdCABLQAHciEHIAEtAARBCHQgAS0ABXIhCCABLQACQQh0IAEtAANyIQkgAS0AAEEIdCABLQABciEKIAEtAAwhCwJAAkAgAEUNACABLQAPIQAgAS0ADiEMIAEtAA0hASAEQdQAaiAFNgIAIARB0ABqIAY2AgAgBEHYAGogASALQQh0cjYCACAEQdwAaiAAIAxBCHRyNgIAIAQgBzYCTCAEIAg2AkggBCAJNgJEIAQgCjYCQCAEQeAAakHkAEGjCSAEQcAAahD7ARoMAQsgAS0ADSEAIAEtAA4hDCAEQTRqIAEtAA82AgAgBEEwaiAMNgIAIARBLGogADYCACAEQShqIAs2AgAgBEEkaiAFNgIAIARBIGogBjYCACAEIAc2AhwgBCAINgIYIAQgCTYCFCAEIAo2AhAgBEHgAGpB5ABBhxAgBEEQahD7ARoLAkAgBC0AYCIFRQ0AQQIhBkEAIQdBACEAA0ACQAJAIAAiAUUNACAFQf8BcUE6Rw0BCyAEQeAAaiABakGnGBCBAiIAIAYgACAGSiIAGyEGIAEgByAAGyEHCyAEQeAAaiABQQFqIgBqLQAAIgUNAAsgBkEESA0AIARB4ABqIAdqIgBBuvQAOwAAIABBAmogACAGaiABIAYgB2prQQJqEOgBGgsgBEHgAGoQ/wEgA08NASACIARB4ABqEP0BGgwDCxDuAUEFNgIADAELEO4BQTM2AgALQQAhAgsgBEHQAWokACACC6kGAQZ/IwBBEGsiAyQAAkACQAJAAkACQCAAQQpGDQAgAEECRw0CQQAhBANAQQAhBUEAIQACQAJAAkADQCABIABqLAAAIgYQ8gFFDQEgBUEKbCAGakFQaiEFQQMhBiAAQQFqIgBBA0cNAAwCCwALIAAhBgJAIAAOAggAAQtBASEGIAVB/wFMDQEMBgtBACEAIAEtAABBMEYNBiAFQf8BSg0GCyACIARqIAU6AAACQCABIAZqIgYtAAAiBQ0AIARBA0YNAwtBACEAIAVBLkcNBSAGQQFqIQEgBEEBaiIEQQRHDQAMBQsACwJAIAEtAAAiBkE6Rw0AQQAhACABLQABQTpHDQQgAUEBaiEBC0EAIQdBfyEIA0BBACEAQQAhBQJAAkACQAJAIAZB/wFxQTpHDQBBACEAQQAhBSAIQX9KDQBBASEEIAMgB0EHcUEBdHJBADsBACABQQFqIQACQCABLQABIgYNACAAIQEgByEIDAILIAchCCAHQQdGDQcMAwsCQAJAA0AgASAFaiwAACIEEPEBIgZBAEgNASAGIABBBHRqIQAgBUEBaiIFQQRHDQALIAEtAAQhBEEEIQUMAQsgBUUNBwsgAyAHQQdxQQF0ciAAOwEAAkAgBEH/AXEiBg0AQQEhBCAIQX9KDQFBACEAIAdBB0YNAQwIC0EAIQAgB0EHRg0HIAZBOkYNASAGQS5HDQcCQCAHQQVLDQAgCEEASA0ICyAHQQFqIQdBACEEC0EAIQACQCAIQQBIDQAgAyAIQQF0aiIFIAdBAXRrQQ5qIAUgByAIa0EBdEECahDoARogB0EGSg0AQQcgB2siBUEBIAVBAUobIQZBACEFA0AgAyAFIAhqQQF0akEAOwEAIAVBAWoiBSAGRw0ACwsDQCACIgUgAyAAQQF0ai8BACIGQQh0IAZBCHZyOwAAIAVBAmohAiAAQQFqIgBBCEcNAAsgBA0DQQIgASAFQX5qEPABQQFIDQUMAwsgBSABakEBaiIALQAAIQYLIAdBAWohByAAIQEMAAsAC0EBIQAMAgsQ7gFBBTYCAEF/IQAMAQtBACEACyADQRBqJAAgAAsuAQF/AkAgAEFQaiIBQQpJDQAgAEEgciIAQal/akF/IABBn39qQQZJGyEBCyABCwoAIABBUGpBCkkLBwAgABDyAQsQACAAQSBGIABBd2pBBUlyC+UBAQJ/IAJBAEchAwJAAkACQCAAQQNxRQ0AIAJFDQAgAUH/AXEhBANAIAAtAAAgBEYNAiACQX9qIgJBAEchAyAAQQFqIgBBA3FFDQEgAg0ACwsgA0UNAQJAIAAtAAAgAUH/AXFGDQAgAkEESQ0AIAFB/wFxQYGChAhsIQQDQCAAKAIAIARzIgNBf3MgA0H//ft3anFBgIGChHhxDQIgAEEEaiEAIAJBfGoiAkEDSw0ACwsgAkUNAQsgAUH/AXEhAwNAAkAgAC0AACADRw0AIAAPCyAAQQFqIQAgAkF/aiICDQALC0EAC4cBAQJ/AkACQAJAIAJBBEkNACABIAByQQNxDQEDQCAAKAIAIAEoAgBHDQIgAUEEaiEBIABBBGohACACQXxqIgJBA0sNAAsLIAJFDQELAkADQCAALQAAIgMgAS0AACIERw0BIAFBAWohASAAQQFqIQAgAkF/aiICRQ0CDAALAAsgAyAEaw8LQQALBwAgABD4AQsjACAAQRh0IABBgP4DcUEIdHIgAEEIdkGA/gNxIABBGHZycgsHACAAEPoBCxIAIABBCHQgAEEIdnJB//8DcQsqAQF/IwBBEGsiBCQAIAQgAzYCDCAAIAEgAiADEJwCIQMgBEEQaiQAIAML2QEBAX8CQAJAAkAgASAAc0EDcUUNACABLQAAIQIMAQsCQCABQQNxRQ0AA0AgACABLQAAIgI6AAAgAkUNAyAAQQFqIQAgAUEBaiIBQQNxDQALCyABKAIAIgJBf3MgAkH//ft3anFBgIGChHhxDQADQCAAIAI2AgAgASgCBCECIABBBGohACABQQRqIQEgAkF/cyACQf/9+3dqcUGAgYKEeHFFDQALCyAAIAI6AAAgAkH/AXFFDQADQCAAIAEtAAEiAjoAASAAQQFqIQAgAUEBaiEBIAINAAsLIAALDAAgACABEPwBGiAACyQBAn8CQCAAEP8BQQFqIgEQpAIiAg0AQQAPCyACIAAgARDnAQtyAQN/IAAhAQJAAkAgAEEDcUUNACAAIQEDQCABLQAARQ0CIAFBAWoiAUEDcQ0ACwsDQCABIgJBBGohASACKAIAIgNBf3MgA0H//ft3anFBgIGChHhxRQ0ACwNAIAIiAUEBaiECIAEtAAANAAsLIAEgAGsLcAEDfwJAIAINAEEADwtBACEDAkAgAC0AACIERQ0AAkADQCABLQAAIgVFDQEgAkF/aiICRQ0BIARB/wFxIAVHDQEgAUEBaiEBIAAtAAEhBCAAQQFqIQAgBA0ADAILAAsgBCEDCyADQf8BcSABLQAAawvkAQEDfyMAQSBrIgJBGGpCADcDACACQRBqQgA3AwAgAkIANwMIIAJCADcDAAJAIAEtAAAiAw0AQQAPCwJAIAEtAAENACAAIQEDQCABIgRBAWohASAELQAAIANGDQALIAQgAGsPCwNAIAIgA0EDdkEccWoiBCAEKAIAQQEgA3RyNgIAIAEtAAEhAyABQQFqIQEgAw0ACyAAIQQCQCAALQAAIgNFDQAgACEBA0ACQCACIANBA3ZBHHFqKAIAIAN2QQFxDQAgASEEDAILIAEtAAEhAyABQQFqIgQhASADDQALCyAEIABrCwQAQQELAgALBABBAAsEAEEACwQAQQALBABBAAsCAAsCAAtcAQF/IAAgACgCSCIBQX9qIAFyNgJIAkAgACgCACIBQQhxRQ0AIAAgAUEgcjYCAEF/DwsgAEIANwIEIAAgACgCLCIBNgIcIAAgATYCFCAAIAEgACgCMGo2AhBBAAsXAQF/IABBACABEPUBIgIgAGsgASACGwuPAQIBfgF/AkAgAL0iAkI0iKdB/w9xIgNB/w9GDQACQCADDQACQAJAIABEAAAAAAAAAABiDQBBACEDDAELIABEAAAAAAAA8EOiIAEQjAIhACABKAIAQUBqIQMLIAEgAzYCACAADwsgASADQYJ4ajYCACACQv////////+HgH+DQoCAgICAgIDwP4S/IQALIAALzgEBA38CQAJAIAIoAhAiAw0AQQAhBCACEIoCDQEgAigCECEDCwJAIAMgAigCFCIFayABTw0AIAIgACABIAIoAiQRBAAPCwJAAkAgAigCUEEATg0AQQAhAwwBCyABIQQDQAJAIAQiAw0AQQAhAwwCCyAAIANBf2oiBGotAABBCkcNAAsgAiAAIAMgAigCJBEEACIEIANJDQEgACADaiEAIAEgA2shASACKAIUIQULIAUgACABEOcBGiACIAIoAhQgAWo2AhQgAyABaiEECyAEC/sCAQR/IwBB0AFrIgUkACAFIAI2AswBQQAhBiAFQaABakEAQSgQ6QEaIAUgBSgCzAE2AsgBAkACQEEAIAEgBUHIAWogBUHQAGogBUGgAWogAyAEEI8CQQBODQBBfyEEDAELAkAgACgCTEEASA0AIAAQggIhBgsg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AEEgcQ0AIAEgAiAAEI0CGgsLdAEDf0EAIQECQCAAKAIALAAAEPIBDQBBAA8LA0AgACgCACECQX8hAwJAIAFBzJmz5gBLDQBBfyACLAAAQVBqIgMgAUEKbCIBaiADIAFB/////wdzShshAwsgACACQQFqNgIAIAMhASACLAABEPIBDQALIAMLtgQAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAUF3ag4SAAECBQMEBgcICQoLDA0ODxAREgsgAiACKAIAIgFBBGo2AgAgACABKAIANgIADwsgAiACKAIAIgFBBGo2AgAgACABNAIANwMADwsgAiACKAIAIgFBBGo2AgAgACABNQIANwMADwsgAiACKAIAIgFBBGo2AgAgACABNAIANwMADwsgAiACKAIAIgFBBGo2AgAgACABNQIANwMADwsgAiACKAIAQQdqQXhxIgFBCGo2AgAgACABKQMANwMADwsgAiACKAIAIgFBBGo2AgAgACABMgEANwMADwsgAiACKAIAIgFBBGo2AgAgACABMwEANwMADwsgAiACKAIAIgFBBGo2AgAgACABMAAANwMADwsgAiACKAIAIgFBBGo2AgAgACABMQAANwMADwsgAiACKAIAQQdqQXhxIgFBCGo2AgAgACABKQMANwMADwsgAiACKAIAIgFBBGo2AgAgACABNQIANwMADwsgAiACKAIAQQdqQXhxIgFBCGo2AgAgACABKQMANwMADwsgAiACKAIAQQdqQXhxIgFBCGo2AgAgACABKQMANwMADwsgAiACKAIAIgFBBGo2AgAgACABNAIANwMADwsgAiACKAIAIgFBBGo2AgAgACABNQIANwMADwsgAiACKAIAQQdqQXhxIgFBCGo2AgAgACABKwMAOQMADwsgACACIAMRAgALCz4BAX8CQCAAUA0AA0AgAUF/aiIBIACnQQ9xQaDAAGotAAAgAnI6AAAgAEIPViEDIABCBIghACADDQALCyABCzYBAX8CQCAAUA0AA0AgAUF/aiIBIACnQQdxQTByOgAAIABCB1YhAiAAQgOIIQAgAg0ACwsgAQuIAQIBfgN/AkACQCAAQoCAgIAQWg0AIAAhAgwBCwNAIAFBf2oiASAAIABCCoAiAkIKfn2nQTByOgAAIABC/////58BViEDIAIhACADDQAL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NgIYDAELIAFBAEEZIANBAXZrIANBH0YbdCEDIAQoAgAhBgNAIAYiBCgCBEF4cSABRg0CIANBHXYhBiADQQF0IQMgBCAGQQRxakEQaiICKAIAIgYNAAsgAiAANgIAIAAgBDYCGAsgACAANgIMIAAgADYCCA8LIAQoAggiASAANgIMIAQgADYCCCAAQQA2AhggACAENgIMIAAgATYCCAsLBwA/AEEQdAtUAQJ/QQAoArSqASIBIABBB2pBeHEiAmohAAJAAkAgAkUNACAAIAFNDQELAkAgABCrAk0NACAAEApFDQELQQAgADYCtKoBIAEPCxDuAUEwNgIAQX8LUwEBfgJAAkAgA0HAAHFFDQAgASADQUBqrYYhAkIAIQEMAQsgA0UNACABQcAAIANrrYggAiADrSIEhoQhAiABIASGIQELIAAgATcDACAAIAI3AwgLUwEBfgJAAkAgA0HAAHFFDQAgAiADQUBqrYghAUIAIQIMAQsgA0UNACACQcAAIANrrYYgASADrSIEiIQhASACIASIIQILIAAgATcDACAAIAI3AwgL5AMCAn8CfiMAQSBrIgIkAAJAAkAgAUL///////////8AgyIEQoCAgICAgMD/Q3wgBEKAgICAgIDAgLx/fFoNACAAQjyIIAFCBIaEIQQCQCAAQv//////////D4MiAEKBgICAgICAgAhUDQAgBEKBgICAgICAgMAAfCEFDAILIARCgICAgICAgIDAAHwhBSAAQoCAgICAgICACFINASAFIARCAYN8IQUMAQsCQCAAUCAEQoCAgICAgMD//wBUIARCgICAgICAwP//AFEbDQAgAEI8iCABQgSGhEL/////////A4NCgICAgICAgPz/AIQhBQwBC0KAgICAgICA+P8AIQUgBEL///////+//8MAVg0AQgAhBSAEQjCIpyIDQZH3AEkNACACQRBqIAAgAUL///////8/g0KAgICAgIDAAIQiBCADQf+If2oQrQIgAiAAIARBgfgAIANrEK4CIAIpAwAiBEI8iCACQQhqKQMAQgSGhCEFAkAgBEL//////////w+DIAIpAxAgAkEQakEIaikDAIRCAFKthCIEQoGAgICAgICACFQNACAFQgF8IQUMAQsgBEKAgICAgICAgAhSDQAgBUIBgyAFfCEFCyACQSBqJAAgBSABQoCAgICAgICA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ajYCCCAAIARBDGogBEEIahDrAyAEQRBqJAALCQAgACABEO8DCwkAIAAgARDwAwsMACAAIAEgAhDuAxoLOAEBfyMAQRBrIgMkACADIAEQ8QM2AgwgAyACEPEDNgIIIAAgA0EMaiADQQhqEPIDGiADQRBqJAALBwAgABC5AwsYACAAIAEoAgA2AgAgACACKAIANgIEIAALCQAgACABEPUDCw0AIAAgASAAELkDa2oLBwAgABDzAwsYACAAIAEoAgA2AgAgACACKAIANgIEIAALBwAgABD0AwsEACAACwkAIAAgARD2AwsNACAAIAEgABD0A2tqCysBAX8jAEEQayIDJAAgA0EIaiAAIAEgAhD4AyADKAIMIQIgA0EQaiQAIAILZAEBfyMAQSBrIgQkACAEQRhqIAEgAhD5AyAEQRBqIAQoAhggBCgCHCADEPoDEPsDIAQgASAEKAIQEPwDNgIMIAQgAyAEKAIUEP0DNgIIIAAgBEEMaiAEQQhqEP4DIARBIGokAAsLACAAIAEgAhD/AwsHACAAEIAEC1IBAn8jAEEQayIEJAAgAiABayEFAkAgAiABRg0AIAMgASAFEOgBGgsgBCABIAVqNgIMIAQgAyAFajYCCCAAIARBDGogBEEIahD+AyAEQRBqJAALCQAgACABEIIECwkAIAAgARCDBAsMACAAIAEgAhCBBBoLOAEBfyMAQRBrIgMkACADIAEQhAQ2AgwgAyACEIQENgIIIAAgA0EMaiADQQhqEIUEGiADQRBqJAALBwAgABCIBAsYACAAIAEoAgA2AgAgACACKAIANgIEIAALCQAgACABEIkECw0AIAAgASAAEIgEa2oLBwAgABCGBAsYACAAIAEoAgA2AgAgACACKAIANgIEIAALBwAgABCHBAsEACAACwQAIAALCQAgACABEIoECw0AIAAgASAAEIcEa2oLBAAgAAsHACAAEI4ECxgAIAAQvgMiAEIANwIAIABBCGpBADYCAAsHACAAEI8ECwQAIAALBAAgAAsKACAAEL4DKAIACwoAIAAQvgMQkwQLBAAgAAsEACAACwsAIAAgASACEJkECwkAIAAgARCbBAstAQF/IAAQvgMiAiACLQALQYABcSABcjoACyAAEL4DIgAgAC0AC0H/AHE6AAsLDAAgACABLQAAOgAACwsAIAEgAkEBEJwECwcAIAAQogQLDgAgARC/AxogABC/AxoLHgACQCACEJ0ERQ0AIAAgASACEJ4EDwsgACABEJ8ECwcAIABBCEsLCQAgACACEKAECwcAIAAQoQQLCQAgACABELQNCwcAIAAQsA0LBAAgAAsHACAAEKQECwQAIAALBAAgAAsJACAAIAEQrwQLGQAgABDEAxCwBCIAIAAQsQRBAXZLdkFwagsHACAAQQtJCy0BAX9BCiEBAkAgAEELSQ0AIABBAWoQswQiACAAQX9qIgAgAEELRhshAQsgAQsZACABIAIQsgQhASAAIAI2AgQgACABNgIACwIACwwAIAAQvgMgATYCAAs6AQF/IAAQvgMiAiACKAIIQYCAgIB4cSABQf////8HcXI2AgggABC+AyIAIAAoAghBgICAgHhyNgIICwwAIAAQvgMgATYCBAsHACABIABrCwUAELEECwUAELQECxkAAkAgABCwBCABTw0AEE8ACyABQQEQtQQLCgAgAEEPakFwcQsEAEF/CxoAAkAgARCdBEUNACAAIAEQtgQPCyAAELcECwkAIAAgARCyDQsHACAAEK4NCxgAAkAgABC8A0UNACAAELoEDwsgABC7BAsNACABKAIAIAIoAgBJCwoAIAAQywMoAgALCgAgABDLAxC8BAsEACAACw0AIAEoAgAgAigCAEkLMQEBfwJAIAAoAgAiAUUNAAJAIAEQ9wIQ4gIQ+gINACAAKAIARQ8LIABBADYCAAtBAQsIAEGAgICAeAsIAEH/////BwsRACAAIAEgACgCACgCHBEBAAsxAQF/AkAgACgCACIBRQ0AAkAgARChAxCZAxCjAw0AIAAoAgBFDwsgAEEANgIAC0EBCxEAIAAgASAAKAIAKAIsEQEACxwBAX8gACgCACECIAAgASgCADYCACABIAI2AgALMwEBfyMAQRBrIgIkACAAIAJBCGogAhC1AyIAIAEgARDGBBDFDSAAELYDIAJBEGokACAACwcAIAAQ/wELQAECfyAAKAIoIQIDQAJAIAINAA8LIAEgACAAKAIkIAJBf2oiAkECdCIDaigCACAAKAIgIANqKAIAEQUADAALAAsNACAAIAFBHGoQ9AkaCwkAIAAgARDLBAsnACAAIAAoAhhFIAFyIgE2AhACQCAAKAIUIAFxRQ0AQcULEM4EAAsLKQECfyMAQRBrIgIkACACQQhqIAAgARC5BCEDIAJBEGokACABIAAgAxsLQAAgAEHgyABBCGo2AgAgAEEAEMcEIABBHGoQ9QkaIAAoAiAQpQIgACgCJBClAiAAKAIwEKUCIAAoAjwQpQIgAAsNACAAEMwEGiAAELANCwUAEAsAC0EAIABBADYCFCAAIAE2AhggAEEANgIMIABCgqCAgOAANwIEIAAgAUU2AhAgAEEgakEAQSgQ6QEaIABBHGoQ8wkaCw4AIAAgASgCADYCACAACwQAIAALQQECfyMAQRBrIgEkAEF/IQICQCAAEM4CDQAgACABQQ9qQQEgACgCIBEEAEEBRw0AIAEtAA8hAgsgAUEQaiQAIAILRwECfyAAIAE3A3AgACAAKAIsIAAoAgQiAmusNwN4IAAoAgghAwJAIAFQDQAgAyACa6wgAVcNACACIAGnaiEDCyAAIAM2AmgL3QECA38CfiAAKQN4IAAoAgQiASAAKAIsIgJrrHwhBAJAAkACQCAAKQNwIgVQDQAgBCAFWQ0BCyAAENIEIgJBf0oNASAAKAIEIQEgACgCLCECCyAAQn83A3AgACABNgJoIAAgBCACIAFrrHw3A3hBfw8LIARCAXwhBCAAKAIEIQEgACgCCCEDAkAgACkDcCIFQgBRDQAgBSAEfSIFIAMgAWusWQ0AIAEgBadqIQMLIAAgAzYCaCAAIAQgACgCLCIDIAFrrHw3A3gCQCABIANLDQAgAUF/aiACOgAACyACC+EBAgN/An4jAEEQayICJAACQAJAIAG8IgNB/////wdxIgRBgICAfGpB////9wdLDQAgBK1CGYZCgICAgICAgMA/fCEFQgAhBgwBCwJAIARBgICA/AdJDQAgA61CGYZCgICAgICAwP//AIQhBUIAIQYMAQsCQCAEDQBCACEGQgAhBQwBCyACIAStQgAgBGciBEHRAGoQrQIgAkEIaikDAEKAgICAgIDAAIVBif8AIARrrUIwhoQhBSACKQMAIQYLIAAgBjcDACAAIAUgA0GAgICAeHGtQiCGhDcDCCACQRBqJAALjQECAn8CfiMAQRBrIgIkAAJAAkAgAQ0AQgAhBEIAIQUMAQsgAiABIAFBH3UiA3MgA2siA61CACADZyIDQdEAahCtAiACQQhqKQMAQoCAgICAgMAAhUGegAEgA2utQjCGfCABQYCAgIB4ca1CIIaEIQUgAikDACEECyAAIAQ3AwAgACAFNwMIIAJBEGokAAucCwIFfw9+IwBB4ABrIgUkACAEQv///////z+DIQogBCAChUKAgICAgICAgIB/gyELIAJC////////P4MiDEIgiCENIARCMIinQf//AXEhBgJAAkACQCACQjCIp0H//wFxIgdBgYB+akGCgH5JDQBBACEIIAZBgYB+akGBgH5LDQELAkAgAVAgAkL///////////8AgyIOQoCAgICAgMD//wBUIA5CgICAgICAwP//AFEbDQAgAkKAgICAgIAghCELDAILAkAgA1AgBEL///////////8AgyICQoCAgICAgMD//wBUIAJCgICAgICAwP//AFEbDQAgBEKAgICAgIAghCELIAMhAQwCCwJAIAEgDkKAgICAgIDA//8AhYRCAFINAAJAIAMgAoRQRQ0AQoCAgICAgOD//wAhC0IAIQEMAwsgC0KAgICAgIDA//8AhCELQgAhAQwCCwJAIAMgAkKAgICAgIDA//8AhYRCAFINACABIA6EIQJCACEBAkAgAlBFDQBCgICAgICA4P//ACELDAMLIAtCgICAgICAwP//AIQhCwwCCwJAIAEgDoRCAFINAEIAIQEMAgsCQCADIAKEQgBSDQBCACEBDAILQQAhCAJAIA5C////////P1YNACAFQdAAaiABIAwgASAMIAxQIggbeSAIQQZ0rXynIghBcWoQrQJBECAIayEIIAVB2ABqKQMAIgxCIIghDSAFKQNQIQELIAJC////////P1YNACAFQcAAaiADIAogAyAKIApQIgkbeSAJQQZ0rXynIglBcWoQrQIgCCAJa0EQaiEIIAVByABqKQMAIQogBSkDQCEDCyADQg+GIg5CgID+/w+DIgIgAUIgiCIEfiIPIA5CIIgiDiABQv////8PgyIBfnwiEEIghiIRIAIgAX58IhIgEVStIAIgDEL/////D4MiDH4iEyAOIAR+fCIRIANCMYggCkIPhiIUhEL/////D4MiAyABfnwiCiAQQiCIIBAgD1StQiCGhHwiDyACIA1CgIAEhCIQfiIVIA4gDH58Ig0gFEIgiEKAgICACIQiAiABfnwiFCADIAR+fCIWQiCGfCIXfCEBIAcgBmogCGpBgYB/aiEGAkACQCACIAR+IhggDiAQfnwiBCAYVK0gBCADIAx+fCIOIARUrXwgAiAQfnwgDiARIBNUrSAKIBFUrXx8IgQgDlStfCADIBB+IgMgAiAMfnwiAiADVK1CIIYgAkIgiIR8IAQgAkIghnwiAiAEVK18IAIgFkIgiCANIBVUrSAUIA1UrXwgFiAUVK18QiCGhHwiBCACVK18IAQgDyAKVK0gFyAPVK18fCICIARUrXwiBEKAgICAgIDAAINQDQAgBkEBaiEGDAELIBJCP4ghAyAEQgGGIAJCP4iEIQQgAkIBhiABQj+IhCECIBJCAYYhEiADIAFCAYaEIQELAkAgBkH//wFIDQAgC0KAgICAgIDA//8AhCELQgAhAQwBCwJAAkAgBkEASg0AAkBBASAGayIHQf8ASw0AIAVBMGogEiABIAZB/wBqIgYQrQIgBUEgaiACIAQgBhCtAiAFQRBqIBIgASAHEK4CIAUgAiAEIAcQrgIgBSkDICAFKQMQhCAFKQMwIAVBMGpBCGopAwCEQgBSrYQhEiAFQSBqQQhqKQMAIAVBEGpBCGopAwCEIQEgBUEIaikDACEEIAUpAwAhAgwCC0IAIQEMAgsgBq1CMIYgBEL///////8/g4QhBAsgBCALhCELAkAgElAgAUJ/VSABQoCAgICAgICAgH9RGw0AIAsgAkIBfCIBIAJUrXwhCwwBCwJAIBIgAUKAgICAgICAgIB/hYRCAFENACACIQEMAQsgCyACIAJCAYN8IgEgAlStfCELCyAAIAE3AwAgACALNwMIIAVB4ABqJAALBABBAAsEAEEAC+gKAgR/BH4jAEHwAGsiBSQAIARC////////////AIMhCQJAAkACQCABUCIGIAJC////////////AIMiCkKAgICAgIDAgIB/fEKAgICAgIDAgIB/VCAKUBsNACADQgBSIAlCgICAgICAwICAf3wiC0KAgICAgIDAgIB/ViALQoCAgICAgMCAgH9RGw0BCwJAIAYgCkKAgICAgIDA//8AVCAKQoCAgICAgMD//wBRGw0AIAJCgICAgICAIIQhBCABIQMMAgsCQCADUCAJQoCAgICAgMD//wBUIAlCgICAgICAwP//AFEbDQAgBEKAgICAgIAghCEEDAILAkAgASAKQoCAgICAgMD//wCFhEIAUg0AQoCAgICAgOD//wAgAiADIAGFIAQgAoVCgICAgICAgICAf4WEUCIGGyEEQgAgASAGGyEDDAILIAMgCUKAgICAgIDA//8AhYRQDQECQCABIAqEQgBSDQAgAyAJhEIAUg0CIAMgAYMhAyAEIAKDIQQMAgsgAyAJhFBFDQAgASEDIAIhBAwBCyADIAEgAyABViAJIApWIAkgClEbIgcbIQkgBCACIAcbIgtC////////P4MhCiACIAQgBxsiAkIwiKdB//8BcSEIAkAgC0IwiKdB//8BcSIGDQAgBUHgAGogCSAKIAkgCiAKUCIGG3kgBkEGdK18pyIGQXFqEK0CQRAgBmshBiAFQegAaikDACEKIAUpA2AhCQsgASADIAcbIQMgAkL///////8/gyEEAkAgCA0AIAVB0ABqIAMgBCADIAQgBFAiBxt5IAdBBnStfKciB0FxahCtAkEQIAdrIQggBUHYAGopAwAhBCAFKQNQIQMLIARCA4YgA0I9iIRCgICAgICAgASEIQEgCkIDhiAJQj2IhCEEIANCA4YhCiALIAKFIQMCQCAGIAhGDQACQCAGIAhrIgdB/wBNDQBCACEBQgEhCgwBCyAFQcAAaiAKIAFBgAEgB2sQrQIgBUEwaiAKIAEgBxCuAiAFKQMwIAUpA0AgBUHAAGpBCGopAwCEQgBSrYQhCiAFQTBqQQhqKQMAIQELIARCgICAgICAgASEIQwgCUIDhiEJAkACQCADQn9VDQBCACEDQgAhBCAJIAqFIAwgAYWEUA0CIAkgCn0hAiAMIAF9IAkgClStfSIEQv////////8DVg0BIAVBIGogAiAEIAIgBCAEUCIHG3kgB0EGdK18p0F0aiIHEK0CIAYgB2shBiAFQShqKQMAIQQgBSkDICECDAELIAEgDHwgCiAJfCICIApUrXwiBEKAgICAgICACINQDQAgAkIBiCAEQj+GhCAKQgGDhCECIAZBAWohBiAEQgGIIQQLIAtCgICAgICAgICAf4MhCgJAIAZB//8BSA0AIApCgICAgICAwP//AIQhBEIAIQMMAQtBACEHAkACQCAGQQBMDQAgBiEHDAELIAVBEGogAiAEIAZB/wBqEK0CIAUgAiAEQQEgBmsQrgIgBSkDACAFKQMQIAVBEGpBCGopAwCEQgBSrYQhAiAFQQhqKQMAIQQLIAJCA4ggBEI9hoQhAyAHrUIwhiAEQgOIQv///////z+DhCAKhCEEIAKnQQdxIQYCQAJAAkACQAJAENgEDgMAAQIDCyAEIAMgBkEES618IgogA1StfCEEAkAgBkEERg0AIAohAwwDCyAEIApCAYMiASAKfCIDIAFUrXwhBAwDCyAEIAMgCkIAUiAGQQBHca18IgogA1StfCEEIAohAwwBCyAEIAMgClAgBkEAR3GtfCIKIANUrXwhBCAKIQMLIAZFDQELENkEGgsgACADNwMAIAAgBDcDCCAFQfAAaiQAC44CAgJ/A34jAEEQayICJAACQAJAIAG9IgRC////////////AIMiBUKAgICAgICAeHxC/////////+//AFYNACAFQjyGIQYgBUIEiEKAgICAgICAgDx8IQUMAQsCQCAFQoCAgICAgID4/wBUDQAgBEI8hiEGIARCBIhCgICAgICAwP//AIQhBQwBCwJAIAVQRQ0AQgAhBkIAIQUMAQsgAiAFQgAgBKdnQSBqIAVCIIinZyAFQoCAgIAQVBsiA0ExahCtAiACQQhqKQMAQoCAgICAgMAAhUGM+AAgA2utQjCGhCEFIAIpAwAhBgsgACAGNwMAIAAgBSAEQoCAgICAgICAgH+DhDcDCCACQRBqJAAL4AECAX8CfkEBIQQCQCAAQgBSIAFC////////////AIMiBUKAgICAgIDA//8AViAFQoCAgICAgMD//wBRGw0AIAJCAFIgA0L///////////8AgyIGQoCAgICAgMD//wBWIAZCgICAgICAwP//AFEbDQACQCACIACEIAYgBYSEUEUNAEEADwsCQCADIAGDQgBTDQBBfyEEIAAgAlQgASADUyABIANRGw0BIAAgAoUgASADhYRCAFIPC0F/IQQgACACViABIANVIAEgA1EbDQAgACAChSABIAOFhEIAUiEECyAEC9gBAgF/An5BfyEEAkAgAEIAUiABQv///////////wCDIgVCgICAgICAwP//AFYgBUKAgICAgIDA//8AURsNACACQgBSIANC////////////AIMiBkKAgICAgIDA//8AViAGQoCAgICAgMD//wBRGw0AAkAgAiAAhCAGIAWEhFBFDQBBAA8LAkAgAyABg0IAUw0AIAAgAlQgASADUyABIANRGw0BIAAgAoUgASADhYRCAFIPCyAAIAJWIAEgA1UgASADURsNACAAIAKFIAEgA4WEQgBSIQQLIAQLrgEAAkACQCABQYAISA0AIABEAAAAAAAA4H+iIQACQCABQf8PTw0AIAFBgXhqIQEMAgsgAEQAAAAAAADgf6IhACABQf0XIAFB/RdIG0GCcGohAQwBCyABQYF4Sg0AIABEAAAAAAAAYAOiIQACQCABQbhwTQ0AIAFByQdqIQEMAQsgAEQAAAAAAABgA6IhACABQfBoIAFB8GhKG0GSD2ohAQsgACABQf8Haq1CNIa/ogs1ACAAIAE3AwAgACAEQjCIp0GAgAJxIAJCMIinQf//AXFyrUIwhiACQv///////z+DhDcDCAtyAgF/An4jAEEQayICJAACQAJAIAENAEIAIQNCACEEDAELIAIgAa1CACABZyIBQdEAahCtAiACQQhqKQMAQoCAgICAgMAAhUGegAEgAWutQjCGfCEEIAIpAwAhAwsgACADNwMAIAAgBDcDCCACQRBqJAALSAEBfyMAQRBrIgUkACAFIAEgAiADIARCgICAgICAgICAf4UQ2gQgBSkDACEEIAAgBUEIaikDADcDCCAAIAQ3AwAgBUEQaiQAC+cCAQF/IwBB0ABrIgQkAAJAAkAgA0GAgAFIDQAgBEEgaiABIAJCAEKAgICAgICA//8AENcEIARBIGpBCGopAwAhAiAEKQMgIQECQCADQf//AU8NACADQYGAf2ohAwwCCyAEQRBqIAEgAkIAQoCAgICAgID//wAQ1wQgA0H9/wIgA0H9/wJIG0GCgH5qIQMgBEEQakEIaikDACECIAQpAxAhAQwBCyADQYGAf0oNACAEQcAAaiABIAJCAEKAgICAgICAORDXBCAEQcAAakEIaikDACECIAQpA0AhAQJAIANB9IB+TQ0AIANBjf8AaiEDDAELIARBMGogASACQgBCgICAgICAgDkQ1wQgA0HogX0gA0HogX1KG0Ga/gFqIQMgBEEwakEIaikDACECIAQpAzAhAQsgBCABIAJCACADQf//AGqtQjCGENcEIAAgBEEIaikDADcDCCAAIAQpAwA3AwAgBEHQAGokAAt1AQF+IAAgBCABfiACIAN+fCADQiCIIgIgAUIgiCIEfnwgA0L/////D4MiAyABQv////8PgyIBfiIFQiCIIAMgBH58IgNCIIh8IANC/////w+DIAIgAX58IgFCIIh8NwMIIAAgAUIghiAFQv////8Pg4Q3AwAL5xACBX8PfiMAQdACayIFJAAgBEL///////8/gyEK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QfAAahCtAiAFQSBqIAMgDiAFKQNAIgIgBUHAAGpBCGopAwAiDxDjBCAFQTBqQQhqKQMAIAVBIGpBCGopAwBCAYYgBSkDICIBQj+IhH0gBSkDMCIEIAFCAYYiAVStfSENIAQgAX0hBAsgBUEQaiADIA5CA0IAEOMEIAUgAyAOQgVCABDjBCAPIAIgAkIBgyIBIAR8IgQgA1YgDSAEIAFUrXwiASAOViABIA5RG618IgMgAlStfCICIAMgAkKAgICAgIDA//8AVCAEIAUpAxBWIAEgBUEQakEIaikDACICViABIAJRG3GtfCICIANUrXwiAyACIANCgICAgICAwP//AFQgBCAFKQMAViABIAVBCGopAwAiBFYgASAEURtxrXwiASACVK18IAyEIQwLIAAgATcDACAAIAw3AwggBUHQAmokAAtLAgF+An8gAUL///////8/gyECAkACQCABQjCIp0H//wFxIgNB//8BRg0AQQQhBCADDQFBAkEDIAIgAIRQGw8LIAIgAIRQIQQLIAQL1QYCBH8DfiMAQYABayIFJAACQAJAAkAgAyAEQgBCABDcBEUNACADIAQQ5QQhBiACQjCIpyIHQf//AXEiCEH//wFGDQAgBg0BCyAFQRBqIAEgAiADIAQQ1wQgBSAFKQMQIgQgBUEQakEIaikDACIDIAQgAxDkBCAFQQhqKQMAIQIgBSkDACEEDAELAkAgASACQv///////////wCDIgkgAyAEQv///////////wCDIgoQ3ARBAEoNAAJAIAEgCSADIAoQ3ARFDQAgASEEDAILIAVB8ABqIAEgAkIAQgAQ1wQgBUH4AGopAwAhAiAFKQNwIQQMAQsgBEIwiKdB//8BcSEGAkACQCAIRQ0AIAEhBAwBCyAFQeAAaiABIAlCAEKAgICAgIDAu8AAENcEIAVB6ABqKQMAIglCMIinQYh/aiEIIAUpA2AhBAsCQCAGDQAgBUHQAGogAyAKQgBCgICAgICAwLvAABDXBCAFQdgAaikDACIKQjCIp0GIf2ohBiAFKQNQIQMLIApC////////P4NCgICAgICAwACEIQsgCUL///////8/g0KAgICAgIDAAIQhCQJAIAggBkwNAANAAkACQCAJIAt9IAQgA1StfSIKQgBTDQACQCAKIAQgA30iBIRCAFINACAFQSBqIAEgAkIAQgAQ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AQJAA0AgAiAETw0BIAItAAAgAUcNASACQQFqIQIMAAsACyAGIAIgAxDkBxoLAkAgB0GYAWogB0GQAWoQ7QJFDQAgBSAFKAIAQQJyNgIACyAHKAKYASECIAdBEGoQ9QkaIAgQqQYaIAdBoAFqJAAgAgtnAQJ/IwBBEGsiASQAIAAQvQMCQAJAIAAQvANFDQAgABCRBCECIAFBADoADyACIAFBD2oQmAQgAEEAEK4EDAELIAAQkgQhAiABQQA6AA4gAiABQQ5qEJgEIABBABCXBAsgAUEQaiQAC9MBAQR/IwBBEGsiAyQAIAAQxwMhBCAAEMgDIQUCQCABIAIQpgQiBkUNAAJAIAAgARDlBw0AAkAgBSAEayAGTw0AIAAgBSAGIARqIAVrIAQgBEEAQQAQwg0LIAAQuAMgBGohBQJAA0AgASACRg0BIAUgARCYBCABQQFqIQEgBUEBaiEFDAALAAsgA0EAOgAPIAUgA0EPahCYBCAAIAYgBGoQ5gcMAQsgACADIAEgAiAAEL8DEMIDIgEQzAMgARDHAxDKDRogARDADRoLIANBEGokACAACycBAX9BACECAkAgABDMAyABSw0AIAAQzAMgABDHA2ogAU8hAgsgAgscAAJAIAAQvANFDQAgACABEK4EDwsgACABEJcECxYAIAAgARCZDSIBQQRqIAIQ0AQaIAELBwAgABCdDQsLACAAQZTAARCtBQsRACAAIAEgASgCACgCLBECAAsRACAAIAEgASgCACgCIBECAAsRACAAIAEgASgCACgCHBECAAsPACAAIAAoAgAoAgwRAAALDwAgACAAKAIAKAIQEQAACxEAIAAgASABKAIAKAIUEQIACxEAIAAgASABKAIAKAIYEQIACw8AIAAgACgCACgCJBEAAAsLACAAQYzAARCtBQsRACAAIAEgASgCACgCLBECAAsRACAAIAEgASgCACgCIBECAAsRACAAIAEgASgCACgCHBECAAsPACAAIAAoAgAoAgwRAAALDwAgACAAKAIAKAIQEQAACxEAIAAgASABKAIAKAIUEQIACxEAIAAgASABKAIAKAIYEQIACw8AIAAgACgCACgCJBEAAAsSACAAIAI2AgQgACABOgAAIAALBwAgACgCAAsNACAAEP4HIAEQ/AdGCwcAIAAoAgALcwEBfyMAQSBrIgMkACADIAE2AhAg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EJ4NIgFBBGogAhDQBBogAQuyAgEBfyMAQRBrIgokAAJAAkAgAEUNACAKIAEQqggiARCrCCACIAooAgA2AAAgCiABEKwIIAggChCtCBogChDdDRogCiABEK4IIAcgChCtCBogChDdDRogAyABEK8INgIAIAQgARCwCDYCACAKIAEQsQggBSAKELEDGiAKEMANGiAKIAEQsgggBiAKEK0IGiAKEN0NGiABELMIIQEMAQsgCiABELQIIgEQtQggAiAKKAIANgAAIAogARC2CCAIIAoQrQgaIAoQ3Q0aIAogARC3CCAHIAoQrQgaIAoQ3Q0aIAMgARC4CDYCACAEIAEQuQg2AgAgCiABELoIIAUgChCxAxogChDADRogCiABELsIIAYgChCtCBogChDdDRogARC8CCEBCyAJIAE2AgAgCkEQaiQACxUAIAAgASgCABCiAyABKAIAEL0IGgsHACAAKAIACw0AIAAQtgYgAUECdGoLDgAgACABEL4INgIAIAALDAAgACABEL8IQQFzCwcAIAAoAgALEQAgACAAKAIAQQRqNgIAIAALEAAgABDACCABEL4Ia0ECdQsMACAAQQAgAWsQwggLCwAgACABIAIQwQgL5AEBBn8jAEEQayIDJAAgABDDCCgCACEEAkACQCACKAIAIAAQiwhrIgUQsQRBAXZPDQAgBUEBdCEFDAELELEEIQULIAVBBCAFGyEFIAEoAgAhBiAAEIsIIQcCQAJAIARB9gBHDQBBACEIDAELIAAQiwghCAsCQCAIIAUQpgIiCEUNAAJAIARB9gBGDQAgABDECBoLIANB9QA2AgQgACADQQhqIAggA0EEahDFBiIEEMUIGiAEEMgGGiABIAAQiwggBiAHa2o2AgAgAiAAEIsIIAVBfHFqNgIAIANBEGokAA8LEK0NAAsHACAAEJ8NC64CAQJ/IwBBwANrIgckACAHIAI2ArADIAcgATYCuAMgB0H2ADYCFCAHQRhqIAdBIGogB0EUahDFBiEIIAdBEGogBBDIBCAHQRBqEJsDIQEgB0EAOgAPAkAgB0G4A2ogAiADIAdBEGogBBDrAiAFIAdBD2ogASAIIAdBFGogB0GwA2oQighFDQAgBhCcCAJAIActAA9FDQAgBiABQS0QwwQQ6A0LIAFBMBDDBCEBIAgQiwghAiAHKAIUIgNBfGohBAJAA0Ag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ACAAIAFBxMABELkJELoJCwwAQfjMAUEBEM8JGgsQACAAIAFB7L8BELkJELoJCwwAQYjNAUEBENAJGgsQACAAIAFB9L8BELkJELoJCwwAQZjNAUEBENEJGgsQACAAIAFB/L8BELkJELoJCwwAQajNAUEBENIJGgsQACAAIAFBhMABELkJELoJCwwAQbjNAUEBENMJGgsQACAAIAFBzMABELkJELoJCwwAQcDNAUEBENQJGgsQACAAIAFB1MABELkJELoJCxcAIAAgATYCBCAAQfCcAUEIajYCACAACxQAIAAgARCXDCIBQQhqEJgMGiABCwIAC2cBAn8jAEEQayICJAACQCAAEJkMIAFPDQAgABCaDAALIAJBCGogABDnCSABEJsMIAAgAigCCCIBNgIEIAAgATYCACACKAIMIQMgABCcDCABIANBAnRqNgIAIABBABCdDCACQRBqJAALWwEDfyMAQRBrIgIkACACIAAgARCeDCIDKAIEIQEgAygCCCEEA0ACQCABIARHDQAgAxCfDBogAkEQaiQADwsgABDnCSABEKAMEKEMIAMgAUEEaiIBNgIEDAALAAsQACAAKAIEIAAoAgBrQQJ1CwwAIAAgACgCABC3DAszACAAIAAQqAwgABCoDCAAEOgJQQJ0aiAAEKgMIAFBAnRqIAAQqAwgABC1CUECdGoQqQwLAgALSgEBfyMAQSBrIgEkACABQQA2AgwgAUH3ADYCCCABIAEpAwg3AwAgACABQRBqIAEgABD3CRD4CSAAKAIEIQAgAUEgaiQAIABBf2oLeAECfyMAQRBrIgMkACABENcJIANBCGogARDbCSEEAkAgAEEIaiIBELUJIAJLDQAgASACQQFqEN4JCwJAIAEgAhDWCSgCAEUNACABIAIQ1gkoAgAQ3wkaCyAEEOAJIQAgASACENYJIAA2AgAgBBDcCRogA0EQaiQACxcAIAAgARDxCCIBQZz9AEEIajYCACABCxcAIAAgARDxCCIBQbz9AEEIajYCACABCxoAIAAgARDxCBCRCiIBQYD1AEEIajYCACABCxoAIAAgARDxCBClCiIBQZT2AEEIajYCACABCxoAIAAgARDxCBClCiIBQaj3AEEIajYCACABCxoAIAAgARDxCBClCiIBQZD5AEEIajYCACABCxoAIAAgARDxCBClCiIBQZz4AEEIajYC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gICAgHhxIAFB/////wdxcjYCCCAAEMgHIgAgACgCCEGAgICAeHI2AggLCABB1g0QGgALBwAgABC8CwsEACAACwoAIAEgAGtBAnULCAAQsQRBAnYLBAAgAAscAAJAIAAQvgsgAU8NABBPAAsgAUECdEEEELUECwcAIAAQxgsLCgAgAEEDakF8cQsHACAAEMQLCwQAIAALBAAgAAsEACAACxIAIAAgABC4AxC5AyABEMgLGgs4AQF/IwBBEGsiAyQAIAAgAhDmByAAIAIQygsgA0EAOgAPIAEgAmogA0EPahCYBCADQRBqJAAgAAsEACAACwIACwsAIAAgASACEMwLCw4AIAEgAkECdEEEEJwECxEAIAAQxwcoAghB/////wdxCwQAIAALYQEBfyMAQRBrIgIkACACIAA2AgwCQCAAIAFGDQADQCACIAFBf2oiATYCCCAAIAFPDQEgAkEMaiACQQhqENALIAIgAigCDEEBaiIANgIMIAIoAgghAQwACwALIAJBEGokAAsPACAAKAIAIAEoAgAQ0QsLCQAgACABEIwHC2EBAX8jAEEQayICJAAgAiAANgIMAkAgACABRg0AA0AgAiABQXxqIgE2AgggACABTw0BIAJBDGogAkEIahDTCyACIAIoAgxBBGoiADYCDCACKAIIIQEMAAsACyACQRBqJAALDwAgACgCACABKAIAENQLCwkAIAAgARDVCwscAQF/IAAoAgAhAiAAIAEoAgA2AgAgASACNgIACwoAIAAQxwcQ1wsLBAAgAAsLACAAIAEgAhDeCwsHACAAEOALC2wBAX8jAEEQayIEJAAgBCABNgIEIAQgAzYCCAJAA0AgASACRg0BIAEsAAAhAyAEQQhqEJQDIAMQlQMaIAQgAUEBaiIBNgIEIARBCGoQlgMaDAALAAsgACAEQQRqIARBCGoQ3wsaIARBEGokAAsJACAAIAEQ4QsLCQAgACABEOILCwwAIAAgASACEN8LGgs4AQF/IwBBEGsiAyQAIAMgARDnAzYCDCADIAIQ5wM2AgggACADQQxqIANBCGoQ4wsaIANBEGokAAsYACAAIAEoAgA2AgAgACACKAIANgIEIAALBAAgAAsJACAAIAEQ6gMLBAAgAQsYACAAIAEoAgA2AgAgACACKAIANgIEIAALCwAgACABIAIQ6gsLBwAgABDsCwtsAQF/IwBBEGsiBCQAIAQgATYCBCAEIAM2AggCQANAIAEgAkYNASABKAIAIQMgBEEIahClAyADEKYDGiAEIAFBBGoiATYCBCAEQQhqEKcDGgwACwALIAAgBEEEaiAEQQhqEOsLGiAEQRBqJAALCQAgACABEO0LCwkAIAAgARDuCwsMACAAIAEgAhDrCxoLOAEBfyMAQRBrIgMkACADIAEQ+gM2AgwgAyACEPoDNgIIIAAgA0EMaiADQQhqEO8LGiADQRBqJAALGAAgACABKAIANgIAIAAgAigCADYCBCAACwQAIAALCQAgACABEP0DCwQAIAELGAAgACABKAIANgIAIAAgAigCADYCBCAACxgAIAAQyAciAEIANwIAIABBCGpBADYCAAsEACAACwQAIAALDQAgAS0AACACLQAARgsRACAAIAAoAgAgAWo2AgAgAAsKACABIABrQQJ1CwwAIAAQsAsgAhD4Cwu/AQEDfyMAQRBrIgMkAAJAIAEgAhClCCIEIAAQswtLDQACQAJAIAQQtAtFDQAgACAEEKMIIAAQogghBQwBCyADQQhqIAAQqAggBBC1C0EBahC2CyADKAIIIgUgAygCDBC3CyAAIAUQuAsgACADKAIMELkLIAAgBBChCAsCQANAIAEgAkYNASAFIAEQoAggBUEEaiEFIAFBBGohAQwACwALIANBADYCBCAFIANBBGoQoAggA0EQaiQADwsgABC6CwALBAAgAAsNACABKAIAIAIoAgBGCxQAIAAgACgCACABQQJ0ajYCACAACwkAIAAgARD8CwsOACABEKgIGiAAEKgIGgsLACAAIAEgAhCADAsJACAAIAEQggwLDAAgACABIAIQgQwaCzgBAX8jAEEQayIDJAAgAyABEIMMNgIMIAMgAhCDDDYCCCAAIANBDGogA0EIahDyAxogA0EQaiQACxgAIAAgASgCADYCACAAIAIoAgA2AgQgAAsJACAAIAEQiAwLBwAgABCEDAsnAQF/IwBBEGsiASQAIAEgADYCCCABQQhqEIUMIQAgAUEQaiQAIAALBwAgABCGDAsKACAAKAIAEIcMCyoBAX8jAEEQayIBJAAgASAANgIIIAFBCGoQ/gcQ9AMhACABQRBqJAAgAAsJACAAIAEQiQwLMgEBfyMAQRBrIgIkACACIAA2AgggAkEIaiABIAJBCGoQhQxrEM8IIQAgAkEQaiQAIAALCwAgACABIAIQjQwLCQAgACABEI8MCwwAIAAgASACEI4MGgs4AQF/IwBBEGsiAyQAIAMgARCQDDYCDCADIAIQkAw2AgggACADQQxqIANBCGoQhQQaIANBEGokAAsYACAAIAEoAgA2AgAgACACKAIANgIEIAALCQAgACABEJUMCwcAIAAQkQwLJwEBfyMAQRBrIgEkACABIAA2AgggAUEIahCSDCEAIAFBEGokACAACwcAIAAQkwwLCgAgACgCABCUDAsqAQF/IwBBEGsiASQAIAEgADYCCCABQQhqEMAIEIcEIQAgAUEQaiQAIAALCQAgACABEJYMCzUBAX8jAEEQayICJAAgAiAANgIIIAJBCGogASACQQhqEJIMa0ECdRDeCCEAIAJBEGokACAACwsAIABBADYCACAACwcAIAAQogwLPQEBfyMAQRBrIgEkACABIAAQowwQpAw2AgwgARCAAzYCCCABQQxqIAFBCGoQ2AMoAgAhACABQRBqJAAgAAsIAEHxChAaAAsbACABIAJBABClDCEBIAAgAjYCBCAAIAE2AgALCgAgAEEIahCnDAszACAAIAAQqAwgABCoDCAAEOgJQQJ0aiAAEKgMIAAQ6AlBAnRqIAAQqAwgAUECdGoQqQwLJAAgACABNgIAIAAgASgCBCIBNgIEIAAgASACQQJ0ajYCCCAACxEAIAAoAgAgACgCBDYCBCAACwQAIAALCAAgARC2DBoLCwAgAEEAOgB4IAALCgAgAEEIahCrDAsHACAAEKoMC0YBAX8jAEEQayIDJAACQAJAIAFBHksNACAALQB4Qf8BcQ0AIABBAToAeAwBCyADQQhqEK0MIAEQrgwhAAsgA0EQaiQAIAALCgAgAEEIahCxDAsHACAAELIMCwoAIAAoAgAQoAwLAgALCABB/////wMLCgAgAEEIahCsDAsEACAACwcAIAAQrwwLHAACQCAAELAMIAFPDQAQTwALIAFBAnRBBBC1BAsEACAACwgAELEEQQJ2CwQAIAALBAAgAAsKACAAQQhqELQMCwcAIAAQtQwLBAAgAAsLACAAQQA2AgAgAAs0AQF/IAAoAgQhAgJAA0AgAiABRg0BIAAQ5wkgAkF8aiICEKAMELgMDAALAAsgACABNgIECwcAIAEQuQwLBwAgABC6DAsCAAthAQJ/IwBB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IAAoAgAgAEEIaigCACIBQQF1aiECIAAoAgQhAAJAIAFBAXFFDQAgAigCACAAaigCACEACyACIAARAwALBwAgACgCAAsWACAAIAEQgw0iAUEEaiACENAEGiABCwcAIAAQhA0LCgAgAEEEahDRBAsOACAAIAEoAgA2AgAgAAsEACAACwoAIAEgAGtBDG0LCwAgACABIAIQjQULBQAQiA0LCABBgICAgHgLBQAQiw0LBQAQjA0LDQBCgICAgICAgICAfwsNAEL///////////8ACwsAIAAgASACEIsFCwUAEI8NCwYAQf//AwsFABCRDQsEAEJ/CwwAIAAgARDaBRCUBQsMACAAIAEQ2gUQlQULPQIBfwF+IwBBEGsiAyQAIAMgASACENoFEJYFIAMpAwAhBCAAIANBCGopAwA3AwggACAENwMAIANBEGokAAsKACABIABrQQxtCw4AIAAgASgCADYCACAACwQAIAALBAAgAAsOACAAIAEoAgA2AgAgAAsHACAAEJwNCwoAIABBBGoQ0QQLBAAgAAsEACAACw4AIAAgASgCADYCACAACwQAIAALBAAgAAsEACAACwMAAAswAQF/AkACQCAAQQhqIgFBAhCkDUUNACABEOQJQX9HDQELIAAgACgCACgCEBEDAAsLFwACQCABQX9qDgUAAAAAAAALIAAoAgALBABBAAsHACAAEIQCCwcAIAAQhQILbQBB8M4BEKYNGgJAA0AgACgCAEEBRw0BQYjPAUHwzgEQqQ0aDAALAAsCQCAAKAIADQAgABCqDUHwzgEQpw0aIAEgAhEDAEHwzgEQpg0aIAAQqw1B8M4BEKcNGkGIzwEQrA0aDwtB8M4BEKcNGgsJACAAIAEQhgILCQAgAEEBNgIACwkAIABBfzYCAAsHACAAEIcCCwUAEAsACzMBAX8gAEEBIAAbIQECQANAIAEQpAIiAA0BAkAQpQ4iAEUNACAAEQkADAELCxALAAsgAAsHACAAEK4NCwcAIAAQpQILBwAgABCwDQs8AQJ/IAFBBCABQQRLGyECIABBASAAGyEAAkADQCACIAAQsw0iAw0BEKUOIgFFDQEgAREJAAwACwALIAMLMQEBfyMAQRBrIgIkACACQQA2AgwgAkEMaiAAIAEQqQIaIAIoAgwhASACQRBqJAAgAQsHACAAELUNCwcAIAAQpQILEAAg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B0kNAAsLIAEgBkH/AXFBAEc6ADUgASAIQf8BcUEARzoANAs+AAJAIAAgASgCCCAFELIORQ0AIAEgASACIAMgBBDBDg8LIAAoAggiACABIAIgAyAEIAUgACgCACgCFBEMAAshAAJAIAAgASgCCCAFELIORQ0AIAEgASACIAMgBBDBDgsLHgACQCAADQBBAA8LIABBtKEBQcSiAUEAELYOQQBHCwQAIAALDQAgABDMDhogABCwDQsFAEGfDAsVACAAELYNIgBB6KcBQQhqNgIAIAALDQAgABDMDhogABCwDQsFAEGlEAsVACAAEM8OIgBB/KcBQQhqNgIAIAALDQAgABDMDhogABCwDQsFAEGcDQscACAAQYCpAUEIajYCACAAQQRqENYOGiAAEMwOCysBAX8CQCAAELoNRQ0AIAAoAgAQ1w4iAUEIahDYDkF/Sg0AIAEQsA0LIAALBwAgAEF0agsVAQF/IAAgACgCAEF/aiIBNgIAIAELDQAgABDVDhogABCwDQsKACAAQQRqENsOCwcAIAAoAgALDQAgABDVDhogABCwDQsNACAAENUOGiAAELANCwQAIAALBgAgACQBCwQAIwELBAAjAAsGACAAJAALEgECfyMAIABrQXBxIgEkACABCxEAIAEgAiADIAQgBSAAERQACxEAIAEgAiADIAQgBSAAERMACxMAIAEgAiADIAQgBSAGIAARHgALFQAgASACIAMgBCAFIAYgByAAERkACw0AIAEgAiADIAARGwALGQAgACABIAIgA60gBK1CIIaEIAUgBhDkDgsZACAAIAEgAiADIAQgBa0gBq1CIIaEEOUOCyMAIAAgASACIAMgBCAFrSAGrUIghoQgB60gCK1CIIaEEOYOCyUAIAAgASACIAMgBCAFIAatIAetQiCGhCAIrSAJrUIghoQQ5w4LJQEBfiAAIAEgAq0gA61CIIaEIAQQ6A4hBSAFQiCIpxDfDiAFpwscACAAIAEgAiADpyADQiCIpyAEpyAEQiCIpxARCxMAIAAgAacgAUIgiKcgAiADEBILC9mjgYAAAgBBgAgLsKIBaW5maW5pdHkARmVicnVhcnkASmFudWFyeQBKdWx5AGE9cmVjdm9ubHkAYT1zZW5kb25seQBUaHVyc2RheQBUdWVzZGF5AFdlZG5lc2RheQBTYXR1cmRheQBTdW5kYXkATW9uZGF5AEZyaWRheQBNYXkAJW0vJWQvJXkAYT1ydGNwLW11eAAtKyAgIDBYMHgALTBYKzBYIDBYLTB4KzB4IDB4ACV4OiV4OiV4OiV4OiV4OiV4OiV4OiV4AF9fbmV4dF9wcmltZSBvdmVyZmxvdwBOb3YAYT1zZW5kcmVjdgBUaHUAQXVndXN0AHVuc2lnbmVkIHNob3J0AGFwdABmaW5nZXJwcmludAB1bnNpZ25lZCBpbnQAY3ByZXNlbnQAYWRkciB0eXBlIGNvbmZsaWN0AG9iamVjdABPY3QAZmxvYXQAU2F0AHVpbnQ2NF90AGE9c2V0dXA6YWN0cGFzcwBpY2Utb3B0aW9ucwBBcHIAdmVjdG9yAGZvcm1hdCBlcnJvcgA6IHBhcmFtIGVycm9yAE9jdG9iZXIATm92ZW1iZXIAU2VwdGVtYmVyAERlY2VtYmVyAHVuc2lnbmVkIGNoYXIAaW9zX2Jhc2U6OmNsZWFyAE1hcgBzZXR1cABncm91cABTZXAAZXh0bWFwAHJ0cG1hcAAlSTolTTolUyAlcABhdWRpbwB2aWRlbwB1bmtub3duAFN1bgBKdW4Ac3RkOjpleGNlcHRpb24AOiBubyBjb252ZXJzaW9uAE1vbgBuYW4ASmFuAHN0b3VsAEp1bABzdG9sAGJvb2wAc3RkOjpiYWRfZnVuY3Rpb25fY2FsbABBcHJpbABtc2xhYmVsAGVtc2NyaXB0ZW46OnZhbABGcmkAc3RvaQBiYWRfYXJyYXlfbmV3X2xlbmd0aABNYXJjaABBdWcAdW5zaWduZWQgbG9uZwBzdGQ6OndzdHJpbmcAYmFzaWNfc3RyaW5nAHN0ZDo6c3RyaW5nAHN0ZDo6dTE2c3RyaW5nAHN0ZDo6dTMyc3RyaW5nAGNvbmZpZwBpY2UtdWZyYWcAaW5mACUuMExmACVMZgBhPXJ0Y3AtcnNpemUAYT1pbmFjdGl2ZQBhPXNldHVwOmFjdGl2ZQBhPXNldHVwOnBhc3NpdmUAdHJ1ZQBUdWUAY2FuZGlkYXRlAGZhbHNlAEp1bmUAdW5rbm93biBsaW5lAGNuYW1lAGRvdWJsZQA6IG91dCBvZiByYW5nZQBpY2UtcHdkAHZvaWQAbWlkAGxldmVsLWFzeW1tZXRyeS1hbGxvd2VkAG1lZGlhIHR5cGUgbm90IHN1cHBvcnRlZABQUy1lbmFibGVkAFNCUi1lbmFibGVkAFdlZAAleDoleDoleDoleDoleDoleDolZC4lZC4lZC4lZABzdGQ6OmJhZF9hbGxvYwBEZWMAcnRjcC1mYgBGZWIAd2VicnRjOi8vZG9tYWluL2xpdmUveHh4eF9kNzE5NTZkOWNjOTNlNGE0NjdiMTFlMDZmZGFmMDM5YQBfACVhICViICVkICVIOiVNOiVTICVZAFBPU0lYACVIOiVNOiVTAGE9c3NyYy1ncm91cDpGRUMtRlIAU0RQAE5BTgBQTQBBTQBMQ19BTEwATEFORwBJTkYAYT1ncm91cDpCVU5ETEUAYT1zc3JjLWdyb3VwOkZJRABDAGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PHNob3J0PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzx1bnNpZ25lZCBzaG9ydD4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8aW50PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzx1bnNpZ25lZCBpbnQ+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PGZsb2F0PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzx1aW50OF90PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzxpbnQ4X3Q+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PHVpbnQxNl90PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzxpbnQxNl90PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzx1aW50MzJfdD4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8aW50MzJfdD4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8Y2hhcj4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8dW5zaWduZWQgY2hhcj4Ac3RkOjpiYXNpY19zdHJpbmc8dW5zaWduZWQgY2hhcj4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8c2lnbmVkIGNoYXI+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PGxvbmc+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PHVuc2lnbmVkIGxvbmc+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PGRvdWJsZT4Adj0Acz0Abz0AbT0AaT0AYT0AYT1maW5nZXJwcmludDoAYT1pY2Utb3B0aW9uczoAYT1mbXRwOgBhPXJ0Y3A6AGE9ZXh0bWFwOgBhPXJ0cG1hcDoAYT1pY2UtdWZyYWc6AGE9aWNlLXB3ZDoAYT1taWQ6AGE9c3NyYzoAYT1ydGNwLWZiOgBjPUlOIElQNiA6OgAgSU4gSVA2IDo6ADAxMjM0NTY3ODkAQy5VVEYtOAAgSU4gSVA2IDo6MQAgSU4gSVA0IDEyNy4wLjAuMQA6MAA0ODAwMAAxMjgwMDAAMTYwMDAANjQwMDAAMzIwMDAAYz1JTiBJUDQgMC4wLjAuMAAgSU4gSVA0IDAuMC4wLjAAIGdlbmVyYXRpb24gMAB0PTAgMAAuAChudWxsKQBQdXJlIHZpcnR1YWwgZnVuY3Rpb24gY2FsbGVkIQAgcnBvcnQgAHR5cCBzcmZseCByYWRkciAALCBsaW5lIABhPW1zaWQtc2VtYW50aWM6IFdNUyAAYT1jYW5kaWRhdGU6Zm91bmRhdGlvbiAxIHVkcCAxMDAgACVzCgBNUDRBLUxBVE0ATVA0QS1BRFRTAGZsZXhmZWMtMDMAVlA4AEFWMQByZWQAcnR4AHVscGZlYwAAdwEAAAAAAIhYAQABAAAAAPoAAAIAAACAuwAAAwAAAESsAAAEAAAAAH0AAAUAAADAXQAABgAAACJWAAAHAAAAgD4AAAgAAADgLgAACQAAABErAAAKAAAAQB8AAAsAAAC2HAAADAAAAAAAAAANAAAAkF8BAA8AAAAAdwEAiFgBAAD6AACAuwAARKwAAAB9AADAXQAAIlYAAIA+AADgLgAAESsAAEAfAAC2HAAAAAAAAAAAAACQXwEANDIwMDFmADRkMDAxZgA2NDAwMWYAAAAAAAAAAAAAAABodHRwOi8vd3d3LndlYnJ0Yy5vcmcvZXhwZXJpbWVudHMvcnRwLWhkcmV4dC9hYnMtc2VuZC10aW1lAAAAAAAAaHR0cDovL3d3dy53ZWJydGMub3JnL2V4cGVyaW1lbnRzL3J0cC1oZHJleHQvcGxheW91dC1kZWxheQAAAAAAAGh0dHA6Ly93d3cuaWV0Zi5vcmcvaWQvZHJhZnQtaG9sbWVyLXJtY2F0LXRyYW5zcG9ydC13aWRlLWNjLWV4dGVuc2lvbnMtMDEAAAAAAAAAaHR0cDovL3d3dy53ZWJydGMub3JnL2V4cGVyaW1lbnRzL3J0cC1oZHJleHQvbWV0YS1kYXRhLTAxAAAAAAAAAGh0dHA6Ly93d3cud2VicnRjLm9yZy9leHBlcmltZW50cy9ydHAtaGRyZXh0L21ldGEtZGF0YS0wMgAAAAAAAABodHRwOi8vd3d3LndlYnJ0Yy5vcmcvZXhwZXJpbWVudHMvcnRwLWhkcmV4dC9tZXRhLWRhdGEtMDMAAAAAAAAAaHR0cDovL3d3dy53ZWJydGMub3JnL2V4cGVyaW1lbnRzL3J0cC1oZHJleHQvZGVjb2RpbmctdGltZXN0YW1wAGh0dHA6Ly93d3cud2VicnRjLm9yZy9leHBlcmltZW50cy9ydHAtaGRyZXh0L3ZpZGVvLWNvbXBvc2l0aW9uLXRpbWUAAAAAAAAAAAAAAAAAaHR0cDovL3d3dy53ZWJydGMub3JnL2V4cGVyaW1lbnRzL3J0cC1oZHJleHQvdmlkZW8tZnJhbWUtdHlwZQAAAHVyaTp3ZWJydGM6cnRjOnJ0cC1oZHJleHQ6dmlkZW86Q29tcG9zaXRpb25UaW1lAHVybjppZXRmOnBhcmFtczpydHAtaGRyZXh0OnNkZXM6bWlkAAAAAAAAAAAAAAAAAHVybjppZXRmOnBhcmFtczpydHAtaGRyZXh0OnNkZXM6cnRwLXN0cmVhbS1pZAAAAHVybjppZXRmOnBhcmFtczpydHAtaGRyZXh0OnNkZXM6cmVwYWlyZWQtcnRwLXN0cmVhbS1pZAAAAAAAAAAAAAB1cm46aWV0ZjpwYXJhbXM6cnRwLWhkcmV4dDp0b2Zmc2V0AAAAAAAAAAAAAAAAAAB1cm46aWV0ZjpwYXJhbXM6cnRwLWhkcmV4dDpzc3JjLWF1ZGlvLWxldmVsAAAAAAB1cm46M2dwcDp2aWRlby1vcmllbnRhdGlvbgAAAAAAAGh0dHA6Ly93d3cud2VicnRjLm9yZy9leHBlcmltZW50cy9ydHAtaGRyZXh0L3ZpZGVvLWNvbnRlbnQtdHlwZQBodHRwOi8vd3d3LndlYnJ0Yy5vcmcvZXhwZXJpbWVudHMvcnRwLWhkcmV4dC92aWRlby10aW1pbmcAAAAAAAAAaHR0cDovL3d3dy53ZWJydGMub3JnL2V4cGVyaW1lbnRzL3J0cC1oZHJleHQvY29sb3Itc3BhY2UAdHJpY2tsZQByZW5vbWluYXRpb24AAABVRFAvVExTL1JUUC9TQVZQRgBuYWNrAG5hY2sgcGxpAGNjbSBmaXIAcnJ0cgB0cmFuc3BvcnQtY2MAZ29vZy1yZW1iAGJmcmFtZS1lbmFibGVkAEJGcmFtZS1lbmFibGVkADQyZTAxZgBzdGVyZW8Ac2N0cC1wb3J0AAAAAAAAAG1heC1tZXNzYWdlLXNpemUAVURQL0RUTFMvU0NUUABSVFAvQVZQRgB3ZWJydGM6Ly8AAAAAAAAAAAAAAAAAAABwYWNrZXRpemF0aW9uLW1vZGUAAAAAAAAAAAAAAAAAAHByb2ZpbGUtbGV2ZWwtaWQAdXNlaW5iYW5kZmVjAHVzZWR0eAAAAAAAAAAAAAAAAG1heGF2ZXJhZ2ViaXRyYXRlAG1pbnB0aW1lAAAAAAAAKBQAABYAAAAXAAAAGAAAABkAAAAaAAAATlN0M19fMjIwX19zaGFyZWRfcHRyX2VtcGxhY2VJTjNBVkUxOFNlc3Npb25EZXNjcmlwdGlvbkVOU185YWxsb2NhdG9ySVMyX0VFRUUAAAAcUwAA2BMAAMhOAAAAAAAAnBQAABsAAAAcAAAAHQAAABkAAAAeAAAATlN0M19fMjIwX19zaGFyZWRfcHRyX2VtcGxhY2VJTjNBVkUxNk1lZGlhRGVzY3JpcHRpb25FTlNfOWFsbG9jYXRvcklTMl9FRUVFABxTAABQFAAAyE4AAAAAAAAQFQAAHwAAACAAAAAhAAAAGQAAACIAAABOU3QzX18yMjBfX3NoYXJlZF9wdHJfZW1wbGFjZUlOM0FWRTE2Q29kZWNEZXNjcmlwdGlvbkVOU185YWxsb2NhdG9ySVMyX0VFRUUAHFMAAMQUAADITgAAAAAAAIQVAAAjAAAAJAAAACUAAAAZAAAAJgAAAE5TdDNfXzIyMF9fc2hhcmVkX3B0cl9lbXBsYWNlSU4zQVZFMTZUcmFja0Rlc2NyaXB0aW9uRU5TXzlhbGxvY2F0b3JJUzJfRUVFRQAcUwAAOBUAAMhOAAAAc2VuZHJlY3YAc2VuZG9ubHkAcmVjdm9ubHkAaW5hY3RpdmUASVA0AElQNgBhdWRpbwB2aWRlbwBhcHBsaWNhdGlvbgBhY3RpdmUAYWN0cGFzcwBwYXNzaXZlAAAAAABIFwAAOwAAADwAAAA9AAAAPgAAAD8AAABAAAAAQQAAAEIAAABDAAAATlN0M19fMjEwX19mdW5jdGlvbjZfX2Z1bmNJUEZiTlNfMTBzaGFyZWRfcHRySU4zQVZFMThTZXNzaW9uRGVzY3JpcHRpb25FRUVPTlNfMTJiYXNpY19zdHJpbmdJY05TXzExY2hhcl90cmFpdHNJY0VFTlNfOWFsbG9jYXRvckljRUVFRVBLY21FTlM5X0lTR19FRVNGX0VFAE5TdDNfXzIxMF9fZnVuY3Rpb242X19iYXNlSUZiTlNfMTBzaGFyZWRfcHRySU4zQVZFMThTZXNzaW9uRGVzY3JpcHRpb25FRUVPTlNfMTJiYXNpY19zdHJpbmdJY05TXzExY2hhcl90cmFpdHNJY0VFTlNfOWFsbG9jYXRvckljRUVFRVBLY21FRUUAAAD0UgAAshYAABxTAAAYFgAAQBcAAFBGYk5TdDNfXzIxMHNoYXJlZF9wdHJJTjNBVkUxOFNlc3Npb25EZXNjcmlwdGlvbkVFRU9OU18xMmJhc2ljX3N0cmluZ0ljTlNfMTFjaGFyX3RyYWl0c0ljRUVOU185YWxsb2NhdG9ySWNFRUVFUEtjbUUARmJOU3QzX18yMTBzaGFyZWRfcHRySU4zQVZFMThTZXNzaW9uRGVzY3JpcHRpb25FRUVPTlNfMTJiYXNpY19zdHJpbmdJY05TXzExY2hhcl90cmFpdHNJY0VFTlNfOWFsbG9jYXRvckljRUVFRVBLY21FAADYUgAAyBcAANRTAABUFwAAAAAAADwYAAAAAAAArBkAAEQAAABFAAAARgAAAEcAAABIAAAASQAAAEoAAABLAAAATAAAAE5TdDNfXzIxMF9fZnVuY3Rpb242X19mdW5jSVBGYk5TXzEwc2hhcmVkX3B0cklOM0FWRTE2TWVkaWFEZXNjcmlwdGlvbkVFRU9OU18xMmJhc2ljX3N0cmluZ0ljTlNfMTFjaGFyX3RyYWl0c0ljRUVOU185YWxsb2NhdG9ySWNFRUVFUEtjbUVOUzlfSVNHX0VFU0ZfRUUATlN0M19fMjEwX19mdW5jdGlvbjZfX2Jhc2VJRmJOU18xMHNoYXJlZF9wdHJJTjNBVkUxNk1lZGlhRGVzY3JpcHRpb25FRUVPTlNfMTJiYXNpY19zdHJpbmdJY05TXzExY2hhcl90cmFpdHNJY0VFTlNfOWFsbG9jYXRvckljRUVFRVBLY21FRUUAAAD0UgAAGBkAABxTAACAGAAApBkAAFBGYk5TdDNfXzIxMHNoYXJlZF9wdHJJTjNBVkUxNk1lZGlhRGVzY3JpcHRpb25FRUVPTlNfMTJiYXNpY19zdHJpbmdJY05TXzExY2hhcl90cmFpdHNJY0VFTlNfOWFsbG9jYXRvckljRUVFRVBLY21FAEZiTlN0M19fMjEwc2hhcmVkX3B0cklOM0FWRTE2TWVkaWFEZXNjcmlwdGlvbkVFRU9OU18xMmJhc2ljX3N0cmluZ0ljTlNfMTFjaGFyX3RyYWl0c0ljRUVOU185YWxsb2NhdG9ySWNFRUVFUEtjbUUAANhSAAAqGgAA1FMAALgZAAAAAAAAnBoAAA0KAGF1ZGlvAHZpZGVvAGFwcGxpY2F0aW9uAGZsZXhmZWMtMDMAaWNlLWxpdGUAANUEAAAfBAAAKgQAADkHAABOU3QzX18yMTJiYXNpY19zdHJpbmdJY05TXzExY2hhcl90cmFpdHNJY0VFTlNfOWFsbG9jYXRvckljRUVFRQAA9FIAAPQaAABOU3QzX18yMTJiYXNpY19zdHJpbmdJaE5TXzExY2hhcl90cmFpdHNJaEVFTlNfOWFsbG9jYXRvckloRUVFRQAA9FIAADwbAABOU3QzX18yMTJiYXNpY19zdHJpbmdJd05TXzExY2hhcl90cmFpdHNJd0VFTlNfOWFsbG9jYXRvckl3RUVFRQAA9FIAAIQbAABOU3QzX18yMTJiYXNpY19zdHJpbmdJRHNOU18xMWNoYXJfdHJhaXRzSURzRUVOU185YWxsb2NhdG9ySURzRUVFRQAAAPRSAADMGwAATlN0M19fMjEyYmFzaWNfc3RyaW5nSURpTlNfMTFjaGFyX3RyYWl0c0lEaUVFTlNfOWFsbG9jYXRvcklEaUVFRUUAAAD0UgAAGBwAAE4xMGVtc2NyaXB0ZW4zdmFsRQAA9FIAAGQcAABOMTBlbXNjcmlwdGVuMTFtZW1vcnlfdmlld0ljRUUAAPRSAACAHAAATjEwZW1zY3JpcHRlbjExbWVtb3J5X3ZpZXdJYUVFAAD0UgAAqBwAAE4xMGVtc2NyaXB0ZW4xMW1lbW9yeV92aWV3SWhFRQAA9FIAANAcAABOMTBl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ZQAAAGYAAABOU3QzX18yMTliYXNpY19vc3RyaW5nc3RyZWFtSWNOU18xMWNoYXJfdHJhaXRzSWNFRU5TXzlhbGxvY2F0b3JJY0VFRUUAAAAcUwAADCQAAEQjAAAAAAAAhCQAAHIAAABzAAAATlN0M19fMjhpb3NfYmFzZUUAAAD0UgAAcCQAAAAAAADRdJ4AV529KoBwUg///z4nCgAAAGQAAADoAwAAECcAAKCGAQBAQg8AgJaYAADh9QUYAAAANQAAAHEAAABr////zvv//5K///8AAAAAAAAAAP////////////////////////////////////////////////////////////////8AAQIDBAUGBwgJ/////////woLDA0ODxAREhMUFRYXGBkaGxwdHh8gISIj////////CgsMDQ4PEBESExQVFhcYGRobHB0eHyAhIiP/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////AAECBAcDBgUAAAAAAAAAAgAAwAMAAMAEAADABQAAwAYAAMAHAADACAAAwAkAAMAKAADACwAAwAwAAMANAADADgAAwA8AAMAQAADAEQAAwBIAAMATAADAFAAAwBUAAMAWAADAFwAAwBgAAMAZAADAGgAAwBsAAMAcAADAHQAAwB4AAMAfAADAAAAAswEAAMMCAADDAwAAwwQAAMMFAADDBgAAwwcAAMMIAADDCQAAwwoAAMMLAADDDAAAww0AANMOAADDDwAAwwAADLsBAAzDAgAMwwMADMMEAAzbAAAAAN4SBJUAAAAA////////////////wCYAABQAAABDLlVURi04AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA1CYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABMQ19DVFlQRQAAAABMQ19OVU1FUklDAABMQ19USU1FAAAAAABMQ19DT0xMQVRFAABMQ19NT05FVEFSWQBMQ19NRVNTQUdFUwCAKQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAACAAAAAwAAAAQAAAAFAAAABgAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAA0AAAAOAAAADwAAABAAAAARAAAAEgAAABMAAAAUAAAAFQAAABYAAAAXAAAAGAAAABkAAAAaAAAAGwAAABwAAAAdAAAAHgAAAB8AAAAgAAAAIQAAACIAAAAjAAAAJAAAACUAAAAmAAAAJwAAACgAAAApAAAAKgAAACsAAAAsAAAALQAAAC4AAAAvAAAAMAAAADEAAAAyAAAAMwAAADQAAAA1AAAANgAAADcAAAA4AAAAOQAAADoAAAA7AAAAPAAAAD0AAAA+AAAAPwAAAEAAAABBAAAAQgAAAEMAAABEAAAARQAAAEYAAABHAAAASAAAAEkAAABKAAAASwAAAEwAAABNAAAATgAAAE8AAABQAAAAUQAAAFIAAABTAAAAVAAAAFUAAABWAAAAVwAAAFgAAABZAAAAWgAAAFsAAABcAAAAXQAAAF4AAABfAAAAYAAAAEEAAABCAAAAQwAAAEQAAABFAAAARgAAAEcAAABIAAAASQAAAEoAAABLAAAATAAAAE0AAABOAAAATwAAAFAAAABRAAAAUgAAAFMAAABUAAAAVQAAAFYAAABXAAAAWAAAAFkAAABaAAAAewAAAHwAAAB9AAAAfgAAAH8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJAvAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA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QgEAAEIBAABCAQAAQgEAAEIBAABCAQAAQgEAAEIBAACCAAAAggAAAIIAAACCAAAAggAAAIIAAACCAAAAKgEAACoBAAAqAQAAKgEAACoBAAAqAQAAKgAAACoAAAAqAAAAKgAAACoAAAAqAAAAKgAAACoAAAAqAAAAKgAAACoAAAAqAAAAKgAAACoAAAAqAAAAKgAAACoAAAAqAAAAKgAAACoAAACCAAAAggAAAIIAAACCAAAAggAAAIIAAAAyAQAAMgEAADIBAAAyAQAAMgEAADIBAAAyAAAAMgAAADIAAAAyAAAAMgAAADIAAAAyAAAAMgAAADIAAAAyAAAAMgAAADIAAAAyAAAAMgAAADIAAAAyAAAAMgAAADIAAAAyAAAAMgAAAIIAAACCAAAAggAAAIIAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAnD0AAJQAAACVAAAAiQAAAJYAAACXAAAAmAAAAJkAAACaAAAAmwAAAJwAAAAAAAAAbD4AAJ0AAACeAAAAiQAAAJ8AAACgAAAA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";\nif (!pa(P)) {\n  var qa = P;\n  P = g.locateFile ? g.locateFile(qa, u) : u + qa;\n}\nfunction ra(a) {\n  var c = P;\n  try {\n    a: {\n      try {\n        if (c == P && x) {\n          var b = new Uint8Array(x);\n          break a;\n        }\n        if (pa(c)) {\n          try {\n            var d = sa(c.slice(37)), f = new Uint8Array(d.length);\n            for (c = 0; c < d.length; ++c) {\n              f[c] = d.charCodeAt(c);\n            }\n            var k = f;\n          } catch (m) {\n            throw Error("Converting base64 string to bytes failed.");\n          }\n          var h = k;\n        } else {\n          h = void 0;\n        }\n        if (h) {\n          b = h;\n          break a;\n        }\n        throw "sync fetching of the wasm failed: you can preload it to Module[\'wasmBinary\'] manually, or emcc.py will do that for you when generating HTML (but not JS)";\n      } catch (m) {\n        y(m);\n      }\n      b = void 0;\n    }\n    var l = new WebAssembly.Module(b);\n    var n = new WebAssembly.Instance(l, a);\n  } catch (m) {\n    throw a = m.toString(), v("failed to compile wasm module: " + a), (a.includes("imported Memory") || a.includes("memory import")) && v("Memory size incompatibility issues may be due to changing INITIAL_MEMORY at runtime to something too large. Use ALLOW_MEMORY_GROWTH to allow any size memory (and also make sure not to set INITIAL_MEMORY at runtime to something smaller than it was at compile time)."), m;\n  }\n  return [n, l];\n}\nfunction Q(a) {\n  for (; 0 < a.length;) {\n    a.shift()(g);\n  }\n}\nfunction ta(a) {\n  this.j = a - 24;\n  this.H = function(c) {\n    L[this.j + 4 >> 2] = c;\n  };\n  this.C = function(c) {\n    L[this.j + 8 >> 2] = c;\n  };\n  this.D = function() {\n    K[this.j >> 2] = 0;\n  };\n  this.B = function() {\n    H[this.j + 12 >> 0] = 0;\n  };\n  this.F = function() {\n    H[this.j + 13 >> 0] = 0;\n  };\n  this.u = function(c, b) {\n    this.v();\n    this.H(c);\n    this.C(b);\n    this.D();\n    this.B();\n    this.F();\n  };\n  this.v = function() {\n    L[this.j + 16 >> 2] = 0;\n  };\n}\nvar ua = 0;\nfunction va(a) {\n  switch(a) {\n    case 1:\n      return 0;\n    case 2:\n      return 1;\n    case 4:\n      return 2;\n    case 8:\n      return 3;\n    default:\n      throw new TypeError("Unknown type size: " + a);\n  }\n}\nvar wa = void 0;\nfunction R(a) {\n  for (var c = ""; C[a];) {\n    c += wa[C[a++]];\n  }\n  return c;\n}\nvar xa = {}, ya = {}, za = {};\nfunction Aa(a, c) {\n  if (void 0 === a) {\n    a = "_unknown";\n  } else {\n    a = a.replace(/[^a-zA-Z0-9_]/g, "$");\n    var b = a.charCodeAt(0);\n    a = 48 <= b && 57 >= b ? "_" + a : a;\n  }\n  return (new Function("body", "return function " + a + \'() {\\n    "use strict";    return body.apply(this, arguments);\\n};\\n\'))(c);\n}\nfunction Ba(a) {\n  var c = Error, b = Aa(a, function(d) {\n    this.name = a;\n    this.message = d;\n    d = Error(d).stack;\n    void 0 !== d && (this.stack = this.toString() + "\\n" + d.replace(/^Error(:[^\\n]*)?\\n/, ""));\n  });\n  b.prototype = Object.create(c.prototype);\n  b.prototype.constructor = b;\n  b.prototype.toString = function() {\n    return void 0 === this.message ? this.name : this.name + ": " + this.message;\n  };\n  return b;\n}\nvar Ca = void 0;\nfunction S(a) {\n  throw new Ca(a);\n}\nfunction T(a, c, b = {}) {\n  if (!("argPackAdvance" in c)) {\n    throw new TypeError("registerType registeredInstance requires argPackAdvance");\n  }\n  var d = c.name;\n  a || S(\'type "\' + d + \'" must have a positive integer typeid pointer\');\n  if (ya.hasOwnProperty(a)) {\n    if (b.A) {\n      return;\n    }\n    S("Cannot register type \'" + d + "\' twice");\n  }\n  ya[a] = c;\n  delete za[a];\n  xa.hasOwnProperty(a) && (c = xa[a], delete xa[a], c.forEach(f => f()));\n}\nvar Da = [], U = [{}, {value:void 0}, {value:null}, {value:!0}, {value:!1}], Ea = a => {\n  switch(a) {\n    case void 0:\n      return 1;\n    case null:\n      return 2;\n    case !0:\n      return 3;\n    case !1:\n      return 4;\n    default:\n      var c = Da.length ? Da.pop() : U.length;\n      U[c] = {G:1, value:a};\n      return c;\n  }\n};\nfunction Ga(a) {\n  return this.fromWireType(K[a >> 2]);\n}\nfunction Ha(a, c) {\n  switch(c) {\n    case 2:\n      return function(b) {\n        return this.fromWireType(ia[b >> 2]);\n      };\n    case 3:\n      return function(b) {\n        return this.fromWireType(ja[b >> 3]);\n      };\n    default:\n      throw new TypeError("Unknown float type: " + a);\n  }\n}\nfunction Ia(a, c, b) {\n  switch(c) {\n    case 0:\n      return b ? function(d) {\n        return H[d];\n      } : function(d) {\n        return C[d];\n      };\n    case 1:\n      return b ? function(d) {\n        return I[d >> 1];\n      } : function(d) {\n        return J[d >> 1];\n      };\n    case 2:\n      return b ? function(d) {\n        return K[d >> 2];\n      } : function(d) {\n        return L[d >> 2];\n      };\n    default:\n      throw new TypeError("Unknown integer type: " + a);\n  }\n}\nvar Ja = "undefined" != typeof TextDecoder ? new TextDecoder("utf-16le") : void 0;\nfunction Ka(a, c) {\n  var b = a >> 1;\n  for (var d = b + c / 2; !(b >= d) && J[b];) {\n    ++b;\n  }\n  b <<= 1;\n  if (32 < b - a && Ja) {\n    return Ja.decode(C.subarray(a, b));\n  }\n  b = "";\n  for (d = 0; !(d >= c / 2); ++d) {\n    var f = I[a + 2 * d >> 1];\n    if (0 == f) {\n      break;\n    }\n    b += String.fromCharCode(f);\n  }\n  return b;\n}\nfunction La(a, c, b) {\n  void 0 === b && (b = 2147483647);\n  if (2 > b) {\n    return 0;\n  }\n  b -= 2;\n  var d = c;\n  b = b < 2 * a.length ? b / 2 : a.length;\n  for (var f = 0; f < b; ++f) {\n    I[c >> 1] = a.charCodeAt(f), c += 2;\n  }\n  I[c >> 1] = 0;\n  return c - d;\n}\nfunction Ma(a) {\n  return 2 * a.length;\n}\nfunction Na(a, c) {\n  for (var b = 0, d = ""; !(b >= c / 4);) {\n    var f = K[a + 4 * b >> 2];\n    if (0 == f) {\n      break;\n    }\n    ++b;\n    65536 <= f ? (f -= 65536, d += String.fromCharCode(55296 | f >> 10, 56320 | f & 1023)) : d += String.fromCharCode(f);\n  }\n  return d;\n}\nfunction Oa(a, c, b) {\n  void 0 === b && (b = 2147483647);\n  if (4 > b) {\n    return 0;\n  }\n  var d = c;\n  b = d + b - 4;\n  for (var f = 0; f < a.length; ++f) {\n    var k = a.charCodeAt(f);\n    if (55296 <= k && 57343 >= k) {\n      var h = a.charCodeAt(++f);\n      k = 65536 + ((k & 1023) << 10) | h & 1023;\n    }\n    K[c >> 2] = k;\n    c += 4;\n    if (c + 4 > b) {\n      break;\n    }\n  }\n  K[c >> 2] = 0;\n  return c - d;\n}\nfunction Pa(a) {\n  for (var c = 0, b = 0; b < a.length; ++b) {\n    var d = a.charCodeAt(b);\n    55296 <= d && 57343 >= d && ++b;\n    c += 4;\n  }\n  return c;\n}\nvar Qa = {};\nfunction Ra() {\n  if (!Sa) {\n    var a = {USER:"web_user", LOGNAME:"web_user", PATH:"/", PWD:"/", HOME:"/home/web_user", LANG:("object" == typeof navigator && navigator.languages && navigator.languages[0] || "C").replace("-", "_") + ".UTF-8", _:ca || "./this.program"}, c;\n    for (c in Qa) {\n      void 0 === Qa[c] ? delete a[c] : a[c] = Qa[c];\n    }\n    var b = [];\n    for (c in a) {\n      b.push(c + "=" + a[c]);\n    }\n    Sa = b;\n  }\n  return Sa;\n}\nvar Sa, Ta = [null, [], []];\nfunction V(a) {\n  return 0 === a % 4 && (0 !== a % 100 || 0 === a % 400);\n}\nvar Ua = [31, 29, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31], Va = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\nfunction Wa(a, c, b) {\n  b = Array(0 < b ? b : E(a) + 1);\n  a = D(a, b, 0, b.length);\n  c && (b.length = a);\n  return b;\n}\nfunction Xa(a, c, b, d) {\n  function f(e, p, r) {\n    for (e = "number" == typeof e ? e.toString() : e || ""; e.length < p;) {\n      e = r[0] + e;\n    }\n    return e;\n  }\n  function k(e, p) {\n    return f(e, p, "0");\n  }\n  function h(e, p) {\n    function r(Fa) {\n      return 0 > Fa ? -1 : 0 < Fa ? 1 : 0;\n    }\n    var F;\n    0 === (F = r(e.getFullYear() - p.getFullYear())) && 0 === (F = r(e.getMonth() - p.getMonth())) && (F = r(e.getDate() - p.getDate()));\n    return F;\n  }\n  function l(e) {\n    switch(e.getDay()) {\n      case 0:\n        return new Date(e.getFullYear() - 1, 11, 29);\n      case 1:\n        return e;\n      case 2:\n        return new Date(e.getFullYear(), 0, 3);\n      case 3:\n        return new Date(e.getFullYear(), 0, 2);\n      case 4:\n        return new Date(e.getFullYear(), 0, 1);\n      case 5:\n        return new Date(e.getFullYear() - 1, 11, 31);\n      case 6:\n        return new Date(e.getFullYear() - 1, 11, 30);\n    }\n  }\n  function n(e) {\n    var p = e.h;\n    for (e = new Date((new Date(e.i + 1900, 0, 1)).getTime()); 0 < p;) {\n      var r = e.getMonth(), F = (V(e.getFullYear()) ? Ua : Va)[r];\n      if (p > F - e.getDate()) {\n        p -= F - e.getDate() + 1, e.setDate(1), 11 > r ? e.setMonth(r + 1) : (e.setMonth(0), e.setFullYear(e.getFullYear() + 1));\n      } else {\n        e.setDate(e.getDate() + p);\n        break;\n      }\n    }\n    r = new Date(e.getFullYear() + 1, 0, 4);\n    p = l(new Date(e.getFullYear(), 0, 4));\n    r = l(r);\n    return 0 >= h(p, e) ? 0 >= h(r, e) ? e.getFullYear() + 1 : e.getFullYear() : e.getFullYear() - 1;\n  }\n  var m = K[d + 40 >> 2];\n  d = {K:K[d >> 2], J:K[d + 4 >> 2], m:K[d + 8 >> 2], s:K[d + 12 >> 2], o:K[d + 16 >> 2], i:K[d + 20 >> 2], g:K[d + 24 >> 2], h:K[d + 28 >> 2], N:K[d + 32 >> 2], I:K[d + 36 >> 2], L:m ? A(m) : ""};\n  b = A(b);\n  m = {"%c":"%a %b %d %H:%M:%S %Y", "%D":"%m/%d/%y", "%F":"%Y-%m-%d", "%h":"%b", "%r":"%I:%M:%S %p", "%R":"%H:%M", "%T":"%H:%M:%S", "%x":"%m/%d/%y", "%X":"%H:%M:%S", "%Ec":"%c", "%EC":"%C", "%Ex":"%m/%d/%y", "%EX":"%H:%M:%S", "%Ey":"%y", "%EY":"%Y", "%Od":"%d", "%Oe":"%e", "%OH":"%H", "%OI":"%I", "%Om":"%m", "%OM":"%M", "%OS":"%S", "%Ou":"%u", "%OU":"%U", "%OV":"%V", "%Ow":"%w", "%OW":"%W", "%Oy":"%y",};\n  for (var q in m) {\n    b = b.replace(new RegExp(q, "g"), m[q]);\n  }\n  var w = "Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "), B = "January February March April May June July August September October November December".split(" ");\n  m = {"%a":function(e) {\n    return w[e.g].substring(0, 3);\n  }, "%A":function(e) {\n    return w[e.g];\n  }, "%b":function(e) {\n    return B[e.o].substring(0, 3);\n  }, "%B":function(e) {\n    return B[e.o];\n  }, "%C":function(e) {\n    return k((e.i + 1900) / 100 | 0, 2);\n  }, "%d":function(e) {\n    return k(e.s, 2);\n  }, "%e":function(e) {\n    return f(e.s, 2, " ");\n  }, "%g":function(e) {\n    return n(e).toString().substring(2);\n  }, "%G":function(e) {\n    return n(e);\n  }, "%H":function(e) {\n    return k(e.m, 2);\n  }, "%I":function(e) {\n    e = e.m;\n    0 == e ? e = 12 : 12 < e && (e -= 12);\n    return k(e, 2);\n  }, "%j":function(e) {\n    for (var p = 0, r = 0; r <= e.o - 1; p += (V(e.i + 1900) ? Ua : Va)[r++]) {\n    }\n    return k(e.s + p, 3);\n  }, "%m":function(e) {\n    return k(e.o + 1, 2);\n  }, "%M":function(e) {\n    return k(e.J, 2);\n  }, "%n":function() {\n    return "\\n";\n  }, "%p":function(e) {\n    return 0 <= e.m && 12 > e.m ? "AM" : "PM";\n  }, "%S":function(e) {\n    return k(e.K, 2);\n  }, "%t":function() {\n    return "\\t";\n  }, "%u":function(e) {\n    return e.g || 7;\n  }, "%U":function(e) {\n    return k(Math.floor((e.h + 7 - e.g) / 7), 2);\n  }, "%V":function(e) {\n    var p = Math.floor((e.h + 7 - (e.g + 6) % 7) / 7);\n    2 >= (e.g + 371 - e.h - 2) % 7 && p++;\n    if (p) {\n      53 == p && (r = (e.g + 371 - e.h) % 7, 4 == r || 3 == r && V(e.i) || (p = 1));\n    } else {\n      p = 52;\n      var r = (e.g + 7 - e.h - 1) % 7;\n      (4 == r || 5 == r && V(e.i % 400 - 1)) && p++;\n    }\n    return k(p, 2);\n  }, "%w":function(e) {\n    return e.g;\n  }, "%W":function(e) {\n    return k(Math.floor((e.h + 7 - (e.g + 6) % 7) / 7), 2);\n  }, "%y":function(e) {\n    return (e.i + 1900).toString().substring(2);\n  }, "%Y":function(e) {\n    return e.i + 1900;\n  }, "%z":function(e) {\n    e = e.I;\n    var p = 0 <= e;\n    e = Math.abs(e) / 60;\n    return (p ? "+" : "-") + String("0000" + (e / 60 * 100 + e % 60)).slice(-4);\n  }, "%Z":function(e) {\n    return e.L;\n  }, "%%":function() {\n    return "%";\n  }};\n  b = b.replace(/%%/g, "\\x00\\x00");\n  for (q in m) {\n    b.includes(q) && (b = b.replace(new RegExp(q, "g"), m[q](d)));\n  }\n  b = b.replace(/\\0\\0/g, "%");\n  q = Wa(b, !1);\n  if (q.length > c) {\n    return 0;\n  }\n  H.set(q, a);\n  return q.length - 1;\n}\nfor (var Ya = Array(256), W = 0; 256 > W; ++W) {\n  Ya[W] = String.fromCharCode(W);\n}\nwa = Ya;\nCa = g.BindingError = Ba("BindingError");\ng.InternalError = Ba("InternalError");\ng.count_emval_handles = function() {\n  for (var a = 0, c = 5; c < U.length; ++c) {\n    void 0 !== U[c] && ++a;\n  }\n  return a;\n};\ng.get_first_emval = function() {\n  for (var a = 5; a < U.length; ++a) {\n    if (void 0 !== U[a]) {\n      return U[a];\n    }\n  }\n  return null;\n};\nvar sa = "function" == typeof atob ? atob : function(a) {\n  var c = "", b = 0;\n  a = a.replace(/[^A-Za-z0-9\\+\\/=]/g, "");\n  do {\n    var d = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(b++));\n    var f = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(b++));\n    var k = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(b++));\n    var h = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(b++));\n    d = d << 2 | f >> 4;\n    f = (f & 15) << 4 | k >> 2;\n    var l = (k & 3) << 6 | h;\n    c += String.fromCharCode(d);\n    64 !== k && (c += String.fromCharCode(f));\n    64 !== h && (c += String.fromCharCode(l));\n  } while (b < a.length);\n  return c;\n}, $a = {__cxa_throw:function(a, c, b) {\n  (new ta(a)).u(c, b);\n  ua++;\n  throw a;\n}, _embind_register_bigint:function() {\n}, _embind_register_bool:function(a, c, b, d, f) {\n  var k = va(b);\n  c = R(c);\n  T(a, {name:c, fromWireType:function(h) {\n    return !!h;\n  }, toWireType:function(h, l) {\n    return l ? d : f;\n  }, argPackAdvance:8, readValueFromPointer:function(h) {\n    if (1 === b) {\n      var l = H;\n    } else if (2 === b) {\n      l = I;\n    } else if (4 === b) {\n      l = K;\n    } else {\n      throw new TypeError("Unknown boolean type size: " + c);\n    }\n    return this.fromWireType(l[h >> k]);\n  }, l:null,});\n}, _embind_register_emval:function(a, c) {\n  c = R(c);\n  T(a, {name:c, fromWireType:function(b) {\n    b || S("Cannot use deleted val. handle = " + b);\n    var d = U[b].value;\n    4 < b && 0 === --U[b].G && (U[b] = void 0, Da.push(b));\n    return d;\n  }, toWireType:function(b, d) {\n    return Ea(d);\n  }, argPackAdvance:8, readValueFromPointer:Ga, l:null,});\n}, _embind_register_float:function(a, c, b) {\n  b = va(b);\n  c = R(c);\n  T(a, {name:c, fromWireType:function(d) {\n    return d;\n  }, toWireType:function(d, f) {\n    return f;\n  }, argPackAdvance:8, readValueFromPointer:Ha(c, b), l:null,});\n}, _embind_register_integer:function(a, c, b, d, f) {\n  c = R(c);\n  -1 === f && (f = 4294967295);\n  f = va(b);\n  var k = l => l;\n  if (0 === d) {\n    var h = 32 - 8 * b;\n    k = l => l << h >>> h;\n  }\n  b = c.includes("unsigned") ? function(l, n) {\n    return n >>> 0;\n  } : function(l, n) {\n    return n;\n  };\n  T(a, {name:c, fromWireType:k, toWireType:b, argPackAdvance:8, readValueFromPointer:Ia(c, f, 0 !== d), l:null,});\n}, _embind_register_memory_view:function(a, c, b) {\n  function d(k) {\n    k >>= 2;\n    var h = L;\n    return new f(G, h[k + 1], h[k]);\n  }\n  var f = [Int8Array, Uint8Array, Int16Array, Uint16Array, Int32Array, Uint32Array, Float32Array, Float64Array,][c];\n  b = R(b);\n  T(a, {name:b, fromWireType:d, argPackAdvance:8, readValueFromPointer:d,}, {A:!0,});\n}, _embind_register_std_string:function(a, c) {\n  c = R(c);\n  var b = "std::string" === c;\n  T(a, {name:c, fromWireType:function(d) {\n    var f = L[d >> 2], k = d + 4;\n    if (b) {\n      for (var h = k, l = 0; l <= f; ++l) {\n        var n = k + l;\n        if (l == f || 0 == C[n]) {\n          h = A(h, n - h);\n          if (void 0 === m) {\n            var m = h;\n          } else {\n            m += String.fromCharCode(0), m += h;\n          }\n          h = n + 1;\n        }\n      }\n    } else {\n      m = Array(f);\n      for (l = 0; l < f; ++l) {\n        m[l] = String.fromCharCode(C[k + l]);\n      }\n      m = m.join("");\n    }\n    X(d);\n    return m;\n  }, toWireType:function(d, f) {\n    f instanceof ArrayBuffer && (f = new Uint8Array(f));\n    var k, h = "string" == typeof f;\n    h || f instanceof Uint8Array || f instanceof Uint8ClampedArray || f instanceof Int8Array || S("Cannot pass non-string to std::string");\n    b && h ? k = E(f) : k = f.length;\n    var l = Za(4 + k + 1), n = l + 4;\n    L[l >> 2] = k;\n    if (b && h) {\n      D(f, C, n, k + 1);\n    } else {\n      if (h) {\n        for (h = 0; h < k; ++h) {\n          var m = f.charCodeAt(h);\n          255 < m && (X(n), S("String has UTF-16 code units that do not fit in 8 bits"));\n          C[n + h] = m;\n        }\n      } else {\n        for (h = 0; h < k; ++h) {\n          C[n + h] = f[h];\n        }\n      }\n    }\n    null !== d && d.push(X, l);\n    return l;\n  }, argPackAdvance:8, readValueFromPointer:Ga, l:function(d) {\n    X(d);\n  },});\n}, _embind_register_std_wstring:function(a, c, b) {\n  b = R(b);\n  if (2 === c) {\n    var d = Ka;\n    var f = La;\n    var k = Ma;\n    var h = () => J;\n    var l = 1;\n  } else {\n    4 === c && (d = Na, f = Oa, k = Pa, h = () => L, l = 2);\n  }\n  T(a, {name:b, fromWireType:function(n) {\n    for (var m = L[n >> 2], q = h(), w, B = n + 4, e = 0; e <= m; ++e) {\n      var p = n + 4 + e * c;\n      if (e == m || 0 == q[p >> l]) {\n        B = d(B, p - B), void 0 === w ? w = B : (w += String.fromCharCode(0), w += B), B = p + c;\n      }\n    }\n    X(n);\n    return w;\n  }, toWireType:function(n, m) {\n    "string" != typeof m && S("Cannot pass non-string to C++ string type " + b);\n    var q = k(m), w = Za(4 + q + c);\n    L[w >> 2] = q >> l;\n    f(m, w + 4, q + c);\n    null !== n && n.push(X, w);\n    return w;\n  }, argPackAdvance:8, readValueFromPointer:Ga, l:function(n) {\n    X(n);\n  },});\n}, _embind_register_void:function(a, c) {\n  c = R(c);\n  T(a, {M:!0, name:c, argPackAdvance:0, fromWireType:function() {\n  }, toWireType:function() {\n  },});\n}, abort:function() {\n  y("");\n}, emscripten_memcpy_big:function(a, c, b) {\n  C.copyWithin(a, c, c + b);\n}, emscripten_resize_heap:function(a) {\n  var c = C.length;\n  a >>>= 0;\n  if (2147483648 < a) {\n    return !1;\n  }\n  for (var b = 1; 4 >= b; b *= 2) {\n    var d = c * (1 + 0.2 / b);\n    d = Math.min(d, a + 100663296);\n    var f = Math;\n    d = Math.max(a, d);\n    f = f.min.call(f, 2147483648, d + (65536 - d % 65536) % 65536);\n    a: {\n      try {\n        z.grow(f - G.byteLength + 65535 >>> 16);\n        ka();\n        var k = 1;\n        break a;\n      } catch (h) {\n      }\n      k = void 0;\n    }\n    if (k) {\n      return !0;\n    }\n  }\n  return !1;\n}, environ_get:function(a, c) {\n  var b = 0;\n  Ra().forEach(function(d, f) {\n    var k = c + b;\n    f = L[a + 4 * f >> 2] = k;\n    for (k = 0; k < d.length; ++k) {\n      H[f++ >> 0] = d.charCodeAt(k);\n    }\n    H[f >> 0] = 0;\n    b += d.length + 1;\n  });\n  return 0;\n}, environ_sizes_get:function(a, c) {\n  var b = Ra();\n  L[a >> 2] = b.length;\n  var d = 0;\n  b.forEach(function(f) {\n    d += f.length + 1;\n  });\n  L[c >> 2] = d;\n  return 0;\n}, fd_close:function() {\n  return 52;\n}, fd_seek:function() {\n  return 70;\n}, fd_write:function(a, c, b, d) {\n  for (var f = 0, k = 0; k < b; k++) {\n    var h = L[c >> 2], l = L[c + 4 >> 2];\n    c += 8;\n    for (var n = 0; n < l; n++) {\n      var m = C[h + n], q = Ta[a];\n      0 === m || 10 === m ? ((1 === a ? da : v)(ha(q, 0)), q.length = 0) : q.push(m);\n    }\n    f += l;\n  }\n  L[d >> 2] = f;\n  return 0;\n}, strftime_l:function(a, c, b, d) {\n  return Xa(a, c, b, d);\n}}, Y = function() {\n  function a(b) {\n    g.asm = b.exports;\n    z = g.asm.memory;\n    ka();\n    ma.unshift(g.asm.__wasm_call_ctors);\n    M--;\n    g.monitorRunDependencies && g.monitorRunDependencies(M);\n    0 == M && (null !== N && (clearInterval(N), N = null), O && (b = O, O = null, b()));\n  }\n  var c = {env:$a, wasi_snapshot_preview1:$a,};\n  M++;\n  g.monitorRunDependencies && g.monitorRunDependencies(M);\n  if (g.instantiateWasm) {\n    try {\n      return g.instantiateWasm(c, a);\n    } catch (b) {\n      v("Module.instantiateWasm callback failed with error: " + b), t(b);\n    }\n  }\n  c = ra(c);\n  a(c[0]);\n  return g.asm;\n}();\ng.___wasm_call_ctors = Y.__wasm_call_ctors;\ng._parseToMiniSdp = Y.parseToMiniSdp;\ng._getBuffer = Y.getBuffer;\ng._loadMiniSdpToSdp = Y.loadMiniSdpToSdp;\nvar Za = g._malloc = Y.malloc;\ng.___getTypeName = Y.__getTypeName;\ng.__embind_initialize_bindings = Y._embind_initialize_bindings;\ng.___errno_location = Y.__errno_location;\nvar X = g._free = Y.free, ab = g.stackSave = Y.stackSave, bb = g.stackRestore = Y.stackRestore, cb = g.stackAlloc = Y.stackAlloc;\ng.___cxa_is_pointer_type = Y.__cxa_is_pointer_type;\ng.dynCall_viijii = Y.dynCall_viijii;\ng.dynCall_iiiiij = Y.dynCall_iiiiij;\ng.dynCall_iiiiijj = Y.dynCall_iiiiijj;\ng.dynCall_iiiiiijj = Y.dynCall_iiiiiijj;\ng.dynCall_jiji = Y.dynCall_jiji;\ng.UTF8ToString = A;\ng.ccall = function(a, c, b, d) {\n  var f = {string:m => {\n    var q = 0;\n    if (null !== m && void 0 !== m && 0 !== m) {\n      var w = (m.length << 2) + 1;\n      q = cb(w);\n      D(m, C, q, w);\n    }\n    return q;\n  }, array:m => {\n    var q = cb(m.length);\n    H.set(m, q);\n    return q;\n  }};\n  a = g["_" + a];\n  var k = [], h = 0;\n  if (d) {\n    for (var l = 0; l < d.length; l++) {\n      var n = f[b[l]];\n      n ? (0 === h && (h = ab()), k[l] = n(d[l])) : k[l] = d[l];\n    }\n  }\n  b = a.apply(null, k);\n  return b = function(m) {\n    0 !== h && bb(h);\n    return "string" === c ? A(m) : "boolean" === c ? !!m : m;\n  }(b);\n};\ng.intArrayFromString = Wa;\ng.allocateUTF8 = function(a) {\n  var c = E(a) + 1, b = Za(c);\n  b && D(a, H, b, c);\n  return b;\n};\nvar Z;\nO = function db() {\n  Z || eb();\n  Z || (O = db);\n};\nfunction eb() {\n  function a() {\n    if (!Z && (Z = !0, g.calledRun = !0, !ea)) {\n      Q(ma);\n      aa(g);\n      if (g.onRuntimeInitialized) {\n        g.onRuntimeInitialized();\n      }\n      if (g.postRun) {\n        for ("function" == typeof g.postRun && (g.postRun = [g.postRun]); g.postRun.length;) {\n          var c = g.postRun.shift();\n          na.unshift(c);\n        }\n      }\n      Q(na);\n    }\n  }\n  if (!(0 < M)) {\n    if (g.preRun) {\n      for ("function" == typeof g.preRun && (g.preRun = [g.preRun]); g.preRun.length;) {\n        oa();\n      }\n    }\n    Q(la);\n    0 < M || (g.setStatus ? (g.setStatus("Running..."), setTimeout(function() {\n      setTimeout(function() {\n        g.setStatus("");\n      }, 1);\n      a();\n    }, 1)) : a());\n  }\n}\nif (g.preInit) {\n  for ("function" == typeof g.preInit && (g.preInit = [g.preInit]); 0 < g.preInit.length;) {\n    g.preInit.pop()();\n  }\n}\neb();\n\n\n\n  return Module\n}\n);\n})();\nif (typeof exports === \'object\' && typeof module === \'object\')\n  module.exports = Module;\nelse if (typeof define === \'function\' && define[\'amd\'])\n  define([], function() { return Module; });\nelse if (typeof exports === \'object\')\n  exports["Module"] = Module;\n' }, "5668": function _(e, t) { "use strict"; var r = this && this.__assign || function () { return (r = Object.assign || function (e) { for (var t, A = 1, r = arguments.length; A < r; A++)for (var i in t = arguments[A]) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]); return e }).apply(this, arguments) }; Object.defineProperty(t, "__esModule", { "value": !0 }), t.ZegoAudioEffectPlayer = void 0; var i = function () { function A(e, t) { this.zegoWebRTC = e, this.stream = t } return A.prototype.start = function (e, t, A, i) { this.zegoWebRTC.playEffect(r({ "stream": this.stream, "effectID": e }, t || {}), A, i) }, A.prototype.stop = function (e) { return this.zegoWebRTC.stopEffect(this.stream, e) }, A.prototype.pause = function (e) { return this.zegoWebRTC.pauseEffect(this.stream, e) }, A.prototype.resume = function (e) { return this.zegoWebRTC.resumeEffect(this.stream, e) }, A.prototype.setVolume = function (e, t, A) { return this.zegoWebRTC.setEffectVolume(this.stream, t, e, A) }, A.prototype.getTotalDuration = function (e) { return this.zegoWebRTC.getEffectDuration(e) }, A.prototype.getCurrentProgress = function (e) { return this.zegoWebRTC.getEffectCurrentProgress(this.stream, e) }, A.prototype.seekTo = function (e, t) { return this.zegoWebRTC.seekAudioEffect(this.stream, e, t) }, A }(); t.ZegoAudioEffectPlayer = i }, "8874": function _(e, t) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.Segmentation = void 0, function (e) { e[e.PortraitSegmentation = 0] = "PortraitSegmentation" }(t.Segmentation || (t.Segmentation = {})) }, "5783": function _(e, t) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.ZegoCopyrightedMusicVendorID = t.ZegoCopyrightedMusicResourceType = void 0, function (e) { e[e.Song = 0] = "Song", e[e.Accompaniment = 1] = "Accompaniment", e[e.AccompanimentClip = 2] = "AccompanimentClip" }(t.ZegoCopyrightedMusicResourceType || (t.ZegoCopyrightedMusicResourceType = {})), function (e) { e[e.Vendor2 = 2] = "Vendor2" }(t.ZegoCopyrightedMusicVendorID || (t.ZegoCopyrightedMusicVendorID = {})) }, "7896": function _(e, t, r) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.ZegoRealTimeSequentialDataManager = void 0; var i = r(4475), o = function () { function A(e, t) { this.dataChannelManager = new i.DataChannelListener(e, t) } return A.prototype.startBroadcasting = function (e) { return this.dataChannelManager.startBroadcasting(e) }, A.prototype.stopBroadcasting = function (e) { return this.dataChannelManager.stopBroadcasting(e) }, A.prototype.sendRealTimeSequentialData = function (e, t) { return this.dataChannelManager.sendRealTimeSequentialData(e, t) }, A.prototype.startSubscribing = function (e) { return this.dataChannelManager.startSubscribing(e) }, A.prototype.stopSubscribing = function (e) { return this.dataChannelManager.stopSubscribing(e) }, A.prototype.on = function (e, t) { this.dataChannelManager.on(e, t) }, A.prototype.off = function (e, t) { this.dataChannelManager.off(e, t) }, A }(); t.ZegoRealTimeSequentialDataManager = o }, "694": function _(e, t, A) { "use strict"; var r = this && this.__createBinding || (Object.create ? function (e, t, A, r) { void 0 === r && (r = A); var i = Object.getOwnPropertyDescriptor(t, A); i && !("get" in i ? !t.__esModule : i.writable || i.configurable) || (i = { "enumerable": !0, "get": function get() { return t[A] } }), Object.defineProperty(e, r, i) } : function (e, t, A, r) { void 0 === r && (r = A), e[r] = t[A] }), i = this && this.__exportStar || function (e, t) { for (var A in e) "default" === A || Object.prototype.hasOwnProperty.call(t, A) || r(t, e, A) }; Object.defineProperty(t, "__esModule", { "value": !0 }), t.ZegoSEIType = t.ZegoFontType = t.ZegoMixStreamRenderMode = t.Segmentation = t.ZegoLowlightEnhancementMode = void 0, function (e) { e[e.Off = 0] = "Off", e[e.On = 1] = "On" }(t.ZegoLowlightEnhancementMode || (t.ZegoLowlightEnhancementMode = {})), function (e) { e[e.PortraitSegmentation = 0] = "PortraitSegmentation" }(t.Segmentation || (t.Segmentation = {})), function (e) { e[e.AspectFill = 0] = "AspectFill", e[e.AspectFit = 1] = "AspectFit" }(t.ZegoMixStreamRenderMode || (t.ZegoMixStreamRenderMode = {})), function (e) { e[e.ZegoFontTypeSourceHanSans = 0] = "ZegoFontTypeSourceHanSans", e[e.ZegoFontTypeAlibabaSans = 1] = "ZegoFontTypeAlibabaSans", e[e.ZegoFontTypePangMenZhengDaoTitle = 2] = "ZegoFontTypePangMenZhengDaoTitle", e[e.ZegoFontTypeHappyZcool = 3] = "ZegoFontTypeHappyZcool" }(t.ZegoFontType || (t.ZegoFontType = {})), function (e) { e[e.ZegoDefined = 0] = "ZegoDefined", e[e.UserUnregister = 1] = "UserUnregister" }(t.ZegoSEIType || (t.ZegoSEIType = {})), i(A(8641), t), i(A(5783), t), i(A(8874), t) }, "7300": function _(e, t, r) { "use strict"; var i = this && this.__awaiter || function (e, t, A, r) { return new (A || (A = Promise))(function (i, o) { function n(e) { try { a(r.next(e)) } catch (e) { o(e) } } function s(e) { try { a(r.throw(e)) } catch (e) { o(e) } } function a(e) { var t; e.done ? i(e.value) : (t = e.value, t instanceof A ? t : new A(function (e) { e(t) })).then(n, s) } a((r = r.apply(e, t || [])).next()) }) }, o = this && this.__generator || function (e, t) { var A, r, i, o, n = { "label": 0, "sent": function sent() { if (1 & i[0]) throw i[1]; return i[1] }, "trys": [], "ops": [] }; return o = { "next": s(0), "throw": s(1), "return": s(2) }, "function" == typeof Symbol && (o[Symbol.iterator] = function () { return this }), o; function s(s) { return function (a) { return function (s) { if (A) throw new TypeError("Generator is already executing."); for (; o && (o = 0, s[0] && (n = 0)), n;)try { if (A = 1, r && (i = 2 & s[0] ? r.return : s[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, s[1])).done) return i; switch (r = 0, i && (s = [2 & s[0], i.value]), s[0]) { case 0: case 1: i = s; break; case 4: return n.label++, { "value": s[1], "done": !1 }; case 5: n.label++, r = s[1], s = [0]; continue; case 7: s = n.ops.pop(), n.trys.pop(); continue; default: if (!((i = (i = n.trys).length > 0 && i[i.length - 1]) || 6 !== s[0] && 2 !== s[0])) { n = 0; continue } if (3 === s[0] && (!i || s[1] > i[0] && s[1] < i[3])) { n.label = s[1]; break } if (6 === s[0] && n.label < i[1]) { n.label = i[1], i = s; break } if (i && n.label < i[2]) { n.label = i[2], n.ops.push(s); break } i[2] && n.ops.pop(), n.trys.pop(); continue }s = t.call(e, n) } catch (e) { s = [6, e], r = 0 } finally { A = i = 0 } if (5 & s[0]) throw s[1]; return { "value": s[0] ? s[1] : void 0, "done": !0 } }([s, a]) } } }, n = this && this.__importDefault || function (e) { return e && e.__esModule ? e : { "default": e } }; Object.defineProperty(t, "__esModule", { "value": !0 }), t.ZegoExpressRangeAudio = void 0; var s = n(r(1301)), a = function () { function A(e, t) { this.zegoAudioListener = s.default.getInstance(e, t) } return A.getInstance = function (e, t) { if (!A.instance) { if (!e) throw Error("create instance failed."); A.instance = new A(e, t) } return A.instance }, A.prototype.enableAiDenoise = function (e) { return this.zegoAudioListener.enableAiDenoise(e) }, A.prototype.enableAudioSourceUpdateChecker = function (e, t) { this.zegoAudioListener.enableAudioSourceUpdateChecker(e, t) }, A.prototype.on = function (e, t) { return this.zegoAudioListener.on(e, t) }, A.prototype.off = function (e, t) { return this.zegoAudioListener.off(e, t) }, A.prototype.setAudioReceiveRange = function (e) { this.zegoAudioListener.setAudioReceiveRange(e) }, A.prototype.updateSelfPosition = function (e, t, A, r) { this.zegoAudioListener.updateSelfPosition(e, t, A, r) }, A.prototype.updateAudioSource = function (e, t) { this.zegoAudioListener.updateAudioSource(e, t) }, A.prototype.enableSpatializer = function (e) { return this.zegoAudioListener.enableSpatializer(e) }, A.prototype.enableMicrophone = function (e) { return this.zegoAudioListener.enableMicrophone(e) }, A.prototype.selectMicrophone = function (e) { return i(this, void 0, void 0, function () { return o(this, function (t) { switch (t.label) { case 0: return [4, this.zegoAudioListener.selectMic(e)]; case 1: return [2, t.sent()] } }) }) }, A.prototype.selectSpeaker = function (e) { return this.zegoAudioListener.selectSpeaker(e) }, A.prototype.enableSpeaker = function (e) { return this.zegoAudioListener.enableSpeaker(e) }, A.prototype.setRangeAudioCustomMode = function (e, t) { this.zegoAudioListener.setCustomMode(e, t) }, A.prototype.setRangeAudioMode = function (e) { this.zegoAudioListener.setRangeAudioMode(e) }, A.prototype.setTeamID = function (e) { this.zegoAudioListener.setRangeAudioTeamID(e) }, A.prototype.setPositionUpdateFrequency = function (e) { return this.zegoAudioListener.setPositionUpdateFrequency(e) }, A.prototype.setRangeAudioVolume = function (e) { return this.zegoAudioListener.setAudioVolume(e) }, A.prototype.setVoiceChangerPreset = function (e) { return this.zegoAudioListener.setVoiceChangerPreset(e) }, A.prototype.isAudioContextRunning = function () { return "running" === this.zegoAudioListener.getAudioContextState() }, A.prototype.resumeAudioContext = function () { return this.zegoAudioListener.resumeAudioContext() }, A.prototype.setStreamVocalRange = function (e, t) { this.zegoAudioListener.setStreamVocalRange(e, t) }, A.prototype.updateStreamPosition = function (e, t) { this.zegoAudioListener.updateStreamPosition(e, t) }, A.prototype.setCustomSourceVocalRange = function (e, t) { this.zegoAudioListener.setStreamVocalRange(e, t) }, A.prototype.updateCustomSourcePosition = function (e, t) { this.zegoAudioListener.updateStreamPosition(e, t) }, A }(); t.ZegoExpressRangeAudio = a }, "8641": function _(e, t) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.ZegoRangeAudioListenMode = t.ZegoRangeAudioSpeakMode = t.ZegoRangeAudioMode = t.ZegoRangeAudioMicrophoneState = void 0, function (e) { e[e.Off = 0] = "Off", e[e.TurningOn = 1] = "TurningOn", e[e.On = 2] = "On" }(t.ZegoRangeAudioMicrophoneState || (t.ZegoRangeAudioMicrophoneState = {})), function (e) { e[e.World = 0] = "World", e[e.Team = 1] = "Team", e[e.SecretTeam = 2] = "SecretTeam" }(t.ZegoRangeAudioMode || (t.ZegoRangeAudioMode = {})), function (e) { e[e.All = 0] = "All", e[e.World = 1] = "World", e[e.Team = 2] = "Team" }(t.ZegoRangeAudioSpeakMode || (t.ZegoRangeAudioSpeakMode = {})), function (e) { e[e.All = 0] = "All", e[e.World = 1] = "World", e[e.Team = 2] = "Team" }(t.ZegoRangeAudioListenMode || (t.ZegoRangeAudioListenMode = {})) }, "8913": function _(e, t) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.ZegoStreamView = void 0; var A = function () { function A(e) { this.v = e } return A.prototype.takeStreamSnapshot = function (e) { return this.v.takeStreamSnapshot(e) }, A.prototype.play = function (e, t) { return this.v.play(e, t) }, A.prototype.stop = function () { return this.v.stop() }, A.prototype.resume = function () { this.v.resume() }, A.prototype.setAudioMuted = function (e) { return this.v.setAudioMuted(e) }, A.prototype.setVideoMuted = function (e) { return this.v.setVideoMuted(e) }, A.prototype.useAudioOutputDevice = function (e) { return this.v.useAudioOut(e) }, A.prototype.setVolume = function (e) { return this.v.setVolume(e) }, A.prototype.on = function (e, t) { return this.v.on(e, t) }, A.prototype.off = function (e, t) { return this.v.off(e, t) }, A }(); t.ZegoStreamView = A }, "2708": function _(A, r, o) { "use strict"; var n, s = this && this.__extends || (n = function i(e, t) { return (n = Object.setPrototypeOf || { "__proto__": [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var A in t) Object.prototype.hasOwnProperty.call(t, A) && (e[A] = t[A]) })(e, t) }, function (e, A) { if ("function" != typeof A && null !== A) throw new TypeError("Class extends value " + String(A) + " is not a constructor or null"); function t() { this.constructor = e } n(e, A), e.prototype = null === A ? Object.create(A) : (t.prototype = A.prototype, new t) }), a = this && this.__importDefault || function (e) { return e && e.__esModule ? e : { "default": e } }; Object.defineProperty(r, "__esModule", { "value": !0 }), r.ZegoExpressEngine = r.WebRTCUtil = void 0; var c = o(2192), g = a(o(3126)), u = a(o(9869)), l = a(o(2147)), h = a(o(563)), d = a(o(2083)), C = a(o(375)), I = o(9317), E = o(1123), p = o(9045); c.ZegoExpressEngine.use(g.default), c.ZegoExpressEngine.use(u.default), c.ZegoExpressEngine.use(l.default), c.ZegoExpressEngine.use(h.default), c.ZegoExpressEngine.use(d.default), c.ZegoExpressEngine.use(C.default), c.ZegoExpressEngine.use(I.RangeAudio), c.ZegoExpressEngine.use(E.DataChannel), c.ZegoExpressEngine.use(p.BeautyEffect); var f = o(2192); Object.defineProperty(r, "WebRTCUtil", { "enumerable": !0, "get": function get() { return f.WebRTCUtil } }); var B = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return s(e, t), e }(c.ZegoExpressEngine); r.ZegoExpressEngine = B }, "2192": function _(A, r, o) { "use strict"; var n, s = this && this.__extends || (n = function i(e, t) { return (n = Object.setPrototypeOf || { "__proto__": [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var A in t) Object.prototype.hasOwnProperty.call(t, A) && (e[A] = t[A]) })(e, t) }, function (e, A) { if ("function" != typeof A && null !== A) throw new TypeError("Class extends value " + String(A) + " is not a constructor or null"); function t() { this.constructor = e } n(e, A), e.prototype = null === A ? Object.create(A) : (t.prototype = A.prototype, new t) }); Object.defineProperty(r, "__esModule", { "value": !0 }), r.WebRTCUtil = r.ZegoExpressEngine = void 0; var a = o(4119), c = o(1916), g = o(5668), u = function (t) { function e(e, A, r) { var i; return a.ZegoExpressWebRTMEngine.version = "2.25.6", (i = t.call(this, e, A, 0, arguments[2]) || this).zegoWebRTC = new c.ZegoWebRTC(i.logger, i.dataReport, i.reporter, i.zegoWebRTM, 0, null == r ? void 0 : r.scenario), i } return s(e, t), e.prototype.setEngineConfig = function (e) { this.zegoWebRTC.setEngineConfig(e) }, e.prototype.setRoomScenario = function (e) { return this.zegoWebRTC.setRoomScenario(e) }, e.prototype.setSEIConfig = function (e) { this.zegoWebRTC.setSEIConfig(e) }, e.use = function (e) { a.ZegoExpressWebRTMEngine.use(e), c.ZegoWebRTC.use(e) }, e.prototype.checkSystemRequirements = function (e, t) { return void 0 === t && (t = 0), this.zegoWebRTC.checkSystemRequirements(t, e) }, e.prototype.off = function (e, t) { return this.zegoWebRTM.stateCenter.listenerList[e] ? this.zegoWebRTM.off(e, t) : !!this.zegoWebRTC.stateCenter.listenerList[e] && this.zegoWebRTC.off(e, t) }, e.prototype.on = function (e, t) { return this.zegoWebRTM.stateCenter.listenerList[e] ? this.zegoWebRTM.on(e, t) : !!this.zegoWebRTC.stateCenter.listenerList[e] && this.zegoWebRTC.on(e, t) }, e.prototype.createStream = function (e) { return this.zegoWebRTC.createStream(e) }, e.prototype.getPublishingStreamQuality = function (e) { return this.zegoWebRTC.getPublishingStreamQuality(e) }, e.prototype.getElectronScreenSources = function () { return this.zegoWebRTC.getElectronScreenSources() }, e.prototype.destroyStream = function (e) { return this.zegoWebRTC.destroyStream(e) }, e.prototype.startPublishingStream = function (e, t, A) { return this.zegoWebRTC.startPublishingStream(e, t, A) }, e.prototype.stopPublishingStream = function (e) { return this.zegoWebRTC.stopPublishingStream(e) }, e.prototype.sendSEI = function (e, t) { return this.zegoWebRTC.sendSEI(e, t) }, e.prototype.setVideoConfig = function (e, t) { return this.zegoWebRTC.setVideoConfig(e, t) }, e.prototype.setAudioConfig = function (e, t) { return this.zegoWebRTC.setAudioConfig(e, t) }, e.prototype.replaceTrack = function (e, t) { return this.zegoWebRTC.replaceTrack(e, t) }, e.prototype.addTrack = function (e, t) { return this.zegoWebRTC.addTrack(e, t) }, e.prototype.removeTrack = function (e, t) { return this.zegoWebRTC.removeTrack(e, t) }, e.prototype.setCaptureVolume = function (e, t) { return this.zegoWebRTC.setCaptureVolume(e, t) }, e.prototype.setDummyCaptureImagePath = function (e, t) { return this.zegoWebRTC.setDummyCaptureImagePath(e, t) }, e.prototype.setStreamExtraInfo = function (e, t) { return this.zegoWebRTC.setStreamExtraInfo(e, t) }, e.prototype.enableVideoCaptureDevice = function (e, t) { return this.zegoWebRTC.enableCameraCapturing(e, t) }, e.prototype.addPublishCdnUrl = function (e, t) { return 3 === arguments.length ? this.zegoWebRTC.addPublishCdnUrl(arguments[0], arguments[2]) : this.zegoWebRTC.addPublishCdnUrl(e, t) }, e.prototype.removePublishCdnUrl = function (e, t) { return 3 === arguments.length ? this.zegoWebRTC.removePublishCdnUrl(arguments[0], arguments[2]) : this.zegoWebRTC.removePublishCdnUrl(e, t) }, e.prototype.mutePublishStreamVideo = function (e, t, A) { return this.zegoWebRTC.mutePublishStreamVideo(e, t, A) }, e.prototype.mutePublishStreamAudio = function (e, t) { return this.zegoWebRTC.mutePublishStreamAudio(e, t) }, e.prototype.setEffectsBeauty = function (e, t, A) { return this.zegoWebRTC.setBeautyEffect(e, t, A) }, e.prototype.setLowlightEnhancement = function (e, t) { return this.zegoWebRTC.setLowlightEnhance(e, t) }, e.prototype.enableDualStream = function (e) { return this.zegoWebRTC.enableDualStream(e) }, e.prototype.setLowStreamParameter = function (e, t) { return this.zegoWebRTC.setLowStreamParameter(e, t) }, e.prototype.enableHardwareEncoder = function (e) { this.zegoWebRTC.enableVideoHardwareEncoder(e) }, e.prototype.enableAutoSwitchDevice = function (e) { return this.zegoWebRTC.enableAutoSwitchDevice(e) }, e.prototype.initBackgroundModule = function (e, t) { return this.zegoWebRTC.initBackgroundModule(e, t) }, e.prototype.setBackgroundBlurOptions = function (e, t) { return this.zegoWebRTC.setBackgroundBlurOptions(e, t) }, e.prototype.setVirtualBackgroundOptions = function (e, t) { return this.zegoWebRTC.setVirtualBackgroundOptions(e, t) }, e.prototype.enableBackgroundProcess = function (e, t, A) { return this.zegoWebRTC.enableBackgroundProcess(e, t, A) }, e.prototype.setVoiceChangerPreset = function (e, t) { return this.zegoWebRTC.setVoiceChangerPreset(e, t) }, e.prototype.enableAiDenoise = function (e, t) { return this.zegoWebRTC.enableAiDenoise(e, t) }, e.prototype.startPlayingStream = function (e, t) { return this.zegoWebRTC.startPlayingStream(e, t) }, e.prototype.stopPlayingStream = function (e) { return this.zegoWebRTC.stopPlayingStream(e) }, e.prototype.mutePlayStreamVideo = function (e, t) { return this.zegoWebRTC.mutePlayStreamVideo(e, t) }, e.prototype.mutePlayStreamAudio = function (e, t) { return this.zegoWebRTC.mutePlayStreamAudio(e, t) }, e.prototype.getPlayingStreamQuality = function (e) { return this.zegoWebRTC.getPlayingStreamQuality(e) }, e.prototype.createLocalStreamView = function (e) { return this.zegoWebRTC.createLocalViewer(e) }, e.prototype.createRemoteStreamView = function (e) { return this.zegoWebRTC.createRemoteViewer(e) }, e.prototype.startMixerTask = function (e) { return this.zegoWebRTC.startMixerTask(e) }, e.prototype.stopMixerTask = function (e) { return this.zegoWebRTC.stopMixerTask(e) }, e.prototype.setMixerTaskConfig = function (e) { return this.zegoWebRTC.setMixerTaskConfig(e) }, e.prototype.startMixingAudio = function (e, t) { return this.zegoWebRTC.startMixingAudio(e, t) }, e.prototype.stopMixingAudio = function (e, t) { return this.zegoWebRTC.stopMixingAudio(e, t) }, e.prototype.setMixingAudioVolume = function (e, t, A) { return this.zegoWebRTC.setMixingAudioVolume(e, t, A) }, e.prototype.createAudioEffectPlayer = function (e) { if (e instanceof MediaStream) return new g.ZegoAudioEffectPlayer(this.zegoWebRTC, e); throw Error("Param localStream is not instance of MediaStream.") }, e.prototype.loadAudioEffect = function (e, t) { var A = this; return new Promise(function (r, i) { A.zegoWebRTC.preloadEffect(e, t, function (t) { t && i(t), r(e) }) }) }, e.prototype.unloadAudioEffect = function (e) { return this.zegoWebRTC.unloadEffect(e) }, e.prototype.enumDevices = function () { return this.zegoWebRTC.enumDevices() }, e.prototype.getCameras = function () { return this.zegoWebRTC.getCameras() }, e.prototype.getMicrophones = function () { return this.zegoWebRTC.getMicrophones() }, e.prototype.getSpeakers = function () { return this.zegoWebRTC.getSpeakers() }, e.prototype.useVideoDevice = function (e, t) { return this.zegoWebRTC.useVideoDevice(e, t) }, e.prototype.useAudioDevice = function (e, t) { return this.zegoWebRTC.useAudioDevice(e, t) }, e.prototype.useAudioOutputDevice = function (e, t) { return this.zegoWebRTC.setAudioOutputDevice(e, t) }, e.prototype.setSoundLevelDelegate = function (e, t, A) { return this.zegoWebRTC.setSoundLevelDelegate(e, t, null == A ? void 0 : A.enableInBackground) }, e.prototype.isMicrophoneMuted = function () { return this.zegoWebRTC.isMicrophoneMuted() }, e.prototype.muteMicrophone = function (e) { return this.zegoWebRTC.muteMicrophone(e) }, e.prototype.createRangeAudioInstance = function () { return this.zegoWebRTC.createRangeAudioInstance() }, e.prototype.createRealTimeSequentialDataManager = function (e) { return this.zegoWebRTC.createRealTimeSequentialDataManager(e) }, e.prototype.destroyRealTimeSequentialDataManager = function (e) { this.zegoWebRTC.destroyRealTimeSequentialDataManager(e) }, e.prototype.createCopyrightedMusic = function () { return this.zegoWebRTC.createCopyrightedMusic() }, e.prototype.checkVideoTrackIsActive = function (e) { return this.zegoWebRTC.checkVideoTrackIsActive(e) }, e.prototype.checkAudioTrackIsActive = function (e) { return this.zegoWebRTC.checkAudioTrackIsActive(e) }, e.prototype.destroyCopyrightedMusic = function () { return this.zegoWebRTC.destroyCopyrightedMusic() }, e.prototype.destroyEngine = function () { return this.zegoWebRTC.destroyEngine() }, e }(a.ZegoExpressWebRTMEngine); r.ZegoExpressEngine = u; var l = o(1018); Object.defineProperty(r, "WebRTCUtil", { "enumerable": !0, "get": function get() { return l.WebRTCUtil } }) }, "9585": function _(e, t) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }); var A = function () { function A() { this.handlerListMap = { "microphoneStateUpdate": [], "audioSourceWithinRangeUpdate": [], "publishQualityUpdate": [], "playQualityUpdate": [], "aiDenoiseError": [], "voiceChangerError": [] } } return A.getInstance = function () { return A.instance || (A.instance = new A), A.instance }, A.prototype.addEventHandler = function (e, t) { if (!this.handlerListMap[e]) return !1; if ("function" != typeof t) throw new Error("Params callBack is not a Function"); return -1 == this.handlerListMap[e].indexOf(t) && this.handlerListMap[e].push(t), !0 }, A.prototype.removeEventHandler = function (e, t) { return !!this.handlerListMap[e] && (this.handlerListMap[e] = t ? this.handlerListMap[e].filter(function (e) { return e !== t }) : [], !0) }, A.prototype.emit = function (e) { for (var t = [], A = 1; A < arguments.length; A++)t[A - 1] = arguments[A]; this.handlerListMap[e] && this.handlerListMap[e].forEach(function (A) { try { setTimeout(function () { A.apply(void 0, t) }, 0) } catch (t) { console.error('Fail to execute callback of event "'.concat(e, '" : ').concat(t)) } }) }, A }(); t.default = A }, "93": function _(e, t) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.ZEGO_WEBRTC_ACTION = void 0, function (e) { e.CONSTRUCTOR = "zc.0", e.DESTROY_ENGINE = "zc.1", e.CHECK_SUPPORT = "zc.csr", e.CREATE_STREAM = "zc.cs", e.DESTROY_STREAM = "zc.ds", e.START_PUBLISHING_STREAM = "zc.sps.0", e.START_PLAYING_STREAM = "zc.sps.1", e.STOP_PUBLISHING_STREAM = "zc.sps.0.0", e.STOP_PLAYING_STREAM = "zc.sps.1.0", e.SET_MEDIA_SIDE_FLAGS = "zc.smsg.0", e.SEND_MEDIA_SIDE_INFO = "zc.smsi.0", e.ON_STREAM = "zc.os", e.ON_PUSH_STREAM_UPDATE = "zc.opsu", e.BIND_WINDOW_LISTENER = "zc.wl", e.SET_AUDIO_OUTPUT = "zc.sao", e.SET_CUSTOM_SIGNAL_URL = "zc.scsu", e.SET_TURN_OVER_TCP_ONLY = "zc.stoto", e.RDH_ACTIVE = "zc.rdh.a", e.RDH_MAX_TIME = "zc.rdh.m", e.RDH_WEBRTC_URL_RSP = "zc.rdh.hfwur", e.PUBLISH_STATE_HANDLE = "zc.psh.0", e.PLAY_STATE_HANDLE = "zc.psh.1", e.RETRYSTREAMHANDLER_RETRY_NEW_GW_NODE = "zc.tsh.rngn.0", e.RETRYSTREAMHANDLER_RETRY_NEXT_GW_NODE = "zc.tsh.rngn.1", e.STATECENTER_ACTION_LISTENER = "zc.sc.al", e.STATECENTER_SET_SETTING = "zc.sc.ss", e.SIGNAL_SET_SESSION_INFO = "zc.s.ssi", e.SIGNAL_RESET_CONNECT_TIMER = "zc.s.rct", e.SIGNAL_RESET_LOGIN_TIMER = "zc.s.rlt", e.SIGNAL_BIND_WEBSOCKET_HANDLE = "zc.s.bwh", e.SIGNAL_RESET_CHECK_MESSAGE = "zc.s.rcm", e.SIGNAL_UPDATE_TOKEN = "zc.s.ut", e.SIGNAL_DISCONNECTCALLBACK = "zc.s.dcb", e.SIGNAL_SEND_MESSAGE_WITH_CALLBACK = "zc.s.smwc", e.SIGNAL_CONNECT_SERVER = "zc.s.cs.0", e.SIGNAL_START_CONNECT_TIMER = "zc.s.sct", e.SIGNAL_DISCONNECT_SERVER = "zc.s.dc", e.SIGNAL_CREATE_SESSION = "zc.s.cs.1", e.SIGNAL_REMOVE_SESSION = "zc.s.rs", e.SIGNAL_SEND_REMOVE_SESSION = "zc.s.srs", e.SIGNAL_SEND_MESSAGE = "zc.s.sm", e.SIGNAL_HANDLE_RESPOND_DATA = "zc.s.hrd", e.SIGNAL_ADD_SESSION = "zc.s.as", e.SIGNAL_HANDLE_PUSH_DATA = "zc.s.hpd", e.SIGNAL_HANDLE_PUSH_RESET_SESSION_DATA = "zc.s.hprsd", e.SIGNAL_SEND_MEDIA_DESC = "zc.s.smd", e.SIGNAL_SEND_CANDIDATE_INFO = "zc.s.sci", e.SIGNAL_SEND_MEDIA_DESC_ACK = "zc.s.smda", e.SIGNAL_SEND_CANDIDATE_INFO_ACK = "zc.s.scia", e.SIGNAL_SEND_CLOSE_SESSION_ACK = "zc.s.scsa", e.SIGNAL_SEND_RESET_SESSION_ACK = "zc.s.srsa", e.SIGNAL_REGISTER_PUSH_CALLBACK = "zc.s.rpc", e.SIGNAL_CHECK_MESSAGE_TIMEOUT = "zc.s.cmt", e.SIGNAL_SEND_HEARTBEAT = "zc.s.sh", e.SIGNAL_QUALITY_REPORT = "zc.s.qr", e.SIGNAL_SEND_STREAM_STATUS = "zc.s.sss", e.SIGNAL_ACTIVE_PLAY_VIDEO_STREAM = "zc.s.apvs", e.SIGNAL_ACTIVE_PLAY_AUDIO_STREAM = "zc.s.apas", e.SIGNAL_SEND_BROADCAST_STATUS = "zc.s.sbs", e.SIGNAL_SEND_NET_PROBE = "zc.s.snp", e.SIGNAL_SEND_NET_QUALITY_INFO_PUSH_ACK = "zc.s.npa", e.STREAMCENTER_SET_STREAM_GW_NODE = "zsc.ssgn", e.STREAMCENTER_CLEAR_CACHED_GWNODES_LIST = "zsc.ccgl", e.STREAMCENTER_CHECK_CACHED_NODES_USE = "zsc.ccns", e.STREAMCENTER_UPDATE_CACHED_GWNODES_LIST = "zsc.ucgl", e.PUBLISHER_START_PUBLISH = "zc.p.0.sp.0", e.PUBLISHER_PUBLISH_SUCCESS = "zc.p.ps", e.PUBLISHER_ON_CREATE_PUBLISH_SESSION_SUCCESS = "zc.p.0.ocpss", e.PUBLISHER_COMPARE_PUSH_SEQS = "zc.p.cps.0", e.PUBLISHER_HANDLE_CREATE_SESSION_WITH_SDP = "zc.p.0.hcsws", e.PUBLISHER_ON_CREATE_OFFER_SUCCESS = "zc.p.0.ocos", e.PUBLISHER_ON_SET_LOCAL_DESCRIPTION_SUCCESS = "zc.p.0.oslds", e.PUBLISHER_ON_GET_REMOTE_DESCRIPTION = "zc.p.0.ogrd", e.PUBLISHER_ON_RECV_MEDIA_DESC = "zc.p.0.ormd", e.PUBLISHER_ON_RECV_CANDIDATE_INFO = "zc.p.0.orci.0", e.PUBLISHER_ON_RECV_PUBLISH_EVENT = "zc.p.0.orpe", e.PUBLISHER_ON_RECV_CLIENT_INFO = "zc.p.0.orci.1", e.PUBLISHER_ON_ICE_CANDIDATE = "zc.p.0.oic", e.PUBLISHER_ON_CONNECTION_STATE_CHANGE = "zc.p.0.ocsc", e.PUBLISHER_ON_ICE_CONNECTION_STATE_CHANGE = "zc.p.0.oicsc", e.PUBLISHER_RESET_PUBLISH = "zc.p.0.rp", e.PUBLISHER_SET_PLAYER_QUALITY_TIMER = "zc.p.0.spqt", e.PUBLISHER_UPLOAD_PUBLISH_QUALITY = "zc.p.0.upq", e.PUBLISHER_ON_RECV_RESET_SESSION = "zc.p.0.orrs", e.PUBLISHER_ON_RECV_CLOSE_SESSION = "zc.p.0.orcs", e.PUBLISHER_SEND_CANDIDATE_INFO = "zc.p.0.sci", e.PUBLISHER_STATE_ERROR = "zc.p.0.psr", e.PUBLISHER_STOP_PUBLISH = "zc.p.0.sp.1", e.PUBLISHER_ON_DISCONNECT = "zc.p.0.od", e.PUBLISHER_START_SOUND_LEVEL = "zc.p.0.ssl.0", e.PUBLISHER_STOP_SOUND_LEVEL = "zc.p.0.ssl.1", e.PUBLISHER_HANDLE_ENC_BITRATE = "zc.p.0.heb", e.PUBLISHER_ON_RECV_NET_QUALITY_INFO = "zc.p.0.nqi", e.PUBLISHER_ON_RECV_UPDATE_MEDIA_DESC = "zc.p.0.orumd", e.PUBLISHER_SEND_SEI = "zc.p.0.ss", e.PUBLISHER_RESET_GW_NODES = "zc.p.0.rgn", e.PUBLISHER_SET_GW_NODES = "zc.p.0.sgn", e.PUBLISHER_HANDLE_DISPATCHED_GW_NODES = "zc.p.0.hdgn", e.PUBLISHER_PURE_SORT_GW_NODES = "zc.p.0.psgn", e.PLAYER_START_PLAY = "zc.p.1.sp.0", e.PLAYER_ON_CREATE_PLAY_SESSION_SUCCESS = "zc.p.ocpss.1", e.PLAYER_COMPARE_PUSH_SEQS = "zc.p.cps.1", e.PLAYER_HANDLE_CREATE_SESSION_WITH_SDP = "zc.p.hcsws.1", e.PLAYER_ON_CREATE_OFFER_SUCCESS = "zc.p.ocos.1", e.PLAYER_ON_SET_LOCAL_DESCRIPTION_SUCCESS = "zc.p.oslds.1", e.PLAYER_ON_RECV_MEDIA_DESC = "zc.p.ormd.1", e.PLAYER_ON_RECV_CANDIDATE_INFO = "zc.p.orci.1", e.PLAYER_ON_RECV_PLAY_EVENT = "zc.p.orpe.1", e.PLAYER_ON_RECV_CLIENT_INFO = "zc.p.orci.1.1", e.PLAYER_ON_ICE_CANDIDATE = "zc.p.oic.1", e.PLAYER_ON_CONNECTION_STATE_CHANGE = "zc.p.ocsc.1", e.PLAYER_ON_ICE_CONNECTION_STATE_CHANGE = "zc.p.oicsc.1", e.PLAYER_ON_PEER_CONNECTION_STATE_CHANGE = "zc.p.opcsc.1", e.PLAYER_RESET_PLAY = "zc.p.rp.1", e.PLAYER_SET_PLAYER_QUALITY_TIMER = "zc.p.spqt.1", e.PLAYER_UPLOAD_PLAYER_QUALITY = "zc.p.upq.1", e.PLAYER_ON_RECV_RESET_SESSION = "zc.p.orrs.1", e.PLAYER_ON_RECV_CLOSE_SESSION = "zc.p.orcs.1", e.PLAYER_ON_RECV_STREAM_STATUS = "zc.p.orss.1", e.PLAYER_ON_GOT_REMOTE_STREAM = "zc.p.ogrs.1", e.PAYER_GET_VIDEO_CODEC = "zc.p.gvc", e.PLAYER_SEND_CANDIDATE_INFO = "zc.p.sci.1", e.PLAYER_STATE_ERROR = "zc.p.psr.1", e.PLAYER_STOP_PLAY = "zc.p.1.sp.1", e.PLAYER_ON_DISCONNECT = "zc.p.od.1", e.PLAYER_START_SOUND_LEVEL = "zc.p.ssl.1", e.PLAYER_STOP_SOUND_LEVEL = "zc.p.ssl.1.1", e.PLAYER_ON_RECV_NET_QUALITY_INFO = "zc.p.1.nqi", e.PLAYER_RESET_GW_NODES = "zc.p.1.rgn", e.PLAYER_SET_GW_NODES = "zc.p.1.sgn", e.PLAYER_HANDLE_DISPATCHED_GW_NODES = "zc.p.1.hdgn", e.PLAYER_PURE_SORT_GW_NODES = "zc.p.1.psgn", e.UPLOAD_SPEED_LOG_QUALITY = "zc.uslq", e.GS_REGISTER_PUSH_CALLBACK = "zc.gs.rpc", e.PUBLISH_SET_CAPTURE_VOLUME = "zc.p.scv", e.PUBLISH_SET_BEAUTY_EFFECT = "zc.p.0.sbe", e.STREAMHANDLER_MERGE_STREAM_BY_STREAM_SEQ = "zc.sh.msbss", e.STREAMHANDLER_MERGE_STREAM = "zc.sh.ms", e.STREAMHANDLER_PATCH_STREAM_LIST = "zc.sh.psl", e.STREAMHANDLER_SEND_BIZCHANNEL_REQUESTV2 = "zc.sh.sbr", e.STREAMHANDLER_SEND_BIZCHANNEL_REQUESTV3 = "zc.sh.sbr3", e.ANALOGSOCKET_UPDATE_MEDIA_READY_STATE = "zc.as.umrs", e.ANALOGSOCKET_UPDATE_ACCESS_READY_STATE = "zc.as.uars", e.ANALOGSOCKET_SET_MEDIA_SERVER_STATE = "zc.as.smss", e.ANALOGSOCKET_SET_ACCESS_SERVER_STATE = "zc.as.sass", e.ANALOGSOCKET_SEND = "zc.as.s.0", e.ANALOGSOCKET_OPEN = "zc.as.op", e.SET_ROOM_SCENARIO = "zc.srs", e.INIT_ROOM_SCENARIO = "zc.irs", e.STREAM_STORE_HANDLER = "zc.ssh", e.SEND_NET_QUALITY_GRADE_ACK = "zc.s.nqga" }(t.ZEGO_WEBRTC_ACTION || (t.ZEGO_WEBRTC_ACTION = {})) }, "9770": function _(e, t, r) { "use strict"; var i = this && this.__assign || function () { return (i = Object.assign || function (e) { for (var t, A = 1, r = arguments.length; A < r; A++)for (var i in t = arguments[A]) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]); return e }).apply(this, arguments) }; Object.defineProperty(t, "__esModule", { "value": !0 }), t.CommonStates = void 0; var o = r(5123), n = function () { function A(e, t, A) { this.rtmStateCenter = e, this.rtcStateCenter = t, this.streamCenter = A, this._initTime = Date.now() } return Object.defineProperty(A.prototype, "appid", { "get": function get() { return this.rtcStateCenter.appid }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "device_id", { "get": function get() { return this.rtmStateCenter.deviceID }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "product", { "get": function get() { return this.rtmStateCenter.roomServer }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "sdk_version", { "get": function get() { return o.PROTO_VERSION }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "sys_info", { "get": function get() { return navigator.userAgent }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "report_version", { "get": function get() { return this.rtcStateCenter.reportVersion }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "browser", { "get": function get() { return this.rtcStateCenter.browser }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "id_name", { "get": function get() { return this.rtmStateCenter.idName }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "nick_name", { "get": function get() { return this.rtmStateCenter.nickName }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "use_na", { "get": function get() { return this.rtcStateCenter.useNetAgent ? 1 : 0 }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "userid", { "get": function get() { return this.rtmStateCenter.userid }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "network_state", { "get": function get() { return this.rtcStateCenter.networkState }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "init_time", { "get": function get() { return this._initTime }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "net_type", { "get": function get() { var e; return (null === (e = navigator.connection) || void 0 === e ? void 0 : e.effectiveType) || "unknown" }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "room_server", { "get": function get() { return this.rtmStateCenter.roomServer }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "device_infos", { "get": function get() { return this.rtcStateCenter.deviceInfos }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "room_list", { "get": function get() { var e = this, t = {}; return this.rtcStateCenter.roomList.forEach(function (A) { var r, i, o, n = e.rtmStateCenter.roomModulesList.find(function (e) { return e.roomID === A.roomID }), s = { "roomSessionID": A.roomSessionID, "sessionID": A.sessionID, "streamList": A.streamList, "token": A.token, "role": e.rtmStateCenter.role, "roomCreateFlag": e.rtmStateCenter.roomCreateFlag, "loginTime": null == n ? void 0 : n.loginTime, "heartbeatInterval": null === (r = null == n ? void 0 : n.heartBeatHandler) || void 0 === r ? void 0 : r.heartbeatInterval, "roomExtraInfos": null === (i = null == n ? void 0 : n.messageHandler) || void 0 === i ? void 0 : i.transSeqMap, "roomRetryTime": null === (o = null == n ? void 0 : n.roomTryHandler) || void 0 === o ? void 0 : o.RETRY_MAX_TIME }; t[A.roomID] = s }), t }, "enumerable": !1, "configurable": !0 }), A.prototype.getRoomList = function (e, t) { var A = this; return this.room_id_list.slice(e, t).map(function (e) { return i({ "roomID": e }, A.room_list[e]) }) }, Object.defineProperty(A.prototype, "room_id_list", { "get": function get() { return this.rtcStateCenter.roomList.map(function (e) { return e.roomID }) }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "roomListSize", { "get": function get() { return this.room_id_list.length }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "userLoginState", { "get": function get() { var e, t = this.rtmStateCenter.roomModulesList[0], A = t.runState, r = t.lastRunState; return A === o.ENUM_RUN_STATE.logout ? e = o.USER_RUN_STATE.logout : A === o.ENUM_RUN_STATE.login ? e = o.USER_RUN_STATE.login : r === o.ENUM_RUN_STATE.logout ? e = o.USER_RUN_STATE.trylogin : r === o.ENUM_RUN_STATE.login && (e = o.USER_RUN_STATE.reconnect), e }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "publishStreamList", { "get": function get() { return Object.keys(this.streamCenter.publisherList) }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "publishList", { "get": function get() { var e = this, t = {}; return this.publishStreamList.forEach(function (A) { var r, i, o, n = e.streamCenter.publisherList[A], s = null == n ? void 0 : n.publisher, a = null == s ? void 0 : s.publishStat; t[A] = { "streamSid": null == n ? void 0 : n.streamSid, "roomID": null === (r = null == n ? void 0 : n.room) || void 0 === r ? void 0 : r.roomID, "roomSessionID": null === (i = null == n ? void 0 : n.room) || void 0 === i ? void 0 : i.roomSessionID, "cameraLabel": null == n ? void 0 : n.cameraLabel, "microLabel": null == n ? void 0 : n.microLabel, "cameraStatus": null == s ? void 0 : s.camera_status, "micStatus": null == s ? void 0 : s.mic_status, "sessionId": null == s ? void 0 : s.sessionId, "publishBeginTime": null == s ? void 0 : s.reportPublishStateTime, "serverUrl": null === (o = null == s ? void 0 : s.signal) || void 0 === o ? void 0 : o.server, "gwNode": null == s ? void 0 : s.gwNode, "proto": "webrtc", "frameWidth": null == a ? void 0 : a.frameWidth, "frameHeight": null == a ? void 0 : a.frameHeight, "rtt": null == a ? void 0 : a.currentRoundTripTime, "videoPacketsLostRate": null == a ? void 0 : a.videoPacketsLostRate, "audioPacketsLostRate": null == a ? void 0 : a.audioPacketsLostRate, "videoTargetBitrate": null == a ? void 0 : a.videoTargetBitrate, "videoBitrate": null == a ? void 0 : a.videoBitrate, "audioTargetBitrate": null == a ? void 0 : a.audioTargetBitrate, "audioBitrate": null == a ? void 0 : a.audioBitrate, "videoTargetFPS": null == a ? void 0 : a.videoTargetFPS, "videoFPS": null == a ? void 0 : a.videoFPS, "audioFPS": null == a ? void 0 : a.audioFPS, "videoCodecName": null == a ? void 0 : a.videoCodecName, "audioCodecName": null == a ? void 0 : a.audioCodecName } }), t }, "enumerable": !1, "configurable": !0 }), A.prototype.getPublishList = function (e, t) { var A = this; return this.publishStreamList.slice(e, t).map(function (e) { return i({ "streamID": e }, A.publishList[e]) }) }, Object.defineProperty(A.prototype, "publishListSize", { "get": function get() { return this.publishStreamList.length }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "playStreamList", { "get": function get() { return Object.keys(this.streamCenter.playerList) }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "playList", { "get": function get() { var e = this, t = {}; return this.playStreamList.forEach(function (A) { var r, i, o, n = e.streamCenter.playerList[A], s = null == n ? void 0 : n.player, a = null == s ? void 0 : s.playStat; t[A] = { "streamSid": null == n ? void 0 : n.streamSid, "roomID": null === (r = null == n ? void 0 : n.room) || void 0 === r ? void 0 : r.roomID, "roomSessionID": null === (i = null == n ? void 0 : n.room) || void 0 === i ? void 0 : i.roomSessionID, "cameraStatus": null == s ? void 0 : s.cameraStatus, "micStatus": null == s ? void 0 : s.micStatus, "sessionId": null == s ? void 0 : s.sessionId, "playBeginTime": null == s ? void 0 : s.reportPlayStateTime, "serverUrl": null === (o = null == s ? void 0 : s.signal) || void 0 === o ? void 0 : o.server, "gwNode": null == s ? void 0 : s.gwNode, "proto": "webrtc", "frameWidth": null == a ? void 0 : a.frameWidth, "frameHeight": null == a ? void 0 : a.frameHeight, "rtt": null == a ? void 0 : a.currentRoundTripTime, "videoPacketsLostRate": null == a ? void 0 : a.videoPacketsLostRate, "audioPacketsLostRate": null == a ? void 0 : a.audioPacketsLostRate, "videoBitrate": null == a ? void 0 : a.videoBitrate, "audioBitrate": null == a ? void 0 : a.audioBitrate, "videoFPS": null == a ? void 0 : a.videoFPS, "audioFPS": null == a ? void 0 : a.audioFPS, "videoCodecName": null == a ? void 0 : a.videoCodecName, "audioCodecName": null == a ? void 0 : a.audioCodecName, "peerToPeerDelay": null == a ? void 0 : a.peerToPeerDelay, "firstFrameTime": null == a ? void 0 : a.firstFrameTime, "videoJitter": null == a ? void 0 : a.videoJitter, "audioJitter": null == a ? void 0 : a.audioJitter } }), t }, "enumerable": !1, "configurable": !0 }), A.prototype.getPlayList = function (e, t) { var A = this; return this.playStreamList.slice(e, t).map(function (e) { return i({ "streamID": e }, A.playList[e]) }) }, Object.defineProperty(A.prototype, "playListSize", { "get": function get() { return this.playStreamList.length }, "enumerable": !1, "configurable": !0 }), A }(); t.CommonStates = n }, "1264": function _(e, t) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.RTC = t.ZegoSettingConfig = void 0; var A = function () { function A() { this.defaultSetting = { "publish_video_codec": "H264", "camera_video_bitrate": 800, "screen_video_bitrate": 1500, "custom_video_bitrate": 0, "l3_play_buffer_ms": 500, "AEC": !0, "AGC": !0, "ANS": !0, "resource_mode": 0, "bitrate_mode": "default", "auto_to_tcp": !1, "udp_max_fail_num": 2, "probe_started_num": 3, "udp_or_tcp": "udp", "hardware_encode": !1, "camera_hard_encode": !1, "custom_hard_encode": !1, "bg_fps_stat": 0, "camera_width": 720, "camera_height": 480, "camera_framerate": 15, "camera_audio_bitrate": 48, "open_mini_sdp": !1 }, this.userChangedKey = {}, this.setting = JSON.parse(JSON.stringify(this.defaultSetting)) } return A.prototype.setSetting = function (e, t) { var A = Array.isArray(t) && t.length > 0; for (var r in e) for (var i in e[r]) if (!i.endsWith("_ctrlmode")) { if (A && -1 == t.indexOf(i)) continue; var o = e[r][i + "_ctrlmode"]; 1 === o ? this.userChangedKey[i] || (this.setting[i] = e[r][i]) : 2 === o ? this.setting[i] = e[r][i] : this.defaultSetting[i] && (this.setting[i] = this.defaultSetting[i]), "number" == typeof o && (this.setting[i + "_ctrlmode"] = e[r][i + "_ctrlmode"]) } }, A.prototype.getSetting = function (e, t) { return void 0 === t && (t = !1), t ? 2 == this.setting[e + "_ctrlmode"] ? this.setting[e] : void 0 : this.setting[e] }, A.prototype.setUserValue = function (e, t) { 2 !== this.setting[e + "_ctrlmode"] && (this.userChangedKey[e] = !0, this.setting[e] = t) }, A }(); t.ZegoSettingConfig = A, t.RTC = "rtc" }, "7437": function _(e, t, r) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.StateCenter = void 0; var i = r(5123), o = r(4028), n = r(93), s = r(5123), a = r(1586), c = r(8738), g = r(9645), u = function () { function A(e, t) { this.logger = e, this.dataReport = t, this.debug = !1, this.testEnvironment = !1, this.pullLimited = !0, this.useNetAgent = !0, this.configOK = !1, this.relateService = [], this.role = 2, this.maxMemberCount = 0, this.roomCreateFlag = 1, this.callbackList = {}, this.publishStreamList = {}, this.waitPublishStreamList = {}, this.streamUrlMap = {}, this.cmdCallback = {}, this.customUrl = [], this.customPlayUrl = [], this.turnToTcp = !1, this.turnOverTcpOnly = void 0, this.audioEffectBuffer = {}, this.audioBitRate = 48e3, this.cdnSeq = 0, this.engineDestroy = !1, this.listenerList = { "roomStreamUpdate": [], "streamExtraInfoUpdate": [], "playerStateUpdate": [], "publisherStateUpdate": [], "screenSharingEnded": [], "publishQualityUpdate": [], "playQualityUpdate": [], "remoteCameraStatusUpdate": [], "remoteMicStatusUpdate": [], "soundLevelUpdate": [], "capturedSoundLevelUpdate": [], "videoDeviceStateChanged": [], "audioDeviceStateChanged": [], "deviceError": [], "_deviceError": [], "_remoteCameraStatusUpdate": [], "_remoteMicStatusUpdate": [], "_streamUpdated": [], "receiveRealTimeSequentialData": [], "beautyEffectOverload": [], "playerRecvSEI": [], "beautyEffectError": [], "_engineConfigUpdate": [], "backgroundEffectError": [], "exceptionUpdate": [], "networkQuality": [], "_engineDestroy": [] }, this.reportList = {}, this.reportSeqList = { "startPublish": {}, "rePublish": {}, "startPlay": {}, "rePlay": {}, "stopPublish": {}, "stopPlay": {} }, this.streamTrigger = {}, this.audioStreamList = {}, this.deviceInfos = null, this.deviceChangeTimer = null, this.deviceStateOut = !1, this.streamRetryTime = 300, this.checkList = [], this.anchor_info = { "anchor_id": "", "anchor_id_name": "", "anchor_nick_name": "" }, this.streamConnectTime = 0, this.defaultConnTime = 5, this.clientIP = "", this.accessClientIp = "", this.isMultiOuter = !1, this.type = "PUBLIC", this.roomList = [], this.tempRoomList = [], this.isMultiRoom = !1, this.browser = "", this.unregisterSeiFilter = "", this.isTestMode = !1, this.netAppConfigDelay = 0, this.seiConfig = { "emulationPreventionByte": !1 }, this.playAccelerate = !0, this.connectChanged = !1, this.autoSwitchDeviceSetting = { "camera": !1, "microphone": !1 }, this.unSendMessageList = [], this.scenario = i.ZegoScenario.Default, this.testStreamRetryMode = 0, this.testStreamRetryCount = 10, this.supportDispatchByPass = !1, this.testStreamStatusSeq = 0, this.engineConfig = { "keepAudioTrack": !0, "playClearLastFrame": !0, "previewClearLastFrame": !0, "mixingAudioDelay": 0 }, this._isMiniSdp = !0, this._forceMiniSdp = !1, this.player265Validated = !1, this.logReportCallback = o.ClientUtil.logReportCallback, this.unregisterCallback = o.ClientUtil.unregisterCallback, this.checkIllegalCharacters = o.ClientUtil.checkIllegalCharacters, this.decodeServerError = o.ClientUtil.decodeServerError, this.getLiveRoomError = o.ClientUtil.getLiveRoomError, this.getServerError = o.ClientUtil.getServerError, this.mergeStreamList = o.ClientUtil.mergeStreamList, this.checkInteger = o.ClientUtil.checkInteger, this.isUrl = o.ClientUtil.isUrl, this.actionSuccessCallback = o.ClientUtil.actionSuccessCallback, this.checkValidNumber = o.ClientUtil.checkValidNumber, this.getDevices = o.ClientUtil.getDevices, this.uint8arrayToBase64 = o.ClientUtil.uint8arrayToBase64, this.getSeq = s.getSeq, this.getReportSeq = i.getReportSeq } return Object.defineProperty(A.prototype, "networkState", { "get": function get() { var e; return null === (e = this.rtm) || void 0 === e ? void 0 : e.stateCenter.networkState }, "set": function set(e) { var t; (null === (t = this.rtm) || void 0 === t ? void 0 : t.stateCenter) && void 0 !== e && (this.rtm.stateCenter.networkState = e) }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "isMiniSdp", { "get": function get() { if (!this._isMiniSdp && !this._forceMiniSdp) return !1; if (!window.WebAssembly || !window.Worker) return !1; var e = this.settingConfig.getSetting("open_mini_sdp"); return "boolean" == typeof e && (this.logger.info("zc.c.ims setting: " + e), e) }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "streamCenter", { "get": function get() { return this._streamCenter }, "set": function set(e) { this._streamCenter = e }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "billingTimer", { "get": function get() { return this._billingTimer || (this._billingTimer = new c.BillingTimer(this.logger, this)), this._billingTimer }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "chargeInfosSaver", { "get": function get() { return this._chargeInfosSaver || (this._chargeInfosSaver = new g.ChargeInfosSaverWeb(this.logger, this)), this._chargeInfosSaver }, "enumerable": !1, "configurable": !0 }), A.prototype.getRequestId = function () { return this.idName + "-" + (0, s.getSeq)() }, A.prototype.getSignalCmdContent = function (e, t, A, r) { var i = { "request_id": t, "room_id": e, "from_userid": this.idName, "from_username": this.nickName, "to_userid": A }; return null != r && (i.result = r), JSON.stringify(i) }, A.prototype.actionListener = function (e) { for (var t = this, A = [], r = 1; r < arguments.length; r++)A[r - 1] = arguments[r]; if (!["playQualityUpdate", "publishQualityUpdate", "soundLevelUpdate", "capturedSoundLevelUpdate", "playerRecvSEI", "remoteCameraStatusUpdate", "_remoteCameraStatusUpdate", "remoteMicStatusUpdate", "_remoteMicStatusUpdate", "_streamUpdated", "_deviceError"].includes(e) && this.listenerList[e]) { var o = this.reporter.createSpan(i.TRACER_LEVEL.H, { "key": a.ZegoRTCLogEvent.kZegoTaskListener.event }, { "key": "" }, a.ZegoRTCLogEvent.kZegoListener.event); o.setAttributes({ "listener": e, "listener_params": JSON.stringify(A) }), ["deviceError", "streamExtraInfoUpdate", "publisherStateUpdate", "playerStateUpdate", "roomStreamUpdate"].includes(e) && this.logger.info("zc.al ".concat(e, " ").concat(JSON.stringify(A))), o.end() } this.listenerList[e] && this.listenerList[e].forEach(function (r) { try { setTimeout(function () { r.apply(void 0, A) }, 0) } catch (A) { t.logger.error(n.ZEGO_WEBRTC_ACTION.STATECENTER_ACTION_LISTENER + " " + e + " " + A) } }) }, A.prototype.getRoomByRoomID = function (e) { return this.roomList.find(function (t) { return t.roomID == e }) }, A.prototype.getPlayRoom = function (e) { return this.roomList.find(function (t) { return !!t.streamList.find(function (t) { return t.stream_id == e }) }) }, A.prototype.destroy = function () { this._streamCenter = null }, A }(); t.StateCenter = u }, "2277": function _(e, t) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.ZegoStreamCenter = void 0, t.ZegoStreamCenter = function () { this.publisherList = {}, this.playerList = {}, this.stopedPlayerList = {} } }, "4202": function _(e, t, r) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.StreamHandler = void 0; var i = r(5123), o = r(2532), n = r(93), s = r(1586), a = s.ZegoRTCLogEvent.kZegoTaskLiveRoomGetCurrentStreamList, c = function () { function A(e, t, A, r, i) { this.logger = e, this.stateCenter = t, this.rtm = A, this.streamCenter = r, this.roomID = i, this.minStreamSeq = 0, this.streamSeq = 0, this.maxFullStreamSeq = 0, this.streamQuerying = !1, this.streamSeqMergeMap = null, this.streamListHBMergeInterval = 2e3, this.streamListMergeInterval = 5e3 } return A.prototype.setCDNInfo = function (e, t) { e.urlFlv = t.urls_flv instanceof Array ? t.urls_flv[0] || "" : "string" == typeof t.urls_flv ? t.urls_flv : "", e.urlHls = t.urls_m3u8 instanceof Array ? t.urls_m3u8[0] || "" : "string" == typeof t.urls_m3u8 ? t.urls_m3u8 : "", e.urlFlvPlus = t.urls_flv_plus instanceof Array ? t.urls_flv_plus[0] || "" : "string" == typeof t.urls_flv_plus ? t.urls_flv_plus : "", e.urlHlsPlus = t.urls_m3u8_plus instanceof Array ? t.urls_m3u8_plus[0] || "" : "string" == typeof t.urls_m3u8_plus ? t.urls_m3u8_plus : "", e.urlHttpsFlv = t.urls_https_flv instanceof Array ? t.urls_https_flv[0] || "" : "string" == typeof t.urls_https_flv ? t.urls_https_flv : "", e.urlHttpsHls = t.urls_https_m3u8 instanceof Array ? t.urls_https_m3u8[0] || "" : "string" == typeof t.urls_https_m3u8 ? t.urls_https_m3u8 : "", e.urlRtmp = t.urls_rtmp instanceof Array ? t.urls_rtmp[0] || "" : "string" == typeof t.urls_rtmp ? t.urls_rtmp : "" }, A.prototype.onStreamUpdated = function (e, t, A) { }, A.prototype.onStreamExtraInfoUpdated = function (e, t) { }, A.prototype.handleStreamStart = function (e, t) { this.logger.info("zb.sh.hss call stream update"), this.room = t, e.body ? (this.streamListHBMergeInterval = e.body.stream_list_hb_wait_merge_time || 2e3, this.streamListMergeInterval = e.body.stream_list_push_merge_timeout || 5e3, this.streamQuerying = !1, this.handleFullUpdateStream(e.body.stream_seq, e.body.stream_info || []), this.handleReconnectStream(e.body.stream_info), this.logger.info("zb.sh.hss call end")) : this.logger.error("zb.sh.hss server response wrong") }, A.prototype.onPublishStateUpdate = function (e, t, A) { }, A.prototype._updateStreamInfo = function (e, A, r, n, s) { var a, c, g = this; void 0 === r && (r = ""), this.logger.info("zb.sh.usi call"); var u = r, l = null === (a = this.room) || void 0 === a ? void 0 : a.streamList.find(function (t) { return t.stream_id === e }); l || this.logger.info("zb.sh.usi stream not in room cmd " + A); var C = { "stream_id": e, "extra_info": u }; 2002 !== A && 2003 !== A || (C.stream_sid = (null == l ? void 0 : l.stream_sid) || ""); var I = JSON.stringify(C), p = { "sub_cmd": A, "stream_msg": I, "third_token": null === (c = this.room) || void 0 === c ? void 0 : c.token }, f = this.room; this.room.streamInfoList[e] = {}; var B = function d(t, r) { n && n(t, g.room.streamInfoList[e].seq), g.handleStreamUpdateRsp(t, e, A) }, _ = function h(a, u) { var l = g.room, d = g.rtm.stateCenter.roomModulesList.find(function (e) { return e.roomID === (null == l ? void 0 : l.roomID) }), C = function c() { return (null == d ? void 0 : d.isTryLogin()) || "CONNECTING" === (null == d ? void 0 : d.roomState) }, I = function E() { g.logger.warn("zb.sh.usi resend stream update " + A), g._updateStreamInfo(e, A, r, n, s) }; if (l && ((null == d ? void 0 : d.isLogin()) || C()) && a.code && a.code == o.errorCodeList.TIMEOUT.code && l.streamInfoList[e].seq == u) setTimeout(function () { if (2001 == A && g.stateCenter.publishStreamList[e] && g.stateCenter.publishStreamList[e].state == i.ENUM_PUBLISH_STREAM_STATE.update_info || 2002 == A) if (C()) { g.rtm.stateCenter.onListener("_roomStateUpdate", function t(e, A) { var r = function i() { g.rtm.stateCenter.offListener("_roomStateUpdate", t) }; e === (null == l ? void 0 : l.roomID) && "CONNECTED" === A ? (I(), r()) : e === (null == l ? void 0 : l.roomID) && "DISCONNECTED" === A && r() }) } else I(); else s && s(o.errorCodeList.TIMEOUT) }, 0); else if (a.body && a.body.err_code) { var E = g.stateCenter.getServerError(a.body.err_code, g.stateCenter.useNetAgent, a.body.err_message);[1011, 1000002002].includes(E.code) && (E = o.errorCodeList.TOKEN_EXPIRED), s && s(E, u), A === i.ENUM_STREAM_SUB_CMD.liveBegin && g.onPublishStateUpdate(i.ENUM_PUBLISH_STATE_UPDATE.error, e, E) } }; if (this.stateCenter.useNetAgent) this.room.streamInfoList[e].seq = this.rtm.liveRoomHandler.sendStreamUpdate(p, B, _, { "sessionID": null == f ? void 0 : f.sessionID, "roomID": null == f ? void 0 : f.roomID, "roomSessionID": null == f ? void 0 : f.roomSessionID }); else { var m = this.rtm.service.sendMessage("stream", p, B, _, void 0, { "sessionID": null == f ? void 0 : f.sessionID, "roomID": null == f ? void 0 : f.roomID, "roomSessionID": null == f ? void 0 : f.roomSessionID }); this.room.streamInfoList[e].seq = m, 0 === m && 2002 === A && "wxMini" === this.stateCenter.clientType && (this.stateCenter.unSendMessageList.push({ "roomID": (null == f ? void 0 : f.roomID) || "", "streamid": e, "cmd": A, "stream_extra_info": r }), this.logger.info("zb.sh.usi call unsendmsg " + JSON.stringify(this.stateCenter.unSendMessageList))) } this.logger.info("zb.sh.usi call success cmd " + A + ", roomid: ".concat(null == f ? void 0 : f.roomID, ", stream: ").concat(e)) }, A.prototype.updateStreamInfo = function (e, t, A, r, o) { var n, a = this; void 0 === A && (A = ""), (2001 === t || 2002 === t) && (n = this.stateCenter.reporter.createSpan(i.TRACER_LEVEL.H, { "key": s.ZegoRTCLogEvent.kZMLoginRoom.event, "par": this.roomID }, { "key": "" }, s.ZegoRTCLogEvent.kZegoTaskLiveRoomSendStreamUpdateInfo.event)).setAttributes({ "stream_update_type": s.ZegoRTCLogEvent.kZegoTaskLiveRoomSendStreamUpdateInfo.stream_update_type(2001 === t ? "stream added" : 2002 === t ? "stream deleted" : ""), "stream_extra_info": s.ZegoRTCLogEvent.kZegoTaskLiveRoomSendStreamUpdateInfo.stream_extra_info(A), "stream_id": s.ZegoRTCLogEvent.kZegoTaskLiveRoomSendStreamUpdateInfo.stream_id(e) }), this._updateStreamInfo(e, t, A, function (e, A) { 2001 !== t && 2002 !== t || (n.setAttributes({ "send_seq": A }), n && n.end()), r && r(e, A) }, function (e, A) { 2001 !== t && 2002 !== t || (n.setAttributes({ "send_seq": A }), a.stateCenter.reporter.setError(n, e)), o && o(e, A) }) }, A.prototype.handleStreamUpdateRsp = function (e, t, A) { var r, i, o; if (this.rtm.isDisConnect()) this.logger.warn("zb.sh.hsur not login"); else if (0 == e.body.err_code) { this.logger.info("zb.sh.hsur stream seq " + this.streamSeq + " server seq " + e.body.stream_seq); var n = this.room; if (n) if ((null === (r = null == e ? void 0 : e.body) || void 0 === r ? void 0 : r.token_remain_time) && (this.stateCenter.getRoomByRoomID(null === (i = null == e ? void 0 : e.header) || void 0 === i ? void 0 : i.room_id) ? this.rtm.resetRoomTokenTimer(e.header.room_id, e.body.token_remain_time) : this.logger.error("zb.sh.hsur room no found ignore " + JSON.stringify(null === (o = e.header) || void 0 === o ? void 0 : o.room_id))), this.stateCenter.useNetAgent) this.handleStreamSync(e, t, A), delete n.streamInfoList[t]; else { e.body.stream_seq > this.streamSeq + 1 ? (this.logger.info("zb.sh.hsur seq diff, server: " + e.body.stream_seq + " client: " + this.streamSeq), this.fetchStreamList()) : this.streamSeq = e.body.stream_seq; for (var s = 0; s < e.body.stream_info.length; s++) { var a = e.body.stream_info[s].stream_id; this.handleStreamRsp(n, a, e.body.stream_info[s], A), delete n.streamInfoList[a] } } else this.logger.info("hsur.0 room no found") } else this.logger.error("zb.sh.hsur stream update error " + e.body.err_code) }, A.prototype.handleStreamSync = function (e, t, A) { if (this.handleStreamRsp(this.room, t, { "stream_id": t, "stream_sid": e.body.stream_sid, "stream_ver": e.body.stream_ver, "stream_nid": e.body.stream_nid }, A), e.body.stream_seq > this.streamSeq + 1) return this.logger.info("zb.sh.hss.1 seq diff server: " + e.body.stream_seq + " client " + this.streamSeq), void this.fetchStreamList(); this.streamSeq = e.body.stream_seq; var r = this.room.streamList.find(function (e) { return e.stream_id == t }); r && e.body.stream_ver > r.stream_ver && this.fetchStreamList(t) }, A.prototype.handleStreamRsp = function (e, t, A, r) { var o = this.stateCenter.publishStreamList[t], n = e.streamList.find(function (e) { return e.stream_id == t }); if (this.logger.info("hsur.0 cmd " + r + " " + !!n), n && 2002 === r) { var s = e.streamList.findIndex(function (e) { return e.stream_id == t }); this.logger.info("hsur.0 stream index " + s), s > -1 && e.streamList.splice(s, 1) } o ? (o.state == i.ENUM_PUBLISH_STREAM_STATE.update_info && (o.state = i.ENUM_PUBLISH_STREAM_STATE.publishing, 2001 !== r || n || e.streamList.push(A), this.onPublishStateUpdate(i.ENUM_PUBLISH_STATE_UPDATE.start, t, { "code": 0, "message": "" })), n && n.stream_sid !== A.stream_sid && (this.logger.info("hsur.0 update sid. " + t + " origin:" + n.stream_sid + ", new:" + A.stream_sid), n.stream_sid = A.stream_sid)) : this.logger.info("hsur.0 stream is not exist") }, A.prototype.handleFetchStreamListRsp = function (e, t) { var A, r, i, o, n, s; if (this.logger.info("zb.sh.hfslr call " + t), this.streamQuerying = !1, this.stateCenter.reporter.spanEnd({ "key": a.event, "par": this.roomID }, { "stream_seq": a.stream_seq(null === (A = e.body) || void 0 === A ? void 0 : A.stream_seq), "stream_size": a.stream_size(null === (i = null === (r = e.body) || void 0 === r ? void 0 : r.stream_info) || void 0 === i ? void 0 : i.length), "stream_list": a.stream_list(null === (o = e.body) || void 0 === o ? void 0 : o.stream_info), "error": (null === (n = null == e ? void 0 : e.body) || void 0 === n ? void 0 : n.err_code) || (null == e ? void 0 : e.code), "message": (null === (s = null == e ? void 0 : e.body) || void 0 === s ? void 0 : s.err_message) || (null == e ? void 0 : e.msg) }), 0 === e.body.err_code) if (this.streamSeq !== e.body.stream_seq) { if (this.streamSeq > e.body.stream_seq) return this.logger.error("zb.sh.hfslr less seq"), void this.fetchStreamList(t); if (this.maxFullStreamSeq > e.body.stream_seq) this.logger.info("zb.sh.hfslr less than max fetch stream seq "); else { var c = e.body.stream_info; this.stateCenter.useNetAgent && t && (c = e.body.stream_info.filter(function (e) { return e.stream_id === t })), this.handleFullUpdateStream(e.body.stream_seq, c), this.logger.info("zb.sh.hfslr call success") } } else this.logger.info("zb.sh.hfslr same seq"); else this.logger.info("zb.sh.hfslr server error=", e.body.err_code) }, A.prototype.syncPublishStreamList = function () { this.logger.info("zb.sh.spsl call"); var e = function A(e) { var r = t.stateCenter.publishStreamList[e]; if (r.state === i.ENUM_PUBLISH_STREAM_STATE.publishing) { var o = t.room.streamList.findIndex(function (t) { return t.stream_id === e }); r.roomID === t.room.roomID && -1 === o && (r.state = i.ENUM_PUBLISH_STREAM_STATE.update_info, t.updateStreamInfo(e, i.ENUM_STREAM_SUB_CMD.liveBegin, r.extra_info, function (e) { })) } }, t = this; for (var r in this.stateCenter.publishStreamList) e(r); this.logger.info("zb.sh.spsl call success") }, A.prototype.handleFullUpdateStream = function (e, t) { var A = this; this.logger.info("zb.sh.hfus call"), this.streamSeq = e, this.maxFullStreamSeq < e && (this.maxFullStreamSeq = e), this.logger.debug("zb.sh.hfus server seq " + this.streamSeq), this.stateCenter.mergeStreamList(this.stateCenter.idName, this.room.streamList, t, function (e, t, r) { 0 !== e.length && (A.logger.debug("zb.sh.hfus callback addstream"), A.onStreamUpdated(A.roomID, i.ENUM_STREAM_UPDATE_TYPE.added, A.makeCallbackStreamList(e))), 0 !== t.length && (A.logger.debug("zb.sh.hfus callback delstream"), A.onStreamUpdated(A.roomID, i.ENUM_STREAM_UPDATE_TYPE.deleted, A.makeCallbackStreamList(t))), 0 !== r.length && (A.logger.debug("zb.sh.hfus callback updatestream"), A.onStreamExtraInfoUpdated(A.roomID, A.makeCallbackStreamList(r))) }), this.syncPublishStreamList(), this.logger.info("zb.sh.hfus call success") }, A.prototype.handlePushStreamUpdateMsg = function (e) { if (this.logger.info("zb.sh.hpsum call " + JSON.stringify(e)), e.body.stream_info && 0 !== e.body.stream_info.length) { if (this.streamSeq + 1 !== e.body.stream_seq) return this.logger.info("zb.sh.hpsum call updatestream 1"), void this.fetchStreamList(); if (e.body.stream_seq < this.maxFullStreamSeq) return this.logger.info("zb.sh.hpsum call updatestream 2"), void this.fetchStreamList(); switch (this.streamSeq = e.body.stream_seq, e.body.stream_cmd) { case i.ENUM_STREAM_UPDATE_CMD.added: this.handleAddedStreamList(e.body.stream_info); break; case i.ENUM_STREAM_UPDATE_CMD.deleted: this.handleDeletedStreamList(e.body.stream_info); break; case i.ENUM_STREAM_UPDATE_CMD.updated: this.handleUpdatedStreamList(e.body.stream_info) }this.logger.info("zb.sh.hpsum call success") } else this.logger.info("zb.sh.hpsum, emtpy list") }, A.prototype.handlePriPushStreamUpdateMsg = function (e) { if (this.logger.info("zb.sh.hpsum call"), e.body.streams_info && 0 !== e.body.streams_info.length) { if (e.body.streams_info.length + this.streamSeq !== e.body.stream_seq) return this.logger.info("zb.sh.hpsum call updatestream"), void this.mergeStreamByStreamSeq(e.body.stream_cmd, e.body.stream_seq, e.body.streams_info); switch (this.streamSeq = e.body.stream_seq, e.body.stream_cmd) { case i.ENUM_STREAM_UPDATE_CMD_PRI.added: this.handleAddedStreamList(e.body.streams_info); break; case i.ENUM_STREAM_UPDATE_CMD_PRI.deleted: this.handleDeletedStreamList(e.body.streams_info); break; case i.ENUM_STREAM_UPDATE_CMD_PRI.updated: this.handleUpdatedStreamList(e.body.streams_info) }this.logger.info("zb.sh.hpsum call success") } else this.logger.info("zb.sh.hpsum, emtpy list") }, A.prototype.handleAddedStreamList = function (e) { this.logger.debug("zb.sh.hasl call"); for (var t, A = [], r = 0; r < e.length; r++)if (e[r].anchor_id_name != this.stateCenter.idName && e[r].id_name != this.stateCenter.idName && e[r].user_id !== this.stateCenter.idName) { t = !1; for (var o = 0; o < this.room.streamList.length; o++)if (e[r].stream_id === this.room.streamList[o].stream_id) { t = !0; break } t || A.push(e[r]) } else this.logger.debug("hdsl.0 have self stream added"); if (0 !== A.length) { this.logger.debug("zb.sh.hasl callback addstream"); for (var n = 0; n < A.length; n++) { this.room.streamList.push(A[n]); var s = this.streamCenter.playerList[A[n].stream_id]; null == s || s.player.setStreamAdd() } this.onStreamUpdated(this.roomID, i.ENUM_STREAM_UPDATE_TYPE.added, this.makeCallbackStreamList(A)) } this.logger.info("zb.sh.hasl call success") }, A.prototype.handleDeletedStreamList = function (e) { this.logger.debug("zb.sh.hdsl call"); for (var t = [], A = 0; A < e.length; A++)if (e[A].anchor_id_name != this.stateCenter.idName && e[A].id_name != this.stateCenter.idName && e[A].user_id !== this.stateCenter.idName) { for (var r = this.room.streamList.length - 1; r >= 0; r--)if (e[A].stream_id === this.room.streamList[r].stream_id) { !this.stateCenter.connectChanged && this.room.streamList.splice(r--, 1), t.push(e[A]); break } } else this.logger.debug("zb.sh.hdsl have self stream deleted"); 0 !== t.length && (this.logger.debug("zb.sh.hdsl callback delstream"), this.onStreamUpdated(this.roomID, i.ENUM_STREAM_UPDATE_TYPE.deleted, this.makeCallbackStreamList(t))), this.logger.info("zb.sh.hdsl call") }, A.prototype.handleUpdatedStreamList = function (e) { this.logger.debug("zb.sh.husl call"); for (var t = [], A = 0; A < e.length; A++)if (e[A].anchor_id_name != this.stateCenter.idName && e[A].id_name != this.stateCenter.idName && e[A].user_id !== this.stateCenter.idName) { for (var r = 0; r < this.room.streamList.length; r++)if (e[A].stream_id === this.room.streamList[r].stream_id) { e[A].extra_info !== this.room.streamList[r].extra_info && (this.room.streamList[r] = e[A], t.push(e[A])); break } } else this.logger.debug("hsul.0 have self stream updated"); 0 !== t.length && (this.logger.debug("zb.sh.husl callback updatestream"), this.onStreamExtraInfoUpdated(this.roomID, this.makeCallbackStreamList(t))), this.logger.info("zb.sh.husl call success") }, A.prototype.fetchStreamList = function (e) { var t, A, r, o = this; this.logger.info("zb.sh.fsl call"); var n = this.stateCenter.reporter.createSpan(i.TRACER_LEVEL.H, { "key": s.ZegoRTCLogEvent.kZMLoginRoom.event, "par": this.roomID }, { "key": a.event, "par": this.roomID }, a.event, !0); if (this.rtm.isDisConnect()) return this.logger.info("zb.sh.fsl state error"), void this.stateCenter.reporter.setError(n, a.error.NOT_LOGIN); if (this.streamQuerying) return this.logger.info("zb.sh.fsl already doing"), void this.stateCenter.reporter.setError(n, a.error.kParamError, " already doing"); if (this.streamQuerying = !0, this.logger.info("zb.sh.fsl send fetch request"), this.stateCenter.useNetAgent) this.rtm.liveRoomHandler.getStreamList({}, function (t) { o.handleFetchStreamListRsp(t, e) }, function (e) { }, { "roomID": null === (t = this.room) || void 0 === t ? void 0 : t.roomID, "sessionID": null === (A = this.room) || void 0 === A ? void 0 : A.sessionID, "roomSessionID": null === (r = this.room) || void 0 === r ? void 0 : r.roomSessionID }); else { var c = this.room; this.rtm.service.sendMessage("stream_info", { "reserve": 0 }, function (e) { o.handleFetchStreamListRsp(e) }, function (e, t) { }, void 0, { "roomID": null == c ? void 0 : c.roomID, "sessionID": null == c ? void 0 : c.sessionID, "roomSessionID": null == c ? void 0 : c.roomSessionID }) } this.logger.info("zb.sh.fsl call success") }, A.prototype.handleReconnectStream = function (e) { var t, A, r, o, n, s, a; this.logger.info("zb.sh.hrs call"); var c = this.streamCenter.publisherList, g = this.streamCenter.playerList; this.logger.info("zb.sh.hrs publish " + Object.keys(this.streamCenter.publisherList)); var u = function I(g) { if ((null === (A = null === (t = c[g]) || void 0 === t ? void 0 : t.room) || void 0 === A ? void 0 : A.roomID) !== l.roomID) return "continue"; var I = e.find(function (e) { return e.stream_id == g }), u = I && !(I.anchor_id_name === l.stateCenter.idName || I.id_name === l.stateCenter.idName || I.user_id === l.stateCenter.idName); if (l.logger.info("zb.sh.hrs stream ".concat(g, " ").concat(!!I, " ").concat(u, " ").concat(null === (r = c[g].publisher) || void 0 === r ? void 0 : r.state)), (null === (o = c[g].publisher) || void 0 === o ? void 0 : o.state) != i.ENUM_PUBLISH_STATE.publishing && c[g].state !== i.ENUM_PLAYER_STATE.playing || I && !u) { if (((null === (n = c[g].publisher) || void 0 === n ? void 0 : n.state) == i.ENUM_PUBLISH_STATE.stop || c[g].state === i.ENUM_PLAYER_STATE.stop) && !(null === (a = null === (s = c[g]) || void 0 === s ? void 0 : s.retryStreamHandler) || void 0 === a ? void 0 : a.maxTimer) && e.find(function (e) { return e.stream_id == g })) { l.updateStreamInfo(g, i.ENUM_STREAM_SUB_CMD.liveEnd); for (var h = 0; h < l.room.streamList.length; h++)if (l.room.streamList[h].stream_id == g) { l.room.streamList.splice(h--, 1); break } } } else l.updateStreamInfo(g, i.ENUM_STREAM_SUB_CMD.liveBegin, l.stateCenter.publishStreamList[g].extra_info) }, l = this; for (var h in c) u(h); for (var h in c) c[h].room.roomID === this.roomID && c[h].isReDispatch && (this.logger.info("zb.sh.hrs " + h + "retry dispatch"), (C = c[h].retryDispatchHandler).stopMaxTime(), C.invalid(), C.initStream(h, c[h].publishOption, !0), C.active(0), c[h].isReDispatch = !1); for (var h in g) { var C; g[h].room.roomID === this.roomID && g[h].isReDispatch && (this.logger.info("zb.sh.hrs " + h + "retry dispatch"), (C = g[h].retryDispatchHandler).stopMaxTime(), C.invalid(), C.initStream(h, g[h].playOption, !1), C.active(0), g[h].isReDispatch = !1) } var E = this.streamCenter.stopedPlayerList, p = function d(e) { if (E[e].roomID !== f.roomID) return "continue"; var t = f.streamCenter, A = E[e], r = A.playOption, o = A.playStream; t.setPlayStateStart(e, r, A.isDataChannel); var n = t.playerList[e].retryDispatchHandler; t.playSuccessCallBackList[e] = E[e].sucCallBack ? E[e].sucCallBack : function (e) { for (var t = document.querySelectorAll("video, audio"), A = 0; A < t.length; A++)o && t[A].srcObject === o && (o.getTracks().forEach(function (e) { return o.removeTrack(e) }), e.clone().getTracks().forEach(function (e) { return o.addTrack(e) })) }, E[e].errCallBack && (t.playErrorCallBackList[e] = E[e].errCallBack), t.onPlayStateUpdate(i.ENUM_PLAY_STATE_UPDATE.retry, e, { "code": 0, "message": "" }), n.stopMaxTime(), n.invalid(), n.initStream(e, r, !1), n.startMaxTime(), n.active(0), delete E[e] }, f = this; for (var h in E) p(h); this.logger.info("zb.sh.hrs end") }, A.prototype.makeCallbackStreamList = function (e) { var t, A = []; if (this.stateCenter.useNetAgent && this.stateCenter.appConfig && (t = this.stateCenter.appConfig.media_config.play_config.resource_info.filter(function (e) { return [i.SignalResourceType.CDN, i.SignalResourceType.DG].includes(e.resource_type) })), e && e.length > 0) for (var r = 0; r < e.length; r++) { var o = e[r].stream_id; if (t && t.length) for (var n = 0; n < t.length; n++) { for (var s = t[n].resource_type == i.SignalResourceType.DG ? "_plus" : "", a = [], c = [], g = [], u = 0; u < t[n].service_info.length; u++) { var l = t[n].service_info[u], h = l.protocol, d = l.url_template.replace("{STREAM_NAME}", o); switch (h) { case i.ProtocolType.FLV: a.push(d); break; case i.ProtocolType.HLS: c.push(d); break; case i.ProtocolType.RTMP: g.push(d) } } e[r]["urls_flv" + s] = a, e[r]["urls_m3u8" + s] = c, e[r]["urls_rtmp" + s] = g } var C = { "user": { "userID": e[r].anchor_id_name || e[r].id_name, "userName": e[r].anchor_nick_name || e[r].nick_name }, "extraInfo": e[r].extra_info, "streamID": e[r].stream_id, "roomID": "", "urlFlv": "", "urlFlvPlus": "", "urlRtmp": "", "urlHls": "", "urlHlsPlus": "", "urlHttpsFlv": "", "urlHttpsHls": "", "streamGID": e[r].stream_gid, "closeType": e[r].close_type }; this.setCDNInfo(C, e[r]), A.push(C) } return A }, A.prototype.sendBizChannelRequest = function (e, t, A, r) { var i = this; void 0 === r && (r = !1), e = Object.assign(e, { "is_retry_req": r ? 1 : 0 }); var o = this.room; this.rtm.service.sendMessage("biz_channel", e, function (e, A) { t(e.header.seq, e.body.cmd, e.body.rsp_body) }, function (r, o) { var n = r.body.err_code; "number" != typeof n || 2002 !== n ? A(n, o, r.body.rsp_body) : i.sendBizChannelRequest(e, t, A, !0) }, void 0, { "roomID": null == o ? void 0 : o.roomID, "sessionID": null == o ? void 0 : o.sessionID, "roomSessionID": null == o ? void 0 : o.roomSessionID }) }, A.prototype.sendBizChannelRequestV3 = function (e, t, A, r) { var i = this, o = e.server, s = e.location, a = this.rtm.netAgent, c = this.room, g = void 0; t && (g = JSON.stringify(t)), this.logger.info(n.ZEGO_WEBRTC_ACTION.STREAMHANDLER_SEND_BIZCHANNEL_REQUESTV3 + " " + JSON.stringify(g) + " request " + JSON.stringify(e)), a.startHttpRequest({ "service": o, "headers": [{ "Token-Appid": this.stateCenter.appid + "" }, { "Token-Check": "true" }, { "Token-Str": null == c ? void 0 : c.token }, { "Token-Userid": this.stateCenter.idName }, { "Token-Biztype": 0 }], "body": t, "idName": this.stateCenter.idName, "method_no": 2, "ack": !1, "location": s }, function (e) { i.logger.info(n.ZEGO_WEBRTC_ACTION.STREAMHANDLER_SEND_BIZCHANNEL_REQUESTV3 + " rsp " + JSON.stringify(e.body)); var o = e.status_code, s = e.body; if (200 === o) { var a = s; if ("string" == typeof s) try { a = JSON.parse(s) } catch (e) { throw r(o), e } var c = a.code, g = a.data, u = void 0; try { u = JSON.parse(g) } catch (e) { u = g } if (0 !== c) return "number" == typeof c && 2002 === c ? void i.sendBizChannelRequest(t, A, r, !0) : void r(o, c, u); A(u) } else r(o) }, function (e) { r(-1, null == e ? void 0 : e.code, void 0, e) }) }, A.prototype.sendBizChannelRequestV2 = function (e, t, A, r) { var i = this, o = e.server, s = e.location, a = e.cmd, c = e.channel, g = this.rtm.netAgent, u = this.room, l = void 0, h = t.timestamp; t && (l = JSON.stringify(t)); var d = { "cmd": a, "req_body": l, "appid": this.stateCenter.appid, "timestamp": h || Math.ceil((new Date).getTime() / 1e3), "token": null == u ? void 0 : u.token, "user_id": this.stateCenter.idName, "channel": c || "media" }; this.logger.info(n.ZEGO_WEBRTC_ACTION.STREAMHANDLER_SEND_BIZCHANNEL_REQUESTV2 + " " + JSON.stringify(d) + " request " + JSON.stringify(e)), g.startHttpRequest({ "service": o, "headers": [], "body": d, "idName": this.stateCenter.idName, "method_no": 2, "ack": !1, "location": s }, function (e) { i.logger.info(n.ZEGO_WEBRTC_ACTION.STREAMHANDLER_SEND_BIZCHANNEL_REQUESTV2 + " rsp " + JSON.stringify(e.body)); var o = e.status_code, s = e.body; if (200 === o) { var a = s; if ("string" == typeof s) try { a = JSON.parse(s) } catch (e) { throw r(o), e } var c = a.err_code, g = a.rsp_body, u = void 0; try { u = JSON.parse(g) } catch (e) { u = g } if (0 !== c) return "number" == typeof c && 2002 === c ? void i.sendBizChannelRequest(t, A, r, !0) : void r(o, c, u); A(u) } else r(o) }, function (e) { r(-1, null == e ? void 0 : e.code, void 0, e) }) }, A.prototype.updateStreamExtraInfo = function (e, t, A, r) { }, A.prototype.setStreamExtraInfo = function (e, t, A, r) { }, A.prototype._publishTarget = function (e, t, A) { }, A.prototype.patchStreamList = function (e) { var t = this; if ("number" == typeof e.body.StreamRefresh && 0 !== e.body.StreamRefresh) return this.logger.info(n.ZEGO_WEBRTC_ACTION.STREAMHANDLER_PATCH_STREAM_LIST + " stream refresh "), void this.fetchStreamList(); this.logger.info(n.ZEGO_WEBRTC_ACTION.STREAMHANDLER_PATCH_STREAM_LIST + " stream seq " + this.streamSeq + " " + JSON.stringify(this.streamSeqMergeMap)), e.body.stream_seq > this.streamSeq && !this.streamSeqMergeMap && (this.streamSeqMergeMap = {}, this.logger.info(n.ZEGO_WEBRTC_ACTION.STREAMHANDLER_PATCH_STREAM_LIST + " call update stream " + this.streamSeq + " server " + e.body.stream_seq), this.streamSeqMergeTimer && clearTimeout(this.streamSeqMergeTimer), this.streamSeqMergeTimer = setTimeout(function () { t.handleMergeTimeout() }, this.streamListHBMergeInterval)), this.minStreamSeq = e.body.stream_seq }, A.prototype.getStreamSeq = function () { return this.streamSeq }, A.prototype.mergeStreamByStreamSeq = function (e, t, A) { var r = this; this.streamSeqMergeMap || (this.logger.warn(n.ZEGO_WEBRTC_ACTION.STREAMHANDLER_MERGE_STREAM_BY_STREAM_SEQ + " new merge stream list " + this.streamSeq + " server " + t), this.streamSeqMergeMap = {}, this.streamSeqMergeTimer && clearTimeout(this.streamSeqMergeTimer), this.streamSeqMergeTimer = setTimeout(function () { r.handleMergeTimeout() }, this.streamListMergeInterval)), this.logger.info(n.ZEGO_WEBRTC_ACTION.STREAMHANDLER_MERGE_STREAM_BY_STREAM_SEQ + " ".concat(this.streamSeqMergeMap, " ").concat(e, " ").concat(t, " ").concat(A)), this.streamSeqMergeMap[t] = { "cmd": e, "streamList": A } }, A.prototype.handleMergeTimeout = function () { if (this.streamSeqMergeMap) { var e = Object.keys(this.streamSeqMergeMap).map(function (e) { return +e }).sort(function (e, t) { return e - t }); e[e.length - 1] - e[0] + 1 === e.length || e[e.length - 1] >= this.minStreamSeq ? this.mergeStream(e) : (this.streamSeqMergeMap = null, this.fetchStreamList()) } }, A.prototype.mergeStream = function (e) { var t = this; this.logger.info(n.ZEGO_WEBRTC_ACTION.STREAMHANDLER_MERGE_STREAM + " merge streamList " + this.streamSeq + " streamSeqList " + e.join(",")); var A = e[e.length - 1], r = []; e.forEach(function (e) { if (t.streamSeqMergeMap && t.streamSeqMergeMap[e]) switch (t.streamSeqMergeMap[e].cmd) { case i.ENUM_STREAM_UPDATE_CMD.added: t.streamSeqMergeMap[e].streamList.forEach(function (e) { var t = r.findIndex(function (t) { return t.stream_id == e.stream_id }); -1 !== t && r.splice(t), r.push(e) }); break; case i.ENUM_STREAM_UPDATE_CMD.deleted: t.streamSeqMergeMap[e].streamList.forEach(function (e) { var t = r.findIndex(function (t) { return t.stream_id == e.stream_id }); -1 !== t && r.splice(t) }); break; case i.ENUM_STREAM_UPDATE_CMD.updated: t.streamSeqMergeMap[e].streamList.forEach(function (e) { var t = r.findIndex(function (t) { return t.stream_id == e.stream_id }); -1 !== t && r.splice(t), r.push(e) }) } }), this.streamSeqMergeMap = null, this.logger.info(n.ZEGO_WEBRTC_ACTION.STREAMHANDLER_MERGE_STREAM + " " + r), this.handleFullUpdateStream(A, r) }, A.prototype.reset = function () { this.minStreamSeq = 0, this.streamSeqMergeMap = null, this.streamSeqMergeTimer && (clearTimeout(this.streamSeqMergeTimer), this.streamSeqMergeTimer = void 0), this.streamListHBMergeInterval = 2e3, this.streamListMergeInterval = 5e3 }, A }(); t.StreamHandler = c }, "5123": function _(e, t, r) { "use strict"; var i; Object.defineProperty(t, "__esModule", { "value": !0 }), t.ENUM_BROADCASTER_STATUS = t.ENUM_PLAY_SOURCE_TYPE = t.ExceptionCode = t.ENUM_PUBLISH_STATE_NEGO = t.ENUM_PUSH_SIGNAL_SUB_CMD = t.ENUM_SIGNAL_SUB_CMD = t.QUALITYLEVEL = t.SERVER_ERROR_CODE = t.ENUM_STREAM_UPDATE_CMD_PRI = t.ENUM_STREAM_UPDATE_CMD = t.MINIUM_HEARTBEAT_INTERVAL = t.STREAM_DELETE_REASON = t.ENUM_NETWORK_STATE = t.USER_RUN_STATE = t.ENUM_RUN_STATE = t.ENUM_STREAM_UPDATE_TYPE = t.ENUM_STREAM_CMD_PRI = t.ENUM_STREAM_SUB_CMD = t.ENUM_PUBLISH_STREAM_STATE = t.MAX_RETRY_CONNECT_INTERVAL = t.MAX_TRANS_DATA_LENGTH = t.MAX_TRANS_TYPE_LENGTH = t.MAX_MIX_TASK_ID_LENGTH = t.MAX_MESSAGE_LENGTH = t.MAX_ROOM_ID_LENGTH = t.MAX_USER_NAME_LENGTH = t.MAX_USER_ID_LENGTH = t.MAX_STREAM_ID_LENGTH = t.MAX_TRY_HEARTBEAT_COUNT = t.SEND_MSG_TIMEOUT = t.SEND_MSG_RESET = t.MAX_TRY_CONNECT_COUNT = t.streamMap = t.ENUM_CONNECT_STATE = t.ProtocolType = t.SignalResourceType = t.ENUM_PROBE_STATE = t.ENUM_PLAY_STATE_NEGO = t.ENUM_PLAYER_STATE = t.ENUM_PLAY_STATE = t.ENUM_PUBLISH_STATE = t.ENUM_SCREEM_RESOLUTION_TYPE = t.ENUM_RESOLUTION_TYPE = t.ENUM_SIGNAL_STATE = t.ERROR_CODES = t.ENUM_REMOTE_TYPE = t.LOG_LEVEL = t.ENUM_LOG_LEVEL = t.ROOMVERSION = t.PROTO_VERSION = void 0, t.ZReporter = t.BusinessService = t.NetConnection = t.ZegoExpressWebRTM = t.ZegoDataReport = t.ZegoLogger = t.ZegoExpressWebRTMEngine = t.getReportSeq = t.getSeq = t.ZegoVoiceChangerPreset = t.EncodecSelectionModeType = t.H264ProfileType = t.TRACER_LEVEL = t.ZegoScenario = t.Segmentation = t.ResourceMode = t.PlayMode = t.ZegoSEIType = t.QUALITY_CONSTANT = t.QualityGrade = t.REPORT_ACTION = t.ENUM_RETRY_STATE = t.ENUM_PLAY_STATE_UPDATE = t.ENUM_PUBLISH_STATE_UPDATE = t.LinkedList = t.ListNode = t.E_CLIENT_TYPE = t.ENUM_SOURCE_TYPE = t.ENUM_DISPATCH_TYPE = void 0, t.PROTO_VERSION = "2.25.6", t.ROOMVERSION = "V1", function (e) { e[e.debug = 0] = "debug", e[e.info = 1] = "info", e[e.warn = 2] = "warn", e[e.error = 3] = "error", e[e.report = 99] = "report", e[e.disable = 100] = "disable" }(t.ENUM_LOG_LEVEL || (t.ENUM_LOG_LEVEL = {})), t.LOG_LEVEL = { "debug": 0, "info": 1, "warn": 2, "error": 3, "report": 99, "disable": 100 }, function (e) { e[e.disable = 0] = "disable", e[e.websocket = 1] = "websocket", e[e.https = 2] = "https" }(t.ENUM_REMOTE_TYPE || (t.ENUM_REMOTE_TYPE = {})), t.ERROR_CODES = { "ROOM_SESSION_ID_ERR": 1000000152, "FETCH_TRANS_UNKNOWN_CHANNEL": 1000001108, "FETCH_TRANS_UNKNOWN_TYPE": 1000001109, "FETCH_TRANS_WRONG_SEQ": 1000001110 }, function (e) { e[e.disconnected = 0] = "disconnected", e[e.connecting = 1] = "connecting", e[e.connected = 2] = "connected" }(t.ENUM_SIGNAL_STATE || (t.ENUM_SIGNAL_STATE = {})), t.ENUM_RESOLUTION_TYPE = { "LOW": { "width": 320, "height": 240, "frameRate": 15, "bitRate": 300 }, "MEDIUM": { "width": 640, "height": 480, "frameRate": 15, "bitRate": 800 }, "HIGH": { "width": 1280, "height": 720, "frameRate": 20, "bitRate": 1500 } }, t.ENUM_SCREEM_RESOLUTION_TYPE = { "LOW": { "frameRate": 20, "bitRate": 800 }, "MEDIUM": { "frameRate": 15, "bitRate": 1500 }, "HIGH": { "frameRate": 5, "bitRate": 2e3 } }, t.ENUM_PUBLISH_STATE = { "start": 0, "waitingSessionRsp": 1, "waitingOfferRsp": 2, "waitingServerAnswer": 3, "waitingServerICE": 4, "connecting": 5, "publishing": 6, "stop": 7, "didNotStart": 8 }, t.ENUM_PLAY_STATE = { "start": 0, "waitingSessionRsp": 1, "waitingOfferRsp": 2, "waitingServerAnswer": 3, "waitingServerICE": 4, "connecting": 5, "playing": 6, "stop": 7, "didNotStart": 8 }, t.ENUM_PLAYER_STATE = { "start": 0, "playing": 1, "stop": 2 }, t.ENUM_PLAY_STATE_NEGO = { "stop": 0, "start": 1, "waiterAnswer": 2, "waitingCandidate": 3, "sendCandidate": 4, "iceConnected": 5, "iceDisconnected": 6, "iceClosed": 7, "iceFailed": 8 }, function (e) { e[e.tryProbe = 0] = "tryProbe", e[e.probed = 2] = "probed" }(t.ENUM_PROBE_STATE || (t.ENUM_PROBE_STATE = {})), function (e) { e[e.CDN = 0] = "CDN", e[e.RTC = 1] = "RTC", e[e.L3 = 2] = "L3", e[e.DG = 3] = "DG" }(t.SignalResourceType || (t.SignalResourceType = {})), function (e) { e[e.UDP = 0] = "UDP", e[e.RTMP = 1] = "RTMP", e[e.FLV = 2] = "FLV", e[e.HLS = 3] = "HLS", e[e.WEBRTC = 4] = "WEBRTC" }(t.ProtocolType || (t.ProtocolType = {})), t.ENUM_CONNECT_STATE = { "disconnect": 0, "connecting": 1, "connected": 2 }, t.streamMap = { "/lr/push/stream_add": 12001, "/lr/push/stream_delete": 12002, "/lr/push/stream_update": 12003 }, t.MAX_TRY_CONNECT_COUNT = 3, t.SEND_MSG_RESET = 2, t.SEND_MSG_TIMEOUT = 1, t.MAX_TRY_HEARTBEAT_COUNT = 5, t.MAX_STREAM_ID_LENGTH = 256, t.MAX_USER_ID_LENGTH = 64, t.MAX_USER_NAME_LENGTH = 256, t.MAX_ROOM_ID_LENGTH = 128, t.MAX_MESSAGE_LENGTH = 1024, t.MAX_MIX_TASK_ID_LENGTH = 256, t.MAX_TRANS_TYPE_LENGTH = 128, t.MAX_TRANS_DATA_LENGTH = 4096, t.MAX_RETRY_CONNECT_INTERVAL = 12, t.ENUM_PUBLISH_STREAM_STATE = { "waiting_url": 1, "tryPublish": 2, "update_info": 3, "publishing": 4, "stop": 5, "retryPublish": 6 }, t.ENUM_STREAM_SUB_CMD = { "liveNone": 0, "liveBegin": 2001, "liveEnd": 2002, "liveUpdate": 2003 }, t.ENUM_STREAM_CMD_PRI = { "liveBegin": "zegochat_js.room_stream_create_req", "liveEnd": "zegochat_js.room_stream_delete_req", "liveUpdate": "zegochat_js.room_stream_update_req" }, t.ENUM_STREAM_UPDATE_TYPE = { "added": 1, "deleted": 0 }, function (e) { e[e.logout = 0] = "logout", e[e.trylogin = 1] = "trylogin", e[e.login = 2] = "login" }(t.ENUM_RUN_STATE || (t.ENUM_RUN_STATE = {})), function (e) { e[e.logout = 0] = "logout", e[e.trylogin = 1] = "trylogin", e[e.login = 2] = "login", e[e.reconnect = 3] = "reconnect" }(t.USER_RUN_STATE || (t.USER_RUN_STATE = {})), function (e) { e[e.offline = 0] = "offline", e[e.online = 1] = "online" }(t.ENUM_NETWORK_STATE || (t.ENUM_NETWORK_STATE = {})), t.STREAM_DELETE_REASON = { "0": { "code": 1, "description": "user_stop_publishing_stream_normal" }, "1": { "code": 2, "description": "user_heart_beat_timeout" }, "2": { "code": 3, "description": "user_repeat_login" }, "3": { "code": 4, "description": "user_kicked_out" }, "4": { "code": 5, "description": "user_offline" }, "100": { "code": 6, "description": "remove_by_server" } }, function (e) { e[e.UNKNOWN = 0] = "UNKNOWN", e[e.CDN = 1] = "CDN", e[e.RTC = 2] = "RTC", e[e.L3 = 3] = "L3" }(i || (i = {})), t.MINIUM_HEARTBEAT_INTERVAL = 3e3, t.ENUM_STREAM_UPDATE_CMD = { "added": 12001, "deleted": 12002, "updated": 12003 }, t.ENUM_STREAM_UPDATE_CMD_PRI = { "added": 1, "updated": 2, "deleted": 3 }, t.SERVER_ERROR_CODE = 1e4, function (e) { e[e.low = 1] = "low", e[e.stantard = 2] = "stantard", e[e.hight = 3] = "hight", e[e.custome = 4] = "custome" }(t.QUALITYLEVEL || (t.QUALITYLEVEL = {})), t.ENUM_SIGNAL_SUB_CMD = { "none": 0, "joinLiveRequest": 1001, "joinLiveResult": 1002, "joinLiveInvite": 1003, "joinLiveStop": 1004 }, t.ENUM_PUSH_SIGNAL_SUB_CMD = { "none": 0, "pushJoinLiveRequest": 11001, "pushJoinLiveResult": 11002, "pushJoinLiveInvite": 11003, "pushJoinLiveStop": 11004 }, t.ENUM_PUBLISH_STATE_NEGO = { "stop": 0, "start": 1, "waiterAnswer": 2, "waitingCandidate": 3, "sendCandidate": 4, "iceConnected": 5, "iceDisconnected": 6, "iceClosed": 7, "iceFailed": 8 }, function (e) { e[e.captureFpsToLow = 1001] = "captureFpsToLow", e[e.captureVolumeToLow = 1002] = "captureVolumeToLow", e[e.sendVideoBitrateToLow = 1003] = "sendVideoBitrateToLow", e[e.sendFpsToLow = 1004] = "sendFpsToLow", e[e.sendAudioBitrateToLow = 1005] = "sendAudioBitrateToLow", e[e.receiveVolumeToLow = 1006] = "receiveVolumeToLow", e[e.receiveAudioDecodedFail = 1007] = "receiveAudioDecodedFail", e[e.receiveVideoDecodedFail = 1008] = "receiveVideoDecodedFail", e[e.receiveVideoFpsDecodedToLow = 1009] = "receiveVideoFpsDecodedToLow", e[e.renderVideoFpsToLow = 1010] = "renderVideoFpsToLow", e[e.captureFpsNormal = 2001] = "captureFpsNormal", e[e.captureVolumeNormal = 2002] = "captureVolumeNormal", e[e.sendVideoBitrateNormal = 2003] = "sendVideoBitrateNormal", e[e.sendFpsNormal = 2004] = "sendFpsNormal", e[e.sendAudioBitrateNormal = 2005] = "sendAudioBitrateNormal", e[e.receiveVolumeNormal = 2006] = "receiveVolumeNormal", e[e.receiveAudioDecodedNormal = 2007] = "receiveAudioDecodedNormal", e[e.receiveVideoDecodedNormal = 2008] = "receiveVideoDecodedNormal", e[e.receiveVideoFpsDecodedNormal = 2009] = "receiveVideoFpsDecodedNormal", e[e.renderVideoFpsNormal = 2010] = "renderVideoFpsNormal" }(t.ExceptionCode || (t.ExceptionCode = {})), function (e) { e[e.cdn = 0] = "cdn", e[e.ultra = 1] = "ultra" }(t.ENUM_PLAY_SOURCE_TYPE || (t.ENUM_PLAY_SOURCE_TYPE = {})), function (e) { e[e.stop = 0] = "stop", e[e.start = 1] = "start" }(t.ENUM_BROADCASTER_STATUS || (t.ENUM_BROADCASTER_STATUS = {})), function (e) { e[e.cdn = 0] = "cdn", e[e.ultra = 1] = "ultra", e[e.customUrl = 2] = "customUrl" }(t.ENUM_DISPATCH_TYPE || (t.ENUM_DISPATCH_TYPE = {})), function (e) { e[e.CDN = 0] = "CDN", e[e.BGP = 1] = "BGP" }(t.ENUM_SOURCE_TYPE || (t.ENUM_SOURCE_TYPE = {})), function (e) { e[e.ClientType_None = 0] = "ClientType_None", e[e.ClientType_H5 = 1] = "ClientType_H5", e[e.ClientType_SmallPragram = 2] = "ClientType_SmallPragram", e[e.ClientType_Webrtc = 3] = "ClientType_Webrtc" }(t.E_CLIENT_TYPE || (t.E_CLIENT_TYPE = {})); var o = function () { function A(e, t) { void 0 === e && (e = null), void 0 === t && (t = null), this._id = null, this.next = null, this.prev = null, this._id = e, this._data = t } return Object.defineProperty(A.prototype, "id", { "get": function get() { return this._id ? this._id : null }, "set": function set(e) { this._id = e }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "data", { "get": function get() { return this._data }, "set": function set(e) { this._data = e }, "enumerable": !1, "configurable": !0 }), A.prototype.hasNext = function () { return this.next && this.next.id }, A.prototype.hasPrev = function () { return this.prev && this.prev.id }, A }(); t.ListNode = o; var n = function () { function A() { this.start = new o, this.end = new o, this._idCounter = 0, this._numNodes = 0, this.start.next = this.end, this.start.prev = null, this.end.prev = this.start, this.end.next = null } return A.prototype.insertBefore = function (e, t) { var A = new o(this._idCounter, t); return A.next = e, A.prev = e.prev, e.prev && (e.prev.next = A), e.prev = A, ++this._idCounter, ++this._numNodes, A }, A.prototype.addLast = function (e) { return this.insertBefore(this.end, e) }, A.prototype.add = function (e) { return this.addLast(e) }, A.prototype.getFirst = function () { return 0 === this._numNodes ? null : this.start.next }, A.prototype.getLast = function () { return 0 === this._numNodes ? null : this.end.prev }, A.prototype.size = function () { return this._numNodes }, A.prototype.getFromFirst = function (e) { var t = 0, A = this.start.next; if (e >= 0) for (; t < e && null !== A;)A = A.next, ++t; else A = null; if (null === A) throw "Index out of bounds."; return A }, A.prototype.get = function (e) { return 0 === e ? this.getFirst() : e === this._numNodes - 1 ? this.getLast() : this.getFromFirst(e) }, A.prototype.remove = function (e) { return e.prev && (e.prev.next = e.next), e.next && (e.next.prev = e.prev), --this._numNodes, e }, A.prototype.removeFirst = function () { var e = null; return this._numNodes > 0 && this.start.next && (e = this.remove(this.start.next)), e }, A.prototype.removeLast = function () { var e = null; return this._numNodes > 0 && this.end.prev && (e = this.remove(this.end.prev)), e }, A.prototype.removeAll = function () { this.start.next = this.end, this.end.prev = this.start, this._numNodes = 0, this._idCounter = 0 }, A.prototype.each = function (e) { for (var t = this.start; t.hasNext();)e(t = t.next) }, A.prototype.find = function (e) { for (var t = this.start, A = !1, r = null; t.hasNext() && !A;)e(t = t.next) && (r = t, A = !0); return r }, A.prototype.map = function (e) { for (var t = this.start, A = []; t.hasNext();)e(t = t.next) && A.push(t); return A }, A.prototype.push = function (e) { return this.addLast(e) }, A.prototype.unshift = function (e) { this.insertBefore(this._numNodes > 0 ? this.start.next : this.end, e) }, A.prototype.pop = function () { return this.removeLast() }, A.prototype.shift = function () { return this.removeFirst() }, A }(); t.LinkedList = n, t.ENUM_PUBLISH_STATE_UPDATE = { "start": 0, "error": 1, "retry": 2 }, t.ENUM_PLAY_STATE_UPDATE = { "start": 0, "error": 1, "retry": 2, "stop": 3 }, t.ENUM_RETRY_STATE = { "didNotStart": 0, "retrying": 1, "finished": 2 }, t.REPORT_ACTION = { "eventStart": "eventStart", "eventEndWithMsgInfo": "eventEndWithMsgInfo", "addEventMsg": "addEventMsg", "addEvent": "addEvent", "eventEnd": "eventEnd", "addMsgInfo": "addMsgInfo" }, function (e) { e[e.Unknown = -1] = "Unknown", e[e.Excellent = 0] = "Excellent", e[e.Good = 1] = "Good", e[e.Middle = 2] = "Middle", e[e.Poor = 3] = "Poor", e[e.Die = 4] = "Die" }(t.QualityGrade || (t.QualityGrade = {})), function (e) { e[e.MinQuality = 0] = "MinQuality", e[e.DieQuality = 0] = "DieQuality", e[e.PoorMinQuality = 1] = "PoorMinQuality", e[e.MiddleMinQuality = 30] = "MiddleMinQuality", e[e.GoodMinQuality = 60] = "GoodMinQuality", e[e.ExcellentMinQuality = 85] = "ExcellentMinQuality", e[e.MaxQuality = 100] = "MaxQuality" }(t.QUALITY_CONSTANT || (t.QUALITY_CONSTANT = {})), function (e) { e[e.ZegoDefined = 0] = "ZegoDefined", e[e.UserUnregister = 1] = "UserUnregister" }(t.ZegoSEIType || (t.ZegoSEIType = {})), function (e) { e[e.CDN = 0] = "CDN", e[e.L3 = 1] = "L3" }(t.PlayMode || (t.PlayMode = {})), function (e) { e[e.RTC = 0] = "RTC", e[e.CDN = 1] = "CDN", e[e.L3 = 2] = "L3", e[e.DG = 3] = "DG" }(t.ResourceMode || (t.ResourceMode = {})), function (e) { e[e.PortraitSegmentation = 0] = "PortraitSegmentation" }(t.Segmentation || (t.Segmentation = {})), function (e) { e[e.Default = 3] = "Default", e[e.StandardVideoCall = 4] = "StandardVideoCall", e[e.HighVideoCall = 5] = "HighVideoCall", e[e.StandardChatroom = 6] = "StandardChatroom", e[e.HighQualityChatroom = 7] = "HighQualityChatroom", e[e.Broadcast = 8] = "Broadcast" }(t.ZegoScenario || (t.ZegoScenario = {})), function (e) { e[e.I = 0] = "I", e[e.H = 10] = "H", e[e.M = 100] = "M", e[e.L = 1e3] = "L" }(t.TRACER_LEVEL || (t.TRACER_LEVEL = {})), function (e) { e[e.BASE_LINE = 1] = "BASE_LINE", e[e.MAIN = 2] = "MAIN", e[e.HIGH = 3] = "HIGH" }(t.H264ProfileType || (t.H264ProfileType = {})), function (e) { e.ONLY_BASELINE = "only_baseline", e.HARD_SOFT_ENCODEC_FIRST = "hard_or_soft_encodec_first", e.HIGH_PROFILE_FIRST = "high_profile_first" }(t.EncodecSelectionModeType || (t.EncodecSelectionModeType = {})), function (e) { e[e.NONE = 0] = "NONE", e[e.MEN_TO_CHILD = 1] = "MEN_TO_CHILD", e[e.MEN_TO_WOMEN = 2] = "MEN_TO_WOMEN", e[e.WOMEN_TO_CHILD = 3] = "WOMEN_TO_CHILD", e[e.WOMEN_TO_MEN = 4] = "WOMEN_TO_MEN", e[e.FOREIGNER = 5] = "FOREIGNER", e[e.OPTIMUS_PRIME = 6] = "OPTIMUS_PRIME", e[e.ANDROID = 7] = "ANDROID", e[e.ETHEREAL = 8] = "ETHEREAL", e[e.MALE_MAGNETIC = 9] = "MALE_MAGNETIC", e[e.FEMALE_FRESH = 10] = "FEMALE_FRESH", e[e.MAJOR_C = 11] = "MAJOR_C", e[e.MINOR_A = 12] = "MINOR_A", e[e.HARMONIC_MINOR = 13] = "HARMONIC_MINOR", e[e.FEMALE_ENERGETIC = 14] = "FEMALE_ENERGETIC", e[e.RICHNESS = 15] = "RICHNESS", e[e.MUFFLED = 16] = "MUFFLED", e[e.ROUNDNESS = 17] = "ROUNDNESS", e[e.FALSETTO = 18] = "FALSETTO", e[e.FULLNESS = 19] = "FULLNESS", e[e.CLEAR = 20] = "CLEAR", e[e.HIGHLY_RESONANT = 21] = "HIGHLY_RESONANT", e[e.LOUD_CLEAR = 22] = "LOUD_CLEAR" }(t.ZegoVoiceChangerPreset || (t.ZegoVoiceChangerPreset = {})); var s = r(4119); Object.defineProperty(t, "getSeq", { "enumerable": !0, "get": function get() { return s.getSeq } }), Object.defineProperty(t, "getReportSeq", { "enumerable": !0, "get": function get() { return s.getReportSeq } }), Object.defineProperty(t, "ZegoExpressWebRTMEngine", { "enumerable": !0, "get": function get() { return s.ZegoExpressWebRTMEngine } }), Object.defineProperty(t, "ZegoLogger", { "enumerable": !0, "get": function get() { return s.ZegoLogger } }), Object.defineProperty(t, "ZegoDataReport", { "enumerable": !0, "get": function get() { return s.ZegoDataReport } }), Object.defineProperty(t, "ZegoExpressWebRTM", { "enumerable": !0, "get": function get() { return s.ZegoExpressWebRTM } }), Object.defineProperty(t, "NetConnection", { "enumerable": !0, "get": function get() { return s.NetConnection } }), Object.defineProperty(t, "BusinessService", { "enumerable": !0, "get": function get() { return s.BusinessService } }), Object.defineProperty(t, "ZReporter", { "enumerable": !0, "get": function get() { return s.ZReporter } }) }, "2532": function _(e, t) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.errorCodeList = void 0, t.errorCodeList = { "NOT_LOGIN": { "code": 1000002, "message": "not login room" }, "STREAMID_TOO_LONG": { "code": 1000014, "message": "stream ID is too long" }, "STREAM_ID_NULL": { "code": 1000015, "message": "streamID is empty" }, "STREAM_ID_INVALID_CHARACTER": { "code": 1000016, "message": "stream ID contains illegal characters" }, "NETWORK_BROKEN": { "code": 1000017, "message": "network is broken" }, "LOCALSTREAM_WRONG": { "code": 1000018, "message": "local stream wrong" }, "INPUT_PARAM": { "code": 1100001, "message": "input param error." }, "TIMEOUT": { "code": 1100002, "message": "network timeout." }, "SOCKET_CLOSE": { "code": 1100003, "msg": "socket close" }, "INIT_SDK_WRONG": { "code": 1101e3, "message": "init sdk wrong" }, "WX_GET_SETTING_FAIL": { "code": 1101001, "message": "wx get setting fail" }, "GET_CONFIG_FAIL": { "code": 1101002, "message": "get app config fail" }, "MODULE_NOT_IMPORTED": { "code": 1101003, "message": "Module not imported" }, "RTC_LOGIN_ERROR": { "code": 1101004, "message": "signal login fail" }, "RTC_HB_ERROR": { "code": 1101005, "message": "signal hb fail" }, "USER_ID_NULL": { "code": 1002005, "message": "user ID is empty" }, "USER_ID_INVALID_CHARACTER": { "code": 1002006, "message": "user ID contains illegal characters" }, "USER_ID_TOO_LONG": { "code": 1002007, "message": "user ID is too long" }, "USER_NAME_NULL": { "code": 1002008, "message": "username is empty" }, "USER_NAME_TOO_LONG": { "code": 1002010, "message": "username is too long" }, "ROOM_ID_NULL": { "code": 1002011, "message": "room ID is empty" }, "ROOM_ID_INVALID_CHARACTER": { "code": 1002012, "message": "room ID contains illegal characters" }, "ROOM_ID_TOO_LONG": { "code": 1002013, "message": "room ID is too long" }, "ROOM_NOT_EXIST": { "code": 1002014, "msg": "room not exist" }, "LOGIN_TIMEOUT": { "code": 1002031, "message": "login timeout" }, "ROOM_MAX_USER_COUNT": { "code": 1002034, "message": "users logging into the room exceeds the maximum number" }, "MULTIPLE_LOGIN_KICKOUT": { "code": 1002050, "message": "kickout may be the same user ID login other" }, "ROOM_RETRY_TIMEOUT": { "code": 1002053, "message": "network is broken and login fail." }, "MANUAL_KICKOUT": { "code": 1002055, "message": "server has sent a signal to kick out" }, "ROOM_INNER_ERROR": { "code": 1002099, "message": "room inner error" }, "HEARTBEAT_TIMEOUT": { "code": 1102001, "message": "heartbeat timeout." }, "PARSE_JSON_ERROR": { "code": 1102011, "message": "parse json error." }, "LOGIN_PROCESSING": { "code": 1102012, "message": "login is processing." }, "LIVEROOM_REQUEST_ERROR": { "code": 1102013, "message": "liveroom request error." }, "ZPUSH_REQUEST_FAIL": { "code": 1102014, "message": "zpush request fail." }, "LOGIN_STATE_WRONG": { "code": 1102015, "message": "user login state is wrong." }, "TOKEN_ERROR": { "code": 1102016, "message": "token error" }, "DISPATCH_ERROR": { "code": 1102017, "message": "dispatch error" }, "TOKEN_EXPIRED": { "code": 1102018, "message": "token expired" }, "SUBCMD_ERROR": { "code": 1102019, "message": "subcmd error." }, "ZEGO_AUTH_ERROR": { "code": 1102020, "message": "zego auth error." }, "BIZ_CHANNEL_ERROR": { "code": 1102021, "message": "biz channel error." }, "DISPATCH_TIMEOUT": { "code": 1102022, "message": "dispatch request timeout" }, "CONNECT_FAILED": { "code": 1102023, "message": "connect signal fail" }, "PUBLISHER_MEDIA_SERVER_FORBID": { "code": 1003025, "message": "stream is forbided by media server" }, "PUBLISHER_EXTRA_INFO_TOO_LONG": { "code": 1003051, "message": "stream extra info is too long" }, "PUBLISHER_PARAM": { "code": 1103001, "message": "input param error" }, "PUBLISHER_BROWSER_NOT_SUPPORT": { "code": 1103002, "message": "browser do not support" }, "PUBLISHER_DISPATCH_FAIL": { "code": 1103003, "message": "dispatch request error" }, "PUBLISHER_SCREEN_FAILED": { "code": 1103010, "message": "screen fail" }, "ENUMERATE_DEVICES_FAIL": { "code": 1103011, "message": "enumerate devices fail" }, "PUBLISHER_DISPATCH_REQUEST_FAIL": { "code": 1103020, "message": "dispatch request fail" }, "PUBLISHER_SESSION_REQUEST_FAIL": { "code": 1103021, "message": "session request fail" }, "PUBLISHER_CREATE_OFFER_ERROR": { "code": 1103022, "message": "create offer error" }, "PUBLISHER_SET_LOCAL_DESC_ERROR": { "code": 1103023, "message": "setLocalDescription error" }, "PUBLISHER_MEDIA_DESC_ERROR": { "code": 1103024, "message": "mediaDesc error" }, "PUBLISHER_SET_REMOTE_DESC_ERROR": { "code": 1103025, "message": "other side offer error" }, "PUBLISHER_CANDIDATE_ERROR": { "code": 1103026, "message": "candidate error" }, "PUBLISHER_SESSION_CLOSED": { "code": 1103027, "message": "server session closed" }, "PUBLISHER_MEDIA_CONNECTION_ERROR": { "code": 1103028, "message": "ice connection error" }, "PUBLISHER_SERVER_NEGO_TIMEOUT": { "code": 1103030, "message": "negotiation timeout" }, "PUBLISH_DEVICE_OUT_ERR": { "code": 1103041, "message": "device change " }, "PUBLISH_SCREEN_CANCELED": { "code": 1103042, "message": "screen canceled" }, "PUBLISH_SCREEN_NOT_SUPPORT": { "code": 1103043, "message": "screen not support" }, "PUBLISH_NO_PREVIEW": { "code": 1103044, "message": "stream is not from zego" }, "REPEATED_PULL": { "code": 1103049, "message": "repeated pull same stream" }, "PUBLISHER_WEBSOCKET_DISCONNECTED": { "code": 1103050, "message": "websocket disconnected" }, "PUBLISHER_RETRY_TIMEOUT": { "code": 1103051, "message": "publisher retry timeout" }, "PUBLISHER_HTTPS_REQUIRED": { "code": 1103053, "message": "https is required" }, "PUBLISHER_NO_PREVIEW": { "code": 1103054, "message": "no preview" }, "PUBLISHER_STREAM_NO_FOUND": { "code": 1103055, "message": "publish stream no found" }, "PUBLISHER_IS_PUBLISHING": { "code": 1103056, "message": "publish is publishing" }, "PUBLISHER_CLIENT_IP_CHANGED": { "code": 1103058, "message": "client ip changed" }, "PUBLISHER_TTL_OVERTIME": { "code": 1103059, "message": "ttl over time" }, "PUBLISHER_SESSION_TIMEOUT": { "code": 1103060, "message": "session request timeout" }, "PUBLISHER_GET_USER_MEDIA_FAIL": { "code": 1103061, "message": "get media fail" }, "PUBLISHER_DEVICE_NO_ALLOWED": { "code": 1103064, "message": "get device not allowed" }, "PUBLISHER_DEVICE_NO_READABLE": { "code": 1103065, "message": "device is not readable" }, "PUBLISHER_OVER_CONSTRAINED": { "code": 1103066, "message": "device does not meet constraints" }, "PUBLISHER_UPDATE_SDP_TIMEOUT": { "code": 1103067, "message": "update sdp time out" }, "PUBLISHER_UPDATE_SDP_FAIL": { "code": 1103068, "message": "update sdp fail" }, "VIDEO_EFFECT_IS_STARTING": { "code": 1103073, "message": "video effect is starting, please operate after video effect is started" }, "PUBLISHER_NET_PROBE_POOR": { "code": 1103069, "message": "publish stream poor and net probe poor" }, "PUBLISHER_NOT_SUBSCRIBE_BACKGROUND_PROCESS": { "code": 1103070, "message": "background process is start, but not subscribe yet" }, "PLAYER_PARAM": { "code": 1104001, "message": "input parm error" }, "PLAYER_DISPATCH_REQUEST_FAIL": { "code": 1104020, "message": "dispatch request fail" }, "PLAYER_SESSION_REQUEST_FAIL": { "code": 1104021, "message": "session request fail" }, "PLAYER_CREATE_OFFER_ERROR": { "code": 1104022, "message": "create offer error" }, "PLAYER_SET_LOCAL_DESC_ERROR": { "code": 1104023, "message": "setLocalDescription error" }, "PLAYER_MEDIA_DESC_ERROR": { "code": 1104024, "message": "mediaDesc error" }, "PLAYER_SET_REMOTE_DESC_ERROR": { "code": 1104025, "message": "other side offer error" }, "PLAYER_CANDIDATE_ERROR": { "code": 1104026, "message": "candidate error" }, "PLAYER_SESSION_CLOSED": { "code": 1104027, "message": "server session closed" }, "PLAYER_MEDIA_CONNECTION_ERROR": { "code": 1104028, "message": "ice connection error" }, "PLAYER_WEBSOCKET_DISCONNECTED": { "code": 1104029, "message": "websocket disconnected" }, "PLAYER_SERVER_NEGO_TIMEOUT": { "code": 1104030, "message": "negotiation timeout" }, "PLAYER_RETRY_TIMEOUT": { "code": 1104031, "message": "player retry timeout" }, "PLAYER_IS_PLAYING": { "code": 1104032, "message": "player is playing" }, "PLAYER_CLIENT_IP_CHANGED": { "code": 1104033, "message": "client ip changed" }, "PLAYER_TTL_OVERTIME": { "code": 1104034, "message": "ttl is over time" }, "PLAYER_SESSION_RESET": { "code": 1104035, "message": "reset session push" }, "PLAYER_SESSION_TIMEOUT": { "code": 1104036, "message": "session request timeout" }, "PLAYER_PROBE_TIMEOUT": { "code": 1104037, "message": "probe time out" }, "PLAYER_UNSUPPORTED_PROTOCOL": { "code": 1104038, "message": "resource mode is not supported" }, "PLAYER_STREAM_NOT_EXIST": { "code": 1104039, "message": "play stream not found" }, "PLAYER_NET_PROBE_POOR": { "code": 1103040, "message": "stream quality poor and net probe poor" }, "DEVICE_ERROR_TYPE_UNPLUGGED": { "code": 1006006, "message": "the device is unplugged" }, "IM_CONTENT_NULL": { "code": 1009001, "message": "message content is empty" }, "IM_CONTENT_TOO_LONG": { "code": 1009002, "message": "message content is too long" }, "IM_SEND_FAILED": { "code": 1009010, "message": "failed to send message" }, "FREQ_LIMITED": { "code": 1109001, "message": "frequency limited." }, "SET_ROOM_SCENARIO": { "code": 1000067, "message": "Logged in room, setting scenario is not supported" }, "WRONG_FORMAT": { "code": 1103083, "message": "sdp wrong format" }, "SIZE_EXCEEDED": { "code": 1103084, "message": "mini sdp buffer size exceeded" }, "URL_EXCEEDED": { "code": 1103085, "message": "url size exceeded" } } }, "1586": function _(e, t, A) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.ZegoWechatLogEvent = t.ZegoRTCLogEvent = void 0; var r = A(2532), i = A(9268); t.ZegoRTCLogEvent = { "kZMInitSetting": { "event": "/sdk/init", "error": { "kInvalidParamError": r.errorCodeList.INPUT_PARAM }, "system_info": i.getItemString, "servers": i.getItemArrString }, "kZegoTaskRoom": { "event": "room" }, "kZMLoginRoom": { "event": "/sdk/login" }, "kZegoTaskListener": { "event": "listener" }, "kZegoTaskOnListener": { "event": "/sdk/on_listener", "listener": i.getItemString, "error": { "INPUT_PARAM": r.errorCodeList.INPUT_PARAM } }, "kZegoTaskOffListener": { "event": "/sdk/off_listener", "listener": i.getItemString, "error": { "INPUT_PARAM": r.errorCodeList.INPUT_PARAM } }, "kZegoTaskRoomContext": { "event": "room_context" }, "kZegoTaskInitSetting": { "event": "/sdk/init" }, "kZegoTaskCreateStream": { "event": "/sdk/create_stream", "error": { "kBrowserNotSupportError": r.errorCodeList.PUBLISHER_BROWSER_NOT_SUPPORT, "kParamError": r.errorCodeList.PUBLISHER_PARAM, "kScreenCancelError": r.errorCodeList.PUBLISH_SCREEN_CANCELED, "kScreenFailedError": r.errorCodeList.PUBLISHER_SCREEN_FAILED, "kScreenNotSupportError": r.errorCodeList.PUBLISH_SCREEN_NOT_SUPPORT, "kHttpsRequiredError": r.errorCodeList.PUBLISHER_HTTPS_REQUIRED, "kGetUserMediaError": r.errorCodeList.PUBLISHER_GET_USER_MEDIA_FAIL, "kDeviceNoAllowedError": r.errorCodeList.PUBLISHER_DEVICE_NO_ALLOWED, "kDeviceNoReadableError": r.errorCodeList.PUBLISHER_DEVICE_NO_READABLE, "kDeviceOverConstrainedError": r.errorCodeList.PUBLISHER_OVER_CONSTRAINED }, "stream_type": i.getItemString, "screen": i.getItem, "camera": i.getItem, "custom": i.getItem, "preview_conf": i.getItem, "media_stream_id": i.getItemString }, "kZegoTaskPublishStart": { "event": "/sdk/start_publish", "error": { "kPublishParamError": r.errorCodeList.PUBLISHER_PARAM, "kPublishNetworkTimeoutError": r.errorCodeList.TIMEOUT, "kPublishDispatchTimeoutError": r.errorCodeList.DISPATCH_TIMEOUT, "kPublishDispatchError": r.errorCodeList.DISPATCH_ERROR, "kPublishNetworkBrokenError": r.errorCodeList.NETWORK_BROKEN, "kPublishNoPreviewError": r.errorCodeList.PUBLISH_NO_PREVIEW, "kPublishEffectIsStarting": r.errorCodeList.VIDEO_EFFECT_IS_STARTING, "kPublishNoLoginError": r.errorCodeList.NOT_LOGIN, "kPublishRetryTimeoutError": r.errorCodeList.PUBLISHER_RETRY_TIMEOUT, "kMediaServerForbidError": r.errorCodeList.PUBLISHER_MEDIA_SERVER_FORBID, "kPublishTokenExpiredError": r.errorCodeList.TOKEN_EXPIRED, "kPublishSessionClosedError": r.errorCodeList.PUBLISHER_SESSION_CLOSED, "kPublishNegoTimeoutError": r.errorCodeList.PUBLISHER_SERVER_NEGO_TIMEOUT, "kCreateOfferError": r.errorCodeList.PUBLISHER_CREATE_OFFER_ERROR, "kSetLocalDescError": r.errorCodeList.PUBLISHER_SET_LOCAL_DESC_ERROR, "kSessionTimeoutError": r.errorCodeList.PUBLISHER_SESSION_TIMEOUT, "kSessionRequestError": r.errorCodeList.PUBLISHER_SESSION_REQUEST_FAIL, "kSetRemoteDescError": r.errorCodeList.PUBLISHER_SET_REMOTE_DESC_ERROR, "kMediaConnectionError": r.errorCodeList.PUBLISHER_MEDIA_CONNECTION_ERROR, "kWebsocketDisconnectedError": r.errorCodeList.PUBLISHER_WEBSOCKET_DISCONNECTED, "kMediaDescError": r.errorCodeList.PUBLISHER_MEDIA_DESC_ERROR, "kCandidateError": r.errorCodeList.PUBLISHER_CANDIDATE_ERROR, "kIsPublishing": r.errorCodeList.PUBLISHER_IS_PUBLISHING, "kClientIPChangedError": r.errorCodeList.PUBLISHER_CLIENT_IP_CHANGED, "kTTLOverTimeError": r.errorCodeList.PUBLISHER_TTL_OVERTIME, "kUpdateMediaDescriptionTimeOut": r.errorCodeList.PUBLISHER_UPDATE_SDP_TIMEOUT, "kUpdateMediaDescriptionError": r.errorCodeList.PUBLISHER_UPDATE_SDP_FAIL, "kPublishNetProbePoor": r.errorCodeList.PUBLISHER_NET_PROBE_POOR, "kPublishNotSubscribeBackgroundProcessError": r.errorCodeList.PUBLISHER_NOT_SUBSCRIBE_BACKGROUND_PROCESS }, "urls": i.getItemArrString, "is_center": i.getItemBool, "server_url": i.getItemString, "publish_option": i.getItem, "message": i.getItemString, "stream_id": i.getItemString, "stream_sid": i.getItemNumber, "room_id": i.getItemString, "video_en_codec_id": i.getItemNumber, "cap_w": i.getItemNumber, "cap_h": i.getItemNumber, "w": i.getItemNumber, "h": i.getItemNumber, "video_en_fps": i.getItemNumber, "video_en_bps": i.getItemNumber, "audio_c_channel_count": i.getItemNumber, "audio_en_bps": i.getItemNumber, "aec_level": i.getItemNumber, "ans_level": i.getItemNumber, "agc": i.getItemBool, "enable_camera": i.getItemBool, "enable_mic": i.getItemBool, "video_activate": i.getItemBool, "audio_activate": i.getItemBool, "gw_version": i.getItemNumber, "use_na": i.getItemNumber }, "kZegoStartPublish": { "event": "/publish/start", "is_peer": i.getItemBool, "reason": i.getItemString, "url": i.getItemString, "ip": i.getItemString, "peer_id": i.getItemNumber, "source_type": i.getItemString, "net_protocol": i.getItemString, "wait_consume": i.getItemNumber, "dispatch_consume": i.getItemNumber, "signal_consume": i.getItemNumber, "is_center": i.getItemBool }, "kZegoRePublish": { "event": "/publish/restart", "stream_id": i.getItemString, "server_url": i.getItemString, "reason_code": i.getItemNumber }, "kZegoTaskRePublish": { "event": "/sdk/republish" }, "kZegoTaskSDKPublishStream": { "event": "/sdk/publish", "room_id": i.getItemString, "room_sid_string": i.getItemString, "retry_btime": i.getItemNumber, "max_retry_interval": i.getItemNumber, "fail_cnt": i.getItemNumber, "continuous_fail_cnt": i.getItemNumber, "probe_ip_cnt": i.getItemNumber, "valid_probe_ip_cnt": i.getItemNumber, "poor_quality_retry_cnt": i.getItemNumber, "use_resource_type": i.getItemArrString, "probe_not_trigger_retry_info": i.getItem, "stop_reason": i.getItemString, "try_cnt": i.getItemNumber, "server_url": i.getItemString, "publish_begin_time": i.getItemNumber, "publish_state_time": i.getItemNumber, "bitrate": i.getItemNumber, "h": i.getItemNumber, "w": i.getItemNumber, "cap_w": i.getItemNumber, "cap_h": i.getItemNumber, "fps": i.getItemNumber, "use_na": i.getItemNumber, "env": i.getItemNumber, "webrtc_sid": i.getItemNumber, "stream_id": i.getItemString, "itemtype": i.getItemString }, "kZegoTaskVideoCaptureSize": { "event": "/sdk/api/publish_video_c_size", "webrtc_sid": i.getItemNumber, "w": i.getItemNumber, "h": i.getItemNumber }, "kZegoTaskVideoPlaySize": { "event": "/sdk/play_video_size_changed", "webrtc_sid": i.getItemNumber, "w": i.getItemNumber, "h": i.getItemNumber }, "kZegoTaskRTCPublish": { "event": "/rtc/publish", "tryidx": i.getItemNumber, "url": i.getItemString, "ip": i.getItemString, "net_protocol": i.getItemString, "lsttime": i.getItemNumber, "denied_info": i.getItemString, "dispatch_external_ip": i.getItemString, "total_stat": i.getItem, "room_id": i.getItemString, "room_sid_string": i.getItemString, "resource_type": i.getItemString, "protocol": i.getItemString, "stop_reason": i.getItemString }, "kZegoTaskPublishStop": { "event": "/sdk/stop_publish", "error": { "kParamError": r.errorCodeList.PUBLISHER_PARAM }, "stream_id": i.getItemString, "stream_sid": i.getItemNumber, "room_id": i.getItemString }, "kZegoTaskPublishStreamStateError": { "event": "/rtc/publish_stream_state_error" }, "kZegoTaskPlayStart": { "event": "/sdk/start_play", "error": { "kStreamIDNullError": r.errorCodeList.STREAM_ID_NULL, "kPlayParamError": r.errorCodeList.PLAYER_PARAM, "kPlayStreamIDToLongError": r.errorCodeList.STREAMID_TOO_LONG, "kPlayStreamIDInvalidCharacterError": r.errorCodeList.STREAM_ID_INVALID_CHARACTER, "kPlayNoLoginError": r.errorCodeList.NOT_LOGIN, "kPlayRepeatedPullError": r.errorCodeList.REPEATED_PULL, "kPlayNetworkTimeoutError": r.errorCodeList.TIMEOUT, "kPlayDispatchTimeoutError": r.errorCodeList.DISPATCH_TIMEOUT, "kPlayDispatchError": r.errorCodeList.DISPATCH_ERROR, "kPlayNetworkBrokenError": r.errorCodeList.NETWORK_BROKEN, "kPlayUnsupportedResourceMode": r.errorCodeList.PLAYER_UNSUPPORTED_PROTOCOL, "kPlayStreamNotFound": r.errorCodeList.PLAYER_STREAM_NOT_EXIST, "kPlayRetryTimeoutError": r.errorCodeList.PLAYER_RETRY_TIMEOUT, "kPlaySessionClosedError": r.errorCodeList.PLAYER_SESSION_CLOSED, "kPlaySessionResetError": r.errorCodeList.PLAYER_SESSION_RESET, "kPlayNegoTimeoutError": r.errorCodeList.PLAYER_SERVER_NEGO_TIMEOUT, "kCreateOfferError": r.errorCodeList.PLAYER_CREATE_OFFER_ERROR, "kSetLocalDescError": r.errorCodeList.PLAYER_SET_LOCAL_DESC_ERROR, "kSessionRequestError": r.errorCodeList.PLAYER_SESSION_REQUEST_FAIL, "kSessionTimeoutError": r.errorCodeList.PLAYER_SESSION_TIMEOUT, "kSetRemoteDescError": r.errorCodeList.PLAYER_SET_REMOTE_DESC_ERROR, "kMediaConnectionError": r.errorCodeList.PLAYER_MEDIA_CONNECTION_ERROR, "kWebsocketDisconnectedError": r.errorCodeList.PLAYER_WEBSOCKET_DISCONNECTED, "kCandidateError": r.errorCodeList.PLAYER_CANDIDATE_ERROR, "kMediaDescError": r.errorCodeList.PLAYER_MEDIA_DESC_ERROR, "kIsPlaying": r.errorCodeList.PLAYER_IS_PLAYING, "kClientIPChangedError": r.errorCodeList.PLAYER_CLIENT_IP_CHANGED, "kTTLOverTimeError": r.errorCodeList.PLAYER_TTL_OVERTIME, "kProbeTimeOutError": r.errorCodeList.PLAYER_PROBE_TIMEOUT, "kPlayNetProbePoor": r.errorCodeList.PLAYER_NET_PROBE_POOR }, "room_id": i.getItemString, "urls": i.getItemArrString, "is_center": i.getItemBool, "server_url": i.getItemString, "video_layer": i.getItemNumber, "play_option": i.getItem, "message": i.getItemString, "stream_id": i.getItemString, "stream_sid": i.getItemNumber, "resource_mode": i.getItemNumber, "src": i.getItemString, "video_codec_id": i.getItemString, "room_sid_string": i.getItemString, "is_multi": i.getItemBool, "audio_activate": i.getItemBool, "video_activate": i.getItemBool, "gw_version": i.getItemNumber, "use_na": i.getItemNumber, "biz_product": i.getItemNumber }, "kZegoStartPlay": { "event": "/play/start", "is_peer": i.getItemBool, "reason": i.getItemString, "url": i.getItemString, "ip": i.getItemString, "peer_id": i.getItemNumber, "source_type": i.getItemString, "net_protocol": i.getItemString, "wait_consume": i.getItemNumber, "dispatch_consume": i.getItemNumber, "signal_consume": i.getItemNumber, "is_center": i.getItemBool }, "kZegoRePlay": { "event": "/play/restart", "stream_id": i.getItemString, "server_url": i.getItemString, "reason_code": i.getItemNumber }, "kZegoTaskSDKPlayStream": { "event": "/sdk/play", "audio_cumulative_break_time": i.getItemNumber, "audio_cumulative_decode_time": i.getItemNumber, "video_cumulative_break_time": i.getItemNumber, "video_cumulative_decode_time": i.getItemNumber, "l3_a_break_time": i.getItemNumber, "l3_a_decode_time": i.getItemNumber, "l3_v_break_time": i.getItemNumber, "l3_v_decode_time": i.getItemNumber, "rtc_a_break_time": i.getItemNumber, "rtc_a_decode_time": i.getItemNumber, "rtc_v_break_time": i.getItemNumber, "rtc_v_decode_time": i.getItemNumber, "fft_audio": i.getItemNumber, "fft_video": i.getItemNumber, "room_id": i.getItemString, "room_sid_string": i.getItemString, "retry_btime": i.getItemNumber, "max_retry_interval": i.getItemNumber, "use_na": i.getItemNumber, "fail_cnt": i.getItemNumber, "continuous_fail_cnt": i.getItemNumber, "probe_ip_cnt": i.getItemNumber, "valid_probe_ip_cnt": i.getItemNumber, "poor_quality_retry_cnt": i.getItemNumber, "probe_not_trigger_retry_info": i.getItem, "use_resource_type": i.getItemArrString, "stop_reason": i.getItemString, "try_cnt": i.getItemNumber, "webrtc_sid": i.getItemNumber, "itemtype": i.getItemString, "server_url": i.getItemString, "play_begin_time": i.getItemNumber, "play_state_time": i.getItemNumber, "play_state_cnt": i.getItemNumber, "first_frame_time": i.getItemNumber, "protocol": i.getItemString, "dispatch_external_ip": i.getItemString, "total_stat": i.getItem, "w": i.getItemNumber, "h": i.getItemNumber, "abrc": i.getItemNumber, "vbrc": i.getItemNumber, "vinfo": i.getItem }, "kZegoTaskStreamPlay": { "event": "/rtc/play", "tryidx": i.getItemNumber, "url": i.getItemString, "ip": i.getItemString, "stream_id": i.getItemString, "room_id": i.getItemString, "room_sid_string": i.getItemString, "net_protocol": i.getItemString, "lsttime": i.getItemNumber, "denied_info": i.getItemString, "stop_reason": i.getItemString, "dispatch_external_ip": i.getItemString, "env": i.getItemNumber, "resource_type": i.getItemString, "protocol": i.getItemString, "total_stat": i.getItem, "vinfo": i.getItem }, "kZegoTaskRePlay": { "event": "/sdk/replay", "stream_id": i.getItemString, "server_url": i.getItemString, "reason_code": i.getItemNumber }, "kZegoTaskPlayStop": { "event": "/sdk/stop_play", "error": { "kParamError": r.errorCodeList.PUBLISHER_PARAM }, "room_id": i.getItemString, "stream_id": i.getItemString, "webrtc_sid": i.getItemNumber, "stream_sid": i.getItemNumber, "biz_product": i.getItemNumber }, "kZegoTaskPlayStreamStateError": { "event": "/rtc/play_stream_state_error" }, "kZegoTaskEnumDevices": { "event": "/device/list", "error": { "kBrowserNotSupportError": r.errorCodeList.PUBLISHER_BROWSER_NOT_SUPPORT, "kEnumDevicesError": r.errorCodeList.ENUMERATE_DEVICES_FAIL }, "dev_list": i.getItem, "dev_kind": i.getItemString }, "kZegoAudioDeviceChanged": { "event": "/device/audio_device_changed", "error": { "kBrowserNotSupportError": r.errorCodeList.PUBLISHER_BROWSER_NOT_SUPPORT, "kEnumDevicesError": r.errorCodeList.ENUMERATE_DEVICES_FAIL }, "interrupt": i.getItemNumber, "device": i.getItemString, "device_name": i.getItemString }, "kZegoVideoDeviceChanged": { "event": "/device/video_device_changed", "error": { "kBrowserNotSupportError": r.errorCodeList.PUBLISHER_BROWSER_NOT_SUPPORT, "kEnumDevicesError": r.errorCodeList.ENUMERATE_DEVICES_FAIL }, "interrupt": i.getItemNumber, "device": i.getItemString, "device_name": i.getItemString }, "kZegoTaskDeviceInterrupt": { "event": "/device/interrupt", "error": { "kBrowserNotSupportError": r.errorCodeList.PUBLISHER_BROWSER_NOT_SUPPORT, "kEnumDevicesError": r.errorCodeList.ENUMERATE_DEVICES_FAIL }, "interrupt": i.getItemNumber, "device": i.getItemString, "device_name": i.getItemString }, "kZegoTaskCheckSystemRequirements": { "event": "/sdk/check_system", "capability": i.getItem }, "kZegoTaskRemoteCameraUpdate": { "event": "/sdk/remote_camera_update", "stream_id": i.getItemString, "camera_status": i.getItemString, "status_code": i.getItemNumber }, "kZegoTaskRemoteMicUpdate": { "event": "/sdk/remote_mic_update", "stream_id": i.getItemString, "mic_status": i.getItemString, "status_code": i.getItemNumber }, "kZegoTaskDestroyStream": { "event": "/sdk/destroy_stream", "error": { "kLocalStreamError": r.errorCodeList.LOCALSTREAM_WRONG }, "stop_reason": i.getItemString }, "kZegoTaskAudioOutputChanged": { "event": "/device/api/audio_output", "device": i.getItemString, "device_name": i.getItemString, "reason_type": i.getItemString }, "kZegoTaskLiveRoomRecvStreamUpdateInfo": { "event": "/liveroom/recv_stream_update_info", "stream_update_type": i.getItemString, "stream_seq": i.getItemNumber, "stream_list": i.getItem, "error": { "ROOM_NOT_EXIST": r.errorCodeList.ROOM_NOT_EXIST } }, "kZegoTaskLiveRoomSendStreamUpdateInfo": { "event": "/liveroom/send_stream_update_info", "stream_update_type": i.getItemString, "stream_extra_info": i.getItemString, "stream_id": i.getItemString, "svr_env": i.getItemString, "send_seq": i.getItemNumber, "use_na": i.getItemNumber }, "kZegoTaskLiveRoomGetCurrentStreamList": { "event": "/liveroom/get_current_stream_list", "room_id": i.getItemString, "room_sid_string": i.getItemString, "stream_seq": i.getItemNumber, "stream_size": i.getItemNumber, "stream_list": i.getItem, "use_ua": i.getItemNumber, "error": { "kParamError": r.errorCodeList.PUBLISHER_PARAM, "NOT_LOGIN": r.errorCodeList.NOT_LOGIN } }, "kZegoTaskLiveRoomGetStreamExtraInfo": { "event": "/liveroom/get_stream_extra_info", "update_stream": i.getItem }, "kZegoTaskPlayNetFirstVideoFrame": { "event": "/sdk/net_first_video_frame", "webrtc_sid": i.getItemNumber, "fft_consumed": i.getItem, "resource_type": i.getItemString, "reliability": i.getItemNumber, "push_consumed": i.getItemNumber, "prepare_recv_consumed": i.getItemNumber, "connected_consumed": i.getItemNumber, "protocol": i.getItemString, "biz_product": i.getItemNumber, "dev_changed": i.getItemBool }, "kZegoTaskPlayNetFirstAudioFrame": { "event": "/sdk/net_first_audio_frame", "webrtc_sid": i.getItemNumber, "fft_consumed": i.getItem, "resource_type": i.getItemString, "reliability": i.getItemNumber, "push_consumed": i.getItemNumber, "prepare_recv_consumed": i.getItemNumber, "connected_consumed": i.getItemNumber, "protocol": i.getItemString, "biz_product": i.getItemNumber, "dev_changed": i.getItemBool }, "kZegoAppLifeCycle": { "event": "/app/lifecycle", "state": i.getItemString }, "kZegoSetCaptureVolume": { "event": "/sdk/set_capture_volume", "error": { "kParamError": r.errorCodeList.INPUT_PARAM } }, "kZegoListener": { "event": "/sdk/listener" }, "kZegoNetProbe": { "event": "/sdk/net_probe", "net_quality": i.getItemNumber, "node_list": i.getItemArrString }, "kZegoNetProbeResult": { "event": "/sdk/net_probe_result", "is_switch": i.getItemBool, "is_publish": i.getItemBool, "stream_id": i.getItemString, "result": i.getItemNumber, "node": i.getItemString, "net_quality": i.getItemNumber, "probe_net_quality": i.getItemNumber }, "kZegoTaskCloudSettingCache": { "event": "/cloud_setting/cache", "files": i.getItem }, "kZegoTaskCloudSettingRefresh": { "event": "/cloud_setting/refresh" }, "kZegoTaskCDNPlay": { "event": "/cdn/play", "protocol": i.getItemString, "tryidx": i.getItemNumber, "url": i.getItemString, "stop_reason": i.getItemString, "biz_product": i.getItemNumber }, "kZegoTaskL3Play": { "event": "/l3/play", "protocol": i.getItemString, "tryidx": i.getItemNumber, "url": i.getItemString, "stop_reason": i.getItemString, "biz_product": i.getItemNumber }, "kZegoTaskSrcChange": { "event": "/sdk/play_src_changed", "last_src": i.getItemString, "src": i.getItemString, "biz_product": i.getItemNumber }, "kZegoPublishStreamResource": { "event": "/publish/stream_resource", "urls": i.getItemArrString, "try_cnt": i.getItemNumber, "is_center": i.getItemBool }, "kZegoPublishServerConnect": { "event": "/publish/server_connect", "server_url": i.getItemString, "stream_type": i.getItemString }, "kZegoPublishCreateOffer": { "event": "/publish/create_offer", "sdp": i.getItemString, "stream_type": i.getItemString, "is_mini": i.getItemBool }, "kZegoPublishSetLocalSdp": { "event": "/publish/set_local_sdp", "sdp": i.getItemString, "stream_type": i.getItemString, "is_mini": i.getItemBool }, "kZegoPublishCreateSession": { "event": "/publish/create_session", "sdp": i.getItemString, "is_mini": i.getItemBool, "gw_nodes": i.getItemArrString, "gw_nodes_ttl": i.getItemNumber, "gw_version": i.getItemNumber, "webrtc_sid": i.getItemNumber }, "kZegoPublishSetRemoteSdp": { "event": "/publish/set_remote_sdp", "sdp": i.getItemString, "is_mini": i.getItemBool, "webrtc_sid": i.getItemNumber }, "kZegoPublishIceConnected": { "event": "/publish/ice_connected", "webrtc_sid": i.getItemNumber }, "kZegoRTCPublishEvent": { "event": "/publish/rtc_publish_event", "event_state": i.getItemNumber, "webrtc_sid": i.getItemNumber }, "kZegoRTCPlayEvent": { "event": "/rtc/play_event_message", "event_state": i.getItemNumber, "webrtc_sid": i.getItemNumber }, "kZegoRTCRecvCloseSession": { "event": "/rtc/recv_close_session", "err_info": i.getItem }, "kZegoRTCRecvResetSession": { "event": "/rtc/recv_reset_session" }, "kZegoRTCIceStateChanged": { "event": "/rtc/ice_connection_state_changed", "ice_state": i.getItemString }, "kZegoPublishSendMediaDesc": { "event": "/publish/send_media_desc", "webrtc_sid": i.getItemNumber }, "kZegoPublishRecvMediaDesc": { "event": "/publish/recv_media_desc", "sdp": i.getItemString, "is_mini": i.getItemBool }, "kZegoPublishSendIceCandidate": { "event": "/publish/send_ice_candidate", "candidate_info": i.getItem }, "kZegoPublishRecvIceCandidate": { "event": "/publish/recv_ice_candidate", "candidate_info": i.getItem }, "kZegoRTCHB": { "event": "/rtc/hb", "error": { "RTC_HB_ERROR": r.errorCodeList.RTC_HB_ERROR } }, "kZCRecvRemoteStream": { "event": "/rtc/recv_remote_stream" }, "kZegoPlayStreamResource": { "event": "/play/stream_resource", "urls": i.getItemArrString, "try_cnt": i.getItemNumber, "is_center": i.getItemBool }, "kZegoPlayServerConnect": { "event": "/play/server_connect", "server_url": i.getItemString, "stream_type": i.getItemString }, "kZegoPlayCreateOffer": { "event": "/play/create_offer", "sdp": i.getItemString, "is_mini": i.getItemBool, "stream_type": i.getItemString }, "kZegoPlaySetLocalSdp": { "event": "/play/set_local_sdp", "sdp": i.getItemString, "is_mini": i.getItemBool, "stream_type": i.getItemString }, "kZegoPlayCreateSession": { "event": "/play/create_session", "sdp": i.getItemString, "is_mini": i.getItemBool, "gw_nodes": i.getItemArrString, "gw_nodes_ttl": i.getItemNumber, "gw_version": i.getItemNumber, "webrtc_sid": i.getItemNumber }, "kZegoPlaySetRemoteSdp": { "event": "/play/set_remote_sdp", "sdp": i.getItemString, "is_mini": i.getItemBool, "webrtc_sid": i.getItemNumber }, "kZegoPlayIceConnected": { "event": "/play/ice_connected", "webrtc_sid": i.getItemNumber }, "kZegoPlaySendMediaDesc": { "event": "/play/send_media_desc", "webrtc_sid": i.getItemNumber }, "kZegoPlayRecvMediaDesc": { "event": "/play/recv_media_desc", "sdp": i.getItemString, "is_mini": i.getItemBool }, "kZegoPlaySendIceCandidate": { "event": "/play/send_ice_candidate", "candidate_info": i.getItem }, "kZegoPlayRecvIceCandidate": { "event": "/play/recv_ice_candidate", "candidate_info": i.getItem }, "kZegoConnConnect": { "event": "/zegoconn/connect" }, "kZegoSDKProxyConnect": { "event": "/zegoconn/proxy_connect", "service_no": i.getItemNumber, "proxy_link_sources": i.getItemNumber, "recv_time": i.getItemNumber, "connect_stream": i.getItemNumber }, "kZegoSDKProxyBroken": { "event": "/zegoconn/proxy_broken", "service_no": i.getItemNumber }, "kZegoSDKProxyDisconnect": { "event": "/zegoconn/proxy_disconnect", "service_no": i.getItemNumber }, "kZegoExceptionUpdate": { "event": "/rtc/exception_update", "stream": i.getItemString, "code": i.getItemNumber, "message": i.getItemString } }, t.ZegoWechatLogEvent = { "kZMInitSetting": { "event": "/sdk/init" }, "kZegoTaskCheckSystemRequirements": { "event": "/sdk/check_system", "error": { "kCheckSystemGetSettingFailError": r.errorCodeList.WX_GET_SETTING_FAIL }, "check_system": i.getItem }, "kZegoTaskPublishStart": { "event": "/sdk/api/publish_request", "error": { "kPublishStreamIDNullError": r.errorCodeList.STREAM_ID_NULL, "kPublishParamError": r.errorCodeList.PUBLISHER_PARAM, "kPublishStreamIDTooLongError": r.errorCodeList.STREAMID_TOO_LONG, "kPublishStreamIDInvalidCharacterError": r.errorCodeList.STREAM_ID_INVALID_CHARACTER, "kPublishNetworkTimeoutError": r.errorCodeList.TIMEOUT, "kPublishDispatchTimeoutError": r.errorCodeList.DISPATCH_TIMEOUT, "kPublishDispatchError": r.errorCodeList.DISPATCH_ERROR, "kPublishNetworkBrokenError": r.errorCodeList.NETWORK_BROKEN, "kPublishNoLoginError": r.errorCodeList.NOT_LOGIN, "kPublishRetryTimeoutError": r.errorCodeList.PUBLISHER_RETRY_TIMEOUT, "kIsPublishing": r.errorCodeList.PUBLISHER_IS_PUBLISHING }, "publishOption": i.getItem, "stream": i.getItem, "message": i.getItem }, "kZegoTaskPlayStart": { "event": "/sdk/api/play_request", "error": { "kPlayStreamIDNullError": r.errorCodeList.STREAM_ID_NULL, "kPlayParamError": r.errorCodeList.PLAYER_PARAM, "kPlayStreamIDTooLongError": r.errorCodeList.STREAMID_TOO_LONG, "kPlayStreamIDInvalidCharacterError": r.errorCodeList.STREAM_ID_INVALID_CHARACTER, "kPlayNoLoginError": r.errorCodeList.NOT_LOGIN, "kPlayRepeatedPullError": r.errorCodeList.REPEATED_PULL, "kPlayStreamNotFound": r.errorCodeList.PLAYER_STREAM_NOT_EXIST, "kPlayNetworkTimeoutError": r.errorCodeList.TIMEOUT, "kPlayDispatchTimeoutError": r.errorCodeList.DISPATCH_TIMEOUT, "kPlayDispatchError": r.errorCodeList.DISPATCH_ERROR, "kPlayNetworkBrokenError": r.errorCodeList.NETWORK_BROKEN, "kPlayRetryTimeoutError": r.errorCodeList.PLAYER_RETRY_TIMEOUT, "kIsPlaying": r.errorCodeList.PLAYER_IS_PLAYING }, "playOption": i.getItem, "message": i.getItem, "session_id": i.getItem, "stream": i.getItem, "audio_activate": i.getItem, "video_activate": i.getItem }, "kZegoEventPublishStat": "/sdk/publish_stat_report", "kZegoEventPlayStat": "/sdk/play_stat_report", "kZegoTaskRePublish": "/sdk/republish", "kZegoTaskRePlay": "/sdk/replay", "kZegoTaskPublishStop": { "event": "/sdk/stop_publish", "error": { "kParamError": r.errorCodeList.PUBLISHER_PARAM }, "stream": i.getItem, "room_id": i.getItem }, "kZegoTaskPlayStop": { "event": "/sdk/stop_play", "error": { "kParamError": r.errorCodeList.PUBLISHER_PARAM }, "stream": i.getItem }, "kZegoTaskLiveRoomGetStreamUpdateInfo": { "event": "/liveroom/get_stream_update_info", "stream_update_type": i.getItem, "update_stream": i.getItem }, "kZegoTaskLiveRoomGetStreamExtraInfo": { "event": "/liveroom/get_stream_extra_info", "update_stream": i.getItem } } }, "9268": function _(e, t) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.getItemBool = t.getItemNumber = t.getItemArrString = t.getItemString = t.getItem = void 0, t.getItem = function (e) { return e }, t.getItemString = function (e) { return e }, t.getItemArrString = function (e) { return e }, t.getItemNumber = function (e) { return e }, t.getItemBool = function (e) { return e } }, "2965": function _(e, t) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.ZEGO_WEBRTC_ACTION = void 0, function (e) { e.SET_VIDEO_CONFIG = "zc.svc", e.SET_AUDIO_CONFIG = "zc.sac", e.REPLACE_TRACK = "zc.rp", e.SET_BEAUTY_EFFECT = "zc.sbe", e.ENABLE_STREAM = "zc.es", e.ENABLE_MIC_ONLY = "zc.emo", e.ACTIVATE_SEI_INSERT = "zc.asi", e.MUTE_PUBLISH_STREAM_VIDEO = "zc.mpsv.0", e.MUTE_PUBLISH_STREAM_AUDIO = "zc.mpsa.0", e.MUTE_MIC = "zc.mm", e.MUTE_PLAY_STREAM_VIDEO = "zc.mpsv.1", e.MUTE_PLAY_STREAM_AUDIO = "zc.mpsa.1", e.ADD_TRACK = "zc.at", e.REMOVE_TRACK = "zc.rt", e.HANDLE_TRACK = "zc.ht" }(t.ZEGO_WEBRTC_ACTION || (t.ZEGO_WEBRTC_ACTION = {})) }, "9068": function _(e, t, r) { "use strict"; var i = this && this.__assign || function () { return (i = Object.assign || function (e) { for (var t, A = 1, r = arguments.length; A < r; A++)for (var i in t = arguments[A]) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]); return e }).apply(this, arguments) }, o = this && this.__awaiter || function (e, t, A, r) { return new (A || (A = Promise))(function (i, o) { function n(e) { try { a(r.next(e)) } catch (e) { o(e) } } function s(e) { try { a(r.throw(e)) } catch (e) { o(e) } } function a(e) { var t; e.done ? i(e.value) : (t = e.value, t instanceof A ? t : new A(function (e) { e(t) })).then(n, s) } a((r = r.apply(e, t || [])).next()) }) }, n = this && this.__generator || function (e, t) { var A, r, i, o, n = { "label": 0, "sent": function sent() { if (1 & i[0]) throw i[1]; return i[1] }, "trys": [], "ops": [] }; return o = { "next": s(0), "throw": s(1), "return": s(2) }, "function" == typeof Symbol && (o[Symbol.iterator] = function () { return this }), o; function s(s) { return function (a) { return function (s) { if (A) throw new TypeError("Generator is already executing."); for (; o && (o = 0, s[0] && (n = 0)), n;)try { if (A = 1, r && (i = 2 & s[0] ? r.return : s[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, s[1])).done) return i; switch (r = 0, i && (s = [2 & s[0], i.value]), s[0]) { case 0: case 1: i = s; break; case 4: return n.label++, { "value": s[1], "done": !1 }; case 5: n.label++, r = s[1], s = [0]; continue; case 7: s = n.ops.pop(), n.trys.pop(); continue; default: if (!((i = (i = n.trys).length > 0 && i[i.length - 1]) || 6 !== s[0] && 2 !== s[0])) { n = 0; continue } if (3 === s[0] && (!i || s[1] > i[0] && s[1] < i[3])) { n.label = s[1]; break } if (6 === s[0] && n.label < i[1]) { n.label = i[1], i = s; break } if (i && n.label < i[2]) { n.label = i[2], n.ops.push(s); break } i[2] && n.ops.pop(), n.trys.pop(); continue }s = t.call(e, n) } catch (e) { s = [6, e], r = 0 } finally { A = i = 0 } if (5 & s[0]) throw s[1]; return { "value": s[0] ? s[1] : void 0, "done": !0 } }([s, a]) } } }; Object.defineProperty(t, "__esModule", { "value": !0 }), t.AdvancedModule = t.TRACER_LEVEL = void 0; var s, a = r(2965), c = r(8476), g = r(3725), u = r(4028); !function (e) { e[e.I = 0] = "I", e[e.H = 10] = "H", e[e.M = 100] = "M", e[e.L = 1e3] = "L" }(s = t.TRACER_LEVEL || (t.TRACER_LEVEL = {})); var l = function () { function A(e, t, A, r) { this.logger = e, this.dataReport = t, this.streamCenter = A, this.stateCenter = r, this.screenShotReady = !1 } return A.prototype.setVideoConfig = function (e, t) { var A = this; return this.logger.info(a.ZEGO_WEBRTC_ACTION.SET_VIDEO_CONFIG + " call"), new Promise(function (r, o) { var n = g.ZegoRTCLogEvent.kZegoSetVideoConfig.error, s = n.kLocalStreamError, c = n.kParamError, l = A.getSpan(e, g.ZegoRTCLogEvent.kZegoSetVideoConfig.event), h = i({}, t); t.width && (h.width = JSON.stringify(t.width)), t.height && (h.height = JSON.stringify(t.height)), t.frameRate && (h.frameRate = JSON.stringify(t.frameRate)), l.setAttributes({ "video_params": g.ZegoRTCLogEvent.kZegoSetVideoConfig.video_params(h) }); var C, I, E = function d(e) { A.stateCenter.reporter.setError(l, s, e) }; if (!(e instanceof MediaStream)) return A.logger.error(a.ZEGO_WEBRTC_ACTION.SET_VIDEO_CONFIG + " localStream not found"), E("localStream not found"), void o({ "errorCode": c.code, "extendedData": c.message + " localStream no found" }); if (!t || "object" != (void 0 === t ? "undefined" : _typeof(t)) || 0 == Object.keys(t).length) return A.logger.error(a.ZEGO_WEBRTC_ACTION.SET_VIDEO_CONFIG + " constraints wrong"), E("constraints wrong"), void o({ "errorCode": c.code, "extendedData": c.message + " constraints wrong" }); if (t.width && "number" == typeof t.width && !A.stateCenter.checkValidNumber(t.width, 0, 7680)) return A.logger.error(a.ZEGO_WEBRTC_ACTION.SET_VIDEO_CONFIG + " constraints width integer number, range[0, 7680]"), E("constraints width integer number, range[1, 7680]"), void o({ "errorCode": c.code, "extendedData": c.message + " constraints wrong" }); if (t.width && "object" == _typeof(t.width)) { if (!(I = u.ClientUtil.checkConstraintExtendWithMessage(t.width, "width", 0, 7680)).result) return A.logger.error(a.ZEGO_WEBRTC_ACTION.SET_VIDEO_CONFIG + " constraints width: " + I.message), E("constraints width: " + I.message), void o({ "errorCode": c.code, "extendedData": c.message + " constraints wrong" }) } else if (t.width && "number" != typeof t.width && "object" != _typeof(t.width)) return A.logger.error(a.ZEGO_WEBRTC_ACTION.SET_VIDEO_CONFIG + " constraints width must be a number or an object. "), E("constraints width must be a number or an object."), void o({ "errorCode": c.code, "extendedData": c.message + " constraints wrong" }); if (t.height && "number" == typeof t.height && !A.stateCenter.checkValidNumber(t.height, 0, 4320)) return A.logger.error(a.ZEGO_WEBRTC_ACTION.SET_VIDEO_CONFIG + " constraints height integer number, range[0, 4320]"), E(" constraints height integer number, range[0, 4320]"), void o({ "errorCode": c.code, "extendedData": c.message + " constraints wrong" }); if (t.height && "object" == _typeof(t.height)) { if (!(I = u.ClientUtil.checkConstraintExtendWithMessage(t.height, "height", 0, 4320)).result) return A.logger.error(a.ZEGO_WEBRTC_ACTION.SET_VIDEO_CONFIG + " constraints height: " + I.message), E("constraints height: " + I.message), void o({ "errorCode": c.code, "extendedData": c.message + " constraints wrong" }) } else if (t.height && "number" != typeof t.height && "object" != _typeof(t.height)) return A.logger.error(a.ZEGO_WEBRTC_ACTION.SET_VIDEO_CONFIG + " constraints height must be a number or an object. "), E(" constraints height must be a number or an object."), void o({ "errorCode": c.code, "extendedData": c.message + " constraints wrong" }); return t.maxBitrate && "number" != typeof t.maxBitrate ? (A.logger.error(a.ZEGO_WEBRTC_ACTION.SET_VIDEO_CONFIG + (C = " constraints maxBitrate is not a number")), E(C), void o({ "errorCode": c.code, "extendedData": c.message + C })) : void 0 !== t.frameRate && "number" != typeof t.frameRate && "object" != _typeof(t.frameRate) ? (A.logger.error(a.ZEGO_WEBRTC_ACTION.SET_VIDEO_CONFIG + (C = " constraints frameRate is not a number or an object")), E(C), void o({ "errorCode": c.code, "extendedData": c.message + C })) : "number" != typeof t.frameRate || t.frameRate > 0 && t.frameRate % 1 == 0 ? t.frameRate && "object" == _typeof(t.frameRate) && !(I = u.ClientUtil.checkConstraintExtendWithMessage(t.frameRate, "frameRate")).result ? (A.logger.error(a.ZEGO_WEBRTC_ACTION.SET_VIDEO_CONFIG + " constraints frameRate: " + I.message), E("constraints frameRate: " + I.message), void o({ "errorCode": c.code, "extendedData": c.message + " constraints wrong" })) : void A.setPublishStreamConstraints(e, t, l, function (e) { l.setAttributes({ "error": e.errorCode, "message": e.extendedData }), l.end(), r(e) }) : (A.logger.error(a.ZEGO_WEBRTC_ACTION.SET_VIDEO_CONFIG + " constraints frameRate must be positive integer number"), E("constraints frameRate must be positive integer number"), void o({ "errorCode": c.code, "extendedData": c.message + " constraints wrong" })) }) }, A.prototype.setAudioConfig = function (e, t) { var A = this; return this.logger.info(a.ZEGO_WEBRTC_ACTION.SET_AUDIO_CONFIG + " call"), new Promise(function (r) { var i = A.getSpan(e, g.ZegoRTCLogEvent.kZegoSetAudioConfig.event); return i.setAttributes({ "audio_params": g.ZegoRTCLogEvent.kZegoSetAudioConfig.audio_params(t) }), e instanceof MediaStream ? !t || "object" != (void 0 === t ? "undefined" : _typeof(t)) || 0 == Object.keys(t).length || void 0 !== t.AEC && "boolean" != typeof t.AEC || void 0 !== t.AGC && "boolean" != typeof t.AGC || void 0 !== t.ANS && "boolean" != typeof t.ANS ? (A.logger.error(a.ZEGO_WEBRTC_ACTION.SET_AUDIO_CONFIG + " constraints wrong"), A.stateCenter.reporter.setError(i, g.ZegoRTCLogEvent.kZegoSetAudioConfig.error.kParamError, " constraints wrong"), void r({ "errorCode": g.ZegoRTCLogEvent.kZegoSetAudioConfig.error.kParamError.code, "extendedData": g.ZegoRTCLogEvent.kZegoSetAudioConfig.error.kParamError.message + " constraints wrong" })) : void A.setPublishStreamConstraints(e, t, i, function (e) { i.end(), r(e) }) : (A.logger.error(a.ZEGO_WEBRTC_ACTION.SET_AUDIO_CONFIG + " localStream not found"), A.stateCenter.reporter.setError(i, g.ZegoRTCLogEvent.kZegoSetAudioConfig.error.kLocalStreamError), void r({ "errorCode": g.ZegoRTCLogEvent.kZegoSetAudioConfig.error.kParamError.code, "extendedData": g.ZegoRTCLogEvent.kZegoSetAudioConfig.error.kParamError.message + " localStream no found" })) }) }, A.prototype.enableStream = function (e, t) { if (this.logger.info(a.ZEGO_WEBRTC_ACTION.ENABLE_STREAM + " call"), "boolean" != typeof t.video && "boolean" != typeof t.audio) return this.logger.error(a.ZEGO_WEBRTC_ACTION.ENABLE_STREAM + " option error"), !1; var A = !0, r = !0; return "boolean" == typeof t.video && (A = this.enableCamera(e, t.video, t.retain)), "boolean" == typeof t.audio && (r = this.enableMicrophone(e, t.audio)), A && r }, A.prototype.enableMicrophoneOnly = function (e) { if (this.logger.info(a.ZEGO_WEBRTC_ACTION.ENABLE_MIC_ONLY + " call"), "boolean" != typeof e) return !1; for (var t = 0; t < this.streamCenter.previewStreamList.length; t++)if (!this.streamCenter.previewStreamList[t].enableMicrophoneOnly(e, this.streamCenter)) return this.logger.error("zsc.emo.0 previewer ".concat(t, " change mic mute state failed")), !1; return this.streamCenter.isMicEnabled = e, !0 }, A.prototype.replaceTrack = function (e, t, A) { return o(this, void 0, void 0, function () { var r, i, o, s; return n(this, function (n) { return r = this.getSpan(e, g.ZegoRTCLogEvent.kZegoReplaceTrack.event), i = g.ZegoRTCLogEvent.kZegoReplaceTrack.error.kParamError, e instanceof MediaStream ? t && t instanceof MediaStreamTrack ? (o = { "id": t.id, "muted": t.muted, "enabled": t.enabled, "kind": t.kind, "readyState": t.readyState, "label": t.label }, this.logger.info(a.ZEGO_WEBRTC_ACTION.REPLACE_TRACK + " call. ".concat(e.id, " track: ") + JSON.stringify(o)), s = this._replaceTrack(e, t, A), r.setAttributes({ "track_kind": g.ZegoRTCLogEvent.kZegoReplaceTrack.track_kind(t.kind) }), r.end(), [2, s]) : (this.logger.error(a.ZEGO_WEBRTC_ACTION.REPLACE_TRACK + " mediastream track no found"), this.stateCenter.reporter.setError(r, i, "mediastream track no found"), [2, { "errorCode": i.code, "extendedData": i.message + " mediastream track no found" }]) : (this.logger.error(a.ZEGO_WEBRTC_ACTION.REPLACE_TRACK + " localStream not found"), this.stateCenter.reporter.setError(r, i, "localStream not found"), [2, { "errorCode": i.code, "extendedData": i.message + " localStream no found" }]) }) }) }, A.prototype.setPublishStreamConstraints = function (e, t, A, r) { var s = this; this.logger.info("zsc.spsc.0 constraints", JSON.stringify(t)); var a = this.streamCenter.checkPreview(e); if (!a) return this.logger.error("zsc.spsc.0 preview no found"), void (r && r({ "errorCode": c.errorCodeList.PUBLISH_NO_PREVIEW.code, "extendedData": c.errorCodeList.PUBLISH_NO_PREVIEW.message })); var u = a.videoTrack, l = a.audioTrack, h = null == u ? void 0 : u.getSettings(), d = !1, C = !1; if (u && (t.width || t.height || t.frameRate || t.videoQuality) && (t.videoQuality || (a.mediaStreamConfig.videoQuality = 4), d = !0), void 0 === t.ANS && void 0 === t.AGC && void 0 === t.AEC || (C = !0), d && !u) return this.logger.error("zsc.spsc.0 video track not found"), void (r && r({ "errorCode": c.errorCodeList.TRACK_NOT_FOUND.code, "extendedData": c.errorCodeList.TRACK_NOT_FOUND.message })); if (t.video = !0, C && (!l || a.hasEmptyAudioTrack)) return this.logger.error("zsc.spsc.0 audio track not found"), void (r && r({ "errorCode": c.errorCodeList.TRACK_NOT_FOUND.code, "extendedData": c.errorCodeList.TRACK_NOT_FOUND.message })); t.audio = !0; var I, E = JSON.parse(JSON.stringify(a.mediaStreamConfig)), p = Object.assign(a.mediaStreamConfig, t); "screen" == a.previewType ? (I = this.streamCenter.getScreenConstrains(p)).bitRate !== E.bitRate && (t.maxBitrate = I.bitRate) : I = a.getMediaStreamConstraints(p, !0), this.logger.info("zsc.spsc.0 applyConstraints ", JSON.stringify(I)); var f = []; if (d && u) { var B = {}; Object.keys(I.video).forEach(function (e) { B[e] = JSON.stringify(I.video[e]) }), A.setAttributes({ "video_conf": g.ZegoRTCLogEvent.kZegoSetVideoConfig.video_conf(B) }), f.push(u.applyConstraints(i(i({}, I.video), { "deviceId": void 0 }))) } var _ = !0; C && (_ = (null == l ? void 0 : l.enabled) || !1, A.setAttributes({ "audio_conf": g.ZegoRTCLogEvent.kZegoSetAudioConfig.audio_conf(I.audio) }), null == l || l.stop(), f.push(navigator.mediaDevices.getUserMedia({ "video": !1, "audio": I.audio }))); var m = this.streamCenter.getPublishList(e); m.forEach(function (e) { var A, r, i, o = null == e ? void 0 : e.publisher, n = (null === (A = null == o ? void 0 : o.peerConnection) || void 0 === A ? void 0 : A.getSenders()) || [], c = t.maxBitrate || (null === (r = I.video) || void 0 === r ? void 0 : r.maxBitrate) || (null === (i = I.video) || void 0 === i ? void 0 : i.bitRate); if (o.videoInfo.bitRate = c, a.videoInfo.bitRate = c, n.length > 0 && c) { var g = n.filter(function (e) { return e.track && "video" === e.track.kind }); g || s.logger.error("zsc.spsc.0 video sender no found"); var u = g.length > 1 ? g[1] : g[0] ? g[0] : null; if (u) { var l = u.getParameters(); l.encodings || (l.encodings = [{}]), l.encodings[0].maxBitrate = 1e3 * c, f.push(u.setParameters(l)) } else s.logger.error("zsc.spsc.0 video sender no found") } else c && (a.videoInfo.bitRate = c) }), f.length > 0 ? Promise.all(f).then(function (e) { var A, i, o = e[1]; if (C) { var n = (i = d ? e[1] : e[0]).getVideoTracks()[0]; null == n || n.stop(); var c = i.getAudioTracks()[0]; c.enabled = _, o = JSON.stringify(c.getSettings()), a.replacePreviewTrack(c); var u = c; a.insertableaudio && a.localStream && (u = a.localStream.getAudioTracks()[0]), a.gainNode || a.audioNodeQueue || a.onAudioTrackChange(u) } if (t.maxBitrate) { var l = a.videoInfo.bitRate !== t.maxBitrate; a.videoInfo.bitRate = t.maxBitrate, m.forEach(function (e) { var A = null == e ? void 0 : e.publisher; A && (l && s.enVideoSpan(e.streamID, g.ZegoRTCLogEvent.kZegoVideoEnBps.event, { "bitrate": g.ZegoRTCLogEvent.kZegoVideoEnBps.bitrate(t.maxBitrate) }), A.videoInfo.bitRate = t.maxBitrate) }) } if (null === (A = null == I ? void 0 : I.video) || void 0 === A ? void 0 : A.frameRate) { var E = I.video.frameRate; a.videoInfo.frameRate = E, m.forEach(function (e) { var t = null == e ? void 0 : e.publisher; t && (t.videoInfo.frameRate = E) }) } m.forEach(function (e) { var t, A, r = null === (A = null === (t = e.localStream) || void 0 === t ? void 0 : t.getVideoTracks()[0]) || void 0 === A ? void 0 : A.getSettings(); (null == h ? void 0 : h.width) === (null == r ? void 0 : r.width) && (null == h ? void 0 : h.height) === (null == r ? void 0 : r.height) || s.enVideoSpan(e.streamID, g.ZegoRTCLogEvent.kZegoVideoEnSize.event, { "w": g.ZegoRTCLogEvent.kZegoVideoEnSize.w(null == r ? void 0 : r.width), "h": g.ZegoRTCLogEvent.kZegoVideoEnSize.h(null == r ? void 0 : r.height) }), (null == h ? void 0 : h.frameRate) !== (null == r ? void 0 : r.frameRate) && s.enVideoSpan(e.streamID, g.ZegoRTCLogEvent.kZegoVideoEnFps.event, { "fps": g.ZegoRTCLogEvent.kZegoVideoEnFps.fps(null == r ? void 0 : r.frameRate) }) }), s.logger.info("zsc.spsc.0 set constraints success", o), r && r({ "errorCode": 0, "extendedData": "" }) }).catch(function (t) { return o(s, void 0, void 0, function () { var A, i, o, s, g = this; return n(this, function (n) { switch (n.label) { case 0: return this.logger.error("zsc.spsc.0 fail reason ", t.name, t.toString()), C ? (A = a.getMediaStreamConstraints(E), this.logger.info("zsc.spsc.0 oldMediaStreamConstraints ", JSON.stringify(A)), [4, navigator.mediaDevices.getUserMedia({ "video": !1, "audio": A.audio }).catch(function (e) { g.logger.error("zsc.spsc.0.1 setbackup fail " + e.name) })]) : [3, 2]; case 1: (i = n.sent()) && (null == (o = e.getVideoTracks()[0]) || o.stop(), s = i.getAudioTracks()[0], a.replacePreviewTrack(s), a.gainNode || a.onAudioTrackChange(s)), this.logger.info("zsc.spsc.0.1 setbackup suc "), n.label = 2; case 2: return r && r({ "errorCode": c.errorCodeList.PUBLISHER_CONSTRAINTS_ERROR.code, "extendedData": "".concat(t.name, " ").concat(t.constraint ? "constraint:" + t.constraint : "") }), [2] } }) }) }) : (this.logger.warn("zsc.spsc.0 constaints is no changes"), r && r({ "errorCode": c.errorCodeList.PUBLISHER_CONSTRAINTS_ERROR.code, "extendedData": "constraints is no changes" })) }, A.prototype.useVideoDevice = function (e, t) { var A = this; return this.logger.info("zc.uvd.0 call"), new Promise(function (r) { var i = A.getSpan(e, g.ZegoRTCLogEvent.kZegoTaskUseVideoDevice.event); if (i.setAttributes({ "device": g.ZegoRTCLogEvent.kZegoTaskUseVideoDevice.device(t) }), !(e instanceof MediaStream)) return A.logger.error("zc.uvd.0 localStream not found"), A.stateCenter.reporter.setError(i, g.ZegoRTCLogEvent.kZegoTaskUseVideoDevice.error.kLocalStreamError), void r({ "errorCode": g.ZegoRTCLogEvent.kZegoTaskUseVideoDevice.error.kParamError.code, "extendedData": g.ZegoRTCLogEvent.kZegoTaskUseVideoDevice.error.kParamError.message }); if ("string" != typeof t) return A.logger.error("zc.uvd.0 deviceID must be string"), A.stateCenter.reporter.setError(i, g.ZegoRTCLogEvent.kZegoTaskUseVideoDevice.error.kParamError, " deviceID must be string"), void r({ "errorCode": g.ZegoRTCLogEvent.kZegoTaskUseVideoDevice.error.kParamError.code, "extendedData": g.ZegoRTCLogEvent.kZegoTaskUseVideoDevice.error.kParamError.message }); var n = function o(t) { i.setAttributes({ "error": t.errorCode, "message": t.extendedData }), i.end(), A.streamCenter.getPublishList(e).forEach(function (e) { var t, A; e.cameraLabel = (null === (A = null === (t = e.publisher.previewer) || void 0 === t ? void 0 : t.videoTrack) || void 0 === A ? void 0 : A.label) || e.cameraLabel }), r(t) }; A.stateCenter.getDevices(function (r) { var o = r.cameras.find(function (e) { return e.deviceID == t }); if (!o) return A.logger.error("zc.uvd.0 device is not found"), void n({ "errorCode": g.ZegoRTCLogEvent.kZegoTaskUseVideoDevice.error.kDevicesNoFoundError.code, "extendedData": g.ZegoRTCLogEvent.kZegoTaskUseVideoDevice.error.kDevicesNoFoundError.message }); i.setAttributes({ "device_name": g.ZegoRTCLogEvent.kZegoTaskUseVideoDevice.device_name(null == o ? void 0 : o.deviceName) }), A.switchDevice("video", e, t, n) }, function (r) { A.logger.warn("zc.uvd.0 getDevices err:", r), A.switchDevice("video", e, t, n) }) }) }, A.prototype.useAudioDevice = function (e, t) { var A = this; return this.logger.info("zc.uad.1 call"), new Promise(function (r) { var i = A.getSpan(e, g.ZegoRTCLogEvent.kZegoTaskUseAudioDevice.event); i.setAttributes({ "device": g.ZegoRTCLogEvent.kZegoTaskUseAudioDevice.device(t) }); var s = function o(e, t) { A.logger.error("zc.uad.1 " + t); var o = e; o.message = o.message + (t ? " " + t : ""), A.stateCenter.reporter.setError(i, e, t), r({ "errorCode": o.code, "extendedData": o.message }) }, a = function n(t) { i.setAttributes({ "error": t.errorCode, "message": t.extendedData }), i.end(), A.streamCenter.getPublishList(e).forEach(function (t) { var A; t.microLabel = (null === (A = e.getAudioTracks()[0]) || void 0 === A ? void 0 : A.label) || t.microLabel }); var o = A.streamCenter.checkPreview(e); 0 === t.errorCode && o && (o.hasMicTrack = !0), r(t) }; e instanceof MediaStream ? "string" == typeof t ? A.stateCenter.getDevices(function (r) { var o = r.microphones.find(function (e) { return e.deviceID == t }); if (!o) return A.logger.error("zc.uad.1 device is not found"), void a({ "errorCode": g.ZegoRTCLogEvent.kZegoTaskUseAudioDevice.error.kDevicesNoFoundError.code, "extendedData": g.ZegoRTCLogEvent.kZegoTaskUseAudioDevice.error.kDevicesNoFoundError.message }); i.setAttributes({ "device_name": g.ZegoRTCLogEvent.kZegoTaskUseAudioDevice.device_name(null == o ? void 0 : o.deviceName) }), A.switchDevice("audio", e, t, a) }, function (r) { A.logger.warn("zc.uad.1 getDevices err:", r), A.switchDevice("audio", e, t, a) }) : s(g.ZegoRTCLogEvent.kZegoTaskUseAudioDevice.error.kParamError, "deviceID must be string") : s(g.ZegoRTCLogEvent.kZegoTaskUseAudioDevice.error.kLocalStreamError, "localStream not found") }) }, A.prototype.enableDualStream = function (e) { this.logger.info("zsc.eds call"); var t = this.streamCenter.checkPreview(e); t && !t.lowStream ? navigator.userAgent.toLowerCase().indexOf("firefox") > -1 && "custom" == t.previewType ? this.logger.error("zsc.eds can not support firefox") : this.streamCenter.checkPublish(e) ? this.logger.error("zsc.eds is publishing") : (t.enableDualStream = !0, t.createLowStream()) : this.logger.error("zsc.eds preview no found") }, A.prototype.setLowStreamParameter = function (e, t) { var A = this.streamCenter.checkPreview(e); if (A) { var r = A.videoInfo; t.width && r.width && t.width > r.width ? this.logger.error("zsc.slsp.0 low stream width can not larger than high stream") : t.height && r.height && t.height > r.height ? this.logger.error("zsc.slsp.0 low stream height can not larger than high stream") : t.frameRate && r.frameRate && t.frameRate > r.frameRate || t.height && r.bitRate && t.bitRate > r.bitRate || (A.lowStreamConfig = Object.assign(A.lowStreamConfig, t)) } else this.logger.error("zsc.slsp.0 preview no found") }, A.prototype.handleTrack = function (e, t, A, r, s) { var g, u, l; return o(this, void 0, void 0, function () { var h, d, C, I, E, f, B, _, m, Q, y, v, S, D, R, b, T, k, w, N = this; return n(this, function (p) { switch (p.label) { case 0: if (this.logger.info(a.ZEGO_WEBRTC_ACTION.HANDLE_TRACK + " call. ms id: ".concat(null == t ? void 0 : t.id, ", kind: ").concat(null == A ? void 0 : A.kind, ", track id: ").concat(null == A ? void 0 : A.id)), h = "ADD" === e, d = { "errorCode": 0, "extendedData": "" }, !(t instanceof MediaStream)) return this.logger.error(a.ZEGO_WEBRTC_ACTION.HANDLE_TRACK + " stream wrong"), s({ "errorCode": c.errorCodeList.INPUT_PARAM.code, "extendedData": c.errorCodeList.INPUT_PARAM.message }), [2]; if (!(A instanceof MediaStreamTrack)) return this.logger.error(a.ZEGO_WEBRTC_ACTION.HANDLE_TRACK + " parameter 2 type error"), s({ "errorCode": c.errorCodeList.INPUT_PARAM.code, "extendedData": c.errorCodeList.INPUT_PARAM.message }), [2]; if (!(C = this.streamCenter.checkPreview(t))) return this.logger.error(a.ZEGO_WEBRTC_ACTION.HANDLE_TRACK + " stream no found"), s && s({ "errorCode": c.errorCodeList.PUBLISH_NO_PREVIEW.code, "extendedData": c.errorCodeList.PUBLISH_NO_PREVIEW.message }), [2]; if ("video" === A.kind) { if (null === (g = C.videoEffect) || void 0 === g ? void 0 : g.enabled) return this.logger.error(a.ZEGO_WEBRTC_ACTION.HANDLE_TRACK + " need to disable video beauty effect first"), s && s({ "errorCode": c.errorCodeList.VIDEO_EFFECT_IS_RUNNING.code, "extendedData": "need to disable video beauty effect before add or remove track" }), [2]; if (C.enableDualStream) return this.logger.error(a.ZEGO_WEBRTC_ACTION.HANDLE_TRACK + " " + " can not add/remove track while dual stream enabled."), s && s({ "errorCode": c.errorCodeList.VIDEO_EFFECT_IS_RUNNING.code, "extendedData": " can not add/remove track while dual stream enabled." }), [2]; if (C.isBackgroundBlur) return this.logger.error(a.ZEGO_WEBRTC_ACTION.HANDLE_TRACK + " need to disable background process first"), s && s({ "errorCode": c.errorCodeList.BACKGROUND_PROCESS_IS_RUNNING.code, "extendedData": "need to disable video background process before add or remove track" }), [2] } return C.streamFromCanvas && "video" === A.kind ? (this.logger.error(a.ZEGO_WEBRTC_ACTION.HANDLE_TRACK + " browser not support"), s && s({ "errorCode": c.errorCodeList.HANDLE_TRACK_NOT_SUPPORTED.code, "extendedData": c.errorCodeList.HANDLE_TRACK_NOT_SUPPORTED.message }), [2]) : (I = "audio" === A.kind && this.stateCenter.engineConfig.keepAudioTrack && C.hasEmptyAudioTrack, E = t.getTracks().length >= 2 || t.getTracks().find(function (e) { return e.kind == A.kind }), h && E && !I ? (this.logger.error(a.ZEGO_WEBRTC_ACTION.HANDLE_TRACK + " only stream which have one track and kind no exist can add track"), s && s({ "errorCode": c.errorCodeList.TRACK_CAN_NOT_ADD.code, "extendedData": c.errorCodeList.TRACK_CAN_NOT_ADD.message }), [2]) : "REMOVE" == e && (t.getTracks().length <= 1 || "video" === A.kind && C.hasEmptyAudioTrack || !t.getTracks().find(function (e) { return e.kind === A.kind })) ? (this.logger.error(a.ZEGO_WEBRTC_ACTION.HANDLE_TRACK + " can not remove track"), s({ "errorCode": c.errorCodeList.HANDLE_TRACK_NOT_SUPPORTED.code, "extendedData": c.errorCodeList.HANDLE_TRACK_NOT_SUPPORTED.message }), [2]) : !(f = this.streamCenter.checkPublish(t)) || 5 === f.publisher.stateNego && 1 != f.publisher.isUpdateSDP ? (B = function p(e) { var t = N.streamCenter.previewStreamList.find(function (t) { return t.originVideoTrack === e || t.originAudioTrack === e }); if (t = t || N.streamCenter.previewStreamList.find(function (t) { return t.localStream.getTracks().find(function (t) { return t == e }) })) return N.logger.info(a.ZEGO_WEBRTC_ACTION.HANDLE_TRACK + " video info: ".concat(JSON.stringify(t.videoInfo))), t.videoInfo; N.logger.warn(a.ZEGO_WEBRTC_ACTION.HANDLE_TRACK + " ".concat(e.kind, " track is not created by sdk")) }, this.stateCenter.engineConfig.keepAudioTrack && "audio" === A.kind ? (h ? ((w = B(A)) && C.updateAudioInfo(w), this._replaceTrack(t, A, !1, !0), C.hasEmptyAudioTrack = !1) : ((_ = C.getEmptyAudioTrack()) && this._replaceTrack(t, _, !1, !0), C.hasEmptyAudioTrack = !0), this.logger.info(a.ZEGO_WEBRTC_ACTION.HANDLE_TRACK + " end"), r(d), [2]) : (m = C.rtcViewer, Q = C, y = "video" == A.kind ? "videoTrack" : "audioTrack", f ? (v = f.publisher, (S = f.publisher.peerConnection) ? (v.isUpdateSDP = !0, v.sideMediaConfig.isSEIStart && "video" === A.kind ? (this.logger.info(a.ZEGO_WEBRTC_ACTION.HANDLE_TRACK + " replace sei blank track."), D = void 0, h ? [4, v.replacePublishedTrack(A, !1, { "handleTrack": e })] : [3, 2]) : [3, 5]) : (this.logger.error(a.ZEGO_WEBRTC_ACTION.HANDLE_TRACK + " pc has not created."), [2])) : [3, 14])) : (this.logger.error(a.ZEGO_WEBRTC_ACTION.HANDLE_TRACK + " publish state wrong. " + "".concat(f.publisher.stateNego)), s && s({ "errorCode": c.errorCodeList.PUBLISHER_STATE_WRONG.code, "extendedData": c.errorCodeList.PUBLISHER_STATE_WRONG.message }), [2])); case 1: return D = p.sent(), v.handleSEIVideoTrack("add"), [3, 4]; case 2: return v.handleSEIVideoTrack("remove"), [4, v.replacePublishedTrack(v.sideMediaConfig.track, !1, { "handleTrack": e })]; case 3: D = p.sent(), p.label = 4; case 4: return 0 === (null == D ? void 0 : D.errorCode) || this.logger.warn(a.ZEGO_WEBRTC_ACTION.HANDLE_TRACK + " enable sei but not found video sender. error: ".concat(JSON.stringify(D))), [3, 12]; case 5: return "audio" !== A.kind ? [3, 10] : (v.isUpdateSDP = !1, h ? (Q.replacePreviewTrack(A), R = Q.audioNodeQueue ? null === (l = null === (u = Q.audioNodeQueue) || void 0 === u ? void 0 : u.destinationNode) || void 0 === l ? void 0 : l.stream.getAudioTracks()[0] : A, [4, S.getSenders().find(function (e) { return e.track && "audio" === e.track.kind })]) : [3, 7]); case 6: return (b = p.sent()) ? b.replaceTrack(R) : S.addTrack(R, t), this.logger.info(a.ZEGO_WEBRTC_ACTION.HANDLE_TRACK + " add audio track. "), [3, 9]; case 7: return t.removeTrack(A), Q[y] = null, m && m.setTrack(!1, null), [4, S.getSenders().find(function (e) { return e.track && "audio" === e.track.kind })]; case 8: (b = p.sent()) && b.replaceTrack(null), this.logger.info(a.ZEGO_WEBRTC_ACTION.HANDLE_TRACK + " remove audio track. "), p.label = 9; case 9: return this.logger.info(a.ZEGO_WEBRTC_ACTION.HANDLE_TRACK + " end"), r(d), [2]; case 10: return [4, S.getSenders().find(function (e) { return e.track && e.track.kind == A.kind || null === e.track })]; case 11: if (b = p.sent(), h) b ? (b.replaceTrack(A), this.logger.info(a.ZEGO_WEBRTC_ACTION.HANDLE_TRACK + " sender replace track " + A.kind)) : (S.addTrack(A, t), this.logger.info(a.ZEGO_WEBRTC_ACTION.HANDLE_TRACK + " pc add track " + A.kind)); else { if (!b) return this.logger.error(a.ZEGO_WEBRTC_ACTION.HANDLE_TRACK + " sender no found"), s && s({ "errorCode": c.errorCodeList.TRACK_NOT_FOUND.code, "extendedData": c.errorCodeList.TRACK_NOT_FOUND.message }), [2]; try { b.replaceTrack(null), this.logger.info(a.ZEGO_WEBRTC_ACTION.HANDLE_TRACK + " sender replace null.") } catch (e) { this.logger.error(a.ZEGO_WEBRTC_ACTION.HANDLE_TRACK + " " + e), s && s({ "errorCode": c.errorCodeList.PUBLISHER_UPDATE_SDP_FAIL.code, "extendedData": c.errorCodeList.PUBLISHER_UPDATE_SDP_FAIL.message + " " + e }) } } p.label = 12; case 12: return w = B(A), T = Q.updateVideoInfo(w), [4, S.createOffer({})]; case 13: return k = p.sent(), v.onCreateOfferSuccess(k, !0, i(i({}, T), { "bitRate": h ? T.bitRate : 50 }), function (i) { return o(N, void 0, void 0, function () { return n(this, function (o) { return 0 !== i ? s && s({ "errorCode": c.errorCodeList.PUBLISHER_UPDATE_SDP_FAIL.code, "extendedData": c.errorCodeList.PUBLISHER_UPDATE_SDP_FAIL.message }) : ("ADD" == e ? (t.addTrack(A), Q[y] = A, m && m.setTrack("video" == A.kind, A, "safari" === this.stateCenter.browser), "video" == A.kind && 1 == A.enabled ? v.sendStreamStatus(0, v.mic_status, !0) : 1 == A.enabled && v.sendStreamStatus(v.camera_status, 0, !0), this.logger.info(a.ZEGO_WEBRTC_ACTION.HANDLE_TRACK + " add track completely")) : ("video" == A.kind ? v.sendStreamStatus(2, v.mic_status, !0) : v.sendStreamStatus(v.camera_status, 2, !0), t.removeTrack(A), Q[y] = null, m && m.setTrack("video" == A.kind, null), this.logger.info(a.ZEGO_WEBRTC_ACTION.HANDLE_TRACK + " remove track completely")), C.mediaStreamConfig.video = "ADD" == e, r(d), this.logger.info(a.ZEGO_WEBRTC_ACTION.HANDLE_TRACK + " end")), [2] }) }) }), [3, 15]; case 14: h ? ((w = B(A)) && ("video" === A.kind ? (Q.updateVideoInfo(w), C.mediaStreamConfig.video = !0) : Q.updateAudioInfo(w)), t.addTrack(A), Q[y] = A, m && m.setTrack("video" == A.kind, A)) : (t.removeTrack(A), Q[y] = null, "video" === A.kind && (C.mediaStreamConfig.video = !1), m && m.setTrack("video" == A.kind, null)), this.logger.info(a.ZEGO_WEBRTC_ACTION.HANDLE_TRACK + " end"), r(d), p.label = 15; case 15: return [2] } }) }) }, A.prototype.switchDevice = function (e, t, A, r) { var o = this, n = this.streamCenter.checkPreview(t), s = "audio" === e; if (!n) return this.logger.error("zsc.sd.0 preview no found"), void (r && r({ "errorCode": c.errorCodeList.PUBLISH_NO_PREVIEW.code, "extendedData": c.errorCodeList.PUBLISH_NO_PREVIEW.message })); if ("video" === e && 0 == n.mediaStreamConfig.video) return this.logger.error("zsc.sd.0 camera can not be changed when video is false"), void (r && r({ "errorCode": c.errorCodeList.VIDEO_DEVICE_FALSE.code, "extendedData": c.errorCodeList.VIDEO_DEVICE_FALSE.message })); if (s && 0 == n.mediaStreamConfig.audio) return this.logger.error("zsc.sd.0 microphone can not be changed when audio is false"), void (r && r({ "errorCode": c.errorCodeList.AUDIO_DEVICE_FALSE.code, "extendedData": c.errorCodeList.AUDIO_DEVICE_FALSE.message })); n.mediaStreamConfig.videoInput !== A && delete n.mediaStreamConfig.facingMode; var a, g = {}; "video" === e ? (g.videoInput = A, a = n.videoTrack) : (g.audioInput = A, a = n.audioTrack), "firefox" === this.stateCenter.browser && (null == a || a.stop()); var u = i(i({}, n.mediaStreamConfig), g); s && "default" === n.mediaStreamConfig.audioInput && "default" === A && n.audioTrack && n.audioTrack.stop(); var l = n.getMediaStreamConstraints(u), h = function E(A, r) { r.getTracks().forEach(function (A) { if (A.kind === e) { var r = "video" === e, i = r ? "videoTrack" : "audioTrack", s = n[i]; A.enabled = s.enabled, r && n.lowStream && n.lowStream.getTracks().forEach(function (e) { return e.stop() }); var a = o.streamCenter.getPublishList(t); a.length > 0 && (!n.muteImage || A.enabled || !r) ? a.map(function (e) { return e.publisher }).forEach(function (e) { e.replacePublishedTrack(A) }) : n && n.muteImage && !A.enabled && r ? n[i] = A : n && n.replacePreviewTrack(A), s && s.stop() } }), n.restartSoundLevel() }; s ? l.video = !1 : l.audio = !1, navigator.mediaDevices.getUserMedia(l).then(function (t) { Object.assign(n.mediaStreamConfig, g), h(0, t), o.logger.info("zsc.sd.0 switch " + e + " device success"), r && r({ "errorCode": 0, "extendedData": "" }) }, function (t) { var A, i; "video" == e ? null === (A = n.videoTrack) || void 0 === A || A.stop() : null === (i = n.audioTrack) || void 0 === i || i.stop(), o.logger.warn("zsc.sd.0 switch " + e + " device failed, stop last device and retry. ", t + ""), navigator.mediaDevices.getUserMedia(l).then(function (t) { Object.assign(n.mediaStreamConfig, g), h(0, t), o.logger.info("zsc.sd.0 swtich " + e + " device success"), r && r({ "errorCode": 0, "extendedData": "" }) }, function (t) { o.logger.warn("zsc.sd.0 swtich " + e + " device failed and recover last device. ", t + ""); var A = n.getMediaStreamConstraints(n.mediaStreamConfig), i = c.errorCodeList.VIDEO_DEVICE_FALSE; "audio" === e && (i = c.errorCodeList.AUDIO_DEVICE_FALSE), navigator.mediaDevices.getUserMedia(A).then(function (A) { h(0, A), o.logger.info("zsc.sd.0 recover last " + e + " device success"), r && r({ "errorCode": i.code, "extendedData": i.message + " " + JSON.stringify(t) }) }, function (t) { o.logger.error("zsc.sd.0 swtich " + e + " device and recover failed, please recreate stream. ", t + ""), r && r({ "errorCode": i.code, "extendedData": i.message + " " + JSON.stringify(t) }) }) }) }) }, A.prototype._replaceTrack = function (e, t, A, r) { void 0 === r && (r = !1); var i = this.streamCenter.checkPreview(e), o = this.streamCenter.getPublishList(e); if (!i) return this.logger.error("zc.rt.0 preview no found"), { "errorCode": c.errorCodeList.PUBLISH_NO_PREVIEW.code, "extendedData": c.errorCodeList.PUBLISH_NO_PREVIEW.message }; if (i.streamFromCanvas && "video" === t.kind) return this.logger.error("zc.rt.0 browser not support"), { "errorCode": c.errorCodeList.HANDLE_TRACK_NOT_SUPPORTED.code, "extendedData": c.errorCodeList.HANDLE_TRACK_NOT_SUPPORTED.message }; var n = e.getTracks().find(function (e) { return e.kind === t.kind }), s = "audio" === t.kind; if (!r && (!n || s && i.hasEmptyAudioTrack)) return this.logger.error("zc.rt.0 track no found"), { "errorCode": c.errorCodeList.TRACK_NOT_FOUND.code, "extendedData": c.errorCodeList.TRACK_NOT_FOUND.message }; if (r && s && !i.mediaStreamConfig.audio) { var a = i.mediaStreamConfig; i.mediaStreamConfig.audio = !0; var g = t.getSettings(), u = g || {}, l = u.deviceId, h = u.echoCancellation, d = u.noiseSuppression, C = u.autoGainControl, I = u.channelCount; this.logger.info("zc.rt.0 add audio: " + JSON.stringify(g)), l && (a.audioInput = l), I && (a.channelCount = I), h && (a.AEC = h), d && (a.ANS = d), C && (a.AGC = C) } var E = this.streamCenter.soundLevelDelegate && s; if (o.length) { var p = null; return E && i.stopSoundLevel(), o.forEach(function (e) { var r; p = null === (r = e.publisher) || void 0 === r ? void 0 : r.replacePublishedTrack(t, !1, { "isTrackProcessedFromOriginalStream": A }) }), E && i.startSoundLevel(), p } return E && i.stopSoundLevel(), i.replacePreviewTrack(t, !1, { "isTrackProcessedFromOriginalStream": A }), E && i.startSoundLevel(), { "errorCode": 0, "extendedData": "" } }, A.prototype.enableMicrophone = function (e, t) { var A = this.streamCenter.checkPreview(e); return A ? A.enableMicrophone(t, this.streamCenter) : (this.logger.error("zsc.em.0 no preview"), !1) }, A.prototype.enableCamera = function (e, t, A) { var r = this.streamCenter.checkPreview(e); return r ? r.enableCamera(t, this.streamCenter, A) : (this.logger.error("zsc.ec.0 no preview"), !1) }, A.prototype.setDummyCaptureImagePath = function (e, t) { var A = this; return new Promise(function (r, i) { var o = A.streamCenter.checkPreview(t); if (!o) return A.logger.error("zc.sdcp.0 preview no found"), void r(!1); if ("string" != typeof e) return A.logger.error("zc.sdcp.0 filePath type error"), void r(!1); var n = new Image; n.src = e, n.crossOrigin = "anonymous", n.onload = function () { o.loadImgTimer && clearTimeout(o.loadImgTimer), o.loadImgTimer = void 0, A.logger.info("zc.sdcp.0 load file path success"), o.muteImage = n, r(!0) }, o.loadImgTimer = setTimeout(function () { A.logger.error("zc.sdcp.0 load img timeout"), r(!1) }, 5e3) }) }, A.prototype.enableAutoSwitchDevice = function (e) { this.stateCenter.autoSwitchDeviceSetting = i({}, e) }, A.prototype.getSpan = function (e, t) { var A = this.streamCenter.checkPublish(e); return this.stateCenter.reporter.createSpan(s.H, A ? { "key": g.ZegoRTCLogEvent.kZegoTaskPublishStart.event, "par": A.streamID } : { "key": g.ZegoRTCLogEvent.kZMInitSetting.event }, { "key": "" }, t) }, A.prototype.enVideoSpan = function (e, t, A) { var r = this.stateCenter.reporter.createSpan(s.H, { "key": g.ZegoRTCLogEvent.kZegoTaskPublishStart.event, "par": e }, { "key": "" }, t); r.setAttributes(A), r.end() }, A }(); t.AdvancedModule = l }, "6466": function _(e, t, A) { "use strict"; var r = this && this.__assign || function () { return (r = Object.assign || function (e) { for (var t, A = 1, r = arguments.length; A < r; A++)for (var i in t = arguments[A]) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]); return e }).apply(this, arguments) }, i = this && this.__awaiter || function (e, t, A, r) { return new (A || (A = Promise))(function (i, o) { function n(e) { try { a(r.next(e)) } catch (e) { o(e) } } function s(e) { try { a(r.throw(e)) } catch (e) { o(e) } } function a(e) { var t; e.done ? i(e.value) : (t = e.value, t instanceof A ? t : new A(function (e) { e(t) })).then(n, s) } a((r = r.apply(e, t || [])).next()) }) }, o = this && this.__generator || function (e, t) { var A, r, i, o, n = { "label": 0, "sent": function sent() { if (1 & i[0]) throw i[1]; return i[1] }, "trys": [], "ops": [] }; return o = { "next": s(0), "throw": s(1), "return": s(2) }, "function" == typeof Symbol && (o[Symbol.iterator] = function () { return this }), o; function s(s) { return function (a) { return function (s) { if (A) throw new TypeError("Generator is already executing."); for (; o && (o = 0, s[0] && (n = 0)), n;)try { if (A = 1, r && (i = 2 & s[0] ? r.return : s[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, s[1])).done) return i; switch (r = 0, i && (s = [2 & s[0], i.value]), s[0]) { case 0: case 1: i = s; break; case 4: return n.label++, { "value": s[1], "done": !1 }; case 5: n.label++, r = s[1], s = [0]; continue; case 7: s = n.ops.pop(), n.trys.pop(); continue; default: if (!((i = (i = n.trys).length > 0 && i[i.length - 1]) || 6 !== s[0] && 2 !== s[0])) { n = 0; continue } if (3 === s[0] && (!i || s[1] > i[0] && s[1] < i[3])) { n.label = s[1]; break } if (6 === s[0] && n.label < i[1]) { n.label = i[1], i = s; break } if (i && n.label < i[2]) { n.label = i[2], n.ops.push(s); break } i[2] && n.ops.pop(), n.trys.pop(); continue }s = t.call(e, n) } catch (e) { s = [6, e], r = 0 } finally { A = i = 0 } if (5 & s[0]) throw s[1]; return { "value": s[0] ? s[1] : void 0, "done": !0 } }([s, a]) } } }; Object.defineProperty(t, "__esModule", { "value": !0 }), t.signal = t.publisher = t.publishModule = t.playModule = t.preview = t.streamHandler = t.zegoWebRTC = t.ENUM_PUBLISH_STREAM_STATE = t.ENUM_STREAM_CMD_PRI = t.ENUM_STREAM_SUB_CMD = t.TRACER_LEVEL = t.PROTO_VERSION = void 0; var n, s = A(2965), a = A(8476), c = A(3725), g = A(5976); function I(e, t) { return e && "live" === e.readyState ? !0 === e.enabled ? 0 : "video" === e.kind && "firefox" === t ? 2 : 20 : 2 } t.PROTO_VERSION = "2.25.6", function (e) { e[e.I = 0] = "I", e[e.H = 10] = "H", e[e.M = 100] = "M", e[e.L = 1e3] = "L" }(n = t.TRACER_LEVEL || (t.TRACER_LEVEL = {})), t.ENUM_STREAM_SUB_CMD = { "liveNone": 0, "liveBegin": 2001, "liveEnd": 2002, "liveUpdate": 2003 }, t.ENUM_STREAM_CMD_PRI = { "liveBegin": "zegochat_js.room_stream_create_req", "liveEnd": "zegochat_js.room_stream_delete_req", "liveUpdate": "zegochat_js.room_stream_update_req" }, t.ENUM_PUBLISH_STREAM_STATE = { "waiting_url": 1, "tryPublish": 2, "update_info": 3, "publishing": 4, "stop": 5, "retryPublish": 6 }, t.zegoWebRTC = { "mutePublishStreamVideo": function mutePublishStreamVideo(e, t, A) { this.logger.info(s.ZEGO_WEBRTC_ACTION.MUTE_PUBLISH_STREAM_VIDEO + " call. " + (null == e ? void 0 : e.id) + " mute: ".concat(t, ", retain: ").concat(A)); var r = this.rtcModules.advancedModule.getSpan(e, c.ZegoRTCLogEvent.kZegoTaskMutePublishVideo.event); if ("boolean" != typeof t || void 0 !== A && "boolean" != typeof A) return this.logger.error(s.ZEGO_WEBRTC_ACTION.MUTE_PUBLISH_STREAM_VIDEO + " option error"), !1; var i = this.rtcModules.advancedModule.enableStream(e, { "video": !t, "retain": A }); return r.setAttributes({ "mute_type": c.ZegoRTCLogEvent.kZegoTaskMutePublishVideo.mute_type(t ? 1 : 0), "retain": c.ZegoRTCLogEvent.kZegoTaskMutePublishVideo.retain(A) }), r.end(), this.logger.info(s.ZEGO_WEBRTC_ACTION.MUTE_PUBLISH_STREAM_VIDEO + " end"), i }, "mutePublishStreamAudio": function mutePublishStreamAudio(e, t) { this.logger.info(s.ZEGO_WEBRTC_ACTION.MUTE_PUBLISH_STREAM_AUDIO + " call. " + (null == e ? void 0 : e.id) + " mute: ".concat(t)); var A = this.rtcModules.advancedModule.getSpan(e, c.ZegoRTCLogEvent.kZegoTaskMutePublishAudio.event); if ("boolean" != typeof t) return this.logger.error(s.ZEGO_WEBRTC_ACTION.MUTE_PUBLISH_STREAM_AUDIO + " option error"), !1; var r = this.rtcModules.advancedModule.enableStream(e, { "audio": !t }); return A.setAttributes({ "mute_type": c.ZegoRTCLogEvent.kZegoTaskMutePublishAudio.mute_type(t ? 1 : 0) }), A.end(), this.logger.info(s.ZEGO_WEBRTC_ACTION.MUTE_PUBLISH_STREAM_AUDIO + " end"), r }, "mutePlayStreamVideo": function mutePlayStreamVideo(e, t) { this.logger.info(s.ZEGO_WEBRTC_ACTION.MUTE_PLAY_STREAM_VIDEO + " call " + e + " " + t); var A = this.stateCenter.reporter.createSpan(n.H, { "key": c.ZegoRTCLogEvent.kZegoTaskPlayStart.event, "par": e }, { "key": "" }, c.ZegoRTCLogEvent.kZegoTaskMutePlayVideo.event); A.setAttributes({ "mute_type": c.ZegoRTCLogEvent.kZegoTaskMutePlayVideo.mute_type(t ? 1 : 0) }); var r = this.rtcModules.playModule.mutePlayStream(e, "video", t); return A.end(), this.logger.info(s.ZEGO_WEBRTC_ACTION.MUTE_PLAY_STREAM_VIDEO + " end"), r }, "mutePlayStreamAudio": function mutePlayStreamAudio(e, t) { this.logger.info(s.ZEGO_WEBRTC_ACTION.MUTE_PLAY_STREAM_AUDIO + " call " + e + " " + t); var A = this.stateCenter.reporter.createSpan(n.H, { "key": c.ZegoRTCLogEvent.kZegoTaskPlayStart.event, "par": e }, { "key": "" }, c.ZegoRTCLogEvent.kZegoTaskMutePlayAudio.event); A.setAttributes({ "mute_type": c.ZegoRTCLogEvent.kZegoTaskMutePlayAudio.mute_type(t ? 1 : 0) }); var r = this.rtcModules.playModule.mutePlayStream(e, "audio", t); return A.end(), this.logger.info(s.ZEGO_WEBRTC_ACTION.MUTE_PLAY_STREAM_AUDIO + "end"), r }, "muteMicrophone": function muteMicrophone(e) { this.logger.info(s.ZEGO_WEBRTC_ACTION.MUTE_MIC + " call"); var t = this.stateCenter.reporter.createSpan(n.H, { "key": c.ZegoRTCLogEvent.kZegoTaskInitSetting.event }, { "key": "" }, c.ZegoRTCLogEvent.kZegoEnableMic.event); if ("boolean" != typeof e) return this.logger.error(s.ZEGO_WEBRTC_ACTION.MUTE_MIC + " option error"), this.stateCenter.reporter.setError(t, a.errorCodeList.INPUT_PARAM), !1; var A = this.rtcModules.advancedModule.enableMicrophoneOnly(!e), r = Object.keys(this.streamCenter.publisherList).map(function (e) { return { "stream_id": e } }); return t.setAttributes({ "enable": c.ZegoRTCLogEvent.kZegoEnableMic.enable(!e), "stream_list": c.ZegoRTCLogEvent.kZegoEnableMic.stream_list(r) }), t.end(), this.logger.info(s.ZEGO_WEBRTC_ACTION.MUTE_MIC + " end"), A }, "activateSEIInsert": function activateSEIInsert(e) { var t = e.stream, A = e.action, r = e.infoType, i = this.rtcModules.advancedModule.getSpan(e.stream, c.ZegoRTCLogEvent.kZegoTaskActivateSEIInsert.event); i.setAttributes({ "action": c.ZegoRTCLogEvent.kZegoTaskActivateSEIInsert.action(e.action), "info_type": c.ZegoRTCLogEvent.kZegoTaskActivateSEIInsert.info_type(e.infoType) }); var o = this.rtcModules.publishModule.activateSEIInsert(t, A, r); return i.end(), o }, "getAudioInfo": function getAudioInfo(e, t, A) { if (!e) return this.logger.error("localStream is empty!"), !1; var i = r({}, A); return new g.MediaUtil(this.ac, i).connectToSource(e, function (e) { t(e) }) }, "startRecord": function startRecord(e) { var t = this, A = this.streamCenter.checkPreview(e); if (A) { var r = e.clone(), i = r.getAudioTracks(); i.length > 0 && A.hasEmptyAudioTrack && i.forEach(function (e) { r.removeTrack(e) }), this.recordedBlobs = []; var o = { "mimeType": "video/webm;codecs=vp9" }; MediaRecorder.isTypeSupported(o.mimeType) || (o = { "mimeType": "video/webm;codecs=vp8,opus" }, MediaRecorder.isTypeSupported(o.mimeType) || (o = { "mimeType": "video/webm;codecs=vp8" }, MediaRecorder.isTypeSupported(o.mimeType) || (o = { "mimeType": "video/webm" }, MediaRecorder.isTypeSupported(o.mimeType) || (o = { "mimeType": "" })))); try { this.mediaRecorder = new MediaRecorder(r, o) } catch (e) { return void this.logger.error("Exception while creating ZegoMediaRecorder:", e) } this.mediaRecorder.onstop = function (e) { t.logger.warn("Recorder stopped: " + e) }, this.mediaRecorder.ondataavailable = this.handleDataAvailable.bind(this), this.mediaRecorder.start(10) } else this.logger.error("stream is not from zego!") }, "stopRecord": function stopRecord() { this.mediaRecorder ? this.mediaRecorder.stop() : this.logger.warn("please invoke startRecord first") }, "resumeRecord": function resumeRecord() { this.mediaRecorder ? this.mediaRecorder.resume() : this.logger.warn("please invoke startRecord first") }, "pauseRecord": function pauseRecord() { this.mediaRecorder ? this.mediaRecorder.pause() : this.logger.warn("please invoke startRecord first") }, "saveRecord": function saveRecord(e) { if (this.mediaRecorder && this.recordedBlobs) { var t = new Blob(this.recordedBlobs, { "type": "video/webm" }), A = window.URL.createObjectURL(t), r = document.createElement("a"); r.style.display = "none", r.href = A, r.download = e + ".webm", document.body.appendChild(r), r.click(), setTimeout(function () { document.body.removeChild(r), window.URL.revokeObjectURL(A) }, 100) } else this.logger.warn("please invoke startRecord first") }, "handleDataAvailable": function handleDataAvailable(e) { e.data && e.data.size > 0 && this.recordedBlobs.push(e.data) }, "addTrack": function addTrack(e, t) { var A = this; return new Promise(function (r, i) { var o = { "id": t.id, "muted": t.muted, "enabled": t.enabled, "kind": t.kind, "readyState": t.readyState, "label": t.label }; A.logger.info(s.ZEGO_WEBRTC_ACTION.ADD_TRACK + " call. ".concat(null == e ? void 0 : e.id, " track: ") + JSON.stringify(o)), A.rtcModules.advancedModule.handleTrack("ADD", e, t, r, i) }) }, "removeTrack": function removeTrack(e, t) { var A = this; return new Promise(function (r, i) { A.logger.info(s.ZEGO_WEBRTC_ACTION.REMOVE_TRACK + " call"), A.rtcModules.advancedModule.handleTrack("REMOVE", e, t, r, i) }) }, "enableCameraCapturing": function enableCameraCapturing(e, t) { return void 0 === t && (t = !0), i(this, void 0, void 0, function () { var A, r, i, s; return o(this, function (o) { return A = this.stateCenter.reporter.createSpan(n.H, { "key": c.ZegoRTCLogEvent.kZegoTaskInitSetting.event }, { "key": "" }, c.ZegoRTCLogEvent.kZegoEnableCamera.event), (r = this.streamCenter.checkPreview(e)) ? (i = this.streamCenter.getPublishList(e), s = i.map(function (e) { return { "stream_id": e.streamID } }), A.setAttributes({ "enable": c.ZegoRTCLogEvent.kZegoEnableCamera.enable(t), "stream_list": c.ZegoRTCLogEvent.kZegoEnableCamera.stream_list(s) }), A.end(), [2, r.enableCameraCapturing(t)]) : (this.logger.error("zsc.ecc no preview"), this.stateCenter.reporter.setError(A, a.errorCodeList.PUBLISH_NO_PREVIEW), [2, !1]) }) }) } }, t.streamHandler = {}, t.preview = { "enableCamera": function enableCamera(e, t, A) { var r, n; return i(this, void 0, void 0, function () { var i, s, a, c, g, u, l, h, d, C, E, p, f, B = this; return o(this, function (o) { switch (o.label) { case 0: return this.localStream && 0 != this.localStream.getVideoTracks().length ? (i = this.videoTrack, !e && this.muteImage ? ((a = document.createElement("canvas")).width = this.muteImage.width, a.height = this.muteImage.height, c = a.getContext("2d"), this.muteImageAnID = setInterval(function () { c.drawImage(B.muteImage, 0, 0) }, 100), s = a.captureStream().getVideoTracks()[0], this.localStream.removeTrack(this.localStream.getVideoTracks()[0]), this.localStream.addTrack(s), this.rtcViewer && this.rtcViewer.setVideo(s)) : e && this.muteImage && (this.isVideoNodeQueueEnabled ? this.replacePreviewTrack(this.videoNodeQueue.getDestinationTrack(), !0) : this.replacePreviewTrack(this.videoTrack, !1)), g = this.stateCenter.browser, A && !e || !i ? A && !e && ((null === (r = this.videoEffect) || void 0 === r ? void 0 : r.enabled) || this.isVideoNodeQueueEnabled ? this.logger.warn("zp.ec.2 Unable to keep the preview screen when beauty is turned on") : (E = this.cloneVideoTrack, this.cloneVideoTrack = this.videoTrack.clone(), this.cloneVideoTrack.enabled = !0, this.replacePreviewTrack(this.cloneVideoTrack, !1, { "retainTrack": !0 }), E && E.stop())) : (i.enabled = e, "chrome" === g && e && void 0 !== _typeof(i.getSettings().width) && i.getSettings().width > 0 && navigator.userAgent && (u = 0, (l = (navigator.userAgent.toLowerCase().match(/chrome\/([\d.]+)/) || [])[1]) && (u = parseInt(l.split(",")[0])), u && u >= 87 && u < 92 && (h = i.getSettings().width - 1, d = i.getSettings().height - 1, C = i.getSettings().frameRate, i.applyConstraints({ "width": h, "height": d, "frameRate": C }).then(function () { i.applyConstraints({ "width": B.videoInfo.width, "height": B.videoInfo.height, "frameRate": C }) })))), i && (i.enabled = e), this.isVideoNodeQueueEnabled ? (this.videoNodeQueue.getDestinationTrack().enabled = e, e ? [3, 2] : [4, this.videoNodeQueue.replaceNewSourceByTrack(null, !1)]) : [3, 5]) : (this.logger.error("zp.ec.2 video track no found"), [2, !1]); case 1: o.sent(), o.label = 2; case 2: return e && i ? [4, this.videoNodeQueue.replaceNewSourceByTrack(i, !1)] : [3, 4]; case 3: o.sent(), o.label = 4; case 4: o.label = 5; case 5: return null === (n = this.lowStream) || void 0 === n || n.getVideoTracks().forEach(function (t) { t.enabled = e }), p = t.checkPreview(this.localStream), (f = t.getPublishList(this.localStream).map(function (e) { return e.publisher })).length && f.forEach(function (t) { var A, r = null === (A = t.peerConnection) || void 0 === A ? void 0 : A.getSenders().filter(function (e) { var t; return "video" === (null === (t = e.track) || void 0 === t ? void 0 : t.kind) }); r && r.forEach(function (t) { !e && B.muteImage && s ? null == t || t.replaceTrack(s) : e && (B.isVideoNodeQueueEnabled ? t.track !== B.videoNodeQueue.getDestinationTrack() && (null == t || t.replaceTrack(B.videoNodeQueue.getDestinationTrack())) : t.track === B.videoTrack || (null == p ? void 0 : p.streamFromCanvas) || null == t || t.replaceTrack(B.videoTrack), B.muteImageAnID && clearInterval(B.muteImageAnID)) }); var i = B.muteImage && !e ? 0 : I(B.videoTrack, g); t.sendStreamStatus(i, t.mic_status) }), this.isVideoEnabled = e, this.logger.info("zp.ec.2 call success"), [2, !0] } }) }) }, "enableMicrophone": function enableMicrophone(e, t) { if (!this.localStream) return this.logger.error("zp.em.2 no localStream"), !1; this.localStream.getAudioTracks().forEach(function (t) { t.enabled = e }), this.audioTrack && (this.audioTrack.enabled = e && t.isMicEnabled); var A = t.getPublishList(this.localStream).map(function (e) { return e.publisher }); return A.length && A.forEach(function (A) { A.signal && A.sendStreamStatus(A.camera_status, e && t.isMicEnabled ? 0 : 2) }), this.isAudioEnabled = e, this.logger.debug("zp.em.2 call success. " + e), !0 }, "replacePreviewTrack": function replacePreviewTrack(e, t, A) { return void 0 === t && (t = !1), void 0 === A && (A = {}), i(this, void 0, void 0, function () { var r, i, n, s, a; return o(this, function (o) { return this.logger.info("zsc.rpt.0 call"), e && e.kind && this.localStream ? (r = !0 === (null == A ? void 0 : A.retainTrack), i = "audio" === e.kind ? "audioTrack" : "videoTrack", "audio" === e.kind && this.insertableaudio && this.insertableaudio.track.id !== e.id && (e = this.insertableaudio.getInsertableStreamTrack(e)), r || "video" !== e.kind || t || !this._videoNodeQueue ? "audio" === e.kind && this.audioNodeQueue && !A.isTrackProcessedFromOriginalStream ? ((n = new MediaStream).addTrack(e), s = this.ac.createMediaStreamSource(n), this.audioNodeQueue.replaceSource(s)) : "audio" !== e.kind || this.audioNodeQueue || !this.destNode || A.isTrackProcessedFromOriginalStream ? (this.logger.info("zsc.rpt.0 replace local track"), (a = this.localStream.getTracks().find(function (t) { return t.kind === e.kind })) !== e && (a && this.localStream.removeTrack(a), this.localStream.addTrack(e)), this.localStream.addTrack(e), this.rtcViewer && (this.rtcViewer.setTrack("video" === e.kind, e), "safari" === this.stateCenter.browser && this.rtcViewer.resume(!0)), !r && "video" === e.kind && this.enableDualStream && this.createLowStream()) : (this.createSrcNode(e, !0).connect(this.destNode), this.logger.info("zsc.rpt.0 replace audio track with audio mix.")) : (this.logger.info("zsc.rpt.0 videoNodeQueue replaceNewSource"), this._videoNodeQueue.replaceNewSourceByTrack(e)), t || r || A.isTrackProcessedFromOriginalStream || (this[i] = e, "REMOVE" === A.handleTrack && "video" === e.kind && (this.localStream.removeTrack(e), this.rtcViewer && this.rtcViewer.setTrack(!0, null), this[i] = null)), this.logger.info("zsc.rpt.0 end"), [2]) : [2] }) }) }, "enableCameraCapturing": function enableCameraCapturing(e) { return i(this, void 0, void 0, function () { var t, A, i, n, s, a, c, g, u, l; return o(this, function (o) { switch (o.label) { case 0: return this.localStream && this.videoTrack && "camera" === this.previewType ? (t = this.streamCenter.getPublishList(this.localStream).map(function (e) { return e.publisher }), e ? "live" !== this.videoTrack.readyState ? [3, 1] : (this.logger.warn("zp.ecc camera is already capturing"), [3, 12]) : [3, 13]) : (this.logger.error("zp.ecc not camera stream"), [2, !1]); case 1: A = this.getMediaStreamConstraints(r(r({}, this.mediaStreamConfig), { "audio": !1 })), o.label = 2; case 2: return o.trys.push([2, 11, , 12]), [4, navigator.mediaDevices.getUserMedia(A)]; case 3: return i = o.sent(), (n = i.getVideoTracks()[0]).enabled = this.isVideoEnabled, !1 === n.enabled && this.logger.warn("zp.ecc video is not enabled"), !this.muteImage || this.isVideoEnabled ? [3, 4] : (this.videoTrack = n, n.enabled = !this.isVideoEnabled, [3, 10]); case 4: if (!t.length) return [3, 9]; s = 0, o.label = 5; case 5: return s < t.length ? [4, t[s].replacePublishedTrack(n)] : [3, 8]; case 6: if (0 !== (null == (a = o.sent()) ? void 0 : a.errorCode)) throw a; o.label = 7; case 7: return s++, [3, 5]; case 8: return [3, 10]; case 9: this.replacePreviewTrack(n), o.label = 10; case 10: return [3, 12]; case 11: return c = o.sent(), this.logger.error("zsc.ecc resume camera capturing failed. " + JSON.stringify(c)), [2, !1]; case 12: return [3, 18]; case 13: return g = this.videoTrack.enabled, u = this.stateCenter.browser, this.stateCenter.engineConfig.previewClearLastFrame ? "safari" === u ? [3, 15] : (this.videoTrack.enabled = !1, [4, new Promise(function (e) { setTimeout(function () { e(void 0) }, 200) })]) : [3, 16]; case 14: o.sent(), o.label = 15; case 15: return this.videoTrack.stop(), this.stopCanvasStreamTrack(), this.videoTrack.enabled = g, [3, 17]; case 16: this.videoTrack.stop(), this.stopCanvasStreamTrack(), o.label = 17; case 17: t.length && (l = this.muteImage && !this.isVideoEnabled ? 0 : I(this.videoTrack, u), t.forEach(function (e) { e.sendStreamStatus(l, e.mic_status) })), o.label = 18; case 18: return [2, !0] } }) }) } }, t.playModule = { "mutePlayStream": function mutePlayStream(e, t, A) { var r = this; return this.logger.info("zsc.mps.0 call " + t + " " + A), new Promise(function (i, o) { if ("string" != typeof e || "" == e) return r.logger.error("zsc.mps.0 streamID must be string and not empty"), void o(!1); if ("boolean" != typeof A) return r.logger.error("zsc.mps.0 mute must be boolean"), void o(!1); var s = r.streamCenter.playerList[e]; if (!s) return r.logger.error("zsc.mps.0 player not found"), void o(!1); if ("video" === t) { if (s.playOption && !1 === s.playOption.video || s.player && 0 !== s.player.cameraStatus) return r.logger.error("zsc.mps.0 stream no contain video"), void o(!1); s.player.signal.ActivatePlayVideoStream(r.stateCenter.getSeq(), s.player.sessionId, A, function () { var t, o, a, g; r.logger.info("zsc.mps.0 suc"), s.player.playMediaStatus.video = !A; var u = c.ZegoRTCLogEvent.kZegoPlayContentChanged, l = r.stateCenter.reporter.createSpan(n.H, { "key": c.ZegoRTCLogEvent.kZegoTaskPlayStart.event, "par": e }, { "key": "" }, u.event); l.setAttributes({ "webrtc_sid": u.webrtc_sid(s.player.sessionId), "video_activate": u.video_activate(!!s.player.playMediaStatus.video), "audio_activate": u.audio_activate(!!s.player.playMediaStatus.audio), "video_layer": u.video_layer(2 === (null === (o = null === (t = s.player) || void 0 === t ? void 0 : t.playOption) || void 0 === o ? void 0 : o.streamType) ? -1 : null === (g = null === (a = s.player) || void 0 === a ? void 0 : a.playOption) || void 0 === g ? void 0 : g.streamType) }), l.end(), i(!0) }, function () { r.logger.error("zsc.mps.0 fail"), o(!1) }) } else if ("audio" === t) { if (s.playOption && !1 === s.playOption.audio || s.player && 0 !== s.player.micStatus) return r.logger.error("zsc.mps.0 stream no contain audio"), void o(!1); s.player.signal.ActivatePlayAudioStream(r.stateCenter.getSeq(), s.player.sessionId, A, function () { r.logger.info("zsc.mps.0 suc"), s.player.playMediaStatus.audio = !A; var t = c.ZegoRTCLogEvent.kZegoPlayContentChanged, o = r.stateCenter.reporter.createSpan(n.H, { "key": c.ZegoRTCLogEvent.kZegoTaskPlayStart.event, "par": e }, { "key": "" }, t.event); o.setAttributes({ "webrtc_sid": t.webrtc_sid(s.player.sessionId), "video_activate": t.video_activate(!!s.player.playMediaStatus.video), "audio_activate": t.audio_activate(!!s.player.playMediaStatus.audio) }), o.end(), i(!0) }, function () { r.logger.error("zsc.mps.0 fail"), o(!1) }) } else o(!1) }) }, "setStreamAudioOutput": function setStreamAudioOutput(e, t) { var A = this; return !(null == t || 0 == t.length || !e || (this.logger.debug("zsc.ssao.0 device " + t), e ? "undefined" !== e.sinkId ? (e.setSinkId(t).then(function () { A.logger.info("zsc.ssao.0 success device: " + t) }).catch(function (e) { A.logger.info("zsc.ssao.0 " + e.name) }), 0) : (this.logger.error("zsc.ssao.0 browser does not suppport"), 1) : (this.logger.error("zsc.ssao.0 no localVideo"), 1))) } }, t.publishModule = { "activateSEIInsert": function activateSEIInsert(e, t, A) { void 0 === A && (A = 0); var r = this.streamCenter.checkPreview(e); return r ? 0 !== t && 1 !== t ? (this.logger.error(s.ZEGO_WEBRTC_ACTION.ACTIVATE_SEI_INSERT + " value of “action” should be 0 or 1"), !1) : (r.activatesSEIConfig = { "action": t, "infoType": A }, this.streamCenter.getPublishList(e).map(function (e) { return e.publisher }).forEach(function (e) { e.activateSEIInsert(t, A) }), !0) : (this.logger.error(s.ZEGO_WEBRTC_ACTION.ACTIVATE_SEI_INSERT + " stream is not created"), !1) } }, t.publisher = { "activateSEIInsert": function activateSEIInsert(e, t) { var A = this; return new Promise(function (r, i) { return A.signal ? (A.signal && A.signal.activateSEIInsert(A.stateCenter.getSeq(), A.sessionId, A.peerID, e, t, function (e, t, i) { var o = !1; 0 === i.result ? (A.logger.info(s.ZEGO_WEBRTC_ACTION.ACTIVATE_SEI_INSERT + " called success"), o = !0) : 1 === i.result ? (A.logger.error(s.ZEGO_WEBRTC_ACTION.ACTIVATE_SEI_INSERT + " " + i.peer_id + " invalid param."), o = !1) : 2 === i.result && (A.logger.error(s.ZEGO_WEBRTC_ACTION.ACTIVATE_SEI_INSERT + " peer not exist"), o = !1), r(o) }, function (e) { 1 === e && A.logger.error(s.ZEGO_WEBRTC_ACTION.ACTIVATE_SEI_INSERT + " request timeout") }), !1) : r(!1) }) }, "replacePublishedTrack": function replacePublishedTrack(e, t, A) { var r; return void 0 === t && (t = !1), void 0 === A && (A = {}), i(this, void 0, void 0, function () { var i, n, s, c, g, u, l, h; return o(this, function (o) { switch (o.label) { case 0: return null == (i = this.previewer) || i.videoEffect, s = i["".concat(n = e.kind, "Track")], c = null === (r = this.peerConnection) || void 0 === r ? void 0 : r.getSenders().filter(function (e) { var t; return (null === (t = e.track) || void 0 === t ? void 0 : t.kind) === n }), g = this.stateCenter.browser, s || A.handleTrack ? (u = 0, l = 0, "video" === n ? (u = I(t ? s : e, g), l = this.mic_status) : "audio" === n && (l = I(e, g), u = this.camera_status), [4, i.replacePreviewTrack(e, t, A)]) : [3, 2]; case 1: return o.sent(), h = e, "audio" == e.kind && i.insertableaudio && (h = i.localStream.getAudioTracks()[0]), c ? (c.forEach(function (e, A) { var r = !1; if (("video" !== n || !t && i.isVideoNodeQueueEnabled) && ("audio" !== n || "audio" === n && i.destNode) || (r = !0), r) if ("video" == n && i.lowStream && c.length > 1 && 0 == A) e.replaceTrack(i.lowStream.getVideoTracks()[0]); else if ("video" == n && i.streamFromCanvas) { if (!i.streamFromCanvasTrack) { var o = i.getStreamThroughCanvas(i.localStream); i.streamFromCanvasTrack = o.getVideoTracks()[0] } e.replaceTrack(i.streamFromCanvas ? i.streamFromCanvasTrack : h) } else e.replaceTrack(h) }), this.sendStreamStatus(u, l)) : this.logger.info("zc.rt.1 replace remote track will work after stream published"), this.logger.info("zc.rt.1 replace remote track success"), [2, { "errorCode": 0, "extendedData": "" }]; case 2: return this.logger.error("zc.rt.1 publisher track no found"), [2, { "errorCode": a.errorCodeList.TRACK_NOT_FOUND.code, "extendedData": a.errorCodeList.TRACK_NOT_FOUND.message }] } }) }) } }, t.signal = { "activateSEIInsert": function activateSEIInsert(e, t, A, r, i, o, n) { this.logger.info(s.ZEGO_WEBRTC_ACTION.ACTIVATE_SEI_INSERT + " call " + t), this.sendMessageWithCallback("ActivateSEIInsertReq", e, t, { "peer_id": A, "action": r, "info_type": i }, o, n) } } }, "8476": function _(e, t) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.errorCodeList = void 0, t.errorCodeList = { "NOT_LOGIN": { "code": 1000002, "message": "not login room" }, "INPUT_PARAM": { "code": 1100001, "message": "input param error." }, "PUBLISH_NOT_PUBLISH": { "code": 1103040, "message": "publisher not found" }, "PUBLISH_NO_PREVIEW": { "code": 1103044, "message": "stream is not from zego" }, "TRACK_NOT_FOUND": { "code": 1103047, "message": "track is not found" }, "DEVICE_NOT_FOUND": { "code": 1103048, "message": "device is not found" }, "PUBLISHER_CONSTRAINTS_ERROR": { "code": 1103029, "message": "constraint error" }, "PUBLISHER_CDN_PUSH_ERROR": { "code": 1103052, "message": "publisher cdn push error" }, "VIDEO_DEVICE_FALSE": { "code": 1103045, "message": "video is false" }, "AUDIO_DEVICE_FALSE": { "code": 1103046, "message": "audio is false" }, "UNKNOWN_SERVER_ERROR": { "code": 1100999, "message": "unknown server error" }, "LOCALSTREAM_WRONG": { "code": 1000018, "message": "local stream wrong" }, "PUBLISHER_STREAM_NO_FOUND": { "code": 1103055, "message": "publish stream no found" }, "PUBLISH_TARGET_NO_RESPONSE": { "code": 1103063, "message": "publish target no response" }, "BIZ_CHANNEL_ERROR": { "code": 1102021, "message": "biz channel error." }, "INVALID_CHANNEL": { "code": 1102024, "message": "invalid channel" }, "PUBLISHER_EXTRA_INFO_NULL": { "code": 1003050, "message": "extra info of publishing stream is null" }, "PUBLISHER_UPDATE_STREAM_INFO_FAIL": { "code": 1103062, "message": "update stream info fail" }, "TRACK_CAN_NOT_ADD": { "code": 1103063, "message": "only stream which have one track and kind no exist can add track" }, "TRACK_CAN_NOT_REMOVE": { "code": 1103064, "message": "stream which only has one track can not remove " }, "PUBLISHER_UPDATE_SDP_FAIL": { "code": 1103068, "message": "update sdp fail" }, "PUBLISHER_STATE_WRONG": { "code": 1103069, "message": "publisher state wrong" }, "HANDLE_TRACK_NOT_SUPPORTED": { "code": 1103070, "message": "not support handle track" }, "VIDEO_EFFECT_IS_RUNNING": { "code": 1103071, "message": "video effect processor is running" }, "BACKGROUND_PROCESS_IS_RUNNING": { "code": 1103072, "message": "background processor is running" } } }, "2147": function _(e, t, A) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }); var r = A(9068), i = A(6466); t.default = { "type": "Advance", "install": function install(e, t, A, o, n, s, a, c) { for (var g in Object.defineProperty(t.prototype, "initAdvance", { "value": function value() { this.advancedModule = new r.AdvancedModule(this.logger, this.dataReport, this.streamCenter, this.stateCenter) }, "writable": !1 }), i.zegoWebRTC) Object.defineProperty(e.prototype, g, { "value": i.zegoWebRTC[g], "writable": !1 }); for (var g in i.streamHandler) Object.defineProperty(A.prototype, g, { "value": i.streamHandler[g], "writable": !1 }); for (var g in i.preview) Object.defineProperty(o.prototype, g, { "value": i.preview[g], "writable": !1 }); for (var g in i.playModule) Object.defineProperty(n.prototype, g, { "value": i.playModule[g], "writable": !1 }); for (var g in i.publishModule) Object.defineProperty(s.prototype, g, { "value": i.publishModule[g], "writable": !1 }); for (var g in i.publisher) Object.defineProperty(a.prototype, g, { "value": i.publisher[g], "writable": !1 }); for (var g in i.signal) Object.defineProperty(c.prototype, g, { "value": i.signal[g], "writable": !1 }) } } }, "3725": function _(e, t, A) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.ZegoRTCLogEvent = void 0; var r = A(8476), i = A(9268); t.ZegoRTCLogEvent = { "kZegoTaskInitSetting": { "event": "/sdk/init" }, "kZegoDevice": { "event": "device" }, "kZegoTaskRoomContext": { "event": "room_context" }, "kZMInitSetting": { "event": "stream" }, "kZegoTaskPublishStart": { "event": "/sdk/start_publish" }, "kZegoTaskPlayStart": { "event": "/sdk/start_play" }, "kZegoSetVideoConfig": { "event": "/sdk/set_video_config", "error": { "kParamError": r.errorCodeList.INPUT_PARAM, "kLocalStreamError": r.errorCodeList.LOCALSTREAM_WRONG }, "video_params": i.getItem, "video_conf": i.getItem }, "kZegoSetAudioConfig": { "event": "/sdk/set_audio_config", "error": { "kParamError": r.errorCodeList.INPUT_PARAM, "kLocalStreamError": r.errorCodeList.LOCALSTREAM_WRONG }, "audio_params": i.getItem, "audio_conf": i.getItem }, "kZegoVideoEnSize": { "event": "/sdk/api/publish_video_en_size", "w": i.getItemNumber, "h": i.getItemNumber }, "kZegoVideoEnBps": { "event": "/sdk/api/publish_video_en_bps", "bitrate": i.getItemNumber }, "kZegoVideoEnFps": { "event": "/sdk/api/publish_video_en_fps", "fps": i.getItemNumber }, "kZegoReplaceTrack": { "event": "/sdk/replace_track", "error": { "kParamError": r.errorCodeList.INPUT_PARAM }, "track_kind": i.getItemString }, "kZegoTaskUseVideoDevice": { "event": "/device/api/video_c", "error": { "kParamError": r.errorCodeList.INPUT_PARAM, "kDevicesNoFoundError": r.errorCodeList.DEVICE_NOT_FOUND, "kLocalStreamError": r.errorCodeList.LOCALSTREAM_WRONG }, "device": i.getItemString, "device_name": i.getItemString }, "kZegoTaskUseAudioDevice": { "event": "/device/api/audio_c", "error": { "kParamError": r.errorCodeList.INPUT_PARAM, "kDevicesNoFoundError": r.errorCodeList.DEVICE_NOT_FOUND, "kLocalStreamError": r.errorCodeList.LOCALSTREAM_WRONG }, "device": i.getItemString, "device_name": i.getItemString }, "kZegoPlayContentChanged": { "event": "/sdk/play_content_changed", "webrtc_sid": i.getItemNumber, "video_activate": i.getItemBool, "audio_activate": i.getItemBool, "video_layer": i.getItemNumber }, "kZegoTaskMutePublishVideo": { "event": "/sdk/mute_publish_video", "mute_type": i.getItemNumber, "retain": i.getItemBool }, "kZegoTaskMutePublishAudio": { "event": "/sdk/mute_publish_audio", "mute_type": i.getItemNumber }, "kZegoEnableMic": { "event": "/device/enable_mic", "enable": i.getItemBool, "stream_list": i.getItem }, "kZegoEnableCamera": { "event": "/device/enable_camera", "enable": i.getItemBool, "stream_list": i.getItem }, "kZegoTaskMutePlayVideo": { "event": "/sdk/mute_play_video", "mute_type": i.getItemNumber }, "kZegoTaskMutePlayAudio": { "event": "/sdk/mute_play_audio", "mute_type": i.getItemNumber }, "kZegoTaskLiveRoomSendStreamExtraInfo": { "event": "/liveroom/send_stream_extra_info", "error": { "kParamError": r.errorCodeList.INPUT_PARAM, "kExtraInfoNullError": r.errorCodeList.PUBLISHER_EXTRA_INFO_NULL, "kNoLoginError": r.errorCodeList.NOT_LOGIN, "kPublishStreamNoFoundError": r.errorCodeList.PUBLISHER_STREAM_NO_FOUND, "kUpdateStreamInfoFailError": r.errorCodeList.PUBLISHER_UPDATE_STREAM_INFO_FAIL }, "stream_id": i.getItemString, "msg_length": i.getItemString, "room_id": i.getItemString, "room_sid_string": i.getItemString, "use_na": i.getItemNumber }, "kZegoTaskActivateSEIInsert": { "event": "/active/sei", "action": i.getItemNumber, "info_type": i.getItemNumber } } }, "5976": function _(e, t) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.MediaUtil = void 0; var A = function () { function A(e, t) { var A = t.type, r = t.channels, i = void 0 === r ? 1 : r, o = t.bufferSize, n = void 0 === o ? 0 : o, s = t.sampleBit, a = void 0 === s ? 16 : s, c = t.sampleRate, g = void 0 === c ? 44100 : c, u = this; this.instant = 0, this.slow = 0, this.clip = 0, this.context = e, this.type = A, this.channels = i, this.bufferSize = n, this.sampleBit = a, this.sampleRate = g, this.script = e.createScriptProcessor(n, i, i), (new Date).getTime(), this.script.addEventListener("audioprocess", function (e) { var t, r = e.inputBuffer.getChannelData(0), i = 0, o = 0; for (t = 0; t < r.length; ++t)i += r[t] * r[t], Math.abs(r[t]) > .99 && (o += 1); if (u.instant = Math.sqrt(i / r.length), u.slow = .95 * u.slow + .05 * u.instant, u.clip = o / r.length, "pcm" === A || "wav" === A) { for (var n = [], s = 0; s < u.channels; s++)n.push(e.inputBuffer.getChannelData(s)); u.recorderBuffer(n) } }), "pcm" !== A && "wav" !== A || this.initRecorderBuffer(A) } return A.prototype.connectToSource = function (e, t) { try { this.mic = this.context.createMediaStreamSource(e), this.mic.connect(this.script), this.script.connect(this.context.destination), void 0 !== t && t(null) } catch (e) { console.error(e), void 0 !== t && t(e) } return this }, A.prototype.recorderBuffer = function (e) { this.worker.postMessage({ "command": "record", "val": e }) }, A.prototype.initRecorderBuffer = function (e) { var t = this; this.worker = this.inlineWorker(function () { var e, t, A, r, i, o, n = []; function s(e, t, A) { for (var r = 0; r < A.length; r++, t += 2) { var i = Math.max(-1, Math.min(1, A[r])); e.setInt16(t, i < 0 ? 32768 * i : 32767 * i, !0) } } function a(e, t, A) { for (var r = 0; r < A.length; r++, t++) { var i = Math.max(-1, Math.min(1, A[r])), o = i < 0 ? 128 * i : 127 * i; e.setInt8(t, o += 128) } } function g(e, t, A) { for (var r = 0; r < A.length; r++)e.setUint8(t + r, A.charCodeAt(r)) } function C(e, t) { for (var A = new Float32Array(t.length / e), r = 0, i = 0; r < A.length;)A[r] = t[i], i += e, r++; return A } function I(e, t, A) { for (var r = new Float32Array(t * e.length), i = 0, o = 0; o < A[0].length; o++)r.set(A[0][o], i), i += A[0][o].length; return r } function c(e, t) { for (var A = new Float32Array(e.length + t.length), r = 0; r < e.length + t.length; r += 2)A[r] = e[r / 2 >> 0], A[r + 1] = t[r / 2 >> 0]; return A } function E(t) { var A, r; if (1 == e) A = I(n[0], i, n), 1 != t && (r = C(t, A)); else if (2 == e) { var o = I(n[0], i, n), s = I(n[1], i, n); 1 != t ? r = c(C(t, o), C(t, s)) : A = c(o, s) } return 1 != t ? r : A } function u(e) { var A = function (e, A) { var r; 8 == A ? r = e.length : 16 == A && (r = e.length, r *= 2); var i = new ArrayBuffer(r), o = new DataView(i); return 8 == A ? a(o, 0, e) : 16 == t && s(o, 0, e), o }(E(e), t); self.postMessage({ "command": "exportPcmLive", "val": A }) } function l(r) { var i = function (r, i) { var o; 8 == t ? o = r.length : 16 == t && (o = r.length, o *= 2); var n = new ArrayBuffer(o + 44), c = new DataView(n), u = A, l = t, h = e; return g(c, 0, "RIFF"), c.setUint32(4, 36 + o, !0), g(c, 8, "WAVE"), g(c, 12, "fmt "), c.setUint32(16, 16, !0), c.setUint16(20, 1, !0), c.setUint16(22, h, !0), c.setUint32(24, u, !0), c.setUint32(28, u * h * (l / 8), !0), c.setUint16(32, h * (l / 8), !0), c.setUint16(34, l, !0), g(c, 36, "data"), c.setUint32(40, o, !0), 8 == t ? a(c, 44, r) : 16 == t && s(c, 44, r), c }(E(r)); self.postMessage({ "command": "exportWav", "val": i }) } this.onmessage = function (s) { switch (s.data.command) { case "init": e = (a = s.data.val).sampleChannel, t = a.sampleBit, A = a.sampleRate, r = a.oldSampleRate, i = a.bufferSize, o = a.type; break; case "record": !function (t) { for (var i = 0; i < e; i++)n[i] || (n[i] = []), n[i].push(t[i]); var s = Math.round(r / A); "pcm" === o ? u(s) : "wav" === o && l(s), n = [] }(s.data.val) }var a } }), this.worker.postMessage({ "command": "init", "val": { "sampleChannel": this.channels, "sampleBit": this.sampleBit, "sampleRate": this.sampleRate, "oldSampleRate": this.context.sampleRate, "bufferSize": this.bufferSize, "type": e } }), this.worker.onmessage = function (e) { switch (e.data.command) { case "exportPcmLive": t.onReceiveBuffer(e.data.val); break; case "exportWav": t.onReceiveWav(e.data.val) } } }, A.prototype.onReceiveBuffer = function (e) { }, A.prototype.onReceiveWav = function (e) { }, A.prototype.writeString = function (e, t, A) { for (var r = 0; r < A.length; r++)e.setUint8(t + r, A.charCodeAt(r)) }, A.prototype.writeBuffer = function (e, t, A) { for (var r = 0; r < A.byteLength; r++)e.setUint8(t + r, A[r]) }, A.prototype.concatenation = function (e) { for (var t = 0, A = 0; A < e.length; ++A)t += e[A].buffer.byteLength; var r = new Uint8Array(t), i = 0; for (A = 0; A < e.length; ++A)r.set(new Uint8Array(e[A].buffer), i), i += e[A].buffer.byteLength; return r }, A.prototype.encodeWave = function (e) { var t = this.concatenation(e), A = t.byteLength, r = new ArrayBuffer(A + 44), i = new DataView(r), o = this.sampleRate, n = this.sampleBit, s = this.channels; return this.writeString(i, 0, "RIFF"), i.setUint32(4, 36 + A, !0), this.writeString(i, 8, "WAVE"), this.writeString(i, 12, "fmt "), i.setUint32(16, 16, !0), i.setUint16(20, 1, !0), i.setUint16(22, s, !0), i.setUint32(24, o, !0), i.setUint32(28, o * s * (n / 8), !0), i.setUint16(32, s * (n / 8), !0), i.setUint16(34, n, !0), this.writeString(i, 36, "data"), i.setUint32(40, A, !0), this.writeBuffer(i, 44, t), i }, A.prototype.stop = function () { this.mic.disconnect(), this.script.disconnect() }, A.prototype.inlineWorker = function (e) { if (Worker && e) { var t = e.toString().trim().match(/^function\s*\w*\s*\([\w\s,]*\)\s*{([\w\W]*?)}$/)[1], A = URL.createObjectURL(new window.Blob([t], { "type": "text/javascript" })); return new Worker(A) } return null }, A }(); t.MediaUtil = A }, "9194": function _(e, t) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.ZEGO_WEBRTC_ACTION = void 0, function (e) { e.PRELOAD_EFFECT = "zc.pe.0", e.PLAY_EFFECT = "zc.pe.1", e.PAUSE_EFFECT = "zc.pe.2", e.RESUME_EFFECT = "zc.re", e.STOP_EFFECT = "zc.se", e.UNLOAD_EFFECT = "zc.ue", e.AUDIO_EFFECT_PROCESS = "zc.aep", e.SET_EFFECT_VOLUME = "zc.sev", e.START_MIXING_AUDIO = "zc.sma.0", e.STOP_MIXING_AUDIO = "zc.sma.1", e.MIXING_BUFFER = "zc.mb", e.STOP_MIXING_BUFFER = "zc.smb", e.PUBLISHER_PLAY_EFFECT = "zc.p.0.pe.0", e.PUBLISHER_PAUSE_EFFECT = "zc.p.0.pe.1", e.PUBLISHER_RESUME_EFFECT = "zc.p.0.re", e.PUBLISHER_STOP_EFFECT = "zc.p.0.se", e.PUBLISHER_START_MIXING_AUDIO = "zc.p.0.sma.0", e.PUBLISHER_STOP_MIXING_AUDIO = "zc.p.0.sma.1", e.SET_MIXING_AUDIO_VOLUME = "zc.smav", e.PUBLISHER_MIXING_BUFFER = "zc.p.0.mb", e.PUBLISHER_SET_MIXING_AUDIO_VOLUME = "zc.p.0.smav" }(t.ZEGO_WEBRTC_ACTION || (t.ZEGO_WEBRTC_ACTION = {})) }, "8687": function _(e, t, r) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.AudioBufferProcessor = void 0; var i = r(7546), o = function () { function A(e, t, A, r, i) { this.logger = e, this.ac = t, this.localStream = A, this.destination = r, this.rtcViewer = i, this.audioBufferList = [], this.replace = !1, this.effectEndedCallBack = null, this.effectEndedListener = null, this.startTimes = 0, this.startOffset = 0, this.pauseTimes = 0, this.resumeOffset = 0, this.paused = !1, this.isMixAudio = !1, this.isMixingBuffer = !1, this.loop = !1 } return A.prototype.playEffect = function (e, t, A, r, i) { var o = this; !0 !== this.isMixAudio ? this.audioBuffer ? (this.startOffset = e || 0, this.loop = t || !1, this.replace = A || !1, this.effectEndedCallBack = i, this.mixEffect(this.audioBuffer, function () { o.buffSource.loop = !!t, e ? o.buffSource.start(0, e / 1e3) : o.buffSource.start(0), o.startTimes = Date.now(), o.effectEndedListener = o.effectEndedHandler.bind(o), o.buffSource.addEventListener("ended", o.effectEndedListener), r && r() })) : this.logger.error("amu.pe.1 no audio buffer found") : this.logger.warn("amu.pe.1 audio is mixing") }, A.prototype.stopMixingBuffer = function () { return this.isMixingBuffer = !1, this.stopMixingAudio() }, A.prototype.playRealTimeEffect = function (e) { var t = this; this.mixEffect(e, function () { t.buffSource && t.buffSource.start(0), t.buffSource && t.buffSource.addEventListener("ended", function () { t.audioBufferList.shift(), t.audioBufferList.length > 0 && t.isMixAudio && t.playRealTimeEffect(t.audioBufferList[0]) }) }) }, A.prototype.pauseEffect = function () { this.audioBufferList.length > 0 ? this.logger.error("amu.pe.0 real time buffer can not be paused") : (this.stopMixingAudio(!0), this.resumeOffset = (this.pauseTimes - this.startTimes + this.startOffset) % (1e3 * this.audioBuffer.duration), this.paused = !0) }, A.prototype.resumeEffect = function () { return this.audioBufferList.length > 0 ? (this.logger.error("amu.pe.0 real time buffer can not be resume"), !1) : (this.playEffect(this.resumeOffset, this.loop, this.replace, void 0, this.effectEndedCallBack), this.startOffset = this.resumeOffset, this.paused = !1, !0) }, A.prototype.mixEffect = function (e, t) { this.localStream ? (this.ac.resume(), this.gainNode = this.ac.createGain(), this.delayNode = this.ac.createDelay(1), this.delayNode.delayTime.value = 0, this.buffSource = this.ac.createBufferSource(), this.buffSource.buffer = e, this.buffSource.connect(this.gainNode), this.gainNode.connect(this.ac.destination), this.replaceTrack() && t()) : this.logger.error("amu.me.0 localStream can not be found") }, A.prototype.replaceTrack = function () { if (!this.destination) return !1; this.gainNode.connect(this.delayNode), this.delayNode.connect(this.destination); var e = this.destination.stream.getAudioTracks()[0], t = this.localStream.getTracks(); return this.micTrack = this.localStream.getAudioTracks()[0], this.micTrack !== e && (this.micTrack ? t.includes(this.micTrack) && this.localStream.removeTrack(this.micTrack) : this.logger.warn("amu.rt.0 origin track not fonud"), t.includes(e) || (this.localStream.addTrack(e), this.rtcViewer && this.rtcViewer.setAudio(e))), this.isMixAudio = !0, !0 }, A.prototype.effectEndedHandler = function () { this.stopMixingAudio(), this.effectEndedCallBack && this.effectEndedCallBack(), this.effectEndedCallBack = null }, A.prototype.stopMixingAudio = function (e) { return void 0 === e && (e = !1), this.paused ? (this.logger.info("amu.sma.1 audioEffect is paused"), !e && this.effectEndedListener && (this.effectEndedCallBack && this.effectEndedCallBack(), this.effectEndedCallBack = null), !0) : this.isMixAudio ? this.localStream ? (this.buffSource && (this.buffSource.removeEventListener("ended", this.effectEndedListener), this.buffSource.stop(), this.pauseTimes = Date.now(), this.buffSource.disconnect(this.gainNode), this.buffSource = null), this.gainNode.disconnect(), this.delayNode.disconnect(), this.isMixAudio = !1, this.audioBufferList = [], !e && this.effectEndedListener && (this.effectEndedCallBack && this.effectEndedCallBack(), this.effectEndedCallBack = null), !0) : (this.logger.error("amu.sma.1 localStream can not be found"), !1) : (this.logger.warn("amu.sma.1 no mixing audio found"), !0) }, A.prototype.getProcess = function () { var e = Date.now(); return this.paused && (e = this.pauseTimes), (e - this.startTimes + this.startOffset) % (1e3 * this.audioBuffer.duration) }, A.prototype.seekTo = function (e) { void 0 === e && (e = 0), this.startOffset = e, this.paused ? this.resumeOffset = e : (this.stopMixingAudio(!0), this.playEffect(e, this.loop, this.replace, void 0, this.effectEndedCallBack)) }, A.prototype.mixingBuffer = function (e, t) { var A = this; !0 !== this.isMixAudio || 0 != this.audioBufferList.length || 0 != this.isMixingBuffer ? (this.ac.resume(), this.ac.decodeAudioData(e, function (e) { A.audioBufferList.push(e), 1 == A.audioBufferList.length && A.playRealTimeEffect(A.audioBufferList[0]), A.isMixingBuffer = !0, t && t() }, function (e) { A.logger.error("amu.mb.0 " + e), t && t({ "code": i.errorCodeList.PUBLISHER_DECODE_AUDIO_FAIL.code, "message": i.errorCodeList.PUBLISHER_DECODE_AUDIO_FAIL.message + " " + e }) })) : this.logger.error("amu.mb.0 audio is mixing") }, A.prototype.setMixingAudioVolume = function (e) { return this.gainNode ? (console.error("ktv setVolume", e), this.gainNode.gain.value = e, !0) : (this.logger.error("amu.sma.2 no mixing audio found"), !1) }, A.prototype.setDelay = function (e) { return this.delayNode ? (this.logger.info("amu.sma.2 set delay: " + e), this.delayNode.delayTime.value = e, !0) : (this.logger.warn("amu.sma.2 no mixing audio found"), !1) }, A }(); t.AudioBufferProcessor = o }, "9592": function _(e, t) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.AudioMix = void 0; var A = function () { function A(e, t, A, r, i, o, n) { var s = this; this.logger = e, this.ac = t, this.localStream = A, this.mediaEleSources = r, this.browser = i, this.destination = o, this.rtcViewer = n, this.isMixAudio = !1, this.maxDelay = 1, this.audioCurrentTimer = null, this.audioResumedTimer = null, this.audioEl = null, this.eventHandler = { "volumechange": function volumechange(e) { var t = e.target; t && s.audioNode && (t.muted ? (s.logger.info("amu.sma.0 ".concat(s.id, " audio muted disconnect")), s.audioNode.disconnect()) : (s.logger.info("amu.sma.0 ".concat(s.id, " audio is connected")), s.audioNode.connect(s.ac.destination), s.audioNode.connect(s.gainNode))) }, "canplay": function canplay(e) { var t = e.target; t && !s.isMediaElSrc && s.isMixAudio && (s.logger.info("amu.sma.1 ".concat(s.id, " canplay, remixing audio")), s.stopMixingAudio(), s.startMixingAudio(t)) } }, this.isMediaElSrc = !1, this.id = Date.now() % 1e5 + Math.floor(10 * Math.random()), e.info("amu.sma.0 ".concat(this.id, " init audio mix")) } return A.prototype.startMixingAudio = function (e) { if (this.isMixAudio) return this.logger.error("amu.sma.0 audio is mixing"), !1; if (!this.localStream) return this.logger.error("amu.sma.0 localStream can not be found"), !1; var t; if (e.captureStream = e.captureStream || e.mozCaptureStream || e.webkitCaptureStream, this.isMixAudio = !0, this.gainNode = this.ac.createGain(), this.delayNode = this.ac.createDelay(this.maxDelay), this.delayNode.delayTime.value = 0, e.addEventListener("canplay", this.eventHandler.canplay), "safari" === this.browser) { var A = this.mediaEleSources.find(function (t) { return t.audio === e }); if (this.isMediaElSrc = !0, A) this.audioNode = A.node; else try { var r = this.ac.createMediaElementSource(e); r.connect(this.ac.destination), this.audioNode = r, this.audioEl = e, this.mediaEleSources.push({ "audio": e, "node": r }) } catch (e) { t = e } e.addEventListener("volumechange", this.eventHandler.volumechange); var i = this.getBrowserInfo(), o = !1; "10.15.6" === (null == i ? void 0 : i.sysVer) && "13.1.2" === (null == i ? void 0 : i.ver) && (o = !0), o && (this.audioResumedTimer = setInterval(function () { e.currentTime = e.currentTime + .45 }, 6e3)) } else { this.isMediaElSrc = !1; try { this.audioNode = this.ac.createMediaStreamSource(e.captureStream()) } catch (e) { t = e } "firefox" === this.browser && this.audioNode && this.audioNode.connect(this.ac.destination) } return t ? (this.logger.info("amu.sma.1 ".concat(this.id, " create source failed: ") + t), !0) : (this.audioNode.connect(this.gainNode), this.logger.info("amu.sma.1 ".concat(this.id, " mix audio success.")), this.replaceTrack()) }, A.prototype.getBrowserInfo = function () { var e, t = {}, A = navigator.userAgent.toLowerCase(); e = (A.match(/x [\d._]+/gi) + "").replace(/[^0-9|_.]/gi, "").replace(/_/gi, "."), t.sysVer = e; var r = A.match(/(msie|firefox|chrome|opera|version).*?([\d.]+)/); return r && (t.browser = r[1].replace(/version/, "'safari"), t.ver = r[2]), t }, A.prototype.replaceTrack = function () { if (!this.destination) return !1; this.gainNode.connect(this.delayNode), this.delayNode.connect(this.destination); var e = this.destination.stream.getAudioTracks()[0], t = this.localStream.getTracks(); return this.micTrack = this.localStream.getAudioTracks()[0], this.micTrack !== e && (this.micTrack ? t.includes(this.micTrack) && this.localStream.removeTrack(this.micTrack) : this.logger.warn("amu.rt.1 origin track not fonud"), t.includes(e) || (this.localStream.addTrack(e), this.rtcViewer && this.rtcViewer.setAudio(e))), !0 }, A.prototype.stopMixingAudio = function () { return this.isMixAudio ? this.localStream ? (this.audioEl && (this.audioEl.removeEventListener("volumechange", this.eventHandler.volumechange), this.audioEl.removeEventListener("canplay", this.eventHandler.canplay), this.audioEl = null), this.audioNode && (this.audioNode.disconnect(this.gainNode), this.audioNode = null, this.audioCurrentTimer && (clearInterval(this.audioCurrentTimer), this.audioCurrentTimer = null), this.audioResumedTimer && (clearInterval(this.audioResumedTimer), this.audioResumedTimer = null)), this.gainNode.disconnect(), this.delayNode.disconnect(), this.isMixAudio = !1, this.logger.info("amu.sma.1 ".concat(this.id, " stop mix audio success.")), !0) : (this.logger.error("amu.sma.1 localStream can not be found"), !1) : (this.logger.warn("amu.sma.1 no mixing audio found"), !0) }, A.prototype.setMixingAudioVolume = function (e) { return this.gainNode ? (this.gainNode.gain.value = e, !0) : (this.logger.error("amu.sma.2 no mixing audio found"), !1) }, A.prototype.setDelay = function (e) { return this.delayNode ? (e /= 1e3, !isNaN(e) && (e > this.maxDelay && (e = this.maxDelay), e < 0 && (e = 0), this.logger.info("amu.sma.1 ".concat(this.id, " set delay: ") + e), this.delayNode.delayTime.value = e, !0)) : (this.logger.warn("amu.sma.1 no mixing audio found"), !1) }, A }(); t.AudioMix = A }, "8856": function _(e, t, r) { "use strict"; var i = this && this.__awaiter || function (e, t, A, r) { return new (A || (A = Promise))(function (i, o) { function n(e) { try { a(r.next(e)) } catch (e) { o(e) } } function s(e) { try { a(r.throw(e)) } catch (e) { o(e) } } function a(e) { var t; e.done ? i(e.value) : (t = e.value, t instanceof A ? t : new A(function (e) { e(t) })).then(n, s) } a((r = r.apply(e, t || [])).next()) }) }, o = this && this.__generator || function (e, t) { var A, r, i, o, n = { "label": 0, "sent": function sent() { if (1 & i[0]) throw i[1]; return i[1] }, "trys": [], "ops": [] }; return o = { "next": s(0), "throw": s(1), "return": s(2) }, "function" == typeof Symbol && (o[Symbol.iterator] = function () { return this }), o; function s(s) { return function (a) { return function (s) { if (A) throw new TypeError("Generator is already executing."); for (; o && (o = 0, s[0] && (n = 0)), n;)try { if (A = 1, r && (i = 2 & s[0] ? r.return : s[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, s[1])).done) return i; switch (r = 0, i && (s = [2 & s[0], i.value]), s[0]) { case 0: case 1: i = s; break; case 4: return n.label++, { "value": s[1], "done": !1 }; case 5: n.label++, r = s[1], s = [0]; continue; case 7: s = n.ops.pop(), n.trys.pop(); continue; default: if (!((i = (i = n.trys).length > 0 && i[i.length - 1]) || 6 !== s[0] && 2 !== s[0])) { n = 0; continue } if (3 === s[0] && (!i || s[1] > i[0] && s[1] < i[3])) { n.label = s[1]; break } if (6 === s[0] && n.label < i[1]) { n.label = i[1], i = s; break } if (i && n.label < i[2]) { n.label = i[2], n.ops.push(s); break } i[2] && n.ops.pop(), n.trys.pop(); continue }s = t.call(e, n) } catch (e) { s = [6, e], r = 0 } finally { A = i = 0 } if (5 & s[0]) throw s[1]; return { "value": s[0] ? s[1] : void 0, "done": !0 } }([s, a]) } } }; Object.defineProperty(t, "__esModule", { "value": !0 }), t.AudioMixModule = void 0; var n = r(9194), s = r(5153), a = function () { function A(e, t, A, r, i, o) { var n = this; this.logger = e, this.dataReport = t, this.stateCenter = A, this.streamCenter = r, this.ac = i, this.rtcModules = o, this.buffer = null, this.blank = null, this.mixingDelay = 0, "safari" == this.stateCenter.browser && null == this.blank && null == this.buffer && (this.buffer = this.ac.createBuffer(1, 1, this.ac.sampleRate), this.blank = this.ac.createBufferSource(), this.blank.buffer = this.buffer, this.blank.connect(this.ac.destination), this.blank.start()), this.rtcModules.bindListener("_engineConfigUpdate", function (e) { var t = e.mixingAudioDelay; isNaN(t) || t === n.mixingDelay || (n.logger.info("zc.am.mdu delay update:" + t + ", origin:" + n.mixingDelay), n.mixingDelay = t, n.streamCenter.previewStreamList.forEach(function (e) { e.audioMixManager && e.audioMixManager.setMixingDelay(t) })) }) } return A.prototype.preloadEffect = function (e, t, A) { if (this.checkPreviewer(n.ZEGO_WEBRTC_ACTION.PRELOAD_EFFECT, { "effectID": e }, { "effectID": !0 })) if (t && "string" == typeof t) { if (this.stateCenter.audioEffectBuffer[e]) return this.logger.warn(n.ZEGO_WEBRTC_ACTION.PRELOAD_EFFECT + " audio buffer already exists"), void (A && A()); this.logger.info(n.ZEGO_WEBRTC_ACTION.PRELOAD_EFFECT + " start preload effect"), this._preloadEffect(this.ac, e, t, A) } else this.logger.error(n.ZEGO_WEBRTC_ACTION.PRELOAD_EFFECT + " params error") }, A.prototype.checkPreviewer = function (e, t, A) { void 0 === t && (t = {}); var r = !!(null == A ? void 0 : A.effectID), i = !!(null == A ? void 0 : A.previewer), o = t.effectID, n = t.streamID; return !((null == A ? void 0 : A.streamID) || n) || "string" == typeof n || n instanceof MediaStream ? r && !o ? (this.logger.error(e + " effectID required"), !1) : o && "string" != typeof o ? (this.logger.error(e + " effectID type error"), !1) : !i || (this.streamCenter.getPreviewer(n) || (this.logger.error("string" == typeof n ? e + " " + n + " stream is not publishing" : e + " stream doesn't exist"), !1)) : (this.logger.error(e + " stream type error"), !1) }, A.prototype.getEffectDuration = function (e) { if (!this.checkPreviewer(n.ZEGO_WEBRTC_ACTION.AUDIO_EFFECT_PROCESS, { "effectID": e }, { "effectID": !0 })) return 0; var t = this.stateCenter.audioEffectBuffer[e]; return t ? t.duration ? Math.floor(1e3 * t.duration) : 0 : (this.logger.error(n.ZEGO_WEBRTC_ACTION.AUDIO_EFFECT_PROCESS + " effect not found"), 0) }, A.prototype.getEffectProgress = function (e, t) { var A = this.checkPreviewer(n.ZEGO_WEBRTC_ACTION.AUDIO_EFFECT_PROCESS, { "streamID": e, "effectID": t }, { "effectID": !0, "streamID": !0, "previewer": !0 }); return "boolean" == typeof A ? 0 : this.getAudioManager(A).getEffectProgress(t) }, A.prototype.seekAudioEffect = function (e, t, A) { if (A < 0) return this.logger.error(n.ZEGO_WEBRTC_ACTION.AUDIO_EFFECT_PROCESS + " param time error "), !1; var r = this.checkPreviewer(n.ZEGO_WEBRTC_ACTION.AUDIO_EFFECT_PROCESS, { "streamID": e, "effectID": t }, { "effectID": !0, "streamID": !0, "previewer": !0 }); return "boolean" != typeof r && this.getAudioManager(r).seekAudioEffect(t, A) }, A.prototype.playEffect = function (e, t, A) { return i(this, void 0, void 0, function () { var r, i, s, a = this; return o(this, function (o) { switch (o.label) { case 0: return r = e.path, this.checkPreviewer(n.ZEGO_WEBRTC_ACTION.PLAY_EFFECT, { "streamID": e.stream || e.streamID, "effectID": i = e.effectID }, { "streamID": !0, "effectID": !0 }) ? (s = this.stateCenter.audioEffectBuffer[i], r ? s ? (this.logger.warn(n.ZEGO_WEBRTC_ACTION.PLAY_EFFECT + " audio effect already exists"), [3, 3]) : [3, 1] : [3, 4]) : [2]; case 1: return [4, new Promise(function (e, t) { a.preloadEffect(i, r, function (A) { A ? (a.logger.error(n.ZEGO_WEBRTC_ACTION.PLAY_EFFECT + " preload audio effect failed"), t(A)) : e(void 0) }) })]; case 2: o.sent(), o.label = 3; case 3: return [3, 5]; case 4: if (!s) return this.logger.error(n.ZEGO_WEBRTC_ACTION.PLAY_EFFECT + " audio effect doesn't exists"), [2]; o.label = 5; case 5: return this._playEffect(e, t, A), [2] } }) }) }, A.prototype.pauseEffect = function (e, t) { return this._pauseEffect(e, t) }, A.prototype.resumeEffect = function (e, t) { return this._resumeEffect(e, t) }, A.prototype.stopEffect = function (e, t) { return this._stopEffect(e, t) }, A.prototype.unloadEffect = function (e) { return !!this.checkPreviewer(n.ZEGO_WEBRTC_ACTION.UNLOAD_EFFECT, { "effectID": e }, { "effectID": !0 }) && (delete this.stateCenter.audioEffectBuffer[e], !0) }, A.prototype.setEffectVolume = function (e, t, A, r) { if ("number" != typeof t || t < 0 || t > 200) return this.logger.error(n.ZEGO_WEBRTC_ACTION.SET_EFFECT_VOLUME + " volume must be a number between 0 and 200"), !1; var i = this.checkPreviewer(n.ZEGO_WEBRTC_ACTION.SET_EFFECT_VOLUME, { "streamID": e, "effectID": A }, { "streamID": !0, "previewer": !0 }); return "boolean" != typeof i && this.getAudioManager(i).setEffectVolume(t / 100, A, r) }, A.prototype.startMixingAudio = function (e, t) { return this.logger.info(n.ZEGO_WEBRTC_ACTION.START_MIXING_AUDIO + " call " + e), e ? t ? (this.logger.info(n.ZEGO_WEBRTC_ACTION.START_MIXING_AUDIO + " end " + e), Array.isArray(t) && 0 !== t.length && t.every(function (e) { return e instanceof HTMLMediaElement }) ? this._startMixingAudio(e, t) : (this.logger.error(n.ZEGO_WEBRTC_ACTION.START_MIXING_AUDIO + " audio list param type error"), !1)) : (this.logger.error(n.ZEGO_WEBRTC_ACTION.START_MIXING_AUDIO + " no audio"), !1) : (this.logger.error(n.ZEGO_WEBRTC_ACTION.START_MIXING_AUDIO + " stream not found"), !1) }, A.prototype.stopMixingAudio = function (e, t) { return e ? Array.isArray(t) && 0 !== t.length || void 0 === t ? this._stopMixingAudio(e, t) : (this.logger.error(n.ZEGO_WEBRTC_ACTION.STOP_MIXING_AUDIO + " audio param type error"), !1) : (this.logger.error(n.ZEGO_WEBRTC_ACTION.STOP_MIXING_AUDIO + " stream not found"), !1) }, A.prototype.mixingBuffer = function (e, t, A, r) { this.logger.info(n.ZEGO_WEBRTC_ACTION.MIXING_BUFFER + " call streamID: " + JSON.stringify(e) + " sourceID:" + t), e ? t && "string" == typeof t ? (this._mixingBuffer(e, t, A, r), this.logger.info(n.ZEGO_WEBRTC_ACTION.MIXING_BUFFER + " end")) : this.logger.error(n.ZEGO_WEBRTC_ACTION.MIXING_BUFFER + " param source id format error") : this.logger.error(n.ZEGO_WEBRTC_ACTION.MIXING_BUFFER + " param streamid format error") }, A.prototype.stopMixingBuffer = function (e, t) { return this._stopMixingBuffer(e, t) }, A.prototype.setMixingAudioVolume = function (e, t, A) { return this.logger.info(n.ZEGO_WEBRTC_ACTION.SET_MIXING_AUDIO_VOLUME + " call"), e ? "number" != typeof t || t < 0 || t > 200 ? (this.logger.error(n.ZEGO_WEBRTC_ACTION.SET_MIXING_AUDIO_VOLUME + " volume must be a number between 0 and 200"), !1) : A && A instanceof HTMLMediaElement ? this._setMixingAudioVolume(e, t, A) : (this.logger.error(n.ZEGO_WEBRTC_ACTION.SET_MIXING_AUDIO_VOLUME + " no audio"), !1) : (this.logger.error(n.ZEGO_WEBRTC_ACTION.SET_MIXING_AUDIO_VOLUME + " stream not found"), !1) }, A.prototype.getSoundLevel = function (e, t, A) { this.logger.info("zc.gsl call"); try { var r = this.streamCenter.createSoundLevel(this.ac, e, this.streamCenter.soundLevelInterval, function (e) { t(e) }); this.stateCenter.audioStreamList[e.id] = { "mic": r.mic, "script": r.soundMeter } } catch (e) { A(e) } this.logger.info("zc.gsl call success") }, A.prototype.stopSoundLevel = function (e) { this.logger.info("zc.ssl call"); var t = this.stateCenter.audioStreamList[e.id]; t.mic.disconnect(), t.script.destroy(), delete this.stateCenter.audioStreamList[e.id] }, A.prototype._preloadEffect = function (e, t, A, r) { var i = this, o = new XMLHttpRequest; o.open("GET", A, !0), o.setRequestHeader("Range", "none"), o.responseType = "arraybuffer", o.onload = function () { if (200 == o.status || 304 == o.status) e.decodeAudioData(o.response, function (e) { i.logger.info("zc.pe.0 effect '".concat(t, "' preload success")), i.stateCenter.audioEffectBuffer[t] = e, r && r() }, function (e) { i.logger.error("zc.pe.0 effect '".concat(t, "' preload fail. ") + e), r && r(e) }); else { var A = o.statusText; i.logger.error("zc.pe.0 effect '".concat(t, "' preload fail.") + A), r && r(A) } }, o.send() }, A.prototype._playEffect = function (e, t, A) { var r = this.stateCenter.audioEffectBuffer[e.effectID]; if (r) { var i = this.checkPreviewer(n.ZEGO_WEBRTC_ACTION.PLAY_EFFECT, { "streamID": e.stream || e.streamID, "effectID": e.effectID }, { "streamID": !0, "effectID": !0, "previewer": !0 }); "boolean" != typeof i && this.getAudioManager(i).playEffect(e, r, t, A) } else this.logger.error(n.ZEGO_WEBRTC_ACTION.PLAY_EFFECT + " no audio buffer found") }, A.prototype._pauseEffect = function (e, t) { var A = this.checkPreviewer(n.ZEGO_WEBRTC_ACTION.PAUSE_EFFECT, { "streamID": e, "effectID": t }, { "streamID": !0, "previewer": !0 }); return "boolean" != typeof A && this.getAudioManager(A).pauseEffect(t) }, A.prototype._resumeEffect = function (e, t) { var A = this.checkPreviewer(n.ZEGO_WEBRTC_ACTION.RESUME_EFFECT, { "streamID": e, "effectID": t }, { "streamID": !0, "previewer": !0 }); return "boolean" != typeof A && this.getAudioManager(A).resumeEffect(t) }, A.prototype._stopEffect = function (e, t) { var A = this.checkPreviewer(n.ZEGO_WEBRTC_ACTION.STOP_EFFECT, { "streamID": e, "effectID": t }, { "streamID": !0, "previewer": !0 }); return "boolean" != typeof A && this.getAudioManager(A).stopEffect(t) }, A.prototype._setMixingAudioVolume = function (e, t, A) { var r = this.streamCenter.getPreviewer(e); return r ? this.getAudioManager(r).setMixingAudioVolume(t / 100, A) : (this.logger.error("zc.sma.2 publisher doesn't exist"), !1) }, A.prototype._startMixingAudio = function (e, t) { var A = this.streamCenter.getPreviewer(e); return A ? this.getAudioManager(A).startMixingAudio(t) : (this.logger.error("string" == typeof e ? "zc.sma.0 " + e + " stream is not publishing" : "zc.sma.0 stream doesn't exist"), !1) }, A.prototype._stopMixingAudio = function (e, t) { var A = this.streamCenter.getPreviewer(e); return A ? this.getAudioManager(A).stopMixingAudio(t) : (this.logger.error("zc.sma.0 stream doesn't exist"), !1) }, A.prototype._mixingBuffer = function (e, t, A, r) { var i = this.checkPreviewer(n.ZEGO_WEBRTC_ACTION.STOP_MIXING_BUFFER, { "streamID": e, "effectID": t }, { "effectID": !0, "streamID": !0, "previewer": !0 }); "boolean" != typeof i && (A instanceof ArrayBuffer ? this.getAudioManager(i).mixingBuffer(t, A, r) : this.logger.error("zc.mb.0 array buffer not found")) }, A.prototype._stopMixingBuffer = function (e, t) { var A = this.checkPreviewer(n.ZEGO_WEBRTC_ACTION.STOP_MIXING_BUFFER, { "streamID": e, "effectID": t }, { "effectID": !0, "streamID": !0, "previewer": !0 }); return "boolean" != typeof A && this.getAudioManager(A).stopMixingBuffer(t) }, A.prototype.getAudioManager = function (e) { var t = e.audioMixManager; return t || (t = new s.PreviewAudioManager(e), e.audioMixManager = t), t }, A }(); t.AudioMixModule = a }, "7546": function _(e, t) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.errorCodeList = void 0, t.errorCodeList = { "GET_SOUND_LEVEL_FAIL": { "code": 1000019, "message": "get sound level error" }, "PUBLISHER_DECODE_AUDIO_FAIL": { "code": 1103057, "message": "decode audio data fail" } } }, "2083": function _(e, t, A) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }); var r = A(8856); t.default = { "type": "AudioMix", "install": function install(e) { Object.defineProperty(e.prototype, "initAudioMix", { "value": function value() { this.audioMixModule = new r.AudioMixModule(this.logger, this.dataReport, this.stateCenter, this.streamCenter, this.ac, this) } }) } } }, "5153": function _(e, t, r) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.PreviewAudioManager = void 0; var i = r(9194), o = r(8687), n = r(9592), s = function () { function A(e) { this.previewer = e, this.audioDestNode = void 0, this.audioMixList = [], this.arrayBufferMap = {}, this.effectList = [], this.mediaEleSources = e.streamCenter.mediaEleSources } return Object.defineProperty(A.prototype, "delay", { "get": function get() { var e; return (null === (e = this.previewer.stateCenter.engineConfig) || void 0 === e ? void 0 : e.mixingAudioDelay) || 0 }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "logger", { "get": function get() { return this.previewer.logger }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "localStream", { "get": function get() { return this.previewer.localStream }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "streamCenter", { "get": function get() { return this.previewer.streamCenter }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "ac", { "get": function get() { return this.previewer.ac }, "enumerable": !1, "configurable": !0 }), A.prototype.startMixingAudio = function (e) { var t = this; return this.logger.info(i.ZEGO_WEBRTC_ACTION.PUBLISHER_START_MIXING_AUDIO + " call"), this.localStream ? (e.forEach(function (e) { if (t.audioMixList.find(function (t) { return t.media == e })) t.logger.warn(i.ZEGO_WEBRTC_ACTION.PUBLISHER_START_MIXING_AUDIO + " mix audio already exist"); else if (t.localStream) { t.streamCenter.soundLevelDelegate && t.previewer.stopSoundLevel(); var A = t.createDestNode(), r = new n.AudioMix(t.logger, t.ac, t.localStream, t.mediaEleSources, t.previewer.stateCenter.browser, A, t.previewer.rtcViewer); t.audioMixList.push({ "audioMix": r, "media": e }), r.startMixingAudio(e), r.setDelay(t.delay), t.streamCenter.soundLevelDelegate && t.previewer.startSoundLevel() } }), !0) : (this.logger.error(i.ZEGO_WEBRTC_ACTION.PUBLISHER_START_MIXING_AUDIO + " localStream not found"), !1) }, A.prototype.stopMixingAudio = function (e) { var t = this; return this.logger.info(i.ZEGO_WEBRTC_ACTION.PUBLISHER_STOP_MIXING_AUDIO + " call"), e ? e.forEach(function (e) { for (var A = 0; A < t.audioMixList.length; A++)if (t.audioMixList[A].media == e) { t.audioMixList[A].audioMix.stopMixingAudio() && t.audioMixList.splice(A--, 1); break } }) : (this.audioMixList.forEach(function (e) { return e.audioMix.stopMixingAudio() }), this.audioMixList = []), !0 }, A.prototype.setMixingAudioVolume = function (e, t) { this.logger.info(i.ZEGO_WEBRTC_ACTION.PUBLISHER_SET_MIXING_AUDIO_VOLUME + " call"); var A = this.audioMixList.find(function (e) { return e.media === t }); return A ? (A.audioMix.setMixingAudioVolume(e), this.logger.info(i.ZEGO_WEBRTC_ACTION.PUBLISHER_SET_MIXING_AUDIO_VOLUME + " call success"), !0) : (this.logger.error(i.ZEGO_WEBRTC_ACTION.PUBLISHER_SET_MIXING_AUDIO_VOLUME + " audio is not mixing"), !1) }, A.prototype.playEffect = function (e, t, A, r) { var n = this; if (this.logger.info(i.ZEGO_WEBRTC_ACTION.PUBLISHER_PLAY_EFFECT + " call"), this.localStream) if (this.effectList.find(function (A) { return A.effectID == e.effectID && A.audioBuffer == t })) this.logger.warn(i.ZEGO_WEBRTC_ACTION.PUBLISHER_PLAY_EFFECT + " effect already exist "); else { this.streamCenter.soundLevelDelegate && this.previewer.stopSoundLevel(); var s = this.createDestNode(), a = new o.AudioBufferProcessor(this.logger, this.ac, this.localStream, s, this.previewer.rtcViewer); a.audioBuffer = t; var c = { "processor": a, "effectID": e.effectID, "audioBuffer": t }; this.effectList.push(c), a.playEffect(e.playTime, e.loop, !1, function () { A && A() }, function () { for (var e = [], t = 0; t < arguments.length; t++)e[t] = arguments[t]; n.effectList = n.effectList.filter(function (e) { return e !== c }), r && r.apply(void 0, e) }), this.streamCenter.soundLevelDelegate && this.previewer.startSoundLevel(), this.logger.info(i.ZEGO_WEBRTC_ACTION.PUBLISHER_PLAY_EFFECT + " play effect " + e.effectID + " success") } else this.logger.warn(i.ZEGO_WEBRTC_ACTION.PUBLISHER_PLAY_EFFECT + " stream not found") }, A.prototype.pauseEffect = function (e) { var t = this.effectList.find(function (t) { return t.effectID == e }); if (t) this.streamCenter.soundLevelDelegate && this.previewer.stopSoundLevel(), t.processor.pauseEffect(), this.streamCenter.soundLevelDelegate && this.previewer.startSoundLevel(), this.logger.info(i.ZEGO_WEBRTC_ACTION.PUBLISHER_PAUSE_EFFECT + " pause " + e + " success"); else { if (void 0 !== e) return this.logger.error(i.ZEGO_WEBRTC_ACTION.PUBLISHER_PAUSE_EFFECT + " effect not found"), !1; this.streamCenter.soundLevelDelegate && this.previewer.stopSoundLevel(), this.effectList.forEach(function (e) { return e.processor.pauseEffect() }), this.streamCenter.soundLevelDelegate && this.previewer.startSoundLevel() } return !0 }, A.prototype.resumeEffect = function (e) { var t = this.effectList.find(function (t) { return t.effectID == e }); if (t) { this.streamCenter.soundLevelDelegate && this.previewer.stopSoundLevel(); var A = t.processor.resumeEffect(); return this.streamCenter.soundLevelDelegate && this.previewer.startSoundLevel(), this.logger.info(i.ZEGO_WEBRTC_ACTION.PUBLISHER_RESUME_EFFECT + " resume " + e + " success"), A } return void 0 === e ? (this.streamCenter.soundLevelDelegate && this.previewer.stopSoundLevel(), this.effectList.forEach(function (e) { return e.processor.resumeEffect() }), this.streamCenter.soundLevelDelegate && this.previewer.startSoundLevel(), !0) : (this.logger.error(i.ZEGO_WEBRTC_ACTION.PUBLISHER_RESUME_EFFECT + " no effect found"), !1) }, A.prototype.stopEffect = function (e) { var t = this.effectList.find(function (t) { return t.effectID == e }); if (t) this.streamCenter.soundLevelDelegate && this.previewer.stopSoundLevel(), t.processor.stopMixingAudio(), this.effectList = this.effectList.filter(function (e) { return e !== t }), this.streamCenter.soundLevelDelegate && this.previewer.startSoundLevel(), this.logger.info(i.ZEGO_WEBRTC_ACTION.PUBLISHER_STOP_EFFECT + " pause " + e + " success"); else { if (void 0 !== e) return this.logger.error(i.ZEGO_WEBRTC_ACTION.PUBLISHER_STOP_EFFECT + " effect not found"), !1; this.streamCenter.soundLevelDelegate && this.previewer.stopSoundLevel(), this.effectList.forEach(function (e) { return e.processor.stopMixingAudio() }), this.effectList = [], this.streamCenter.soundLevelDelegate && this.previewer.startSoundLevel() } return !0 }, A.prototype.setEffectVolume = function (e, t, A) { var r = this.effectList.find(function (e) { return e.effectID == t }); if (r) r.processor.setMixingAudioVolume(e), r.processor.setDelay(A || 1e-7), this.logger.info("zp.sev.0 set volume " + t + " success"); else { if (void 0 !== t) return this.logger.error("zp.sev.0 effect not found"), !1; this.effectList.forEach(function (t) { return t.processor.setMixingAudioVolume(e) }) } return !0 }, A.prototype.mixingBuffer = function (e, t, A) { var r = this; if (this.logger.info(i.ZEGO_WEBRTC_ACTION.PUBLISHER_MIXING_BUFFER + " call"), this.localStream) if (this.arrayBufferMap[e]) this.streamCenter.soundLevelDelegate && this.previewer.stopSoundLevel(), this.arrayBufferMap[e].mixingBuffer(t, function () { r.streamCenter.soundLevelDelegate && r.previewer.startSoundLevel(), A && A() }); else { this.streamCenter.soundLevelDelegate && this.previewer.stopSoundLevel(); var n = this.createDestNode(), s = new o.AudioBufferProcessor(this.logger, this.ac, this.localStream, n, this.previewer.rtcViewer); this.arrayBufferMap[e] = s, s.mixingBuffer(t, function () { r.streamCenter.soundLevelDelegate && r.previewer.startSoundLevel(), A && A() }) } }, A.prototype.stopMixingBuffer = function (e) { if (e && this.arrayBufferMap[e]) return this.streamCenter.soundLevelDelegate && this.previewer.stopSoundLevel(), this.arrayBufferMap[e].stopMixingBuffer(), delete this.arrayBufferMap[e], this.streamCenter.soundLevelDelegate && this.previewer.startSoundLevel(), !0; if (void 0 === e) { for (var t in this.streamCenter.soundLevelDelegate && this.previewer.stopSoundLevel(), this.arrayBufferMap) this.arrayBufferMap[t].stopMixingBuffer(); return this.streamCenter.soundLevelDelegate && this.previewer.startSoundLevel(), !0 } return this.logger.warn(i.ZEGO_WEBRTC_ACTION.PUBLISHER_MIXING_BUFFER + " arrayBuffer no found"), !1 }, A.prototype.getEffectProgress = function (e) { var t = this.effectList.find(function (t) { return t.effectID == e }); return t ? t.processor.getProcess() : (this.logger.error(i.ZEGO_WEBRTC_ACTION.AUDIO_EFFECT_PROCESS + "  effect not found"), 0) }, A.prototype.seekAudioEffect = function (e, t) { var A = this.effectList.find(function (t) { return t.effectID == e }); return A ? (this.streamCenter.soundLevelDelegate && this.previewer.stopSoundLevel(), A.processor.seekTo(t), this.streamCenter.soundLevelDelegate && this.previewer.startSoundLevel(), !0) : (this.logger.error(i.ZEGO_WEBRTC_ACTION.AUDIO_EFFECT_PROCESS + " effect not found"), !1) }, A.prototype.stopAudioManager = function () { this.stopMixingAudio(), this.stopMixingBuffer(), this.stopEffect() }, A.prototype.createDestNode = function () { var e = null, t = this.previewer.createDestNode(this.localStream); return this.previewer.audioNodeQueue || ((e = this.previewer.createSrcNode()).disconnect(), e.connect(t)), t }, A.prototype.setMixingDelay = function (e) { this.audioMixList.forEach(function (t) { t.audioMix.setDelay(e) }) }, A }(); t.PreviewAudioManager = s }, "1123": function _(e, t, A) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.DataChannel = void 0; var r = A(7896); t.DataChannel = { "type": "DataChannel", "install": function install(e) { Object.defineProperty(e.prototype, "createRealTimeSequentialDataManager", { "value": function value(e) { this.enableDataChannel(!0); var t = this.stateCenter.getRoomByRoomID(e); return t ? t.dataChannelManager ? null : (t.dataChannelManager = new r.ZegoRealTimeSequentialDataManager(this, e), t.dataChannelManager) : (this.logger.error("zc.crsdm room no exist"), null) }, "writable": !1 }), Object.defineProperty(e.prototype, "destroyRealTimeSequentialDataManager", { "value": function value(e) { var t = this.stateCenter.roomList.find(function (t) { return t.dataChannelManager == e }); t && (e.dataChannelManager.reset(), t.dataChannelManager = null) }, "writable": !1 }) } } }, "4475": function _(e, t) { "use strict"; var r = this && this.__awaiter || function (e, t, A, r) { return new (A || (A = Promise))(function (i, o) { function n(e) { try { a(r.next(e)) } catch (e) { o(e) } } function s(e) { try { a(r.throw(e)) } catch (e) { o(e) } } function a(e) { var t; e.done ? i(e.value) : (t = e.value, t instanceof A ? t : new A(function (e) { e(t) })).then(n, s) } a((r = r.apply(e, t || [])).next()) }) }, i = this && this.__generator || function (e, t) { var A, r, i, o, n = { "label": 0, "sent": function sent() { if (1 & i[0]) throw i[1]; return i[1] }, "trys": [], "ops": [] }; return o = { "next": s(0), "throw": s(1), "return": s(2) }, "function" == typeof Symbol && (o[Symbol.iterator] = function () { return this }), o; function s(s) { return function (a) { return function (s) { if (A) throw new TypeError("Generator is already executing."); for (; o && (o = 0, s[0] && (n = 0)), n;)try { if (A = 1, r && (i = 2 & s[0] ? r.return : s[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, s[1])).done) return i; switch (r = 0, i && (s = [2 & s[0], i.value]), s[0]) { case 0: case 1: i = s; break; case 4: return n.label++, { "value": s[1], "done": !1 }; case 5: n.label++, r = s[1], s = [0]; continue; case 7: s = n.ops.pop(), n.trys.pop(); continue; default: if (!((i = (i = n.trys).length > 0 && i[i.length - 1]) || 6 !== s[0] && 2 !== s[0])) { n = 0; continue } if (3 === s[0] && (!i || s[1] > i[0] && s[1] < i[3])) { n.label = s[1]; break } if (6 === s[0] && n.label < i[1]) { n.label = i[1], i = s; break } if (i && n.label < i[2]) { n.label = i[2], n.ops.push(s); break } i[2] && n.ops.pop(), n.trys.pop(); continue }s = t.call(e, n) } catch (e) { s = [6, e], r = 0 } finally { A = i = 0 } if (5 & s[0]) throw s[1]; return { "value": s[0] ? s[1] : void 0, "done": !0 } }([s, a]) } } }; Object.defineProperty(t, "__esModule", { "value": !0 }), t.DataChannelListener = void 0; var o = function () { function A(e, t) { this.zegoWebRTC = e, this.roomID = t, this.pubDataChannelList = [], this.subDataChannelList = [], this.listenerList = { "receiveRealTimeSequentialData": [] }, this.logger = e.logger } return A.prototype.startBroadcasting = function (e, t) { return r(this, void 0, void 0, function () { var t, A, r, o; return i(this, function (i) { switch (i.label) { case 0: return this.logger.info("dc.sb.0 call"), this.pubDataChannelList.includes(e) ? (this.logger.error("dc.sb.0 datachannel already exist"), [2, !1]) : (t = this.zegoWebRTC.streamCenter.publisherList[e]) && t.publisher.dataChannel ? (this.pubDataChannelList.push(e), [2, !0]) : t && !t.publisher.dataChannel ? (this.logger.error("dc.sb.0 publish datachannel no exist, try other stream ID"), [2, !1]) : this.broadcastStream ? [3, 2] : (A = document.createElement("canvas"), r = this, [4, this.zegoWebRTC.createStream({ "custom": { "source": A } })]); case 1: r.broadcastStream = i.sent(), i.label = 2; case 2: return (o = this.zegoWebRTC.startPublishingStream(e, this.broadcastStream, { "roomID": this.roomID }, !0)) && this.pubDataChannelList.push(e), this.logger.info("dc.sb.0 end"), [2, o] } }) }) }, A.prototype.stopBroadcasting = function (e) { this.logger.info("dc.sb.1 call"), this.pubDataChannelList = this.pubDataChannelList.filter(function (t) { return t !== e }); var t = this.zegoWebRTC.streamCenter.publisherList[e]; return t ? (t.room.roomID == this.roomID && t.isDataChannel && this.zegoWebRTC.stopPublishingStream(e), this.logger.info("dc.sb.1 end"), !0) : (this.logger.error("dc.sb.1 datachannel no found"), !1) }, A.prototype.sendRealTimeSequentialData = function (e, t) { if (!t instanceof ArrayBuffer) return this.logger.error("dc.srsd data type wrong"), !1; var A = this.zegoWebRTC.streamCenter.publisherList[e]; return A && this.pubDataChannelList.includes(e) ? this.sendBCMessage(A.publisher, t) : (this.logger.error("dc.srsd datachannel no found"), !1) }, A.prototype.sendBCMessage = function (e, t) { var A; if (!e.dataChannelState) return !1; for (var r = new Uint8Array(t), i = 0, o = t.byteLength, n = e.send_seq, s = 0, a = (new Date).getTime(), c = 0; o > 0;) { o > 1151 ? c = 1141 : (c = o, s = 1); var g = new Uint8Array(c + 10); g[0] = 1, g[1] = s, g[2] = e.send_seq >> 8 & 255, g[3] = 255 & e.send_seq, g[4] = n >> 8 & 255, g[5] = 255 & n, g[6] = a >> 24 & 255, g[7] = a >> 16 & 255, g[8] = a >> 8 & 255, g[9] = 255 & a; for (var u = 0; u < c; u++)g[u + 10] = r[u + i]; o -= c, i += c, e.send_seq++, e.send_seq >= 65536 && (e.send_seq = 0), null === (A = e.dataChannel) || void 0 === A || A.send(g) } return !0 }, A.prototype.startSubscribing = function (e, t) { var A, o; return r(this, void 0, void 0, function () { var t, r; return i(this, function (i) { switch (i.label) { case 0: return this.logger.info("dc.ss.0 call"), this.subDataChannelList.includes(e) ? (this.logger.error("dc.ss.0 datachannel already exist"), [2, !1]) : (t = this.zegoWebRTC.streamCenter.playerList[e]) ? [3, 2] : [4, this.zegoWebRTC.startPlayingStream(e, void 0, !0)]; case 1: i.sent(), t = this.zegoWebRTC.streamCenter.playerList[e], i.label = 2; case 2: return (r = t.player).dataChannel ? (!(null === (A = r.onDataChannelList) || void 0 === A ? void 0 : A.includes(this.onReceivedDataChannel.bind(this))) && (null === (o = r.onDataChannelList) || void 0 === o || o.push(this.onReceivedDataChannel.bind(this))), this.subDataChannelList.push(e), this.logger.info("dc.ss.0 end"), [2, !0]) : (this.logger.error("dc.ss.0 datachannel no exist, try other stream ID"), [2, !1]) } }) }) }, A.prototype.stopSubscribing = function (e) { this.logger.info("dc.ss.1 call"), this.subDataChannelList = this.subDataChannelList.filter(function (t) { return t !== e }); var t = this.zegoWebRTC.streamCenter.playerList[e]; return t ? (t.room.roomID == this.roomID && t.isDataChannel && this.zegoWebRTC.stopPlayingStream(e), this.logger.info("dc.ss.1 end"), !0) : (this.logger.error("dc.ss.1 datachannel no subscribe"), !1) }, A.prototype.on = function (e, t) { this.bindListener(e, t) }, A.prototype.off = function (e, t) { this.deleteListener(e, t) }, A.prototype.bindListener = function (e, t) { return this.listenerList[e] ? "function" != typeof t ? (this.logger.error("zc.o.0 listener callBack must be funciton"), !1) : (-1 == this.listenerList[e].indexOf(t) && this.listenerList[e].push(t), !0) : (this.logger.error("dc.o.0 event " + e + " no found"), !1) }, A.prototype.deleteListener = function (e, t) { if (!this.listenerList[e]) return this.logger.error("dc.o.1 listener no found"), !1; var A = this.listenerList[e]; return t ? A.splice(A.indexOf(t), 1) : this.listenerList[e] = [], !0 }, A.prototype.actionListener = function (e) { for (var t = this, A = [], r = 1; r < arguments.length; r++)A[r - 1] = arguments[r]; this.listenerList[e] && this.listenerList[e].forEach(function (r) { try { setTimeout(function () { r.apply(void 0, A) }, 0) } catch (A) { t.logger.error("dc.al " + e + " " + A) } }) }, A.prototype.onReceivedDataChannel = function (e, t, A) { this.actionListener("receiveRealTimeSequentialData", e, t, A) }, A.prototype.reset = function () { var e = this; for (var t in this.logger.info("dc.rs call"), this.pubDataChannelList.forEach(function (t) { var A = e.zegoWebRTC.streamCenter.publisherList[t]; A && A.room.roomID == e.roomID && A.isDataChannel && e.zegoWebRTC.stopPublishingStream(t) }), this.subDataChannelList.forEach(function (t) { var A = e.zegoWebRTC.streamCenter.playerList[t]; A && A.room.roomID == e.roomID && A.isDataChannel && e.zegoWebRTC.stopPlayingStream(t) }), this.listenerList) this.listenerList[t] = []; this.broadcastStream && this.zegoWebRTC.destroyStream(this.broadcastStream), this.broadcastStream = void 0, this.logger.info("dc.rs end") }, A }(); t.DataChannelListener = o }, "1266": function _(e, t, A) { "use strict"; var r = this && this.__assign || function () { return (r = Object.assign || function (e) { for (var t, A = 1, r = arguments.length; A < r; A++)for (var i in t = arguments[A]) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]); return e }).apply(this, arguments) }; Object.defineProperty(t, "__esModule", { "value": !0 }), t.streamHandler = t.zegoWebRTC = t.TRACER_LEVEL = void 0; var i, o = A(6701), n = A(151), c = "2.25.6", g = 1e4, u = {}; !function (e) { e[e.I = 0] = "I", e[e.H = 10] = "H", e[e.M = 100] = "M", e[e.L = 1e3] = "L" }(i = t.TRACER_LEVEL || (t.TRACER_LEVEL = {})); var l = { "code": 1005027, "message": "mix stream input parameters are wrong" }; function I(e, t) { var A, r, i, n, s = "", a = o.errorCodeList; return t.errorCode < 2e9 && t.errorCode > 1e9 ? (i = { "1": "MIXER_START_REQUEST_ERROR", "2": "MIXER_START_REQUEST_ERROR", "3": "MIXER_AUTHENTICATION_FAILED", "141": "MIXER_INPUT_IMAGE_FORMAT_WRONG", "142": "MIXER_INPUT_IMAGE_GET_FAIL", "150": "MIXER_INPUT_STREAM_NOT_EXISTS", "151": "MIXER_START_REQUEST_ERROR", "152": "MIXER_STOP_REQUEST_ERROR", "153": "MIXER_INPUT_PARAMETERS_ERROR", "154": "MIXER_EXCEED_MAX_OUTPUT_COUNT", "155": "MIXER_INPUT_PARAMETERS_ERROR", "156": "MIXER_VIDEO_CONFIG_INVALID", "157": "MIXER_NO_SERVICES", "158": "MIXER_EXCEED_MAX_INPUT_COUNT", "159": "MIXER_START_REQUEST_ERROR", "160": "MIXER_NOT_OWNER_STOPMIXER", "170": "MIXER_WATERMARK_PARAMETERS_ERROR", "171": "MIXER_WATERMARK_NULL", "175": "MIXER_REPEAT_INPUT", "179": "MIXER_INPUT_LABEL_TOO_LONG", "190": "MIXER_START_REQUEST_ERROR" }, n = "MIXER_INNER_ERROR", (r = t.errorCode - g) > 1e9 && i[r - 1e9] && (n = i[r - 1e9]), A = a[s = n]) : t.errorCode < 1e6 && (A = e.decodeServerError(t.errorCode, t.extendedData), s = e.getLiveRoomError(t.errorCode, this.stateCenter.useNetAgent)), { "reportErr": A, "actualError": a[s] } } t.zegoWebRTC = { "startMixerTask": function startMixerTask(e) { var t = this; return new Promise(function (A, r) { var o = t.stateCenter.reporter.createSpan(i.H, { "key": n.ZegoRTCLogEvent.kZMInitSetting.event }, { "key": n.ZegoRTCLogEvent.kZegoTaskMixStart.event, "par": e.taskID }, n.ZegoRTCLogEvent.kZegoTaskMixStart.event, !0), s = { "errorCode": l.code, "extendedData": l.message }; if (null == e ? void 0 : e.inputList.find(function (e) { return null == e.streamID && (s.extendedData = s.extendedData + ". streamID should be of string type", !0) })) return t.stateCenter.reporter.setError(o, l), void r(s); e.outputConfig && e.outputConfig.outputFps && (e.outputConfig.outputFPS = e.outputConfig.outputFps); var c = function a(A) { var i = I(t.stateCenter, A), s = i.reportErr, a = i.actualError; 1005026 === A.errorCode && o.setAttributes({ "stop_reason": "UnmatchStreamId" }), t.stateCenter.reporter.setError(o, s || A), t.stateCenter.reporter.spanEnd({ "key": n.ZegoRTCLogEvent.kZegoTaskMixStart.event, "par": e.taskID }), a && (A.errorCode = null == a ? void 0 : a.code, A.extendedData = (null == a ? void 0 : a.message) || ""), r(A) }, g = t.stateCenter.roomList[0]; g ? g.streamHandler.updateMixStream(e, function (r) { t.stateCenter.reporter.spanEnd({ "key": n.ZegoRTCLogEvent.kZegoTaskMixStart.event, "par": e.taskID }), A(r) }, c) : c({ "errorCode": n.ZegoRTCLogEvent.kZegoTaskMixStart.error.kNoLoginError.code, "extendedData": n.ZegoRTCLogEvent.kZegoTaskMixStart.error.kNoLoginError.message }) }) }, "setMixerTaskConfig": function setMixerTaskConfig(e) { var t = this; return new Promise(function (A, r) { var o = t.stateCenter.reporter.createSpan(i.H, { "key": n.ZegoRTCLogEvent.kZMInitSetting.event }, { "key": "" }, n.ZegoRTCLogEvent.kZegoTaskMixConfig.event); o.setAttributes({ "mix_params": n.ZegoRTCLogEvent.kZegoTaskMixConfig.mix_params(e) }); var s = t.stateCenter.roomList[0]; s ? s.streamHandler.setMixerTaskConfig(e).then(function (e) { o.end(), A(e) }).catch(function (e) { t.stateCenter.reporter.setError(o, e), r(e) }) : r({ "errorCode": n.ZegoRTCLogEvent.kZegoTaskMixConfig.error.kNoLoginError.code, "extendedData": n.ZegoRTCLogEvent.kZegoTaskMixConfig.error.kNoLoginError.message }) }) }, "stopMixerTask": function stopMixerTask(e) { var t = this; return new Promise(function (A, r) { var o = t.stateCenter.reporter.createSpan(i.H, { "key": n.ZegoRTCLogEvent.kZMInitSetting.event }, { "key": "" }, n.ZegoRTCLogEvent.kZegoTaskMixStop.event); if (!e || "string" != typeof e || e.length > 256 || !t.stateCenter.checkIllegalCharacters(e)) return t.logger.error("zb.rh.lg taskID must be string less 256"), t.stateCenter.reporter.setError(o, n.ZegoRTCLogEvent.kZegoTaskMixStop.error.kParamError, " param taskID error"), void r({ "errorCode": n.ZegoRTCLogEvent.kZegoTaskMixStop.error.kParamError.code, "extendedData": n.ZegoRTCLogEvent.kZegoTaskMixStop.error.kParamError.message + " param taskID error" }); o.setAttributes({ "mix_task_id": e }); var a = function s(e) { var A = I(t.stateCenter, e), i = A.actualError; t.stateCenter.reporter.setError(o, A.reportErr || e), i && (e.errorCode = null == i ? void 0 : i.code, e.extendedData = (null == i ? void 0 : i.message) || ""), r(e) }, c = t.stateCenter.roomList[0]; c ? c.streamHandler.stopMixStream(e, function (e) { o.end(), A(e) }, a) : a({ "errorCode": n.ZegoRTCLogEvent.kZegoTaskMixStop.error.kNoLoginError.code, "extendedData": n.ZegoRTCLogEvent.kZegoTaskMixStop.error.kNoLoginError.message }) }) } }, t.streamHandler = { "setMixerTaskConfig": function setMixerTaskConfig(e) { var t = this; return new Promise(function (A, r) { var i, o = {}, s = {}; if (e && e.videoCodec) { var a = e.videoCodec.toLowerCase(); if (-1 == ["vp8", "h264"].indexOf(a)) return t.logger.error("zb.sh.ums param videoCode error"), r({ "errorCode": n.ZegoRTCLogEvent.kZegoTaskMixConfig.error.kVideoConfigInvalidError.code, "extendedData": n.ZegoRTCLogEvent.kZegoTaskMixConfig.error.kVideoConfigInvalidError.message }), !1; o.videoCodec = a, s.video_codec = a } if (e.backgroundColor) { if (!t.stateCenter.checkInteger(e.backgroundColor)) return t.logger.error("zb.sh.ums param backgroundColor must be integer number"), r({ "errorCode": n.ZegoRTCLogEvent.kZegoTaskMixConfig.error.kParamError.code, "extendedData": n.ZegoRTCLogEvent.kZegoTaskMixConfig.error.kParamError.message }), !1; o.backgroundColor = e.backgroundColor, s.background_color = e.backgroundColor } if (e.backgroundImage) { if ("string" != typeof e.backgroundImage) return t.logger.error("zb.sh.ums param outputBgImage error"), r({ "errorCode": n.ZegoRTCLogEvent.kZegoTaskMixConfig.error.kParamError.code, "extendedData": n.ZegoRTCLogEvent.kZegoTaskMixConfig.error.kParamError.message }), !1; if (!e.backgroundImage.startsWith("preset-id://") || !e.backgroundImage.endsWith(".jpg") && !e.backgroundImage.endsWith(".png")) return t.logger.error("zb.sh.ums illegal input background image URL"), r({ "errorCode": n.ZegoRTCLogEvent.kZegoTaskMixConfig.error.kBackgroundImageUrlInvalidError.code, "extendedData": n.ZegoRTCLogEvent.kZegoTaskMixConfig.error.kBackgroundImageUrlInvalidError.message }), !1; o.backgroundImage = e.backgroundImage, s.background_image = e.backgroundImage } if (e.waterMark && (o.waterMark = e.waterMark, s.water_mark = e.waterMark), e && e.userData) { if (!(e.userData instanceof Uint8Array)) return t.logger.error("zb.sh.ums param userData required Uint8Array"), r({ "errorCode": n.ZegoRTCLogEvent.kZegoTaskMixConfig.error.kParamError.code, "extendedData": n.ZegoRTCLogEvent.kZegoTaskMixConfig.error.kParamError.message }), !1; if (e.userData.byteLength > 1e3) return t.logger.error("zb.sh.ums param userData should shorter than 1000"), r({ "errorCode": n.ZegoRTCLogEvent.kZegoTaskMixConfig.error.kParamError.code, "extendedData": n.ZegoRTCLogEvent.kZegoTaskMixConfig.error.kParamError.message }), !1; o.userData = e.userData } e.extraParams && (o.extraParams || (o.extraParams = []), (i = o.extraParams).push.apply(i, e.extraParams)), u = o, A({ "errorCode": 0, "extendedData": "" }) }) }, "stopMixStream": function stopMixStream(e, t, A, r, i) { var s = this; this.logger.info("zb.sh.sms call"); var a = { "id_name": this.stateCenter.idName, "live_channel": this.roomID, "appid": this.stateCenter.appid, "version": c }; if ("string" == typeof e && (a.task_id = e), null != r ? a.stream_id = this.stateCenter.testEnvironment ? "zegotest-" + this.stateCenter.appid + "-" + r : r : null != i && (a.mixurl = i), this.stateCenter.useNetAgent) this.sendBizChannelRequestV3({ "server": 12, "location": "/mix/stop" }, a, function (e) { t && t({ "errorCode": 0, "extendedData": "" }) }, function (e, t, r, i) { var a = ""; if (i) return i == o.errorCodeList.TIMEOUT && (i = n.ZegoRTCLogEvent.kZegoTaskMixStart.error.kRequestError), i.code && 20010 === i.code && (i = JSON.parse(JSON.stringify(o.errorCodeList.MIXER_NO_SERVICES))), void (A && A(i, a)); if (i = n.ZegoRTCLogEvent.kZegoTaskMixStart.error.kInternalError, 200 === e) { if ("number" == typeof t) return s.logger.debug("zb.sh.sms error: " + t), t += 1e9, void (A && A({ "errorCode": s.stateCenter.getServerError(g + t).code, "extendedData": a })); s.logger.error("zb.sh.sms stop mix fail " + JSON.stringify(error)); var c = n.ZegoRTCLogEvent.kZegoTaskMixStart.error.kInternalError; A && A({ "errorCode": c.code, "extendedData": c.message }) } else s.logger.error("zb.sh.sms " + (a = "request mix server fail, error: " + e)), A && A(i, a) }); else { var u = { "channel": "zeus", "cmd": "stop_mix", "req_body": JSON.stringify(a) }; this.sendBizChannelRequest(u, function () { t && t({ "errorCode": 0, "extendedData": "" }) }, function (e) { if ("number" == typeof e) A && A({ "errorCode": s.stateCenter.getServerError(g + e).code, "extendedData": "" }); else { s.logger.error("zb.sh.sms stop mix fail " + JSON.stringify(e)); var t; t = e == o.errorCodeList.TIMEOUT ? n.ZegoRTCLogEvent.kZegoTaskMixStop.error.kRequestError : n.ZegoRTCLogEvent.kZegoTaskMixStop.error.kInternalError, A && A({ "errorCode": t.code, "extendedData": t.message }) } }) } return !0 }, "updateMixStream": function updateMixStream(e, t, A) { var i, s, a, l, h, d, C, I, E = this; this.logger.info("zb.sh.ums call"); var p, f = []; if (!e.noTaskID && !e.taskID) return this.logger.error("zb.sh.ums no taskId found"), A({ "errorCode": n.ZegoRTCLogEvent.kZegoTaskMixStart.error.kTaskIDNullError.code, "extendedData": n.ZegoRTCLogEvent.kZegoTaskMixStart.error.kTaskIDNullError.message }), !1; if (!e.noTaskID && "string" != typeof e.taskID) return this.logger.error("zb.rh.lg taskId must be string"), A({ "errorCode": n.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.code, "extendedData": n.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.message }), !1; if (!e.noTaskID && e.taskID.length > 256) return this.logger.error("zb.sh.ums taskId is too long"), A({ "errorCode": n.ZegoRTCLogEvent.kZegoTaskMixStart.error.kTaskIDToLongError.code, "extendedData": n.ZegoRTCLogEvent.kZegoTaskMixStart.error.kTaskIDToLongError.message }), !1; if (!e.noTaskID && !this.stateCenter.checkIllegalCharacters(e.taskID)) return this.logger.error("zb.sh.ums task ID contains illegal characters"), A({ "errorCode": n.ZegoRTCLogEvent.kZegoTaskMixStart.error.kTaskIDInvalidCharacterError.code, "extendedData": n.ZegoRTCLogEvent.kZegoTaskMixStart.error.kTaskIDInvalidCharacterError.message }), !1; if (!e.inputList || 0 == e.inputList.length) return this.logger.error("zb.sh.ums input list wrong"), A({ "errorCode": n.ZegoRTCLogEvent.kZegoTaskMixStart.error.kInputListNullError.code, "extendedData": n.ZegoRTCLogEvent.kZegoTaskMixStart.error.kInputListNullError.message }), !1; e.inputList.forEach(function (e) { "AUDIO" === e.contentType && (!e.layout && (e.layout = { "top": 0, "left": 0, "bottom": 0, "right": 0 }), e.layout.top = 0, e.layout.left = 0, e.layout.bottom = 1, e.layout.right = 1) }); for (var B = 0; B < e.inputList.length; B++) { var _ = e.inputList[B], m = { "errorCode": n.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.code, "extendedData": n.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.message }; if ("object" != _typeof(_.layout)) return this.logger.error("zb.sh.ums input layout must be object"), A(m), !1; if (!(this.stateCenter.checkInteger(_.layout.top, !1) && this.stateCenter.checkInteger(_.layout.bottom, !1) && this.stateCenter.checkInteger(_.layout.left, !1) && this.stateCenter.checkInteger(_.layout.right, !1))) return this.logger.error("zb.sh.ums top、left、bottom、right must be integer number"), A(m), !1; if (void 0 !== _.renderMode && ![0, 1].includes(_.renderMode)) return this.logger.error("zb.sh.ums render_mode is wrong"), A(m), !1; if (void 0 !== _.imageInfo) { if ("string" != typeof _.imageInfo.url) return this.logger.error("zb.sh.ums image url is require string"), A(m), !1; if (_.imageInfo.url.length > 1024) return this.logger.error("zb.sh.ums input image url length too long"), A({ "errorCode": n.ZegoRTCLogEvent.kZegoTaskMixStart.error.kInputImageURLTooLong.code, "extendedData": n.ZegoRTCLogEvent.kZegoTaskMixStart.error.kInputImageURLTooLong.message }), !1 } if (void 0 !== _.label) { if ("string" != typeof (null === (s = _.label) || void 0 === s ? void 0 : s.text) || (null === (a = _.label) || void 0 === a ? void 0 : a.text.length) >= 300) return this.logger.error("zb.sh.ums input label text is not string or too long"), A({ "errorCode": n.ZegoRTCLogEvent.kZegoTaskMixStart.error.kInputLabelTextTooLong.code, "extendedData": n.ZegoRTCLogEvent.kZegoTaskMixStart.error.kInputLabelTextTooLong.message }), !1; if (void 0 !== (null === (l = _.label) || void 0 === l ? void 0 : l.left) && !this.stateCenter.checkInteger(null === (h = _.label) || void 0 === h ? void 0 : h.left, !1) || void 0 !== (null === (d = _.label) || void 0 === d ? void 0 : d.top) && !this.stateCenter.checkInteger(null === (C = _.label) || void 0 === C ? void 0 : C.top, !1)) return this.logger.error("zb.sh.ums input label left and top should be integer"), A(m), !1 } if (void 0 !== _.cornerRadius && !this.stateCenter.checkInteger(_.cornerRadius, !1)) return this.logger.error("zb.sh.ums cornerRadius is wrong"), A(m), !1 } if (!e.outputList || 0 == e.outputList.length) return this.logger.error("zb.sh.ums no output list found"), A({ "errorCode": n.ZegoRTCLogEvent.kZegoTaskMixStart.error.kOutputListNullError.code, "extendedData": n.ZegoRTCLogEvent.kZegoTaskMixStart.error.kOutputListNullError.message }), !1; if (e.outputList.some(function (e) { return "string" == typeof e && !E.stateCenter.isUrl(e) && !E.stateCenter.checkIllegalCharacters(e) || "object" == (void 0 === e ? "undefined" : _typeof(e)) && e.target && !E.stateCenter.isUrl(e.target) && !E.stateCenter.checkIllegalCharacters(e.target) })) return this.logger.error("zb.sh.ums stream output target is incorrect"), A({ "errorCode": n.ZegoRTCLogEvent.kZegoTaskMixStart.error.kOutputTargetInvalidError.code, "extendedData": n.ZegoRTCLogEvent.kZegoTaskMixStart.error.kOutputTargetInvalidError.message }), !1; if (!((p = e.inputList.every(function (e) { return "AUDIO" === e.contentType })) || e.outputConfig && "object" == _typeof(e.outputConfig))) return this.logger.error("zb.sh.ums no output config found"), A({ "errorCode": n.ZegoRTCLogEvent.kZegoTaskMixStart.error.kOutputNoTargetError.code, "extendedData": n.ZegoRTCLogEvent.kZegoTaskMixStart.error.kOutputNoTargetError.message }), !1; if (p && (e.outputConfig = r(r({}, e.outputConfig || {}), { "outputBitrate": .001, "outputFPS": 1, "outputWidth": 1, "outputHeight": 1 })), !(p || e.outputConfig.outputBitrate && this.stateCenter.checkInteger(e.outputConfig.outputBitrate))) return this.logger.error("zb.sh.ums bitrate param is required and must be integer number"), A({ "errorCode": n.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.code, "extendedData": n.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.message }), !1; if (!e.outputConfig.outputFPS || !this.stateCenter.checkInteger(e.outputConfig.outputFPS)) return this.logger.error("zb.sh.ums fps param is required and must be integer number"), A({ "errorCode": n.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.code, "extendedData": n.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.message }), !1; if (!e.outputConfig.outputWidth || !this.stateCenter.checkInteger(e.outputConfig.outputWidth)) return this.logger.error("zb.sh.ums width param is required and must be integer number"), A({ "errorCode": n.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.code, "extendedData": n.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.message }), !1; if (!e.outputConfig.outputHeight || !this.stateCenter.checkInteger(e.outputConfig.outputHeight)) return this.logger.error("zb.sh.ums height param is required and must be integer number"), A({ "errorCode": n.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.code, "extendedData": n.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.message }), !1; if (void 0 !== e.outputConfig.outputAudioCodecID && !this.stateCenter.checkInteger(e.outputConfig.outputAudioCodecID, !1)) return this.logger.error("zb.sh.ums AudioCodecID param must be integer number"), A({ "errorCode": n.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.code, "extendedData": n.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.message }), !1; if (void 0 !== e.outputConfig.outputAudioBitrate && !this.stateCenter.checkInteger(e.outputConfig.outputAudioBitrate)) return this.logger.error("zb.sh.ums AudioBitrate param must be integer number"), A({ "errorCode": n.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.code, "extendedData": n.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.message }), !1; if (void 0 !== e.outputConfig.outputAudioChannels && !this.stateCenter.checkInteger(e.outputConfig.outputAudioChannels, !1)) return this.logger.error("zb.sh.ums AudioChannels param must be integer number"), A({ "errorCode": n.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.code, "extendedData": n.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.message }), !1; if (void 0 !== e.watermark && "string" != typeof (null === (I = e.watermark) || void 0 === I ? void 0 : I.imageURL)) return this.logger.error("zb.sh.ums watermark image type error"), A({ "errorCode": n.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.code, "extendedData": n.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.message }), !1; if (void 0 !== e.enableSoundLevel && "boolean" != typeof e.enableSoundLevel) return this.logger.error("zb.sh.ums enableSoundLevel is not bool"), A(m), !1; var Q = []; for (B = 0; B < e.inputList.length; B++) { var y = e.inputList[B], v = y.streamID; this.stateCenter.testEnvironment && (v = "zegotest-" + this.stateCenter.appid + "-" + y.streamID), Q.push({ "stream_id": v, "content_control": "AUDIO" === y.contentType ? 1 : 0, "rect": { "layer": B, "top": y.layout.top, "left": y.layout.left, "bottom": y.layout.bottom, "right": y.layout.right }, "render_mode": y.renderMode, "image": y.imageInfo, "label": y.label }), f.push({ "stream_id": v, "content_control": "AUDIO" === y.contentType ? 1 : 0, "top": y.layout.top, "left": y.layout.left, "bottom": y.layout.bottom, "right": y.layout.right, "render_mode": y.renderMode, "image": y.imageInfo, "label": y.label }) } var S = {}, D = [], R = 0; e.outputConfig.singleStreamPassThrough && "boolean" == typeof e.outputConfig.singleStreamPassThrough && (R = e.outputConfig.singleStreamPassThrough ? 1 : 0), S = { "task_id": e.taskID, "id_name": this.stateCenter.idName, "live_channel": this.roomID, "appid": this.stateCenter.appid, "version": c, "bypass": R, "timestamp": Math.ceil((new Date).getTime() / 1e3), "session_secret": (new Date).getTime() + "", "ver": 0, "seq": this.stateCenter.getSeq() }; var b = u; b && (b.videoCodec && (S.extra_params = [{ "key": "video_encode", "value": b.videoCodec }]), b.backgroundColor && (S.output_bg_color = b.backgroundColor), b.backgroundImage && (S.output_bg_image = b.backgroundImage), b.waterMark && (S.watermark = b.waterMark), b.userData && (S.userdata = this.stateCenter.uint8arrayToBase64(b.userData)), b.extraParams && (!S.extra_params && (S.extra_params = []), (i = S.extra_params).push.apply(i, b.extraParams))), e.watermark && (S.watermark = { "image": e.watermark.imageURL, "rect": e.watermark.layout }), void 0 !== e.enableSoundLevel && (S.with_sound_level = e.enableSoundLevel ? 1 : 0), S.MixInput = e.inputList.map(function (e, t) { var A, r, i, o, n, s, a, c, g, u, l, h, d, C, I, p, f = e.streamID; E.stateCenter.testEnvironment && (f = "zegotest-" + E.stateCenter.appid + "-" + e.streamID); var B = { "font_type": (null === (r = null === (A = e.label) || void 0 === A ? void 0 : A.font) || void 0 === r ? void 0 : r.type) || 0, "font_size": (null === (o = null === (i = e.label) || void 0 === i ? void 0 : i.font) || void 0 === o ? void 0 : o.size) || 24, "font_color": (null === (s = null === (n = e.label) || void 0 === n ? void 0 : n.font) || void 0 === s ? void 0 : s.color) || 16777215, "transparency": (null === (c = null === (a = e.label) || void 0 === a ? void 0 : a.font) || void 0 === c ? void 0 : c.transparency) || 0 }; (null === (u = null === (g = e.label) || void 0 === g ? void 0 : g.font) || void 0 === u ? void 0 : u.border) && (B.border_color = (null === (h = null === (l = e.label) || void 0 === l ? void 0 : l.font) || void 0 === h ? void 0 : h.borderColor) || 0); var _ = { "text": null === (d = e.label) || void 0 === d ? void 0 : d.text, "left": null === (C = e.label) || void 0 === C ? void 0 : C.left, "top": null === (I = e.label) || void 0 === I ? void 0 : I.top, "font": B }, m = { "stream_id": f, "content_control": "AUDIO" === e.contentType ? 1 : 0, "rect": { "layer": t, "top": e.layout.top, "left": e.layout.left, "bottom": e.layout.bottom, "right": e.layout.right, "corner_radius": e.cornerRadius }, "render_mode": e.renderMode }; return (null === (p = e.label) || void 0 === p ? void 0 : p.text) && (m.label = _), e.imageInfo && (m.mix_image = e.imageInfo), m }); var T = []; S.MixOutput = e.outputList.map(function (t) { var r = {}, i = ""; if ("string" == typeof t) i = t; else { if ("object" != (void 0 === t ? "undefined" : _typeof(t)) || !t.target) return E.logger.error("zb.sh.ums output target required"), A({ "errorCode": n.ZegoRTCLogEvent.kZegoTaskMixStart.error.kOutputTargetInvalidError.code, "extendedData": n.ZegoRTCLogEvent.kZegoTaskMixStart.error.kOutputTargetInvalidError.message }), !1; i = t.target } return i.startsWith("rtmp://") || i.startsWith("https://") && i.endsWith(".flv") || i.startsWith("https://") && i.endsWith(".m3u8") ? r.mixurl = i : r.stream_id = E.stateCenter.testEnvironment ? "zegotest-" + E.stateCenter.appid + "-" + i : i, r.bitrate = 1e3 * e.outputConfig.outputBitrate, r.fps = e.outputConfig.outputFPS, r.width = e.outputConfig.outputWidth, r.height = e.outputConfig.outputHeight, e.outputConfig.outputAudioCodecID && (r.audio_enc_id = e.outputConfig.outputAudioCodecID), "vp8" === b.videoCodec ? r.audio_enc_id = 3 : "h264" === b.videoCodec && (r.audio_enc_id = 0), e.outputConfig.outputAudioBitrate && (r.audio_bitrate = 1e3 * e.outputConfig.outputAudioBitrate), e.outputConfig.outputAudioChannels && (r.audio_channel_cnt = e.outputConfig.outputAudioChannels), r.testenv = E.stateCenter.testEnvironment ? 1 : 0, T.push(r), D.push({ "target": r.mixurl || r.stream_id, "is_url": !!r.mixurl + "" }), r }); var k = e.outputConfig; this.stateCenter.reporter.spanSetAttributes({ "key": n.ZegoRTCLogEvent.kZegoTaskMixStart.event, "par": e.taskID }, { "mix_stream_conf": n.ZegoRTCLogEvent.kZegoTaskMixStart.mix_stream_conf({ "fps": k.outputFPS, "bitrate": k.outputBitrate, "w": k.outputWidth, "h": k.outputHeight, "stream_cnt": f.length, "mix_task_id": e.taskID, "input_stream_list": f, "output_target_list": D }) }), this.logger.debug("zb.sh.ums send command"); var w = "zegotest-" + this.stateCenter.appid + "-"; if (this.stateCenter.useNetAgent) this.sendBizChannelRequestV3({ "server": 12, "location": "/mix/start" }, S, function (e) { var A = e.play.map(function (e) { var t = { "rtmpURL": "", "hlsURL": "", "flvURL": "" }, A = e.stream_alias || ""; return E.stateCenter.testEnvironment && A && A.startsWith(w) && (A = A.slice(w.length)), t.streamID = A, e.rtmp_url && e.rtmp_url.length > 0 && (t.rtmpURL = e.rtmp_url), e.hls_url && e.hls_url.length > 0 && (t.hlsURL = e.hls_url), e.hdl_url && e.hdl_url.length > 0 && (t.flvURL = e.hdl_url), t }); t && t({ "errorCode": 0, "extendedData": JSON.stringify({ "mixerOutputList": A }) }) }, function (e, t, r, i) { var s = ""; if (i) return i == o.errorCodeList.TIMEOUT && (i = n.ZegoRTCLogEvent.kZegoTaskMixStart.error.kRequestError), i.code && 20010 === i.code && (i = JSON.parse(JSON.stringify(o.errorCodeList.MIXER_NO_SERVICES))), void (A && A(i, s)); if (i = n.ZegoRTCLogEvent.kZegoTaskMixStart.error.kInternalError, 200 === e) { if ("number" == typeof t) { if (E.logger.debug("zb.sh.ums error: " + t), 1000000150 == (t += 1e9) && r) { var a = (null == r ? void 0 : r.non_exist_streams.map(function (e) { return E.stateCenter.testEnvironment && e.startsWith(w) ? e.slice(w.length) : e })) || []; a.length > 0 && (E.logger.debug("zb.sh.ums not exist streams: " + a), s = a.join(",")) } return void (A && A({ "errorCode": E.stateCenter.getServerError(g + t).code, "extendedData": s })) } E.logger.debug("zb.sh.ums error code " + t); var c = n.ZegoRTCLogEvent.kZegoTaskMixStart.error.kInternalError; A && A({ "errorCode": c.code, "extendedData": c.message }) } else E.logger.error("zb.sh.ums " + (s = "request mix server fail, error: " + e)), A && A(i, s) }); else { var N = { "channel": "zeus", "cmd": "start_mix", "req_body": JSON.stringify(S) }; this.sendBizChannelRequest(N, function (e, r, i) { if (E.logger.debug("zb.sh.ums receive message"), 0 != i.length) { for (var o = JSON.parse(i), n = [], s = 0; s < o.play.length; s++) { var a = { "rtmpURL": "", "hlsURL": "", "flvURL": "" }, c = o.play[s].stream_alias || ""; E.stateCenter.testEnvironment && c && c.startsWith(w) && (c = c.slice(w.length)), a.streamID = c, o.play[s].rtmp_url && o.play[s].rtmp_url.length > 0 && (a.rtmpURL = o.play[s].rtmp_url), o.play[s].hls_url && o.play[s].hls_url.length > 0 && (a.hlsURL = o.play[s].hls_url), o.play[s].hdl_url && o.play[s].hdl_url.length > 0 && (a.flvURL = o.play[s].hdl_url), n.push(a) } t && t({ "errorCode": 0, "extendedData": JSON.stringify({ "mixerOutputList": n }) }) } else A && A({ "errorCode": E.stateCenter.getServerError(g + 1).code, "extendedData": "" }) }, function (e, t, r) { if ("number" == typeof e) { E.logger.debug("zb.sh.ums error: " + e); var i = []; if (1000000150 == e && 0 != r.length) for (var s = JSON.parse(r), a = 0; a < s.non_exist_streams.length; a++) { var c = s.non_exist_streams[a]; E.stateCenter.testEnvironment && c.startsWith(w) ? i.push(c.slice(w.length)) : i.push(c) } A && A({ "errorCode": E.stateCenter.getServerError(g + e).code, "extendedData": "" }) } else { E.logger.debug("zb.sh.ums error code " + e.code); var u; u = e == o.errorCodeList.TIMEOUT ? n.ZegoRTCLogEvent.kZegoTaskMixStart.error.kRequestError : n.ZegoRTCLogEvent.kZegoTaskMixStart.error.kInternalError, A && A({ "errorCode": u.code, "extendedData": u.message }) } }) } return !0 } } }, "6701": function _(e, t) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.errorCodeList = void 0, t.errorCodeList = { "NOT_LOGIN": { "code": 1000002, "message": "not login room" }, "INPUT_PARAM": { "code": 1100001, "message": "input param error." }, "TIMEOUT": { "code": 1100002, "message": "network timeout." }, "MIXER_NO_SERVICES": { "code": 1005e3, "message": "no mix stream service" }, "MIXER_TASK_ID_NULL": { "code": 1005001, "message": "mixer task is null" }, "MIXER_TASK_ID_TOO_LONG": { "code": 1005002, "message": "task ID is too long" }, "MIXER_TASK_ID_INVALID_CHARACTER": { "code": 1005003, "message": "task ID contains illegal characters" }, "MIXER_NO_OUTPUT_TARGET": { "code": 1005005, "message": "task configuration does not specify output" }, "MIXER_OUTPUT_TARGET_INVALID": { "code": 1005006, "message": "stream output target is incorrect" }, "MIXER_START_REQUEST_ERROR": { "code": 1005010, "message": "start mixer task fail, possibly due to network reasons" }, "MIXER_STOP_REQUEST_ERROR": { "code": 1005011, "message": "stop mixer task fail, possibly due to network reasons" }, "MIXER_NOT_OWNER_STOP_MIXER": { "code": 1005012, "message": " maxed task must be stopped by the start user of the task" }, "MIXER_INPUTLIST_NULL": { "code": 1005020, "message": "Mixed stream task input list is null" }, "MIXER_OUTPUTLIST_NULL": { "code": 1005021, "message": "Mixed stream task output list is null" }, "MIXER_VIDEO_CONFIG_INVALID": { "code": 1005023, "message": "invalid mixed stream task video configuration" }, "MIXER_EXCEED_MAX_INPUT_COUNT": { "code": 1005025, "message": "more than the maximum number of input streams" }, "MIXER_INPUT_STREAM_NOT_EXISTS": { "code": 1005026, "message": "Input stream does not exist" }, "MIXER_INPUT_LABEL_TOO_LONG": { "code": 1005028, "message": "Input stream label text is too long" }, "MIXER_EXCEED_MAX_OUTPUT_COUNT": { "code": 1005030, "message": "more than the maximum number of output streams" }, "MIXER_INPUT_IMAGE_URL_TOO_LONG": { "code": 1005034, "message": "Input stream image url too long" }, "MIXER_INPUT_IMAGE_FORMAT_WRONG": { "code": 1005035, "message": "Input stream image format wrong" }, "MIXER_INPUT_IMAGE_GET_FAIL": { "code": 1005036, "message": "Input stream image get fail" }, "MIXER_AUTHENTICATION_FAILED": { "code": 1005050, "message": "mixed stream authentication failed" }, "MIXER_WATERMARK_NULL": { "code": 1005061, "mag": "input watermark is null" }, "MIXER_WATERMARK_PARAMETERS_ERROR": { "code": 1005062, "message": "input watermark parameter is wrong" }, "MIXER_WATERMARK_URL_INVALID": { "code": 1005063, "message": "illegal input watermark URL" }, "MIXER_BACKGROUND_IMAGE_URL_INVALID": { "code": 1005067, "message": "illegal input background image URL" }, "MIXER_REPEAT_INPUT": { "code": 1005099, "message": "mix stream input repeat" }, "MIXER_INNER_ERROR": { "code": 1005099, "message": "mixer internal error" } } }, "375": function _(e, t, A) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }); var r = A(1266); t.default = { "type": "MixStream", "install": function install(e, t) { for (var A in r.zegoWebRTC) Object.defineProperty(e.prototype, A, { "value": r.zegoWebRTC[A], "writable": !1 }); for (var A in r.streamHandler) Object.defineProperty(t.prototype, A, { "value": r.streamHandler[A], "writable": !1 }) } } }, "151": function _(e, t, A) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.ZegoRTCLogEvent = void 0; var r = A(6701), i = A(9268); t.ZegoRTCLogEvent = { "kZMInitSetting": { "event": "/sdk/init" }, "kZegoTaskMixStart": { "event": "/mix/start_mix", "error": { "kParamError": r.errorCodeList.INPUT_PARAM, "kTaskIDNullError": r.errorCodeList.MIXER_TASK_ID_NULL, "kTaskIDToLongError": r.errorCodeList.MIXER_TASK_ID_TOO_LONG, "kTaskIDInvalidCharacterError": r.errorCodeList.MIXER_TASK_ID_INVALID_CHARACTER, "kInputListNullError": r.errorCodeList.MIXER_INPUTLIST_NULL, "kOutputListNullError": r.errorCodeList.MIXER_OUTPUTLIST_NULL, "kOutputTargetInvalidError": r.errorCodeList.MIXER_OUTPUT_TARGET_INVALID, "kOutputNoTargetError": r.errorCodeList.MIXER_NO_OUTPUT_TARGET, "kRequestError": r.errorCodeList.MIXER_START_REQUEST_ERROR, "kInternalError": r.errorCodeList.MIXER_INNER_ERROR, "kInputLabelTextTooLong": r.errorCodeList.MIXER_INPUT_LABEL_TOO_LONG, "kInputImageURLTooLong": r.errorCodeList.MIXER_INPUT_IMAGE_URL_TOO_LONG, "kInputImageFormatWrong": r.errorCodeList.MIXER_INPUT_IMAGE_FORMAT_WRONG, "kMixerWatermarkURLInvalid": r.errorCodeList.MIXER_WATERMARK_URL_INVALID, "kNoLoginError": r.errorCodeList.NOT_LOGIN }, "mix_stream_conf": i.getItem, "stop_reason": i.getItemString }, "kZegoTaskMixStop": { "event": "/mix/stop_mix", "error": { "kParamError": r.errorCodeList.INPUT_PARAM, "kTaskIDNullError": r.errorCodeList.MIXER_TASK_ID_NULL, "kRequestError": r.errorCodeList.MIXER_STOP_REQUEST_ERROR, "kInternalError": r.errorCodeList.MIXER_INNER_ERROR, "kNoLoginError": r.errorCodeList.NOT_LOGIN } }, "kZegoTaskMixConfig": { "event": "/mix/config_mix", "error": { "kParamError": r.errorCodeList.INPUT_PARAM, "kVideoConfigInvalidError": r.errorCodeList.MIXER_VIDEO_CONFIG_INVALID, "kBackgroundImageUrlInvalidError": r.errorCodeList.MIXER_BACKGROUND_IMAGE_URL_INVALID, "kNoLoginError": r.errorCodeList.NOT_LOGIN }, "mix_params": i.getItem } } }, "1301": function _(e, t, r) { "use strict"; var i = this && this.__assign || function () { return (i = Object.assign || function (e) { for (var t, A = 1, r = arguments.length; A < r; A++)for (var i in t = arguments[A]) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]); return e }).apply(this, arguments) }, o = this && this.__awaiter || function (e, t, A, r) { return new (A || (A = Promise))(function (i, o) { function n(e) { try { a(r.next(e)) } catch (e) { o(e) } } function s(e) { try { a(r.throw(e)) } catch (e) { o(e) } } function a(e) { var t; e.done ? i(e.value) : (t = e.value, t instanceof A ? t : new A(function (e) { e(t) })).then(n, s) } a((r = r.apply(e, t || [])).next()) }) }, n = this && this.__generator || function (e, t) { var A, r, i, o, n = { "label": 0, "sent": function sent() { if (1 & i[0]) throw i[1]; return i[1] }, "trys": [], "ops": [] }; return o = { "next": s(0), "throw": s(1), "return": s(2) }, "function" == typeof Symbol && (o[Symbol.iterator] = function () { return this }), o; function s(s) { return function (a) { return function (s) { if (A) throw new TypeError("Generator is already executing."); for (; o && (o = 0, s[0] && (n = 0)), n;)try { if (A = 1, r && (i = 2 & s[0] ? r.return : s[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, s[1])).done) return i; switch (r = 0, i && (s = [2 & s[0], i.value]), s[0]) { case 0: case 1: i = s; break; case 4: return n.label++, { "value": s[1], "done": !1 }; case 5: n.label++, r = s[1], s = [0]; continue; case 7: s = n.ops.pop(), n.trys.pop(); continue; default: if (!((i = (i = n.trys).length > 0 && i[i.length - 1]) || 6 !== s[0] && 2 !== s[0])) { n = 0; continue } if (3 === s[0] && (!i || s[1] > i[0] && s[1] < i[3])) { n.label = s[1]; break } if (6 === s[0] && n.label < i[1]) { n.label = i[1], i = s; break } if (i && n.label < i[2]) { n.label = i[2], n.ops.push(s); break } i[2] && n.ops.pop(), n.trys.pop(); continue }s = t.call(e, n) } catch (e) { s = [6, e], r = 0 } finally { A = i = 0 } if (5 & s[0]) throw s[1]; return { "value": s[0] ? s[1] : void 0, "done": !0 } }([s, a]) } } }, s = this && this.__spreadArray || function (e, t, A) { if (A || 2 === arguments.length) for (var r, i = 0, o = t.length; i < o; i++)!r && i in t || (r || (r = Array.prototype.slice.call(t, 0, i)), r[i] = t[i]); return e.concat(r || Array.prototype.slice.call(t)) }, a = this && this.__importDefault || function (e) { return e && e.__esModule ? e : { "default": e } }; Object.defineProperty(t, "__esModule", { "value": !0 }), t.getSystemInfo = void 0; var c = a(r(6889)), g = a(r(3976)), u = a(r(2747)), l = a(r(6219)), h = a(r(9123)), d = a(r(9585)), C = r(6664), I = r(694), E = r(6218), p = r(4028), f = r(9304); function Q() { var e; return o(this, void 0, void 0, function () { var t, A, r; return n(this, function (i) { switch (i.label) { case 0: return (t = null === navigator || void 0 === navigator ? void 0 : navigator.userAgentData) ? [4, t.getHighEntropyValues(["platformVersion"]).catch(function () { })] : [2, { "platform": "", "majorPlatformVersion": 0 }]; case 1: return A = i.sent() || {}, r = parseInt(null === (e = A.platformVersion) || void 0 === e ? void 0 : e.split(".")[0]), [2, { "platform": A.platform, "majorPlatformVersion": r }] } }) }) } t.getSystemInfo = Q; var B = "zc.ra.0", m = function () { function A(e, t) { var A = this; this.logger = t, this.isSpatial = !1, this.audioSourceList = [], this.audioSourceUpdate = !1, this.localUserList = [], this.speakingUserIdList = [], this.vocalSourceMap = new Map, this.volume = 1, this.speaker = "", this._audioCtx = null, this.supportSpeakerSet = !1, this.isHide = !1, this.eventHandler = { "visibilitychange": function visibilitychange() { return o(A, void 0, void 0, function () { var e, t, r, i, o, a, c, g = this; return n(this, function (A) { switch (A.label) { case 0: return s(s([], this.vocalSourceList, !0), this.audioSourceList, !0).forEach(function (e) { e.inBackground(document.hidden), g.isHide = document.hidden }), e = function A() { s(s([], g.vocalSourceList, !0), g.audioSourceList, !0).forEach(function (e) { e.changeRenderConfig(g.isOpen3D(e), !0, !1, !1) }) }, document.hidden ? (t = navigator.userAgent.toLowerCase(), r = t.match(/chrome\/(\d*)/), i = r && t.includes("mobile"), [4, Q()]) : [3, 2]; case 1: return o = A.sent(), a = "Windows" === o.platform && o.majorPlatformVersion >= 13, i || a ? (this.logger.warn("".concat(B, " mobile chrome hide page and stop web audio.")), e(), [2]) : ("running" !== (c = this.audioCtx.state) ? (this.logger.info("".concat(B, " hidden ctx: ").concat(c, ", resume ctx")), this.audioCtx.resume(), setTimeout(function () { var t = g.audioCtx.state; g.isHide && ("running" === t ? g.logger.info("".concat(B, " hidden ctx: ").concat(t, ".")) : (g.logger.warn("".concat(B, " hidden ctx: ").concat(t, ", ctx resume failed. stop web audio.")), e())) }, 2e3)) : this.logger.info("".concat(B, " hidden ctx: ").concat(c, ".")), [3, 3]); case 2: this.audioCtx.resume(), this.audioSourceList.forEach(function (e) { var t, A; e.isPlaying && (null === (t = e.audioEl) || void 0 === t || t.dom.pause(), null === (A = e.audioEl) || void 0 === A || A.dom.play().catch(function () { g.logger.warn("".concat(B, " show page and  ").concat(e.userID, " replay failed.")) })) }), A.label = 3; case 3: return [2] } }) }) } }, this.zegoRTC = e, document.addEventListener("visibilitychange", this.eventHandler.visibilitychange, !1), this.zegoRTC.on("roomStreamUpdate", function (e, t, r) { var o = r.map(function (e) { var t = A.getStreamInfo(e.extraInfo, e.streamID), r = t.isRangeAudioStream, o = t.teamID, n = t.raMode, s = t.sendMode; return i(i({}, e), { "isRangeAudioStream": r, "teamID": o, "raMode": n, "sendMode": s }) }).filter(function (e) { return e.isRangeAudioStream }), n = o.map(function (e) { return e.user.userID }); "DELETE" === t ? A.speakingUserIdList = A.speakingUserIdList.filter(function (e) { var t = !n.includes(e); if (!t) { var r = A.audioSourceMap[e]; r && r.stopPlayingAudio("stop for stream delete") } return t }) : "ADD" === t && (A.speakingUserIdList = A.speakingUserIdList.concat(n), o.forEach(function (e) { var t = e.user.userID, r = A.audioSourceMap[t], i = e.teamID, o = e.raMode, n = e.sendMode; if (r) r.streamID !== e.streamID && (r.stopPlayingAudio("stop for old stream"), r.streamID = e.streamID), void 0 !== o && (r.raMode = o), i !== r.teamID && (r.teamID = i), r.changeRenderConfig(A.isOpen3D(r)); else { var s = new c.default(A.logger, { "userID": t, "teamID": i, "raMode": o, "sendMode": n }, { "audioCtx": A.audioCtx, "zegoRTC": A.zegoRTC, "isSpatial": A.isSpatial, "maxDistance": A.rangeListener.recvRange, "volume": A.volume, "speaker": A.speaker, "isHide": A.isHide }); s.streamID = e.streamID, A.audioSourceList.push(s), A.playStreamHandler.hasChanged = !0 } })), A.playStreamHandler.setAudioSourceList(A.speakingAudioSourceList) }), this.zegoRTC.on("playerStateUpdate", function (e) { var t = A.audioSourceList.find(function (t) { return t.streamID === e.streamID }); t && ("NO_PLAY" === e.state ? t.isPlaying = !1 : ("PLAYING" === e.state && t.checkTrackChanged(), t.isPlaying = !0)) }), this.zegoRTC.on("streamExtraInfoUpdate", function (e, t) { A.logger.info(B + " recv extra info: " + JSON.stringify(t)); var r = !1; t.forEach(function (e) { var t = A.audioSourceMap[e.user.userID]; if (t && t.streamID) { var i = A.getStreamInfo(e.extraInfo, e.streamID), o = i.teamID, n = i.raMode, s = i.sendMode; o !== t.teamID && (t.teamID = o, r = !0), void 0 !== n && (t.raMode = n, r = !0), t.sendMode !== s && (t.sendMode = s, r = !0), A.playStreamHandler.hasChanged = !0 } }), r && A.enableSpatializer(A.isSpatial) }), this.zegoRTC.RTM._on("_roomStateUpdate", function (e, t) { "CONNECTED" === t ? (A.roomID = e, A.rangeListener.userID = A.zegoRTC.RTM.getUserID(), A.playStreamHandler.hasChanged = !0, A.playStreamHandler.userChanged = !0) : "DISCONNECTED" === t && (A.roomID = void 0, A.rangeListener.reset(), A.enableSpeaker(!1), A.audioSourceList = [], A.playStreamHandler.setAudioSourceList([]), A.localUserList = [], A.playStreamHandler.setLocalUserList([])) }), this.zegoRTC.RTM.on("roomUserUpdate", function (e, t, r) { var i; A.logger.info(B + " roomUserUpdate: ", e, t, JSON.stringify(r)), "ADD" === t ? (i = A.localUserList).push.apply(i, r) : "DELETE" === t && r.forEach(function (e) { A.localUserList = A.localUserList.filter(function (t) { return t.userID !== e.userID }) }), A.playStreamHandler.setLocalUserList(A.localUserList) }), this.zegoRTC.on("publishQualityUpdate", function (e, t) { var r = e.match(/(.*)_(.*)/); if (3 === (null == r ? void 0 : r.length)) { var o = r[1]; if (A.rangeListener.userID !== o) return; var n = i({}, t.audio); A.eventManager.emit("publishQualityUpdate", o, n) } }), this.zegoRTC.on("playQualityUpdate", function (e, t) { var r, o = e.match(/(.*)_(.*)/); if (3 === (null == o ? void 0 : o.length)) { var n = o[1], s = t.audio, a = t.peerToPeerDelay, c = t.peerToPeerPacketLostRate; if (!(null === (r = A.audioSourceList) || void 0 === r ? void 0 : r.some(function (e) { return e.userID === n }))) return; var g = i(i({}, s), { "peerToPeerDelay": a, "peerToPeerPacketLostRate": c }); A.eventManager.emit("playQualityUpdate", n, g) } }); var r = window.AudioContext || window.webkitAudioContext; this._audioCtx = this.zegoRTC && this.zegoRTC.ac || new r, this.rangeListener = l.default.getInstance(this.audioCtx, this.zegoRTC), this.playStreamHandler = h.default.getInstance(this.logger, this.rangeListener), this.eventManager = d.default.getInstance() } return Object.defineProperty(A.prototype, "audioSourceMap", { "get": function get() { return this.audioSourceList.reduce(function (e, t) { return t.userID && (e[t.userID] = t), e }, {}) }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "speakingAudioSourceList", { "get": function get() { var e = this; return this.audioSourceList.filter(function (t) { return e.speakingUserIdList.includes(t.userID) }) }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "vocalSourceList", { "get": function get() { for (var e = [], t = this.vocalSourceMap.values(), A = 0; A < this.vocalSourceMap.size; A++)e.push(t.next().value); return e }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "playingAudioSourceList", { "get": function get() { return this.audioSourceList.filter(function (e) { return e.isPlaying }) }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "audioCtx", { "get": function get() { if (!this._audioCtx) { var e = window.AudioContext || window.webkitAudioContext; this._audioCtx = new e } return this._audioCtx }, "enumerable": !1, "configurable": !0 }), A.getInstance = function (e, t) { return A.instance || (A.instance = new A(e, t)), A.instance }, A.prototype.resumeAudioContext = function () { return o(this, void 0, void 0, function () { var e = this; return n(this, function (t) { return [2, new Promise(function (t) { E.AudioElPool.generateEls(), "running" === e.audioCtx.state && t(!0), e.audioCtx.onstatechange = function () { "running" === e.audioCtx.state && t(!0) }, e.audioCtx.resume(), e.logger.info(B + " resume audio ctx"), setTimeout(function () { t(!1) }, 3e3) })] }) }) }, A.prototype.getAudioContextState = function () { return this.audioCtx.state }, A.prototype.getStreamInfo = function (e, t) { var A, r = null; try { r = JSON.parse(e) } catch (e) { return this.logger.warn(B + " parse room extra info failed. ".concat(t, " is not ra stream.")), { "isRangeAudioStream": !1 } } if (!r.hasOwnProperty("range_audio_team_id") || !r.hasOwnProperty("range_audio_mode")) return this.logger.warn(B + " extra info has no mode. ".concat(t, " is not ra stream.")), { "isRangeAudioStream": !1 }; A = { "1": 0, "2": 1, "3": 2 }[r.range_audio_mode]; var i = r.r_a_s_flag, o = { "teamID": r.range_audio_team_id || void 0, "raMode": A, "isRangeAudioStream": void 0 === i || 1 === i }; return r.hasOwnProperty("r_a_speak") && (o.sendMode = r.r_a_speak), this.logger.info("".concat(B, " ").concat(t, " parse extra info: ").concat(JSON.stringify(o), ".")), o }, A.prototype.setAudioReceiveRange = function (e) { if (!(0, C.checkNumber)(e)) throw Error("Failed to execute 'setAudioReceiveRange': Argument 'range' requires to be type number."); if (e = Number(e), (e = Number(e)) < 0) throw Error("Failed to execute 'setAudioReceiveRange': Argument 'range' can not be less than 0."); this.logger.info(B + " set receive range: " + e), this.rangeListener.recvRange = e, this.audioSourceList.forEach(function (t) { t.setMaxDistance(e) }), this.playStreamHandler.hasChanged = !0, this.playStreamHandler.userChanged = !0 }, A.prototype.updateSelfPosition = function (e, t, A, r) { var i = this, o = function o(e) { return "Failed to execute 'updateSelfPosition': Argument '".concat(e, "' requires an array of type number.\"") }; if (!(0, C.checkCoordinate)(e)) throw new Error(o("position")); if (!(0, C.checkCoordinate)(t)) throw new Error(o("axisForward")); if (!(0, C.checkCoordinate)(A)) throw new Error(o("axisRight")); if (!(0, C.checkCoordinate)(r)) throw new Error(o("axisUp")); this.logger.info(B + " set self position [".concat(e, "]")), this.rangeListener && (this.rangeListener.updateSelfPosition(e, t, r), this.vocalSourceMap.forEach(function (e) { e.checkIfCanPlay(i.rangeListener) })), this.playStreamHandler.setListener(this.rangeListener) }, A.prototype.updateAudioSource = function (e, t) { if (e = String(e), !(0, C.checkCoordinate)(t)) throw new Error("Failed to execute 'updateAudioSource': parameter 'position' must be an array of type number."); var A = this.audioSourceMap[e]; A ? A.setPosition(t) : (A = new c.default(this.logger, { "userID": e, "position": t }, { "audioCtx": this.audioCtx, "zegoRTC": this.zegoRTC, "isSpatial": this.isSpatial, "maxDistance": this.rangeListener.recvRange, "volume": this.volume, "speaker": this.speaker, "isHide": this.isHide }), this.enableSpatializer(this.isSpatial), this.audioSourceList.push(A)), this.playStreamHandler.setAudioSourceList(this.speakingAudioSourceList), this.playStreamHandler.setAllAudioSourceList(this.audioSourceList) }, A.prototype.enableMicrophone = function (e) { if (void 0 === e && (e = !0), !this.rangeListener.userID) throw new Error("Enable mic failed. Please log in room first."); return e ? this.rangeListener.startPublishingStream() : this.rangeListener.stopPublishingStream() }, A.prototype.selectMic = function (e) { return o(this, void 0, void 0, function () { var t, A, r, i; return n(this, function (o) { switch (o.label) { case 0: if ("string" != typeof e && void 0 !== e) throw new Error("Select mic failed. DeviceID error."); if (A = (t = this.rangeListener).audioStream, r = t.isPublishing, this.logger.info(B + " select mic: " + e), !A || !r) return [3, 5]; i = { "errorCode": 0 }, o.label = 1; case 1: return o.trys.push([1, 3, , 4]), [4, this.zegoRTC.useAudioDevice(A, e || "")]; case 2: return i = o.sent(), [3, 4]; case 3: return o.sent(), [2, !1]; case 4: return 0 === i.errorCode ? (this.rangeListener.micID = e, [2, !0]) : [2, !1]; case 5: return this.rangeListener.micID = e, [2, !0]; case 6: return [2] } }) }) }, A.prototype.enableSpeaker = function (e) { if (void 0 === e && (e = !0), e && !this.roomID) throw new Error("Enable speaker failed. Please log in room first."); this.playStreamHandler.isEnable = e, this.logger.info(B + " enable speaker: " + e), e ? (E.AudioElPool.generateEls(), this.playStreamHandler.startPlayingAudioStream()) : this.playStreamHandler.stopPlayingAudioStream() }, A.prototype.enableSpatializer = function (e) { var t = this; void 0 === e && (e = !0), this.logger.info(B + " set spatializer: " + e), this.isSpatial = !!e, this.audioSourceList.forEach(function (e) { e.changeRenderConfig(t.isOpen3D(e)) }), this.vocalSourceList.forEach(function (t) { t.changeRenderConfig(e) }), e && this.rangeListener.updateListenerEffect() }, A.prototype.enableAiDenoise = function (e) { if (this.logger.info(B + " set ai denoise: " + e), "boolean" != typeof e) return !1; var t = p.ClientUtil.isMobile(); return (t || window.AudioWorklet) && window.WebAssembly && (window.AudioContext || (null === window || void 0 === window ? void 0 : window.webkitAudioContext)).prototype.createScriptProcessor ? this.rangeListener.enableDenoise(!!e) : (this.logger.error(B + "".concat(t && " mobile", " browser dose not support ai denoise.")), !1) }, A.prototype.setVoiceChangerPreset = function (e) { if (this.logger.info(B + " set voice changer preset: " + e), "number" != typeof e) return !1; var t = p.ClientUtil.isMobile(); return (t || window.AudioWorklet) && window.WebAssembly && (window.AudioContext || (null === window || void 0 === window ? void 0 : window.webkitAudioContext)).prototype.createScriptProcessor ? this.rangeListener.setVoiceChangerPreset(e) : (this.logger.error(B + "".concat(t && " mobile", " browser dose not support voice changer.")), !1) }, A.prototype.setRangeAudioTeamID = function (e) { this.logger.info(B + " set team id: " + e), this.rangeListener.setTeamID(e), this.enableSpatializer(this.isSpatial), this.playStreamHandler.hasChanged = !0 }, A.prototype.setRangeAudioMode = function (e) { if (this.modeType === f.RAModeType.Custom) throw new Error("Failed to execute 'setRangeAudioMode': already use 'setRangeAudioCustomMode'."); this.modeType = f.RAModeType.Normal, this.logger.info(B + " set mode " + e), this.rangeListener.setNormalMode(e), this.playStreamHandler.hasChanged = !0 }, A.prototype.setCustomMode = function (e, t) { if (this.modeType === f.RAModeType.Normal) throw new Error("Failed to execute 'setRangeAudioCustomMode': already use 'setRangeAudioMode'."); this.modeType = f.RAModeType.Custom, this.logger.info(B + " set custom mode: ".concat(e, ", ").concat(t)); var A = this.rangeListener.setCustomMode(e, t).recvChange; this.playStreamHandler.hasChanged = !0, A && this.enableSpatializer(this.isSpatial) }, A.prototype.setAudioVolume = function (e) { var t = this; if (this.logger.info(B + " set volume ".concat(e)), e < 0) throw new Error("Failed to execute 'setVolume': The volume provided is outside the range [0, 200]."); this.volume = e / 100, this.audioSourceList.forEach(function (e) { e.setVolume(t.volume) }) }, A.prototype.selectSpeaker = function (e) { var t = this; if (void 0 === e && (e = ""), "string" != typeof e) throw new Error("Select speaker failed. Device ID error."); if (!this.supportSpeakerSet) { if (!document.createElement("audio").setSinkId) throw new Error("Failed to execute 'selectSpeaker': browser not support."); this.supportSpeakerSet = !0 } this.speaker = e, this.logger.info(B + " set speaker: " + e), "" === e && this.logger.warn(B + " set speaker to be default. "), this.audioSourceList.find(function (A) { return o(t, void 0, void 0, function () { var t; return n(this, function (r) { switch (r.label) { case 0: return r.trys.push([0, 2, , 3]), [4, A.setSpeaker(e)]; case 1: return r.sent(), [3, 3]; case 2: return t = r.sent(), this.logger.warn(B + " set speaker failed. id: ".concat(e, ", error: ").concat(t)), [2, !0]; case 3: return [2, !1] } }) }) }) }, A.prototype.setPositionUpdateFrequency = function (e) { if (!(e >= 15)) throw new Error("Failed to execute 'setPositionUpdateFrequency': The frequency provided is outside the range [15, +]."); this.playStreamHandler.interval = Number(e) || 100, this.logger.info(B + " set interval: " + e) }, A.prototype.on = function (e, t) { return this.eventManager.addEventHandler(e, t) }, A.prototype.off = function (e, t) { return this.eventManager.removeEventHandler(e, t) }, A.prototype.enableAudioSourceUpdateChecker = function (e, t) { if (this.logger.info(B + " set source update: " + e), this.audioSourceUpdate = e, this.playStreamHandler.setAudioSourceUpdate(e), t && "number" == typeof t.frequency) { if ((null == t ? void 0 : t.frequency) < 50) throw new Error("Failed to execute 'enableAudioSourceUpdateChecker': The frequency provided is outside the range [50, +]."); this.playStreamHandler.updateUserInterval = Number(t.frequency) || 1e3, this.logger.info(B + " set interval: " + t.frequency) } e ? this.playStreamHandler.startCheckUserInRange() : this.playStreamHandler.stopCheckUserInRange() }, A.prototype.getVocalSource = function (e, t) { var A = this.vocalSourceMap.get(e); if (!A) { var r = { "audioCtx": this.audioCtx, "isSpatial": this.isSpatial, "maxDistance": t || 0, "volume": this.volume, "speaker": this.speaker, "isHide": this.isHide }; A = e instanceof HTMLMediaElement ? new g.default(this.logger, { "media": e }, r) : new u.default(this.logger, { "streamView": e }, r) } return this.vocalSourceMap.set(e, A), A }, A.prototype.setStreamVocalRange = function (e, t) { var A = e instanceof HTMLMediaElement; if (!A && !(null == e ? void 0 : e.v)) throw new Error("Failed to execute 'setVocalRange': type of parameter 1 error."); if (!(0, C.checkNumber)(t)) throw Error("Failed to execute 'setVocalRange': parameter 2 requires to be type number."); t = Number(t), this.logger.info(B + " ".concat(A ? "custom" : "stream", " set range: ") + t); var r = this.getVocalSource(e, t); r.setMaxDistance(t), r.checkIfCanPlay(this.rangeListener) }, A.prototype.updateStreamPosition = function (e, t) { if (!(e instanceof HTMLMediaElement || (null == e ? void 0 : e.v))) throw new Error("Failed to execute 'updatePosition': type of parameter 1 error."); if (!(0, C.checkCoordinate)(t)) throw new Error("Failed to execute 'updatePosition': parameter 'position' must be an array of type number."); var A = this.getVocalSource(e); A.setPosition(t), A.checkIfCanPlay(this.rangeListener) }, A.prototype.isOpen3D = function (e) { return e instanceof c.default ? (!(this.rangeListener.recvMode !== I.ZegoRangeAudioListenMode.World) || !e.isSpeakInTeam(this.rangeListener.teamID)) && this.isSpatial : this.isSpatial }, A }(); t.default = m }, "9317": function _(e, t, A) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.RangeAudio = void 0; var r = A(7300); t.RangeAudio = { "type": "RangeAudio", "install": function install(e) { Object.defineProperty(e.prototype, "createRangeAudioInstance", { "value": function value() { return this.rangeAudio || (this.rangeAudio = r.ZegoExpressRangeAudio.getInstance(this, this.logger)), this.rangeAudio }, "writable": !1 }) } } }, "6218": function _(e, t) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.AudioElPool = void 0; var A = function () { function A() { } return A.generateEls = function (e) { if (void 0 === e && (e = 30), this.elements.length >= e) this.elements.forEach(function (e) { e.dom.play().catch(function (e) { }) }); else { var t = Array(e - this.elements.length).fill(0).map(function (e, t) { var A = document.createElement("audio"); return A.muted = !0, A.setAttribute("autoplay", "autoplay"), A.setAttribute("playsInline", "playsInline"), A.id = "audio" + t, { "dom": A, "id": t, "used": !1 } }); this.elements = this.elements.concat(t) } }, A.useAudioEl = function () { 0 === this.elements.length && this.generateEls(); var e = this.elements.find(function (e) { return !e.used }); return e && (e.used = !0), e }, A.stopUsingAudioEl = function (e) { var t = this.elements[e]; t && (t.dom.onpause = null, t.dom.onerror = null, t.dom.muted = !0, t.used = !1) }, A.elements = [], A }(); t.AudioElPool = A }, "6889": function _(e, A, r) { "use strict"; var o, n = this && this.__extends || (o = function i(e, t) { return (o = Object.setPrototypeOf || { "__proto__": [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var A in t) Object.prototype.hasOwnProperty.call(t, A) && (e[A] = t[A]) })(e, t) }, function (e, A) { if ("function" != typeof A && null !== A) throw new TypeError("Class extends value " + String(A) + " is not a constructor or null"); function t() { this.constructor = e } o(e, A), e.prototype = null === A ? Object.create(A) : (t.prototype = A.prototype, new t) }), s = this && this.__awaiter || function (e, t, A, r) { return new (A || (A = Promise))(function (i, o) { function n(e) { try { a(r.next(e)) } catch (e) { o(e) } } function s(e) { try { a(r.throw(e)) } catch (e) { o(e) } } function a(e) { var t; e.done ? i(e.value) : (t = e.value, t instanceof A ? t : new A(function (e) { e(t) })).then(n, s) } a((r = r.apply(e, t || [])).next()) }) }, a = this && this.__generator || function (e, t) { var A, r, i, o, n = { "label": 0, "sent": function sent() { if (1 & i[0]) throw i[1]; return i[1] }, "trys": [], "ops": [] }; return o = { "next": s(0), "throw": s(1), "return": s(2) }, "function" == typeof Symbol && (o[Symbol.iterator] = function () { return this }), o; function s(s) { return function (a) { return function (s) { if (A) throw new TypeError("Generator is already executing."); for (; o && (o = 0, s[0] && (n = 0)), n;)try { if (A = 1, r && (i = 2 & s[0] ? r.return : s[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, s[1])).done) return i; switch (r = 0, i && (s = [2 & s[0], i.value]), s[0]) { case 0: case 1: i = s; break; case 4: return n.label++, { "value": s[1], "done": !1 }; case 5: n.label++, r = s[1], s = [0]; continue; case 7: s = n.ops.pop(), n.trys.pop(); continue; default: if (!((i = (i = n.trys).length > 0 && i[i.length - 1]) || 6 !== s[0] && 2 !== s[0])) { n = 0; continue } if (3 === s[0] && (!i || s[1] > i[0] && s[1] < i[3])) { n.label = s[1]; break } if (6 === s[0] && n.label < i[1]) { n.label = i[1], i = s; break } if (i && n.label < i[2]) { n.label = i[2], n.ops.push(s); break } i[2] && n.ops.pop(), n.trys.pop(); continue }s = t.call(e, n) } catch (e) { s = [6, e], r = 0 } finally { A = i = 0 } if (5 & s[0]) throw s[1]; return { "value": s[0] ? s[1] : void 0, "done": !0 } }([s, a]) } } }; Object.defineProperty(A, "__esModule", { "value": !0 }), A.RANGE_AUDIO = void 0; var c = r(694), g = r(6218), u = r(2423); A.RANGE_AUDIO = "zc.ra.1"; var l = function (e) { function t(t, A, r) { var i = e.call(this, t, r) || this; return i.logger = t, i.audioTrack = null, i.zegoRTC = r.zegoRTC, i.userID = A.userID, i.teamID = A.teamID, i.raMode = void 0 !== A.raMode ? A.raMode : c.ZegoRangeAudioMode.World, A.position && (i.position = A.position), i } return n(t, e), Object.defineProperty(t.prototype, "sendMode", { "get": function get() { return void 0 !== this._sendMode ? this._sendMode : this.raMode === c.ZegoRangeAudioMode.World ? c.ZegoRangeAudioSpeakMode.All : c.ZegoRangeAudioSpeakMode.Team }, "set": function set(e) { this._sendMode = e }, "enumerable": !1, "configurable": !0 }), t.prototype.checkTrackChanged = function () { var e; if (this.stream) { var t = this.stream.getAudioTracks()[0]; t && t !== this.audioTrack && (this.logger.info(A.RANGE_AUDIO + " retry play success, render stream."), null === (e = this.sourceNode) || void 0 === e || e.disconnect(), this.sourceNode = this.audioCtx.createMediaStreamSource(this.stream), this.changeRenderConfig(this.isSpatial, !0), this.audioTrack = t) } }, t.prototype.startPlayingAudio = function (e) { var t, r; return s(this, void 0, void 0, function () { var i, o, n; return a(this, function (s) { switch (s.label) { case 0: if (!this.streamID) return [2]; s.label = 1; case 1: return s.trys.push([1, 3, , 4]), e && this.logger.info(A.RANGE_AUDIO + " ".concat(this.streamID, " ") + e), this.isPlaying = !0, i = this, [4, this.zegoRTC.startPlayingStream(this.streamID)]; case 2: return i.stream = s.sent(), this.audioTrack = this.stream.getAudioTracks()[0], [3, 4]; case 3: if (o = s.sent(), this.isPlaying = !1, 1103049 === o.code) return [2]; throw o; case 4: return this.audioEl = this.audioEl || g.AudioElPool.useAudioEl() || null, this.logger.info(A.RANGE_AUDIO + " ".concat(this.streamID, " start using audio el ").concat(null === (t = this.audioEl) || void 0 === t ? void 0 : t.id)), (n = null === (r = this.audioEl) || void 0 === r ? void 0 : r.dom) || (this.logger.error(A.RANGE_AUDIO + " not enough audio elements"), n = document.createElement("audio"), this.audioEl = { "id": -1, "dom": n, "used": !0 }, n.setAttribute("autoplay", "autoplay")), n.muted = !0, this.stream && (this.sourceNode = this.audioCtx.createMediaStreamSource(this.stream)), this.sourceNode ? [4, this.changeRenderConfig(this.isSpatial, !0)] : [3, 6]; case 5: s.sent(), s.label = 6; case 6: return "suspended" === this.audioCtx.state && this.audioCtx.resume(), [2] } }) }) }, t.prototype.stopPlayingAudio = function (e) { this.isPlaying && this.streamID ? (this.logger.info(A.RANGE_AUDIO + " ".concat(this.streamID, " ") + e), this.zegoRTC.stopPlayingStream(this.streamID), this.isPlaying = !1) : this.streamID && this.logger.info(A.RANGE_AUDIO + " ".concat(this.streamID, " not playing, ") + e), this.stream = void 0, this.sourceNode && (this.sourceNode.disconnect(), this.sourceNode = null); var t = this.audioEl, r = null == t ? void 0 : t.dom; r && (r.srcObject = null, r.parentNode && r.parentNode.removeChild(r)); var i = (null == t ? void 0 : t.id) || -1; t && i >= 0 && (g.AudioElPool.stopUsingAudioEl(i), this.logger.info(A.RANGE_AUDIO + " ".concat(this.streamID, " stop using audio el ").concat(i))), this.audioEl = null, this.loopbackConn && (this.loopbackConn.close(), this.loopbackConn.onError = null) }, t.prototype.isSpeakInTeam = function (e) { var t = ![this.teamID, e].includes(void 0) && "" !== this.teamID && this.teamID === e, A = [c.ZegoRangeAudioSpeakMode.Team, c.ZegoRangeAudioSpeakMode.All].includes(this.sendMode); return t && A }, t }(u.BaseAudioSource); A.default = l }, "2423": function _(e, t, r) { "use strict"; var i = this && this.__awaiter || function (e, t, A, r) { return new (A || (A = Promise))(function (i, o) { function n(e) { try { a(r.next(e)) } catch (e) { o(e) } } function s(e) { try { a(r.throw(e)) } catch (e) { o(e) } } function a(e) { var t; e.done ? i(e.value) : (t = e.value, t instanceof A ? t : new A(function (e) { e(t) })).then(n, s) } a((r = r.apply(e, t || [])).next()) }) }, o = this && this.__generator || function (e, t) { var A, r, i, o, n = { "label": 0, "sent": function sent() { if (1 & i[0]) throw i[1]; return i[1] }, "trys": [], "ops": [] }; return o = { "next": s(0), "throw": s(1), "return": s(2) }, "function" == typeof Symbol && (o[Symbol.iterator] = function () { return this }), o; function s(s) { return function (a) { return function (s) { if (A) throw new TypeError("Generator is already executing."); for (; o && (o = 0, s[0] && (n = 0)), n;)try { if (A = 1, r && (i = 2 & s[0] ? r.return : s[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, s[1])).done) return i; switch (r = 0, i && (s = [2 & s[0], i.value]), s[0]) { case 0: case 1: i = s; break; case 4: return n.label++, { "value": s[1], "done": !1 }; case 5: n.label++, r = s[1], s = [0]; continue; case 7: s = n.ops.pop(), n.trys.pop(); continue; default: if (!((i = (i = n.trys).length > 0 && i[i.length - 1]) || 6 !== s[0] && 2 !== s[0])) { n = 0; continue } if (3 === s[0] && (!i || s[1] > i[0] && s[1] < i[3])) { n.label = s[1]; break } if (6 === s[0] && n.label < i[1]) { n.label = i[1], i = s; break } if (i && n.label < i[2]) { n.label = i[2], n.ops.push(s); break } i[2] && n.ops.pop(), n.trys.pop(); continue }s = t.call(e, n) } catch (e) { s = [6, e], r = 0 } finally { A = i = 0 } if (5 & s[0]) throw s[1]; return { "value": s[0] ? s[1] : void 0, "done": !0 } }([s, a]) } } }, n = this && this.__importDefault || function (e) { return e && e.__esModule ? e : { "default": e } }; Object.defineProperty(t, "__esModule", { "value": !0 }), t.BaseAudioSource = t.calculateDistance = t.isMobile = t.RANGE_AUDIO = void 0; var s = n(r(5159)), a = r(1301), c = r(6609); function g(e, t) { if (!t || !e) return null; var A = [e[0] - t[0], e[1] - t[1], e[2] - t[2]]; return Math.sqrt(Math.pow(A[0], 2) + Math.pow(A[1], 2) + Math.pow(A[2], 2)) } t.RANGE_AUDIO = "zc.ra.5", t.isMobile = function () { return !!navigator.userAgent.toLowerCase().includes("mobile") }, t.calculateDistance = g; var u = function () { function A(e, t) { this.logger = e, this.userID = "base" + (new Date).getTime(), this.isHide = !1, this.distance = null, this.maxDistance = 1e3, this.position = null, this.speaker = "", this.audioEl = null, this.sourceNode = null, this.isPlaying = !1, this.config = { "needLoopback": !0, "useGain": !0, "playOnAudioContext": !1, "useWebAudio": !0 }, this.volume = 1, this.gainNode = null, this.isSpatial = !1, this.panner = null, this.audioCtx = t.audioCtx, this.isSpatial = t.isSpatial, this.setMaxDistance("number" == typeof t.maxDistance ? t.maxDistance : 1e5), this.destNode = this.audioCtx.createMediaStreamDestination(), this.setVolume(t.volume), this.setSpeaker(t.speaker).catch(function (e) { }), this.inBackground(t.isHide) } return A.prototype.setPosition = function (e) { this.logger.info(t.RANGE_AUDIO + " ".concat(this.userID, " set position: ") + e), this.position = e, this.panner && (void 0 !== this.panner.positionX ? (this.panner.positionX.value = e[1], this.panner.positionY.value = e[2], this.panner.positionZ.value = -e[0]) : this.panner.setPosition(e[1], e[2], -e[0])) }, A.prototype.getDistanceFromListener = function (e) { return this.distance = g(this.position, e.position), this.distance }, A.prototype.setMaxDistance = function (e) { this.maxDistance = e, this.panner && (e < 10 && (e = 10), this.panner.maxDistance = 2.6 * e) }, A.prototype.setVolume = function (e) { isNaN(e) || (this.volume = e, this.gainNode && (this.gainNode.gain.value = this.volume)) }, A.prototype.setSpeaker = function (e) { var A; return i(this, void 0, void 0, function () { var r, i, n; return o(this, function (o) { switch (o.label) { case 0: if ("string" != typeof e) return [2]; if (this.speaker = e, !(r = null === (A = this.audioEl) || void 0 === A ? void 0 : A.dom)) return [3, 10]; if (!(i = r.setSinkId)) return [3, 8]; o.label = 1; case 1: return o.trys.push([1, 6, , 7]), this.config.playOnAudioContext ? [3, 3] : [4, i.call(r, e || "")]; case 2: return o.sent(), [3, 5]; case 3: return [4, i.call(r, "")]; case 4: o.sent(), o.label = 5; case 5: return this.logger.info(t.RANGE_AUDIO + " ".concat(this.userID, " set speaker success. id: ").concat(e, ".")), [3, 7]; case 6: throw n = o.sent(), this.logger.error(t.RANGE_AUDIO + " ".concat(this.userID, " set speaker failed. id: ").concat(e, "  error: ").concat(n, ".")), n; case 7: return [3, 9]; case 8: throw "setting speaker not support."; case 9: return [3, 11]; case 10: this.logger.info(t.RANGE_AUDIO + " ".concat(this.userID, " no element for set speaker.")), o.label = 11; case 11: return [2] } }) }) }, A.prototype.initPanner = function () { if (!this.panner) { var e = (0, c.createPanner)(this.audioCtx, this.maxDistance, this.position), t = e.gainNode; this.panner = e.panner, this.gainNode = t, t.gain.value = this.volume } }, A.prototype.changeRenderConfig = function (e, A, r, n) { var c, g, u, l, h; return void 0 === A && (A = !1), void 0 === r && (r = !1), void 0 === n && (n = !0), i(this, void 0, void 0, function () { var i, d, C, I, E, p, f, B, _, m, Q, y, v, S = this; return o(this, function (o) { switch (o.label) { case 0: return A || this.isSpatial !== e ? (this.isSpatial = e, i = navigator.userAgent.toLowerCase(), d = i.match(/chrome\/(\d*)/), C = d && i.includes("mobile"), [4, (0, a.getSystemInfo)()]) : [2]; case 1: return I = o.sent(), E = "Windows" === I.platform && I.majorPlatformVersion >= 13, p = this.isHide && (E || C), f = "running" !== this.audioCtx.state, n && (p || f) && (this.logger.warn("".concat(t.RANGE_AUDIO, " ").concat(this.userID, " stop web audio. system: ").concat(I.platform, " ").concat(I.majorPlatformVersion)), n = !1), this.config.useWebAudio = n, B = i.includes("safari") && !i.includes("chrome"), _ = i.includes("micromessenger") && new RegExp(/(iphone|ipad|ipod|ios)/i).test(i), n || this.stream || (r = !0), this.config.playOnAudioContext = r, this.initPanner(), this.isPlaying && this.sourceNode ? (this.lastNode && this.lastNode.disconnect(), m = this.sourceNode, this.sourceNode.disconnect(), null === (c = this.panner) || void 0 === c || c.disconnect(), null === (g = this.gainNode) || void 0 === g || g.disconnect(), this.gainNode ? (n && (this.config.useGain && (m = this.sourceNode.connect(this.gainNode)), this.panner && e && (m = m.connect(this.panner))), m.connect(r ? this.audioCtx.destination : this.destNode), this.lastNode = m, this.position && this.setPosition(this.position), this.logger.info(t.RANGE_AUDIO + "'".concat(this.userID, "' play ").concat(e ? "3d" : "normal", " stream on ").concat(r ? "audio ctx" : "element")), (Q = null === (u = this.audioEl) || void 0 === u ? void 0 : u.dom) ? (Q.onpause = function () { S.logger.warn(t.RANGE_AUDIO + " ".concat(S.streamID, " audio paused")) }, Q.onerror = function (e) { S.logger.warn(t.RANGE_AUDIO + " ".concat(S.streamID, " audio error, ").concat(e)) }, r ? (this.stream && Q.srcObject !== this.stream && (Q.srcObject = this.stream, Q.muted = !0, Q.oncanplay = function () { Q.play().then(function () { S.logger.info(t.RANGE_AUDIO + " ".concat(S.userID, " ctx autoplay success.")), S.checkPlayStatus() }).catch(function (e) { S.logger.warn(t.RANGE_AUDIO + " ".concat(S.userID, " ctx autoplay failed.")) }) }), [3, 6]) : [3, 2]) : [3, 6]) : [3, 6]) : [3, 6]; case 2: return y = this.destNode.stream, (v = this.config.needLoopback && !_ && !B) && this.loopbackConn && (this.loopbackConn.close(), this.loopbackConn.onError = null), n || !this.stream ? [3, 3] : (this.logger.info("".concat(t.RANGE_AUDIO, " ").concat(this.userID, " stop audio api")), this.sourceNode.disconnect(), null === (l = this.panner) || void 0 === l || l.disconnect(), null === (h = this.gainNode) || void 0 === h || h.disconnect(), y = this.stream, [3, 5]); case 3: return v && y ? (this.loopbackConn = this.loopbackConn || new s.default(this.streamID || "", this.logger), this.loopbackConn.onError = function (e) { S.logger.warn(t.RANGE_AUDIO + " ".concat(S.userID, " loopback failed! ").concat(e)), S.changeRenderConfig(S.isSpatial, !0, !0) }, [4, this.loopbackConn.bindStream(y, this.streamID || void 0)]) : [3, 5]; case 4: return y = o.sent(), [3, 5]; case 5: Q.muted = !0, Q.srcObject = y, this.setSpeaker(this.speaker).catch(function (e) { }), Q.oncanplay = function () { if (Q) { Q.muted = !1; var e = function A(e) { S.logger.error(t.RANGE_AUDIO + " ".concat(S.userID, " autoplay failed. error: ").concat(e)), S.changeRenderConfig(S.isSpatial, !0, !0) }; Q.play().then(function () { (null == Q ? void 0 : Q.paused) ? e("audio paused") : (S.logger.info(t.RANGE_AUDIO + " ".concat(S.userID, " element autoplay success.")), S.checkPlayStatus()) }).catch(function (t) { e(t) }) } }, o.label = 6; case 6: return [2] } }) }) }, A.prototype.checkPlayStatus = function () { var e = this; setTimeout(function () { var A; if (e.isPlaying) { var r = null === (A = e.audioEl) || void 0 === A ? void 0 : A.dom, i = e.audioCtx.state; !r || r.paused || r.muted && !e.config.playOnAudioContext || "running" !== i ? (e.logger.warn("".concat(t.RANGE_AUDIO, " ").concat(e.userID, " play detection is abnormal. audio ctx:").concat(i, ", paused:").concat(null == r ? void 0 : r.paused, ", muted:").concat(null == r ? void 0 : r.muted)), "running" !== i && (e.audioCtx.resume(), setTimeout(function () { e.logger.warn("".concat(t.RANGE_AUDIO, " ").concat(e.userID, " play resume. audio ctx:").concat(i, ", paused:").concat(null == r ? void 0 : r.paused, ", muted:").concat(null == r ? void 0 : r.muted)) }, 1e3))) : e.logger.info("".concat(t.RANGE_AUDIO, " ").concat(e.userID, " play detection is fine")) } }, 2e3) }, A.prototype.inBackground = function (e, t) { void 0 === e && (e = !1), void 0 === t && (t = !1), this.isHide !== e && (this.isHide = e, e || this.config.useWebAudio || this.changeRenderConfig(this.isSpatial, !0)) }, A }(); t.BaseAudioSource = u }, "3976": function _(e, A, r) { "use strict"; var o, n = this && this.__extends || (o = function i(e, t) { return (o = Object.setPrototypeOf || { "__proto__": [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var A in t) Object.prototype.hasOwnProperty.call(t, A) && (e[A] = t[A]) })(e, t) }, function (e, A) { if ("function" != typeof A && null !== A) throw new TypeError("Class extends value " + String(A) + " is not a constructor or null"); function t() { this.constructor = e } o(e, A), e.prototype = null === A ? Object.create(A) : (t.prototype = A.prototype, new t) }), s = this && this.__awaiter || function (e, t, A, r) { return new (A || (A = Promise))(function (i, o) { function n(e) { try { a(r.next(e)) } catch (e) { o(e) } } function s(e) { try { a(r.throw(e)) } catch (e) { o(e) } } function a(e) { var t; e.done ? i(e.value) : (t = e.value, t instanceof A ? t : new A(function (e) { e(t) })).then(n, s) } a((r = r.apply(e, t || [])).next()) }) }, a = this && this.__generator || function (e, t) { var A, r, i, o, n = { "label": 0, "sent": function sent() { if (1 & i[0]) throw i[1]; return i[1] }, "trys": [], "ops": [] }; return o = { "next": s(0), "throw": s(1), "return": s(2) }, "function" == typeof Symbol && (o[Symbol.iterator] = function () { return this }), o; function s(s) { return function (a) { return function (s) { if (A) throw new TypeError("Generator is already executing."); for (; o && (o = 0, s[0] && (n = 0)), n;)try { if (A = 1, r && (i = 2 & s[0] ? r.return : s[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, s[1])).done) return i; switch (r = 0, i && (s = [2 & s[0], i.value]), s[0]) { case 0: case 1: i = s; break; case 4: return n.label++, { "value": s[1], "done": !1 }; case 5: n.label++, r = s[1], s = [0]; continue; case 7: s = n.ops.pop(), n.trys.pop(); continue; default: if (!((i = (i = n.trys).length > 0 && i[i.length - 1]) || 6 !== s[0] && 2 !== s[0])) { n = 0; continue } if (3 === s[0] && (!i || s[1] > i[0] && s[1] < i[3])) { n.label = s[1]; break } if (6 === s[0] && n.label < i[1]) { n.label = i[1], i = s; break } if (i && n.label < i[2]) { n.label = i[2], n.ops.push(s); break } i[2] && n.ops.pop(), n.trys.pop(); continue }s = t.call(e, n) } catch (e) { s = [6, e], r = 0 } finally { A = i = 0 } if (5 & s[0]) throw s[1]; return { "value": s[0] ? s[1] : void 0, "done": !0 } }([s, a]) } } }; Object.defineProperty(A, "__esModule", { "value": !0 }), A.RANGE_AUDIO = void 0; var c = r(6218), g = r(2423); A.RANGE_AUDIO = "zc.ra.4"; var u = function (e) { function t(t, A, r) { var i = e.call(this, t, r) || this; return i.logger = t, i.media = A.media, i.position = A.position || null, i.createSource(), i.userID = "custom" + (new Date).getTime(), i.config = { "needLoopback": !1, "useGain": !1, "playOnAudioContext": !1, "useWebAudio": !0 }, i } return n(t, e), t.prototype.createSource = function () { var e = this; if ((0, g.isMobile)()) return this.logger.info("".concat((0, g.isMobile)(), " ").concat(this.userID, " not create src.")), void (this.changeRenderConfig = function () { return s(e, void 0, void 0, function () { return a(this, function (e) { return [2] }) }) }); this.media && (this.logger.info(A.RANGE_AUDIO + " create el source."), this.sourceNode || (this.sourceNode = this.audioCtx.createMediaElementSource(this.media)), null !== this.distance && this.distance < this.maxDistance && this.startPlayingAudio("in range")) }, t.prototype.startPlayingAudio = function (e) { var t, r; return s(this, void 0, void 0, function () { var i; return a(this, function (o) { switch (o.label) { case 0: return this.isPlaying ? (this.logger.info(A.RANGE_AUDIO + " ".concat(this.userID, " is already playing")), [2]) : (e && this.logger.info(A.RANGE_AUDIO + " vocal ".concat(this.userID, " play for ").concat(e)), this.isPlaying = !0, (0, g.isMobile)() ? (this.media.muted = !1, [2]) : (this.audioEl = this.audioEl || c.AudioElPool.useAudioEl() || null, this.logger.info(A.RANGE_AUDIO + " ".concat(this.userID, " start using audio el ").concat(null === (t = this.audioEl) || void 0 === t ? void 0 : t.id)), (i = null === (r = this.audioEl) || void 0 === r ? void 0 : r.dom) || (this.logger.error(A.RANGE_AUDIO + " ".concat(this.userID, " not enough audio elements")), i = document.createElement("audio"), this.audioEl = { "id": -1, "dom": i, "used": !0 }, i.setAttribute("autoplay", "autoplay")), i.muted = !0, i.setAttribute("autoplay", "autoplay"), i.setAttribute("id", "zg-audio-source-" + this.userID), this.sourceNode ? [4, this.changeRenderConfig(this.isSpatial, !0)] : [3, 2])); case 1: o.sent(), o.label = 2; case 2: return "suspended" === this.audioCtx.state && this.audioCtx.resume(), [2] } }) }) }, t.prototype.stopPlayingAudio = function (e) { if (void 0 === e && (e = ""), this.isPlaying && (this.logger.info(A.RANGE_AUDIO + " vocal ".concat(this.userID, " stop for ") + e), this.isPlaying = !1), (0, g.isMobile)()) this.media.muted = !0; else { this.sourceNode && this.sourceNode.disconnect(); var t = this.audioEl, r = null == t ? void 0 : t.dom; r && (r.srcObject = null, r.parentNode && r.parentNode.removeChild(r)); var i = (null == t ? void 0 : t.id) || -1; t && i >= 0 && (c.AudioElPool.stopUsingAudioEl(i), this.logger.info(A.RANGE_AUDIO + " ".concat(this.userID, " stop using audio el ").concat(i))), this.audioEl = null } }, t.prototype.checkIfCanPlay = function (e) { var t = this.distance = this.getDistanceFromListener(e); null === t || t > this.maxDistance || 0 === this.maxDistance ? this.stopPlayingAudio("out of range. ".concat(t, " > ").concat(this.maxDistance)) : this.startPlayingAudio("in range") }, t }(g.BaseAudioSource); A.default = u }, "5159": function _(e, t) { "use strict"; var r = this && this.__awaiter || function (e, t, A, r) { return new (A || (A = Promise))(function (i, o) { function n(e) { try { a(r.next(e)) } catch (e) { o(e) } } function s(e) { try { a(r.throw(e)) } catch (e) { o(e) } } function a(e) { var t; e.done ? i(e.value) : (t = e.value, t instanceof A ? t : new A(function (e) { e(t) })).then(n, s) } a((r = r.apply(e, t || [])).next()) }) }, i = this && this.__generator || function (e, t) { var A, r, i, o, n = { "label": 0, "sent": function sent() { if (1 & i[0]) throw i[1]; return i[1] }, "trys": [], "ops": [] }; return o = { "next": s(0), "throw": s(1), "return": s(2) }, "function" == typeof Symbol && (o[Symbol.iterator] = function () { return this }), o; function s(s) { return function (a) { return function (s) { if (A) throw new TypeError("Generator is already executing."); for (; o && (o = 0, s[0] && (n = 0)), n;)try { if (A = 1, r && (i = 2 & s[0] ? r.return : s[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, s[1])).done) return i; switch (r = 0, i && (s = [2 & s[0], i.value]), s[0]) { case 0: case 1: i = s; break; case 4: return n.label++, { "value": s[1], "done": !1 }; case 5: n.label++, r = s[1], s = [0]; continue; case 7: s = n.ops.pop(), n.trys.pop(); continue; default: if (!((i = (i = n.trys).length > 0 && i[i.length - 1]) || 6 !== s[0] && 2 !== s[0])) { n = 0; continue } if (3 === s[0] && (!i || s[1] > i[0] && s[1] < i[3])) { n.label = s[1]; break } if (6 === s[0] && n.label < i[1]) { n.label = i[1], i = s; break } if (i && n.label < i[2]) { n.label = i[2], n.ops.push(s); break } i[2] && n.ops.pop(), n.trys.pop(); continue }s = t.call(e, n) } catch (e) { s = [6, e], r = 0 } finally { A = i = 0 } if (5 & s[0]) throw s[1]; return { "value": s[0] ? s[1] : void 0, "done": !0 } }([s, a]) } } }; Object.defineProperty(t, "__esModule", { "value": !0 }), t.RANGE_AUDIO = void 0, t.RANGE_AUDIO = "zc.ra.3"; var o = function () { function A(e, t) { this.streamID = e, this.logger = t, this.rtcConn = null, this.loopbackConn = null, this.destStream = new MediaStream, this.onError = null } return A.prototype.bindStream = function (e, A) { var o, n; return r(this, void 0, void 0, function () { var r, s, a, c, g, u, l = this; return i(this, function (i) { switch (i.label) { case 0: return A && (this.streamID = A), r = ["completed", "connected"], this.rtcConn && this.loopbackConn && r.includes(this.rtcConn.connectionState) ? (s = null === (o = this.rtcConn) || void 0 === o ? void 0 : o.getSenders().find(function (e) { var t; return "audio" === (null === (t = e.track) || void 0 === t ? void 0 : t.kind) }), e.getTracks().forEach(function (e) { "audio" === e.kind && (null == s || s.replaceTrack(e)) }), [3, 10]) : [3, 1]; case 1: this.rtcConn = new RTCPeerConnection, this.loopbackConn = new RTCPeerConnection, a = { "offerVideo": !0, "offerAudio": !0, "offerToReceiveAudio": !1, "offerToReceiveVideo": !1 }, this.rtcConn.onicecandidateerror = function (e) { l.logger.warn(t.RANGE_AUDIO + " ".concat(l.streamID, " loopback in ice error: ").concat(JSON.stringify(e))) }, this.loopbackConn.onicecandidateerror = function (e) { l.logger.warn(t.RANGE_AUDIO + " ".concat(l.streamID, " loopback out ice error: ").concat(JSON.stringify(e))) }, this.rtcConn.onicecandidate = function (e) { var A, r = e.candidate; r && (l.logger.info(t.RANGE_AUDIO + " ".concat(l.streamID, " loopback add out candidate: ").concat(r)), null === (A = l.loopbackConn) || void 0 === A || A.addIceCandidate(new RTCIceCandidate(r))) }, this.loopbackConn.onicecandidate = function (e) { var A, r = e.candidate; r && (l.logger.info(t.RANGE_AUDIO + " ".concat(l.streamID, " loopback add in candidate: ").concat(r)), null === (A = l.rtcConn) || void 0 === A || A.addIceCandidate(new RTCIceCandidate(r))) }, window.setTimeout(function () { l.rtcConn && l.loopbackConn && (r.includes(l.rtcConn.iceConnectionState) && r.includes(l.loopbackConn.iceConnectionState) ? l.logger.info(t.RANGE_AUDIO + " ".concat(l.streamID, " loopback connect ok.")) : (l.logger.warn(t.RANGE_AUDIO + " ".concat(l.streamID, " loopback connect failed. in state: ").concat(l.rtcConn.iceConnectionState, ", out state: ").concat(l.loopbackConn.iceConnectionState)), l.close(), l.onError && l.onError("time out"))) }, 2e3), this.loopbackConn.ontrack = function (e) { var A = e.track; l.logger.info(t.RANGE_AUDIO + " ".concat(l.streamID, " loopback receive track")), l.replaceTrack(A) }, e.getTracks().find(function (t) { var A; if ("audio" === t.kind) return null === (A = l.rtcConn) || void 0 === A || A.addTrack(t, e), !0 }), i.label = 2; case 2: return i.trys.push([2, 9, , 10]), [4, this.rtcConn.createOffer(a)]; case 3: return c = i.sent(), [4, this.rtcConn.setLocalDescription(c)]; case 4: return i.sent(), [4, this.loopbackConn.setRemoteDescription(c)]; case 5: return i.sent(), [4, this.loopbackConn.createAnswer()]; case 6: return (g = i.sent()).sdp = null === (n = g.sdp) || void 0 === n ? void 0 : n.replace(/useinbandfec=/, "stereo=1;useinbandfec="), [4, this.loopbackConn.setLocalDescription(g)]; case 7: return i.sent(), [4, this.rtcConn.setRemoteDescription(g)]; case 8: return i.sent(), this.logger.info(t.RANGE_AUDIO + " ".concat(this.streamID, " loopback set sdp completed.")), [3, 10]; case 9: return u = i.sent(), this.logger.error(t.RANGE_AUDIO + " ".concat(this.streamID, " loopback connect failed.").concat(u)), this.close(), this.onError && this.onError("connect failed"), this.onError = null, [3, 10]; case 10: return [2, this.destStream] } }) }) }, A.prototype.replaceTrack = function (e) { var t = this; "audio" === e.kind && (this.destStream.getTracks().forEach(function (e) { t.destStream.removeTrack(e) }), this.destStream.addTrack(e)) }, A.prototype.close = function () { var e = this, t = this.rtcConn, A = this.loopbackConn; this.destStream.getTracks().forEach(function (t) { e.destStream.removeTrack(t) }), null == t || t.close(), null == A || A.close(), this.rtcConn = null, this.loopbackConn = null }, A }(); t.default = o }, "9123": function _(e, t, r) { "use strict"; var i = this && this.__spreadArray || function (e, t, A) { if (A || 2 === arguments.length) for (var r, i = 0, o = t.length; i < o; i++)!r && i in t || (r || (r = Array.prototype.slice.call(t, 0, i)), r[i] = t[i]); return e.concat(r || Array.prototype.slice.call(t)) }; Object.defineProperty(t, "__esModule", { "value": !0 }), t.RANGE_AUDIO = void 0; var o = r(694); t.RANGE_AUDIO = "zc.ra.2"; var n = function () { function A(e, t) { this.logger = e, this.isEnable = !1, this.interval = 100, this.timer = null, this.audioSourceList = [], this.hasChanged = !1, this.userChanged = !1, this.updateUserInterval = 1e3, this.updateUserTimer = null, this.audioSourceUpdate = !1, this.maxPlayingQuantity = 20, this.allAudioSourceList = [], this.audioSourceWithinRangeList = [], this.localUserList = [], this.rangeListener = t } return A.getInstance = function (e, t) { return A.instance || (A.instance = new A(e, t)), A.instance }, A.prototype.setAudioSourceUpdate = function (e) { this.audioSourceUpdate = e }, A.prototype.setListener = function (e) { this.rangeListener = e, this.hasChanged = !0, this.userChanged = !0 }, A.prototype.setAudioSourceList = function (e) { this.audioSourceList = e, this.logger.info("".concat(t.RANGE_AUDIO, " set src list: [").concat(e.map(function (e) { return e.userID }).join(","), "]")), this.hasChanged = !0 }, A.prototype.setAllAudioSourceList = function (e) { e && (this.allAudioSourceList = e), this.userChanged = !0 }, A.prototype.startPlayingAudioStream = function () { this.timer && (clearTimeout(this.timer), this.timer = null), this.hasChanged = !0, this.playAudioTask() }, A.prototype.playAudioTask = function () { var e = this; this.hasChanged && (this.hasChanged = !1, this.handlePlayAudioTask()), this.timer = window.setTimeout(function () { e.playAudioTask() }, this.interval) }, A.prototype.handlePlayAudioTask = function () { var e = this; if (this.isEnable) { this.logger.info("".concat(t.RANGE_AUDIO, " handler task start")); var A = i([], this.audioSourceList, !0), r = 0, n = this.rangeListener.recvMode; if ([o.ZegoRangeAudioListenMode.Team, o.ZegoRangeAudioListenMode.All].includes(n)) { var s = this.getTeamAudioSourceGroup(); A = s.otherList, s.teamList.forEach(function (t) { r < e.maxPlayingQuantity && (t.isPlaying || t.startPlayingAudio("play for team"), r++) }) } var a = [o.ZegoRangeAudioListenMode.World, o.ZegoRangeAudioListenMode.All].includes(n); a && (A.forEach(function (t) { t.distance = t.getDistanceFromListener(e.rangeListener) }), A.sort(function (e, t) { return null === e.distance ? 1 : null === t.distance || e.distance < t.distance ? -1 : e.distance > t.distance ? 1 : 0 })), A.forEach(function (t) { var A = [o.ZegoRangeAudioSpeakMode.All, o.ZegoRangeAudioSpeakMode.World].includes(t.sendMode) && null !== t.distance && (null === e.rangeListener.recvRange || t.distance <= e.rangeListener.recvRange); if (a && r < e.maxPlayingQuantity && A) t.isPlaying || t.startPlayingAudio("play for range"), r++; else { var i = "stop for mode or range. mode: ".concat(t.sendMode, ", range: ").concat(t.distance, " > ").concat(e.rangeListener.recvRange); t.stopPlayingAudio(i) } }), this.logger.info(t.RANGE_AUDIO + " playing quantity: ".concat(r, ".")) } else this.stopPlayingAudioStream() }, A.prototype.startCheckUserInRange = function () { this.logger.info(t.RANGE_AUDIO + " start user check"), this.updateUserTimer && (clearTimeout(this.updateUserTimer), this.updateUserTimer = null), this.userChanged = !0, this.userCheckTask() }, A.prototype.stopCheckUserInRange = function () { this.logger.info(t.RANGE_AUDIO + " stop user check"), this.updateUserTimer && (clearTimeout(this.updateUserTimer), this.updateUserTimer = null) }, A.prototype.userCheckTask = function () { var e = this; this.userChanged && (this.userChanged = !1, this.handleUserCheckTask()), this.updateUserTimer = window.setTimeout(function () { e.userCheckTask() }, this.updateUserInterval) }, A.prototype.handleUserCheckTask = function () { var e = this; if (this.audioSourceUpdate) { var t = []; this.allAudioSourceList.forEach(function (A) { A.distance = A.getDistanceFromListener(e.rangeListener); var r = null !== A.distance && (null === e.rangeListener.recvRange || A.distance <= e.rangeListener.recvRange), i = !!e.localUserList.find(function (e) { return e.userID === A.userID }); r && i && t.push({ "userID": A.userID, "position": A.position }) }), this.checkAudioSourceListDiff(t, this.audioSourceWithinRangeList) && this.rangeListener.eventHandler.emit("audioSourceWithinRangeUpdate", t), this.audioSourceWithinRangeList = t } }, A.prototype.getTeamAudioSourceGroup = function () { var e = this, t = [], A = []; return this.audioSourceList.forEach(function (r) { r.isSpeakInTeam(e.rangeListener.teamID) ? t.push(r) : A.push(r) }), { "teamList": t, "otherList": A } }, A.prototype.stopPlayingAudioStream = function () { this.timer && (clearTimeout(this.timer), this.timer = null), this.audioSourceList.forEach(function (e) { e.stopPlayingAudio("stop for all stream") }) }, A.prototype.setLocalUserList = function (e) { this.localUserList = e, this.userChanged = !0 }, A.prototype.checkAudioSourceListDiff = function (e, t) { for (var A, r = 0; r < e.length; r++) { A = !1; for (var i = 0; i < t.length; i++)if (e[r].userID === t[i].userID) { A = !0; break } if (!A) return !0 } for (var o = 0; o < t.length; o++) { A = !1; for (var n = 0; n < e.length; n++)if (t[o].userID === e[n].userID) { A = !0; break } if (!A) return !0 } return !1 }, A }(); t.default = n }, "6219": function _(e, t, r) { "use strict"; var i = this && this.__awaiter || function (e, t, A, r) { return new (A || (A = Promise))(function (i, o) { function n(e) { try { a(r.next(e)) } catch (e) { o(e) } } function s(e) { try { a(r.throw(e)) } catch (e) { o(e) } } function a(e) { var t; e.done ? i(e.value) : (t = e.value, t instanceof A ? t : new A(function (e) { e(t) })).then(n, s) } a((r = r.apply(e, t || [])).next()) }) }, o = this && this.__generator || function (e, t) { var A, r, i, o, n = { "label": 0, "sent": function sent() { if (1 & i[0]) throw i[1]; return i[1] }, "trys": [], "ops": [] }; return o = { "next": s(0), "throw": s(1), "return": s(2) }, "function" == typeof Symbol && (o[Symbol.iterator] = function () { return this }), o; function s(s) { return function (a) { return function (s) { if (A) throw new TypeError("Generator is already executing."); for (; o && (o = 0, s[0] && (n = 0)), n;)try { if (A = 1, r && (i = 2 & s[0] ? r.return : s[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, s[1])).done) return i; switch (r = 0, i && (s = [2 & s[0], i.value]), s[0]) { case 0: case 1: i = s; break; case 4: return n.label++, { "value": s[1], "done": !1 }; case 5: n.label++, r = s[1], s = [0]; continue; case 7: s = n.ops.pop(), n.trys.pop(); continue; default: if (!((i = (i = n.trys).length > 0 && i[i.length - 1]) || 6 !== s[0] && 2 !== s[0])) { n = 0; continue } if (3 === s[0] && (!i || s[1] > i[0] && s[1] < i[3])) { n.label = s[1]; break } if (6 === s[0] && n.label < i[1]) { n.label = i[1], i = s; break } if (i && n.label < i[2]) { n.label = i[2], n.ops.push(s); break } i[2] && n.ops.pop(), n.trys.pop(); continue }s = t.call(e, n) } catch (e) { s = [6, e], r = 0 } finally { A = i = 0 } if (5 & s[0]) throw s[1]; return { "value": s[0] ? s[1] : void 0, "done": !0 } }([s, a]) } } }, n = this && this.__importDefault || function (e) { return e && e.__esModule ? e : { "default": e } }; Object.defineProperty(t, "__esModule", { "value": !0 }); var s = r(694), a = r(6889), c = n(r(9585)), g = function () { function A(e, t) { var A = this; this.raMode = s.ZegoRangeAudioMode.World, this.recvRange = null, this.position = null, this.forwardAxis = [1, 0, 0], this.upAxis = [0, 0, 1], this.audioStream = null, this.enableMic = !1, this.isPublishing = !1, this.streamID = null, this.isDenoise = !1, this.voiceChanger = null, this.isUpdated = !0, this.zegoRTC = t, this.audioCtx = e, this.audioListener = this.audioCtx.listener, this.eventHandler = c.default.getInstance(), this.zegoRTC.on("publisherStateUpdate", function (e) { var t = e.state, r = e.errorCode, i = e.extendedData, o = e.streamID.match(/(.*)_(.*)/); if (3 === (null == o ? void 0 : o.length)) { if (A.userID !== o[1]) return; "NO_PUBLISH" === t ? (A.isPublishing = !1, A.stopPublishingStream()) : (A.isPublishing = !0, A.isUpdated || (A.logger.info(a.RANGE_AUDIO + " resend stream info"), A.updateSteamExtraInfo())), A.eventHandler.emit("microphoneStateUpdate", { "NO_PUBLISH": s.ZegoRangeAudioMicrophoneState.Off, "PUBLISH_REQUESTING": s.ZegoRangeAudioMicrophoneState.TurningOn, "PUBLISHING": s.ZegoRangeAudioMicrophoneState.On }[t], r, i) } }) } return Object.defineProperty(A.prototype, "recvMode", { "get": function get() { return void 0 !== this._recvMode ? this._recvMode : [s.ZegoRangeAudioMode.World, s.ZegoRangeAudioMode.SecretTeam].includes(this.raMode) ? s.ZegoRangeAudioListenMode.All : s.ZegoRangeAudioListenMode.Team }, "set": function set(e) { this._recvMode = e }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "sendMode", { "get": function get() { return void 0 !== this._sendMode ? this._sendMode : this.raMode === s.ZegoRangeAudioMode.World ? s.ZegoRangeAudioSpeakMode.All : s.ZegoRangeAudioSpeakMode.Team }, "set": function set(e) { this._sendMode = e }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "logger", { "get": function get() { return this.zegoRTC.logger }, "enumerable": !1, "configurable": !0 }), A.getInstance = function (e, t) { return A.instance || (A.instance = new A(e, t)), A.instance }, A.prototype.updateSelfPosition = function (e, t, A) { this.position = e, this.forwardAxis = t, Array.isArray(A) && (this.upAxis = A), this.updateListenerEffect() }, A.prototype.updateListenerEffect = function () { this.position && (this.audioListener.positionX ? (this.audioListener.positionX.value = this.position[1], this.audioListener.positionY.value = this.position[2], this.audioListener.positionZ.value = -this.position[0]) : this.audioListener.setPosition(this.position[1], this.position[2], -this.position[0]), this.audioListener.forwardX ? (this.audioListener.forwardX.value = this.forwardAxis[1], this.audioListener.forwardY.value = this.forwardAxis[2], this.audioListener.forwardZ.value = -this.forwardAxis[0], this.audioListener.upX.value = this.upAxis[1], this.audioListener.upY.value = this.upAxis[2], this.audioListener.upZ.value = -this.upAxis[0]) : this.audioListener.setOrientation(this.forwardAxis[1], this.forwardAxis[2], -this.forwardAxis[0], this.upAxis[1], this.upAxis[2], -this.upAxis[0])) }, A.prototype.startPublishingStream = function () { var e = this; this.enableMic ? this.logger.warn(a.RANGE_AUDIO + " mic is already enabled") : (this.enableMic = !0, this.zegoRTC.createStream({ "camera": { "video": !1, "audio": !0, "audioInput": this.micID || void 0, "audioBitrate": 30 } }).then(function (t) { return i(e, void 0, void 0, function () { return o(this, function (e) { if (!this.userID) throw this.zegoRTC.destroyStream(t), this.enableMic = !1, Error("Enable mic failed. Please log in room first."); return this.audioStream && this.audioStream !== t && this.zegoRTC.destroyStream(this.audioStream), this.audioStream = t, this.isDenoise && this.enableDenoise(this.isDenoise), null !== this.voiceChanger && this.setVoiceChangerPreset(this.voiceChanger), this.streamID = this.userID + "_" + Date.now(), this.zegoRTC.startPublishingStream(this.streamID, t, { "extraInfo": JSON.stringify(this.getExtraInfo()) }), [2] }) }) }).catch(function (t) { throw e.audioStream = null, e.enableMic = !1, t })) }, A.prototype.stopPublishingStream = function () { this.isPublishing && this.streamID && this.zegoRTC.stopPublishingStream(this.streamID), this.isPublishing = !1, this.audioStream && (this.zegoRTC.destroyStream(this.audioStream), this.audioStream = null), this.enableMic = !1 }, A.prototype.setCustomMode = function (e, t) { var A = !1, r = !1, i = !1; return t !== this.recvMode && (this.recvMode = t, i = !0), e !== this.sendMode && (this.sendMode = e, A = !0, r = !0), A && this.updateSteamExtraInfo(), { "sendChange": r, "recvChange": i } }, A.prototype.setNormalMode = function (e) { this.raMode = e, this.updateSteamExtraInfo() }, A.prototype.setTeamID = function (e) { this.teamID = e, this.updateSteamExtraInfo() }, A.prototype.updateSteamExtraInfo = function () { var e = this; this.streamID && this.isPublishing && (this.isUpdated = !1, this.logger.info(a.RANGE_AUDIO + " update stream info"), this.zegoRTC.setStreamExtraInfo(this.streamID, JSON.stringify(this.getExtraInfo())).then(function (t) { 0 === t.errorCode && (e.logger.info(a.RANGE_AUDIO + " update stream info success"), e.isUpdated = !0) })) }, A.prototype.getExtraInfo = function () { var e, t = { "range_audio_team_id": this.teamID || "", "range_audio_mode": (e = this.raMode, { "0": 1, "1": 2, "2": 3 }[e]), "r_a_s_flag": 1 }; return void 0 === this._sendMode && this.raMode !== s.ZegoRangeAudioMode.World || (t.r_a_speak = this.sendMode), t }, A.prototype.reset = function () { this.audioStream && this.stopPublishingStream(), this.userID = void 0, this.streamID = null }, A.prototype.enableDenoise = function (e) { var t = this; return this.audioStream && this.zegoRTC.enableAiDenoise(this.audioStream, e).catch(function (e) { t.isDenoise = !1; var A = e || {}; t.eventHandler.emit("aiDenoiseError", A.errorCode, A.extendedData) }), this.isDenoise = e, !0 }, A.prototype.setVoiceChangerPreset = function (e) { var t = this; return this.audioStream && this.zegoRTC.setVoiceChangerPreset(e, this.audioStream).catch(function (e) { t.voiceChanger = null; var A = e || {}; t.eventHandler.emit("voiceChangerError", A.errorCode, A.extendedData) }), this.voiceChanger = e, !0 }, A }(); t.default = g }, "2747": function _(e, A, r) { "use strict"; var o, n = this && this.__extends || (o = function i(e, t) { return (o = Object.setPrototypeOf || { "__proto__": [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var A in t) Object.prototype.hasOwnProperty.call(t, A) && (e[A] = t[A]) })(e, t) }, function (e, A) { if ("function" != typeof A && null !== A) throw new TypeError("Class extends value " + String(A) + " is not a constructor or null"); function t() { this.constructor = e } o(e, A), e.prototype = null === A ? Object.create(A) : (t.prototype = A.prototype, new t) }), s = this && this.__awaiter || function (e, t, A, r) { return new (A || (A = Promise))(function (i, o) { function n(e) { try { a(r.next(e)) } catch (e) { o(e) } } function s(e) { try { a(r.throw(e)) } catch (e) { o(e) } } function a(e) { var t; e.done ? i(e.value) : (t = e.value, t instanceof A ? t : new A(function (e) { e(t) })).then(n, s) } a((r = r.apply(e, t || [])).next()) }) }, a = this && this.__generator || function (e, t) { var A, r, i, o, n = { "label": 0, "sent": function sent() { if (1 & i[0]) throw i[1]; return i[1] }, "trys": [], "ops": [] }; return o = { "next": s(0), "throw": s(1), "return": s(2) }, "function" == typeof Symbol && (o[Symbol.iterator] = function () { return this }), o; function s(s) { return function (a) { return function (s) { if (A) throw new TypeError("Generator is already executing."); for (; o && (o = 0, s[0] && (n = 0)), n;)try { if (A = 1, r && (i = 2 & s[0] ? r.return : s[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, s[1])).done) return i; switch (r = 0, i && (s = [2 & s[0], i.value]), s[0]) { case 0: case 1: i = s; break; case 4: return n.label++, { "value": s[1], "done": !1 }; case 5: n.label++, r = s[1], s = [0]; continue; case 7: s = n.ops.pop(), n.trys.pop(); continue; default: if (!((i = (i = n.trys).length > 0 && i[i.length - 1]) || 6 !== s[0] && 2 !== s[0])) { n = 0; continue } if (3 === s[0] && (!i || s[1] > i[0] && s[1] < i[3])) { n.label = s[1]; break } if (6 === s[0] && n.label < i[1]) { n.label = i[1], i = s; break } if (i && n.label < i[2]) { n.label = i[2], n.ops.push(s); break } i[2] && n.ops.pop(), n.trys.pop(); continue }s = t.call(e, n) } catch (e) { s = [6, e], r = 0 } finally { A = i = 0 } if (5 & s[0]) throw s[1]; return { "value": s[0] ? s[1] : void 0, "done": !0 } }([s, a]) } } }; Object.defineProperty(A, "__esModule", { "value": !0 }), A.RANGE_AUDIO = void 0; var c = r(6218), g = r(2423); A.RANGE_AUDIO = "zc.ra.4"; var u = function (e) { function t(t, r, i) { var o = e.call(this, t, i) || this; return o.logger = t, o.streamView = r.streamView, o.position = r.position || null, o.createSource(), o.userID = "stream" + (new Date).getTime(), o.config = { "needLoopback": !1, "useGain": !1, "playOnAudioContext": !1, "useWebAudio": !0 }, o.streamView.on("_trackChange", function (e, t) { "audio" === e && (t ? o.createSource(!0) : o.logger.error("".concat(A.RANGE_AUDIO, " ").concat(o.userID, " audio track lost"))) }), o } return n(t, e), t.prototype.createSource = function (e) { var t = this; if (void 0 === e && (e = !1), (0, g.isMobile)()) return this.logger.info("".concat(A.RANGE_AUDIO, " ").concat(this.userID, " not create src.")), this.changeRenderConfig = function () { return s(t, void 0, void 0, function () { return a(this, function (e) { return [2] }) }) }, !1; if (!this.streamView) return !1; if (this.logger.info(A.RANGE_AUDIO + " create view source. trackChanged: " + e), !this.sourceNode || e) { var r = this.streamView.v.getAudioNodeAndStopRender(); if (!r) return this.logger.error(A.RANGE_AUDIO + " create view source failed."), !1; this.sourceNode && this.sourceNode.disconnect(), this.sourceNode = r, this.changeRenderConfig(this.isSpatial, !0) } return null !== this.distance && this.distance < this.maxDistance && this.startPlayingAudio("in range"), !0 }, t.prototype.startPlayingAudio = function (e) { var t, r; return s(this, void 0, void 0, function () { var i; return a(this, function (o) { switch (o.label) { case 0: return this.isPlaying ? (this.logger.info(A.RANGE_AUDIO + " ".concat(this.userID, " is already playing")), [2]) : (e && this.logger.info(A.RANGE_AUDIO + " vocal ".concat(this.userID, " play for ").concat(e)), this.isPlaying = !0, (0, g.isMobile)() ? (this.streamView.setAudioMuted(!1), [2]) : (this.audioEl = this.audioEl || c.AudioElPool.useAudioEl() || null, this.logger.info(A.RANGE_AUDIO + " ".concat(this.userID, " start using audio el ").concat(null === (t = this.audioEl) || void 0 === t ? void 0 : t.id)), (i = null === (r = this.audioEl) || void 0 === r ? void 0 : r.dom) || (this.logger.error(A.RANGE_AUDIO + " ".concat(this.userID, " not enough audio elements")), i = document.createElement("audio"), this.audioEl = { "id": -1, "dom": i, "used": !0 }, i.setAttribute("autoplay", "autoplay")), i.muted = !0, i.setAttribute("autoplay", "autoplay"), i.setAttribute("id", "zg-audio-source-" + this.userID), this.sourceNode ? [4, this.changeRenderConfig(this.isSpatial, !0)] : [3, 2])); case 1: o.sent(), o.label = 2; case 2: return "suspended" === this.audioCtx.state && this.audioCtx.resume(), [2] } }) }) }, t.prototype.stopPlayingAudio = function (e) { if (void 0 === e && (e = ""), this.isPlaying && (this.logger.info(A.RANGE_AUDIO + " vocal ".concat(this.userID, " stop for ") + e), this.isPlaying = !1), (0, g.isMobile)()) this.streamView.setAudioMuted(!0); else { this.sourceNode && this.sourceNode.disconnect(); var t = this.audioEl, r = null == t ? void 0 : t.dom; r && (r.srcObject = null, r.parentNode && r.parentNode.removeChild(r)); var i = (null == t ? void 0 : t.id) || -1; t && i >= 0 && (c.AudioElPool.stopUsingAudioEl(i), this.logger.info(A.RANGE_AUDIO + " ".concat(this.userID, " stop using audio el ").concat(i))), this.audioEl = null } }, t.prototype.checkIfCanPlay = function (e) { var t = this.distance = this.getDistanceFromListener(e); null === t || t > this.maxDistance || 0 === this.maxDistance ? this.stopPlayingAudio("out of range. ".concat(t, " > ").concat(this.maxDistance)) : this.startPlayingAudio("in range") }, t }(g.BaseAudioSource); A.default = u }, "6609": function _(e, t) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.createPanner = void 0, t.createPanner = function (e, t, A) { var r = A || [0, 0, 0], i = e.createPanner(), o = e.createGain(); return i.panningModel = "HRTF", i.distanceModel = "linear", i.refDistance = 1, i.maxDistance = 2.6 * t || 1, i.rolloffFactor = 1, i.coneOuterGain = .4, void 0 !== i.positionX ? (i.positionX.value = r[1], i.positionY.value = r[2], i.positionZ.value = -r[0]) : i.setPosition(r[1], r[2], -r[0]), { "panner": i, "gainNode": o } } }, "9304": function _(e, t) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.RAModeType = void 0, function (e) { e[e.Normal = 0] = "Normal", e[e.Custom = 1] = "Custom" }(t.RAModeType || (t.RAModeType = {})) }, "6664": function _(e, A) { "use strict"; function t(e) { return !isNaN(Number(e)) && "" !== e && Number.MAX_SAFE_INTEGER >= Number(e) && Number(e) >= -Number.MAX_SAFE_INTEGER } Object.defineProperty(A, "__esModule", { "value": !0 }), A.checkCoordinate = A.checkBoolean = A.checkNumber = void 0, A.checkNumber = t, A.checkBoolean = function (e) { return !1 }, A.checkCoordinate = function (e) { if (Array.isArray(e)) { for (var A = 0; A < 3; A++)if (!t(e[A])) return !1; return !0 } return !1 } }, "2504": function _(e, t, r) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.AdvancedModule = void 0; var i = r(4601), o = r(4522), n = r(6721), s = function () { function A(e, t, A, r) { this.logger = e, this.dataReport = t, this.streamCenter = A, this.stateCenter = r, this.screenShotReady = !1 } return A.prototype.publishTarget = function (e) { var t = this, A = ""; switch (e.type) { case "addpush": A = n.ZegoRTCLogEvent.kZegoTaskAddPublishCdnUrl.event; break; case "delpush": case "clearpush": A = n.ZegoRTCLogEvent.kZegoTaskRemovePublishCdnUrl.event }var r = this.stateCenter.reporter.createSpan(i.TRACER_LEVEL.H, { "key": n.ZegoRTCLogEvent.kZegoTaskPublishStart.event, "par": e.streamID }, { "key": "" }, A); return r.setAttributes({ "url": n.ZegoRTCLogEvent.kZegoTaskRemovePublishCdnUrl.url(e.pushUrl) }), new Promise(function (A, i) { var a = function s(e, A) { t.logger.error("zb.pt" + (A || e.message)), t.stateCenter.reporter.setError(r, e, A), i({ "errorCode": e.code, "extendedData": e.message + (A ? " " + A : "") }) }; if (-1 == ["addpush", "delpush", "clearpush"].indexOf(e.type)) return t.logger.error("zb.sh.pt cdn push type error"), void a(o.errorCodeList.PUBLISHER_CDN_PUSH_ERROR, "type error"); if (e.streamID && "string" == typeof e.streamID) if (e.pushUrl && "string" == typeof e.pushUrl) if (t.stateCenter.publishStreamList[e.streamID]) { var c = t.streamCenter.getRoomByStreamID(e.streamID); c ? c.streamHandler._publishTarget(e, function (e) { r.end(), A(e) }, a) : a(n.ZegoRTCLogEvent.kZegoTaskPublishTarget.error.kNoLoginError) } else a(n.ZegoRTCLogEvent.kZegoTaskPublishTarget.error.kPublishStreamNoFoundError); else a(n.ZegoRTCLogEvent.kZegoTaskPublishTarget.error.kParamError, "push url error"); else a(n.ZegoRTCLogEvent.kZegoTaskPublishTarget.error.kParamError, "stream id type error") }) }, A }(); t.AdvancedModule = s }, "4601": function _(e, t, A) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.streamHandler = t.zegoWebRTC = t.ENUM_PUBLISH_STREAM_STATE = t.ENUM_STREAM_CMD_PRI = t.ENUM_STREAM_SUB_CMD = t.TRACER_LEVEL = t.PROTO_VERSION = void 0; var r, i = A(4522), o = A(6721); t.PROTO_VERSION = "2.25.6", function (e) { e[e.I = 0] = "I", e[e.H = 10] = "H", e[e.M = 100] = "M", e[e.L = 1e3] = "L" }(r = t.TRACER_LEVEL || (t.TRACER_LEVEL = {})), t.ENUM_STREAM_SUB_CMD = { "liveNone": 0, "liveBegin": 2001, "liveEnd": 2002, "liveUpdate": 2003 }, t.ENUM_STREAM_CMD_PRI = { "liveBegin": "zegochat_js.room_stream_create_req", "liveEnd": "zegochat_js.room_stream_delete_req", "liveUpdate": "zegochat_js.room_stream_update_req" }, t.ENUM_PUBLISH_STREAM_STATE = { "waiting_url": 1, "tryPublish": 2, "update_info": 3, "publishing": 4, "stop": 5, "retryPublish": 6 }, t.zegoWebRTC = { "setStreamExtraInfo": function setStreamExtraInfo(e, t) { var A = this; return new Promise(function (i, n) { var s = A.streamCenter.getRoomByStreamID(e), a = o.ZegoRTCLogEvent.kZegoTaskLiveRoomSendStreamExtraInfo, c = A.stateCenter.reporter.createSpan(r.H, s ? { "key": o.ZegoRTCLogEvent.kZMLoginRoom.event, "par": null == s ? void 0 : s.roomID } : { "key": o.ZegoRTCLogEvent.kZegoTaskInitSetting.event }, { "key": "" }, a.event); c.setAttributes({ "stream_id": a.stream_id(e), "stream_extra_info": a.stream_extra_info(t) }); var g = function C(e, t) { A.logger.error("zb.ssei " + t), A.stateCenter.reporter.setError(c, e, t), n({ "errorCode": e.code, "extendedData": e.message + " " + t }) }; "string" == typeof e && "" != e ? "string" == typeof t && "" != t ? A.RTM.isDisConnect() ? g(a.error.kNoLoginError, "not login") : A.stateCenter.publishStreamList[e] ? s ? s.streamHandler.setStreamExtraInfo(e, t, function (e, t) { var r, o, s, g; if (0 === (null === (r = null == e ? void 0 : e.body) || void 0 === r ? void 0 : r.err_code) || 0 === (null == e ? void 0 : e.errorCode)) c.setAttributes({ "send_seq": a.send_seq(t) }), c.end(), i({ "errorCode": 0 === (null === (o = null == e ? void 0 : e.body) || void 0 === o ? void 0 : o.err_code) ? null === (s = null == e ? void 0 : e.body) || void 0 === s ? void 0 : s.err_code : null == e ? void 0 : e.errorCode }); else { var u = { "errorCode": (null === (g = null == e ? void 0 : e.body) || void 0 === g ? void 0 : g.err_code) || (null == e ? void 0 : e.code) }; A.stateCenter.reporter.setError(c, u), n(u) } }, g) : g(a.error.kNoLoginError, "not login") : g(a.error.kPublishStreamNoFoundError) : g(a.error.kParamError, "extraInfo must be string and no empty") : g(a.error.kParamError, "streamID must be string and not empty") }) } }, t.streamHandler = { "_publishTarget": function _publishTarget(e, A, r) { var n = this; this.logger.info("zb.sh.ptcall"); var s = Math.ceil((new Date).getTime() / 1e3), a = e.streamID; this.stateCenter.testEnvironment && (a = "zegotest-" + this.stateCenter.appid + "-" + e.streamID); var c = { "appid": this.stateCenter.appid, "biz_type": 0, "timestamp": s, "seq": this.stateCenter.cdnSeq++, "version": 1 * t.PROTO_VERSION, "stream_id": a, "pushurl": e.pushUrl }; if (this.logger.debug("zb.sh.pt send command"), this.stateCenter.useNetAgent) this.sendBizChannelRequestV2({ "server": 1, "location": "/liveroomcmd/push", "cmd": e.type }, c, function (t) { n.logger.info("zb.sh.pt receive message"); var o = t || {}, s = o.code, a = o.message; s && 0 != s ? (n.logger.error("zb.sh.pt " + e.type + " error code: " + s + " " + a), r(i.errorCodeList.UNKNOWN_SERVER_ERROR, " cmd: ".concat(e.type, " ").concat(s, " ").concat(a))) : (n.logger.info("zb.sh.pt " + e.type + " success"), A && A({ "errorCode": 0, "extendedData": "" })) }, function (t, A, i, s) { var a = ""; s || (s = o.ZegoRTCLogEvent.kZegoTaskPublishTarget.error.kUnknownServerError, 200 === t ? (n.logger.info("zb.sh.pt error: " + A), s = o.ZegoRTCLogEvent.kZegoTaskPublishTarget.error.kUnknownServerError, 2001 == A ? s = o.ZegoRTCLogEvent.kZegoTaskPublishTarget.error.kInvalidChannelError : 2002 == A && (s = o.ZegoRTCLogEvent.kZegoTaskPublishTarget.error.kBizChannelError), a = "cmd: ".concat(e.type, ", biz_code: ").concat(A)) : a = "request media server fail, error: " + t, n.logger.error("zb.sh.pt " + a)), r && r(s, a) }); else { var g = { "channel": "media", "cmd": e.type, "req_body": JSON.stringify(c) }; this.sendBizChannelRequest(g, function (t, s, a) { if (n.logger.info("zb.sh.pt receive message"), 0 != a.length) { var c = JSON.parse(a), g = c.code, u = c.message; g && 0 != g ? (n.logger.error("zb.sh.pt " + e.type + " error code: " + g + " " + u), r(i.errorCodeList.UNKNOWN_SERVER_ERROR, " cmd: ".concat(e.type, " ").concat(g, " ").concat(u))) : (n.logger.info("zb.sh.pt " + e.type + " success"), A && A({ "errorCode": 0, "extendedData": "" })) } else r(o.ZegoRTCLogEvent.kZegoTaskPublishTarget.error.kNoResponseError) }, function (t, A, i) { n.logger.info("zb.sh.pt error: " + t); var s = o.ZegoRTCLogEvent.kZegoTaskPublishTarget.error.kUnknownServerError; 2001 == t ? s = o.ZegoRTCLogEvent.kZegoTaskPublishTarget.error.kInvalidChannelError : 2002 == t && (s = o.ZegoRTCLogEvent.kZegoTaskPublishTarget.error.kBizChannelError), n.logger.error("zb.sh.pt "), r(s, " cmd: ".concat(e.type, " ").concat(t, " ").concat("", "  ")) }) } }, "updateStreamExtraInfo": function updateStreamExtraInfo(e, A, r, i) { this.logger.info("zb.sh.usei call"); var o = t.ENUM_STREAM_SUB_CMD.liveUpdate; this.stateCenter.publishStreamList[e] && this.stateCenter.publishStreamList[e].state >= t.ENUM_PUBLISH_STREAM_STATE.update_info ? (this.stateCenter.publishStreamList[e].extra_info = A, this.updateStreamInfo(e, o, A, r, i)) : this.stateCenter.publishStreamList[e] && this.stateCenter.publishStreamList[e].state === t.ENUM_PUBLISH_STREAM_STATE.tryPublish ? (this.stateCenter.publishStreamList[e].extra_info = A, r({ "errorCode": 0 })) : i(streamExtraInfoKey.error.kUpdateStreamInfoFailError) }, "setStreamExtraInfo": function setStreamExtraInfo(e, t, A, r) { this.updateStreamExtraInfo(e, t, A, r) } } }, "4522": function _(e, t) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.errorCodeList = void 0, t.errorCodeList = { "NOT_LOGIN": { "code": 1000002, "message": "not login room" }, "INPUT_PARAM": { "code": 1100001, "message": "input param error." }, "PUBLISH_NOT_PUBLISH": { "code": 1103040, "message": "publisher not found" }, "PUBLISH_NO_PREVIEW": { "code": 1103044, "message": "stream is not from zego" }, "TRACK_NOT_FOUND": { "code": 1103047, "message": "track is not found" }, "DEVICE_NOT_FOUND": { "code": 1103048, "message": "device is not found" }, "PUBLISHER_CONSTRAINTS_ERROR": { "code": 1103029, "message": "constraint error" }, "PUBLISHER_CDN_PUSH_ERROR": { "code": 1103052, "message": "publisher cdn push error" }, "VIDEO_DEVICE_FALSE": { "code": 1103045, "message": "video is false" }, "AUDIO_DEVICE_FALSE": { "code": 1103046, "message": "audio is false" }, "UNKNOWN_SERVER_ERROR": { "code": 1100999, "message": "unknown server error" }, "LOCALSTREAM_WRONG": { "code": 1000018, "message": "local stream wrong" }, "PUBLISHER_STREAM_NO_FOUND": { "code": 1103055, "message": "publish stream no found" }, "PUBLISH_TARGET_NO_RESPONSE": { "code": 1103063, "message": "publish target no response" }, "BIZ_CHANNEL_ERROR": { "code": 1102021, "message": "biz channel error." }, "INVALID_CHANNEL": { "code": 1102024, "message": "invalid channel" }, "PUBLISHER_EXTRA_INFO_NULL": { "code": 1003050, "message": "extra info of publishing stream is null" }, "PUBLISHER_UPDATE_STREAM_INFO_FAIL": { "code": 1103062, "message": "update stream info fail" }, "TRACK_CAN_NOT_ADD": { "code": 1103063, "message": "only stream which have one track and kind no exist can add track" }, "TRACK_CAN_NOT_REMOVE": { "code": 1103064, "message": "stream which only has one track can not remove " }, "PUBLISHER_UPDATE_SDP_FAIL": { "code": 1103068, "message": "update sdp fail" }, "PUBLISHER_STATE_WRONG": { "code": 1103069, "message": "publisher state wrong" }, "HANDLE_TRACK_NOT_SUPPORTED": { "code": 1103070, "message": "not support remove track" }, "VIDEO_EFFECT_IS_RUNNING": { "code": 1103071, "message": "video effect processor is running" } } }, "563": function _(e, t, A) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }); var r = A(2504), i = A(4601); t.default = { "type": "StreamCommon", "install": function install(e, t, A) { for (var o in Object.defineProperty(t.prototype, "initStreamCommon", { "value": function value() { this.streamCommonModule = new r.AdvancedModule(this.logger, this.dataReport, this.streamCenter, this.stateCenter) }, "writable": !1 }), i.zegoWebRTC) Object.defineProperty(e.prototype, o, { "value": i.zegoWebRTC[o], "writable": !1 }); for (var o in i.streamHandler) Object.defineProperty(A.prototype, o, { "value": i.streamHandler[o], "writable": !1 }) } } }, "6721": function _(e, t, A) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.ZegoRTCLogEvent = void 0; var r = A(4522), i = A(9268); t.ZegoRTCLogEvent = { "kZegoTaskInitSetting": { "event": "/sdk/init" }, "kZMLoginRoom": { "event": "/sdk/login" }, "kZegoTaskPublishStart": { "event": "/sdk/start_publish" }, "kZegoTaskPublishTarget": { "event": "/sdk/publish_target", "error": { "kParamError": r.errorCodeList.INPUT_PARAM, "kPublishStreamNoFoundError": r.errorCodeList.PUBLISHER_STREAM_NO_FOUND, "kNoLoginError": r.errorCodeList.NOT_LOGIN, "kNoResponseError": r.errorCodeList.PUBLISH_TARGET_NO_RESPONSE, "kBizChannelError": r.errorCodeList.BIZ_CHANNEL_ERROR, "kInvalidChannelError": r.errorCodeList.INVALID_CHANNEL, "kUnknownServerError": r.errorCodeList.UNKNOWN_SERVER_ERROR } }, "kZegoTaskAddPublishCdnUrl": { "event": "/mss/pushadd", "error": { "kParamError": r.errorCodeList.INPUT_PARAM }, "stream_id": i.getItemString, "url": i.getItemString }, "kZegoTaskRemovePublishCdnUrl": { "event": "/mss/pushdel", "error": { "kParamError": r.errorCodeList.INPUT_PARAM }, "stream_id": i.getItemString, "url": i.getItemString }, "kZegoTaskClearPublishCdnUrl": { "event": "/sdk/clear_publish_cdn_url", "error": { "kParamError": r.errorCodeList.INPUT_PARAM } }, "kZegoTaskLiveRoomSendStreamExtraInfo": { "event": "/liveroom/send_stream_extra_info", "error": { "kParamError": r.errorCodeList.INPUT_PARAM, "kExtraInfoNullError": r.errorCodeList.PUBLISHER_EXTRA_INFO_NULL, "kNoLoginError": r.errorCodeList.NOT_LOGIN, "kPublishStreamNoFoundError": r.errorCodeList.PUBLISHER_STREAM_NO_FOUND, "kUpdateStreamInfoFailError": r.errorCodeList.PUBLISHER_UPDATE_STREAM_INFO_FAIL }, "stream_id": i.getItemString, "stream_extra_info": i.getItemString, "room_sid_string": i.getItemString, "room_id": i.getItemString, "send_seq": i.getItemNumber } } }, "4802": function _(e, t, A) { "use strict"; var r = this && this.__assign || function () { return (r = Object.assign || function (e) { for (var t, A = 1, r = arguments.length; A < r; A++)for (var i in t = arguments[A]) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]); return e }).apply(this, arguments) }, i = this && this.__awaiter || function (e, t, A, r) { return new (A || (A = Promise))(function (i, o) { function n(e) { try { a(r.next(e)) } catch (e) { o(e) } } function s(e) { try { a(r.throw(e)) } catch (e) { o(e) } } function a(e) { var t; e.done ? i(e.value) : (t = e.value, t instanceof A ? t : new A(function (e) { e(t) })).then(n, s) } a((r = r.apply(e, t || [])).next()) }) }, o = this && this.__generator || function (e, t) { var A, r, i, o, n = { "label": 0, "sent": function sent() { if (1 & i[0]) throw i[1]; return i[1] }, "trys": [], "ops": [] }; return o = { "next": s(0), "throw": s(1), "return": s(2) }, "function" == typeof Symbol && (o[Symbol.iterator] = function () { return this }), o; function s(s) { return function (a) { return function (s) { if (A) throw new TypeError("Generator is already executing."); for (; o && (o = 0, s[0] && (n = 0)), n;)try { if (A = 1, r && (i = 2 & s[0] ? r.return : s[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, s[1])).done) return i; switch (r = 0, i && (s = [2 & s[0], i.value]), s[0]) { case 0: case 1: i = s; break; case 4: return n.label++, { "value": s[1], "done": !1 }; case 5: n.label++, r = s[1], s = [0]; continue; case 7: s = n.ops.pop(), n.trys.pop(); continue; default: if (!((i = (i = n.trys).length > 0 && i[i.length - 1]) || 6 !== s[0] && 2 !== s[0])) { n = 0; continue } if (3 === s[0] && (!i || s[1] > i[0] && s[1] < i[3])) { n.label = s[1]; break } if (6 === s[0] && n.label < i[1]) { n.label = i[1], i = s; break } if (i && n.label < i[2]) { n.label = i[2], n.ops.push(s); break } i[2] && n.ops.pop(), n.trys.pop(); continue }s = t.call(e, n) } catch (e) { s = [6, e], r = 0 } finally { A = i = 0 } if (5 & s[0]) throw s[1]; return { "value": s[0] ? s[1] : void 0, "done": !0 } }([s, a]) } } }, n = this && this.__importDefault || function (e) { return e && e.__esModule ? e : { "default": e } }; Object.defineProperty(t, "__esModule", { "value": !0 }), t.preview = t.zegoWebRTC = void 0; var s = n(A(2742)), a = "zc.p.0.sbe.0", c = A(8933); t.zegoWebRTC = { "setBeautyEffect": function setBeautyEffect(e, t, A, i) { var o = this; return void 0 === i && (i = !0), new Promise(function (n, s) { var g, u; if (!(e instanceof MediaStream)) return o.logger.error(a + " localStream not found"), void s({ "errorCode": 1100001, "extendedData": " localStream no found" }); var l = function c(e) { n(e) }, h = o.streamCenter.checkPreview(e); if (!h) return o.logger.error("zc.sbe.0 preview no found"), void l({ "errorCode": c.errorCodeList.PUBLISH_NO_PREVIEW.code, "extendedData": c.errorCodeList.PUBLISH_NO_PREVIEW.message }); var d = (null === (g = h.videoEffect) || void 0 === g ? void 0 : g.stateFlag) || { "base": !1, "lowLight": !1 }; if (i) !(t = !!t) && d.lowLight ? A = { "sharpenIntensity": 0, "whitenIntensity": 0, "rosyIntensity": 0, "smoothIntensity": 0, "lowlightEnhancement": d.lowLight ? 1 : 0 } : t && (A = r({ "lowlightEnhancement": d.lowLight ? 1 : 0 }, A)), d.base = t; else { var C = A.lowlightEnhancement; A = (null === (u = h.videoEffect) || void 0 === u ? void 0 : u.enabled) || 1 !== C ? { "lowlightEnhancement": C } : { "sharpenIntensity": 0, "whitenIntensity": 0, "rosyIntensity": 0, "smoothIntensity": 0, "lowlightEnhancement": C }, d.lowLight = 1 === C } h.setBeautyEffect(d.base || d.lowLight, A, d).then(function () { l({ "errorCode": 0, "extendedData": "" }) }).catch(function (e) { s({ "errorCode": e.errorCode || -1, "extendedData": e.extendedData || e.toString() }) }) }) }, "setLowlightEnhance": function setLowlightEnhance(e, t) { return this.setBeautyEffect(e, !0, { "lowlightEnhancement": t }, !1) } }, t.preview = { "setBeautyEffect": function setBeautyEffect(e, t, A) { return i(this, void 0, void 0, function () { var r, i = this; return o(this, function (o) { switch (o.label) { case 0: if (!this.videoTrack) return this.logger.error(a + " video track no found"), [2]; if ("undefined" == typeof WebGLRenderingContext) throw { "errorCode": (r = c.errorCodeList.VIDEO_EFFECT_NOT_SUPPORT).code, "extendedData": r.message }; return s.default ? this.videoEffect && this.videoNodeQueue.isConnected(this.videoEffect) ? this.videoTrack === this.videoNodeQueue.getSourceTrack() ? [3, 2] : [4, this.videoNodeQueue.replaceNewSourceByTrack(this.videoTrack)] : [3, 4] : [3, 7]; case 1: o.sent(), o.label = 2; case 2: return [4, this.videoEffect.setBeautyEffectOptions(e, t)]; case 3: return o.sent(), this.videoEffect.stateFlag = A, [3, 6]; case 4: return this.videoEffect = new s.default(this.logger, this.videoTrack), this.videoEffect.onError = function (e, t) { i.stateCenter.actionListener("beautyEffectError", i.localStream, e.errorCode, e.extendedData, t) }, this.videoNodeQueue.pushBack(this.videoEffect), [4, this.videoEffect.setBeautyEffectOptions(e, t)]; case 5: o.sent(), this.videoEffect.stateFlag = A, o.label = 6; case 6: return [3, 8]; case 7: this.logger.error(a + " beauty effect module no found"), o.label = 8; case 8: return [2] } }) }) } } }, "3802": function _(e, t, r) { "use strict"; var i = this && this.__awaiter || function (e, t, A, r) { return new (A || (A = Promise))(function (i, o) { function n(e) { try { a(r.next(e)) } catch (e) { o(e) } } function s(e) { try { a(r.throw(e)) } catch (e) { o(e) } } function a(e) { var t; e.done ? i(e.value) : (t = e.value, t instanceof A ? t : new A(function (e) { e(t) })).then(n, s) } a((r = r.apply(e, t || [])).next()) }) }, o = this && this.__generator || function (e, t) { var A, r, i, o, n = { "label": 0, "sent": function sent() { if (1 & i[0]) throw i[1]; return i[1] }, "trys": [], "ops": [] }; return o = { "next": s(0), "throw": s(1), "return": s(2) }, "function" == typeof Symbol && (o[Symbol.iterator] = function () { return this }), o; function s(s) { return function (a) { return function (s) { if (A) throw new TypeError("Generator is already executing."); for (; o && (o = 0, s[0] && (n = 0)), n;)try { if (A = 1, r && (i = 2 & s[0] ? r.return : s[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, s[1])).done) return i; switch (r = 0, i && (s = [2 & s[0], i.value]), s[0]) { case 0: case 1: i = s; break; case 4: return n.label++, { "value": s[1], "done": !1 }; case 5: n.label++, r = s[1], s = [0]; continue; case 7: s = n.ops.pop(), n.trys.pop(); continue; default: if (!((i = (i = n.trys).length > 0 && i[i.length - 1]) || 6 !== s[0] && 2 !== s[0])) { n = 0; continue } if (3 === s[0] && (!i || s[1] > i[0] && s[1] < i[3])) { n.label = s[1]; break } if (6 === s[0] && n.label < i[1]) { n.label = i[1], i = s; break } if (i && n.label < i[2]) { n.label = i[2], n.ops.push(s); break } i[2] && n.ops.pop(), n.trys.pop(); continue }s = t.call(e, n) } catch (e) { s = [6, e], r = 0 } finally { A = i = 0 } if (5 & s[0]) throw s[1]; return { "value": s[0] ? s[1] : void 0, "done": !0 } }([s, a]) } } }, n = this && this.__importDefault || function (e) { return e && e.__esModule ? e : { "default": e } }; Object.defineProperty(t, "__esModule", { "value": !0 }), t.PUBLISH_SET_BEAUTY_EFFECT = void 0; var s = n(r(7651)), a = n(r(2306)), c = n(r(4123)), g = n(r(5647)); t.PUBLISH_SET_BEAUTY_EFFECT = "zc.p.0.sbe.2"; var u = r(8933).errorCodeList.VIDEO_EFFECT_NOT_SUPPORT, l = { "errorCode": u.code, "extendedData": u.message }, h = function () { function A(e) { this.logger = e, this.gl = null, this.effectConfig = { "sharpenIntensity": .5, "whitenIntensity": .5, "rosyIntensity": .5, "smoothIntensity": .5, "lowlightEnhancement": 0 }, this.originResolution = { "width": 0, "height": 0 }, this.shaderList = [], this.frameBufferList = [], this.outputTextureList = [], this.inputTexture = null, this.failedTimes = 0, this.onRenderError = function (e) { }, this.enableBeauty = !1 } return A.prototype.setEnableBeauty = function (e) { this.enableBeauty = !!e }, A.prototype.handleInitError = function () { this.failedTimes++, this.failedTimes > 30 && (this.failedTimes = 0, this.logger.error(t.PUBLISH_SET_BEAUTY_EFFECT + " get webgl context failed"), this.onRenderError(l)) }, A.prototype.init = function (e, A, r) { return i(this, void 0, void 0, function () { var i, n, u, h; return o(this, function (o) { switch (o.label) { case 0: return void 0 !== window.WebGLRenderingContext ? (this.canvasEl = r, this.gl = r.getContext("webgl"), this.gl ? (this.initGL(e, A), this.inputTexture ? [4, (i = new c.default(this.gl, e, A)).setConstUniforms()] : (this.logger.error(t.PUBLISH_SET_BEAUTY_EFFECT + " input texture not found"), this.handleInitError(), [2])) : (this.handleInitError(), [2])) : (this.logger.error(t.PUBLISH_SET_BEAUTY_EFFECT + " not support webgl!"), this.onRenderError(l), [2]); case 1: return o.sent(), (n = new s.default(this.gl, e, A)).setConstUniforms(), (u = new a.default(this.gl, e, A)).setConstUniforms(), (h = new g.default(this.gl, e, A)).setConstUniforms(), this.shaderList = [i, n, u, h], this.setEffectConfig(this.effectConfig), [2] } }) }) }, A.prototype.render = function (e) { return i(this, void 0, void 0, function () { var A, r, i, n, s = this; return o(this, function (o) { switch (o.label) { case 0: return (A = this.gl) && this.canvasEl && !A.isContextLost() ? [3, 4] : this.canvasEl ? (this.logger.warn(t.PUBLISH_SET_BEAUTY_EFFECT + " gl lost, restart effect"), this.release(), [4, this.init(e.videoWidth, e.videoHeight, this.canvasEl)]) : [3, 2]; case 1: return o.sent(), [3, 3]; case 2: this.logger.error(t.PUBLISH_SET_BEAUTY_EFFECT + " canvas lost"), this.onRenderError(l), o.label = 3; case 3: return [2]; case 4: return this.originResolution.height === e.videoHeight && this.originResolution.width === e.videoWidth || !(Math.abs(this.originResolution.height - e.videoHeight) > 2 || Math.abs(this.originResolution.width - e.videoWidth) > 2) ? [3, 7] : 0 === e.videoHeight || 0 === e.videoWidth ? [2] : (this.canvasEl.width = e.videoWidth, this.canvasEl.height = e.videoHeight, e.setAttribute("width", e.videoWidth.toString()), e.setAttribute("height", e.videoHeight.toString()), !this.gl || this.gl.isContextLost() ? [3, 5] : (this.logger.info(t.PUBLISH_SET_BEAUTY_EFFECT + " resolution changed to ".concat(e.videoWidth, "x").concat(e.videoHeight, ", reset resolution.")), this.resetResolution(e.videoWidth, e.videoHeight), this.shaderList.forEach(function (t) { t.resetResolution(e.videoWidth, e.videoHeight) }), [3, 7])); case 5: return this.logger.warn(t.PUBLISH_SET_BEAUTY_EFFECT + " resolution changed and gl context lost, restart effect"), this.release(), [4, this.init(e.videoWidth, e.videoHeight, this.canvasEl)]; case 6: o.sent(), o.label = 7; case 7: return r = [-1, -1, 0, 1, -1, 0, 1, 1, 0, -1, 1, 0], i = [0, 1, 2, 0, 2, 3], n = [0, 0, 1, 0, 1, 1, 0, 1], A.viewport(0, 0, e.width, e.height), A.activeTexture(A.TEXTURE0), A.bindTexture(A.TEXTURE_2D, this.inputTexture), A.texImage2D(A.TEXTURE_2D, 0, A.RGBA, A.RGBA, A.UNSIGNED_BYTE, e), this.shaderList.forEach(function (e, t) { var o = e.program; if (o) { e.renderPreTextures && e.renderPreTextures(r, i, n), A.useProgram(o), e.render(); var a = A.getUniformLocation(o, "uTexture"), c = A.createBuffer(); A.bindBuffer(A.ARRAY_BUFFER, c), A.bufferData(A.ARRAY_BUFFER, new Float32Array(r), A.STATIC_DRAW); var g = A.createBuffer(); A.bindBuffer(A.ELEMENT_ARRAY_BUFFER, g), A.bufferData(A.ELEMENT_ARRAY_BUFFER, new Uint16Array(i), A.STATIC_DRAW); var u = A.getAttribLocation(o, "aPosition"); A.enableVertexAttribArray(u), A.vertexAttribPointer(u, 3, A.FLOAT, !1, 0, 0); var l = A.createBuffer(); A.bindBuffer(A.ARRAY_BUFFER, l), A.bufferData(A.ARRAY_BUFFER, new Float32Array(n), A.STATIC_DRAW); var h = A.getAttribLocation(o, "aTexCoordinate"); A.enableVertexAttribArray(h), A.vertexAttribPointer(h, 2, A.FLOAT, !1, 0, 0); var d = t === s.shaderList.length - 1 ? null : s.outputTextureList[t]; A.bindFramebuffer(A.FRAMEBUFFER, t === s.shaderList.length - 1 ? null : s.frameBufferList[t]), A.clearColor(0, 0, 0, 1), A.clear(A.COLOR_BUFFER_BIT), A.drawElements(A.TRIANGLES, 6, A.UNSIGNED_SHORT, 0), A.activeTexture(A.TEXTURE0), d && A.bindTexture(A.TEXTURE_2D, d), A.uniform1i(a, 0) } }), [2] } }) }) }, A.prototype.setEffectConfig = function (e) { var t = this; isNaN(e.sharpenIntensity) || (this.effectConfig.sharpenIntensity = e.sharpenIntensity), isNaN(e.whitenIntensity) || (this.effectConfig.whitenIntensity = e.whitenIntensity), isNaN(e.rosyIntensity) || (this.effectConfig.rosyIntensity = e.rosyIntensity), isNaN(e.smoothIntensity) || (this.effectConfig.smoothIntensity = e.smoothIntensity), isNaN(e.lowlightEnhancement) || (this.effectConfig.lowlightEnhancement = e.lowlightEnhancement), this.shaderList.forEach(function (e) { e.setEffectConfig(t.effectConfig) }) }, A.prototype.release = function () { var e, t = this; this.shaderList.forEach(function (e) { var A; e.program && (null === (A = t.gl) || void 0 === A || A.deleteProgram(e.program)) }), this.outputTextureList.forEach(function (e) { var A; e && (null === (A = t.gl) || void 0 === A || A.deleteTexture(e)) }), this.frameBufferList.forEach(function (e) { var A; e && (null === (A = t.gl) || void 0 === A || A.deleteFramebuffer(e)) }), this.inputTexture && (null === (e = this.gl) || void 0 === e || e.deleteTexture(this.inputTexture)), this.inputTexture = this.gl = null, this.shaderList.forEach(function (e) { e.release() }), this.shaderList = [], this.outputTextureList = [], this.frameBufferList = [] }, A.prototype.initGL = function (e, A) { var r = this.gl; if (!r) return this.logger.error(t.PUBLISH_SET_BEAUTY_EFFECT + " webgl context not found"); this.inputTexture = r.createTexture(), r.bindTexture(r.TEXTURE_2D, this.inputTexture), r.texParameteri(r.TEXTURE_2D, r.TEXTURE_WRAP_S, r.CLAMP_TO_EDGE), r.texParameteri(r.TEXTURE_2D, r.TEXTURE_WRAP_T, r.CLAMP_TO_EDGE), r.texParameteri(r.TEXTURE_2D, r.TEXTURE_MIN_FILTER, r.LINEAR), r.texParameteri(r.TEXTURE_2D, r.TEXTURE_MAG_FILTER, r.LINEAR); for (var i = 0; 4 > i; i++) { var o = r.createTexture(); if (!o) return this.logger.warn(t.PUBLISH_SET_BEAUTY_EFFECT + " create texture failed"); r.bindTexture(r.TEXTURE_2D, o), r.texParameteri(r.TEXTURE_2D, r.TEXTURE_WRAP_S, r.CLAMP_TO_EDGE), r.texParameteri(r.TEXTURE_2D, r.TEXTURE_WRAP_T, r.CLAMP_TO_EDGE), r.texParameteri(r.TEXTURE_2D, r.TEXTURE_MIN_FILTER, r.LINEAR), r.texImage2D(r.TEXTURE_2D, 0, r.RGBA, e, A, 0, r.RGBA, r.UNSIGNED_BYTE, null); var n = r.createFramebuffer(); if (!n) return this.logger.warn(t.PUBLISH_SET_BEAUTY_EFFECT + " create frame buffer failed"); r.bindFramebuffer(r.FRAMEBUFFER, n), r.framebufferTexture2D(r.FRAMEBUFFER, r.COLOR_ATTACHMENT0, r.TEXTURE_2D, o, 0), this.outputTextureList.push(o), this.frameBufferList.push(n) } r.viewport(0, 0, e, A), this.originResolution.width = e, this.originResolution.height = A }, A.prototype.resetResolution = function (e, A) { var r = this.gl; if (!r) return this.logger.warn(t.PUBLISH_SET_BEAUTY_EFFECT + " can not find webgl context"); for (var i = 0; i < this.outputTextureList.length; i++)r.bindTexture(r.TEXTURE_2D, this.outputTextureList[i]), r.texImage2D(r.TEXTURE_2D, 0, r.RGBA, e, A, 0, r.RGBA, r.UNSIGNED_BYTE, null); r.viewport(0, 0, e, A), this.originResolution.width = e, this.originResolution.height = A }, A }(); t.default = h }, "8933": function _(e, t) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.errorCodeList = void 0, t.errorCodeList = { "VIDEO_EFFECT_NOT_SUPPORT": { "code": 1103072, "message": "not support beauty effect" }, "VIDEO_TRACK_NOT_READABLE": { "code": 1103074, "message": "video track is not readable" }, "VIDEO_TRACK_OVERLOAD": { "code": 1103075, "message": "beauty effect overload" }, "PUBLISH_NO_PREVIEW": { "code": 1103044, "message": "stream is not from zego" } } }, "9045": function _(e, t, A) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.BeautyEffect = void 0; var r = A(4802); t.BeautyEffect = { "type": "BeautyEffect", "install": function install(e, t) { for (var A in r.preview) Object.defineProperty(t.prototype, A, { "value": r.preview[A], "writable": !1 }); for (var A in r.zegoWebRTC) Object.defineProperty(e.prototype, A, { "value": r.zegoWebRTC[A], "writable": !1 }) } } }, "7415": function _(e, t) { "use strict"; var r = this && this.__awaiter || function (e, t, A, r) { return new (A || (A = Promise))(function (i, o) { function n(e) { try { a(r.next(e)) } catch (e) { o(e) } } function s(e) { try { a(r.throw(e)) } catch (e) { o(e) } } function a(e) { var t; e.done ? i(e.value) : (t = e.value, t instanceof A ? t : new A(function (e) { e(t) })).then(n, s) } a((r = r.apply(e, t || [])).next()) }) }, i = this && this.__generator || function (e, t) { var A, r, i, o, n = { "label": 0, "sent": function sent() { if (1 & i[0]) throw i[1]; return i[1] }, "trys": [], "ops": [] }; return o = { "next": s(0), "throw": s(1), "return": s(2) }, "function" == typeof Symbol && (o[Symbol.iterator] = function () { return this }), o; function s(s) { return function (a) { return function (s) { if (A) throw new TypeError("Generator is already executing."); for (; o && (o = 0, s[0] && (n = 0)), n;)try { if (A = 1, r && (i = 2 & s[0] ? r.return : s[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, s[1])).done) return i; switch (r = 0, i && (s = [2 & s[0], i.value]), s[0]) { case 0: case 1: i = s; break; case 4: return n.label++, { "value": s[1], "done": !1 }; case 5: n.label++, r = s[1], s = [0]; continue; case 7: s = n.ops.pop(), n.trys.pop(); continue; default: if (!((i = (i = n.trys).length > 0 && i[i.length - 1]) || 6 !== s[0] && 2 !== s[0])) { n = 0; continue } if (3 === s[0] && (!i || s[1] > i[0] && s[1] < i[3])) { n.label = s[1]; break } if (6 === s[0] && n.label < i[1]) { n.label = i[1], i = s; break } if (i && n.label < i[2]) { n.label = i[2], n.ops.push(s); break } i[2] && n.ops.pop(), n.trys.pop(); continue }s = t.call(e, n) } catch (e) { s = [6, e], r = 0 } finally { A = i = 0 } if (5 & s[0]) throw s[1]; return { "value": s[0] ? s[1] : void 0, "done": !0 } }([s, a]) } } }; Object.defineProperty(t, "__esModule", { "value": !0 }); var o = "zc.p.0.sbe.3", n = function () { function A(e) { this.logger = e, this.recordedFrameCount = 0, this.targetFrameRate = 0, this.recordingDuration = 0 } return A.prototype.startRecordBeautyEffectOutput = function (e) { return r(this, void 0, void 0, function () { var t, A, r, n = this; return i(this, function (i) { switch (i.label) { case 0: return t = 6, this.recordID ? (this.logger.warn(o + " detector is already recording"), [2, { "result": !0 }]) : (A = (new Date).getTime(), this.recordID = A, this.targetFrameRate = e, this.recordedFrameCount = 0, this.recordingDuration = t, [4, new Promise(function (e) { window.setTimeout(e, 1e3 * n.recordingDuration) })]); case 1: return i.sent(), this.recordID !== A ? (this.recordID = void 0, [2, { "result": !0 }]) : (this.recordID = void 0, r = this.recordedFrameCount / t, this.recordedFrameCount < this.targetFrameRate * this.recordingDuration / 2 ? (this.logger.warn(o + " detect effect overload: current fps: " + r), [2, { "result": !1, "targetFPS": this.targetFrameRate, "currentFPS": r }]) : (this.logger.info(o + " detect effect current fps: " + r), [2, { "result": !0 }])) } }) }) }, A.prototype.stopRecordBeautyEffectOutput = function () { this.recordedFrameCount = this.targetFrameRate = 0, this.recordID = void 0 }, A.prototype.addFrame = function () { this.recordID && (this.recordedFrameCount += 1) }, A }(); t.default = n }, "289": function _(e, r) { "use strict"; function t(e) { for (var t = e, A = "", r = 0; r < t.length; r++) { var i = t.charCodeAt(r), o = i; i >= 65 && i <= 90 && (o = (i - 65 - 13 + 26) % 26 + 65), i >= 97 && i <= 122 && (o = (i - 97 - 13 + 26) % 26 + 97), A += String.fromCharCode(o) } return A } Object.defineProperty(r, "__esModule", { "value": !0 }); var i = function () { function A(e, t, A) { this.gl = e, this.width = t, this.height = A, this.type = "baseShader", this.program = null, this.program = null } return A.prototype.setEffectConfig = function (e) { }, A.prototype.setConstUniforms = function () { }, A.prototype.resetResolution = function (e, t) { this.width = e || this.width, this.height = t || this.height }, A.prototype.render = function () { }, A.prototype.renderPreTextures = function (e, t, A) { }, A.prototype.makeProgram = function (e, A) { var r = this.gl, i = t(e), o = t(A), n = this.makeShader(i, r.VERTEX_SHADER), s = this.makeShader(o, r.FRAGMENT_SHADER), a = r.createProgram(); return r.attachShader(a, n), r.attachShader(a, s), r.linkProgram(a), r.getProgramParameter(a, r.LINK_STATUS), a }, A.prototype.release = function () { }, A.prototype.makeShader = function (e, t) { var A = this.gl, r = A.createShader(t); return A.shaderSource(r, e), A.compileShader(r), A.getShaderParameter(r, A.COMPILE_STATUS), r }, A }(); r.default = i }, "7651": function _(A, r, o) { "use strict"; var n, s = this && this.__extends || (n = function i(e, t) { return (n = Object.setPrototypeOf || { "__proto__": [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var A in t) Object.prototype.hasOwnProperty.call(t, A) && (e[A] = t[A]) })(e, t) }, function (e, A) { if ("function" != typeof A && null !== A) throw new TypeError("Class extends value " + String(A) + " is not a constructor or null"); function t() { this.constructor = e } n(e, A), e.prototype = null === A ? Object.create(A) : (t.prototype = A.prototype, new t) }), a = this && this.__importDefault || function (e) { return e && e.__esModule ? e : { "default": e } }; Object.defineProperty(r, "__esModule", { "value": !0 }); var c = a(o(289)), g = o(8451), u = function (t) { function e(e, A, r) { var i = t.call(this, e, A, r) || this; return i.width = A, i.height = r, i.type = "BlurShader", i.blurXProgram = null, i.blurYProgram = null, i.diffProgram = null, i.uIntensity = null, i.smoothIntensity = .5, i.blurTextureList = [], i.blurBufferList = [], i.blurXProgram = i.makeProgram(g.borderBlurVS, g.borderBlurFS), i.setBorderBlurProgram(i.blurXProgram, 1 / (A || 1), 0), i.blurYProgram = i.makeProgram(g.borderBlurVS, g.borderBlurFS), i.setBorderBlurProgram(i.blurYProgram, 0, 1 / (r || 1)), i.diffProgram = i.makeProgram(g.diffBlurVS, g.diffBlurFS), i.setDiffBlurProgram(i.diffProgram), i.program = i.makeProgram(g.mixBlurVS, g.mixBlurFS), i.initBlurBuffer(), i } return s(e, t), e.prototype.setEffectConfig = function (e) { isNaN(e.smoothIntensity) || (this.smoothIntensity = e.smoothIntensity / 100) }, e.prototype.render = function () { this.gl.uniform1f(this.uIntensity, this.smoothIntensity) }, e.prototype.initBlurBuffer = function () { var e = this, t = this.gl; this.blurTextureList.forEach(function (t) { var A; t && (null === (A = e.gl) || void 0 === A || A.deleteTexture(t)) }), this.blurBufferList.forEach(function (t) { var A; t && (null === (A = e.gl) || void 0 === A || A.deleteFramebuffer(t)) }), this.blurTextureList = [], this.blurBufferList = []; for (var A = 0; A < 3; A++) { var r = t.createTexture(); if (!r) return; t.bindTexture(t.TEXTURE_2D, r), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_S, t.CLAMP_TO_EDGE), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_T, t.CLAMP_TO_EDGE), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_MIN_FILTER, t.LINEAR), t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL, !0), t.texImage2D(t.TEXTURE_2D, 0, t.RGBA, this.width, this.height, 0, t.RGBA, t.UNSIGNED_BYTE, null); var i = t.createFramebuffer(); if (!i) return; t.bindFramebuffer(t.FRAMEBUFFER, i), t.framebufferTexture2D(t.FRAMEBUFFER, t.COLOR_ATTACHMENT0, t.TEXTURE_2D, r, 0), this.blurTextureList.push(r), this.blurBufferList.push(i) } }, e.prototype.renderPreTextures = function (e, t, A) { var r = this, i = this.gl, o = [0, 1, 0], n = [1, 1, 2];[this.blurXProgram, this.blurYProgram, this.diffProgram].forEach(function (s, a) { if (s) { i.useProgram(s); var c = i.getUniformLocation(s, "uTexture"); i.uniform1i(c, o[a]); var g = i.createBuffer(); i.bindBuffer(i.ARRAY_BUFFER, g), i.bufferData(i.ARRAY_BUFFER, new Float32Array(e), i.STATIC_DRAW); var u = i.createBuffer(); i.bindBuffer(i.ELEMENT_ARRAY_BUFFER, u), i.bufferData(i.ELEMENT_ARRAY_BUFFER, new Uint16Array(t), i.STATIC_DRAW); var l = i.getAttribLocation(s, "aPosition"); i.enableVertexAttribArray(l), i.vertexAttribPointer(l, 3, i.FLOAT, !1, 0, 0); var h = i.createBuffer(); i.bindBuffer(i.ARRAY_BUFFER, h), i.bufferData(i.ARRAY_BUFFER, new Float32Array(A), i.STATIC_DRAW); var d = i.getAttribLocation(s, "aTexCoordinate"); i.enableVertexAttribArray(d), i.vertexAttribPointer(d, 2, i.FLOAT, !1, 0, 0), i.bindFramebuffer(i.FRAMEBUFFER, r.blurBufferList[a]), i.clearColor(0, 0, 0, 1), i.clear(i.COLOR_BUFFER_BIT), i.drawElements(i.TRIANGLES, 6, i.UNSIGNED_SHORT, 0), i.activeTexture(i.TEXTURE0 + n[a]), i.bindTexture(i.TEXTURE_2D, r.blurTextureList[a]) } }) }, e.prototype.setConstUniforms = function () { var e = this.width, t = this.height, A = this.program; if (A) { var r = this.gl; r.useProgram(A); var i = r.getUniformLocation(A, "widthOffset"); r.uniform1f(i, 1 / e); var o = r.getUniformLocation(A, "heightOffset"); r.uniform1f(o, 1 / t), this.uIntensity = r.getUniformLocation(A, "blurAlpha"), r.uniform1f(this.uIntensity, this.smoothIntensity); var n = r.getUniformLocation(A, "blurTexture"); r.uniform1i(n, 1); var s = r.getUniformLocation(A, "blurDiffTexture"); r.uniform1i(s, 2) } }, e.prototype.resetResolution = function (e, t) { this.width = e || this.width, this.height = t || this.height }, e.prototype.setBorderBlurProgram = function (e, t, A) { var r = this.gl; r.useProgram(e); var i = r.getUniformLocation(e, "texBlurWidthOffset"); r.uniform1f(i, t); var o = r.getUniformLocation(e, "texBlurHeightOffset"); r.uniform1f(o, A) }, e.prototype.setDiffBlurProgram = function (e) { var t = this.gl; t.useProgram(e); var A = t.getUniformLocation(e, "blurTexture"); t.uniform1i(A, 1) }, e }(c.default); r.default = u }, "6736": function _(e, t) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.lightLut = void 0, t.lightLut = "\ndata:image/png;base64,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" }, "2306": function _(A, r, o) { "use strict"; var n, s = this && this.__extends || (n = function i(e, t) { return (n = Object.setPrototypeOf || { "__proto__": [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var A in t) Object.prototype.hasOwnProperty.call(t, A) && (e[A] = t[A]) })(e, t) }, function (e, A) { if ("function" != typeof A && null !== A) throw new TypeError("Class extends value " + String(A) + " is not a constructor or null"); function t() { this.constructor = e } n(e, A), e.prototype = null === A ? Object.create(A) : (t.prototype = A.prototype, new t) }), a = this && this.__importDefault || function (e) { return e && e.__esModule ? e : { "default": e } }; Object.defineProperty(r, "__esModule", { "value": !0 }); var c = a(o(289)), g = o(8451), u = function (t) { function e(e, A, r) { var i = t.call(this, e, A, r) || this; return i.width = A, i.height = r, i.type = "LightShader", i.uLightIntensity = null, i.uRedIntensity = null, i.whitenIntensity = .5, i.rosyIntensity = .5, i.program = i.makeProgram(g.lightVS, g.lightFS), i } return s(e, t), e.prototype.setEffectConfig = function (e) { isNaN(e.whitenIntensity) || (this.whitenIntensity = e.whitenIntensity / 100), isNaN(e.rosyIntensity) || (this.rosyIntensity = e.rosyIntensity / 100) }, e.prototype.render = function () { var e = this.gl; e.uniform1f(this.uLightIntensity, this.whitenIntensity), e.uniform1f(this.uRedIntensity, this.rosyIntensity) }, e.prototype.setConstUniforms = function () { var e = this.program; if (e) { var t = this.gl; t.useProgram(e), this.uLightIntensity = t.getUniformLocation(e, "intensity"), t.uniform1f(this.uLightIntensity, this.whitenIntensity), this.uRedIntensity = t.getUniformLocation(e, "rosyIntensity"), t.uniform1f(this.uRedIntensity, this.rosyIntensity); var A = t.getUniformLocation(e, "uPMVMatrix"); t.uniformMatrix4fv(A, !1, [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]) } }, e }(c.default); r.default = u }, "4123": function _(A, r, o) { "use strict"; var n, s = this && this.__extends || (n = function i(e, t) { return (n = Object.setPrototypeOf || { "__proto__": [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var A in t) Object.prototype.hasOwnProperty.call(t, A) && (e[A] = t[A]) })(e, t) }, function (e, A) { if ("function" != typeof A && null !== A) throw new TypeError("Class extends value " + String(A) + " is not a constructor or null"); function t() { this.constructor = e } n(e, A), e.prototype = null === A ? Object.create(A) : (t.prototype = A.prototype, new t) }), a = this && this.__awaiter || function (e, t, A, r) { return new (A || (A = Promise))(function (i, o) { function n(e) { try { a(r.next(e)) } catch (e) { o(e) } } function s(e) { try { a(r.throw(e)) } catch (e) { o(e) } } function a(e) { var t; e.done ? i(e.value) : (t = e.value, t instanceof A ? t : new A(function (e) { e(t) })).then(n, s) } a((r = r.apply(e, t || [])).next()) }) }, c = this && this.__generator || function (e, t) { var A, r, i, o, n = { "label": 0, "sent": function sent() { if (1 & i[0]) throw i[1]; return i[1] }, "trys": [], "ops": [] }; return o = { "next": s(0), "throw": s(1), "return": s(2) }, "function" == typeof Symbol && (o[Symbol.iterator] = function () { return this }), o; function s(s) { return function (a) { return function (s) { if (A) throw new TypeError("Generator is already executing."); for (; o && (o = 0, s[0] && (n = 0)), n;)try { if (A = 1, r && (i = 2 & s[0] ? r.return : s[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, s[1])).done) return i; switch (r = 0, i && (s = [2 & s[0], i.value]), s[0]) { case 0: case 1: i = s; break; case 4: return n.label++, { "value": s[1], "done": !1 }; case 5: n.label++, r = s[1], s = [0]; continue; case 7: s = n.ops.pop(), n.trys.pop(); continue; default: if (!((i = (i = n.trys).length > 0 && i[i.length - 1]) || 6 !== s[0] && 2 !== s[0])) { n = 0; continue } if (3 === s[0] && (!i || s[1] > i[0] && s[1] < i[3])) { n.label = s[1]; break } if (6 === s[0] && n.label < i[1]) { n.label = i[1], i = s; break } if (i && n.label < i[2]) { n.label = i[2], n.ops.push(s); break } i[2] && n.ops.pop(), n.trys.pop(); continue }s = t.call(e, n) } catch (e) { s = [6, e], r = 0 } finally { A = i = 0 } if (5 & s[0]) throw s[1]; return { "value": s[0] ? s[1] : void 0, "done": !0 } }([s, a]) } } }, g = this && this.__importDefault || function (e) { return e && e.__esModule ? e : { "default": e } }; Object.defineProperty(r, "__esModule", { "value": !0 }); var u = g(o(289)), l = o(8451), h = o(6736), d = function (t) { function e(e, A, r) { var i = t.call(this, e, A, r) || this; return i.width = A, i.height = r, i.type = "LowLightShader", i.uIntensity = null, i.lowlightEnhancement = !1, i.lutTex = null, i.lutImg = null, i.lutTexIdx = 10, i.uLutTex = null, i.program = i.makeProgram(l.lightEnhanceVS, l.lightEnhanceFS), i } return s(e, t), e.prototype.setEffectConfig = function (e) { this.lowlightEnhancement = 1 === e.lowlightEnhancement }, e.prototype.release = function () { this.gl.deleteTexture(this.lutTex) }, e.prototype.render = function () { var e = this.gl; e.uniform1f(this.uIntensity, this.lowlightEnhancement ? .6 : 0); var t = this, A = t.program, r = t.width, i = t.height, o = t.lutTex; if (A) { var n = e.getUniformLocation(A, "texelWidth"); e.uniform1f(n, 1 / r); var s = e.getUniformLocation(A, "texelHeight"); e.uniform1f(s, 1 / i), e.activeTexture(e.TEXTURE0 + this.lutTexIdx), e.bindTexture(e.TEXTURE_2D, o) } }, e.prototype.setConstUniforms = function () { return a(this, void 0, void 0, function () { var e, t, A, r, i, o, n, s, a, g, u = this; return c(this, function (c) { switch (c.label) { case 0: return e = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1], t = [1, 1, 1, 0, -.344, 1.772, 1.402, -.714, 0], A = [.298973, -.168721, .500019, .58706, -.331298, -.41873, .113967, .500019, -.081289], (r = this.program) ? ((i = this.gl).useProgram(r), this.uIntensity = i.getUniformLocation(r, "uIntensity"), o = i.getUniformLocation(r, "matYUVtoRGB"), i.uniformMatrix3fv(o, !1, t), n = i.getUniformLocation(r, "matRGBtoYUV"), i.uniformMatrix3fv(n, !1, A), s = i.getUniformLocation(r, "uPMVMatrix"), i.uniformMatrix4fv(s, !1, e), a = i.getUniformLocation(r, "inputImageTexture2"), g = this, [4, new Promise(function (e) { var t = i.createTexture(), A = u.lutTexIdx, r = u.lutImg; r || (r = new Image), r.onload = function () { u.lutImg = r, i.activeTexture(i.TEXTURE0 + A), i.bindTexture(i.TEXTURE_2D, t), i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL, !1), i.texImage2D(i.TEXTURE_2D, 0, i.LUMINANCE, i.LUMINANCE, i.UNSIGNED_BYTE, r), i.texParameteri(i.TEXTURE_2D, i.TEXTURE_WRAP_S, i.CLAMP_TO_EDGE), i.texParameteri(i.TEXTURE_2D, i.TEXTURE_WRAP_T, i.CLAMP_TO_EDGE), i.texParameteri(i.TEXTURE_2D, i.TEXTURE_MIN_FILTER, i.NEAREST), i.texParameteri(i.TEXTURE_2D, i.TEXTURE_MAG_FILTER, i.NEAREST), i.uniform1i(a, A), t && e(t) }, r.src = h.lightLut })]) : [2]; case 1: return g.lutTex = c.sent(), [2] } }) }) }, e }(u.default); r.default = d }, "8451": function _(e, t) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.lightEnhanceFS = t.lightEnhanceVS = t.mixBlurFS = t.mixBlurVS = t.diffBlurFS = t.diffBlurVS = t.borderBlurFS = t.borderBlurVS = t.sharpnessFS = t.sharpnessVS = t.lightFS = t.lightVS = void 0, t.lightVS = "cerpvfvba uvtuc sybng;\nnggevohgr irp2 nGrkPbbeqvangr;\nnggevohgr irp4 nCbfvgvba;\nhavsbez zng4 hCZIZngevk;\ninelvat irp2 iGrkPbbeq;\nibvq znva() {\n    ty_Cbfvgvba = hCZIZngevk * nCbfvgvba;\n    iGrkPbbeq = nGrkPbbeqvangr;\n}", t.lightFS = "cerpvfvba uvtuc sybng;\ninelvat irp2 iGrkPbbeq;\nhavsbez fnzcyre2Q hGrkgher;\nhavsbez sybng vagrafvgl;\nhavsbez sybng ebflVagrafvgl;\nirp3 oevtugarffNaqPbagenfg(irp3 pbybe){\n  sybng v = vagrafvgl * 1.0;\n  sybng CV = 3.1415926;\n  sybng O = 0.12 * v;\n  sybng p = 0.1 * v;\n  sybng x = gna((45. + 44. * p) / 180.0 * CV);\n  pbybe = ((pbybe*255.0 - 127.5 * (1.0 - O)) * x + 127.5 * (1.0 + O)) / 255.0;\n  erghea pbybe;\n}\nibvq znva() {\n  irp4 grkgherPbybe = grkgher2Q(hGrkgher, iGrkPbbeq);\n  grkgherPbybe = irp4(oevtugarffNaqPbagenfg(grkgherPbybe.eto), grkgherPbybe.j);\n  grkgherPbybe.e = zva(grkgherPbybe.e + 0.06 * ebflVagrafvgl, 1.0);\n  ty_SentPbybe = grkgherPbybe;\n}", t.sharpnessVS = "\nnggevohgr irp4 nCbfvgvba;\nnggevohgr irp4 nGrkPbbeqvangr;\nhavsbez sybng vzntrJvqguSnpgbe;\nhavsbez sybng vzntrUrvtugSnpgbe;\nhavsbez sybng funecarff; \ninelvat irp2 iGrkPbbeq;\ninelvat irp2 yrsgGrkgherPbbeqvangr;\ninelvat irp2 evtugGrkgherPbbeqvangr;\ninelvat irp2 gbcGrkgherPbbeqvangr;\ninelvat irp2 obggbzGrkgherPbbeqvangr;\ninelvat sybng pragreZhygvcyvre;\ninelvat sybng rqtrZhygvcyvre;\nibvq znva() {\n  ty_Cbfvgvba = nCbfvgvba;\n  irp2 jvqguFgrc = irp2(vzntrJvqguSnpgbe, 0.0);\n  irp2 urvtugFgrc = irp2(0.0, vzntrUrvtugSnpgbe);\n  iGrkPbbeq = nGrkPbbeqvangr.kl;\n  yrsgGrkgherPbbeqvangr = nGrkPbbeqvangr.kl - jvqguFgrc;\n  evtugGrkgherPbbeqvangr = nGrkPbbeqvangr.kl + jvqguFgrc;\n  gbcGrkgherPbbeqvangr = nGrkPbbeqvangr.kl + urvtugFgrc;\n  obggbzGrkgherPbbeqvangr = nGrkPbbeqvangr.kl - urvtugFgrc;\n  pragreZhygvcyvre = 1.0 + 4.0 * funecarff;\n  rqtrZhygvcyvre = funecarff;\n}\n", t.sharpnessFS = "\ncerpvfvba uvtuc sybng;\ninelvat uvtuc irp2 iGrkPbbeq;\ninelvat uvtuc irp2 yrsgGrkgherPbbeqvangr;\ninelvat uvtuc irp2 evtugGrkgherPbbeqvangr;\ninelvat uvtuc irp2 gbcGrkgherPbbeqvangr;\ninelvat uvtuc irp2 obggbzGrkgherPbbeqvangr;\ninelvat uvtuc sybng pragreZhygvcyvre;\ninelvat uvtuc sybng rqtrZhygvcyvre;\nhavsbez fnzcyre2Q hGrkgher;\nibvq znva() {\n  zrqvhzc irp4 nPbybe = grkgher2Q(hGrkgher, iGrkPbbeq);\n  zrqvhzc irp3 grkgherPbybe = nPbybe.eto;\n  zrqvhzc irp3 yrsgGrkgherPbybe = grkgher2Q(hGrkgher, yrsgGrkgherPbbeqvangr).eto;\n  zrqvhzc irp3 evtugGrkgherPbybe = grkgher2Q(hGrkgher, evtugGrkgherPbbeqvangr).eto;\n  zrqvhzc irp3 gbcGrkgherPbybe = grkgher2Q(hGrkgher, gbcGrkgherPbbeqvangr).eto;\n  zrqvhzc irp3 obggbzGrkgherPbybe = grkgher2Q(hGrkgher, obggbzGrkgherPbbeqvangr).eto;\n  ty_SentPbybe = irp4((grkgherPbybe * pragreZhygvcyvre - (yrsgGrkgherPbybe * rqtrZhygvcyvre + evtugGrkgherPbybe * rqtrZhygvcyvre + gbcGrkgherPbybe * rqtrZhygvcyvre + obggbzGrkgherPbybe * rqtrZhygvcyvre)), nPbybe.n);\n}", t.borderBlurVS = "nggevohgr irp4 nCbfvgvba;\nnggevohgr irp4 nGrkPbbeqvangr;\nhavsbez uvtuc sybng grkOyheJvqguBssfrg;\nhavsbez uvtuc sybng grkOyheUrvtugBssfrg;\ninelvat irp2 i_grkpbbeq0;\ninelvat irp4 grkgherFuvsg_1;\ninelvat irp4 grkgherFuvsg_2;\ninelvat irp4 grkgherFuvsg_3;\ninelvat irp4 grkgherFuvsg_4;\nibvq znva()\n{\n  ty_Cbfvgvba = nCbfvgvba;\n  i_grkpbbeq0 = nGrkPbbeqvangr.kl;\n\n  irp2 fvatyrFgrcBssfrg = irp2(grkOyheJvqguBssfrg, grkOyheUrvtugBssfrg)*2.5;\n\n  grkgherFuvsg_1 = irp4(nGrkPbbeqvangr.kl - fvatyrFgrcBssfrg, nGrkPbbeqvangr.kl + fvatyrFgrcBssfrg);\n  grkgherFuvsg_2 = irp4(nGrkPbbeqvangr.kl - 2.0 * fvatyrFgrcBssfrg, nGrkPbbeqvangr.kl + 2.0 * fvatyrFgrcBssfrg);\n  grkgherFuvsg_3 = irp4(nGrkPbbeqvangr.kl - 3.0 * fvatyrFgrcBssfrg, nGrkPbbeqvangr.kl + 3.0 * fvatyrFgrcBssfrg);\n  grkgherFuvsg_4 = irp4(nGrkPbbeqvangr.kl - 4.0 * fvatyrFgrcBssfrg, nGrkPbbeqvangr.kl + 4.0 * fvatyrFgrcBssfrg);\n}", t.borderBlurFS = "cerpvfvba zrqvhzc sybng;\nhavsbez fnzcyre2Q hGrkgher;\ninelvat irp2 i_grkpbbeq0;\ninelvat uvtuc irp4 grkgherFuvsg_1;\ninelvat uvtuc irp4 grkgherFuvsg_2;\ninelvat uvtuc irp4 grkgherFuvsg_3;\ninelvat uvtuc irp4 grkgherFuvsg_4;\nibvq znva(ibvq) { \n  zrqvhzc irp3 fhz = grkgher2Q(hGrkgher, i_grkpbbeq0).eto;\n  fhz += grkgher2Q(hGrkgher, grkgherFuvsg_1.kl).eto;\n  fhz += grkgher2Q(hGrkgher, grkgherFuvsg_1.mj).eto;\n  fhz += grkgher2Q(hGrkgher, grkgherFuvsg_2.kl).eto;\n  fhz += grkgher2Q(hGrkgher, grkgherFuvsg_2.mj).eto;\n  fhz += grkgher2Q(hGrkgher, grkgherFuvsg_3.kl).eto;\n  fhz += grkgher2Q(hGrkgher, grkgherFuvsg_3.mj).eto;\n  fhz += grkgher2Q(hGrkgher, grkgherFuvsg_4.kl).eto;\n  fhz += grkgher2Q(hGrkgher, grkgherFuvsg_4.mj).eto;\n  ty_SentPbybe = irp4(fhz * 0.1111, 1.0); \n}", t.diffBlurVS = "nggevohgr irp4 nCbfvgvba;\nnggevohgr irp4 nGrkPbbeqvangr;\nhavsbez zng4 hCZIZngevk;\ninelvat irp2 i_grkpbbeq0;\nibvq znva()\n{\n  // ty_Cbfvgvba = hCZIZngevk * nCbfvgvba;\n  ty_Cbfvgvba = nCbfvgvba;\n  i_grkpbbeq0 = nGrkPbbeqvangr.kl;\n}", t.diffBlurFS = "cerpvfvba zrqvhzc sybng;\nhavsbez fnzcyre2Q hGrkgher;\ninelvat irp2 i_grkpbbeq0;\nhavsbez fnzcyre2Q oyheGrkgher;\nibvq znva(ibvq) {\n  irp4 vPbybe = grkgher2Q(oyheGrkgher, i_grkpbbeq0);\n  irp4 zrnaPbybe = grkgher2Q(hGrkgher, i_grkpbbeq0);\n  irp4 qvssPbybe = vPbybe - zrnaPbybe;\n  qvssPbybe.e = zva(qvssPbybe.e * 50.0 * qvssPbybe.e, 1.0);\n  qvssPbybe.t = zva(qvssPbybe.t * 50.0 * qvssPbybe.t, 1.0);\n  qvssPbybe.o = zva(qvssPbybe.o * 50.0 * qvssPbybe.o, 1.0);\n  ty_SentPbybe = irp4(qvssPbybe.eto, 1.0);\n}", t.mixBlurVS = "\nnggevohgr irp4 nCbfvgvba;\nnggevohgr irp4 nGrkPbbeqvangr;\ninelvat irp2 i_grkpbbeq0;\nhavsbez sybng jvqguBssfrg;\nhavsbez sybng urvtugBssfrg;\ninelvat irp2 grkgherFuvsg_1;\ninelvat irp2 grkgherFuvsg_2;\ninelvat irp2 grkgherFuvsg_3;\ninelvat irp2 grkgherFuvsg_4;\nibvq znva()\n{\n  ty_Cbfvgvba = nCbfvgvba;\n  i_grkpbbeq0 = nGrkPbbeqvangr.kl;\n  grkgherFuvsg_1 = irp2(i_grkpbbeq0 + 0.5 * irp2(jvqguBssfrg,urvtugBssfrg));\n  grkgherFuvsg_2 = irp2(i_grkpbbeq0 + 0.5 * irp2(-jvqguBssfrg,-urvtugBssfrg));\n  grkgherFuvsg_3 = irp2(i_grkpbbeq0 + 0.5 * irp2(-jvqguBssfrg,urvtugBssfrg));\n  grkgherFuvsg_4 = irp2(i_grkpbbeq0 + 0.5 * irp2(jvqguBssfrg,-urvtugBssfrg));\n}\n", t.mixBlurFS = "\ncerpvfvba zrqvhzc sybng;\nhavsbez fnzcyre2Q hGrkgher;\ninelvat irp2 i_grkpbbeq0;\nhavsbez fnzcyre2Q oyheGrkgher;\nhavsbez fnzcyre2Q oyheQvssGrkgher;\nhavsbez ybjc sybng oyheNycun;\nibvq znva(ibvq) {\n  ybjc irp4 vPbybe = grkgher2Q(hGrkgher, i_grkpbbeq0);\n  ybjc irp4 zrnaPbybe = grkgher2Q(oyheGrkgher, i_grkpbbeq0);\n  ybjc irp4 inePbybe = grkgher2Q(oyheQvssGrkgher, i_grkpbbeq0);\n  ybjc sybng nycun = oyheNycun * 1.0;\n  ybjc sybng gurgn = 0.1;\n  zrqvhzc sybng c = pynzc((zva(vPbybe.e, zrnaPbybe.e - 0.1) - 0.2) * 4.0, 0.0, 1.0);\n  zrqvhzc sybng zrnaIne = znk(znk(inePbybe.e, inePbybe.t), inePbybe.o);\n  zrqvhzc sybng xZva = 0.1;\n  ybjc irp3 erfhygPbybe;\n  xZva = (1.0 - zrnaIne / (zrnaIne + gurgn)) * c * nycun;\n  erfhygPbybe = zvk(vPbybe.eto, zrnaPbybe.eto, xZva);\n  erfhygPbybe = zvk(vPbybe.eto, erfhygPbybe, zva(1.0,nycun));\n  ty_SentPbybe = irp4(erfhygPbybe,1.0);\n}", t.lightEnhanceVS = "\nnggevohgr irp4 nCbfvgvba;\nnggevohgr irp4 nGrkPbbeqvangr;\nhavsbez sybng grkryJvqgu;\nhavsbez sybng grkryUrvtug;\ninelvat irp2 grkgherPbbeqvangr[9];\ninelvat irp2 grkgherPbbeqvangr2;\nhavsbez zng4 hCZIZngevk;\nibvq znva(){\n    ty_Cbfvgvba = hCZIZngevk * nCbfvgvba;\n    grkgherPbbeqvangr2 = nGrkPbbeqvangr.kl;\n    grkgherPbbeqvangr[0] = nGrkPbbeqvangr.kl;\n    irp2 jvqguFgrc = irp2(grkryJvqgu, 0.0);\n    irp2 urvtugFgrc = irp2(0.0, grkryUrvtug);\n    irp2 jvqguUrvtugFgrc = irp2(grkryJvqgu, grkryUrvtug);\n    irp2 jvqguArtngvirUrvtugFgrc = irp2(grkryJvqgu, -grkryUrvtug);\n    \n    grkgherPbbeqvangr[0] = nGrkPbbeqvangr.kl;\n    grkgherPbbeqvangr[1] = nGrkPbbeqvangr.kl - jvqguFgrc;\n    grkgherPbbeqvangr[2] = nGrkPbbeqvangr.kl + jvqguFgrc;\n    \n    grkgherPbbeqvangr[3] = nGrkPbbeqvangr.kl - urvtugFgrc;\n    grkgherPbbeqvangr[4] = nGrkPbbeqvangr.kl - jvqguUrvtugFgrc;\n    grkgherPbbeqvangr[5] = nGrkPbbeqvangr.kl + jvqguArtngvirUrvtugFgrc;\n    \n    grkgherPbbeqvangr[6] = nGrkPbbeqvangr.kl + urvtugFgrc;\n    grkgherPbbeqvangr[7] = nGrkPbbeqvangr.kl - jvqguArtngvirUrvtugFgrc;\n    grkgherPbbeqvangr[8] = nGrkPbbeqvangr.kl + jvqguUrvtugFgrc;\n}\n", t.lightEnhanceFS = "cerpvfvba uvtuc sybng;\ninelvat uvtuc irp2 grkgherPbbeqvangr[9];\ninelvat uvtuc irp2 grkgherPbbeqvangr2;\nhavsbez fnzcyre2Q hGrkgher;\nhavsbez fnzcyre2Q vachgVzntrGrkgher2;\nhavsbez uvtuc zng3 zngLHIgbETO;\nhavsbez uvtuc zng3 zngETOgbLHI;\nhavsbez sybng hVagrafvgl;\npbafg irp3 pbzcIrp = irp3(-0.0/255.0, -128.0/255.0, -128.0/255.0);\nirp4 eto2lhi(irp4 vachgETO) {\n    irp3 bhgchgLHI;\n    bhgchgLHI = zngETOgbLHI * vachgETO.eto;\n    bhgchgLHI -= pbzcIrp;\n    erghea irp4(pynzc(bhgchgLHI,\n                        irp3(0.0, 0.0, 0.0),\n                        irp3(1.0, 1.0, 1.0)),\n                        vachgETO.n);\n}\nirp2 fnghengvba(irp2 bet, sybng snpgbe) {\n    irp2 zbq = irp2((bet.k - 128.0/255.0) * snpgbe + 128.0/255.0,\n                    (bet.l - 128.0/255.0) * snpgbe + 128.0/255.0);\n    erghea pynzc(zbq, irp2(0.0, 0.0), irp2(1.0, 1.0));\n}\nirp4 lhi2eto(irp4 vachgLHI) {\n    irp3 bhgchgETO;\n    vachgLHI.eto += pbzcIrp;\n    bhgchgETO = zngLHIgbETO * vachgLHI.eto;\n    erghea irp4(pynzc(bhgchgETO,\n                        irp3(0.0, 0.0, 0.0),\n                        irp3(1.0, 1.0, 1.0)),\n                        vachgLHI.n);\n}\nibvq znva(){\n    irp4 lhi[9];\n    sbe(vag v = 0; v < 9; v++){\n        lhi[v] = eto2lhi(grkgher2Q(hGrkgher, grkgherPbbeqvangr[v]));\n    }\n    sybng fzbbguL = 0.0;\n    fzbbguL += 1.0*lhi[4].e + 2.0*lhi[3].e + 1.0*lhi[5].e;\n    fzbbguL += 2.0*lhi[1].e + 4.0*lhi[0].e + 2.0*lhi[2].e;\n    fzbbguL += 1.0*lhi[7].e + 2.0*lhi[6].e + 1.0*lhi[8].e;\n    fzbbguL = fzbbguL / 16.0;\n    sybng bhgchgL = grkgher2Q(vachgVzntrGrkgher2, irp2(fzbbguL, lhi[0].e)).e;\n    irp3 arjLHI = irp3(zvk(fzbbguL, bhgchgL, hVagrafvgl), lhi[0].to);\n    ty_SentPbybe = lhi2eto(irp4(arjLHI.eto, lhi[0].n));\n}\n" }, "5647": function _(A, r, o) { "use strict"; var n, s = this && this.__extends || (n = function i(e, t) { return (n = Object.setPrototypeOf || { "__proto__": [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var A in t) Object.prototype.hasOwnProperty.call(t, A) && (e[A] = t[A]) })(e, t) }, function (e, A) { if ("function" != typeof A && null !== A) throw new TypeError("Class extends value " + String(A) + " is not a constructor or null"); function t() { this.constructor = e } n(e, A), e.prototype = null === A ? Object.create(A) : (t.prototype = A.prototype, new t) }), a = this && this.__importDefault || function (e) { return e && e.__esModule ? e : { "default": e } }; Object.defineProperty(r, "__esModule", { "value": !0 }); var c = a(o(289)), g = o(8451), u = function (t) { function e(e, A, r) { var i = t.call(this, e, A, r) || this; return i.width = A, i.height = r, i.type = "SharpnessShader", i.uIntensity = null, i.sharpenIntensity = .5, i.program = i.makeProgram(g.sharpnessVS, g.sharpnessFS), i } return s(e, t), e.prototype.setEffectConfig = function (e) { isNaN(e.sharpenIntensity) || (this.sharpenIntensity = e.sharpenIntensity / 100) }, e.prototype.render = function () { this.gl.uniform1f(this.uIntensity, .5 * this.sharpenIntensity) }, e.prototype.resetResolution = function (e, t) { this.width = e || this.width, this.height = t || this.height, this.setConstUniforms() }, e.prototype.setConstUniforms = function () { var e = this.width, t = this.height, A = this.program; if (A) { var r = this.gl; r.useProgram(A); var i = r.getUniformLocation(A, "imageWidthFactor"); r.uniform1f(i, 1 / e); var o = r.getUniformLocation(A, "imageHeightFactor"); r.uniform1f(o, 1 / t), this.uIntensity = r.getUniformLocation(A, "sharpness"), r.uniform1f(this.uIntensity, .5 * this.sharpenIntensity) } }, e }(c.default); r.default = u }, "2742": function _(e, r, o) { "use strict"; var n, s = this && this.__extends || (n = function i(e, t) { return (n = Object.setPrototypeOf || { "__proto__": [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var A in t) Object.prototype.hasOwnProperty.call(t, A) && (e[A] = t[A]) })(e, t) }, function (e, A) { if ("function" != typeof A && null !== A) throw new TypeError("Class extends value " + String(A) + " is not a constructor or null"); function t() { this.constructor = e } n(e, A), e.prototype = null === A ? Object.create(A) : (t.prototype = A.prototype, new t) }), a = this && this.__awaiter || function (e, t, A, r) { return new (A || (A = Promise))(function (i, o) { function n(e) { try { a(r.next(e)) } catch (e) { o(e) } } function s(e) { try { a(r.throw(e)) } catch (e) { o(e) } } function a(e) { var t; e.done ? i(e.value) : (t = e.value, t instanceof A ? t : new A(function (e) { e(t) })).then(n, s) } a((r = r.apply(e, t || [])).next()) }) }, c = this && this.__generator || function (e, t) { var A, r, i, o, n = { "label": 0, "sent": function sent() { if (1 & i[0]) throw i[1]; return i[1] }, "trys": [], "ops": [] }; return o = { "next": s(0), "throw": s(1), "return": s(2) }, "function" == typeof Symbol && (o[Symbol.iterator] = function () { return this }), o; function s(s) { return function (a) { return function (s) { if (A) throw new TypeError("Generator is already executing."); for (; o && (o = 0, s[0] && (n = 0)), n;)try { if (A = 1, r && (i = 2 & s[0] ? r.return : s[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, s[1])).done) return i; switch (r = 0, i && (s = [2 & s[0], i.value]), s[0]) { case 0: case 1: i = s; break; case 4: return n.label++, { "value": s[1], "done": !1 }; case 5: n.label++, r = s[1], s = [0]; continue; case 7: s = n.ops.pop(), n.trys.pop(); continue; default: if (!((i = (i = n.trys).length > 0 && i[i.length - 1]) || 6 !== s[0] && 2 !== s[0])) { n = 0; continue } if (3 === s[0] && (!i || s[1] > i[0] && s[1] < i[3])) { n.label = s[1]; break } if (6 === s[0] && n.label < i[1]) { n.label = i[1], i = s; break } if (i && n.label < i[2]) { n.label = i[2], n.ops.push(s); break } i[2] && n.ops.pop(), n.trys.pop(); continue }s = t.call(e, n) } catch (e) { s = [6, e], r = 0 } finally { A = i = 0 } if (5 & s[0]) throw s[1]; return { "value": s[0] ? s[1] : void 0, "done": !0 } }([s, a]) } } }, g = this && this.__importDefault || function (e) { return e && e.__esModule ? e : { "default": e } }; Object.defineProperty(r, "__esModule", { "value": !0 }), r.PUBLISH_SET_BEAUTY_EFFECT = void 0; var u = g(o(7415)), l = g(o(3802)), h = o(8933), d = o(8250), C = h.errorCodeList.VIDEO_TRACK_NOT_READABLE, I = h.errorCodeList.VIDEO_TRACK_OVERLOAD, E = { "errorCode": C.code, "extendedData": C.message }, p = { "errorCode": I.code, "extendedData": I.message }; r.PUBLISH_SET_BEAUTY_EFFECT = "zc.p.0.sbe.1"; var f = function (e) { function t(t, r) { var i = e.call(this) || this; return i.logger = t, i.kind = "video", i._enabled = !1, i.lastRenderTime = 0, i.stateFlag = { "base": !1, "lowLight": !1 }, i.isStarting = !1, i.animationFrameId = 0, i.backgroundLoop = null, i.eventHandler = { "visibilitychange": function visibilitychange() { if (document.hidden) { !function A() { return a(i, void 0, void 0, function () { return c(this, function (e) { switch (e.label) { case 0: return this.backgroundLoop = window.setTimeout(A, Math.floor(1e3 / this.fps)), !document.hidden && this.backgroundLoop ? (clearTimeout(this.backgroundLoop), this.backgroundLoop = null, [2]) : [4, this.renderAFrame()]; case 1: return e.sent(), [2] } }) }) }() } else i.backgroundLoop && (clearTimeout(i.backgroundLoop), i.backgroundLoop = null) } }, i.setInput(r, !0), i.fps = 15, i.detector = new u.default(t), i.backgroundLoop && clearTimeout(i.backgroundLoop), i.backgroundLoop = null, i.lastRenderTime = 0, i.manager = new l.default(t), i.manager.onRenderError = function (e) { 1103072 === e.errorCode && i.stopEffect(), i.onError(e) }, i } return s(t, e), Object.defineProperty(t.prototype, "enabled", { "get": function get() { return this._enabled }, "set": function set(e) { this._enabled = e }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(t.prototype, "output", { "get": function get() { return this._output || this.input || null }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(t.prototype, "options", { "get": function get() { return this.manager.effectConfig || {} }, "enumerable": !1, "configurable": !0 }), t.prototype.setBeautyEffectOptions = function (e, t) { return void 0 === t && (t = {}), a(this, void 0, void 0, function () { return c(this, function (A) { switch (A.label) { case 0: return e && this.manager.setEffectConfig(t), this.enabled === e ? [3, 6] : (this.manager.setEnableBeauty(e), this.enabled !== e && this.logger.info(r.PUBLISH_SET_BEAUTY_EFFECT + " effect enabled " + e + "; options: " + JSON.stringify(t)), this.enabled = e, e ? this.input ? [4, this.startEffect()] : [3, 2] : [3, 3]); case 1: A.sent(), A.label = 2; case 2: return [3, 5]; case 3: return [4, this.stopEffect()]; case 4: A.sent(), A.label = 5; case 5: A.label = 6; case 6: return [2] } }) }) }, t.prototype.startEffect = function () { return a(this, void 0, void 0, function () { var e, A, i = this; return c(this, function (t) { switch (t.label) { case 0: return this.isStarting = !0, this.logger.info(r.PUBLISH_SET_BEAUTY_EFFECT + " call start effect"), this.input ? this.input && this._output && this.input !== this._output ? (this.logger.warn(r.PUBLISH_SET_BEAUTY_EFFECT + " video effect is already enabled"), [2]) : [4, this.startWebGLProcessor().catch(function (e) { throw i.stopEffect(), e })] : (this.logger.error(r.PUBLISH_SET_BEAUTY_EFFECT + " start effect failed, input track is null"), [2]); case 1: return e = t.sent(), [4, this.updateOutput(e)]; case 2: return t.sent(), this.enabled = !0, this.logger.info(r.PUBLISH_SET_BEAUTY_EFFECT + " start effect success"), this.detector.startRecordBeautyEffectOutput(this.fps).then(function (e) { !e.result && i.onError && i.onError(p, { "targetFPS": e.targetFPS, "currentFPS": e.currentFPS }) }), A = function t() { return a(i, void 0, void 0, function () { return c(this, function (e) { switch (e.label) { case 0: return this.enabled && (this.animationFrameId = requestAnimationFrame(A)), [4, this.renderAFrame()]; case 1: return e.sent(), [2] } }) }) }, this.animationFrameId = requestAnimationFrame(A), document.addEventListener("visibilitychange", this.eventHandler.visibilitychange, !1), this.isStarting = !1, [2] } }) }) }, t.prototype.renderAFrame = function () { return a(this, void 0, void 0, function () { var e, t, A; return c(this, function (r) { switch (r.label) { case 0: return e = Date.now(), t = 1e3 / this.fps, (A = this.lastRenderTime ? e - this.lastRenderTime : t) >= t ? (this.lastRenderTime = e - (A - t), this.videoEl && this.videoEl.paused && this.videoEl.play(), this.enabled && this.videoEl ? this.videoEl.videoWidth > 6 && this.videoEl.videoHeight > 6 ? [4, this.manager.render(this.videoEl)] : [3, 2] : [3, 3]) : [3, 3]; case 1: r.sent(), r.label = 2; case 2: this._output && this._output.requestFrame && this._output.requestFrame(), this.detector.addFrame(), r.label = 3; case 3: return [2] } }) }) }, t.prototype.stopEffect = function () { return a(this, void 0, void 0, function () { var e = this; return c(this, function (t) { switch (t.label) { case 0: return this.enabled = !1, this.logger.info(r.PUBLISH_SET_BEAUTY_EFFECT + " call stop effect"), this.animationFrameId && (cancelAnimationFrame(this.animationFrameId), this.animationFrameId = 0), this.detector.stopRecordBeautyEffectOutput(), this.manager.release(), [4, this.updateOutput()]; case 1: return t.sent(), void 0 === this.removeDomTimer && (this.removeDomTimer = window.setTimeout(function () { !1 === e.enabled && e.destroy() }, 18e4)), document.removeEventListener("visibilitychange", this.eventHandler.visibilitychange), [2] } }) }) }, t.prototype.destroy = function () { this.logger.info(r.PUBLISH_SET_BEAUTY_EFFECT + " destroy hidden elements"), this.canvasEl && this.canvasEl.remove(), this.videoEl && this.videoEl.remove(), this.videoEl = this.canvasEl = void 0, this.removeDomTimer && (clearTimeout(this.removeDomTimer), this.removeDomTimer = void 0) }, t.prototype.startWebGLProcessor = function () { return a(this, void 0, void 0, function () { var e, t, A, i, o = this; return c(this, function (n) { switch (n.label) { case 0: return this.input ? (this.logger.info(r.PUBLISH_SET_BEAUTY_EFFECT + " start webgl processor"), this.removeDomTimer && (clearTimeout(this.removeDomTimer), this.removeDomTimer = void 0), this.canvasEl && this.videoEl ? [3, 2] : (this.logger.info(r.PUBLISH_SET_BEAUTY_EFFECT + " create elements"), this.canvasEl && (this.canvasEl.remove(), this.canvasEl = void 0), this.videoEl && (this.videoEl.remove(), this.videoEl = void 0), this.canvasEl = document.createElement("canvas"), this.videoEl = document.createElement("video"), this.videoEl.setAttribute("autoplay", ""), this.videoEl.setAttribute("muted", ""), this.videoEl.muted = !0, this.videoEl.setAttribute("playsinline", ""), this.videoEl.setAttribute("style", "display:none"), e = new Promise(function (e, t) { var A = null; o.videoEl && o.videoEl.addEventListener("playing", function r() { A && clearTimeout(A), o.videoEl && o.videoEl.removeEventListener("playing", r), e(void 0) }), A = window.setTimeout(function () { o.logger.warn(r.PUBLISH_SET_BEAUTY_EFFECT + " video track error"), t(E) }, 1e3) }), this.videoEl.srcObject = new MediaStream([this.input]), this.videoEl.play(), [4, e])) : (this.logger.error(r.PUBLISH_SET_BEAUTY_EFFECT + " input track is null"), [2]); case 1: n.sent(), n.label = 2; case 2: if (t = this.input.getSettings(), A = t.width || this.videoEl.videoWidth, i = t.height || this.videoEl.videoHeight, t.frameRate && this.fps !== t.frameRate && (this.fps = t.frameRate, this.logger.info(r.PUBLISH_SET_BEAUTY_EFFECT + " set target fps: " + this.fps)), this.logger.info(r.PUBLISH_SET_BEAUTY_EFFECT + " beauty video processor: width " + t.width + " height " + t.height), !A || !i) throw this.logger.error(r.PUBLISH_SET_BEAUTY_EFFECT + " resolution of track is wrong"), E; return this.canvasEl.width = A, this.canvasEl.height = i, this.videoEl.setAttribute("width", A.toString()), this.videoEl.setAttribute("height", i.toString()), this.manager.init(A, i, this.canvasEl), [2, this.canvasEl.captureStream().getVideoTracks()[0]] } }) }) }, t.prototype.setInput = function (e, t) { return void 0 === t && (t = !1), a(this, void 0, void 0, function () { var A, i; return c(this, function (o) { switch (o.label) { case 0: return e && e !== this.input ? e.kind !== this.kind ? (this.logger.error(r.PUBLISH_SET_BEAUTY_EFFECT + " kind of track is not video"), [2]) : (this._output && this.input === this._output && this.logger.error(r.PUBLISH_SET_BEAUTY_EFFECT + " input track is same as effect track"), this.logger.info(r.PUBLISH_SET_BEAUTY_EFFECT + " change input track"), t ? this.input ? [4, this.removeInput()] : [3, 2] : [3, 5]) : [3, 7]; case 1: o.sent(), o.label = 2; case 2: return this.input = e, this.enabled && !this.videoEl ? [4, this.startEffect()] : [3, 4]; case 3: o.sent(), o.label = 4; case 4: return [3, 7]; case 5: return this.input = e, (A = this.videoEl) && (A.srcObject ? ((i = A.srcObject).getTracks().forEach(function (e) { return i.removeTrack(e) }), i.addTrack(this.input)) : A.srcObject = new MediaStream([this.input]), A.play()), this._output ? [3, 7] : [4, this.onOutputChange()]; case 6: o.sent(), o.label = 7; case 7: return [2] } }) }) }, t.prototype.removeInput = function () { return a(this, void 0, void 0, function () { return c(this, function (e) { switch (e.label) { case 0: return this.input = void 0, [4, this.stopEffect()]; case 1: return e.sent(), [2] } }) }) }, t.prototype.updateOutput = function (e) { return a(this, void 0, void 0, function () { return c(this, function (t) { switch (t.label) { case 0: return this._output === e ? [3, 3] : (this._output = e, this.onOutputChange ? [4, this.onOutputChange(this._output)] : [3, 2]); case 1: t.sent(), t.label = 2; case 2: t.label = 3; case 3: return [2] } }) }) }, t.prototype.onOutputChange = function (e) { var t; return a(this, void 0, void 0, function () { return c(this, function (A) { switch (A.label) { case 0: return [4, null === (t = this.next) || void 0 === t ? void 0 : t.setInput(e || this.input || null)]; case 1: return A.sent(), [2] } }) }) }, t.prototype.onError = function (e, t) { }, t }(d.VideoNode); r.default = f }, "4259": function _(e, t) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.AudioNodeQueue = void 0; var A = function () { function A(e, t) { this.source = e, this.destination = t, this.audioNodeList = [], this.source.disconnect(), this.source.connect(this.destination) } return Object.defineProperty(A.prototype, "destinationNode", { "get": function get() { return this.destination }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "lastNode", { "get": function get() { return this.isEmpty() ? null : this.audioNodeList[this.audioNodeList.length - 1] }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "secondToLastNode", { "get": function get() { return this.audioNodeList.length < 2 ? null : this.audioNodeList[this.audioNodeList.length - 2] }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "firstNode", { "get": function get() { return this.isEmpty() ? null : this.audioNodeList[0] }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "secondNode", { "get": function get() { return this.audioNodeList.length < 2 ? null : this.audioNodeList[1] }, "enumerable": !1, "configurable": !0 }), A.prototype.pushBack = function (e) { this.lastNode ? (this.lastNode.disconnect(), this.lastNode.connect(e), e.connect(this.destination)) : (this.source.disconnect(), this.source.connect(e), e.connect(this.destination)), this.audioNodeList.push(e) }, A.prototype.popBack = function () { this.lastNode && (this.lastNode.disconnect(), this.secondToLastNode ? (this.secondToLastNode.disconnect(), this.secondToLastNode.connect(this.destination)) : (this.source.disconnect(), this.source.connect(this.destination))), this.audioNodeList.pop() }, A.prototype.pushFront = function (e) { this.source.disconnect(), this.source.connect(e), e.connect(this.firstNode ? this.firstNode : this.destination), this.audioNodeList.unshift(e) }, A.prototype.popFront = function () { this.source.disconnect(), this.firstNode && (this.firstNode.disconnect(), this.source.connect(this.secondNode ? this.secondNode : this.destination)), this.audioNodeList.shift() }, A.prototype.remove = function (e) { var t = this.audioNodeList.indexOf(e); if (-1 !== t) { if (e.disconnect(), t - 1 >= 0) { var A = this.audioNodeList[t - 1]; A.disconnect(), A.connect(this.lastNode != e ? this.audioNodeList[t + 1] : this.destination) } else this.source.disconnect(), this.source.connect(this.lastNode != e ? this.audioNodeList[t + 1] : this.destination); this.audioNodeList.splice(t, 1) } }, A.prototype.isConnected = function (e) { return -1 !== this.audioNodeList.indexOf(e) }, A.prototype.isEmpty = function () { return 0 === this.audioNodeList.length }, A.prototype.replaceSource = function (e) { this.source.disconnect(), e.connect(this.firstNode ? this.firstNode : this.destination), this.source = e }, A.prototype.replaceDestination = function (e) { this.lastNode ? (this.lastNode.disconnect(), this.lastNode.connect(e)) : (this.source.disconnect(), this.source.connect(e)), this.destination = e }, A }(); t.AudioNodeQueue = A }, "4028": function _(e, t, r) { "use strict"; var i = this && this.__assign || function () { return (i = Object.assign || function (e) { for (var t, A = 1, r = arguments.length; A < r; A++)for (var i in t = arguments[A]) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]); return e }).apply(this, arguments) }, o = this && this.__awaiter || function (e, t, A, r) { return new (A || (A = Promise))(function (i, o) { function n(e) { try { a(r.next(e)) } catch (e) { o(e) } } function s(e) { try { a(r.throw(e)) } catch (e) { o(e) } } function a(e) { var t; e.done ? i(e.value) : (t = e.value, t instanceof A ? t : new A(function (e) { e(t) })).then(n, s) } a((r = r.apply(e, t || [])).next()) }) }, n = this && this.__generator || function (e, t) { var A, r, i, o, n = { "label": 0, "sent": function sent() { if (1 & i[0]) throw i[1]; return i[1] }, "trys": [], "ops": [] }; return o = { "next": s(0), "throw": s(1), "return": s(2) }, "function" == typeof Symbol && (o[Symbol.iterator] = function () { return this }), o; function s(s) { return function (a) { return function (s) { if (A) throw new TypeError("Generator is already executing."); for (; o && (o = 0, s[0] && (n = 0)), n;)try { if (A = 1, r && (i = 2 & s[0] ? r.return : s[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, s[1])).done) return i; switch (r = 0, i && (s = [2 & s[0], i.value]), s[0]) { case 0: case 1: i = s; break; case 4: return n.label++, { "value": s[1], "done": !1 }; case 5: n.label++, r = s[1], s = [0]; continue; case 7: s = n.ops.pop(), n.trys.pop(); continue; default: if (!((i = (i = n.trys).length > 0 && i[i.length - 1]) || 6 !== s[0] && 2 !== s[0])) { n = 0; continue } if (3 === s[0] && (!i || s[1] > i[0] && s[1] < i[3])) { n.label = s[1]; break } if (6 === s[0] && n.label < i[1]) { n.label = i[1], i = s; break } if (i && n.label < i[2]) { n.label = i[2], n.ops.push(s); break } i[2] && n.ops.pop(), n.trys.pop(); continue }s = t.call(e, n) } catch (e) { s = [6, e], r = 0 } finally { A = i = 0 } if (5 & s[0]) throw s[1]; return { "value": s[0] ? s[1] : void 0, "done": !0 } }([s, a]) } } }; Object.defineProperty(t, "__esModule", { "value": !0 }), t.getUserMedia = t.createCanvasEle = t.createVideoEle = t.getVersionNumber = t.getBrowserAndVersion = t.getBitCode = t.getChromeVer = t.getPlaySourceType = t.generaStreamSid = t.assignPartialObject = t.ClientUtil = void 0; var s = r(5123), a = r(1586), c = r(120), g = function () { function A() { } return A.checkIllegalCharacters = function (e) { return /^([0-9a-zA-Z#!$%&()`'+-;<=.>@^_~,\\*])+$/.test(e) && /^[^:/]*$/g.test(e) }, A.isUrl = function (e) { return !!(e.startsWith("rtmp://") || e.startsWith("avertp://") || e.startsWith("https://") && e.endsWith(".flv") || e.startsWith("https://") && e.endsWith(".m3u8")) }, A.registerCallback = function (e, t, A) { t.success && (A[e + "SuccessCallback"] = t.success), t.error && (A[e + "ErrorCallback"] = t.error) }, A.actionErrorCallback = function (e, t) { return t[e + "ErrorCallback"] }, A.actionSuccessCallback = function (e, t) { return t[e + "SuccessCallback"] }, A.logReportCallback = function (e, t, r, i) { A.registerCallback(e, { "success": function success(e, i) { for (var o = [], n = 2; n < arguments.length; n++)o[n - 2] = arguments[n]; A.dataReportEvent(t, r, e, i, o) } }, i) }, A.actionLogReportCallback = function (e, t, r, i, o) { A.actionSuccessCallback(e, t) && A.actionSuccessCallback(e, t)(r, i) }, A.getServerError = function (e, t, A) { if (t) return { "code": e, "message": A || "liveroom error" }; var r = { "1": "parse json error.", "1001": "login is processing.", "1002": "liveroom request error.", "1003": "zpush connect fail.", "1004": "zpush handshake fail.", "1005": "zpush login fail.", "1006": "user login state is wrong.", "1007": "got no zpush addr", "1008": "token error", "1009": "dispatch error", "1010": "token expired", "1011": "token format error", "1013": "token03 format error", "2002": "biz channel error", "1000000000": "liveroom cmd error, code:", "1000002001": "need relogin", "1000002002": "third token auth error", "1000002003": "token nonce type should be int64", "1000002004": "token appid type  should be uint32", "1000002005": "token timeout type should be int64", "1000002006": "token user_id type should be string", "1000002007": "token room_id type should be string", "1000002008": "token format error", "1000002009": "token privilege type should be map", "1000002010": "token expire_time type should be int64", "1000002011": "token user_id type should be string", "1000002012": "token not exist", "1000002013": "token update error", "1000002014": "token not need to check" }; if (0 === e) return { "code": 0, "message": "" }; var i = { "code": 0, "message": "liveroom cmd error" }; if (i.code = e, e > 1e9) { var o = r[e]; i.message = o ? "liveroom cmd error, code: " + e + ", message: " + o : r[1e9] + e } else i.message = r[e] ? r[e] + " code:" + e : "unknown error code:" + e; return i }, A.unregisterCallback = function (e, t) { delete t[e + "SuccessCallback"], delete t[e + "ErrorCallback"] }, A.decodeServerError = function (e, t) { var A = { "code": -1, "message": "server error" }; return e > 1e9 && (A.code = e - 1e9 + 52e6), t && (A.message = t), A }, A.getLiveRoomError = function (e, t) { var A = { "1016": "MULTI_ROOM_UNABLE", "1105": "ROOM_MAX_USER_COUNT", "1012": "PUBLISHER_ERROR_REPETITIVE_PUBLISH_STREAM", "2002": "TOKEN_ERROR", "2003": "ROOM_ERROR_LOGIN_TIMEOUT", "2010": "TOKEN_ERROR", "5022": "ROOM_COUNT_EXCEED" }; return t ? e > 2e5 && e < 3e5 ? A[e - 2e5] : e < 2e5 ? { "50116": "TOKEN_ERROR", "50117": "TOKEN_EXPIRED", "50118": "TOKEN_ERROR", "50119": "TOKEN_ERROR", "50120": "TOKEN_ERROR", "50121": "TOKEN_ERROR", "50122": "TOKEN_ERROR", "50123": "TOKEN_EXPIRED", "50124": "TOKEN_ERROR", "50125": "TOKEN_ERROR", "50126": "TOKEN_ERROR", "50127": "TOKEN_ERROR", "50128": "TOKEN_ERROR" }[e] || A[e] || "ROOM_INNER_ERROR" : A[e] || "ROOM_INNER_ERROR" : e > 1e9 ? A[e - 1e9] || "" : { "1": "PARSE_JSON_ERROR", "1001": "LOGIN_PROCESSING", "1002": "LIVEROMM_REQUEST_ERROR", "1003": "ZPUSH_REQUEST_FAIL", "1004": "ZPUSH_REQUEST_FAIL", "1005": "ZPUSH_REQUEST_FAIL", "1006": "LOGIN_STATE_WRONG", "1007": "ZPUSH_REQUEST_FAIL", "1008": "TOKEN_ERROR", "1009": "DIAPATCH_ERROR", "1010": "TOKEN_EXPIRED", "1011": "TOKEN_ERROR", "1012": "SUBCMD_ERROR", "1101": "ZEGO_AUTH_ERROR", "2001": "BIZ_CHANNEL_ERROR", "2002": "BIZ_CHANNEL_ERROR" }[e] || "ROOM_INNER_ERROR" }, A.getKickoutError = function (e) { var t = {}; switch (e) { case 1: t.code = 63000001, t.message = "zpush multiple login kickout", t.name = "MULTIPLE_LOGIN_KICKOUT"; break; case 2: t.code = 63000002, t.message = "zpush manual kickout", t.name = "MANUAL_KICKOUT"; break; case 3: t.code = 63000003, t.message = "kickout reason = " + e; break; case 4: t.code = 63000004, t.message = "zpush multiple login kickout", t.name = "MULTIPLE_LOGIN_KICKOUT"; break; case 5: t.code = 63000005, t.message = "zpush token expired", t.name = "TOKEN_EXPIRED"; break; default: t.code = e, t.message = "kickout reason = " + e }return t }, A.dataReportEvent = function (e, t, A, r, i) { switch (A) { case "eventStart": e.eventStart(t, r); break; case "eventEndWithMsgInfo": e.eventEndWithMsgInfo(t, r, i[0]); break; case "addEventMsg": e.addEventMsg(t, r, i[0], i[1]); break; case "addEvent": e.addEvent(t, r); break; case "eventEnd": e.eventEnd(t, r); break; case "addMsgInfo": e.addMsgInfo(t, i[0]) } }, A.isKeepTryLogin = function (e) { switch (e) { case 1002: case 1003: return !0; default: return !1 } }, A.mergeStreamList = function (e, t, A, r) { var i, o = [], n = [], s = []; A || (A = []); for (var a = 0; a < A.length; a++)if (A[a].anchor_id_name != e && A[a].id_name != e && A[a].user_id != e) { i = !1; for (var c = 0; c < t.length; c++)if (A[a].stream_id === t[c].stream_id) { A[a].extra_info !== t[c].extra_info && s.push(A[a]), i = !0; break } i || o.push(A[a]) } for (var g = 0; g < t.length; g++)if (t[g].anchor_id_name != e && t[g].id_name != e && t[g].user_id != e) { i = !1; for (var u = 0; u < A.length; u++)if (t[g].stream_id === A[u].stream_id) { i = !0; break } i || n.push(t[g]) } for (t.splice(0), a = 0; a < A.length; a++)t.push(A[a]); r(o, n, s) }, A.checkInteger = function (e, t) { return 0 == t ? "number" == typeof e && e % 1 == 0 && e >= 0 : "number" == typeof e && e % 1 == 0 && e > 0 }, A.checkValidNumber = function (e, t, A) { return t = null != t ? t : 1, A = null != A ? A : 1e4, "number" == typeof e && e % 1 == 0 && e >= t && e <= A }, A.uuid = function (e, t) { var A, r = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""), i = []; if (t = t || r.length, e) for (A = 0; A < e; A++)i[A] = r[0 | Math.random() * t]; else { var o = void 0; for (i[8] = i[13] = i[18] = i[23] = "-", i[14] = "4", A = 0; A < 36; A++)i[A] || (o = 0 | 16 * Math.random(), i[A] = r[19 == A ? 3 & o | 8 : o]) } return i.join("") }, A.getDevices = function (e, t) { void 0 !== navigator.mediaDevices && void 0 !== navigator.mediaDevices.enumerateDevices ? navigator.mediaDevices.enumerateDevices().then(function (t) { for (var A = [], r = [], i = [], o = 0; o < t.length; o++) { var n = t[o]; "audioinput" === n.kind && A.push({ "deviceName": n.label, "deviceID": n.deviceId }), "audiooutput" === n.kind && r.push({ "deviceName": n.label, "deviceID": n.deviceId }), "videoinput" === n.kind && i.push({ "deviceName": n.label, "deviceID": n.deviceId }) } e && e({ "microphones": A, "speakers": r, "cameras": i }) }).catch(function (e) { console.error("enumerate devices wrong " + e), t && t(a.ZegoRTCLogEvent.kZegoTaskEnumDevices.error.kEnumDevicesError) }) : t && t(a.ZegoRTCLogEvent.kZegoTaskEnumDevices.error.kBrowserNotSupportError) }, A.getPublisherStateType = function (e) { return 0 == e || 1 == e ? 0 == e ? "PUBLISHING" : "NO_PUBLISH" : "PUBLISH_REQUESTING" }, A.getPlayerStateType = function (e) { return 0 == e || 1 == e ? 0 == e ? "PLAYING" : "NO_PLAY" : "PLAY_REQUESTING" }, A.getSteamUpdateType = function (e) { return 0 == e ? "DELETE" : "ADD" }, A.getNetQuality = function (e, t, A) { return void 0 !== A ? .15 * this.calcQualityOfJitter(A) + .85 * Math.min(this.calcQualityOfRtt(e), this.calcQualityOfLostRate(t, !1)) : Math.min(this.calcQualityOfRtt(e), this.calcQualityOfLostRate(t, !0)) }, A.isIos = function () { return null !== navigator.platform.match("iPhone") }, A.isMacOs = function () { return null !== navigator.platform.match("Mac") }, A.isAndroid = function () { return null !== navigator.userAgent.match("Android") }, A.isWindows = function () { return null !== navigator.platform.match("Windows") }, A.isWin32 = function () { return null !== navigator.platform.match("Win32") && null === navigator.userAgent.match("WOW64") }, A.isLinux = function () { return null !== navigator.platform.match("Linux") }, A.getOsType = function () { return this.isIos() ? c.OSType.IOS : this.isAndroid() ? c.OSType.ANDROID : this.isMacOs() ? c.OSType.MAC : this.isWin32() ? c.OSType.WIN32 : c.OSType.UNKNOWN }, A.checkScreenParams = function (e, t) { if ("object" == (void 0 === e ? "undefined" : _typeof(e)) && void 0 !== e.videoQuality && !A.checkInteger(e.videoQuality)) return t(a.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError, " videoQuality must be integer number"), !1; if ("object" == (void 0 === e ? "undefined" : _typeof(e)) && void 0 !== e.sourceID && "string" != typeof e.sourceID) return t(a.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError, " sourceID must be string"), !1; if ("object" == (void 0 === e ? "undefined" : _typeof(e)) && 4 === e.videoQuality) { if (!A.checkCameraOrScreenBitRate(e.bitRate, t)) return !1; if (!A.checkParamsWithConstraintExtend(e, t)) return !1 } return !0 }, A.checkParamsWithConstraintExtend = function (e, t) { for (var r = 0, i = ["frameRate", "width", "height"]; r < i.length; r++) { var o = i[r], n = e[o]; if (void 0 === n) return t && t(a.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError, " ".concat(o, " is required when videoQuality is 4")), !1; if ("number" == typeof n && !A.checkInteger(n, !1)) return t && t(a.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError, " ".concat(o, " must be integer number")), !1; if ("number" == typeof n && ("width" === o || "height" === o) && n < 0) return t && t(a.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError, " ".concat(o, " must greater than 0.")), !1; if ("number" == typeof n && "width" === o && n > 7680) t && t(a.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError, " ".concat(o, " cannot greater than 7680.")); else if ("number" == typeof n && "height" === o && n > 4320) t && t(a.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError, " ".concat(o, " cannot greater than 4320.")); else if ("object" == (void 0 === n ? "undefined" : _typeof(n))) { if ("width" === o && !A.checkConstraintExtend(n, o, t, 0, 7680)) return !1; if ("height" === o && !A.checkConstraintExtend(n, o, t, 0, 4320)) return !1; if ("frameRate" === o && !A.checkConstraintExtend(n, o, t)) return !1 } else if ("number" != typeof n && "object" != (void 0 === n ? "undefined" : _typeof(n))) return t && t(a.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError, " ".concat(o, " must be number or object")), !1 } return !0 }, A.checkConstraintExtendWithMessage = function (e, t, r, i) { if ("object" != (void 0 === e ? "undefined" : _typeof(e))) return { "result": !1, "message": "Invalid constraint. Constraint Extend must be a object" }; if (0 === Object.keys(e).length) return { "result": !1, "message": "".concat(t, " can not be a empty object") }; for (var o = 0, n = ["exact", "ideal", "max", "min"]; o < n.length; o++) { var s = n[o], a = e[s]; if ("number" == typeof a && !A.checkInteger(a, !1)) return { "result": !1, "message": " ".concat(s, " of ").concat(t, " must be integer number") }; if ("number" == typeof r && "number" == typeof a && a < r) return { "result": !1, "message": " ".concat(s, " of ").concat(t, " must greater than ").concat(r) }; if ("number" == typeof i && "number" == typeof a && a > i) return { "result": !1, "message": " ".concat(s, " of ").concat(t, " cannot greater than ").concat(i) } } return { "result": !0, "message": "Constraint Extend OK." } }, A.checkConstraintExtend = function (e, t, r, i, o) { var n = A.checkConstraintExtendWithMessage(e, t, i, o); return n.result || r && r(a.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError, n.message), n.result }, A.checkBitRateLimit = function (e, t) { return !(e > 10240 && (t(a.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError, " bitrate cannot greater than 10 Mbps"), 1)) }, A.checkCameraOrScreenBitRate = function (e, t) { if (void 0 === e) return t(a.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError, " bitrate is required when videoQuality is 4"), !1; if ("number" == typeof e) { if (!A.checkValidNumber(e, 0, 10240)) return t(a.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError, " bitrate must be integer number"), !1; if (!A.checkBitRateLimit(e, t)) return !1 } else t(a.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError, " bitrate must be number"); return !0 }, A.checkCameraParams = function (e, t) { return !!A.checkParamsWithConstraintExtend(e, t) && !!A.checkCameraOrScreenBitRate(e.bitRate, t) }, A.isParamEmpty = function (e) { return null != e && "" !== e }, A.isTypeString = function (e) { return "string" == typeof e }, A.isTooLong = function (e, t) { return !(e.length >= t) }, A.isReDispatch = function (e) { var t = e.message.match(/action:(\d+)/), A = t ? Number(t[1]) : NaN; return [a.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kTTLOverTimeError, a.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kClientIPChangedError, a.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kTTLOverTimeError, a.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kClientIPChangedError].includes(e) || [6].includes(A) }, A.arrAvg = function (e, t, A) { return e.push(t), e.length > A && e.shift(), e.reduce(function (e, t) { return e + t }) / e.length }, A.calcQualityOfRtt = function (e) { return e < 600 ? 97 - Math.pow(.09 * e, 1.1) : 18 * Math.exp(.002 * (600 - e)) }, A.calcQualityOfJitter = function (e) { return e <= 50 ? 98 - Math.pow(e, 1.15) : s.QUALITY_CONSTANT.PoorMinQuality }, A.calcQualityOfLostRate = function (e, t) { if (t) return e <= 55 ? 99 - Math.pow(.8 * e, 1.18) : s.QUALITY_CONSTANT.PoorMinQuality; var A = 100 * e; return A <= 40 ? 96 - Math.pow(A, 1.22) : s.QUALITY_CONSTANT.PoorMinQuality }, A.quality2QualityGrade = function (e) { return e >= s.QUALITY_CONSTANT.ExcellentMinQuality ? s.QualityGrade.Excellent : e >= s.QUALITY_CONSTANT.GoodMinQuality ? s.QualityGrade.Good : e >= s.QUALITY_CONSTANT.MiddleMinQuality ? s.QualityGrade.Middle : e >= s.QUALITY_CONSTANT.PoorMinQuality ? s.QualityGrade.Poor : s.QualityGrade.Die }, A.isSupportEncodedTransforms = function () { var e = !!window.RTCRtpScriptTransform; if (!e) { var t = !!RTCRtpSender.prototype.createEncodedStreams, A = !1; try { new ReadableStream, A = !0 } catch (e) { console.error("Transferable streams are not supported.") } e = t && A } return e }, A.uint8arrayToBase64 = function (e) { for (var t, A = 0, r = e.length, i = ""; A < r;)t = e.subarray(A, Math.min(A + 32768, r)), i += String.fromCharCode.apply(null, Array.from(t)), A += 32768; return btoa(i) }, A.isMobile = function () { return !!(navigator.userAgent.match(/Mobi/i) || navigator.userAgent.match(/Android/i) || navigator.userAgent.match(/iPhone/i)) }, A }(); t.ClientUtil = g, t.assignPartialObject = function (e, t) { var A = {}; if (e) for (var r = 0, i = Object.keys(e); r < i.length; r++) { var o = i[r]; t.includes(o) || (A[o] = e[o]) } return A }, t.generaStreamSid = function (e, t, A) { var r = (new Date).getTime(), i = (0, s.getReportSeq)(); return function (e) { var t = 0; if (0 == e.length) return t; for (var A = 0; A < e.length; A++)t = (t << 5) - t + e.charCodeAt(A), t &= t; return t >>> 0 }("".concat(e, "_").concat(t, "_").concat(A, "_").concat(r, "_").concat(i)) }, t.getPlaySourceType = function (e) { var t = "rtc"; switch (e) { case 0: case 3: default: t = "rtc"; break; case 1: t = "cdn"; break; case 2: t = "l3" }return t }, t.getChromeVer = function () { var e = 0, t = (navigator.userAgent.toLowerCase().match(/chrome\/([\d.]+)/) || [])[1]; return t && (e = parseInt(t.split(",")[0])), e }, t.getBitCode = function (e, t) { return (e & 1 << t) >> t }, t.getBrowserAndVersion = function () { var e, t = navigator.userAgent, A = t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*([\d\.]+)/i) || []; return /trident/i.test(A[1]) ? { "name": "IE", "version": (e = /\brv[ :]+([\d\.]+)/g.exec(t) || [])[1] || "" } : "Chrome" === A[1] && null != (e = t.match(/\bOPR|Edge\/([\d\.]+)/)) ? { "name": "Opera", "version": e[1] } : (A = A[2] ? [A[1], A[2]] : [navigator.appName, navigator.appVersion, "-?"], null != (e = t.match(/version\/([\d+\.]+)/i)) && A.splice(1, 1, e[1]), { "name": A[0], "version": A[1] }) }, t.getVersionNumber = function (e) { return "string" != typeof e ? 0 : Number(e.split(".")[0]) || 0 }, t.createVideoEle = function (e, t) { var A = document.createElement("video"); return A.style.width = e + "px;", A.style.height = t + "px;", A.setAttribute("muted", ""), A.setAttribute("autoplay", ""), A.muted = !0, A.setAttribute("playsinline", ""), A.controls = !1, A }, t.createCanvasEle = function (e, t) { var A = document.createElement("canvas"); return A.width = e, A.height = t, A }, t.getUserMedia = function (e) { var t = this; return new Promise(function (A, r) { return o(t, void 0, void 0, function () { var t, o, s, a, c, g; return n(this, function (n) { switch (n.label) { case 0: t = [i({}, e), i(i({}, e), { "video": { "width": 360 } }), i(i({}, e), { "video": { "width": 640 } }), i(i({}, e), { "video": { "width": 720 } }), i(i({}, e), { "video": { "width": 854 } }), i(i({}, e), { "video": { "width": 1280 } })], o = null, s = null, a = 0, n.label = 1; case 1: if (!(a < t.length)) return [3, 6]; c = t[a], n.label = 2; case 2: return n.trys.push([2, 4, , 5]), [4, navigator.mediaDevices.getUserMedia(c)]; case 3: return o = n.sent(), [3, 6]; case 4: return g = n.sent(), s = g, [3, 5]; case 5: return a++, [3, 1]; case 6: return o ? A(o) : r(s), [2] } }) }) }) } }, "1807": function _(e, t) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.ErrorUtil = void 0; var A = function () { function A() { } return A.createError = function (e, t) { return { "code": e.code, "message": e.message + (t ? " " + t : "") } }, A }(); t.ErrorUtil = A }, "3774": function _(e, t) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }); var A = function () { function A() { this.handlerListMap = {} } return A.prototype.addEventHandler = function (e, t) { if (this.handlerListMap[e] || (this.handlerListMap[e] = []), "function" != typeof t) throw new Error("Params callBack is not a Function"); return -1 == this.handlerListMap[e].indexOf(t) && this.handlerListMap[e].push(t), !0 }, A.prototype.removeEventHandler = function (e, t) { return !!this.handlerListMap[e] && (this.handlerListMap[e] = t ? this.handlerListMap[e].filter(function (e) { return e !== t }) : [], !0) }, A.prototype.emit = function (e) { for (var t = [], A = 1; A < arguments.length; A++)t[A - 1] = arguments[A]; this.handlerListMap[e] && this.handlerListMap[e].forEach(function (A) { try { setTimeout(function () { A.apply(void 0, t) }, 0) } catch (t) { console.error('Fail to execute callback of event "'.concat(e, '" : ').concat(t)) } }) }, A }(); t.default = A }, "3171": function _(e, t) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.H264Parser = void 0; var A = function () { function A(e) { this.view = e, this.offset = 0, this.current_start_code_size = 0, this.current_nalu_start = 0, this.current_nalu_size = 0, this.start_code_size = 0, this.nalu_start = 0, this.left_size = 0, this.nalu_size = 0, this.left_size = e.byteLength } return A.prototype.FindStartCode = function () { var e = this.view.byteLength - this.offset; for (this.current_start_code_size = 0, this.current_nalu_start = -1; e >= 3;) { if (0 == this.view.getUint8(this.offset) && 0 == this.view.getUint8(this.offset + 1) && 1 == this.view.getUint8(this.offset + 2)) return this.current_start_code_size = 3, this.current_nalu_start = this.offset, this.offset - 1 >= 0 && 0 == this.view.getUint8(this.offset - 1) && (++this.current_start_code_size, --this.current_nalu_start), this.offset += 3, !0; --e, ++this.offset } return !1 }, A.prototype.FindNalu = function () { return this.start_code_size = 0, this.nalu_start = 0, this.nalu_size = 0, !(this.offset >= this.view.byteLength || !this.FindStartCode() || (this.start_code_size = this.current_start_code_size, this.nalu_start = this.current_nalu_start, 0)) }, A.prototype.NextNalu = function (e) { return this.start_code_size = 0, this.nalu_start = 0, this.nalu_size = 0, !(this.offset >= this.view.byteLength) && (!!this.FindStartCode() && (this.start_code_size = this.current_start_code_size, this.nalu_start = this.current_nalu_start, !(!e || 6 == (31 & this.view.getUint8(this.nalu_start + this.start_code_size))) || (this.FindStartCode() ? (this.offset = this.current_nalu_start, this.nalu_size = this.current_nalu_start - this.nalu_start, !0) : (this.nalu_size = this.view.byteLength - this.nalu_start, !0)))) }, A }(); t.H264Parser = A }, "120": function _(e, t) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.OSType = void 0, function (e) { e.WIN32 = "WIN32", e.MAC = "Mac", e.ANDROID = "Android", e.LINUX = "Linux", e.IOS = "iOS", e.UNKNOWN = "WTF" }(t.OSType || (t.OSType = {})) }, "2790": function _(e, t) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.RetryHandler = void 0; var A = function () { function A() { this.RETRY_MAX_TIME = 300, this.RETRY_START_TIME_INTERVAL = 4, this.RETRY_CONTINUE_COUNT = 2, this.RETRY_MAX_TIME_INTERVAL = 32, this.retryStartTime = 0, this.retryActiveCount = 1, this.retryNetCount = 0, this.retryNetMaxTimes = 3, this.isOverTime = !1 } return A.prototype.init = function (e, t, A, r) { this.invalid(), this.stopMaxTime(), this.isOverTime = !1, "number" == typeof e && e < 3600 && (this.RETRY_MAX_TIME = e), "number" == typeof t && (this.RETRY_START_TIME_INTERVAL = t), "number" == typeof A && (this.RETRY_CONTINUE_COUNT = A), "number" == typeof r && (this.RETRY_MAX_TIME_INTERVAL = r) }, A.prototype.invalid = function () { this.retryTimer && clearTimeout(this.retryTimer), this.retryTimer = null, this.startRetryTimer && clearTimeout(this.startRetryTimer), this.startRetryTimer = null, this.retryStartTime = 0, this.retryActiveCount = 1, this.retryNetCount = 0 }, A.prototype.isRetrying = function () { return null !== this.retryTimer || null !== this.startRetryTimer || null !== this.maxTimer }, A }(); t.RetryHandler = A }, "3332": function _(e, t, r) { "use strict"; var i = this && this.__spreadArray || function (e, t, A) { if (A || 2 === arguments.length) for (var r, i = 0, o = t.length; i < o; i++)!r && i in t || (r || (r = Array.prototype.slice.call(t, 0, i)), r[i] = t[i]); return e.concat(r || Array.prototype.slice.call(t)) }; Object.defineProperty(t, "__esModule", { "value": !0 }), t.SdpUtil = void 0; var o = r(5123), n = r(5123), s = function () { function A() { } return A.zegoSdp = function (e) { var t = e.split("\r\n"), A = [], r = []; t.forEach(function (e) { var t = e.match(/a=rtpmap:(\d+)\s+((H264\/90000)|(opus\/48000\/2))/); t && t[1] && t[2] && ("H264/90000" === t[2] && A.push(t[1]), "opus/48000/2" === t[2] && r.push(t[1])) }); var o = []; return t.map(function (e) { var t = !0, n = e.match(/((a=rtcp-fb:)|(a=rtpmap:)|(a=fmtp:))(\d+)/); if (n && n[5] && (i(i([], A, !0), r, !0).some(function (e) { return e == n[5] }) || (t = !1)), e.indexOf("m=video") > -1) { var s = e.split(" "); e = i([s[0], s[1], s[2]], A, !0).join(" ") } else e.indexOf("m=audio") > -1 && (s = e.split(" "), e = i([s[0], s[1], s[2]], r, !0).join(" ")); t && o.push(e) }), o.join("\r\n") }, A.getSDPByVideDecodeType = function (e, t, A, r) { var s = { "str": "", "arr": [], "obj": { "H264": [], "H265": [], "VP8": [], "VP9": [], "OTHER": [] } }; if (!e.includes("m=video")) return e; var a = /m=video.+/.exec(e)[0]; a = a.match(/[\s|\d]+/g)[1].replace(" ", ""), s.str = a, s.arr = s.str.split(" "), s.arr.forEach(function (t) { var A = new RegExp("a=rtpmap:" + t + ".+").exec(e)[0]; A.includes("H264") ? s.obj.H264.push(t) : A.includes("H265") ? s.obj.H265.push(t) : A.includes("VP8") ? s.obj.VP8.push(t) : A.includes("VP9") ? s.obj.VP9.push(t) : s.obj.OTHER.push(t) }), s.obj.OTHER.forEach(function (t) { var A = new RegExp("a=fmtp:" + t + ".+apt=(\\d+)").exec(e), r = A && A[1]; r && (s.obj.H264.includes(r) ? s.obj.H264.push(t) : s.obj.H265.includes(r) ? s.obj.H265.push(t) : s.obj.VP8.includes(r) ? s.obj.VP8.push(t) : s.obj.VP9.includes(r) && s.obj.VP9.push(t)) }); var g = []; if ("VP9" === t ? g = i(i(i([], s.obj.H265, !0), s.obj.H264, !0), s.obj.VP8, !0) : "VP8" === t ? g = i(i(i([], s.obj.H265, !0), s.obj.H264, !0), s.obj.VP9, !0) : "H264" === t ? g = i(i(i([], s.obj.H265, !0), s.obj.VP8, !0), s.obj.VP9, !0) : "H265" === t && (g = i(i(i([], s.obj.VP8, !0), s.obj.H264, !0), s.obj.VP9, !0)), "H264" == t && "boolean" == typeof A) { var u = function C(e) { return function (t) { return !!t.includes("profile-level-id=") && (e ? !t.includes("profile-level-id=42e01f") : t.includes("profile-level-id=42e01f")) } }, l = function I(e) { return function (t) { if (!t.includes("profile-level-id=")) return !1; switch (e) { case n.H264ProfileType.BASE_LINE: return !t.includes("profile-level-id=42"); case n.H264ProfileType.MAIN: return !t.includes("profile-level-id=4d"); case n.H264ProfileType.HIGH: return !t.includes("profile-level-id=64"); default: return !1 } } }, h = function c(t) { return function () { var A = []; return s.obj.H264.forEach(function (r) { for (var i = new RegExp("a=fmtp:" + r + ".+\\s\\n", "g").exec(e) || [], o = 0, n = t; o < n.length; o++)0 !== i.filter(n[o]).length && A.push(r); var s = new RegExp("a=fmtp:" + r + ".+apt=(\\d+)").exec(e), a = s && s[1]; a && A.includes(a) && A.push(r) }), A } }; g = g.concat(function () { for (var e = [], t = 0, i = void 0 !== r && r === o.EncodecSelectionModeType.HARD_SOFT_ENCODEC_FIRST ? [h([u(A), l(n.H264ProfileType.BASE_LINE)]), h([u(A)]), h([u(!A), l(n.H264ProfileType.BASE_LINE)]), h([u(!A)])] : void 0 !== r && r === o.EncodecSelectionModeType.HIGH_PROFILE_FIRST ? [h([l(n.H264ProfileType.HIGH), u(A)]), h([l(n.H264ProfileType.HIGH), u(!A)]), h([u(A)]), h([u(!A)])] : [h([l(n.H264ProfileType.BASE_LINE), u(A)]), h([l(n.H264ProfileType.BASE_LINE), u(!A)]), h([u(A)]), h([u(!A)])]; t < i.length && (e = (0, i[t])(), new Set(e).size === s.obj.H264.length); t++)e = []; return e }()) } return g.forEach(function (t) { var A = s.arr.indexOf(t); A >= 0 && s.arr.splice(A, 1); var r = new RegExp("a=rtpmap:" + t + ".+\\s\\n", "g"), i = new RegExp("a=rtcp-fb:" + t + ".+\\s\\n", "g"), o = new RegExp("a=fmtp:" + t + ".+\\s\\n", "g"); e = (e = (e = e.replace(r, "")).replace(i, "")).replace(o, "") }), e = e.replace(a, s.arr.join(" ")) }, A }(); t.SdpUtil = s }, "1018": function _(e, t, r) { "use strict"; var i = this && this.__awaiter || function (e, t, A, r) { return new (A || (A = Promise))(function (i, o) { function n(e) { try { a(r.next(e)) } catch (e) { o(e) } } function s(e) { try { a(r.throw(e)) } catch (e) { o(e) } } function a(e) { var t; e.done ? i(e.value) : (t = e.value, t instanceof A ? t : new A(function (e) { e(t) })).then(n, s) } a((r = r.apply(e, t || [])).next()) }) }, o = this && this.__generator || function (e, t) { var A, r, i, o, n = { "label": 0, "sent": function sent() { if (1 & i[0]) throw i[1]; return i[1] }, "trys": [], "ops": [] }; return o = { "next": s(0), "throw": s(1), "return": s(2) }, "function" == typeof Symbol && (o[Symbol.iterator] = function () { return this }), o; function s(s) { return function (a) { return function (s) { if (A) throw new TypeError("Generator is already executing."); for (; o && (o = 0, s[0] && (n = 0)), n;)try { if (A = 1, r && (i = 2 & s[0] ? r.return : s[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, s[1])).done) return i; switch (r = 0, i && (s = [2 & s[0], i.value]), s[0]) { case 0: case 1: i = s; break; case 4: return n.label++, { "value": s[1], "done": !1 }; case 5: n.label++, r = s[1], s = [0]; continue; case 7: s = n.ops.pop(), n.trys.pop(); continue; default: if (!((i = (i = n.trys).length > 0 && i[i.length - 1]) || 6 !== s[0] && 2 !== s[0])) { n = 0; continue } if (3 === s[0] && (!i || s[1] > i[0] && s[1] < i[3])) { n.label = s[1]; break } if (6 === s[0] && n.label < i[1]) { n.label = i[1], i = s; break } if (i && n.label < i[2]) { n.label = i[2], n.ops.push(s); break } i[2] && n.ops.pop(), n.trys.pop(); continue }s = t.call(e, n) } catch (e) { s = [6, e], r = 0 } finally { A = i = 0 } if (5 & s[0]) throw s[1]; return { "value": s[0] ? s[1] : void 0, "done": !0 } }([s, a]) } } }; Object.defineProperty(t, "__esModule", { "value": !0 }), t.WebRTCUtil = void 0; var n = r(1586), s = r(4651), a = r(4028), c = function () { function A() { } return A.supportDetection = function (e, t, A, r) { return i(this, void 0, void 0, function () { var i, n, s, c, g, u, l, h; return o(this, function (o) { switch (o.label) { case 0: return i = { "webRTC": !1, "customCapture": !1, "camera": !1, "microphone": !1, "videoCodec": { "H264": !1, "H265": !1, "VP8": !1, "VP9": !1 }, "screenSharing": e, "errInfo": {} }, r && "screenSharing" === r ? (t({ "result": e, "errInfo": i.errInfo }), [2]) : r && "customCapture" !== r || (((n = document.createElement("video")).captureStream || n.mozCaptureStream) && (i.customCapture = !0), "customCapture" !== r) ? (s = navigator && navigator.mediaDevices && navigator.mediaDevices.getUserMedia, c = function () { var e = "https:" !== window.location.protocol && "file:" !== window.location.protocol && -1 == window.location.hostname.indexOf("127.0.0.1") && -1 == window.location.hostname.indexOf("localhost"); if (e) throw console.error("webrtc requires https or localhost"), new Error("webrtc requires https or localhost"); return !e }(), r && "camera" !== r && "microphone" !== r ? [3, 9] : s ? c ? [3, 1] : (i.camera = !1, i.microphone = !1, console.error("webrtc requires https or localhost"), [3, 9]) : [3, 9]) : (t({ "result": i.customCapture, "errInfo": i.errInfo }), [2]); case 1: if (r && "camera" !== r) return [3, 5]; o.label = 2; case 2: return o.trys.push([2, 4, , 5]), [4, (0, a.getUserMedia)({ "video": !0, "audio": !1 })]; case 3: return (g = o.sent()) && (i.camera = !0) && g.getTracks().forEach(function (e) { e.stop() }), [3, 5]; case 4: return u = o.sent(), i.errInfo.camera = { "name": u.name, "message": u.message }, console.error("camera devices detect error: ", u.name, u.message), [3, 5]; case 5: if (r && "microphone" !== r) return [3, 9]; o.label = 6; case 6: return o.trys.push([6, 8, , 9]), [4, navigator.mediaDevices.getUserMedia({ "audio": !0, "video": !1 })]; case 7: return (l = o.sent()) && (i.microphone = !0) && l.getTracks().forEach(function (e) { return e.stop() }), [3, 9]; case 8: return h = o.sent(), i.errInfo.microphone = { "name": h.name, "message": h.message }, console.error("microphone devices detect error: ", h.name, h.message), [3, 9]; case 9: return "camera" === r || "microphone" === r ? (t({ "result": i[r], "errInfo": i.errInfo }), [2]) : (this.supportVideoCodeType(function (e, A) { r || (i.videoCodec.H264 = e.H264, i.videoCodec.H265 = e.H265, i.videoCodec.VP8 = e.VP8, i.videoCodec.VP9 = e.VP9, i.webRTC = e.webRTC), A && ("string" == typeof A ? i.errInfo.extendedDate = A : i.errInfo.webRTC = { "name": A.name, "message": A.message }, console.error("videoCodec detect error: " + A)), t && t(r ? { "result": e[r], "errInfo": i.errInfo } : i) }, A, r), [2]) } }) }) }, A.supportVideoCodeType = function (e, t, A) { return i(this, void 0, void 0, function () { var r, i, n, a, c, g, u, l, h, d; return o(this, function (o) { switch (o.label) { case 0: return r = { "webRTC": !1, "H264": !1, "VP8": !1, "VP9": !1, "H265": !1 }, A ? 1 !== t || "VP8" !== A && "H264" !== A ? [3, 2] : [4, (d = new s.CheckModule).checkSupportByType(A)] : [3, 2]; case 1: return "boolean" == typeof (i = o.sent()) ? (r[A] = i, [2, e(r)]) : (r[A] = !1, [2, e(r, i)]); case 2: if ("webRTC" !== A && 1 !== t) return [3, 7]; o.label = 3; case 3: return o.trys.push([3, 5, , 6]), [4, (new RTCPeerConnection).createOffer({ "offerToReceiveAudio": !0, "offerToReceiveVideo": !0 })]; case 4: return o.sent(), r.webRTC = !0, [3, 6]; case 5: return n = o.sent(), e && e(r, n), [3, 6]; case 6: if ("webRTC" === A) return [2, e(r)]; o.label = 7; case 7: if (1 === t) { for (a = "", g = [], u = 0, l = c = ["VP8", "H264"]; u < l.length; u++)h = l[u], d = new s.CheckModule, g.push(d.checkSupportByType(h)); return Promise.all(g).then(function (t) { t.forEach(function (e, t) { "boolean" == typeof e ? r[c[t]] = !0 : (r[c[t]] = !1, a = e) }), a ? e(r, a) : e(r) }), [2] } try { (new RTCPeerConnection).createOffer({ "offerToReceiveAudio": !0, "offerToReceiveVideo": !0 }).then(function (t) { if (r.webRTC = !0, t && t.sdp) { var i = t.sdp.split("\r\n"); if (r.H264 = i.some(function (e) { return e.startsWith("a=rtpmap:") && e.indexOf("H264/") > -1 }), "H264" === A) return e(r); if (r.VP8 = i.some(function (e) { return e.startsWith("a=rtpmap:") && e.indexOf("VP8/") > -1 }), "VP8" === A) return e(r); r.VP9 = i.some(function (e) { return e.startsWith("a=rtpmap:") && e.indexOf("VP9/") > -1 }), r.H265 = i.some(function (e) { return e.startsWith("a=rtpmap:") && e.indexOf("H265/") > -1 }), e && e(r) } }) } catch (t) { e && e(r, t) } return [2] } }) }) }, A.checkScreenParams = function (e, t) { if ("object" == (void 0 === e ? "undefined" : _typeof(e)) && void 0 !== e.videoQuality && !a.ClientUtil.checkInteger(e.videoQuality)) return t(n.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError, " videoQuality must be integer number"), !1; if ("object" == (void 0 === e ? "undefined" : _typeof(e)) && void 0 !== e.sourceID && "string" != typeof e.sourceID) return t(n.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError, " sourceID must be string"), !1; if ("object" == (void 0 === e ? "undefined" : _typeof(e)) && 4 === e.videoQuality) { if (!a.ClientUtil.checkCameraOrScreenBitRate(e.bitRate, t)) return !1; if (!a.ClientUtil.checkParamsWithConstraintExtend(e, t)) return !1 } return !0 }, A.checkCameraParams = function (e, t) { return !!a.ClientUtil.checkParamsWithConstraintExtend(e, t) && !!a.ClientUtil.checkCameraOrScreenBitRate(e.bitRate, t) }, A.base64ToUint8Array = function (e) { for (var t = (e + "=".repeat((4 - e.length % 4) % 4)).replace(/\-/g, "+").replace(/_/g, "/"), A = window.atob(t), r = new Uint8Array(A.length), i = 0; i < A.length; ++i)r[i] = A.charCodeAt(i); return r }, A.decodeString = function (e) { return decodeURIComponent(escape(String.fromCharCode.apply(String, Array.from(e)))) }, A.encodeString = function (e) { return Uint8Array.from(Array.from(unescape(encodeURIComponent(e))).map(function (e) { return e.charCodeAt(0) })) }, A }(); t.WebRTCUtil = c }, "1916": function _(e, r, i) { "use strict"; var o = this && this.__assign || function () { return (o = Object.assign || function (e) { for (var t, A = 1, r = arguments.length; A < r; A++)for (var i in t = arguments[A]) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]); return e }).apply(this, arguments) }, n = this && this.__createBinding || (Object.create ? function (e, t, A, r) { void 0 === r && (r = A); var i = Object.getOwnPropertyDescriptor(t, A); i && !("get" in i ? !t.__esModule : i.writable || i.configurable) || (i = { "enumerable": !0, "get": function get() { return t[A] } }), Object.defineProperty(e, r, i) } : function (e, t, A, r) { void 0 === r && (r = A), e[r] = t[A] }), a = this && this.__setModuleDefault || (Object.create ? function (e, t) { Object.defineProperty(e, "default", { "enumerable": !0, "value": t }) } : function (e, t) { e.default = t }), g = this && this.__importStar || function (e) { if (e && e.__esModule) return e; var t = {}; if (null != e) for (var A in e) "default" !== A && Object.prototype.hasOwnProperty.call(e, A) && n(t, e, A); return a(t, e), t }, u = this && this.__awaiter || function (e, t, A, r) { return new (A || (A = Promise))(function (i, o) { function n(e) { try { a(r.next(e)) } catch (e) { o(e) } } function s(e) { try { a(r.throw(e)) } catch (e) { o(e) } } function a(e) { var t; e.done ? i(e.value) : (t = e.value, t instanceof A ? t : new A(function (e) { e(t) })).then(n, s) } a((r = r.apply(e, t || [])).next()) }) }, l = this && this.__generator || function (e, t) { var A, r, i, o, n = { "label": 0, "sent": function sent() { if (1 & i[0]) throw i[1]; return i[1] }, "trys": [], "ops": [] }; return o = { "next": s(0), "throw": s(1), "return": s(2) }, "function" == typeof Symbol && (o[Symbol.iterator] = function () { return this }), o; function s(s) { return function (a) { return function (s) { if (A) throw new TypeError("Generator is already executing."); for (; o && (o = 0, s[0] && (n = 0)), n;)try { if (A = 1, r && (i = 2 & s[0] ? r.return : s[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, s[1])).done) return i; switch (r = 0, i && (s = [2 & s[0], i.value]), s[0]) { case 0: case 1: i = s; break; case 4: return n.label++, { "value": s[1], "done": !1 }; case 5: n.label++, r = s[1], s = [0]; continue; case 7: s = n.ops.pop(), n.trys.pop(); continue; default: if (!((i = (i = n.trys).length > 0 && i[i.length - 1]) || 6 !== s[0] && 2 !== s[0])) { n = 0; continue } if (3 === s[0] && (!i || s[1] > i[0] && s[1] < i[3])) { n.label = s[1]; break } if (6 === s[0] && n.label < i[1]) { n.label = i[1], i = s; break } if (i && n.label < i[2]) { n.label = i[2], n.ops.push(s); break } i[2] && n.ops.pop(), n.trys.pop(); continue }s = t.call(e, n) } catch (e) { s = [6, e], r = 0 } finally { A = i = 0 } if (5 & s[0]) throw s[1]; return { "value": s[0] ? s[1] : void 0, "done": !0 } }([s, a]) } } }; Object.defineProperty(r, "__esModule", { "value": !0 }), r.ZegoWebRTC = void 0; var h = i(5123), d = i(4028), C = i(1018), E = i(7437), p = i(93), f = i(1586), B = i(3304), m = i(9723), Q = i(4202), y = i(9987), v = g(i(5515)), S = i(7436), D = i(2388), R = i(4147), b = i(3074), T = i(8913), k = i(1264), w = i(1264), _ = i(2532), N = i(9770), L = function () { function A(e, t, A, r, i, o) { void 0 === i && (i = 0), void 0 === o && (o = h.ZegoScenario.Default); var n = this; this.mediaEleSources = [], this.isResuming = !1, this.eventHandler = { "resumeAudioContext": function resumeAudioContext(e) { var t = n.ac.state; "running" === t || n.isResuming ? n.offCheckAudioContextListener() : (n.logger.info("zc.ac.rs call " + t + ", " + e.type), n.isResuming = !0, n.ac.resume().then(function () { n.isResuming = !1, n.logger.info("zc.ac.rs end " + n.ac.state + ", " + e.type) })) } }, this.logger = e, this.dataReport = t, this.ac = new ("undefined" != typeof webkitAudioContext ? webkitAudioContext : AudioContext), this.ac.addEventListener("statechange", function () { var e = n.ac.state; n.logger.info("zc.ac.sc ".concat(e)), "running" !== e && n.checkAudioContext() }), this.checkAudioContext(), this.stateCenter = new E.StateCenter(this.logger, this.dataReport), this.stateCenter.clientType = "webrtc", this.stateCenter.settingConfig = new w.ZegoSettingConfig, this.RTM = r, this.stateCenter.appid = r.getAppID(), this.streamCenter = new m.ZegoStreamCenterWeb(this.logger, this.stateCenter, this.dataReport, this.RTM, this.ac, this.mediaEleSources), this.stateCenter.browser = v.browserDetails.browser, this.stateCenter.browserInfo = (0, d.getBrowserAndVersion)(), this.RTM.cloudSetting.setEnvVariable("sdk_version", h.PROTO_VERSION), this.initTracer(A), this.rtcModules = new B.RTCModules(this.logger, this.dataReport, this.stateCenter, this.streamCenter, this.RTM, this.ac, this), this.RTM.cloudSetting.getSettingCache(k.RTC).then(function (e) { var t, A; n.logger.info(p.ZEGO_WEBRTC_ACTION.CONSTRUCTOR + " streamConfig " + JSON.stringify(e)); var r = n.stateCenter.reporter.createSpan(h.TRACER_LEVEL.H, { "key": f.ZegoRTCLogEvent.kZegoTaskInitSetting.event }, { "key": "" }, f.ZegoRTCLogEvent.kZegoTaskCloudSettingCache.event); r.setAttributes({ "files": f.ZegoRTCLogEvent.kZegoTaskCloudSettingCache.files([{ "name": k.RTC, "content": JSON.stringify(null == e ? void 0 : e.setting), "versions": JSON.stringify(null == e ? void 0 : e.versions), "code": 0, "message": "" }]) }), r.end(), n.stateCenter.settingConfig.setSetting(null == e ? void 0 : e.setting), (null === (t = null == e ? void 0 : e.setting) || void 0 === t ? void 0 : t.open_mini_sdp) && (null === (A = n.streamCenter) || void 0 === A || A.initMiniSdpWorker(e.setting.open_mini_sdp.open_mini_sdp)) }).catch(function (e) { n.logger.warn(p.ZEGO_WEBRTC_ACTION.CONSTRUCTOR + " streamConfig " + JSON.stringify(e)) }), this.stateCenter.rtm = this.RTM, this.stateCenter.streamCenter = this.streamCenter, this.stateCenter.chargeInfosSaver.checkAndReport(), [3, 4, 5, 6, 7, 8].includes(o) ? (this.stateCenter.scenario = o, [4, 5, 8].includes(o) ? this.enableVideoHardwareEncoder(!0) : this.enableVideoHardwareEncoder(!1), this.logger.info(p.ZEGO_WEBRTC_ACTION.INIT_ROOM_SCENARIO + " " + o + "  success")) : (this.stateCenter.scenario = h.ZegoScenario.Default, this.logger.error(p.ZEGO_WEBRTC_ACTION.INIT_ROOM_SCENARIO + " " + o + "  please use valid scenario")) } return A.prototype.destroyEngineHandler = function () { var A = this; this.logger.info(p.ZEGO_WEBRTC_ACTION.DESTROY_ENGINE + " call"); var r = function e() { return !A.RTM.stateCenter.roomModulesList.some(function (e) { return !(e.isLogout() || "DISCONNECTED" === e.roomState) }) }, i = function t() { A.RTM.destroyRTM(); for (var e = 0, t = A.streamCenter.previewStreamList; e < t.length; e++) { var r = t[e]; r.localStream && A.destroyStream(r.localStream) } A.RTM.netAgent.destroy(), A.stateCenter.actionListener("_engineDestroy"), A.offCheckAudioContextListener(), A.streamCenter.destroy(), A.stateCenter.destroy(), A.logger.info(p.ZEGO_WEBRTC_ACTION.DESTROY_ENGINE + " call success"), A.logger.destroy() }; r() ? i() : (this.RTM.stateCenter.onListener("_roomStateUpdate", function (e, t) { "DISCONNECTED" === t && r() && i() }), this.RTM.logoutRoom()) }, A.prototype.checkAudioContext = function () { this.logger.info("zc.ac.cac call"), this.ac && "suspended" === this.ac.state && window.addEventListener("mousedown", this.eventHandler.resumeAudioContext) }, A.prototype.offCheckAudioContextListener = function () { this.logger.info("zc.ac.ocac call"), window.removeEventListener("mousedown", this.eventHandler.resumeAudioContext) }, A.prototype.mutePublishStreamVideo = function (e, t, A) { return !1 }, A.prototype.mutePublishStreamAudio = function (e, t) { return !1 }, A.prototype.mutePlayStreamVideo = function (e, t) { return new Promise(function (e, t) { console.error("should install advanced module"), e(!1) }) }, A.prototype.mutePlayStreamAudio = function (e, t) { return new Promise(function (e, t) { console.error("should install advanced module"), e(!1) }) }, A.prototype.muteMicrophone = function (e) { return !1 }, A.prototype.isMicrophoneMuted = function () { return !this.streamCenter.isMicEnabled }, A.prototype.setAudioOutput = function (e, t) { return this.logger.info(p.ZEGO_WEBRTC_ACTION.SET_AUDIO_OUTPUT + " call"), "string" != typeof t ? (this.logger.error("audiooutput is not string"), !1) : this.rtcModules.playModule.setStreamAudioOutput(e, t) }, A.prototype.setCustomSignalUrl = function (e) { if (this.logger.info(p.ZEGO_WEBRTC_ACTION.SET_CUSTOM_SIGNAL_URL + " call: " + e), e && 0 != e.length) { var t = !0; e.forEach(function (e) { return 0 != e.indexOf("wss://") && (t = !1) }), t ? this.stateCenter.customUrl = e : this.logger.error(p.ZEGO_WEBRTC_ACTION.SET_CUSTOM_SIGNAL_URL + " url is not correct") } else this.logger.error(p.ZEGO_WEBRTC_ACTION.SET_CUSTOM_SIGNAL_URL + " param error") }, A.prototype.setGWNode = function (e) { "string" == typeof e && e.length > 0 && (this.streamCenter.gwNode = e) }, A.prototype.setQualityMonitorCycle = function (e) { return "number" == typeof e && e >= 1e3 ? (this.streamCenter.setQualityMonitorCycle(e), !0) : (this.logger.error("zc.sqmc.0 time must be number and bigger than 1000"), !1) }, A.prototype.startPlayingStream = function (e, t, A) { return this.logger.info(p.ZEGO_WEBRTC_ACTION.START_PLAYING_STREAM + " call by user"), this.rtcModules.playModule.startPlayingStream(e, t, A) }, A.prototype.stopPlayingStream = function (e) { this.logger.info(p.ZEGO_WEBRTC_ACTION.STOP_PLAYING_STREAM + " call by user"), this.rtcModules.playModule.stopPlayingStream(e) }, A.prototype.setPlayAccelerate = function (e) { this.stateCenter.playAccelerate = e }, A.prototype.setTurnOverTcpOnly = function (e) { this.logger.info(p.ZEGO_WEBRTC_ACTION.SET_TURN_OVER_TCP_ONLY + " call " + e), "boolean" == typeof e ? this.stateCenter.turnOverTcpOnly = e : this.logger.error("zc.p.stoto.0 param must be param") }, A.prototype.createStream = function (e) { return this.rtcModules.publishModule.createStream(e) }, A.prototype.setRoomScenario = function (e) { return [3, 4, 5, 6, 7, 8].includes(e) ? (this.logger.info(p.ZEGO_WEBRTC_ACTION.SET_ROOM_SCENARIO + " " + e + " called"), this.stateCenter.roomList.length ? (this.logger.error(p.ZEGO_WEBRTC_ACTION.SET_ROOM_SCENARIO + " " + JSON.stringify(_.errorCodeList.SET_ROOM_SCENARIO)), !1) : ([h.ZegoScenario.StandardVideoCall, h.ZegoScenario.HighVideoCall, h.ZegoScenario.Broadcast].includes(e) ? this.enableVideoHardwareEncoder(!0) : this.enableVideoHardwareEncoder(!1), this.stateCenter.scenario = e, this.logger.info(p.ZEGO_WEBRTC_ACTION.SET_ROOM_SCENARIO + " " + e + " called success"), !0)) : (this.logger.error(p.ZEGO_WEBRTC_ACTION.SET_ROOM_SCENARIO + " " + e + " please use valid scenario"), !1) }, A.prototype.destroyStream = function (e) { this.rtcModules.publishModule.destroyStream(e) }, A.prototype.startPublishingStream = function (e, t, A, r) { return this.logger.info(p.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM + " call by user"), this.rtcModules.publishModule.startPublishingStream(e, t, A, r) }, A.prototype.activateSEIInsert = function (e) { return console.error("should install advanced module"), !1 }, A.prototype.setSEIConfig = function (e) { this.logger.info("zc.ssc " + JSON.stringify(e)), this.stateCenter.seiConfig = o(o({}, this.stateCenter.seiConfig), e) }, A.prototype.sendSEI = function (e, t) { return this.rtcModules.publishModule.sendSEI(e, t) }, A.prototype.stopPublishingStream = function (e) { return this.logger.info(p.ZEGO_WEBRTC_ACTION.STOP_PUBLISHING_STREAM + " call by user"), this.rtcModules.publishModule.stopPublishingStream(e, void 0, !0) }, A.prototype.setVideoConfig = function (e, t) { return this.rtcModules.advancedModule ? this.rtcModules.advancedModule.setVideoConfig(e, t) : new Promise(function (e, t) { console.error("should install advanced module"), e({ "errorCode": -1, "extendedData": "should install advanced module" }) }) }, A.prototype.setAudioConfig = function (e, t) { return this.rtcModules.advancedModule ? this.rtcModules.advancedModule.setAudioConfig(e, t) : new Promise(function (e, t) { console.error("should install advanced module"), e({ "errorCode": -1, "extendedData": "should install advanced module" }) }) }, A.prototype.replaceTrack = function (e, t, A) { return this.rtcModules.advancedModule ? this.rtcModules.advancedModule.replaceTrack(e, t, A) : new Promise(function (e, t) { console.error("should install advanced module"), e({ "errorCode": -1, "extendedData": "should install advanced module" }) }) }, A.prototype.preloadEffect = function (e, t, A) { void 0 !== this.rtcModules.audioMixModule ? this.rtcModules.audioMixModule.preloadEffect(e, t, A) : console.error("未引入混音模块") }, A.prototype.getEffectDuration = function (e) { return void 0 !== this.rtcModules.audioMixModule ? this.rtcModules.audioMixModule.getEffectDuration(e) : (console.error("未引入混音模块"), 0) }, A.prototype.getEffectCurrentProgress = function (e, t) { return void 0 !== this.rtcModules.audioMixModule ? this.rtcModules.audioMixModule.getEffectProgress(e, t) : (console.error("未引入混音模块"), 0) }, A.prototype.seekAudioEffect = function (e, t, A) { return void 0 !== this.rtcModules.audioMixModule ? this.rtcModules.audioMixModule.seekAudioEffect(e, t, A) : (console.error("未引入混音模块"), !1) }, A.prototype.playEffect = function (e, t, A) { void 0 !== this.rtcModules.audioMixModule ? this.rtcModules.audioMixModule.playEffect(e, t, A) : console.error("未引入混音模块") }, A.prototype.pauseEffect = function (e, t) { return void 0 !== this.rtcModules.audioMixModule ? this.rtcModules.audioMixModule.pauseEffect(e, t) : (console.error("未引入混音模块"), !1) }, A.prototype.resumeEffect = function (e, t) { return void 0 !== this.rtcModules.audioMixModule ? this.rtcModules.audioMixModule.resumeEffect(e, t) : (console.error("未引入混音模块"), !1) }, A.prototype.stopEffect = function (e, t) { return void 0 !== this.rtcModules.audioMixModule ? this.rtcModules.audioMixModule.stopEffect(e, t) : (console.error("未引入混音模块"), !1) }, A.prototype.unloadEffect = function (e) { return void 0 !== this.rtcModules.audioMixModule ? this.rtcModules.audioMixModule.unloadEffect(e) : (console.error("未引入混音模块"), !1) }, A.prototype.setEffectVolume = function (e, t, A, r) { return void 0 !== this.rtcModules.audioMixModule ? this.rtcModules.audioMixModule.setEffectVolume(e, t, A, r) : (console.error("未引入混音模块"), !1) }, A.prototype.startMixingAudio = function (e, t) { return void 0 !== this.rtcModules.audioMixModule ? this.rtcModules.audioMixModule.startMixingAudio(e, t) : (console.error("未引入混音模块"), !1) }, A.prototype.stopMixingAudio = function (e, t) { return void 0 !== this.rtcModules.audioMixModule ? this.rtcModules.audioMixModule.stopMixingAudio(e, t) : (console.error("未引入混音模块"), !1) }, A.prototype.mixingBuffer = function (e, t, A, r) { void 0 !== this.rtcModules.audioMixModule ? this.rtcModules.audioMixModule.mixingBuffer(e, t, A, r) : console.error("未引入混音模块") }, A.prototype.stopMixingBuffer = function (e, t) { return void 0 !== this.rtcModules.audioMixModule ? this.rtcModules.audioMixModule.stopMixingBuffer(e, t) : (console.error("未引入混音模块"), !1) }, A.prototype.setMixingAudioVolume = function (e, t, A) { return void 0 !== this.rtcModules.audioMixModule ? this.rtcModules.audioMixModule.setMixingAudioVolume(e, t, A) : (console.error("未引入混音模块"), !1) }, A.prototype.checkSystemRequirements = function (e, t) { var r = this, i = navigator && navigator.mediaDevices && (A.screenShotReady || "getDisplayMedia" in navigator.mediaDevices); return this.logger.info(p.ZEGO_WEBRTC_ACTION.CHECK_SUPPORT + " call" + navigator.userAgent), new Promise(function (A) { var o = r.stateCenter.reporter.createSpan(h.TRACER_LEVEL.H, { "key": f.ZegoRTCLogEvent.kZegoTaskInitSetting.event }, { "key": "" }, f.ZegoRTCLogEvent.kZegoTaskCheckSystemRequirements.event), n = t || "all", a = function s(e) { o.setAttributes({ "capability": f.ZegoRTCLogEvent.kZegoTaskCheckSystemRequirements.capability(e) }), o.end(); var t = r.stateCenter.checkList.indexOf(n); r.stateCenter.checkList.splice(t, 1), A(e) }; return ["webRTC", "customCapture", "camera", "microphone", "screenSharing", "H264", "VP8", "all"].includes(n) && [0, 1].includes(e) ? r.stateCenter.checkList.includes(n) || r.stateCenter.checkList.includes("all") ? a({ "result": !1, "errInfo": { "extendedDate": "The last test of the same type has not returned a result " } }) : (r.stateCenter.checkList.push(n), void C.WebRTCUtil.supportDetection(i, a, e, t)) : a({ "result": !1, "errInfo": { "extendedDate": "param error" } }) }) }, A.prototype.enumDevices = function (e, A) { return u(this, void 0, void 0, function () { var r, i, o, n, s, a, c, g, u, C, I, E, p, B = this; return l(this, function (t) { switch (t.label) { case 0: return this.logger.info("zc.ed.0 call"), [4, (r = function t() { return new Promise(function (e, t) { var r = B.stateCenter.reporter.createSpan(h.TRACER_LEVEL.H, { "key": f.ZegoRTCLogEvent.kZMInitSetting.event }, { "key": "" }, f.ZegoRTCLogEvent.kZegoTaskEnumDevices.event); B.rtcModules.publishModule.recordDevices(function (t) { var i = [], o = !0, n = !0; t.cameras.forEach(function (e) { "" === e.deviceID && (o = !1), i.push({ "device": e.deviceID, "device_name": e.deviceName, "type": 0 }) }), t.microphones.forEach(function (e) { "" === e.deviceID && (n = !1), i.push({ "device": e.deviceID, "device_name": e.deviceName, "type": 1 }) }), t.speakers.forEach(function (e) { return i.push({ "device": e.deviceID, "device_name": e.deviceName, "type": 2 }) }), r.setAttributes({ "dev_list": f.ZegoRTCLogEvent.kZegoTaskEnumDevices.dev_list(i), "dev_kind": f.ZegoRTCLogEvent.kZegoTaskEnumDevices.dev_kind(A || "all") }), r.end(), e({ "devices": t, "enableCamera": o, "enableMic": n }) }, function (e) { B.stateCenter.reporter.setError(r, e), t(e) }) }) })()]; case 1: return i = t.sent(), o = i.enableCamera, n = i.enableMic, s = i.devices, e ? (this.logger.info("zc.ed.0 check permission"), a = { "video": !0, "audio": !0 }, "videoinput" === A ? a.audio = !1 : "audioinput" !== A && "audiooutput" !== A || (a.video = !1), g = a.audio && !n, (c = a.video && !o) || g ? (this.logger.info("zc.ed.0 need to get device permission. needCamera: ".concat(c, ", needMic: ").concat(g)), [4, (0, d.getUserMedia)(a).catch(function () { })]) : [3, 4]) : [3, 4]; case 2: return (u = t.sent()) && u.getTracks().forEach(function (e) { e.stop() }), [4, r()]; case 3: C = t.sent(), I = C.devices, E = C.enableCamera, p = C.enableMic, a.video && !E && this.logger.warn("zc.ed.0 get video device permission failed."), a.audio && !p && this.logger.warn("zc.ed.0 get audio device permission failed."), s = I, t.label = 4; case 4: return [2, s] } }) }) }, A.prototype.getCameras = function () { return u(this, void 0, void 0, function () { return l(this, function (e) { switch (e.label) { case 0: return [4, this.enumDevices(!0, "videoinput")]; case 1: return [2, e.sent().cameras] } }) }) }, A.prototype.getMicrophones = function () { return u(this, void 0, void 0, function () { return l(this, function (e) { switch (e.label) { case 0: return [4, this.enumDevices(!0, "audioinput")]; case 1: return [2, e.sent().microphones] } }) }) }, A.prototype.getSpeakers = function () { return u(this, void 0, void 0, function () { return l(this, function (e) { switch (e.label) { case 0: return [4, this.enumDevices(!0, "audiooutput")]; case 1: return [2, e.sent().speakers] } }) }) }, A.prototype.getAudioInfo = function (e, t, A) { }, A.prototype.getSoundLevel = function (e, t, A) { this.rtcModules.audioMixModule ? this.rtcModules.audioMixModule.getSoundLevel(e, t, A) : console.error("未引入混音模块") }, A.prototype.stopSoundLevel = function (e) { this.rtcModules.audioMixModule ? this.rtcModules.audioMixModule.stopSoundLevel(e) : console.error("未引入混音模块") }, A.handleDataAvailable = function (e) { e.data && e.data.size > 0 && A.recordedBlobs.push(e.data) }, A.prototype.startRecord = function (e) { }, A.prototype.stopRecord = function () { }, A.prototype.resumeRecord = function () { }, A.prototype.pauseRecord = function () { }, A.prototype.saveRecord = function (e) { }, A.prototype.useVideoDevice = function (e, t) { return this.rtcModules.advancedModule ? this.rtcModules.advancedModule.useVideoDevice(e, t) : new Promise(function (e, t) { e({ "errorCode": -1, "extendedData": "should install advanced module" }) }) }, A.prototype.useAudioDevice = function (e, t) { return this.rtcModules.advancedModule ? this.rtcModules.advancedModule.useAudioDevice(e, t) : (console.error("should use advanced module first"), new Promise(function (e, t) { e({ "errorCode": -1, "extendedData": "should install advanced module" }) })) }, A.prototype.getElectronScreenSources = function () { return this.rtcModules.publishModule.getElectronScreenSources() }, A.prototype.setSoundLevelDelegate = function (e, t, A) { this.logger.info("zc.ssd.0 call"), "boolean" == typeof e ? t && (!this.stateCenter.checkInteger(t) || t < 100 || t > 3e3) ? this.logger.error("zc.ssd.0 soundLevel interval must be integer number which is between 100 and 3000") : this.streamCenter.setSoundLevelDelegate(e, t, A) : this.logger.error("zc.ssd.0 param 1 must be boolean") }, A.prototype.on = function (e, t) { return this.rtcModules.bindListener(e, t) }, A.prototype.off = function (e, t) { return this.rtcModules.deleteListener(e, t) }, A.prototype.getVersion = function () { return h.PROTO_VERSION }, A.prototype.setStreamExtraInfo = function (e, t) { return new Promise(function (e, t) { console.error("should use advanced module first"), t() }) }, A.prototype.addPublishCdnUrl = function (e, t) { return this.logger.info("zg.cm.apu call ", e, t), this.rtcModules.streamCommonModule ? this.rtcModules.streamCommonModule.publishTarget({ "type": "addpush", "streamID": e, "pushUrl": t }) : new Promise(function (e, t) { console.error("should install advanced module"), e({ "errorCode": -1, "extendedData": "should install advanced module" }) }) }, A.prototype.removePublishCdnUrl = function (e, t) { return this.logger.info("zg.cm.apu call ", e, t), this.rtcModules.streamCommonModule ? this.rtcModules.streamCommonModule.publishTarget({ "type": "delpush", "streamID": e, "pushUrl": t }) : new Promise(function (e, t) { console.error("should install advanced module"), e({ "errorCode": -1, "extendedData": "should install advanced module" }) }) }, A.prototype.startMixerTask = function (e) { return new Promise(function (e, t) { console.error("未引入混流模块"), t() }) }, A.prototype.setMixerTaskConfig = function (e) { return new Promise(function (e, t) { console.error("未引入混流模块"), t() }) }, A.prototype.stopMixerTask = function (e) { return new Promise(function (e, t) { console.error("未引入混流模块"), t() }) }, A.prototype.setCaptureVolume = function (e, t) { return this.rtcModules.publishModule.setCaptureVolume(e, t) }, A.use = function (e) { switch (e.type) { case "AudioMix": e.install(B.RTCModules, y.ZegoPublish); break; case "MixStream": e.install(A, Q.StreamHandler, B.RTCModules); break; case "StreamCommon": e.install(A, B.RTCModules, Q.StreamHandler); break; case "Advance": e.install(A, B.RTCModules, Q.StreamHandler, S.ZegoPreview, D.PlayModule, R.PublishModule, y.ZegoPublish, b.ZegoSignal); break; case "BeautyEffect": case "VoiceChanger": e.install(A, S.ZegoPreview); break; case "RangeAudio": case "DataChannel": case "AiDenoise": case "BackgroundProcess": case "CopyrightedMusic": e.install(A) } }, A.prototype.createRangeAudioInstance = function () { throw new Error("should use range audio module") }, A.prototype.createCopyrightedMusic = function () { throw new Error("should use copyrighted music module") }, A.prototype.destroyCopyrightedMusic = function () { throw new Error("should use copyrighted music module") }, A.prototype.createRealTimeSequentialDataManager = function (e) { throw new Error("should use datachannel module") }, A.prototype.destroyRealTimeSequentialDataManager = function (e) { throw new Error("should use datachannel module") }, A.prototype.enableDataChannel = function (e) { "boolean" == typeof e && (this.streamCenter.isDataChannelEnabled = e) }, A.prototype.addTrack = function (e, t) { return new Promise(function (e, t) { throw new Error("use advanced module first") }) }, A.prototype.removeTrack = function (e, t) { return new Promise(function (e, t) { throw new Error("use advanced module first") }) }, A.prototype.setBeautyEffect = function (e, t, A) { return new Promise(function (e, t) { console.error("should install video effect module and advanced module"), e({ "errorCode": -1, "extendedData": "should install video effect module and advanced module" }) }) }, A.prototype.setLowlightEnhance = function (e, t) { return new Promise(function (e, t) { console.error("should install video effect module and advanced module"), e({ "errorCode": -1, "extendedData": "should install video effect module and advanced module" }) }) }, A.prototype.getPublishingStreamQuality = function (e) { return this.rtcModules.publishModule.getStreamStats(e) }, A.prototype.getPlayingStreamQuality = function (e) { return this.rtcModules.playModule.getStreamStats(e) }, A.prototype.checkAudioTrackIsActive = function (e) { var t = this; return this.logger.info("zc.caia.0 call"), new Promise(function (A, r) { if (!t.checkTrackParam(e, 1)) return t.logger.info("zc.caia.0 param active: false"), A(!1); var i = 0; try { var o = 0, n = t.streamCenter.createSoundLevel(t.ac, e, 50, function (e) { e *= 1e3; var r = !1; o >= 4 ? (s.destroy(), (e > 0 || i > 0) && (r = !0), t.logger.info("zc.caia.0 active: " + r), A(r)) : i = Math.max(e, i), o++ }), s = n.soundMeter; s && n.mic || (t.logger.error("zc.cvia.1 checkVideoTrackIsActive not supported"), A(!1)) } catch (e) { t.logger.error("zc.cvia.1 " + e), A(!1) } }) }, A.prototype.checkVideoTrackIsActive = function (e) { var t = this; this.logger.info("zc.cvia.0 call"); var A = this; return new Promise(function (r, i) { if (!t.checkTrackParam(e, 0)) return t.logger.info("zc.cvia.1 param active: false"), r(!1); var o = (0, d.createVideoEle)(1, 1), n = 160, s = 120, a = (0, d.createCanvasEle)(n, s).getContext("2d"); a && (null == a ? void 0 : a.drawImage) && (null == a ? void 0 : a.getImageData) || (A.logger.error("zc.cvia.1 checkVideoTrackIsActive not supported"), r(!1)), o.style.position = "fixed", o.style.left = "-1000px", o.style.opacity = "0.01", document.body.appendChild(o), o.srcObject = e; var g = null; function I() { a = null; try { o.pause(), o.remove(), o.srcObject = null } catch (e) { } } function c() { o.play(); var e = setTimeout(function () { clearTimeout(e), e = null, o.removeEventListener("canplay", c), null == a || a.drawImage(o, 0, 0, n, s); var t = setTimeout(function () { clearTimeout(t), t = null; var e = null == a ? void 0 : a.getImageData(0, 0, n, s), i = (null == e ? void 0 : e.data) && Math.floor(e.data.length / 3); if (i) { for (var o = 3; o < i; o += 4)if (0 !== e.data[o - 1] || 0 !== e.data[o - 2] || 0 !== e.data[o - 3]) return A.logger.info("zc.cvia.0 active: true"), r(!0), void I(); I(), A.logger.info("zc.cvia.1 active: false"), r(!1) } }, 20) }, 200) } o.addEventListener("canplay", c), g = setTimeout(function () { clearTimeout(g), o.removeEventListener("canplay", c), I(), r(!1) }, 1e3) }) }, A.prototype.checkTrackParam = function (e, t) { var A = this; if (this.logger.info("zc.ctp.0 call type:" + t), !(e instanceof MediaStream)) return this.logger.error("zc.ctp.1 param 1 must be MediaStream"), !1; var r = this.streamCenter.checkPreview(e), i = Object.keys(this.streamCenter.playerList).find(function (t) { var r, i; return (null === (i = null === (r = A.streamCenter.playerList[t]) || void 0 === r ? void 0 : r.player) || void 0 === i ? void 0 : i.playStream) === e }); if (!r && !i) return this.logger.error("zc.ctp.1 stream is not from zego"), !1; var o = e[0 == t ? "getVideoTracks" : "getAudioTracks"]()[0]; return o ? !("live" !== o.readyState || !o.enabled || o.muted) || (this.logger.info("zc.ctp.0 type:".concat(t, " state:").concat(o.readyState, " enabled:").concat(o.enabled, " muted:").concat(o.muted)), !1) : (this.logger.error("zc.cvia.1 the stream has not track"), !1) }, A.prototype.setDummyCaptureImagePath = function (e, t) { return this.rtcModules.advancedModule ? this.rtcModules.advancedModule.setDummyCaptureImagePath(e, t) : new Promise(function (e, t) { console.error("should install advanced module"), e(!1) }) }, A.prototype.setAccess = function (e) { this.RTM.setAccess(e), this.stateCenter.useNetAgent = this.RTM.getSettingUnify(!0), this.RTM.setAccess(this.stateCenter.useNetAgent), this.stateCenter.useNetAgent = this.RTM.getUseNetAgent() }, A.prototype.setAudioOutputDevice = function (e, t) { return u(this, void 0, void 0, function () { var A; return l(this, function (r) { switch (r.label) { case 0: return (A = null == e ? void 0 : e.setSinkId) ? (e.setsinkid && (e.setsinkid.enabled = !0), [4, A.call(e, t)]) : [3, 2]; case 1: return r.sent(), [2, !0]; case 2: throw Error("Browser not support set audio output.") } }) }) }, A.prototype.enableCameraCapturing = function (e, t) { return void 0 === t && (t = !0), u(this, void 0, void 0, function () { return l(this, function (e) { return console.error("should use advanced module first"), [2, !1] }) }) }, A.prototype.enableDualStream = function (e) { this.rtcModules.advancedModule ? this.rtcModules.advancedModule.enableDualStream(e) : console.error("use advance module first") }, A.prototype.setLowStreamParameter = function (e, t) { this.rtcModules.advancedModule ? this.rtcModules.advancedModule.setLowStreamParameter(e, t) : console.error("use advance module first") }, A.prototype.setRemoteDefaultVideoStreamType = function (e) { this.logger.info("zc.srdvs call"), [0, 1, 2].includes(e) ? this.stateCenter.streamType = e : this.logger.error("zc.srdvs streamType must be number 0 or 1 or 2") }, A.prototype.enableVideoHardwareEncoder = function (e) { if ("boolean" == typeof e) { var t = this.stateCenter.settingConfig; t.setUserValue("hardware_encode", e), t.setUserValue("camera_hard_encode", e), t.setUserValue("custom_hard_encode", e) } }, A.prototype.createLocalViewer = function (e) { var t = this.streamCenter.checkPreview(e), A = null == t ? void 0 : t.getViewer(); if (!A) throw Error("create viewer failed."); return new T.ZegoStreamView(A) }, A.prototype.createRemoteViewer = function (e) { var t = this.streamCenter.checkPlayer(e), A = null == t ? void 0 : t.getViewer(); if (!A) throw Error("create viewer failed."); return new T.ZegoStreamView(A) }, A.prototype.enableAiDenoise = function (e, t) { return new Promise(function (e, t) { console.error("should install ai denoise module and advanced module"), t({ "errorCode": _.errorCodeList.MODULE_NOT_IMPORTED.code, "extendedData": "should install ai denoise module and advanced module" }) }) }, A.prototype.setVoiceChangerPreset = function (e, t) { return new Promise(function (e, t) { console.error("should install voice changer module and advanced module"), t({ "errorCode": _.errorCodeList.MODULE_NOT_IMPORTED.code, "extendedData": "should install voice changer module and advanced module" }) }) }, A.prototype.loadBackgroundBlurModule = function () { return new Promise(function (e, t) { console.error("should install blur background module and advanced module"), e({ "errorCode": -1, "extendedData": "should install blur background module and advanced module" }) }) }, A.prototype.initBackgroundModule = function (e, t) { return new Promise(function (e, t) { console.error("should install blur background module and advanced module"), e({ "errorCode": -1, "extendedData": "should install blur background module and advanced module" }) }) }, A.prototype.setBackgroundBlurOptions = function (e, t) { throw console.error("should install blur background module and advanced module"), new Error("should install blur background module and advanced module") }, A.prototype.setVirtualBackgroundOptions = function (e, t) { throw console.error("should install blur background module and advanced module"), new Error("should install blur background module and advanced module") }, A.prototype.enableBackgroundProcess = function (e, t, A) { return new Promise(function (e, t) { console.error("should install blur background module and advanced module"), e({ "errorCode": -1, "extendedData": "should install blur background module and advanced module" }) }) }, A.prototype.enableAutoSwitchDevice = function (e) { if (this.rtcModules.advancedModule) return this.rtcModules.advancedModule.enableAutoSwitchDevice(e); throw new Error("should use advanced module first") }, A.prototype.initTracer = function (e) { this.stateCenter.reporter = e; var t = new N.CommonStates(this.RTM.stateCenter, this.stateCenter, this.streamCenter), A = this.getReporterVersion(h.PROTO_VERSION); this.stateCenter.reportVersion = A, this.stateCenter.reporter.setCommonStates(t), this.stateCenter.reporter.setResource({ "sdk_version": h.PROTO_VERSION, "report_version": A }) }, A.prototype.getReporterVersion = function (e) { var t = e.split(".").map(function (e) { return parseInt(e) }); return t[0] << 20 | t[1] << 8 | t[2] }, A.prototype.setEngineConfig = function (e) { this.stateCenter.engineConfig = o(o({}, this.stateCenter.engineConfig), e), this.stateCenter.actionListener("_engineConfigUpdate", this.stateCenter.engineConfig) }, A.prototype.inject = function (e, t) { var A = this; if ("ZegoExpressPlayer" !== e) throw new Error("You are not authorized to use 'inject' method!"); t({ "appid": this.stateCenter.appid, "logger": this.logger, "validateToken": function validateToken(e, t) { return u(A, void 0, void 0, function () { return l(this, function (A) { switch (A.label) { case 0: return this.stateCenter.player265Validated ? [2, !0] : [4, this.RTM.fetchAppConfigByTargetToken(e, t)]; case 1: return A.sent() && (this.stateCenter.player265Validated = !0), [2, !!this.stateCenter.player265Validated] } }) }) }, "isLogin": function isLogin() { return A.stateCenter.rtm && A.stateCenter.rtm.stateCenter.roomModulesList.some(function (e) { return e.isLogin() }) } }) }, A.prototype.destroyEngine = function () { if (this.stateCenter.engineDestroy) throw new Error("ZegoExpressEngine has been destroyed."); this.destroyEngineHandler(), this.stateCenter.engineDestroy = !0 }, A.screenShotReady = !1, A }(); r.ZegoWebRTC = L, window.addEventListener("message", function (e) { var t = e.data.type, A = e.origin; A !== window.location.origin && console.warn("ScreenStream: you should discard foreign event from origin:", A), "SS_PING" === t && (L.screenShotReady = !0) }) }, "7045": function _(e, t, r) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.AnalogSocket = t.SocketState = void 0; var i, o, n, s = r(5123), a = r(93), c = r(1586); !function (e) { e[e.Connected = 0] = "Connected", e[e.Disconnected = 1] = "Disconnected", e[e.Broken = 2] = "Broken" }(i || (i = {})), function (e) { e[e.AUTO = 0] = "AUTO", e[e.MANUAL = 1] = "MANUAL" }(o || (o = {})), function (e) { e[e.CONNECTING = 0] = "CONNECTING", e[e.OPEN = 1] = "OPEN", e[e.CLOSING = 2] = "CLOSING", e[e.CLOSED = 3] = "CLOSED" }(n = t.SocketState || (t.SocketState = {})); var g = function () { function A(e, t, A, r, o) { var a = this; this.server = e, this.netAgent = t, this.signalConfig = A, this.logger = r, this.stateCenter = o, this.readyState = n.CLOSED, this.isActive = !1, this.accessServerState = i.Disconnected, this.originAccessServerState = i.Disconnected, this.mediaServerState = i.Disconnected, this.originMediaServerState = i.Disconnected, this.eventHandler = { "accessDisconnect": function accessDisconnect() { a.setAccessServerState(i.Disconnected) }, "accessConnect": function accessConnect() { a.setAccessServerState(i.Connected) }, "accessBroken": function accessBroken() { a.setAccessServerState(i.Broken) }, "mediaDisconnect": function mediaDisconnect() { a.setMediaServerState(i.Disconnected) }, "mediaConnect": function mediaConnect(e) { a.setMediaServerState(i.Connected, e) }, "mediaBroken": function mediaBroken() { a.setMediaServerState(i.Broken) } }, this.wsHandler = t.getPCRequest("unified_rtc" === e ? s.BusinessService.SERVICE_WEBRTC_SIGNAL : s.BusinessService.SERVICE_L3_WEBRTC_SIGNAL, { "path": A.path, "query": A.query }), this.setAccessServerState(t.isConnect() ? i.Connected : i.Disconnected), this.setMediaServerState(0 === this.wsHandler.connectState ? i.Connected : i.Disconnected) } return A.prototype.updateAccessReadyState = function () { this.isActive && this.accessServerState === i.Connected && this.mediaServerState !== i.Connected ? this.onreconnnecting && this.onreconnnecting() : this.accessServerState === i.Disconnected && this.logger.warn(a.ZEGO_WEBRTC_ACTION.ANALOGSOCKET_UPDATE_ACCESS_READY_STATE + " access timeout") }, A.prototype.updateMediaReadyState = function (e) { return this.logger.info(a.ZEGO_WEBRTC_ACTION.ANALOGSOCKET_UPDATE_MEDIA_READY_STATE + " " + e), this.mediaServerState === i.Connected ? (this.originMediaServerState === i.Broken && e === o.AUTO && this.onreconnnecting && this.onreconnnecting(), void (this.readyState !== n.OPEN && (this.readyState = n.OPEN, this.onopen && this.onopen()))) : this.mediaServerState === i.Disconnected ? (this.wsHandler.off("connected", this.eventHandler.mediaConnect), this.wsHandler.off("disconnected", this.eventHandler.mediaDisconnect), this.wsHandler.off("broken", this.eventHandler.mediaBroken), this.wsHandler.off("downLoadMessage"), this.netAgent.off("connected", this.eventHandler.accessConnect), this.netAgent.off("disconnected", this.eventHandler.accessDisconnect), this.netAgent.off("broken", this.eventHandler.accessBroken), void (this.readyState !== n.CLOSED && (this.readyState = n.CLOSED, this.onclose && this.onclose()))) : void (this.mediaServerState === i.Broken && (this.readyState = n.CONNECTING, this.onerror && this.onerror(new Event("signal connecting")))) }, A.prototype.setMediaServerState = function (e, t) { this.logger.info(a.ZEGO_WEBRTC_ACTION.ANALOGSOCKET_SET_MEDIA_SERVER_STATE + " " + e + " " + t), this.mediaServerState !== e ? (this.originMediaServerState = this.mediaServerState, this.mediaServerState = e, this.updateMediaReadyState(t)) : this.logger.info(a.ZEGO_WEBRTC_ACTION.ANALOGSOCKET_SET_MEDIA_SERVER_STATE + " same state") }, A.prototype.setAccessServerState = function (e) { this.logger.info(a.ZEGO_WEBRTC_ACTION.ANALOGSOCKET_SET_ACCESS_SERVER_STATE + " " + e), this.accessServerState !== e ? (this.originAccessServerState = this.accessServerState, this.accessServerState = e, this.updateAccessReadyState()) : this.logger.info(a.ZEGO_WEBRTC_ACTION.ANALOGSOCKET_SET_ACCESS_SERVER_STATE + " same state") }, A.prototype.open = function () { var e = this; this.isActive = !0, this.logger.info(a.ZEGO_WEBRTC_ACTION.ANALOGSOCKET_OPEN + " state " + this.mediaServerState), this.mediaServerState === i.Disconnected && (this.wsHandler.on("connected", this.eventHandler.mediaConnect), this.wsHandler.on("disconnected", this.eventHandler.mediaDisconnect), this.wsHandler.on("broken", this.eventHandler.mediaBroken), this.netAgent.on("connected", this.eventHandler.accessConnect), this.netAgent.on("disconnected", this.eventHandler.accessDisconnect), this.netAgent.on("broken", this.eventHandler.accessBroken), this.wsHandler.on("downLoadMessage", function (t) { e.onmessage({ "data": t }) }), this.wsHandler.off("pcBrokenEvent"), this.wsHandler.on("pcBrokenEvent", function (t) { var A = c.ZegoRTCLogEvent.kZegoSDKProxyBroken, r = e.stateCenter.reporter.createSpan(s.TRACER_LEVEL.H, { "key": c.ZegoRTCLogEvent.kZegoConnConnect.event }, { "key": "" }, A.event); r.setAttributes({ "service_no": A.service_no(null == t ? void 0 : t.service_no) }), r.end() }), this.wsHandler.off("pcDisconnectedEvent"), this.wsHandler.on("pcDisconnectedEvent", function (t) { var A = c.ZegoRTCLogEvent.kZegoSDKProxyDisconnect, r = e.stateCenter.reporter.createSpan(s.TRACER_LEVEL.H, { "key": c.ZegoRTCLogEvent.kZegoConnConnect.event }, { "key": "" }, A.event); r.setAttributes({ "service_no": A.service_no(null == t ? void 0 : t.service_no) }), r.end() }), this.wsHandler.off("pcConnectedEvent"), this.wsHandler.on("pcConnectedEvent", function (t) { var A = c.ZegoRTCLogEvent.kZegoSDKProxyConnect, r = e.stateCenter.reporter.createSpan(s.TRACER_LEVEL.H, { "key": c.ZegoRTCLogEvent.kZegoConnConnect.event }, { "key": "" }, A.event); r.setAttributes({ "service_no": A.service_no(t.service_no), "recv_time": A.recv_time((new Date).getTime()), "proxy_link_sources": A.proxy_link_sources(t.proxy_link_sources), "connect_stream": A.connect_stream(t.connect_stream) }), r.end() })) }, A.prototype.close = function () { this.isActive = !1, this.wsHandler.off("connected", this.eventHandler.mediaConnect), this.wsHandler.off("disconnected", this.eventHandler.mediaDisconnect), this.wsHandler.off("broken", this.eventHandler.mediaBroken), this.wsHandler.off("downLoadMessage"), this.netAgent.off("connected", this.eventHandler.accessConnect), this.netAgent.off("disconnected", this.eventHandler.accessDisconnect), this.netAgent.off("broken", this.eventHandler.accessBroken), this.wsHandler.closeRequest() }, A.prototype.send = function (e, t, A) { var r = this; this.wsHandler.sendRequest({ "payload": e, "ack": t, "isInSendMap": A }, function (e) { r.logger.info(a.ZEGO_WEBRTC_ACTION.ANALOGSOCKET_SEND + " fail " + e), r.onerror && r.onerror(e) }, function (e) { r.logger.info(a.ZEGO_WEBRTC_ACTION.ANALOGSOCKET_SEND + " suc " + e) }) }, A.prototype.onopen = function () { }, A.prototype.onclose = function (e) { }, A.prototype.onerror = function (e) { }, A.prototype.onmessage = function (e) { }, A.prototype.onreconnnecting = function () { }, A }(); t.AnalogSocket = g }, "8738": function _(e, t, r) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.BillingTimer = void 0; var i = r(5123), o = r(4367), n = function () { function A(e, t) { this.logger = e, this.stateCenter = t, this.chargeInfosInterval = 6e4, this.reporting = !1 } return Object.defineProperty(A.prototype, "chargeInfosSaver", { "get": function get() { return this.stateCenter.chargeInfosSaver }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "streamCenter", { "get": function get() { return this.stateCenter.streamCenter }, "enumerable": !1, "configurable": !0 }), A.prototype.isAllPlayingCdnAndL3 = function () { var e = 0, t = 0, A = this.streamCenter.playerList; for (var r in A) { var o = A[r]; o.player.state == i.ENUM_PLAY_STATE.playing && (e++, 0 !== o.player.resourceMode && t++) } return e == t && 0 !== e }, Object.defineProperty(A.prototype, "roomChargeInfos", { "get": function get() { return this._roomChargeInfos || (this._roomChargeInfos = { "itemtype": "ChargeInfos", "timestamp_begin": 0, "timestamp_end": 0, "timestamp_diff_flag": 0, "timestamp_diff": 0, "infos": [] }), this._roomChargeInfos.timestamp_begin = (new Date).getTime(), 0 !== this._roomChargeInfos.timestamp_end ? (this._roomChargeInfos.timestamp_diff = this._roomChargeInfos.timestamp_begin - this._roomChargeInfos.timestamp_end, this._roomChargeInfos.timestamp_diff_flag = 1) : (this._roomChargeInfos.timestamp_diff = 0, this._roomChargeInfos.timestamp_diff_flag = 0), this._roomChargeInfos.timestamp_end = (new Date).getTime(), this._roomChargeInfos.infos = [{ "is_publishing": 0, "play_max_audio_bitrate": 0, "play_stream_resolution_infos": [], "no_playing": 1 }], this._roomChargeInfos }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "chargeInfos", { "get": function get() { return this.streamCenter ? this.streamCenter.getChargeInfos() : this.roomChargeInfos }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "shouldEnd", { "get": function get() { var e, t; return !!this.reporting && (this.shouldReportRoomTime ? (null === (e = this.stateCenter.rtm) || void 0 === e || e.stateCenter.roomModulesList.filter(function (e) { !e.isLogout() && e.isDisConnect() }), 0 === (null === (t = this.stateCenter.rtm) || void 0 === t ? void 0 : t.stateCenter.roomModulesList.filter(function (e) { return !e.isLogout() || !e.isDisConnect() }).length)) : !this.streamCenter || !this.streamCenter.signalList || 0 === Object.keys(this.streamCenter.signalList).length) }, "enumerable": !1, "configurable": !0 }), A.prototype.report = function () { this.isAllPlayingCdnAndL3() ? this.logger.info("zc.bill.tm.r.0 not report") : this.logger.report(this.chargeInfos) }, Object.defineProperty(A.prototype, "shouldReportRoomTime", { "get": function get() { var e, t, A; return !(!(null === (e = this.stateCenter.rtm) || void 0 === e ? void 0 : e.stateCenter.appConfig) || !(null === (t = this.stateCenter.rtm) || void 0 === t ? void 0 : t.stateCenter.appConfig.speedlog_config) || 1 !== (null === (A = this.stateCenter.rtm) || void 0 === A ? void 0 : A.stateCenter.appConfig.speedlog_config.charge_info_report_no_playing)) }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "isReporting", { "get": function get() { return this.reporting }, "enumerable": !1, "configurable": !0 }), A.prototype.startChargeInfoTimer = function () { var e = this; if (this.chargeInfosTimer && (clearTimeout(Number(this.chargeInfosTimer)), this.chargeInfosTimer = null, this.shouldEnd)) return this.logger.info(o.ZEGO_BILLING_ACTION.START_CHARGE_INFO_TIMER + " chargeinfos timer report ended"), void (this.reporting = !1); this.chargeInfosTimer = setTimeout(function () { e.report(), e.startChargeInfoTimer() }, this.chargeInfosInterval) }, A.prototype.startChargeInfosUpload = function () { this.reporting || (this.reporting = !0, this.shouldReportRoomTime && this.report(), this.startChargeInfoTimer(), this.logger.info("zsc.sciu.0 call")) }, A.prototype.stopChargeInfosUpload = function () { this.logger.info("zsc.sciu.1 call"), this.chargeInfosTimer && this.shouldEnd && (this.logger.info("zsc.sciu.1 stop"), clearTimeout(Number(this.chargeInfosTimer)), this.chargeInfosTimer = null, this.shouldReportRoomTime && this.report(), this.reporting = !1, this.logger.info("zsc.sciu.1 chargeinfos timer report ended")) }, A.prototype.samplingChargeInfos = function () { return this.chargeInfos }, A }(); t.BillingTimer = n }, "9645": function _(e, t, r) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.ChargeInfosSaverWeb = void 0; var i = r(4367), o = function () { function A(e, t) { var A = this; this.logger = e, this.stateCenter = t, this.beforeunloadListener = function () { if (A.billingTimer.isReporting) { var e = A.billingTimer.samplingChargeInfos(); A.saveChargeInfosByLocalStorage(e) } }, this.bindListener(), this.bindDestroyListener() } return Object.defineProperty(A.prototype, "billingTimer", { "get": function get() { return this.stateCenter.billingTimer }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "KEY", { "get": function get() { var e; return "z_cginfos_cache_".concat(null === (e = this.stateCenter.rtm) || void 0 === e ? void 0 : e.stateCenter.appid) }, "enumerable": !1, "configurable": !0 }), A.prototype.bindListener = function () { window.addEventListener("beforeunload", this.beforeunloadListener) }, A.prototype.offListener = function () { window.removeEventListener("beforeunload", this.beforeunloadListener) }, A.prototype.bindDestroyListener = function () { var e = this; this.stateCenter.listenerList._engineDestroy.push(function () { e.offListener() }) }, A.prototype.saveChargeInfosByLocalStorage = function (e) { return this.logger.info(i.ZEGO_BILLING_ACTION.CHARGEINFO_SAVING_LOCALSTORAGE + " call"), localStorage.setItem(this.KEY, JSON.stringify(e)) }, A.prototype.getAndRemoveChargeInfosFromLocalStorage = function () { this.logger.info(i.ZEGO_BILLING_ACTION.CHARGEINFO_GET_AND_REMOVE_LOCALSTORAGE + " call"); var e = localStorage.getItem(this.KEY); return localStorage.removeItem(this.KEY), e }, A.prototype.report = function (e) { this.logger.report(e) }, A.prototype.checkAndReport = function () { this.logger.info(i.ZEGO_BILLING_ACTION.SAVED_CHARGEINFO_REPORT + " call"); var e = this.getAndRemoveChargeInfosFromLocalStorage(); if (null != e) { var t = JSON.parse(e); this.report(t), this.logger.info(i.ZEGO_BILLING_ACTION.SAVED_CHARGEINFO_REPORT + " reported") } }, A }(); t.ChargeInfosSaverWeb = o }, "4367": function _(e, t) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.ZEGO_BILLING_ACTION = void 0, function (e) { e.SAVED_CHARGEINFO_REPORT = "zc.bill.scir", e.CHARGEINFO_SAVING_LOCALSTORAGE = "zc.bill.cisl", e.CHARGEINFO_GET_AND_REMOVE_LOCALSTORAGE = "zc.bill.cigrl", e.START_CHARGE_INFO_TIMER = "zc.bill.tm.scit" }(t.ZEGO_BILLING_ACTION || (t.ZEGO_BILLING_ACTION = {})) }, "4864": function _(e, t, A) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.receiveNormal = t.sendNormal = t.captureNormal = t.receive = t.send = t.capture = void 0; var r = A(5123); t.capture = { "FPS": { "code": r.ExceptionCode.captureFpsToLow, "message": "The video capture frame rate is too low." }, "VOLUME": { "code": r.ExceptionCode.captureVolumeToLow, "message": "The capture volume is too low." } }, t.send = { "V_BITRATE": { "code": r.ExceptionCode.sendVideoBitrateToLow, "message": "The video bit rate sent is too low." }, "FPS": { "code": r.ExceptionCode.sendFpsToLow, "message": "The video frame rate sent is too low." }, "A_BITRATE": { "code": r.ExceptionCode.sendAudioBitrateToLow, "message": "The audio bit rate sent is too low." } }, t.receive = { "A_VOLUME": { "code": r.ExceptionCode.receiveVolumeToLow, "message": "The volume of audio received is too low." }, "A_DECODE": { "code": r.ExceptionCode.receiveAudioDecodedFail, "message": "The received audio failed to be decoded." }, "V_DECODE": { "code": r.ExceptionCode.receiveVideoDecodedFail, "message": "The received video failed to be decoded." }, "V_DECODED_FPS": { "code": r.ExceptionCode.receiveVideoFpsDecodedToLow, "message": "Received video decode frame rate is too low." }, "RENDER_VIDEO_FPS": { "code": r.ExceptionCode.renderVideoFpsToLow, "message": "The rendered video frame rate is too low." } }, t.captureNormal = { "FPS": { "code": r.ExceptionCode.captureFpsNormal, "message": "The video capture frame rate is normal." }, "VOLUME": { "code": r.ExceptionCode.captureVolumeNormal, "message": "The capture volume is normal." } }, t.sendNormal = { "V_BITRATE": { "code": r.ExceptionCode.sendVideoBitrateNormal, "message": "The video bit rate sent is normal." }, "FPS": { "code": r.ExceptionCode.sendFpsNormal, "message": "The video frame rate sent is normal." }, "A_BITRATE": { "code": r.ExceptionCode.sendAudioBitrateNormal, "message": "The audio bit rate sent is normal." } }, t.receiveNormal = { "A_VOLUME": { "code": r.ExceptionCode.receiveVolumeNormal, "message": "The volume of audio received is normal." }, "A_DECODE": { "code": r.ExceptionCode.receiveAudioDecodedNormal, "message": "The received audio successed to be decoded." }, "V_DECODE": { "code": r.ExceptionCode.receiveVideoDecodedNormal, "message": "The received video successed to be decoded." }, "V_DECODED_FPS": { "code": r.ExceptionCode.receiveVideoFpsDecodedNormal, "message": "Received video decode frame rate is normal." }, "RENDER_VIDEO_FPS": { "code": r.ExceptionCode.renderVideoFpsNormal, "message": "The rendered video frame rate is normal." } } }, "5601": function _(e, t, r) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.Exception = void 0; var i = r(4864), o = r(5123), n = r(1586), s = function () { function A(e, t, A, r) { this.stateCenter = e, this.parentEvent = r, this.results = {}, this.preTime = Date.now(), this.preTotalFps = 0, this.preIsNormal = {}, this.logger = t, this.streamId = A, this.initPreIsNormal(i.capture), this.initPreIsNormal(i.send), this.initPreIsNormal(i.receive) } return A.prototype.initPreIsNormal = function (e) { for (var t in e) this.preIsNormal[e[t].code] = !0 }, A.prototype.recordData = function (e, t, A) { var r = e.code, i = this.results[r] || []; if (i.push(A), i.length >= 5) { var o = i.includes(!1); this.preIsNormal[r] && !o && (this.uploadEventData(e), this.stateCenter.actionListener("exceptionUpdate", this.streamId, e)), !this.preIsNormal[r] && o && (this.uploadEventData(t), this.stateCenter.actionListener("exceptionUpdate", this.streamId, t)), this.preIsNormal[r] = o, i = [] } this.results[r] = i }, A.prototype.uploadEventData = function (e) { var t = this.stateCenter.reporter.createSpan(o.TRACER_LEVEL.I, { "key": this.parentEvent, "par": this.streamId }, { "key": "" }, n.ZegoRTCLogEvent.kZegoExceptionUpdate.event); t.setAttributes({ "code": n.ZegoRTCLogEvent.kZegoExceptionUpdate.code(e.code), "message": n.ZegoRTCLogEvent.kZegoExceptionUpdate.message(e.message) }), t.end() }, A.prototype.checkRemoteStats = function (e, t) { this.recordData(i.receive.A_VOLUME, i.receiveNormal.A_VOLUME, this.recvAudioVolume(e)), this.recordData(i.receive.A_DECODE, i.receiveNormal.A_DECODE, this.recvAudioDecode(e)), this.recordData(i.receive.V_DECODE, i.receiveNormal.V_DECODE, this.recvVideoDecode(e)), this.recordData(i.receive.V_DECODED_FPS, i.receiveNormal.V_DECODED_FPS, this.recvVideoDecodedFrameRate(e)), this.recordData(i.receive.RENDER_VIDEO_FPS, i.receiveNormal.RENDER_VIDEO_FPS, this.renderVideoFrameRate(e, t)) }, A.prototype.checkLocalStats = function (e) { this.recordData(i.capture.FPS, i.captureNormal.FPS, this.captureVideoFrameRate(e)), this.recordData(i.send.FPS, i.sendNormal.FPS, this.sendVideoFrameRate(e)), this.recordData(i.capture.VOLUME, i.captureNormal.VOLUME, this.sendAudioVolume(e)), this.recordData(i.send.V_BITRATE, i.sendNormal.V_BITRATE, this.sendVideoBitrate(e)), this.recordData(i.send.A_BITRATE, i.sendNormal.A_BITRATE, this.sendAudioBitrate(e)) }, A.prototype.sendVideoBitrate = function (e) { return !("1" === e.videoMuteState || e.videoQuality > 2) && 0 === e.videoBitrate }, A.prototype.sendVideoFrameRate = function (e) { var t = e.videoTransferFPS, A = e.videoFPS; return "1" !== e.videoMuteState && (A >= 10 && t < 5 || A < 10 && A >= 5 && t <= 1) }, A.prototype.captureVideoFrameRate = function (e) { var t = e.videoTargetFPS, A = e.videoFPS; return "1" !== e.videoMuteState && (t >= 10 && A < 5 || t < 10 && t >= 5 && A <= 1) }, A.prototype.sendAudioVolume = function (e) { return "1" !== e.audioMuteState && Math.floor(32767 * e.audioLevel) < Math.floor(327.67) }, A.prototype.sendAudioBitrate = function (e) { var t = e.audioBitrate; return !("1" === e.audioMuteState || e.audioQuality > 2) && (0 === t || e.audioTargetBitrate >= 48 && t < 22) }, A.prototype.recvAudioVolume = function (e) { return !("1" === e.audioMuteState || e.audioQuality > 2) && e.audioBitrate > 0 && Math.floor(32767 * e.audioLevel) < Math.floor(327.67) }, A.prototype.recvAudioDecode = function (e) { return !("1" === e.audioMuteState || e.audioQuality > 2) && e.audioBitrate > 0 && 0 === e.audioFPS }, A.prototype.recvVideoDecode = function (e) { return !("1" === e.videoMuteState || e.videoQuality > 2) && e.videoBitrate > 0 && 0 === e.videoTransferFPS }, A.prototype.recvVideoDecodedFrameRate = function (e) { var t = e.videoFPS, A = e.videoTransferFPS; return "1" !== e.videoMuteState && (t >= 10 && A < 5 || t < 10 && t >= 5 && A <= 1) }, A.prototype.renderVideoFrameRate = function (e, t) { var A, r = e.videoTransferFPS; if ("1" === e.videoMuteState) return !1; for (var i = document.querySelectorAll("video") || [], o = 0; o < i.length; o++) { var n = i[o]; try { if ((n.srcObject === t || (null === (A = n.srcObject) || void 0 === A ? void 0 : A.getVideoTracks()[0]) === (null == t ? void 0 : t.getVideoTracks()[0])) && n.getVideoPlaybackQuality) { var s = n.getVideoPlaybackQuality().totalVideoFrames, a = Date.now(), c = (s - this.preTotalFps) / (a - this.preTime) * 1e3; return this.preTotalFps = s, this.preTime = a, r > 10 && c < 5 || r <= 10 && r >= 5 && c <= 1 } } catch (e) { } } return !1 }, A }(); t.Exception = s }, "4651": function _(e, t, r) { "use strict"; var i = this && this.__awaiter || function (e, t, A, r) { return new (A || (A = Promise))(function (i, o) { function n(e) { try { a(r.next(e)) } catch (e) { o(e) } } function s(e) { try { a(r.throw(e)) } catch (e) { o(e) } } function a(e) { var t; e.done ? i(e.value) : (t = e.value, t instanceof A ? t : new A(function (e) { e(t) })).then(n, s) } a((r = r.apply(e, t || [])).next()) }) }, o = this && this.__generator || function (e, t) { var A, r, i, o, n = { "label": 0, "sent": function sent() { if (1 & i[0]) throw i[1]; return i[1] }, "trys": [], "ops": [] }; return o = { "next": s(0), "throw": s(1), "return": s(2) }, "function" == typeof Symbol && (o[Symbol.iterator] = function () { return this }), o; function s(s) { return function (a) { return function (s) { if (A) throw new TypeError("Generator is already executing."); for (; o && (o = 0, s[0] && (n = 0)), n;)try { if (A = 1, r && (i = 2 & s[0] ? r.return : s[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, s[1])).done) return i; switch (r = 0, i && (s = [2 & s[0], i.value]), s[0]) { case 0: case 1: i = s; break; case 4: return n.label++, { "value": s[1], "done": !1 }; case 5: n.label++, r = s[1], s = [0]; continue; case 7: s = n.ops.pop(), n.trys.pop(); continue; default: if (!((i = (i = n.trys).length > 0 && i[i.length - 1]) || 6 !== s[0] && 2 !== s[0])) { n = 0; continue } if (3 === s[0] && (!i || s[1] > i[0] && s[1] < i[3])) { n.label = s[1]; break } if (6 === s[0] && n.label < i[1]) { n.label = i[1], i = s; break } if (i && n.label < i[2]) { n.label = i[2], n.ops.push(s); break } i[2] && n.ops.pop(), n.trys.pop(); continue }s = t.call(e, n) } catch (e) { s = [6, e], r = 0 } finally { A = i = 0 } if (5 & s[0]) throw s[1]; return { "value": s[0] ? s[1] : void 0, "done": !0 } }([s, a]) } } }; Object.defineProperty(t, "__esModule", { "value": !0 }), t.CheckModule = void 0; var n = r(3332), s = function () { function A() { var e = this; this.iceconnectionstatechangeTimes = 0, this.isCheckAll = !1; var t = document.createElement("canvas"); t.getContext("2d").fillStyle = "rgba(255, 255, 255, 0)"; try { this.localStream = t.captureStream() } catch (e) { console.error("canvas captureStream error", e) } this.timer = setTimeout(function () { e.resolve("Detection timeout"), e.hangup() }, 5e3) } return A.prototype.checkSupportByType = function (e) { return i(this, void 0, void 0, function () { var t, A, r = this; return o(this, function (i) { switch (i.label) { case 0: return this.checkType = e, t = {}, this.localPc = new RTCPeerConnection(t), this.remotePc = new RTCPeerConnection(t), A = new Promise(function (e) { return r.resolve = e }), this.localPc.addEventListener("icecandidate", function (e) { return r.onIceCandidate(r.localPc, e) }), this.remotePc.addEventListener("icecandidate", function (e) { return r.onIceCandidate(r.remotePc, e) }), this.remotePc.addEventListener("iceconnectionstatechange", function (t) { "connected" === r.remotePc.iceConnectionState && (r.iceconnectionstatechangeResult = !0), 2 == ++r.iceconnectionstatechangeTimes && r.iceCandidate && (clearTimeout(r.timer), r.resolve("connected" === r.remotePc.iceConnectionState || "The browser does not support ".concat(e, " format")), r.hangup()) }), this.localStream.getTracks().forEach(function (e) { return r.localPc.addTrack(e, r.localStream) }), [4, this.check(e)]; case 1: return i.sent(), [4, A]; case 2: return [2, i.sent()] } }) }) }, A.prototype.check = function (e) { return i(this, void 0, void 0, function () { var t, A; return o(this, function (r) { switch (r.label) { case 0: return r.trys.push([0, 2, , 3]), [4, this.localPc.createOffer({ "offerToReceiveAudio": !0, "offerToReceiveVideo": !0 })]; case 1: return (t = r.sent()).sdp = n.SdpUtil.getSDPByVideDecodeType(t.sdp, e), this.onCreateOfferSuccess(t), [3, 3]; case 2: return A = r.sent(), this.onCreateSessionDescriptionError(A), [3, 3]; case 3: return [2] } }) }) }, A.prototype.onCreateOfferSuccess = function (e) { return i(this, void 0, void 0, function () { var t, A, r, i; return o(this, function (o) { switch (o.label) { case 0: return o.trys.push([0, 2, , 3]), [4, this.localPc.setLocalDescription(e)]; case 1: return o.sent(), [3, 3]; case 2: return t = o.sent(), this.onSetSessionDescriptionError(t), [2]; case 3: return o.trys.push([3, 5, , 6]), [4, this.remotePc.setRemoteDescription(e)]; case 4: return o.sent(), [3, 6]; case 5: return A = o.sent(), this.onSetSessionDescriptionError(A), [2]; case 6: return o.trys.push([6, 9, , 10]), [4, this.remotePc.createAnswer()]; case 7: return r = o.sent(), [4, this.onCreateAnswerSuccess(r)]; case 8: return o.sent(), [3, 10]; case 9: return i = o.sent(), this.onCreateSessionDescriptionError(i), [2]; case 10: return [2] } }) }) }, A.prototype.onCreateAnswerSuccess = function (e) { return i(this, void 0, void 0, function () { var t, A; return o(this, function (r) { switch (r.label) { case 0: return r.trys.push([0, 2, , 3]), [4, this.remotePc.setLocalDescription(e)]; case 1: return r.sent(), [3, 3]; case 2: return t = r.sent(), this.onSetSessionDescriptionError(t), [2]; case 3: return r.trys.push([3, 5, , 6]), [4, this.localPc.setRemoteDescription(e)]; case 4: return r.sent(), [3, 6]; case 5: return A = r.sent(), this.onSetSessionDescriptionError(A), [2]; case 6: return [2] } }) }) }, A.prototype.onIceCandidate = function (e, t) { return i(this, void 0, void 0, function () { var A; return o(this, function (r) { switch (r.label) { case 0: return r.trys.push([0, 2, , 3]), [4, this.getOtherPc(e).addIceCandidate(t.candidate)]; case 1: return r.sent(), [3, 3]; case 2: return A = r.sent(), console.error(this.checkType, "".concat(this.getPcName(e), " addIceCandidate error"), A), clearTimeout(this.timer), this.hangup(), this.resolve(A), [3, 3]; case 3: return "remotePc" === this.getPcName(e) && t.candidate && (this.iceCandidate = !0), this.iceconnectionstatechangeResult && "localPc" === this.getPcName(e) && (clearTimeout(this.timer), this.hangup(), this.resolve(!0)), [2] } }) }) }, A.prototype.getOtherPc = function (e) { return e === this.localPc ? this.remotePc : this.localPc }, A.prototype.getPcName = function (e) { return e === this.localPc ? "localPc" : "remotePc" }, A.prototype.onCreateSessionDescriptionError = function (e) { console.error("Failed to create session description: ".concat(e.toString())), clearTimeout(this.timer), this.hangup(), this.resolve(e) }, A.prototype.onSetSessionDescriptionError = function (e) { console.error("Failed to set session description: ".concat(e.toString())), clearTimeout(this.timer), this.hangup(), this.resolve(e) }, A.prototype.hangup = function () { this.localPc.close(), this.remotePc.close(), this.iceconnectionstatechangeTimes = 0, this.localStream.getTracks().forEach(function (e) { return e.stop() }) }, A }(); t.CheckModule = s }, "4140": function _(A, r, o) { "use strict"; var n, s = this && this.__extends || (n = function i(e, t) { return (n = Object.setPrototypeOf || { "__proto__": [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var A in t) Object.prototype.hasOwnProperty.call(t, A) && (e[A] = t[A]) })(e, t) }, function (e, A) { if ("function" != typeof A && null !== A) throw new TypeError("Class extends value " + String(A) + " is not a constructor or null"); function t() { this.constructor = e } n(e, A), e.prototype = null === A ? Object.create(A) : (t.prototype = A.prototype, new t) }); Object.defineProperty(r, "__esModule", { "value": !0 }), r.RetryDispatchHandler = void 0; var a = o(2790), c = o(5123), g = o(5123), u = o(93), l = o(1586), h = o(2532), d = l.ZegoRTCLogEvent.kZegoPublishStreamResource, C = l.ZegoRTCLogEvent.kZegoPlayStreamResource, I = function (t) { function e(e, A, r, i) { var o = t.call(this) || this; return o.retryActiveCount = 1, o.RETRY_MAX_TIME = 90, o.logger = e, o.stateCenter = A, o.rtm = r, o.streamCenter = i, o } return s(e, t), e.prototype.initStream = function (e, t, A) { this.streamID = e, this.playOption = t, this.isPublish = A }, e.prototype.active = function (e) { var t, A, r, i, o, n, s = this; if (this.logger.info(u.ZEGO_WEBRTC_ACTION.RDH_ACTIVE + " retry call " + this.streamID), this.isPublish) { var a = null === (A = null === (t = this.streamCenter) || void 0 === t ? void 0 : t.publisherList[this.streamID]) || void 0 === A ? void 0 : A.publisher; o = (null == a ? void 0 : a.isRePublish) ? l.ZegoRTCLogEvent.kZegoRePublish : l.ZegoRTCLogEvent.kZegoStartPublish, n = l.ZegoRTCLogEvent.kZegoPublishStreamResource } else { var d = null === (i = null === (r = this.streamCenter) || void 0 === r ? void 0 : r.playerList[this.streamID]) || void 0 === i ? void 0 : i.player; o = (null == d ? void 0 : d.isRePlay) ? l.ZegoRTCLogEvent.kZegoRePlay : l.ZegoRTCLogEvent.kZegoStartPlay, n = l.ZegoRTCLogEvent.kZegoPlayStreamResource } var C = this.stateCenter.reporter.createSpan(c.TRACER_LEVEL.H, { "key": o.event, "par": this.streamID }, { "key": "" }, n.event); if (this.retryTimer) return this.logger.info(u.ZEGO_WEBRTC_ACTION.RDH_ACTIVE + " has active, ignore"), this.stateCenter.reporter.setError(C, h.errorCodeList.DISPATCH_ERROR, "has active, ignore"), !1; var I = this.rtm.isDisConnect() && this.stateCenter.networkState == g.ENUM_NETWORK_STATE.offline; if (I) { if (this.logger.info(u.ZEGO_WEBRTC_ACTION.RDH_ACTIVE + " check if really offline"), this.retryNetCount >= this.retryNetMaxTimes) return this.logger.warn(u.ZEGO_WEBRTC_ACTION.RDH_ACTIVE + " network is broken, stop retry"), !1 } else this.retryNetCount = 0; if (this.isOverTime) return this.logger.warn(u.ZEGO_WEBRTC_ACTION.RDH_ACTIVE + " retry over time, stop retry"), this.stateCenter.reporter.setError(C, h.errorCodeList.DISPATCH_ERROR, "retry over time, stop retry"), !1; if (!this.rtm.isLogin()) { this.stopMaxTime(), this.invalid(); var E = this.isPublish ? this.streamCenter.publisherList[this.streamID] : this.streamCenter.playerList[this.streamID]; E && (E.isReDispatch = !0) } var p = this.retryActiveCount - 1; this.retryDispatchSpan || (this.retryDispatchSpan = C, this.stateCenter.reporter.setSpanInMap(C, { "key": n.event, "par": this.streamID })); var f = this.playOption && 2 == this.playOption.resourceMode ? 1 : 0, B = { "stream_id": this.streamID, "ptype": this.isPublish ? "push" : "pull", "signals": this.streamCenter.getAllInUseUrl(), "header_kvs": [{ "key": "grpc-metadata-push", "value": this.playOption && this.playOption.cdnUrl || "" }], "retry": p, "center_ability": !0, "dispatch_type": f }; return this.retryTimer && clearTimeout(this.retryTimer), this.retryTimer = setTimeout(function () { s.retryTimer = null, I ? s.retryNetCount++ : s.retryActiveCount++; var e = s.streamCenter.getRoomByStreamID(s.streamID), t = s.rtm.service.sendMessage("webrtc_url", B, function (e, t) { s.handleFetchWebRtcUrlRsp(e) }, function (e, t) { s.handleFetchWebRtcUrlRsp(e) }, void 0, { "sessionID": null == e ? void 0 : e.sessionID, "roomID": null == e ? void 0 : e.roomID, "roomSessionID": null == e ? void 0 : e.roomSessionID }); s.isPublish && t ? s.streamCenter.publisherList[s.streamID] && (s.streamCenter.publisherList[s.streamID].seq = t) : t && s.streamCenter.playerList[s.streamID] && (s.streamCenter.playerList[s.streamID].seq = t) }, "number" == typeof e ? e : 1e3 * this.retryActiveInterval), this.logger.info(u.ZEGO_WEBRTC_ACTION.RDH_ACTIVE + " call success"), !0 }, e.prototype.startMaxTime = function () { var e = this; this.logger.info("zc.tdh.smt ".concat(this.streamID, " call")), this.maxTimer || (this.maxTimer = setTimeout(function () { e.logger.warn("".concat(u.ZEGO_WEBRTC_ACTION.RDH_MAX_TIME, " ").concat(e.streamID, " dispatch over max time ").concat(e.RETRY_MAX_TIME, "s stop retry")), e.isOverTime = !0, e.invalid(); var t = l.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kPlayDispatchError; t.message = t.message + " try max limit", e.isPublish ? e.streamCenter.onPublishStateUpdate(g.ENUM_PUBLISH_STATE_UPDATE.error, e.streamID, t) : e.streamCenter.onPlayStateUpdate(g.ENUM_PLAY_STATE_UPDATE.error, e.streamID, t) }, 1e3 * this.RETRY_MAX_TIME), this.logger.info("zc.tdh.smt ".concat(this.streamID, " maxTimer=").concat(this.maxTimer))) }, e.prototype.stopMaxTime = function () { this.logger.info("zc.tdh.stmt ".concat(this.streamID, " maxTimer=").concat(this.maxTimer)), this.maxTimer && clearTimeout(this.maxTimer), this.maxTimer = null }, e.prototype.onactive = function () { for (var e = [], t = 0; t < arguments.length; t++)e[t] = arguments[t] }, e.prototype.handleFetchWebRtcUrlRsp = function (e) { var t, A, r, i, o, n, s, a, c, I, E; if (e.code && [h.errorCodeList.TIMEOUT.code].includes(e.code)) this.active(); else { if (e.code && [h.errorCodeList.SOCKET_CLOSE.code].includes(e.code)) return this.stopMaxTime(), this.invalid(), void (this.isPublish ? this.streamCenter.publisherList[this.streamID].isReDispatch = !0 : this.streamCenter.playerList[this.streamID].isReDispatch = !0); var p = e, f = p.body.stream_id, B = !1, _ = l.ZegoRTCLogEvent.kZegoTaskPlayStart.error; if (this.isPublish && (!this.streamCenter.publisherList[f] || p.header.seq !== this.streamCenter.publisherList[this.streamID].seq)) return this.logger.warn(u.ZEGO_WEBRTC_ACTION.RDH_WEBRTC_URL_RSP + " seq is not match, ignore " + this.streamID), this.stopMaxTime(), void this.invalid(); if (!(this.isPublish || this.streamCenter.playerList[this.streamID] && p.header.seq === this.streamCenter.playerList[this.streamID].seq)) return this.logger.warn(u.ZEGO_WEBRTC_ACTION.RDH_WEBRTC_URL_RSP + " seq is not match, ignore " + this.streamID), this.stopMaxTime(), void this.invalid(); if (this.stateCenter.clientIP = p.body.clientip || "", 0 === p.body.err_code || 2 != p.body.need_action) if (0 === p.body.err_code || 1 === p.body.need_action || [3102].includes(p.body.err_code)) { if (this.stopMaxTime(), this.invalid(), p.body.urls && Array.isArray(p.body.urls) && p.body.urls.length > 0 ? B = !0 : this.logger.error(u.ZEGO_WEBRTC_ACTION.RDH_WEBRTC_URL_RSP + " signal url is empty"), "push" === p.body.ptype && this.streamCenter.publisherList[f]) { if (!B) return null === (o = this.retryDispatchSpan) || void 0 === o || o.setAttributes({ "try_cnt": d.try_cnt(this.retryActiveCount) }), this.stateCenter.reporter.setError(this.retryDispatchSpan, l.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kPublishDispatchError), this.retryDispatchSpan = null, void this.streamCenter.onPublishStateUpdate(g.ENUM_PUBLISH_STATE_UPDATE.error, f, l.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kPublishDispatchError); var m = this.streamCenter.publisherList[f]; this.stateCenter.publishStreamList[f] ? (m.ttl = p.body.hosts_ttl ? (new Date).getTime() + 1e3 * p.body.hosts_ttl : 0, m.isCenterNode = "boolean" == typeof p.body.is_center_node && p.body.is_center_node, m.serverUrls = p.body.urls, null === (n = this.retryDispatchSpan) || void 0 === n || n.setAttributes({ "urls": d.urls(m.serverUrls), "is_center": d.is_center(m.isCenterNode), "try_cnt": d.try_cnt(this.retryActiveCount) }), null === (s = this.retryDispatchSpan) || void 0 === s || s.end(), this.retryDispatchSpan = null, this.streamCenter.startPublishingStream(f)) : this.logger.error(u.ZEGO_WEBRTC_ACTION.RDH_WEBRTC_URL_RSP + " no streamid to publish") } else if ("pull" == p.body.ptype && this.streamCenter.playerList[f]) { var Q; if (!B) return (Q = JSON.parse(JSON.stringify(1900001004 === (null === (a = p.body) || void 0 === a ? void 0 : a.err_code) ? _.kPlayStreamNotFound : _.kPlayDispatchError))).message = Q.message + (p.body.err_code ? " server error:" + p.body.err_code : ""), 3102 === p.body.err_code && (Q = l.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kPlayUnsupportedResourceMode), null === (c = this.retryDispatchSpan) || void 0 === c || c.setAttributes({ "try_cnt": C.try_cnt(this.retryActiveCount) }), this.stateCenter.reporter.setError(this.retryDispatchSpan, Q), void this.streamCenter.onPlayStateUpdate(g.ENUM_PLAY_STATE_UPDATE.error, f, Q); var y = this.streamCenter.playerList[f]; y.ttl = p.body.hosts_ttl ? (new Date).getTime() + 1e3 * p.body.hosts_ttl : 0, y.isCenterNode = "boolean" == typeof p.body.is_center_node && p.body.is_center_node, y.serverUrls = p.body.urls, null === (I = this.retryDispatchSpan) || void 0 === I || I.setAttributes({ "urls": C.urls(y.serverUrls), "is_center": C.is_center(y.isCenterNode), "try_cnt": C.try_cnt(this.retryActiveCount) }), null === (E = this.retryDispatchSpan) || void 0 === E || E.end(), this.retryDispatchSpan = null, this.streamCenter.startPlayingStream(f, this.stateCenter.useNetAgent, this.streamCenter.playSuccessCallBackList[f]) } } else this.retryActiveInterval = Math.floor(3 * Math.random()) + 3, 2 == this.retryActiveCount && ((Q = JSON.parse(JSON.stringify("pull" === (null === (r = p.body) || void 0 === r ? void 0 : r.ptype) && 1900001004 === (null === (i = p.body) || void 0 === i ? void 0 : i.err_code) ? _.kPlayStreamNotFound : _.kPlayDispatchError))).message = Q.message + (p.body.err_code ? " server error:" + p.body.err_code : ""), "push" === p.body.ptype ? this.streamCenter.onPublishStateUpdate(g.ENUM_PUBLISH_STATE_UPDATE.retry, f, Q) : this.streamCenter.onPlayStateUpdate(g.ENUM_PLAY_STATE_UPDATE.retry, f, Q)), this.active(); else this.retryActiveInterval = p.body.action_delay / 1e3 || Math.floor(3 * Math.random()) + 3, 2 == this.retryActiveCount && ((Q = JSON.parse(JSON.stringify("pull" === (null === (t = p.body) || void 0 === t ? void 0 : t.ptype) && 1900001004 === (null === (A = p.body) || void 0 === A ? void 0 : A.err_code) ? _.kPlayStreamNotFound : _.kPlayDispatchError))).message = Q.message + (p.body.err_code ? " server error:" + p.body.err_code : ""), "push" === p.body.ptype ? this.streamCenter.onPublishStateUpdate(g.ENUM_PUBLISH_STATE_UPDATE.retry, f, Q) : this.streamCenter.onPlayStateUpdate(g.ENUM_PLAY_STATE_UPDATE.retry, f, Q)), this.active() } }, e }(a.RetryHandler); r.RetryDispatchHandler = I }, "3525": function _(A, r, o) { "use strict"; var n, s = this && this.__extends || (n = function i(e, t) { return (n = Object.setPrototypeOf || { "__proto__": [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var A in t) Object.prototype.hasOwnProperty.call(t, A) && (e[A] = t[A]) })(e, t) }, function (e, A) { if ("function" != typeof A && null !== A) throw new TypeError("Class extends value " + String(A) + " is not a constructor or null"); function t() { this.constructor = e } n(e, A), e.prototype = null === A ? Object.create(A) : (t.prototype = A.prototype, new t) }); Object.defineProperty(r, "__esModule", { "value": !0 }), r.RetryStreamHandler = void 0; var a = o(5123), c = o(2790), g = o(1586), u = o(93), l = o(4028), h = o(7045), d = g.ZegoRTCLogEvent.kZegoTaskSDKPublishStream, C = g.ZegoRTCLogEvent.kZegoTaskSDKPlayStream, I = function (t) { function e(e, A, r, i) { var o = t.call(this) || this; return o.logger = e, o.stateCenter = A, o.streamCenter = r, o.isPublish = i, o.serverUrls = [], o } return s(e, t), e.prototype.initStream = function (e, t) { this.streamID = e, this.serverUrls = t }, e.prototype.activePublish = function (e) { var t = this; if (this.logger.info("zc.tsh.a retry call " + this.streamID), this.retryTimer) return this.logger.info("zc.tsh.a has active, ignore"), !1; var A = this.stateCenter.networkState == a.ENUM_NETWORK_STATE.offline; if (A) { if (this.logger.info("zc.tsh.a check if really offline. " + this.retryNetCount), this.retryNetCount >= this.retryNetMaxTimes) return this.logger.warn("zc.tsh.a network is broken, stop retry"), !1 } else this.retryNetCount = 0; if (this.isOverTime) return this.logger.warn("zc.tsh.a retry over time, stop retry"), !1; if (1 == this.retryActiveCount) this.retryActiveInterval = Math.floor(Math.random() * (1 - this.RETRY_START_TIME_INTERVAL) + this.RETRY_START_TIME_INTERVAL); else { var r = Math.pow(2, Math.floor(this.retryActiveCount / this.RETRY_CONTINUE_COUNT + 1) - 1); this.retryActiveInterval = r > this.RETRY_MAX_TIME_INTERVAL ? this.RETRY_MAX_TIME_INTERVAL : r } var i = this.streamCenter.publisherList[this.streamID].publisher, o = this.serverUrls[0], n = ["unified_rtc", "unified_l3"].includes(o); if (!n) { var s = this.serverUrls, u = i.signal ? i.signal.server : ""; s.forEach(function (e, A) { return A <= s.indexOf(u) && t.serverUrls.push(e) }), s.splice(0, s.indexOf(u) + 1), o = this.serverUrls[this.retryActiveCount % this.serverUrls.length == 0 ? this.serverUrls.length - 1 : this.retryActiveCount % this.serverUrls.length - 1] } var l = "number" == typeof e ? e : 1e3 * this.retryActiveInterval; this.stateCenter.reporter.spanSetAttributes({ "key": i.parentSpanKey, "par": this.streamID }, { "wait_consume": g.ZegoRTCLogEvent.kZegoStartPublish.wait_consume(l) }); var h = function c() { t.logger.info("zc.tsh.a stream ".concat(t.streamID, " : connect to ").concat(n ? "unified signal server" : "signal server " + o)), t.retryTimer && clearTimeout(t.retryTimer), t.retryTimer = null, A ? t.retryNetCount++ : t.retryActiveCount++, t.streamCenter.connectPublishServer(t.streamID, o) }; return 0 !== l ? this.retryTimer = setTimeout(h, l) : h(), this.logger.info("zc.tsh.a call success. delay: " + l), !0 }, e.prototype.activePull = function (e, t) { var A = this; if (this.logger.info("zc.tsh.a retry call " + this.streamID), t && (this.playStreamSuccess = t), this.retryTimer) return this.logger.info("zc.tsh.a has active, ignore"), !1; var r = this.stateCenter.networkState == a.ENUM_NETWORK_STATE.offline; if (r) { if (this.logger.info("zc.tsh.a check if really offline. " + this.retryNetCount), this.retryNetCount >= this.retryNetMaxTimes) return this.logger.warn("zc.tsh.a network is broken, stop retry"), !1 } else this.retryNetCount = 0; if (this.isOverTime) return this.logger.warn("zc.tsh.a retry over time, stop retry"), !1; if (1 == this.retryActiveCount) this.retryActiveInterval = Math.floor(Math.random() * (1 - this.RETRY_START_TIME_INTERVAL) + this.RETRY_START_TIME_INTERVAL); else { var i = Math.pow(2, Math.floor(this.retryActiveCount / this.RETRY_CONTINUE_COUNT + 1) - 1); this.retryActiveInterval = i > this.RETRY_MAX_TIME_INTERVAL ? this.RETRY_MAX_TIME_INTERVAL : i } var o = this.streamCenter.playerList[this.streamID].player, n = this.serverUrls, s = o.signal ? o.signal.server : "", c = this.serverUrls[0], u = ["unified_rtc", "unified_l3"].includes(c); u || (n.forEach(function (e, t) { return t <= n.indexOf(s) && A.serverUrls.push(e) }), n.splice(0, n.indexOf(s) + 1), c = this.serverUrls[this.retryActiveCount % this.serverUrls.length == 0 ? this.serverUrls.length - 1 : this.retryActiveCount % this.serverUrls.length - 1]); var l = "number" == typeof e ? e : 1e3 * this.retryActiveInterval; return this.stateCenter.reporter.spanSetAttributes({ "key": o.parentSpanKey, "par": this.streamID }, { "wait_consume": g.ZegoRTCLogEvent.kZegoStartPlay.wait_consume(l) }), this.retryTimer = setTimeout(function () { A.logger.warn("zc.tsh.a stream ".concat(A.streamID, " : connect to ").concat(u ? "unified signal server" : "signal server " + c)), A.retryTimer && clearTimeout(A.retryTimer), A.retryTimer = null, r ? A.retryNetCount++ : A.retryActiveCount++, A.streamCenter.connectPlayServer(A.streamID, A.playStreamSuccess, c) }, l), this.logger.info("zc.tsh.a call success. delay: " + l), !0 }, e.prototype.startMaxTime = function () { var e = this; this.logger.info("zc.tsh.smt ".concat(this.streamID, " call")), this.maxTimer ? this.logger.warn("zc.tsh.smt max timer") : (this.maxTimer = setTimeout(function () { if (e.logger.warn("zc.tsh.smt ".concat(e.streamID, " over max time ").concat(e.RETRY_MAX_TIME, "s, stop retry")), e.isOverTime = !0, e.invalid(), e.isPublish) { if (!e.streamCenter.publisherList[e.streamID]) return void e.logger.info("zc.tsh.smt streamID " + e.streamID + " publish no found"); e.publishStateHandle(a.ENUM_PUBLISH_STATE_UPDATE.error, e.streamID, g.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kPublishRetryTimeoutError, !0) } else { if (!e.streamCenter.playerList[e.streamID]) return void e.logger.info("zc.tsh.smt streamID " + e.streamID + " play no found"); e.playStateHandle(a.ENUM_PLAY_STATE_UPDATE.error, e.streamID, g.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kPlayRetryTimeoutError, !0) } }, 1e3 * this.RETRY_MAX_TIME), this.logger.info("zc.tsh.smt maxTimer=".concat(this.maxTimer))) }, e.prototype.stopMaxTime = function () { this.logger.info("zc.tsh.stmt streamID " + this.streamID + " maxTimer=" + this.maxTimer), this.maxTimer && clearTimeout(this.maxTimer), this.maxTimer = null }, e.prototype.onactive = function () { for (var e = [], t = 0; t < arguments.length; t++)e[t] = arguments[t] }, e.prototype.retryNextSignal = function (e) { var t, A; if (this.stateCenter.networkState == a.ENUM_NETWORK_STATE.offline) return !0; if (this.isPublish) { var r = this.streamCenter.publisherList[this.streamID]; if (r.publisher.state == a.ENUM_PUBLISH_STATE.stop && [g.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kSessionTimeoutError.code, g.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kPublishNegoTimeoutError.code].includes(e.code)) return !0; if (r.isCenterNode && (null === (t = r.publisher.signal) || void 0 === t ? void 0 : t.wsReadyState) == h.SocketState.OPEN) return !1; if (!r.isCenterNode && [g.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kPublishSessionClosedError.code].includes(e.code)) { var i = e.message.match(/reason:(\d+)/); return !["26"].includes(i ? i[1] : "") } return !0 } var o = this.streamCenter.playerList[this.streamID]; return !(o.player.state != a.ENUM_PLAY_STATE.stop || ![g.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kSessionTimeoutError.code, g.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kPlayNegoTimeoutError.code].includes(e.code)) || (!o.isCenterNode || (null === (A = o.player.signal) || void 0 === A ? void 0 : A.wsReadyState) != h.SocketState.OPEN) && (!(!o.isCenterNode && [g.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kPlaySessionClosedError.code].includes(e.code)) || (i = e.message.match(/reason:(\d+)/), !["24", "26", "28"].includes(i ? i[1] : ""))) }, e.prototype.publishStateHandle = function (e, t, A, r, i, o) { this.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISH_STATE_HANDLE + " call " + t + " " + (A ? A.code + "" : "") + " " + r + " " + JSON.stringify(i) + " " + o); var n = r || this.RETRY_MAX_TIME < 3; if (!n && A && (l.ClientUtil.isReDispatch(A) || 0 == this.serverUrls.length)) return this.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISH_STATE_HANDLE + " stop " + n + " " + JSON.stringify(this.serverUrls)), this.stopMaxTime(), this.retryTimer && clearTimeout(this.retryTimer), this.retryTimer = null, void this.streamCenter.onPublishStateUpdate(e, t, A); var s = this.streamCenter.publisherList[t], c = s.publisher; if (!n && A && 0 !== A.code) { this.maxTimer || n || this.startMaxTime(), this.stateCenter.publishStreamList[t].state = a.ENUM_PUBLISH_STREAM_STATE.retryPublish; var g = c.localStream, h = c.videoInfo, d = c.mediaStreamConfig, C = c.publishOption; if (0 != c.sessionId && c.signal && c.shouldSendCloseSession() && (c.signal.sendCloseSession((0, a.getSeq)(), c.sessionId, 1), c.signal.removeSession(c.sessionId), c.closeSessionSignal = !0), c.resetPublish(), !n && !this.retryNextSignal(A)) { if (this.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISH_STATE_HANDLE + " retry current signal "), this.rePublishSpan(t, A, c), s.isCenterNode) { this.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISH_STATE_HANDLE + " current node " + c.gwNode + " failed " + JSON.stringify(c.retryFailGwNodes)); var I = c.retryFailGwNodes.findIndex(function (e) { return e === c.gwNode }); I >= 0 && c.retryFailGwNodes.splice(I, 1), c.retryFailGwNodes.push(c.gwNode), this.retryNewGwNode(c, A, i, o) } return this.startRetryTimer && clearTimeout(this.startRetryTimer), this.startRetryTimer = null, this.startRetryTimer = setTimeout(function () { c.state == a.ENUM_PUBLISH_STATE.stop && c.startPublish(t, g, h, d, C) }, 1e3), void (A && 0 !== A.code && this.streamCenter.onPublishStateUpdate(2, t, A)) } this.streamCenter.removeStreamFromSignal(!0, t) } if (n) return this.stopMaxTime(), this.invalid(), 1 === e && c.resetPublish(), (null == A ? void 0 : A.code) && this.stateCenter.reporter.spanSetAttributes({ "key": c.parentSpanKey, "par": t }, A), void this.streamCenter.onPublishStateUpdate(e, t, A); A && 0 !== A.code && this.activePublish(void 0) && (c && (c.isExternal = !1), this.rePublishSpan(t, A, c), this.streamCenter.onPublishStateUpdate(2, t, A)), this.logger.info(u.ZEGO_WEBRTC_ACTION.PUBLISH_STATE_HANDLE + " end " + t) }, e.prototype.needReDispatchError = function (e) { return [g.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kPublishNetProbePoor.code, g.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kPlayNetProbePoor.code].includes(e.code) }, e.prototype.playStateHandle = function (e, t, A, r, i, o) { var n = this; this.logger.info(u.ZEGO_WEBRTC_ACTION.PLAY_STATE_HANDLE + " call " + t + " " + (A ? A.code + "" : "") + " " + r + " " + JSON.stringify(i) + " " + o); var s = r || this.RETRY_MAX_TIME < 3; if (!s && A && (l.ClientUtil.isReDispatch(A) || 0 == this.serverUrls.length)) return this.logger.info(u.ZEGO_WEBRTC_ACTION.PLAY_STATE_HANDLE + " stop " + s + " " + JSON.stringify(this.serverUrls)), this.stopMaxTime(), this.retryTimer && clearTimeout(this.retryTimer), this.retryTimer = null, void this.streamCenter.onPlayStateUpdate(e, t, A); var c = this.streamCenter.playerList[t], g = c.player; if (!s && A && 0 !== A.code) { !this.maxTimer && !s && this.startMaxTime(); var h = g.playOption; if (0 != g.sessionId && g.signal && g.shouldSendCloseSession() && (g.signal.sendCloseSession((0, a.getSeq)(), g.sessionId, 1), g.signal.removeSession(g.sessionId), g.closeSessionSignal = !0), g.resetPlay(), !s && !this.retryNextSignal(A)) { if (this.logger.info(u.ZEGO_WEBRTC_ACTION.PLAY_STATE_HANDLE + " retry current signal "), c.isCenterNode) { this.logger.info(u.ZEGO_WEBRTC_ACTION.PLAY_STATE_HANDLE + " current node " + g.gwNode + " " + JSON.stringify(g.retryFailGwNodes)); var d = g.retryFailGwNodes.findIndex(function (e) { return e === g.gwNode }); d >= 0 && g.retryFailGwNodes.splice(d, 1), g.retryFailGwNodes.push(g.gwNode), this.retryNewGwNode(g, A, i, o) } return this.rePlaySpan(t, A, g), this.startRetryTimer = setTimeout(function () { n.startRetryTimer && clearTimeout(n.startRetryTimer), n.startRetryTimer = null, g.startPlay(t, g.getRemoteStreamSuc, h) }, 1e3), void (A && 0 !== A.code && this.streamCenter.onPlayStateUpdate(2, t, A)) } this.streamCenter.removeStreamFromSignal(!1, t) } if (s) return this.stopMaxTime(), this.invalid(), (null == A ? void 0 : A.code) && this.stateCenter.reporter.spanSetAttributes({ "key": g.parentSpanKey, "par": t }, { "error": null == A ? void 0 : A.code }), void this.streamCenter.onPlayStateUpdate(e, t, A); A && 0 !== A.code && this.activePull(void 0) && (g && (g.isExternal = !1), (0, a.getReportSeq)(), this.rePlaySpan(t, A, g), this.streamCenter.onPlayStateUpdate(2, t, A)), this.logger.info(u.ZEGO_WEBRTC_ACTION.PLAY_STATE_HANDLE + " end " + t) }, e.prototype.retryNewGwNode = function (e, t, A, r) { var i, o, n, s; if (this.logger.info(u.ZEGO_WEBRTC_ACTION.RETRYSTREAMHANDLER_RETRY_NEW_GW_NODE + " call " + e.streamId), t && t.code && this.needReDispatchError(t)) this.retryNextGwNode(e, !0, r); else if (null == A ? void 0 : A.action) switch (null == A ? void 0 : A.action) { case 1: case 5: break; case 2: default: this.retryNextGwNode(e, !1, r); break; case 3: var a = null == A ? void 0 : A.ins; a && a.length > 0 && (e.gwNode = ((null === (i = a[0]) || void 0 === i ? void 0 : i.IP) || (null === (o = a[0]) || void 0 === o ? void 0 : o.ip)) + ":" + ((null === (n = a[0]) || void 0 === n ? void 0 : n.Port) || (null === (s = a[0]) || void 0 === s ? void 0 : s.port))); break; case 4: e.resetGwNodes(), this.streamCenter.clearCachedGwNodesList(e, this.isPublish) } else this.retryNextGwNode(e, !1, r); this.logger.info(u.ZEGO_WEBRTC_ACTION.RETRYSTREAMHANDLER_RETRY_NEW_GW_NODE + " " + e.streamId + " new node " + e.gwNode) }, e.prototype.retryNextGwNode = function (e, t, A) { var r; if (this.logger.info(u.ZEGO_WEBRTC_ACTION.RETRYSTREAMHANDLER_RETRY_NEXT_GW_NODE + " call " + e.streamId + " " + e.gwNode), 0 !== (null === (r = e.gwNodeList) || void 0 === r ? void 0 : r.length) || e.gwNode) { var i = e.gwNodesTTL < (new Date).getTime(), o = e.iceStateDisConnect && this.stateCenter.isMultiOuter, n = e.gwNodeList.findIndex(function (t) { return t == e.gwNode }), s = n === e.gwNodeList.length - 1; this.logger.info(u.ZEGO_WEBRTC_ACTION.RETRYSTREAMHANDLER_RETRY_NEXT_GW_NODE + " " + e.streamId + " ttl: " + i + " ice: " + o + " last: " + s), t || i || e.isLastConnected && o || s ? e.resetGwNodes() : e.gwNode = A ? e.gwNodeList[0] : e.gwNodeList[++n % e.gwNodeList.length] } else this.logger.info(u.ZEGO_WEBRTC_ACTION.RETRYSTREAMHANDLER_RETRY_NEXT_GW_NODE + " call " + e.streamId + " gwNodeList is empty") }, e.prototype.rePublishSpan = function (e, t, A) { null == A || A.uploadRTCPublishStats(), this.stateCenter.reporter.spanEnd({ "key": g.ZegoRTCLogEvent.kZegoTaskRTCPublish.event, "par": e }, { "error": null == t ? void 0 : t.code, "message": null == t ? void 0 : t.message }), this.stateCenter.reporter.createSpan(a.TRACER_LEVEL.H, { "key": g.ZegoRTCLogEvent.kZegoTaskPublishStart.event, "par": e }, { "key": g.ZegoRTCLogEvent.kZegoRePublish.event, "par": e }, g.ZegoRTCLogEvent.kZegoRePublish.event, !0), !1 === (null == A ? void 0 : A.isRePublish) && this.stateCenter.reporter.spanSetAttributes({ "key": d.event, "par": e }, { "retry_btime": d.retry_btime((new Date).getTime()) }), A && (A.isRePublish = !0, A.parentSpanKey = g.ZegoRTCLogEvent.kZegoRePublish.event) }, e.prototype.rePlaySpan = function (e, t, A) { null == A || A.uploadRTCPlayStats(), this.stateCenter.reporter.spanEnd({ "key": g.ZegoRTCLogEvent.kZegoTaskStreamPlay.event, "par": e }, { "error": null == t ? void 0 : t.code, "message": null == t ? void 0 : t.message }), this.stateCenter.reporter.createSpan(a.TRACER_LEVEL.H, { "key": g.ZegoRTCLogEvent.kZegoTaskPlayStart.event, "par": e }, { "key": g.ZegoRTCLogEvent.kZegoRePlay.event, "par": e }, g.ZegoRTCLogEvent.kZegoRePlay.event, !0), !1 === (null == A ? void 0 : A.isRePlay) && this.stateCenter.reporter.spanSetAttributes({ "key": C.event, "par": e }, { "retry_btime": C.retry_btime((new Date).getTime()) }), A && (A.isRePlay = !0, A.parentSpanKey = g.ZegoRTCLogEvent.kZegoRePlay.event) }, e }(c.RetryHandler); r.RetryStreamHandler = I }, "5634": function _(e, t, r) { "use strict"; var i = this && this.__awaiter || function (e, t, A, r) { return new (A || (A = Promise))(function (i, o) { function n(e) { try { a(r.next(e)) } catch (e) { o(e) } } function s(e) { try { a(r.throw(e)) } catch (e) { o(e) } } function a(e) { var t; e.done ? i(e.value) : (t = e.value, t instanceof A ? t : new A(function (e) { e(t) })).then(n, s) } a((r = r.apply(e, t || [])).next()) }) }, o = this && this.__generator || function (e, t) { var A, r, i, o, n = { "label": 0, "sent": function sent() { if (1 & i[0]) throw i[1]; return i[1] }, "trys": [], "ops": [] }; return o = { "next": s(0), "throw": s(1), "return": s(2) }, "function" == typeof Symbol && (o[Symbol.iterator] = function () { return this }), o; function s(s) { return function (a) { return function (s) { if (A) throw new TypeError("Generator is already executing."); for (; o && (o = 0, s[0] && (n = 0)), n;)try { if (A = 1, r && (i = 2 & s[0] ? r.return : s[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, s[1])).done) return i; switch (r = 0, i && (s = [2 & s[0], i.value]), s[0]) { case 0: case 1: i = s; break; case 4: return n.label++, { "value": s[1], "done": !1 }; case 5: n.label++, r = s[1], s = [0]; continue; case 7: s = n.ops.pop(), n.trys.pop(); continue; default: if (!((i = (i = n.trys).length > 0 && i[i.length - 1]) || 6 !== s[0] && 2 !== s[0])) { n = 0; continue } if (3 === s[0] && (!i || s[1] > i[0] && s[1] < i[3])) { n.label = s[1]; break } if (6 === s[0] && n.label < i[1]) { n.label = i[1], i = s; break } if (i && n.label < i[2]) { n.label = i[2], n.ops.push(s); break } i[2] && n.ops.pop(), n.trys.pop(); continue }s = t.call(e, n) } catch (e) { s = [6, e], r = 0 } finally { A = i = 0 } if (5 & s[0]) throw s[1]; return { "value": s[0] ? s[1] : void 0, "done": !0 } }([s, a]) } } }; Object.defineProperty(t, "__esModule", { "value": !0 }), t.GatewaySignal = void 0; var n = r(6348), s = r(4028), a = r(1018), c = r(93), g = function () { function A(e, t) { this.logger = e, this.streamSignal = t, this.callbackMap = {}, this.pushCmdSeqs = {} } return A.prototype.mediaStreamSEIUUIDReq = function (e, t, A, r) { return i(this, void 0, void 0, function () { var i = this; return o(this, function (o) { return [2, new Promise(function (o, c) { var g = n.webrtc_cmd.WebrtcCmdReqMsg.encode({ "usr_sei_filter": { "sei_filter": r } }).finish(), u = s.ClientUtil.uint8arrayToBase64(g); i.streamSignal.sendGWCmd(e, t, { "peer_id": A, "cmd_id": 5, "body": u }, function (e, t, A) { var r = a.WebRTCUtil.base64ToUint8Array(A.body), i = n.webrtc_cmd.WebrtcCmdRspMsg.decode(r); o(i) }, function (e) { c(e) }) })] }) }) }, A.prototype.metadataAck = function (e, t, A) { return i(this, void 0, void 0, function () { var r, i; return o(this, function (o) { return r = n.webrtc_cmd.WebrtcCmdRspMsg.encode({ "meta_data_ack": { "result": 1 } }).finish(), i = s.ClientUtil.uint8arrayToBase64(r), this.streamSignal.sendGWAck(e, t, { "peer_id": A, "cmd_id": 1, "body": i }), [2] }) }) }, A.prototype.registerPushCallback = function (e, t, A) { var r, i = this, o = this.callbackMap[t]; o ? o[e] = A : (this.callbackMap[t] = ((r = {})[e] = A, r), this.pushCmdSeqs[t] = {}, this.streamSignal.registerPushCallback("CmdPush", t, function (t, A, r) { var o = performance.now(); if (i.pushCmdSeqs[A][r.cmd_id]) { var s = i.pushCmdSeqs[A][r.cmd_id], g = s.seq; if (void 0 !== g && g >= t && o - s.time < 6e3) return void i.logger.warn(c.ZEGO_WEBRTC_ACTION.GS_REGISTER_PUSH_CALLBACK + " ".concat(A, " CdmPush order ").concat(e, " ").concat(r.cmd_id, " local: ").concat(g, " seq ").concat(t)) } i.pushCmdSeqs[A][r.cmd_id] = { "seq": t, "time": o }; var u = a.WebRTCUtil.base64ToUint8Array(r.body), l = n.webrtc_cmd.WebrtcCmdReqMsg.decode(u), h = Object.keys(l)[0]; h = h || "meta_data_push"; var d = i.callbackMap[A]; if (d) { var C = d[h]; C && C(t, A, r.body) } })) }, A.prototype.unregisterPushCallback = function (e, t) { var A = this.callbackMap[t]; A && (delete A[e], 0 === Object.keys(A).length && (this.streamSignal.unregisterPushCallback("CmdPush", t), delete this.callbackMap[t], delete this.pushCmdSeqs[t])) }, A }(); t.GatewaySignal = g }, "3420": function _(e, t, A) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.translate = void 0; var r = A(6410); t.translate = function (e, t, A) { if (0 === e) return ""; var i = 1, o = "  Here are some explanations about the error code: ".concat(i++, ". reason=").concat(e, ": ").concat(function (e) { switch (e) { case r.CloseReason.PEER_CLOSE_REASON_NORMAL: return "Client voluntarily exits."; case r.CloseReason.PEER_CLOSE_REASON_STATE_ERROR: return "Status error; Reason: Repeatedly received offer/answer, etc."; case r.CloseReason.PEER_CLOSE_REASON_VRS_PUBLISH_DENIED: return "Refuse to push the stream; Reason: The client retweeted the stream and was kicked or the agent's pubstart timed out, etc."; case r.CloseReason.PEER_CLOSE_REASON_VRS_PLAY_DENIED: return "Refuse to pull stream; Reason: may pull empty stream, etc., refer to 'err' error code for details."; case r.CloseReason.PEER_CLOSE_REASON_AUDIO_CODEC_NOT_MATCH: return "No matching audio codec; Reason: Client (Web) does not support OPUS, etc."; case r.CloseReason.PEER_CLOSE_REASON_VIDEO_CODEC_NOT_MATCH: return "No matching video codec; Reason: Client (Web) does not support h264 and vp8 etc."; case r.CloseReason.PEER_CLOSE_REASON_SDP_INVALID: return "SDP parsing error; Reason: SDP format error."; default: return "unknown" } }(e)); return t && (o += " ".concat(i++, ". action=").concat(t, ": ").concat(function (e) { switch (t) { case r.DeniedAction.DENIED_ACTION_STOP: return "cancel pushing stream."; case r.DeniedAction.DENIED_ACTION_RETRY_NEXT_IP: return "Try the next ip, if there is no next ip, re-request the route."; case r.DeniedAction.DENIED_ACTION_REDIRECT: return "Redirect to the ip address specified by data."; case r.DeniedAction.DENIED_ACTION_REDISPATCH: return "re-request route."; case r.DeniedAction.DENIED_ACTION_RETRY: return "retry current gateway node."; default: return "unknown" } }())), A && (o += " ".concat(i++, ". err=").concat(A, ": ").concat(function (e) { switch (A) { case r.DeniedError.DENIED_ERROR_DISPATCH_FAILED: return "media scheduling failed."; case r.DeniedError.DENIED_ERROR_EMPTY_PUBLISH_IPS: return "empty publish ips error."; case r.DeniedError.DENIED_ERROR_EMPTY_PLAY_IPS: return "empty play ips error."; case r.DeniedError.DENIED_ERROR_STREAM_NOT_EXSIT: return "stream does not exist."; case r.DeniedError.DENIED_ERROR_APP_NOT_ONLINE: return "APP has been removed."; case r.DeniedError.DENIED_ERROR_INVALID_PARAMETERS: return "invalid parameter."; case r.DeniedError.DENIED_ERROR_NO_CLIENTIP_SET: return "client ip is not set."; case r.DeniedError.DENIED_ERROR_PERMISSION_DENIED: return "No permission, access denied."; case r.DeniedError.DENIED_ERROR_SET_STREAM_INFO_FAILED: return "Failed to set stream information."; case r.DeniedError.DENIED_ERROR_INTERNAL_ERROR: return "internal error / server busy."; case r.DeniedError.DENIED_ERROR_PUBLISH_FORBIDDEN: return "Streaming is banned."; case r.DeniedError.DENIED_ERROR_NEW_PUBLISH: return "new publish error."; case r.DeniedError.DENIED_ERROR_INNER_ERROR: return "inner error."; case r.DeniedError.DENIED_ERROR_MANAGER_STOP: return "manager stop error."; case r.DeniedError.DENIED_ERROR_PUBLISH_AUTH_FAILED: return "Stream push authentication failed."; case r.DeniedError.DENIED_ERROR_PLAY_AUTH_FAILED: return "Stream pull authentication failed."; case r.DeniedError.DENIED_ERROR_SERVER_STOP: return "server stoped error."; case r.DeniedError.DENIED_ERROR_SESSION_ID: return "session id error."; case r.DeniedError.DENIED_ERROR_MANAGER_TIMEOUT: return "manager timeout."; case r.DeniedError.DENIED_ERROR_NEW_PUBLISH_SRC: return "new publish src."; case r.DeniedError.DENIED_ERROR_PLAY_SESSION_LIMIT: return "Pull session limit."; case r.DeniedError.DENIED_ERROR_DISABLE_IP_PORT_FLEXIBLE: return "disable ip port flexible."; case r.DeniedError.DENIED_ERROR_PACKET_ILLEGAL_TS: return "packet illegal ts."; case r.DeniedError.DENIED_ERROR_PACKET_ILLEGAL_ADDR: return "packet illegal address."; case r.DeniedError.DENIED_ERROR_PACKET_ILLEGAL_FORMAT: return "packet illegal format."; case r.DeniedError.DENIED_ERROR_CHECK_ADDR_TIMEOUT: return "Check address timed out."; case r.DeniedError.DENIED_ERROR_CHECK_ADDR_ILLEGAL_SIGNATURE: return "Check Address Illegal Signature."; case r.DeniedError.DENIED_ERROR_CHECK_ADDR_INCONSTANT: return "Check for address changes."; case r.DeniedError.DENIED_ERROR_WEBRTC_NEGOTIATE_TIMEOUT: return "SDP negotiation timed out, check whether the SDP is sent successfully."; case r.DeniedError.DENIED_ERROR_WEBRTC_CANDIDATE_TIMEOUT: return "Address negotiation timed out, check whether the Candidate is sent successfully."; case r.DeniedError.DENIED_ERROR_WEBRTC_CONNECTIVITY_CHECK_FAILED: return "The connectivity check failed, probably due to firewall restrictions (protocol or port) that caused the network between the browser and the gateway to fail."; case r.DeniedError.DENIED_ERROR_WEBRTC_DTLS_HS_FAILED: return "The DTLS handshake fails, the verification of the certificate may fail, and the background checks whether the certificate has expired."; case r.DeniedError.DENIED_ERROR_WEBRTC_DTLS_HS_TIMEOUT: return "The DTLS handshake timed out, this mainly due to network link packet loss and other situations that caused the timeout. Please check your network status and try again."; case r.DeniedError.DENIED_ERROR_WEBRTC_SRTP_PROTECT_FAILED: return "Streaming encryption failed"; case r.DeniedError.DENIED_ERROR_WEBRTC_HB_TIMEOUT: return "The heartbeat timed out, this mainly due to network link packet loss and other conditions that caused the timeout. Please check your network status and try again."; case r.DeniedError.DENIED_ERROR_WEBRTC_CONNECTION_LOST: return "The link is disconnected. In turn mode, if the turn link times out or has been released, the gateway will fail to send, and the gateway will think that the link has been lost."; case r.DeniedError.DENIED_ERROR_WEBRTC_NEW_SRC: return "After the stream pushing end pushes the stream again, the stream pulling end will receive this message."; default: return "unknown" } }())), o } }, "6410": function _(e, t) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.DeniedError = t.DeniedAction = t.CloseReason = void 0, function (e) { e[e.PEER_CLOSE_REASON_NORMAL = 0] = "PEER_CLOSE_REASON_NORMAL", e[e.PEER_CLOSE_REASON_STATE_ERROR = 5] = "PEER_CLOSE_REASON_STATE_ERROR", e[e.PEER_CLOSE_REASON_VRS_PUBLISH_DENIED = 15] = "PEER_CLOSE_REASON_VRS_PUBLISH_DENIED", e[e.PEER_CLOSE_REASON_VRS_PLAY_DENIED = 18] = "PEER_CLOSE_REASON_VRS_PLAY_DENIED", e[e.PEER_CLOSE_REASON_AUDIO_CODEC_NOT_MATCH = 21] = "PEER_CLOSE_REASON_AUDIO_CODEC_NOT_MATCH", e[e.PEER_CLOSE_REASON_VIDEO_CODEC_NOT_MATCH = 22] = "PEER_CLOSE_REASON_VIDEO_CODEC_NOT_MATCH", e[e.PEER_CLOSE_REASON_SDP_INVALID = 23] = "PEER_CLOSE_REASON_SDP_INVALID" }(t.CloseReason || (t.CloseReason = {})), function (e) { e[e.DENIED_ACTION_STOP = 1] = "DENIED_ACTION_STOP", e[e.DENIED_ACTION_RETRY_NEXT_IP = 2] = "DENIED_ACTION_RETRY_NEXT_IP", e[e.DENIED_ACTION_REDIRECT = 3] = "DENIED_ACTION_REDIRECT", e[e.DENIED_ACTION_REDISPATCH = 4] = "DENIED_ACTION_REDISPATCH", e[e.DENIED_ACTION_RETRY = 5] = "DENIED_ACTION_RETRY" }(t.DeniedAction || (t.DeniedAction = {})), function (e) { e[e.DENIED_ERROR_DISPATCH_FAILED = 1001] = "DENIED_ERROR_DISPATCH_FAILED", e[e.DENIED_ERROR_EMPTY_PUBLISH_IPS = 1002] = "DENIED_ERROR_EMPTY_PUBLISH_IPS", e[e.DENIED_ERROR_EMPTY_PLAY_IPS = 1003] = "DENIED_ERROR_EMPTY_PLAY_IPS", e[e.DENIED_ERROR_STREAM_NOT_EXSIT = 1004] = "DENIED_ERROR_STREAM_NOT_EXSIT", e[e.DENIED_ERROR_APP_NOT_ONLINE = 1005] = "DENIED_ERROR_APP_NOT_ONLINE", e[e.DENIED_ERROR_INVALID_PARAMETERS = 1006] = "DENIED_ERROR_INVALID_PARAMETERS", e[e.DENIED_ERROR_NO_CLIENTIP_SET = 1007] = "DENIED_ERROR_NO_CLIENTIP_SET", e[e.DENIED_ERROR_PERMISSION_DENIED = 1008] = "DENIED_ERROR_PERMISSION_DENIED", e[e.DENIED_ERROR_SET_STREAM_INFO_FAILED = 1009] = "DENIED_ERROR_SET_STREAM_INFO_FAILED", e[e.DENIED_ERROR_INTERNAL_ERROR = 1010] = "DENIED_ERROR_INTERNAL_ERROR", e[e.DENIED_ERROR_PUBLISH_FORBIDDEN = 1011] = "DENIED_ERROR_PUBLISH_FORBIDDEN", e[e.DENIED_ERROR_NEW_PUBLISH = 1012] = "DENIED_ERROR_NEW_PUBLISH", e[e.DENIED_ERROR_INNER_ERROR = 1013] = "DENIED_ERROR_INNER_ERROR", e[e.DENIED_ERROR_MANAGER_STOP = 1014] = "DENIED_ERROR_MANAGER_STOP", e[e.DENIED_ERROR_PUBLISH_AUTH_FAILED = 1015] = "DENIED_ERROR_PUBLISH_AUTH_FAILED", e[e.DENIED_ERROR_PLAY_AUTH_FAILED = 1016] = "DENIED_ERROR_PLAY_AUTH_FAILED", e[e.DENIED_ERROR_SERVER_STOP = 2001] = "DENIED_ERROR_SERVER_STOP", e[e.DENIED_ERROR_SESSION_ID = 2002] = "DENIED_ERROR_SESSION_ID", e[e.DENIED_ERROR_MANAGER_TIMEOUT = 2003] = "DENIED_ERROR_MANAGER_TIMEOUT", e[e.DENIED_ERROR_NEW_PUBLISH_SRC = 2004] = "DENIED_ERROR_NEW_PUBLISH_SRC", e[e.DENIED_ERROR_PLAY_SESSION_LIMIT = 2005] = "DENIED_ERROR_PLAY_SESSION_LIMIT", e[e.DENIED_ERROR_DISABLE_IP_PORT_FLEXIBLE = 2006] = "DENIED_ERROR_DISABLE_IP_PORT_FLEXIBLE", e[e.DENIED_ERROR_PACKET_ILLEGAL_TS = 2007] = "DENIED_ERROR_PACKET_ILLEGAL_TS", e[e.DENIED_ERROR_PACKET_ILLEGAL_ADDR = 2008] = "DENIED_ERROR_PACKET_ILLEGAL_ADDR", e[e.DENIED_ERROR_PACKET_ILLEGAL_FORMAT = 2009] = "DENIED_ERROR_PACKET_ILLEGAL_FORMAT", e[e.DENIED_ERROR_CHECK_ADDR_TIMEOUT = 2010] = "DENIED_ERROR_CHECK_ADDR_TIMEOUT", e[e.DENIED_ERROR_CHECK_ADDR_ILLEGAL_SIGNATURE = 2011] = "DENIED_ERROR_CHECK_ADDR_ILLEGAL_SIGNATURE", e[e.DENIED_ERROR_CHECK_ADDR_INCONSTANT = 2012] = "DENIED_ERROR_CHECK_ADDR_INCONSTANT", e[e.DENIED_ERROR_WEBRTC_NEGOTIATE_TIMEOUT = 3e3] = "DENIED_ERROR_WEBRTC_NEGOTIATE_TIMEOUT", e[e.DENIED_ERROR_WEBRTC_CANDIDATE_TIMEOUT = 3001] = "DENIED_ERROR_WEBRTC_CANDIDATE_TIMEOUT", e[e.DENIED_ERROR_WEBRTC_CONNECTIVITY_CHECK_FAILED = 3002] = "DENIED_ERROR_WEBRTC_CONNECTIVITY_CHECK_FAILED", e[e.DENIED_ERROR_WEBRTC_DTLS_HS_FAILED = 3003] = "DENIED_ERROR_WEBRTC_DTLS_HS_FAILED", e[e.DENIED_ERROR_WEBRTC_DTLS_HS_TIMEOUT = 3004] = "DENIED_ERROR_WEBRTC_DTLS_HS_TIMEOUT", e[e.DENIED_ERROR_WEBRTC_SRTP_PROTECT_FAILED = 3005] = "DENIED_ERROR_WEBRTC_SRTP_PROTECT_FAILED", e[e.DENIED_ERROR_WEBRTC_HB_TIMEOUT = 3006] = "DENIED_ERROR_WEBRTC_HB_TIMEOUT", e[e.DENIED_ERROR_WEBRTC_CONNECTION_LOST = 3007] = "DENIED_ERROR_WEBRTC_CONNECTION_LOST", e[e.DENIED_ERROR_WEBRTC_NEW_SRC = 3008] = "DENIED_ERROR_WEBRTC_NEW_SRC" }(t.DeniedError || (t.DeniedError = {})) }, "3304": function _(e, t, r) { "use strict"; var i = this && this.__assign || function () { return (i = Object.assign || function (e) { for (var t, A = 1, r = arguments.length; A < r; A++)for (var i in t = arguments[A]) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]); return e }).apply(this, arguments) }, o = this && this.__awaiter || function (e, t, A, r) { return new (A || (A = Promise))(function (i, o) { function n(e) { try { a(r.next(e)) } catch (e) { o(e) } } function s(e) { try { a(r.throw(e)) } catch (e) { o(e) } } function a(e) { var t; e.done ? i(e.value) : (t = e.value, t instanceof A ? t : new A(function (e) { e(t) })).then(n, s) } a((r = r.apply(e, t || [])).next()) }) }, n = this && this.__generator || function (e, t) { var A, r, i, o, n = { "label": 0, "sent": function sent() { if (1 & i[0]) throw i[1]; return i[1] }, "trys": [], "ops": [] }; return o = { "next": s(0), "throw": s(1), "return": s(2) }, "function" == typeof Symbol && (o[Symbol.iterator] = function () { return this }), o; function s(s) { return function (a) { return function (s) { if (A) throw new TypeError("Generator is already executing."); for (; o && (o = 0, s[0] && (n = 0)), n;)try { if (A = 1, r && (i = 2 & s[0] ? r.return : s[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, s[1])).done) return i; switch (r = 0, i && (s = [2 & s[0], i.value]), s[0]) { case 0: case 1: i = s; break; case 4: return n.label++, { "value": s[1], "done": !1 }; case 5: n.label++, r = s[1], s = [0]; continue; case 7: s = n.ops.pop(), n.trys.pop(); continue; default: if (!((i = (i = n.trys).length > 0 && i[i.length - 1]) || 6 !== s[0] && 2 !== s[0])) { n = 0; continue } if (3 === s[0] && (!i || s[1] > i[0] && s[1] < i[3])) { n.label = s[1]; break } if (6 === s[0] && n.label < i[1]) { n.label = i[1], i = s; break } if (i && n.label < i[2]) { n.label = i[2], n.ops.push(s); break } i[2] && n.ops.pop(), n.trys.pop(); continue }s = t.call(e, n) } catch (e) { s = [6, e], r = 0 } finally { A = i = 0 } if (5 & s[0]) throw s[1]; return { "value": s[0] ? s[1] : void 0, "done": !0 } }([s, a]) } } }; Object.defineProperty(t, "__esModule", { "value": !0 }), t.RTCModules = void 0; var s = r(5123), a = r(5123), c = r(5123), g = r(1586), u = r(4028), l = r(4202), h = r(4147), d = r(2388), C = r(93), I = r(2532), E = r(1264), p = g.ZegoRTCLogEvent.kZegoStartPlay, f = function () { function A(e, t, A, r, i, o, n) { var l = this; this.logger = e, this.dataReport = t, this.stateCenter = A, this.streamCenter = r, this.rtm = i, this.ac = o, this.zegoWebRtc = n, this.mediaEleSources = [], this.beforeunloadListener = function () { for (var e = 0; e < l.streamCenter.previewStreamList.length; e++)l.streamCenter.previewStreamList[e].stopPreview(); l.streamCenter.previewStreamList = [] }, this.pagehideListener = function () { for (var e in window.event && (window.event.cancelBubble = !0), l.streamCenter.publisherList) l.publishModule.stopPublishingStream(e); for (var e in l.streamCenter.playerList) l.playModule.stopPlayingStream(e) }, this.messageListener = function (e) { var t = e.data, A = t.type; "SS_DIALOG_SUCCESS" === A && l.screenStreamFrom(t.streamId, t.canRequestAudioTrack, u.ClientUtil.actionSuccessCallback("screenShare", l.stateCenter.callbackList)), "SS_DIALOG_CANCEL" === A && u.ClientUtil.actionSuccessCallback("screenShare", l.stateCenter.callbackList)(!1, null, A) }, this.offlineListener = function () { if (l.logger.info("zc.off.0 network is broken"), l.stateCenter.networkState = c.ENUM_NETWORK_STATE.offline, l.stateCenter.useNetAgent) l.logger.info("zc.off.0 use netAgent"); else { for (var e in l.streamCenter.publisherList) (A = l.streamCenter.publisherList[e].retryStreamHandler).startMaxTime(), A.invalid(); for (var e in l.streamCenter.playerList) { var t = l.streamCenter.playerList[e], A = t.retryStreamHandler; t.playMode == s.PlayMode.CDN && t.cdnPlayer && (t.cdnPlayer.canRetry = !1), A.startMaxTime(), A.invalid() } } }, this.onlineListener = function (e) { for (var t in l.logger.info("zc.on.0 network is online"), l.stateCenter.networkState = c.ENUM_NETWORK_STATE.online, l.streamCenter.publisherList) { var A = l.streamCenter.publisherList[t].publisher, r = l.streamCenter.publisherList[t].retryStreamHandler; A.state == c.ENUM_PUBLISH_STATE.stop || A.stateNego !== c.ENUM_PUBLISH_STATE_NEGO.iceConnected ? !r.isOverTime && r.publishStateHandle(c.ENUM_PUBLISH_STATE_UPDATE.error, t, g.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kPublishNetworkBrokenError) : A.state == c.ENUM_PUBLISH_STATE.publishing && r.stopMaxTime() } for (var t in l.streamCenter.playerList) { var i = l.streamCenter.playerList[t].player, o = l.streamCenter.playerList[t].playMode, n = (r = l.streamCenter.playerList[t].retryStreamHandler, l.streamCenter.playerList[t].cdnPlayer); o == s.PlayMode.CDN && n && (n.canRetry = !1), i.state == c.ENUM_PLAY_STATE.stop || o !== s.PlayMode.CDN && i.stateNego !== c.ENUM_PLAY_STATE_NEGO.iceConnected ? !r.isOverTime && r.playStateHandle(c.ENUM_PLAY_STATE_UPDATE.error, t, g.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kPlayNetworkBrokenError) : i.state == c.ENUM_PLAY_STATE.playing && r.stopMaxTime() } }, this.visibilitychangeListener = function (e) { var t; t = "visible" === document.visibilityState ? "foreground" : "background"; var A = l.stateCenter.reporter.createSpan(a.TRACER_LEVEL.H, { "key": g.ZegoRTCLogEvent.kZMInitSetting.event }, { "key": "" }, g.ZegoRTCLogEvent.kZegoAppLifeCycle.event); A.setAttribute("state", g.ZegoRTCLogEvent.kZegoAppLifeCycle.state(t)), A.end() }, this.safariPagehideListener = function (e) { var t = l.stateCenter.reporter.createSpan(a.TRACER_LEVEL.H, { "key": g.ZegoRTCLogEvent.kZMInitSetting.event }, { "key": "" }, g.ZegoRTCLogEvent.kZegoAppLifeCycle.event); t.setAttribute("state", g.ZegoRTCLogEvent.kZegoAppLifeCycle.state("background")), t.end() }, this.safariPageshowListener = function (e) { var t = l.stateCenter.reporter.createSpan(a.TRACER_LEVEL.H, { "key": g.ZegoRTCLogEvent.kZMInitSetting.event }, { "key": "" }, g.ZegoRTCLogEvent.kZegoAppLifeCycle.event); t.setAttribute("state", g.ZegoRTCLogEvent.kZegoAppLifeCycle.state("foreground")), t.end() }, this.publishModule = new h.PublishModule(this.logger, this.dataReport, this.stateCenter, this.streamCenter, this.rtm, this.zegoWebRtc), this.playModule = new d.PlayModule(this.logger, this.dataReport, this.stateCenter, this.streamCenter, this.rtm), this.streamCenter.playModule = this.playModule, this.initAdvance(), this.initStreamCommon(), this.initAudioMix(), this.init() } return A.prototype.init = function () { this.bindWindowListener(), this.bindRTMListener(), this.bindStreamCenterHandler(), this.bindEngineDestroyListener() }, A.prototype.initAudioMix = function () { }, A.prototype.initAdvance = function () { }, A.prototype.initStreamCommon = function () { }, A.prototype.bindWindowListener = function () { var e = navigator.userAgent.match(/iPad/i) || navigator.userAgent.match(/iPhone/i) ? "pagehide" : "firefox" === this.stateCenter.browser ? "beforeunload" : "unload"; window.addEventListener("beforeunload", this.beforeunloadListener), window.addEventListener(e, this.pagehideListener), window.addEventListener("message", this.messageListener), window.addEventListener("offline", this.offlineListener), window.addEventListener("online", this.onlineListener), document.addEventListener("visibilitychange", this.visibilitychangeListener), "safari" == this.stateCenter.browser && (window.addEventListener("pagehide", this.safariPagehideListener), window.addEventListener("pageshow", this.safariPageshowListener)) }, A.prototype.offWindowListner = function () { var e = navigator.userAgent.match(/iPad/i) || navigator.userAgent.match(/iPhone/i) ? "pagehide" : "firefox" === this.stateCenter.browser ? "beforeunload" : "unload"; window.removeEventListener("beforeunload", this.beforeunloadListener), window.removeEventListener(e, this.pagehideListener), window.removeEventListener("message", this.messageListener), window.removeEventListener("offline", this.offlineListener), window.removeEventListener("online", this.onlineListener), document.removeEventListener("visibilitychange", this.visibilitychangeListener), "safari" == this.stateCenter.browser && (window.removeEventListener("pagehide", this.safariPagehideListener), window.removeEventListener("pageshow", this.safariPageshowListener)) }, A.prototype.bindEngineDestroyListener = function () { var e = this; this.stateCenter.listenerList._engineDestroy.push(function () { e.offWindowListner() }) }, A.prototype.bindRTMListener = function () { var e, t, A = this; this.rtm._on("_settingCanFetch", function (e) { return o(A, void 0, void 0, function () { var e = this; return n(this, function (t) { return this.rtm.cloudSetting.fetchSetting(E.RTC).then(function (t) { var A, r; e.logger.info("zc.scf stream config " + JSON.stringify(t)), t && (e.stateCenter.settingConfig.setSetting(t.setting, ["auto_to_tcp", "udp_max_fail_num", "probe_started_num", "hardware_encode", "camera_hard_encode", "custom_hard_encode", "camera_width", "camera_height", "camera_framerate", "camera_audio_bitrate", "camera_video_bitrate"]), (null === (A = t.setting) || void 0 === A ? void 0 : A.open_mini_sdp) && (null === (r = e.streamCenter) || void 0 === r || r.initMiniSdpWorker(t.setting.open_mini_sdp.open_mini_sdp))), e.rtm._on("_cloudSettingNotify", function (e, t) { }) }), [2] }) }) }), this.rtm._on("_appConfigRsp", function () { A.stateCenter.appConfig = A.rtm.getAppConfig(), A.publishModule.startWaitPublish(), A.playModule.startWaitPlay() }), this.rtm._on("_netAppConfigRsp", function (e) { A.stateCenter.netAppConfigDelay > 0 ? setTimeout(function () { A.stateCenter.netAppConfig = e, A.stateCenter.supportBg = A.checkBackgroundCapacity() }, A.stateCenter.netAppConfigDelay) : (A.stateCenter.netAppConfig = e, A.stateCenter.supportBg = A.checkBackgroundCapacity()) }), this.rtm._on("_roomLogin", function (e, t) { A.stateCenter.appid = A.rtm.getAppID(), A.stateCenter.idName = A.rtm.getUserID(), A.stateCenter.nickName = A.rtm.getUserName(), A.stateCenter.testEnvironment = A.rtm.isTestEnvironment(), A.stateCenter.isMultiRoom = A.rtm.getMultiRoom(), A.stateCenter.useNetAgent = A.rtm.getUseNetAgent(), A.streamCenter.setSessionInfo(A.stateCenter.appid, A.stateCenter.idName, A.stateCenter.testEnvironment); var r = A.stateCenter.getRoomByRoomID(e); if (!r) { var i = new l.StreamHandler(A.logger, A.stateCenter, A.rtm, A.streamCenter, e); A.bindStreamHandler(i), A.stateCenter.roomList.push(r = { "roomID": e, "streamHandler": i, "sessionID": "", "roomSessionID": "", "token": t, "isResetRoom": !1, "streamList": [], "streamInfoList": [] }) } }), this.rtm._on("roomLoginResponse", function (e) { A.logger.info("zc.rlr call " + JSON.stringify(e)); var t = e.header.room_id || e.body.room_id; A.stateCenter.appConfig = A.rtm.getAppConfig(); var r = A.rtm.getToken(t), i = A.rtm.getSessionId(t), o = A.rtm.getRoomSessionID(t), n = A.stateCenter.getRoomByRoomID(t); if (!n) { var s = new l.StreamHandler(A.logger, A.stateCenter, A.rtm, A.streamCenter, t); A.bindStreamHandler(s), A.stateCenter.roomList.push(n = { "roomID": t, "streamHandler": s, "sessionID": i, "roomSessionID": o, "token": r, "isResetRoom": !1, "streamList": [], "streamInfoList": [] }) } if (n.sessionID = i, n.roomSessionID = o, A.stateCenter.tempRoomList.length > 0) for (var a = function a(e) { var t = A.stateCenter.tempRoomList[e], r = t.roomID, i = t.streamList, o = A.stateCenter.roomList.find(function (e) { return e.roomID === r }); o && (o.streamList = i.filter(function (e) { var t = A.streamCenter.stopedPlayerList[null == e ? void 0 : e.stream_id]; return !!(t && t.state <= 6) }), A.stateCenter.tempRoomList[e].streamList = []) }, c = 0; c < A.stateCenter.tempRoomList.length; c++)a(c); if (1 === e.body.stream_fetch_flag) return A.logger.info("zc.rlr stream fetch " + t), n.streamHandler.room = n, void n.streamHandler.fetchStreamList(); n.streamHandler.handleStreamStart(e, n), A.streamCenter.checkStreamReport(), A.logger.info("zc.rlr end " + t) }), this.rtm._on("_connectChanged", function (e, t) { A.logger.info("zc.cc.0 " + e + " " + JSON.stringify(t)), "connecting" === e ? A.stateCenter.connectChanged = !0 : "connected" === e && (A.stateCenter.connectChanged = !1, A.stateCenter.useNetAgent = A.rtm.getUseNetAgent(), A.handleWaitPublishAndPlays(t)) }), this.rtm._on("HBResponse", function (e, t) { var r, i = null === (r = null == e ? void 0 : e.header) || void 0 === r ? void 0 : r.room_id, o = A.stateCenter.getRoomByRoomID(i || t); null == o || o.streamHandler.patchStreamList(e) }), this.rtm._on("_roomStateUpdate", function (e, t, r, i, o) { if ("CONNECTED" === t && (A.stateCenter.billingTimer.shouldReportRoomTime && A.stateCenter.billingTimer.startChargeInfosUpload(), A.streamCenter.connectStreamSignal(e)), "DISCONNECTED" == t) { A.logger.info("zc.rsu " + e + " disconnected " + (r ? r + " " : "") + (i || "") + o), A.stateCenter.billingTimer.stopChargeInfosUpload(); var n = A.stateCenter.getRoomByRoomID(e); if (n) { var s = A.stateCenter.roomList.findIndex(function (t) { return t.roomID == e }); n.isResetRoom = !0, n.streamHandler.reset(), A.streamCenter.reset(e, r, o), A.stateCenter.roomList.splice(s, 1), o ? A.stateCenter.tempRoomList.push(n) : A.stateCenter.tempRoomList = A.stateCenter.tempRoomList.filter(function (t) { return t.roomID !== e }) } A.streamCenter.disconnectStreamSignal() } else A.logger.info("zc.rsu " + e + " state: " + t) }), this.rtm._on("_tokenRenewed", function (e, t) { A.logger.info("zc.tr roomID:" + t + " " + e); var r = A.stateCenter.getRoomByRoomID(t); r && (r.token = e) }), this.rtm._on("_tokenExpired", function (e) { var t, r; ((null === (r = null === (t = null == e ? void 0 : e.body) || void 0 === t ? void 0 : t.stop_stream) || void 0 === r ? void 0 : r.stream_id_list) || []).forEach(function (e) { A.publishModule.stopPublishingStream(e, I.errorCodeList.TOKEN_EXPIRED) }) }), this.rtm.liveRoomHandler.handlePushStreamMsg = function (e) { e.body.stream_cmd = a.streamMap[e.header.sub_cmd], A.handlePushStreamMsg(e) }, null === (e = this.rtm.service) || void 0 === e || e.on("push_stream_update", function (e) { A.handlePushStreamMsg(e) }), null === (t = this.rtm.service) || void 0 === t || t.on("zegochat_js.push_room_stream_update_req", function (e) { var t, r = (null === (t = null == e ? void 0 : e.header) || void 0 === t ? void 0 : t.room_id) || "", i = A.stateCenter.getRoomByRoomID(r); i ? i.streamHandler.handlePriPushStreamUpdateMsg(e) : A.logger.error(C.ZEGO_WEBRTC_ACTION.ON_STREAM + " room no found") }) }, A.prototype.handleWaitPublishAndPlays = function (e) { for (var t = Object.keys(this.stateCenter.waitPublishStreamList), A = 0; A < t.length; A++) { var r = t[A], i = this.stateCenter.waitPublishStreamList[r], o = i.localStream, n = i.publishOption, s = i.isDataChannel; if (i.retryStart) { if (n.roomID && n.roomID !== (null == e ? void 0 : e.roomID)) { this.logger.info("zc.hwpap.0 room not connect"); continue } this.publishModule.startPublishingStream(r, o, n, s), delete this.stateCenter.waitPublishStreamList[r] } } }, A.prototype.handlePushStreamMsg = function (e) { var t, A = (null === (t = null == e ? void 0 : e.header) || void 0 === t ? void 0 : t.room_id) || "", r = this.stateCenter.getRoomByRoomID(A), i = this.rtm.getMsgSpan(g.ZegoRTCLogEvent.kZegoTaskLiveRoomRecvStreamUpdateInfo.event, A); if (!r) return this.stateCenter.reporter.setError(i, g.ZegoRTCLogEvent.kZegoTaskLiveRoomRecvStreamUpdateInfo.error.ROOM_NOT_EXIST), void this.logger.error(C.ZEGO_WEBRTC_ACTION.ON_PUSH_STREAM_UPDATE + " room no found"); var o = ""; switch (e.body.stream_cmd) { case a.ENUM_STREAM_UPDATE_CMD.added: o = "add"; break; case a.ENUM_STREAM_UPDATE_CMD.deleted: o = "delete"; break; case a.ENUM_STREAM_UPDATE_CMD.updated: o = "update" }var n = e.body.stream_info.map(function (e) { return { "stream_id": e.stream_id, "stream_extra_info": e.extra_info, "id_name": e.id_name || e.anchor_id_name } }); i.setAttributes({ "stream_update_type": g.ZegoRTCLogEvent.kZegoTaskLiveRoomRecvStreamUpdateInfo.stream_update_type(o), "stream_seq": e.body.stream_seq, "stream_list": g.ZegoRTCLogEvent.kZegoTaskLiveRoomRecvStreamUpdateInfo.stream_list(n) }), i.end(), r.streamHandler.handlePushStreamUpdateMsg(e) }, A.prototype.bindStreamCenterHandler = function () { var e = this; this.streamCenter.onPlayStateUpdate = function (t, A, r, i) { var o, n, s, c, l, h, d, C, I, E, f, B, _, m, Q, y, v, S, D = e.streamCenter.playerList[A]; if (1 == t && D && u.ClientUtil.isReDispatch(r)) { var R = D.player, b = D.retryDispatchHandler, T = D.playOption; return 0 != R.sessionId && R.signal && R.shouldSendCloseSession() && (R.signal.sendCloseSession(e.stateCenter.getSeq(), R.sessionId, 1), R.signal.removeSession(R.sessionId), R.closeSessionSignal = !0), R.resetPlay(), b.stopMaxTime(), b.invalid(), b.initStream(A, T, !1), void (e.rtm.isLogin() ? (b.startMaxTime(), b.active(0)) : e.streamCenter.playerList[A].isReDispatch = !0) } if (D && D.player && (0 == t || 1 == t)) { var k = D.player.isRePlay ? g.ZegoRTCLogEvent.kZegoRePlay : g.ZegoRTCLogEvent.kZegoStartPlay; 1 == t && r && e.stateCenter.reporter.spanSetAttributes({ "key": k.event, "par": A }, { "error": r.code, "message": r.message }), e.stateCenter.reporter.spanEnd({ "key": k.event, "par": A }, { "url": p.url(null === (n = null === (o = null == D ? void 0 : D.player) || void 0 === o ? void 0 : o.signal) || void 0 === n ? void 0 : n.server), "ip": p.ip(null === (s = null == D ? void 0 : D.player) || void 0 === s ? void 0 : s.ip), "peer_id": p.peer_id(null === (c = null == D ? void 0 : D.player) || void 0 === c ? void 0 : c.peerID), "source_type": p.source_type((0, u.getPlaySourceType)(null === (l = null == D ? void 0 : D.player) || void 0 === l ? void 0 : l.resourceMode)), "net_protocol": p.net_protocol(null === (h = null == D ? void 0 : D.player) || void 0 === h ? void 0 : h.netProtocol), "signal_consume": p.signal_consume(null === (d = null == D ? void 0 : D.player) || void 0 === d ? void 0 : d.signalTime), "is_center": p.is_center(null == D ? void 0 : D.isCenterNode) }), e.stateCenter.reporter.spanEnd({ "key": g.ZegoRTCLogEvent.kZegoTaskPlayStart.event, "par": A }, { "error": r.code, "message": r.message }, !0) } if (0 != t || (null == i ? void 0 : i.isCDN)) 1 != t || (null == i ? void 0 : i.isCDN) || (null === (y = null == D ? void 0 : D.player) || void 0 === y || y.uploadRTCPlayStats(), e.stateCenter.reporter.spanEnd({ "key": g.ZegoRTCLogEvent.kZegoTaskStreamPlay.event, "par": A }, { "stop_reason": g.ZegoRTCLogEvent.kZegoTaskStreamPlay.stop_reason(null === (v = null == D ? void 0 : D.player) || void 0 === v ? void 0 : v.stopReason), "error": r.code, "message": r.message }), D && D.player && (D.player.stopReason = "")); else { var w = g.ZegoRTCLogEvent.kZegoTaskStreamPlay, N = e.stateCenter.reporter.createSpan(a.TRACER_LEVEL.I, { "key": g.ZegoRTCLogEvent.kZegoTaskPlayStart.event, "par": A }, { "key": g.ZegoRTCLogEvent.kZegoTaskStreamPlay.event, "par": A }, 0 === (null === (C = null == D ? void 0 : D.player) || void 0 === C ? void 0 : C.resourceMode) ? g.ZegoRTCLogEvent.kZegoTaskStreamPlay.event : g.ZegoRTCLogEvent.kZegoTaskL3Play.event, !0); D.player.rtcPlayCount++, N.setAttributes({ "tryidx": w.tryidx(D.player.rtcPlayCount), "url": w.url(null === (E = null === (I = null == D ? void 0 : D.player) || void 0 === I ? void 0 : I.signal) || void 0 === E ? void 0 : E.server), "ip": w.ip(null === (f = null == D ? void 0 : D.player) || void 0 === f ? void 0 : f.ip), "net_protocol": w.net_protocol(null === (B = null == D ? void 0 : D.player) || void 0 === B ? void 0 : B.netProtocol), "room_id": w.room_id(null === (_ = null == D ? void 0 : D.room) || void 0 === _ ? void 0 : _.roomID), "room_sid_string": w.room_sid_string(null === (m = null == D ? void 0 : D.room) || void 0 === m ? void 0 : m.roomSessionID), "env": w.env(e.stateCenter.testEnvironment ? 3 : 1), "resource_type": w.resource_type((0, u.getPlaySourceType)(null === (Q = null == D ? void 0 : D.player) || void 0 === Q ? void 0 : Q.resourceMode)), "protocol": w.protocol("webrtc"), "dispatch_external_ip": w.dispatch_external_ip(e.stateCenter.clientIP), "stream_id": w.stream_id(A) }) } if (1 === t && e.streamCenter.playErrorCallBackList[A]) e.stateCenter.connectChanged || (e.logger.info("zc.opsu.1 connect changed"), e.streamCenter.playErrorCallBackList[A]({ "errorCode": r && r.code, "extendedData": r && r.message }), delete e.streamCenter.playErrorCallBackList[A]), e.logger.info("zc.opsu.1 stop play called by sdk"), e.playModule.stopPlayingStream(A, r); else { var L = u.ClientUtil.getPlayerStateType(t); (1 === t || (null === (S = null == D ? void 0 : D.player) || void 0 === S ? void 0 : S.updateCBState({ "state": L, "code": r.code }))) && e.stateCenter.actionListener("playerStateUpdate", { "state": L, "streamID": A, "errorCode": r && r.code, "extendedData": r && r.message }) } }, this.streamCenter.onPublishStateUpdate = function (t, A, r) { e.onPublishStateUpdateHandle(t, A, r) }, this.streamCenter.onPublishQualityUpdate = function (t, A) { e.stateCenter.actionListener("publishQualityUpdate", t, A) }, this.streamCenter.onPlayQualityUpdate = function (t, A) { e.stateCenter.actionListener("playQualityUpdate", t, A) }, this.streamCenter.onRemoteCameraStatusUpdate = function (t, A, r) { var i = e.stateCenter.reporter.createSpan(a.TRACER_LEVEL.H, { "key": g.ZegoRTCLogEvent.kZegoTaskPlayStart.event, "par": t }, { "key": "" }, g.ZegoRTCLogEvent.kZegoTaskRemoteCameraUpdate.event); i.setAttributes({ "stream_id": g.ZegoRTCLogEvent.kZegoTaskRemoteCameraUpdate.stream_id(t), "camera_status": g.ZegoRTCLogEvent.kZegoTaskRemoteCameraUpdate.camera_status(A), "status_code": g.ZegoRTCLogEvent.kZegoTaskRemoteCameraUpdate.status_code(r) }), i.end(), e.stateCenter.actionListener("remoteCameraStatusUpdate", t, A), e.stateCenter.actionListener("_remoteCameraStatusUpdate", t, r) }, this.streamCenter.onRemoteMicStatusUpdate = function (t, A, r) { var i = e.stateCenter.reporter.createSpan(a.TRACER_LEVEL.H, { "key": g.ZegoRTCLogEvent.kZegoTaskPlayStart.event, "par": t }, { "key": "" }, g.ZegoRTCLogEvent.kZegoTaskRemoteMicUpdate.event); i.setAttributes({ "stream_id": g.ZegoRTCLogEvent.kZegoTaskRemoteMicUpdate.stream_id(t), "mic_status": g.ZegoRTCLogEvent.kZegoTaskRemoteMicUpdate.mic_status(A), "status_code": g.ZegoRTCLogEvent.kZegoTaskRemoteMicUpdate.status_code(r) }), i.end(), e.stateCenter.actionListener("remoteMicStatusUpdate", t, A), e.stateCenter.actionListener("_remoteMicStatusUpdate", t, r) }, this.streamCenter.onSoundLevelUpdate = function (t) { e.stateCenter.actionListener("soundLevelUpdate", t) }, this.streamCenter.onMicSoundLevelUpdate = function (t) { e.stateCenter.actionListener("capturedSoundLevelUpdate", t) } }, A.prototype.bindStreamHandler = function (e) { var t = this; e.onStreamUpdated = function (e, A, r) { var i = r.map(function (e) { return { "streamID": e.streamID, "user": e.user, "extraInfo": e.extraInfo, "urlsFLV": e.urlFlv, "urlsRTMP": e.urlRtmp, "urlsHLS": e.urlHls, "urlsHttpsFLV": e.urlHttpsFlv, "urlsHttpsHLS": e.urlHttpsHls } }), o = {}; if (0 === A) { var n = r.map(function (e) { return { "stream_id": e.streamID, "code": c.STREAM_DELETE_REASON[e.closeType] && c.STREAM_DELETE_REASON[e.closeType].code || 0, "description": c.STREAM_DELETE_REASON[e.closeType] && c.STREAM_DELETE_REASON[e.closeType].description || "unknown" } }); o.stream_delete_reason = n } if (0 === A && (i = i.filter(function (e) { return !t.stateCenter.publishStreamList[e.streamID] })), i.length > 0 && t.stateCenter.actionListener("roomStreamUpdate", e, u.ClientUtil.getSteamUpdateType(A), i, Object.keys(o).length > 0 ? JSON.stringify(o) : ""), r.length > 0 && t.stateCenter.actionListener("_streamUpdated", A, r), 1 === A) { var s = []; i.forEach(function (e) { e.extraInfo && s.push({ "streamID": e.streamID, "user": e.user, "extraInfo": e.extraInfo }) }), s.length > 0 && t.stateCenter.actionListener("streamExtraInfoUpdate", e, s) } }, e.onPublishStateUpdate = function (e, A, r) { var o, n, s, c, l, h, d, C, E, p, f, B, _, m, Q, y; t.logger.info("zb.opsu ", A); var v = t.streamCenter.publisherList[A]; if (v && v.publisher && (0 == e || 1 == e)) { var S = g.ZegoRTCLogEvent.kZegoStartPublish; t.stateCenter.reporter.spanEnd({ "key": (v.publisher.isRePublish ? g.ZegoRTCLogEvent.kZegoRePublish : g.ZegoRTCLogEvent.kZegoStartPublish).event, "par": A }, { "error": r.code, "message": r.message, "url": S.url(null === (n = null === (o = null == v ? void 0 : v.publisher) || void 0 === o ? void 0 : o.signal) || void 0 === n ? void 0 : n.server), "ip": S.ip(null === (s = null == v ? void 0 : v.publisher) || void 0 === s ? void 0 : s.ip), "peer_id": S.peer_id(null === (c = null == v ? void 0 : v.publisher) || void 0 === c ? void 0 : c.peerID), "source_type": S.source_type("rtc"), "net_protocol": S.net_protocol(null === (l = null == v ? void 0 : v.publisher) || void 0 === l ? void 0 : l.netProtocol), "is_center": S.is_center(null == v ? void 0 : v.isCenterNode) }), t.stateCenter.reporter.spanEnd({ "key": g.ZegoRTCLogEvent.kZegoTaskPublishStart.event, "par": A }, i({}, r), !0) } var D = g.ZegoRTCLogEvent.kZegoTaskRTCPublish; if (v && v.publisher) if (0 == e) { var R = t.stateCenter.reporter.createSpan(a.TRACER_LEVEL.I, { "key": g.ZegoRTCLogEvent.kZegoTaskPublishStart.event, "par": A }, { "key": D.event, "par": A }, D.event, !0); v.publisher.rtcPublishCount++, R.setAttributes({ "tryidx": D.tryidx(null == v ? void 0 : v.publisher.rtcPublishCount), "url": D.url(null === (d = null === (h = null == v ? void 0 : v.publisher) || void 0 === h ? void 0 : h.signal) || void 0 === d ? void 0 : d.server), "ip": D.ip(null === (p = null === (E = null === (C = null == v ? void 0 : v.publisher) || void 0 === C ? void 0 : C.gwNode) || void 0 === E ? void 0 : E.split(":")) || void 0 === p ? void 0 : p[0]), "net_protocol": D.net_protocol(null === (f = null == v ? void 0 : v.publisher) || void 0 === f ? void 0 : f.netProtocol), "dispatch_external_ip": D.dispatch_external_ip(t.stateCenter.clientIP), "room_id": D.room_id(null === (B = null == v ? void 0 : v.room) || void 0 === B ? void 0 : B.roomID), "room_sid_string": D.room_sid_string(null === (_ = null == v ? void 0 : v.room) || void 0 === _ ? void 0 : _.roomSessionID), "resource_type": D.resource_type("rtc"), "protocol": D.protocol("webrtc") }) } else 1 == e && (1012 === r.code ? t.streamCenter.stopPublishingStream(A, r) : 2002 === r.code && (t.streamCenter.stopPublishingStream(A, r), r.code = I.errorCodeList.TOKEN_ERROR.code), null === (m = null == v ? void 0 : v.publisher) || void 0 === m || m.uploadRTCPublishStats(), t.stateCenter.reporter.spanEnd({ "key": D.event, "par": A }, { "stop_reason": D.stop_reason(null === (Q = null == v ? void 0 : v.publisher) || void 0 === Q ? void 0 : Q.stopReason), "error": r.code, "message": r.message }), v && v.publisher && (v.publisher.stopReason = "")); var b = u.ClientUtil.getPublisherStateType(e); (1 === e || (null === (y = null == v ? void 0 : v.publisher) || void 0 === y ? void 0 : y.updateCBState({ "state": b, "code": r.code }))) && t.stateCenter.actionListener("publisherStateUpdate", { "state": b, "streamID": A, "errorCode": r.code, "extendedData": r.message }) }, e.onStreamExtraInfoUpdated = function (e, A) { var r = A.map(function (e) { return { "streamID": e.streamID, "user": e.user, "extraInfo": e.extraInfo } }); t.stateCenter.actionListener("streamExtraInfoUpdate", e, r) } }, A.prototype.screenStreamFrom = function (e, t, A) { var r = {}; r.audio = { "mandatory": { "chromeMediaSource": "desktop", "chromeMediaSourceId": e } }, r.video = { "mandatory": { "chromeMediaSource": "desktop", "chromeMediaSourceId": e, "maxWidth": window.screen.width, "maxHeight": window.screen.height } }, !t && (r.audio = !1), navigator.mediaDevices.getUserMedia(r).then(function (e) { A(!0, e) }).catch(function (e) { A(!1, null, e) }) }, A.prototype.onPublishStateUpdateHandle = function (e, t, A) { var r = this; this.logger.info("zc.opsuh.0 call"); var i = this.streamCenter.publisherList[t], o = i.room; if (o) if (0 == e) { if (this.stateCenter.publishStreamList[t]) { var n = !o.streamList.find(function (e) { return e.stream_id == t && (e.anchor_id_name == r.stateCenter.idName || e.id_name == r.stateCenter.idName || e.user_id === r.stateCenter.idName) }); this.logger.info("zc.opsuh.0 room stream" + t + " " + n), [c.ENUM_PUBLISH_STREAM_STATE.tryPublish, c.ENUM_PUBLISH_STREAM_STATE.retryPublish].includes(this.stateCenter.publishStreamList[t].state) && n ? (this.stateCenter.publishStreamList[t].state = c.ENUM_PUBLISH_STREAM_STATE.update_info, o.streamHandler.updateStreamInfo(t, c.ENUM_STREAM_SUB_CMD.liveBegin, this.stateCenter.publishStreamList[t].extra_info, function (e) { })) : (this.logger.info("zc.opsuh.0 stream update " + t), this.stateCenter.publishStreamList[t].state = c.ENUM_PUBLISH_STREAM_STATE.publishing, this.WebrtcOnPublishStateUpdateHandle(e, t, A)) } } else { if (1 == e && i && u.ClientUtil.isReDispatch(A)) { var s = i.publisher, a = i.retryDispatchHandler, g = i.publishOption; return 0 != s.sessionId && s.signal && s.shouldSendCloseSession() && (s.signal.sendCloseSession(this.stateCenter.getSeq(), s.sessionId, 1), s.signal.removeSession(s.sessionId), s.closeSessionSignal = !0), s.resetPublish(), a.stopMaxTime(), a.invalid(), a.initStream(t, g, !0), void (this.rtm.isLogin() ? (a.startMaxTime(), a.active(0)) : this.streamCenter.publisherList[t].isReDispatch = !0) } o.streamHandler.onPublishStateUpdate(e, t, A), 1 == e && (this.logger.info("zc.opsuh.0 stop publish called by sdk"), this.publishModule.stopPublishingStream(t, A)) } else this.logger.error("zc.opsuh.0 room not exist") }, A.prototype.WebrtcOnPublishStateUpdateHandle = function (e, t, A) { if (this.stateCenter.publishStreamList[t].state == c.ENUM_PUBLISH_STREAM_STATE.publishing) { var r = this.streamCenter.getRoomByStreamID(t); r && r.streamHandler.onPublishStateUpdate(e, t, A) } }, A.prototype.bindListener = function (e, t) { var A = this.stateCenter.reporter.createSpan(a.TRACER_LEVEL.H, { "key": g.ZegoRTCLogEvent.kZegoTaskListener.event }, { "key": "" }, g.ZegoRTCLogEvent.kZegoTaskOnListener.event); return A.setAttributes({ "listener": e }), this.stateCenter.listenerList[e] ? "function" != typeof t ? (this.logger.error("zc.o.0 listener callBack must be funciton"), this.stateCenter.reporter.setError(A, g.ZegoRTCLogEvent.kZegoTaskOnListener.error.INPUT_PARAM, " listener callBack must be function"), !1) : (-1 == this.stateCenter.listenerList[e].indexOf(t) && this.stateCenter.listenerList[e].push(t), A.end(), !0) : (this.logger.error("zc.o.0 event " + e + " no found"), this.stateCenter.reporter.setError(A, g.ZegoRTCLogEvent.kZegoTaskOnListener.error.INPUT_PARAM, " event " + event + " no found"), !1) }, A.prototype.deleteListener = function (e, t) { var A = this.stateCenter.reporter.createSpan(a.TRACER_LEVEL.H, { "key": g.ZegoRTCLogEvent.kZegoTaskListener.event }, { "key": "" }, g.ZegoRTCLogEvent.kZegoTaskOffListener.event); if (A.setAttributes({ "listener": e }), !this.stateCenter.listenerList[e]) return this.logger.error("zc.o.1 listener no found"), this.stateCenter.reporter.setError(A, g.ZegoRTCLogEvent.kZegoTaskOffListener.error.INPUT_PARAM, " event " + event + " no found"), !1; this.logger.info("dc.o.1 " + "".concat(e, " cb:") + (void 0 === t ? "undefined" : _typeof(t))); var r = this.stateCenter.listenerList[e]; return t ? r.splice(r.indexOf(t), 1) : this.stateCenter.listenerList[e] = [], A.end(), !0 }, A.prototype.checkBackgroundCapacity = function () { if (this.stateCenter.netAppConfig) { var e = this.stateCenter.netAppConfig.media_config.publish_config.object_segmentation_platform; return !!e && !!(0, u.getBitCode)(e, 0) } return !0 }, A }(); t.RTCModules = f }, "1429": function _(e, t, r) { "use strict"; var i = this && this.__awaiter || function (e, t, A, r) { return new (A || (A = Promise))(function (i, o) { function n(e) { try { a(r.next(e)) } catch (e) { o(e) } } function s(e) { try { a(r.throw(e)) } catch (e) { o(e) } } function a(e) { var t; e.done ? i(e.value) : (t = e.value, t instanceof A ? t : new A(function (e) { e(t) })).then(n, s) } a((r = r.apply(e, t || [])).next()) }) }, o = this && this.__generator || function (e, t) { var A, r, i, o, n = { "label": 0, "sent": function sent() { if (1 & i[0]) throw i[1]; return i[1] }, "trys": [], "ops": [] }; return o = { "next": s(0), "throw": s(1), "return": s(2) }, "function" == typeof Symbol && (o[Symbol.iterator] = function () { return this }), o; function s(s) { return function (a) { return function (s) { if (A) throw new TypeError("Generator is already executing."); for (; o && (o = 0, s[0] && (n = 0)), n;)try { if (A = 1, r && (i = 2 & s[0] ? r.return : s[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, s[1])).done) return i; switch (r = 0, i && (s = [2 & s[0], i.value]), s[0]) { case 0: case 1: i = s; break; case 4: return n.label++, { "value": s[1], "done": !1 }; case 5: n.label++, r = s[1], s = [0]; continue; case 7: s = n.ops.pop(), n.trys.pop(); continue; default: if (!((i = (i = n.trys).length > 0 && i[i.length - 1]) || 6 !== s[0] && 2 !== s[0])) { n = 0; continue } if (3 === s[0] && (!i || s[1] > i[0] && s[1] < i[3])) { n.label = s[1]; break } if (6 === s[0] && n.label < i[1]) { n.label = i[1], i = s; break } if (i && n.label < i[2]) { n.label = i[2], n.ops.push(s); break } i[2] && n.ops.pop(), n.trys.pop(); continue }s = t.call(e, n) } catch (e) { s = [6, e], r = 0 } finally { A = i = 0 } if (5 & s[0]) throw s[1]; return { "value": s[0] ? s[1] : void 0, "done": !0 } }([s, a]) } } }, n = this && this.__importDefault || function (e) { return e && e.__esModule ? e : { "default": e } }; Object.defineProperty(t, "__esModule", { "value": !0 }), t.MiniSdpWorker = void 0; var s = n(r(5527)), a = n(r(741)), c = r(2532), g = function () { function A() { var e = this; this.msgSuccessCallBack = {}; var t = a.default.toString().trim().match(/^function\s*\w*\s*\([\w\s,]*\)\s*{([\w\W]*?)}$/)[1], A = URL.createObjectURL(new window.Blob([t], { "type": "text/javascript" })); this.worker = new Worker(A); var r = URL.createObjectURL(new window.Blob([s.default + ";this._ModuleFn=Module;"], { "type": "text/javascript" })); this.worker.postMessage({ "command": "init", "val": r }), this.worker.onmessage = function (t) { var A = t.data; A.eventId && e.msgSuccessCallBack[A.eventId] instanceof Function && (e.msgSuccessCallBack[A.eventId]({ "code": A.code, "data": A.data }), delete e.msgSuccessCallBack[A.eventId]) }, this.worker.onmessageerror = function (e) { console.error("Error receiving message from worker: ".concat(e)) }, this.worker.onerror = function (e) { console.error(e) } } return A.prototype.messageHandler = function (e) { var t = this; return new Promise(function (A) { var r = Math.floor(10 * Math.random()); e.eventId = "".concat(e.command, "_ \n        ").concat(Date.now().toString(16).slice(r, r + 6)), t.worker.postMessage(e), t.msgSuccessCallBack[e.eventId] = function (e) { A(e) } }) }, A.prototype.parseToMiniSdp = function (e) { return i(this, void 0, void 0, function () { var t = this; return o(this, function (A) { return [2, new Promise(function (A, r) { return i(t, void 0, void 0, function () { var t, i; return o(this, function (o) { switch (o.label) { case 0: return "string" == typeof e && e ? [4, this.messageHandler({ "command": "parseToMiniSdp", "val": e })] : (r(c.errorCodeList.INPUT_PARAM), [2]); case 1: if (0 === (t = o.sent()).code) A(t.data); else { switch (i = void 0, t.code) { case -1: i = c.errorCodeList.WRONG_FORMAT; break; case -2: i = c.errorCodeList.SIZE_EXCEEDED; break; case -3: i = c.errorCodeList.URL_EXCEEDED }r(i) } return [2] } }) }) })] }) }) }, A.prototype.loadMiniSdpToOriginSdp = function (e) { return i(this, void 0, void 0, function () { var t = this; return o(this, function (A) { return [2, new Promise(function (A, r) { return i(t, void 0, void 0, function () { var t; return o(this, function (i) { switch (i.label) { case 0: return e instanceof Uint8Array ? [4, this.messageHandler({ "command": "loadMiniSdpToOriginSdp", "val": e })] : (r(c.errorCodeList.INPUT_PARAM), [2]); case 1: return 0 == (t = i.sent()).code && A(t.data), [2] } }) }) })] }) }) }, Object.defineProperty(A, "isSupported", { "get": function get() { return !(!window.WebAssembly || !window.Worker) }, "enumerable": !1, "configurable": !0 }), A.prototype.destroy = function () { this.worker.terminate() }, A }(); t.MiniSdpWorker = g }, "741": function _(e, t) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.default = function () { var e = {}, t = this, A = { "init": function init(A) { importScripts(A), t._ModuleFn(e) }, "parseToMiniSdp": function parseToMiniSdp(A, r) { var i = e._parseToMiniSdp, o = e._getBuffer, n = e.HEAPU8, s = e._free, a = (0, e.allocateUTF8)(A), c = i(a); if (c < 0) return t.postMessage({ "code": c, "eventId": r }); var g = o(), u = new Uint8Array(n.subarray(g, g + c - 1)) || new Uint8Array; t.postMessage({ "code": 0, "data": u, "eventId": r }); try { s(a), s(c), s(g) } catch (e) { console.error(e) } }, "loadMiniSdpToOriginSdp": function loadMiniSdpToOriginSdp(A, r) { var i, o, n, s = e._loadMiniSdpToSdp, a = e.UTF8ToString, c = e.HEAPU8, g = e._free, u = (0, e._malloc)(A.length); c.set(A, u); for (var l = a(s(u, A.byteLength)) || "", h = l.split("\r\n") || [], d = ["ice-ufrag", "ice-pwd", "ice-options", "fingerprint", "setup", "mid", "extmap", "sendrecv", "sendonly", "recvonly", "inactive", "rtpmap", "rtcp-fb", "fmtp", "ssrc", "candidate", "msid"]; h.length;) { var C = h.length, I = null === (o = null === (i = h[C - 1]) || void 0 === i ? void 0 : i.split("=")[1]) || void 0 === o ? void 0 : o.split(":")[0]; if (-1 != (null === (n = h[C - 1]) || void 0 === n ? void 0 : n.indexOf("=")) && d.includes(I)) break; h.pop() } l = h.join("\r\n"), t.postMessage({ "code": 0, "data": l += "\r\n", "eventId": r }); try { g(u) } catch (e) { console.error(e) } } }; onmessage = function onmessage(e) { A[e.data.command] ? A[e.data.command](e.data.val, e.data.eventId) : console.error("the command is invalid") } } }, "5803": function _(e, t) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.calculateCumulativeDuration = t.recordBreakDuration = t.onBreakEnd = void 0, t.onBreakEnd = function (e, t, A, r, i) { if (void 0 === i && (i = "video"), t.breakStartTime) { var o = e - t.breakStartTime; o >= r && (t.cumulativeBreakDuration += o, A.breakDuration += o), t.breakStartTime = void 0 } }, t.recordBreakDuration = function (e, A, r, i, o, n, s, a, c, g) { if (void 0 === c && (c = a), void 0 === g && (g = "video"), o > 1e3 && (o = 1e3), i.breakStartTime) if (r) 0 === A ? (e - i.breakStartTime >= 22e3 && (0, t.onBreakEnd)(e, i, s, o, g), n.breakDuration += 1e3) : a >= o ? a < 500 ? a + c < 1e3 ? ((0, t.onBreakEnd)(e - (1e3 - c), i, s, o, g), i.breakStartTime = e - a, n.breakDuration += c + a, n.decodeTime += 1e3 - (c + a)) : ((0, t.onBreakEnd)(e - 1e3 + c, i, s, o, g), i.breakStartTime = e - 1e3 + c, n.breakDuration += 1e3) : a >= 500 && ((0, t.onBreakEnd)(e - a, i, s, o, g), i.breakStartTime = e - a, n.breakDuration += 1e3) : c <= o ? ((0, t.onBreakEnd)(e - 1e3 + c, i, s, o, g), i.breakStartTime = void 0, n.breakDuration += c, n.decodeTime += 1e3 - c, s.decodeDuration += 1e3 - c) : n.breakDuration += 1e3; else { i.resumeRecv = !1; var u = e - 1e3 - i.breakStartTime; u <= 0 && (u = 0), i.breakStartTime = void 0, i.noBreakNoDecodeDuration += u, n.breakCancelDuration += u, s.blankDuration += u } else r ? 0 === A ? i.resumeRecv ? (i.breakStartTime = e - 1e3, n.breakDuration += 1e3) : (i.noBreakNoDecodeDuration += 1e3, s.blankDuration += 1e3) : c > o ? i.resumeRecv ? (i.breakStartTime = e - c, i.cumulativeBreakDuration += c, n.breakDuration += c, n.decodeTime += 1e3 - c, s.breakDuration += c, s.decodeDuration += 1e3 - c) : (i.noBreakNoDecodeDuration += 1e3, s.blankDuration += 1e3) : (n.decodeTime += 1e3, s.decodeDuration += 1e3) : i.decodeStartTime && (0 === A ? (i.resumeRecv = !1, i.noBreakNoDecodeDuration += 1e3, s.blankDuration += 1e3) : (n.decodeTime += 1e3, s.decodeDuration += 1e3)); r && A && (i.resumeRecv = !0) }, t.calculateCumulativeDuration = function (e, t, A, r, i, o, n) { if (void 0 === n && (n = "video"), r = r > 1e3 ? 1e3 : r, t.breakDuration = 0, t.breakCancelDuration = 0, t.decodeTime = 0, A.decodeDuration = 0, A.breakDuration = 0, A.blankDuration = 0, e.decodeStartTime) { var s = o, a = s - e.decodeStartTime; if (e.decodeStartTime = void 0, e.totalDuration += a, e.breakStartTime) { var c = s - e.breakStartTime; e.breakStartTime = void 0, i ? c > r && (e.cumulativeBreakDuration += c) : e.noBreakNoDecodeDuration += c } var g = e.cumulativeBreakDuration, u = e.totalDuration - e.cumulativeBreakDuration - e.noBreakNoDecodeDuration; return e.cumulativeDecodeDuration = u, { "cumulativeBreakDuration": g, "cumulativeDecodeDuration": u } } return { "cumulativeBreakDuration": 0, "cumulativeDecodeDuration": 0 } } }, "2388": function _(e, t, r) { "use strict"; var i = this && this.__assign || function () { return (i = Object.assign || function (e) { for (var t, A = 1, r = arguments.length; A < r; A++)for (var i in t = arguments[A]) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]); return e }).apply(this, arguments) }; Object.defineProperty(t, "__esModule", { "value": !0 }), t.PlayModule = void 0; var o = r(5123), n = r(93), s = r(5123), a = r(1586), c = r(4028), g = a.ZegoRTCLogEvent.kZegoTaskPlayStart, u = function () { function A(e, t, A, r, i) { this.logger = e, this.dataReport = t, this.stateCenter = A, this.streamCenter = r, this.rtm = i } return A.prototype.startPlayingStream = function (e, t, A) { var r = this; return this.logger.info(n.ZEGO_WEBRTC_ACTION.START_PLAYING_STREAM + " call ", e, " playOption: ", JSON.stringify((0, c.assignPartialObject)(t || {}, ["CDNVideo", "CDNPlayer"])), " isDataChannel: ", JSON.stringify(!!A)), new Promise(function (i, o) { return r._handlePlayStream(e, t, i, o, A) }) }, A.prototype._handlePlayStream = function (e, t, A, r, u) { var l, h = this, C = g, I = this.stateCenter.reporter.createSpan(o.TRACER_LEVEL.I, { "key": a.ZegoRTCLogEvent.kZMInitSetting.event }, { "key": g.event, "par": e }, g.event, !0), E = function d(e, t) { h.logger.error(n.ZEGO_WEBRTC_ACTION.START_PLAYING_STREAM + " " + (t || e.message)), h.stateCenter.reporter.setError(I, e), r && r(i(i({}, e), { "errorCode": e.code, "extendedData": e.message + (t ? " " + t : "") })) }; if (void 0 === e || "string" != typeof e || "" === e) return E(C.error.kPlayParamError, "stream id type error"), !1; if (e.length > s.MAX_STREAM_ID_LENGTH) return E(C.error.kPlayStreamIDToLongError, "stream id length limit " + s.MAX_STREAM_ID_LENGTH), !1; if (!c.ClientUtil.checkIllegalCharacters(e)) return E(C.error.kPlayStreamIDInvalidCharacterError), !1; if (void 0 !== t && "object" != (void 0 === t ? "undefined" : _typeof(t))) return E(C.error.kPlayParamError, "playOption must be object"), !1; var p = (0, c.generaStreamSid)(this.stateCenter.appid, this.stateCenter.idName, e), f = ((l = {})["_play_" + e] = { "stream_sid": p }, l); this.stateCenter.reporter.setPublicPros(f); var B, _ = i(i({}, t), { "CDNVideo": void 0, "CDNPlayer": void 0 }); if (I.setAttributes({ "stream_id": g.stream_id(e), "stream_sid": g.stream_sid(p), "play_option": g.play_option(_), "video_codec_id": g.video_codec_id(null == t ? void 0 : t.videoCodec), "use_na": g.use_na(this.stateCenter.useNetAgent ? 1 : 0), "biz_product": (null == t ? void 0 : t.resourceMode) == o.ResourceMode.DG ? 1 : 0 }), this.stateCenter.customUrl && 0 != this.stateCenter.customUrl.length) this.logger.info("zc.p.sps.1 customUrl " + JSON.stringify(this.stateCenter.customUrl)), B = this.stateCenter.customUrl; else { var m = this.stateCenter.settingConfig.getSetting("signal_nodes", !0); m && m instanceof Array && m.length > 0 && (B = m, this.logger.info("zc.p.sps.1 setting config signal_nodes " + JSON.stringify(m))) } if (B) { var Q = this.streamCenter.setPlayStateStart(e, t, p, u); return !0 !== Q ? (E(JSON.parse(JSON.stringify(Q)), "cannot start play"), !1) : (this.streamCenter.onPlayStateUpdate(s.ENUM_PLAY_STATE_UPDATE.retry, e, { "code": 0, "message": "" }), this.streamCenter.playerList[e].serverUrls = B, this.streamCenter.startPlayingStream(e, !1, function (e) { A && A(e) })) } if (this.stateCenter.useNetAgent && this.stateCenter.playAccelerate && this.stateCenter.roomList.length > 0) this.logger.info(n.ZEGO_WEBRTC_ACTION.START_PLAYING_STREAM + " play accelerate"); else if (this.rtm.isDisConnect()) return E(C.error.kPlayNoLoginError), !1; this.stateCenter.pullLimited || (e = NaN + e), t && t.videoCodec && (t.videoCodec = t.videoCodec.toUpperCase()); var y = this.stateCenter.settingConfig.getSetting("resource_mode", !0); void 0 !== y && (this.logger.info(n.ZEGO_WEBRTC_ACTION.START_PLAYING_STREAM, " setting resource_mode " + y), !t && (t = {}), t.resourceMode = y); var v = this.streamCenter.setPlayStateStart(e, t, p, u); if (!0 !== v) return E(JSON.parse(JSON.stringify(v)), "cannot start play"), !1; if (this.streamCenter.onPlayStateUpdate(s.ENUM_PLAY_STATE_UPDATE.retry, e, { "code": 0, "message": "" }), this.streamCenter.playSuccessCallBackList[e] = function (e) { A && A(e) }, r && (this.streamCenter.playErrorCallBackList[e] = r), t && t.resourceMode && [1, 3].includes(t.resourceMode) && this.streamCenter.playerList[e].playMode == o.PlayMode.CDN) return this.streamCenter.startPlayingStream(e, this.stateCenter.useNetAgent, this.streamCenter.playSuccessCallBackList[e], !0); var S = a.ZegoRTCLogEvent.kZegoStartPlay; this.stateCenter.reporter.createSpan(o.TRACER_LEVEL.H, { "key": g.event, "par": e }, { "key": S.event, "par": e }, S.event, !0).setAttributes({ "reason": S.reason("StartPlay") }); var D = this.stateCenter.useNetAgent; if (D) return this.stateCenter.appConfig ? (this.streamCenter.playerList[e].serverUrls = 2 === (null == t ? void 0 : t.resourceMode) ? ["unified_l3"] : ["unified_rtc"], this.streamCenter.startPlayingStream(e, D, this.streamCenter.playSuccessCallBackList[e]), !0) : (this.streamCenter.waitPlayList.push(e), !0); var R = this.streamCenter.playerList[e].retryDispatchHandler; return R.stopMaxTime(), R.invalid(), R.initStream(e, t, !1), R.startMaxTime(), R.active(0) }, A.prototype.stopPlayingStream = function (e, t) { var A, r, i, c; this.logger.info(n.ZEGO_WEBRTC_ACTION.STOP_PLAYING_STREAM + " call", e); var g = this.stateCenter.reporter.createSpan(o.TRACER_LEVEL.I, { "key": a.ZegoRTCLogEvent.kZMInitSetting.event }, { "key": "" }, a.ZegoRTCLogEvent.kZegoTaskPlayStop.event); if ("string" != typeof e || "" === e) return this.logger.error(n.ZEGO_WEBRTC_ACTION.STOP_PLAYING_STREAM + " streamid must be string and not empty"), this.stateCenter.reporter.setError(g, a.ZegoRTCLogEvent.kZegoTaskPlayStop.error.kParamError, "stream id type error"), void delete this.stateCenter.reportSeqList.stopPlay[e]; var u = this.streamCenter.playerList[e]; g.setAttributes({ "stream_id": a.ZegoRTCLogEvent.kZegoTaskPlayStop.stream_id(e), "room_id": a.ZegoRTCLogEvent.kZegoTaskPlayStop.room_id(null === (A = this.streamCenter.playerList[e]) || void 0 === A ? void 0 : A.room.roomID), "webrtc_sid": a.ZegoRTCLogEvent.kZegoTaskPlayStop.webrtc_sid(null === (r = null == u ? void 0 : u.player) || void 0 === r ? void 0 : r.sessionId), "stream_sid": a.ZegoRTCLogEvent.kZegoTaskPlayStop.stream_sid(null == u ? void 0 : u.streamSid), "biz_product": u && (null === (i = u.playOption) || void 0 === i ? void 0 : i.resourceMode) == o.ResourceMode.DG ? 1 : 0 }); var l = u && u.player && u.player.state !== s.ENUM_PLAY_STATE.stop || (null === (c = null == u ? void 0 : u.retryStreamHandler) || void 0 === c ? void 0 : c.isRetrying()), h = [1, 3].includes(null == u ? void 0 : u.player.resourceMode) && (null == u ? void 0 : u.playMode) === o.PlayMode.CDN; for (var d in this.streamCenter.stopPlayingStream(e, t), this.stateCenter.streamUrlMap) if (this.stateCenter.streamUrlMap[d] === e) { delete this.stateCenter.streamUrlMap[d]; break } t ? this.stateCenter.reporter.setError(g, t) : g.end(), l && this.streamCenter.onPlayStateUpdate(s.ENUM_PLAY_STATE_UPDATE.error, e, t || { "code": 0, "message": "" }, { "isCDN": h }), this.logger.debug(n.ZEGO_WEBRTC_ACTION.STOP_PLAYING_STREAM + " call success") }, A.prototype.mutePlayStream = function (e, t, A) { return new Promise(function (e, t) { e(!1) }) }, A.prototype.setStreamAudioOutput = function (e, t) { return !1 }, A.prototype.startWaitPlay = function () { var e = this; this.streamCenter.waitPlayList.forEach(function (t) { e.streamCenter.startPlayingStream(t, e.stateCenter.useNetAgent, e.streamCenter.playSuccessCallBackList[t]) }), this.streamCenter.waitPlayList = [] }, A.prototype.getStreamStats = function (e) { var t, A, r; return this.logger.info(n.ZEGO_WEBRTC_ACTION.DESTROY_STREAM + " call"), "string" == typeof e && (r = null === (t = this.streamCenter.playerList[e]) || void 0 === t ? void 0 : t.player), r && (null === (A = null == r ? void 0 : r.qualityHandler) || void 0 === A ? void 0 : A.currentQuality) ? r.qualityHandler.currentQuality || null : (this.logger.error("zsc.sp.0 stream is not playing"), null) }, A }(); t.PlayModule = u }, "7384": function _(e, t, r) { "use strict"; var i = this && this.__assign || function () { return (i = Object.assign || function (e) { for (var t, A = 1, r = arguments.length; A < r; A++)for (var i in t = arguments[A]) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]); return e }).apply(this, arguments) }; Object.defineProperty(t, "__esModule", { "value": !0 }), t.PlayStreamQuality = void 0; var o = r(5123), n = r(93), s = r(1586), a = r(4028), c = r(5803), g = r(5601), u = function () { function A(e, t, A, r, i) { this.player = t, this.logger = A, this.dataReport = r, this.stateCenter = i, this.playQualityList = [], this.maxQualityListCount = 10, this.qualityTimer = null, this.lastPlayStats = { "audioPacketsLost": 0, "videoPacketsLost": 0, "time": 0, "audioTime": 0, "videoTime": 0, "audioBytesReceived": 0, "videoBytesReceived": 0, "audioPacketsReceived": 0, "videoPacketsReceived": 0, "framesDecoded": 0, "framesReceived": 0, "framesDropped": 0, "audioBitrate": 0 }, this.currentQuality = { "video": { "videoBitrate": 0, "videoFPS": 0, "videoTransferFPS": 0, "frameHeight": 0, "frameWidth": 0, "muteState": "1", "videoQuality": -1, "googCodecName": "", "videoPacketsLost": 0, "videoPacketsLostRate": 0, "videoFramesDecoded": 0, "videoFramesDropped": 0, "videoCumulativeDecodeTime": 0, "videoCumulativeBreakTime": 0, "videoCumulativeBreakRate": 0 }, "audio": { "audioBitrate": 0, "audioCodec": "opus", "muteState": "1", "audioQuality": -1, "audioFPS": 0, "audioJitter": 0, "audioLevel": 0, "audioPacketsLost": 0, "audioPacketsLostRate": 0, "audioSamplingRate": 0, "audioSendLevel": 0, "googCodecName": "", "audioCumulativeDecodeTime": 0, "audioCumulativeBreakTime": 0, "audioCumulativeBreakRate": 0 }, "peerToPeerDelay": 0, "peerToPeerPacketLostRate": 0 }, this.decodeStartTime = 0, this.netQuality = 0, this.probeTime = 0, this.probeInterval = 6e4, this.probeState = o.ENUM_PROBE_STATE.probed, this.probeTimer = null, this.probeTimeoutInterval = 3e4, this.qualityUpload = !1, this.qualityUploadInterval = 3e4, this.qualityUploadLastTime = 0, this.playStat = {}, this.cumulativeQuality = {}, this.audioBreakThreshold = 200, this.videoBreakThreshold = 500, this.videoBreak = { "breakStartTime": void 0, "cumulativeBreakDuration": 0, "cumulativeDecodeDuration": 0, "decodeStartTime": void 0, "decodeEndTime": void 0, "totalDuration": 0, "noBreakNoDecodeDuration": 0, "resumeRecv": !0 }, this.audioBreak = { "breakStartTime": void 0, "cumulativeBreakDuration": 0, "cumulativeDecodeDuration": 0, "decodeStartTime": void 0, "decodeEndTime": void 0, "totalDuration": 0, "noBreakNoDecodeDuration": 0, "resumeRecv": !0 }, this.lastSampleTime = 0, this.videoBreakReport = { "breakDuration": 0, "breakCancelDuration": 0, "decodeTime": 0 }, this.audioBreakReport = { "breakDuration": 0, "breakCancelDuration": 0, "decodeTime": 0 }, this.videoReliableBreak = { "decodeDuration": 0, "breakDuration": 0, "blankDuration": 0 }, this.audioReliableBreak = { "decodeDuration": 0, "breakDuration": 0, "blankDuration": 0 }, this.totalQuality = { "totalSquaredInterFrameDelay": 0, "totalInterFrameDelay": 0, "framesDecode": 0, "totalSamplesReceived": 0, "concealedSamples": 0, "audioBytesReceived": 0 }, this.currentSecondQuality = { "totalSquaredInterFrameDelay": 0, "totalInterFrameDelay": 0, "framesDecode": 0, "totalSamplesReceived": 0, "concealedSamples": 0 }, this.poorQualityNum = 0, this.p2pNetStats = { "p2pLostRate": 0, "p2pRTT": 0 }, this.sampleTimes = 0, this.qualitySampleInterval = 1e3, this.qualityTimeInterval = e, this.currentQuality.video.muteState = this.player.videoMuteState, this.currentQuality.audio.muteState = this.player.audioMuteState, this.exception = new g.Exception(this.stateCenter, this.logger, this.streamId, s.ZegoRTCLogEvent.kZegoTaskPlayStart.event) } return Object.defineProperty(A.prototype, "streamId", { "get": function get() { return this.player.streamId }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "sessionId", { "get": function get() { return this.player.sessionId }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "peerID", { "get": function get() { return this.player.peerID }, "enumerable": !1, "configurable": !0 }), A.prototype.getPlayStats = function (e, t) { var A, r, i, s, g, u = this; if (null != e) { var l = this.sampleTimes % parseInt((this.qualityTimeInterval / this.qualitySampleInterval).toString()) == 0; parseInt((this.qualityTimeInterval / this.qualitySampleInterval).toString()), l && this.getP2PNetStats(); for (var h, d = document.querySelectorAll("video, audio"), C = 0; C < d.length; C++)d[C].srcObject === this.player.playStream && (h = d[C]); var I = this.player.rtcViewer; !h && I && (h = I.audio); var E = { "sampleTimeWindow": this.qualityTimeInterval, "audioFractionLost": 0, "audioPacketsLost": 0, "audioPacketsLostRate": 0, "audioBitrate": 0, "audioLevel": 0, "audioSendLevel": 0, "audioSamplingRate": 0, "audioCodec": "opus", "audioQuality": 0, "audioFPS": 0, "videoQuality": 0, "videoPacketsLost": 0, "videoPacketsLostRate": 0, "videoBitrate": 0, "videoFPS": 0, "nackCount": 0, "pliCount": 0, "audioJitter": 0, "videoJitter": 0, "videoFractionLost": 0, "videoFramesDecoded": 0, "frameHeight": 0, "frameWidth": 0, "videoTransferFPS": 0, "videoFramesDropped": 0, "totalRoundTripTime": 0, "currentRoundTripTime": 0, "googBandwidthLimitedResolution": void 0, "videoCodecName": "", "audioCodecName": "", "googCpuLimitedResolution": void 0, "googAvailableSendBandwidth": 0, "audioMuteState": this.player.remoteStream && this.player.remoteStream.getAudioTracks().length > 0 && (null === (A = this.player.remoteStream) || void 0 === A ? void 0 : A.getAudioTracks()[0].enabled) ? "0" : "1", "videoMuteState": this.player.remoteStream && this.player.remoteStream.getVideoTracks().length > 0 && (null === (r = this.player.remoteStream) || void 0 === r ? void 0 : r.getVideoTracks()[0].enabled) ? "0" : "1", "soundLevel": this.player.soundLevel, "muted": h ? h.muted : void 0, "paused": h ? h.paused : void 0, "volume": h ? h.volume : void 0, "sinkId": h ? h.sinkId : void 0 }, p = this.lastPlayStats.time, f = 0, B = 0, _ = 0, m = 0, Q = 0, y = 0, v = 0, S = null, D = null; e.forEach(function (e) { ["ssrc", "inbound-rtp"].includes(e.type) && ("video" == e.mediaType || e.id.indexOf("VideoStream") >= 0) && (S = e), ("inbound-rtp" == e.type || "ssrc" == e.type && null != e.bytesReceived) && ("audio" == e.mediaType || e.id.indexOf("AudioStream") >= 0) && (D = e) }); var R = (new Date).getTime(), b = function k(e, t) { return e > t ? e - t : 0 }; if (this.lastSampleTime || (this.lastSampleTime = R - 1e3), S) { var T = S.totalInterFrameDelay, k = S.framesDecoded, w = S.totalSquaredInterFrameDelay, N = b(k, this.totalQuality.framesDecode); this.totalQuality.framesDecode = k; var L = b(T, this.totalQuality.totalInterFrameDelay); this.totalQuality.totalInterFrameDelay = T; var O = b(w, this.totalQuality.totalSquaredInterFrameDelay); this.totalQuality.totalSquaredInterFrameDelay = w; var M = (O - Math.pow(L, 2) / (N || 1)) / (N || 1); M = M > 0 ? M : -M; var P = parseInt((1e3 / (N + 1)).toString()), U = 1e3 * Math.sqrt(M), G = L / (N || 1) * 1e3 || P, F = (G = parseInt((G > 1e3 ? 1e3 : G).toString())) + U; F = parseInt((F > 1e3 ? 1e3 : F).toString()), N > 0 && 0 === this.player.cameraStatus && !this.videoBreak.decodeStartTime && (this.videoBreak.decodeStartTime = R - 1e3), this.videoBreak.decodeStartTime && (0, c.recordBreakDuration)(R, N, 0 === this.player.cameraStatus && this.player.playMediaStatus.video, this.videoBreak, this.videoBreakThreshold, this.videoBreakReport, this.videoReliableBreak, G, F) } if (D) { var H = D.totalSamplesReceived, x = D.concealedSamples, q = D.bytesReceived, Y = b(H, this.totalQuality.totalSamplesReceived); this.totalQuality.totalSamplesReceived = H; var J = b(x, this.totalQuality.concealedSamples); this.totalQuality.concealedSamples = x; var K = b(q, this.totalQuality.audioBytesReceived); this.totalQuality.audioBytesReceived = q; var Z = parseInt((J / (Y || 1) * 1e3).toString()); K > 0 && 0 === this.player.micStatus && !this.audioBreak.decodeStartTime && (this.audioBreak.decodeStartTime = R - 1e3), this.audioBreak.decodeStartTime && (0, c.recordBreakDuration)(R, K, 0 === this.player.micStatus && this.player.playMediaStatus.audio, this.audioBreak, this.audioBreakThreshold, this.audioBreakReport, this.audioReliableBreak, Z, Z, "audio") } if (t && t.result().forEach(function (e) { l && ("ssrc" == e.type && (e.names().indexOf("googBandwidthLimitedResolution") >= 0 && (E.googBandwidthLimitedResolution = e.stat("googBandwidthLimitedResolution")), e.names().indexOf("codecImplementationName") >= 0 && (E.codecImplementationName = e.stat("codecImplementationName")), "video" == e.stat("mediaType") && (e.names().indexOf("googCodecName") >= 0 && (E.videoCodecName = e.stat("googCodecName")), e.names().indexOf("googCurrentDelayMs") >= 0 && (v = e.stat("googCurrentDelayMs"))), "audio" == e.stat("mediaType") && (e.names().indexOf("googCodecName") >= 0 && (E.audioCodecName = e.stat("googCodecName")), e.names().indexOf("googCurrentDelayMs") >= 0 && (y = e.stat("googCurrentDelayMs"))), e.names().indexOf("googCpuLimitedResolution") >= 0 && (E.googCpuLimitedResolution = e.stat("googCpuLimitedResolution"))), "VideoBwe" == e.type && e.names().indexOf("googAvailableSendBandwidth") >= 0 && (E.googAvailableSendBandwidth = e.stat("googAvailableSendBandwidth"))) }), l) { var j = !1; e.forEach(function (e) { "track" == e.type && (j = !0) }), e.forEach(function (e) { if (("inbound-rtp" == e.type || "ssrc" == e.type && null != e.bytesReceived) && ("audio" == e.mediaType || e.id.indexOf("AudioStream") >= 0)) { 0 != p && (E.audioBitrate = 8 * (e.bytesReceived - u.lastPlayStats.audioBytesReceived) / (e.timestamp - p), (A = e.packetsLost - u.lastPlayStats.audioPacketsLost) > 0 && (B = A / (A + e.packetsReceived - u.lastPlayStats.audioPacketsReceived))), E.audioBitrate < 0 && (E.audioBitrate = 0), E.audioJitter = e.jitter, e.packetsLost > 0 && (E.audioPacketsLost = e.packetsLost), E.audioFractionLost = e.fractionLost; var t = e.packetsLost - u.lastPlayStats.audioPacketsLost; E.audioFPS = (e.packetsReceived - u.lastPlayStats.audioPacketsReceived) / (e.timestamp - p) * 1e3, E.audioPacketsLostRate = t > 0 ? t / (e.packetsReceived - u.lastPlayStats.audioPacketsReceived + t) : 0, u.lastPlayStats.audioBytesReceived = e.bytesReceived, e.packetsLost > 0 && (u.lastPlayStats.audioPacketsLost = e.packetsLost), u.lastPlayStats.audioPacketsReceived = e.packetsReceived, u.lastPlayStats.audioTime = e.timestamp, u.lastPlayStats.time = e.timestamp, u.lastPlayStats.audioBitrate = E.audioBitrate, m = e.jitter, j || u.aTrackStats(E, e) } else if (("inbound-rtp" == e.type || "ssrc" == e.type && null != e.bytesReceived) && ("video" == e.mediaType || e.id.indexOf("VideoStream") >= 0)) { var A; 0 != p ? (E.videoBitrate = 8 * (e.bytesReceived - u.lastPlayStats.videoBytesReceived) / (e.timestamp - p), E.videoFPS = 1e3 * (e.framesDecoded - u.lastPlayStats.framesDecoded) / (e.timestamp - p), (A = e.packetsLost - u.lastPlayStats.videoPacketsLost) > 0 && (_ = A / (A + e.packetsReceived - u.lastPlayStats.videoPacketsReceived))) : "number" == typeof e.framesPerSecond && (E.videoFPS = e.framesPerSecond), E.videoBitrate < 0 && (E.videoBitrate = 0), E.videoFPS < 0 && (E.videoFPS = 0), E.videoJitter = e.jitter, E.nackCount = e.nackCount, E.pliCount = e.pliCount, E.videoFractionLost = e.fractionLost, E.videoFramesDecoded = e.framesDecoded, e.packetsLost > 0 && (E.videoPacketsLost = e.packetsLost), E.videoPacketsLostRate = (t = e.packetsLost - u.lastPlayStats.videoPacketsLost) > 0 ? t / (e.packetsReceived - u.lastPlayStats.videoPacketsReceived + t) : 0, u.lastPlayStats.videoBytesReceived = e.bytesReceived, u.lastPlayStats.framesDecoded = e.framesDecoded, e.packetsLost > 0 && (u.lastPlayStats.videoPacketsLost = e.packetsLost), u.lastPlayStats.videoPacketsReceived = e.packetsReceived, u.lastPlayStats.videoTime = e.timestamp, u.lastPlayStats.time = e.timestamp, Q = e.jitter, j || u.vTrackStats(E, e, p) } else "track" == e.type && ("video" == e.kind || e.id.indexOf("video") >= 0) || e.frameWidth ? u.vTrackStats(E, e, p) : "track" == e.type && ("audio" == e.kind || e.id.indexOf("audio") >= 0) ? u.aTrackStats(E, e) : "candidate-pair" == e.type && (null != e.totalRoundTripTime && (E.totalRoundTripTime = e.totalRoundTripTime), null != e.currentRoundTripTime && (E.currentRoundTripTime = e.currentRoundTripTime, f = 1e3 * E.currentRoundTripTime)) }), this.lastPlayStats.googCurrentDelayMs = Number(y) || Number(v) || 0, _ = isNaN(_) || _ < 0 ? 0 : _, Q = isNaN(Q) || Q < 0 ? 0 : Q, B = isNaN(B) || B < 0 ? 0 : B, m = isNaN(m) || m < 0 ? 0 : m; var V = a.ClientUtil.getNetQuality(f, _, Q), z = a.ClientUtil.getNetQuality(f, B, m); E.audioQuality = p > 0 ? a.ClientUtil.quality2QualityGrade(z) : 0, E.videoQuality = p > 0 ? a.ClientUtil.quality2QualityGrade(V) : 0, this.player.stateCenter.networkState !== o.ENUM_NETWORK_STATE.offline && "disconnected" !== (null === (i = this.player.peerConnection) || void 0 === i ? void 0 : i.connectionState) || (E.videoQuality = o.QualityGrade.Die, E.audioQuality = o.QualityGrade.Die); var W = Math.min(V, z); if (this.netQuality = W, E.peerToPeerDelay = isNaN(this.p2pNetStats.p2pRTT) ? 0 : parseInt((this.p2pNetStats.p2pRTT / 2 + this.lastPlayStats.googCurrentDelayMs).toString()), E.peerToPeerPacketLostRate = this.p2pNetStats.p2pLostRate, W <= this.player.streamCenter.targetQuality ? this.poorQualityNum++ : this.poorQualityNum = 0, W <= this.player.streamCenter.l3BadQualityScore && this.player.streamCenter.handleQualityBad(this.streamId, this.player.resourceMode, o.PlayMode.L3) ? this.logger.info(n.ZEGO_WEBRTC_ACTION.PLAYER_SET_PLAYER_QUALITY_TIMER + "check cdn mode") : p > 0 && this.poorQualityNum >= (null === (g = null === (s = this.player) || void 0 === s ? void 0 : s.streamCenter) || void 0 === g ? void 0 : g.probeStartedNum) && R > this.probeTime + this.probeInterval && (this.logger.info(n.ZEGO_WEBRTC_ACTION.PLAYER_SET_PLAYER_QUALITY_TIMER + " netQuality " + W + " start net probe"), this.probeState = o.ENUM_PROBE_STATE.tryProbe, this.player.poorQualityRetryCnt++, this.player.streamCenter.startNetProbe(!1, this.player, this.player.gwNodeList), this.probeTime = R), W > this.player.streamCenter.l3BadQualityScore) { var X = this.player.streamCenter.playerList[this.streamId]; X ? X.qualityBadCount = 0 : this.logger.warn(n.ZEGO_WEBRTC_ACTION.PLAYER_SET_PLAYER_QUALITY_TIMER + " ".concat(this.streamId, " play info not exist.")), this.player.streamCenter.l3ProtocolBadTimestamp = 0, this.player.streamCenter.lastHandleL3BadTimestamp = 0 } this.playStat = E, this.uploadPlayQuality(E, R), this.updateCurrentQualityStats(E), 0 != p && (this.player.onPlayQualityUpdate(this.streamId, this.currentQuality), this.exception.checkRemoteStats(E, this.player.playStream), this.player.streamCenter.changeRxQuality(a.ClientUtil.quality2QualityGrade(this.netQuality))) } } }, A.prototype.vTrackStats = function (e, t, A) { var r = t.frameHeight, i = t.frameWidth, n = t.framesReceived, a = t.framesDropped, c = t.timestamp; if (e.frameHeight = r, e.frameWidth = i, 0 === A || this.lastPlayStats.frameHeight === r && this.lastPlayStats.frameWidth === i) 0 === A && (this.lastPlayStats.frameHeight = r, this.lastPlayStats.frameWidth = i, this.player.isProbe || (this.stateCenter.reporter.spanAppendAttribute({ "key": s.ZegoRTCLogEvent.kZegoTaskStreamPlay.event, "par": this.streamId }, "vinfo", { "h": r, "fft": Date.now(), "w": i }), this.stateCenter.reporter.spanAppendAttribute({ "key": s.ZegoRTCLogEvent.kZegoTaskSDKPlayStream.event, "par": this.streamId }, "vinfo", { "h": r, "fft": Date.now(), "w": i }))); else { if (!this.player.isProbe) { var g = this.stateCenter.reporter.createSpan(o.TRACER_LEVEL.H, { "key": s.ZegoRTCLogEvent.kZegoTaskPlayStart.event, "par": this.streamId }, { "key": "" }, s.ZegoRTCLogEvent.kZegoTaskVideoPlaySize.event); g.setAttributes({ "webrtc_sid": s.ZegoRTCLogEvent.kZegoTaskVideoPlaySize.webrtc_sid(this.sessionId), "w": s.ZegoRTCLogEvent.kZegoTaskVideoPlaySize.w(i), "h": s.ZegoRTCLogEvent.kZegoTaskVideoPlaySize.h(r) }), g.end(), this.stateCenter.reporter.spanAppendAttribute({ "key": s.ZegoRTCLogEvent.kZegoTaskStreamPlay.event, "par": this.streamId }, "vinfo", { "h": r, "fft": Date.now(), "w": i }), this.stateCenter.reporter.spanAppendAttribute({ "key": s.ZegoRTCLogEvent.kZegoTaskSDKPlayStream.event, "par": this.streamId }, "vinfo", { "h": r, "fft": Date.now(), "w": i }) } this.lastPlayStats.frameHeight = r, this.lastPlayStats.frameWidth = i } 0 != A && (isNaN(n) || isNaN(a) || (e.videoTransferFPS = 1e3 * (n - this.lastPlayStats.framesReceived) / (c - A), e.videoFramesDropped = a - this.lastPlayStats.framesDropped)), e.videoTransferFPS < 0 && (e.videoTransferFPS = 0), e.videoFramesDropped < 0 && (e.videoFramesDropped = 0), n && (this.lastPlayStats.framesReceived = n), a && (this.lastPlayStats.framesDropped = a) }, A.prototype.aTrackStats = function (e, t) { e.audioLevel = t.audioLevel || 0, e.audioSendLevel = t.totalAudioEnergy, e.audioSamplingRate = t.totalSamplesDuration }, A.prototype.updateCurrentQualityStats = function (e) { var t = e.videoBitrate, A = e.videoFPS, r = e.videoTransferFPS, o = e.frameHeight, n = e.frameWidth, s = e.videoMuteState, a = e.videoQuality, c = e.videoFramesDecoded, g = e.videoFramesDropped, u = e.videoPacketsLost, l = e.videoPacketsLostRate, h = e.audioBitrate, d = e.audioCodec, C = e.audioMuteState, I = e.audioQuality, E = e.audioFPS, p = e.audioJitter, f = e.audioLevel, B = e.audioPacketsLost, _ = e.audioPacketsLostRate, m = e.audioSamplingRate, Q = e.audioSendLevel, y = e.nackCount, v = e.pliCount, S = e.totalRoundTripTime, D = e.currentRoundTripTime, R = e.peerToPeerDelay, b = e.peerToPeerPacketLostRate, T = e.sampleTimeWindow, k = { "video": i(i({}, this.currentQuality.video), { "videoBitrate": t, "videoFPS": A, "videoTransferFPS": r, "frameHeight": o, "frameWidth": n, "videoQuality": a, "videoFramesDecoded": c, "videoFramesDropped": g, "videoPacketsLost": u, "videoPacketsLostRate": l, "muteState": s, "videoCumulativeDecodeTime": this.videoReliableBreak.decodeDuration, "videoCumulativeBreakTime": this.videoReliableBreak.breakDuration, "videoCumulativeBreakRate": this.videoReliableBreak.breakDuration / (this.videoReliableBreak.decodeDuration + this.videoReliableBreak.breakDuration || 1) }), "audio": i(i({}, this.currentQuality.audio), { "audioBitrate": h, "audioCodec": d, "audioQuality": I, "audioFPS": E, "audioJitter": p, "audioLevel": f, "audioPacketsLost": B, "audioPacketsLostRate": _, "audioSamplingRate": m, "audioSendLevel": Q, "muteState": C, "audioCumulativeDecodeTime": this.audioReliableBreak.decodeDuration, "audioCumulativeBreakTime": this.audioReliableBreak.breakDuration, "audioCumulativeBreakRate": this.audioReliableBreak.breakDuration / (this.audioReliableBreak.decodeDuration + this.audioReliableBreak.breakDuration || 1) }), "nackCount": y, "pliCount": v, "totalRoundTripTime": S, "currentRoundTripTime": D, "peerToPeerDelay": R, "peerToPeerPacketLostRate": (b || 0) / 255, "sampleTimeWindow": T }; if (void 0 !== e.muted) { var w = e.paused, N = e.volume, L = e.sinkId; k.muted = e.muted, k.paused = w, k.volume = N, k.sinkId = L } if (void 0 !== e.videoCodecName) { var O = e.audioCodecName, M = e.codecImplementationName, P = e.googAvailableSendBandwidth; k.video.googCodecName = e.videoCodecName, k.audio.googCodecName = O, k.codecImplementationName = M, k.googAvailableSendBandwidth = P } this.currentQuality = k }, A.prototype.uploadPlayQuality = function (e, t) { var A, r; if (this.qualityUpload && this.player.signal.isServerConnected) { var i = t; if (0 == this.qualityUploadLastTime || i - this.qualityUploadLastTime >= 2e3) { if (e.stream_type = "play", e.stream_id = this.streamId, e.timeStamp = i, e.video_break_duration = this.videoBreakReport.breakDuration, e.video_break_cancel_duration = this.videoBreakReport.breakCancelDuration, e.video_decode_time = this.videoBreakReport.decodeTime, this.videoBreakReport.breakCancelDuration = 0, this.videoBreakReport.breakDuration = 0, this.videoBreakReport.decodeTime = 0, e.audio_break_duration = this.audioBreakReport.breakDuration, e.audio_break_cancel_duration = this.audioBreakReport.breakCancelDuration, e.audio_decode_time = this.audioBreakReport.decodeTime, this.audioBreakReport.breakCancelDuration = 0, this.audioBreakReport.breakDuration = 0, this.audioBreakReport.decodeTime = 0, e.real_sampling_interval = i - this.lastSampleTime, !e.frameHeight || !e.frameWidth) for (var o = document.querySelectorAll("video"), s = 0; s < o.length; s++) { var a = o[s], c = null === (A = a.srcObject) || void 0 === A ? void 0 : A.getVideoTracks()[0]; if (c && c == (null === (r = this.player.playStream) || void 0 === r ? void 0 : r.getVideoTracks()[0])) { e.frameHeight = a.videoHeight || 0, e.frameWidth = a.videoWidth || 0; break } } this.lastSampleTime = i, this.logger.info(n.ZEGO_WEBRTC_ACTION.PLAYER_UPLOAD_PLAYER_QUALITY + " " + this.streamId + " upload" + JSON.stringify(e)), this.player.streamCenter.updateQuality(1, e), this.qualityUploadLastTime = i } } }, A.prototype.getP2PNetStats = function () { var e = this; this.player.signal.getP2PNetStats((0, o.getSeq)(), this.sessionId, this.peerID, function (t, A, r) { var i = r.p2p_rtt; e.p2pNetStats.p2pLostRate = r.p2p_lost_rate || 0, e.p2pNetStats.p2pRTT = i || 0 }, function (e) { }) }, A.prototype.setPlayQualityTimer = function () { var e = this; null == this.qualityTimer && (this.logger.info(n.ZEGO_WEBRTC_ACTION.PLAYER_SET_PLAYER_QUALITY_TIMER + " " + this.streamId + " startTimer"), this.clearPlayQualityTimer(), this.getP2PNetStats(), this.qualityTimer = setInterval(function () { e.sampleTimes++; var t = e.player.peerConnection; if (t) { var A = [t.getStats(null)]; "chrome" == e.player.stateCenter.browser && A.push(new Promise(function (e) { try { var A = t.getStats(function (t) { return e(t) }, function (t) { e(null) }); "function" == typeof (null == A ? void 0 : A.catch) && A.catch(function (t) { e(null) }) } catch (t) { e(null) } })), Promise.all(A).then(function (t) { e.getPlayStats(t[0], t[1]) }).catch(function (t) { e.logger.error(n.ZEGO_WEBRTC_ACTION.PLAYER_SET_PLAYER_QUALITY_TIMER + " " + e.streamId + " getStats error " + t.toString()) }) } }, 1e3), this.lastPlayStats = { "audioPacketsLost": 0, "videoPacketsLost": 0, "time": 0, "audioTime": 0, "videoTime": 0, "audioBytesReceived": 0, "videoBytesReceived": 0, "videoPacketsReceived": 0, "audioPacketsReceived": 0, "framesDecoded": 0, "framesReceived": 0, "framesDropped": 0, "audioBitrate": 0 }) }, A.prototype.clearPlayQualityTimer = function () { if (null != this.qualityTimer) { clearInterval(this.qualityTimer), this.qualityTimer = null; var e = (new Date).getTime(); this.lastSampleTime = 0, this.sampleTimes = 0, this.totalQuality = { "totalSquaredInterFrameDelay": 0, "totalInterFrameDelay": 0, "framesDecode": 0, "totalSamplesReceived": 0, "concealedSamples": 0, "audioBytesReceived": 0 }, (0, c.calculateCumulativeDuration)(this.videoBreak, this.videoBreakReport, this.videoReliableBreak, this.videoBreakThreshold, 0 === this.player.cameraStatus && this.player.playMediaStatus.video, e), (0, c.calculateCumulativeDuration)(this.audioBreak, this.audioBreakReport, this.audioReliableBreak, this.audioBreakThreshold, 0 === this.player.micStatus && this.player.playMediaStatus.audio, e, "audio") } this.poorQualityNum = 0, this.lastPlayStats = { "audioPacketsLost": 0, "videoPacketsLost": 0, "time": 0, "audioTime": 0, "videoTime": 0, "audioBytesReceived": 0, "videoBytesReceived": 0, "videoPacketsReceived": 0, "audioPacketsReceived": 0, "framesDecoded": 0, "framesDropped": 0, "framesReceived": 0, "audioBitrate": 0 } }, A.prototype.startProbeTimeout = function () { var e = this; this.probeTimer = setTimeout(function () { e.logger.error(n.ZEGO_WEBRTC_ACTION.PLAYER_START_PLAY + " probe timeout"), e.player.playStateUpdateError(s.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kProbeTimeOutError) }, this.probeTimeoutInterval) }, A.prototype.stopProbeTimeout = function () { this.probeTimer && (clearTimeout(this.probeTimer), this.probeTimer = null) }, A }(); t.PlayStreamQuality = u }, "9746": function _(e, t, r) { "use strict"; var i = this && this.__assign || function () { return (i = Object.assign || function (e) { for (var t, A = 1, r = arguments.length; A < r; A++)for (var i in t = arguments[A]) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]); return e }).apply(this, arguments) }, o = this && this.__awaiter || function (e, t, A, r) { return new (A || (A = Promise))(function (i, o) { function n(e) { try { a(r.next(e)) } catch (e) { o(e) } } function s(e) { try { a(r.throw(e)) } catch (e) { o(e) } } function a(e) { var t; e.done ? i(e.value) : (t = e.value, t instanceof A ? t : new A(function (e) { e(t) })).then(n, s) } a((r = r.apply(e, t || [])).next()) }) }, n = this && this.__generator || function (e, t) { var A, r, i, o, n = { "label": 0, "sent": function sent() { if (1 & i[0]) throw i[1]; return i[1] }, "trys": [], "ops": [] }; return o = { "next": s(0), "throw": s(1), "return": s(2) }, "function" == typeof Symbol && (o[Symbol.iterator] = function () { return this }), o; function s(s) { return function (a) { return function (s) { if (A) throw new TypeError("Generator is already executing."); for (; o && (o = 0, s[0] && (n = 0)), n;)try { if (A = 1, r && (i = 2 & s[0] ? r.return : s[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, s[1])).done) return i; switch (r = 0, i && (s = [2 & s[0], i.value]), s[0]) { case 0: case 1: i = s; break; case 4: return n.label++, { "value": s[1], "done": !1 }; case 5: n.label++, r = s[1], s = [0]; continue; case 7: s = n.ops.pop(), n.trys.pop(); continue; default: if (!((i = (i = n.trys).length > 0 && i[i.length - 1]) || 6 !== s[0] && 2 !== s[0])) { n = 0; continue } if (3 === s[0] && (!i || s[1] > i[0] && s[1] < i[3])) { n.label = s[1]; break } if (6 === s[0] && n.label < i[1]) { n.label = i[1], i = s; break } if (i && n.label < i[2]) { n.label = i[2], n.ops.push(s); break } i[2] && n.ops.pop(), n.trys.pop(); continue }s = t.call(e, n) } catch (e) { s = [6, e], r = 0 } finally { A = i = 0 } if (5 & s[0]) throw s[1]; return { "value": s[0] ? s[1] : void 0, "done": !0 } }([s, a]) } } }; Object.defineProperty(t, "__esModule", { "value": !0 }), t.ZegoPlayWeb = void 0; var s = r(5123), a = r(5123), c = r(3332), g = r(9723), u = r(4028), l = r(1586), h = r(93), d = r(7384), C = r(3171), I = r(1018), E = r(6607), p = r(7652), f = r(3420), B = r(6348), m = l.ZegoRTCLogEvent.kZegoTaskPlayStart, Q = l.ZegoRTCLogEvent.kZegoTaskSDKPlayStream, y = l.ZegoRTCLogEvent.kZegoStartPlay; function D(e, t) { void 0 === t && (t = 0); for (var A = e.length, r = [], i = 0; i < A;)i >= t && A - i >= 3 && !e[i] && !e[i + 1] && 3 == e[i + 2] ? (r.push(e[i++]), r.push(e[i++]), i++) : r.push(e[i++]); var o = new Uint8Array(r); return { "output": o, "outLength": o.length } } var v = function () { function A(e, t, A, r, i, o, n, s) { var c, u = this; this.curCBState = { "state": "NO_PLAY", "code": 0 }, this._state = a.ENUM_PLAY_STATE.stop, this.lastState = a.ENUM_PLAY_STATE.stop, this.candidateInfo = [], this.broadcasterStatus = a.ENUM_BROADCASTER_STATUS.stop, this.isExternal = !1, this.playQualityList = [], this.maxQualityListCount = 10, this.reportSeq = NaN, this.parentSpanKey = "", this.streamReportSeq = (0, a.getSeq)(), this.reportBeginTime = 0, this.reportPlayingTime = 0, this.reportPlayStateTime = 0, this.streamInRoom = !0, this.playStartTime = 0, this.streamRoomPushConsumed = 0, this.probeIpCnt = 0, this.validProbeIpCnt = 0, this.poorQualityRetryCnt = 0, this.probeNotRetryInfos = [], this.continuousFailCnt = 0, this.playStateCount = 0, this.isRePlay = !1, this.videoSizeCallback = !1, this.remoteStream = null, this.playStream = null, this.rtcViewer = null, this.playOption = {}, this.playMediaStatus = { "video": !0, "audio": !0 }, this.closeSessionSignal = !1, this.stateNego = a.ENUM_PLAY_STATE_NEGO.stop, this.negoTimer = null, this.negoInterval = 25e3, this.cameraStatus = 0, this.micStatus = 0, this.hasSentStreamStatus = !1, this.playEvent = !1, this.gotStreamStatus = !1, this.soundLevel = 0, this.mic = null, this.beginTime = 0, this.firstFrameTime = 0, this.resourceMode = 0, this.gwNode = "", this.gwNodeList = [], this.gwNodesTTL = 0, this.isPeer = !1, this.peerFailCount = 0, this.isProbe = !1, this.peerID = 0, this.isRecvClientInfo = !1, this.videoCodec = "", this.videoCodecTimes = 0, this.answerSdpTime = 0, this.streamConnectIP = "", this.initPoster = "", this.initVideoStyle = "", this.firstPlay = !0, this.isProbeByDG = !1, this.useResourceTypes = [], this.tryidx = 0, this._CDNPlayerClone = null, this.retryFailGwNodes = [], this.dispatchedGwNodes = [], this.rtcPlayCount = 0, this.signalTime = 0, this.stopReason = "", this.isProbeDispatch = !1, this.pushCmdSeqMap = ((c = {}).MediaDescPush = { "seq": -1, "time": 0 }, c.StreamStatusNotifyPush = { "seq": -1, "time": 0 }, c.PlayEventPush = { "seq": -1, "time": 0 }, c.ClientInfoPush = { "seq": -1, "time": 0 }, c.NetQualityInfoPush = { "seq": -1, "time": 0 }, c.CandidateInfoPush = { "seq": -1, "time": 0 }, c), this.audioMuteState = "0", this.videoMuteState = "0", this.first_pkt = !0, this.next_sn = [], this.pkt_list = [], this.onDataChannelList = [], this.sideMediaConfig = { "isSEIStart": !1, "unregisterSeiFilter": "", "filterSize": 0 }, this.cachedGwNodesMode = g.CachedNodesUseMode.DiffReUse, this.iceDisconnectedMaxTime = 15e3, this.netTimer = null, this.lostQualityTime = 0, this.userID = "", this._turnToTcp = !1, this.decodeVideoFrame = function (e, t) { if ("VP8" === u.videoCodec) t.enqueue(e); else { for (var A = new DataView(e.data), r = 0, i = new C.H264Parser(A), o = 0, n = !1; i.NextNalu(n);)if (7 != (o = 31 & A.getUint8(i.nalu_start + i.start_code_size)) && 8 != o && 9 != o) { if (6 != o) break; var s = new Uint8Array(e.data).slice(i.nalu_start + i.start_code_size, i.nalu_start + i.start_code_size + i.nalu_size); u.stateCenter.seiConfig.emulationPreventionByte && (s = D(s).output), r = 1, n = !0; for (var a = 0; 255 === s[r];)a += 255, r++; if (243 === (a += s[r++]) || 5 === a || 100 === a) { for (var c = 0; 255 === s[r];)c += 255, r++; if (c += s[r++], e.data.byteLength - r < c) break; var g = new Uint8Array(4 + c); switch (g[0] = 0, g[1] = 0, a) { case 100: g[2] = 3, g[3] = 235; break; case 5: g[2] = 3, g[3] = 236; break; case 243: g[2] = 3, g[3] = 237 }for (var l = 0; l < c; l++)g[4 + l - 0] = s[r++]; var h = !1; if (243 === a) h = !0; else if (5 === a) { var d = u.sideMediaConfig.unregisterSeiFilter; if (d) { var E, p = g.slice(4, 4 + u.sideMediaConfig.filterSize), f = !0; if (0 === (E = "string" == typeof d ? I.WebRTCUtil.encodeString(d) : d).length) f = !1; else for (var B = 0; B < E.length; B++)if (E[B] !== p[B]) { f = !1; break } h = f } else h = !0 } h && u.stateCenter.actionListener("playerRecvSEI", u.streamId, g) } } t.enqueue(e) } }, this.decodeAudioFrame = function (e, t) { t.enqueue(e) }, this.soundMeterWorklet = null, this.streamId = e, this.logger = t, this.signal = A, this.dataReport = r, this.streamCenter = o, this.ac = n, this.stateCenter = s, this.qualityHandler = new d.PlayStreamQuality(i, this, this.logger, this.dataReport, this.stateCenter), this.resourceMode = this.stateCenter.settingConfig.getSetting("resource_mode"), this.initStreamReport() } return A.prototype.updateCBState = function (e) { var t = this, A = Object.keys(e).some(function (A) { return e[A] !== t.curCBState[A] }); return A && (this.curCBState = e), A }, Object.defineProperty(A.prototype, "state", { "get": function get() { return this._state }, "set": function set(e) { this.lastState = this._state, this._state = e }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "probeState", { "get": function get() { return this.qualityHandler.probeState }, "set": function set(e) { this.qualityHandler.probeState = e }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "netQuality", { "get": function get() { return this.qualityHandler.netQuality }, "set": function set(e) { this.qualityHandler.netQuality = e }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "lastPlayStats", { "get": function get() { return this.qualityHandler.lastPlayStats }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "iceStateDisConnect", { "get": function get() { return [a.ENUM_PLAY_STATE_NEGO.iceClosed, a.ENUM_PLAY_STATE_NEGO.iceDisconnected, a.ENUM_PLAY_STATE_NEGO.iceFailed].includes(this.stateNego) }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "isLastConnected", { "get": function get() { return this.lastState === a.ENUM_PLAY_STATE.playing }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "playStat", { "get": function get() { return this.qualityHandler.playStat }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "ip", { "get": function get() { var e, t; return null === (t = null === (e = this.gwNode) || void 0 === e ? void 0 : e.split(":")) || void 0 === t ? void 0 : t[0] }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "netProtocol", { "get": function get() { return this._turnToTcp ? "tcp" : "udp" }, "enumerable": !1, "configurable": !0 }), A.prototype.netProbeToReDispatch = function () { this.isProbeDispatch = !0, this.playStateUpdateError(m.error.kPlayNetProbePoor) }, A.prototype.initStreamReport = function () { this.reportSpan = this.stateCenter.reporter.createSpan(a.TRACER_LEVEL.I, { "key": l.ZegoRTCLogEvent.kZegoTaskPlayStart.event, "par": this.streamId }, { "key": Q.event, "par": this.streamId }, Q.event, !0), this.playStartTime = this.reportBeginTime = (new Date).getTime() }, A.prototype.startPlay = function (e, t, A) { var r, i, o, n, s, c, g, d, C, E = this; if (this.logger.info(h.ZEGO_WEBRTC_ACTION.PLAYER_START_PLAY + " called ", e), this.playEvent = !1, this.signal && this.signal.negoInterval && (this.negoInterval = this.signal.negoInterval), e) { if (this.getRemoteStreamSuc = t, this.playOption = A || {}, this.playMediaStatus = { "video": this.playMediaStatus.video && (void 0 === this.playOption.video || !!this.playOption.video), "audio": this.playMediaStatus.audio && (void 0 === this.playOption.audio || !!this.playOption.audio) }, A && A.videoCodec && (this.playOption.videoCodec = A.videoCodec), "boolean" == typeof (null == A ? void 0 : A.isSEIStart) && (this.sideMediaConfig.isSEIStart = null == A ? void 0 : A.isSEIStart), this.sideMediaConfig.isSEIStart) { var p = u.ClientUtil.isSupportEncodedTransforms(); ((null === (r = this.playOption) || void 0 === r ? void 0 : r.videoCodec) && "H264" !== (null === (i = this.playOption) || void 0 === i ? void 0 : i.videoCodec) || !p) && (this.sideMediaConfig.isSEIStart = !1) } if (null === (o = this.stateCenter.seiConfig) || void 0 === o ? void 0 : o.unregisterSEIFilter) { var f = this.sideMediaConfig.unregisterSeiFilter = null === (n = this.stateCenter.seiConfig) || void 0 === n ? void 0 : n.unregisterSEIFilter; this.sideMediaConfig.filterSize = I.WebRTCUtil.encodeString(f).byteLength } null == (null == A ? void 0 : A.streamType) && void 0 !== this.stateCenter.streamType && (this.playOption.streamType = this.stateCenter.streamType), this.stateCenter.reporter.spanSetAttributes({ "key": m.event, "par": e }, { "video_layer": m.video_layer(2 === this.playOption.streamType ? -1 : this.playOption.streamType || 1) }); var B = this.stateCenter.settingConfig.getSetting("play_video_codec", !0); B && (this.logger.info(h.ZEGO_WEBRTC_ACTION.PLAYER_START_PLAY + " setting play_video_codec " + B), this.playOption.videoCodec = B); var _ = (null === (s = this.playOption) || void 0 === s ? void 0 : s.resourceMode) == a.ResourceMode.DG ? 1 : 0; this.stateCenter.reporter.spanSetAttributes({ "key": (this.isRePlay ? l.ZegoRTCLogEvent.kZegoRePlay : y).event, "par": this.streamId }, { "is_peer": y.is_peer(this.isPeer) }), this.stateCenter.reporter.spanSetAttributes({ "key": m.event, "par": this.streamId }, { "audio_activate": m.audio_activate(1 == this.playOption.audio || 0 != this.playOption.audio), "video_activate": m.video_activate(1 == this.playOption.video || 0 != this.playOption.video), "biz_product": m.biz_product(_) }), this.reportSpan.setAttributes({ "room_id": Q.room_id(null === (g = null === (c = this.streamCenter.playerList[this.streamId]) || void 0 === c ? void 0 : c.room) || void 0 === g ? void 0 : g.roomID), "room_sid_string": Q.room_sid_string(null === (C = null === (d = this.streamCenter.playerList[this.streamId]) || void 0 === d ? void 0 : d.room) || void 0 === C ? void 0 : C.roomSessionID) }), this.isPeer ? this.createOffer({ "encodedInsertableStreams": this.sideMediaConfig.isSEIStart }) : this.createSession(), this.negoTimer = setTimeout(function () { E.logger.error(h.ZEGO_WEBRTC_ACTION.PLAYER_START_PLAY + " waiting timeout"), E.playStateUpdateError(m.error.kPlayNegoTimeoutError) }, this.negoInterval), this.isProbe && this.qualityHandler.startProbeTimeout() } else this.logger.warn(h.ZEGO_WEBRTC_ACTION.PLAYER_START_PLAY + " streamId is null") }, A.prototype.onCreatePlaySessionSuccess = function (e) { var t = this, A = h.ZEGO_WEBRTC_ACTION.PLAYER_ON_CREATE_PLAY_SESSION_SUCCESS; this.logger.info(A + " " + this.streamId + " success"); var r = []; if (e.turn_server) { var i = e.turn_server.split(";"); this.setTurnTcp(), this.streamCenter.autoSwitchProtocol = this.stateCenter.settingConfig.getSetting("auto_to_tcp") || !1; var s = this.stateCenter.settingConfig.getSetting("udp_max_fail_num"); !isNaN(s) && (this.streamCenter.maxUdpFailNum = s); var a = this.streamCenter, c = a.autoSwitchProtocol, g = a.maxUdpFailNum, u = a.udpFailNum; this.logger.info(A + "  autoToTcp: ".concat(c, ", udpFailNum: ").concat(u, ", maxUdpFailNum: ").concat(g, ".")), c && !this._turnToTcp && u >= g && (this.logger.info(A + " switch to tcp."), this._turnToTcp = !0); var l = this.stateCenter.settingConfig.getSetting("udp_or_tcp", !0); l && (this.logger.info(A + " setting udp_or_tcp " + l), this._turnToTcp = "tcp" === l); var d, C = i.filter(function (e) { return e.indexOf("udp") > -1 }), I = i.filter(function (e) { return e.indexOf("tcp") > -1 }); d = this._turnToTcp ? I.length > 0 ? I : C.map(function (e) { return e.replace("udp", "tcp") }) : C, this.logger.info(A + " over tcp " + JSON.stringify(d)), r.push.apply(r, d) } e.stun_server && r.push(e.stun_server); var E = { "iceTransportPolicy": "all", "iceServers": [{ "urls": r, "username": e.turn_username, "credential": e.turn_auth_key }], "encodedInsertableStreams": this.sideMediaConfig.isSEIStart }; this.logger.info(A + " " + this.streamId + " username: " + e.turn_username), this.logger.info(A + " " + this.streamId + " credential: " + e.turn_auth_key), this.createOffer(E); var p = performance.now(); this.signal.registerPushCallback("MediaDescPush", this.sessionId, function (e, A, r) { return o(t, void 0, void 0, function () { return n(this, function (t) { switch (t.label) { case 0: return this.compareSeqs("MediaDescPush", e) ? [4, this.onRecvMediaDesc(e, A, r)] : [2]; case 1: return t.sent(), [2] } }) }) }), this.signal.registerPushCallback("CandidateInfoPush", this.sessionId, function (e, A, r) { if (t.compareSeqs("CandidateInfoPush", e)) var i = setTimeout(function () { t.onRecvCandidateInfo(e, A, r), clearTimeout(i) }, 0) }), this.signal.registerPushCallback("CloseSessionPush", this.sessionId, function (e, r, i) { if (p) { var o = (performance.now() - p).toFixed(0); p = void 0, t.logger.info(A + " ".concat(t.streamId, ", cmd: CloseSessionPush, cost_time: ").concat(o)) } 32 === i.reason && (t.stateCenter._isMiniSdp = !1), t.onRecvCloseSession(e, r, i) }), this.signal.registerPushCallback("SessionResetPush", this.sessionId, function (e, A, r) { t.onRecvResetSession(e, A, r) }), this.signal.registerPushCallback("StreamStatusNotifyPush", this.sessionId, function (e, A, r) { t.compareSeqs("StreamStatusNotifyPush", e) && (t.gotStreamStatus = !0, t.streamStatus = r, t.playStream && t.onRecvStreamStatus(r)) }), this.signal.registerPushCallback("PlayEventPush", this.sessionId, function (e, r, i) { if (t.compareSeqs("PlayEventPush", e)) { if (p) { var o = (performance.now() - p).toFixed(0); t.logger.info(A + " ".concat(t.streamId, ", cmd: PlayEventPush, cost_time: ").concat(o)) } t.onRecvPlayEvent(e, r, i) } }), this.signal.registerPushCallback("ClientInfoPush", this.sessionId, function (e, A, r) { t.compareSeqs("ClientInfoPush", e) && t.onRecvClientInfo(e, A, r) }), this.logger.info(A + " " + this.streamId + " call success") }, A.prototype.compareSeqs = function (e, t) { var A = this.pushCmdSeqMap[e], r = A.seq, i = A.time, o = performance.now(); return -1 !== r && r >= t && o - i < 6e3 ? (this.logger.warn(h.ZEGO_WEBRTC_ACTION.PLAYER_COMPARE_PUSH_SEQS + " ".concat(this.streamId, ", push ").concat(e, ", seq ").concat(t, " local ").concat(JSON.stringify(this.pushCmdSeqMap[e]))), !1) : (this.pushCmdSeqMap[e] = { "seq": t, "time": o }, !0) }, A.prototype.createOffer = function (e) { var t = this, A = h.ZEGO_WEBRTC_ACTION.PLAYER_ON_CREATE_PLAY_SESSION_SUCCESS; this.peerConnection = new RTCPeerConnection(e), this.peerConnection.onicecandidate = function (e) { t.onIceCandidate(e) }, this.peerConnection.onsignalingstatechange = function (e) { t.onConnectionStateChange(e) }, this.peerConnection.oniceconnectionstatechange = function (e) { t.onIceConnectionStateChange(e) }, this.peerConnection.onconnectionstatechange = function (e) { t.onPeerConnectionStateChange(e) }, this.peerConnection.ontrack = function (e) { t.onGotRemoteStream(e.streams[0], e.receiver) }, this.streamCenter.isDataChannelEnabled && (this.dataChannel = this.peerConnection.createDataChannel(this.streamId), this.dataChannel.binaryType = "arraybuffer", this.dataChannel.onopen = function (e) { t.logger.info(A + " " + t.streamId + " data channel open") }, this.dataChannel.onmessage = function (e) { if (t.logger.info(A + " " + t.streamId + " data channel onmessage"), e.data instanceof Blob) { var r = new FileReader, i = {}; r.readAsArrayBuffer(e.data), r.onload = function () { i.data = r.result, t.onReceivedDataChannel(i) } } else t.onReceivedDataChannel(e) }); var r = { "offerToReceiveAudio": 1, "offerToReceiveVideo": 1 }; this.playOption && !1 === this.playOption.video && (r.offerToReceiveVideo = 0), this.playOption && !1 === this.playOption.audio && (r.offerToReceiveAudio = 0), this.logger.info(A + " " + this.streamId + " createOffer: " + JSON.stringify(r)); var i = this.getSpan(l.ZegoRTCLogEvent.kZegoPlayCreateOffer.event, this.parentSpanKey); this.peerConnection.createOffer(r).then(function (e) { i && (i.setAttributes({ "sdp": l.ZegoRTCLogEvent.kZegoPlayCreateOffer.sdp(e.sdp), "is_mini": l.ZegoRTCLogEvent.kZegoPlayCreateOffer.is_mini(t.stateCenter.isMiniSdp) }), i.end()), t.onCreateOfferSuccess(e) }, function (e) { t.logger.error(A + " " + t.streamId + " create offer error " + e.toString()), i && t.stateCenter.reporter.setError(i, { "code": l.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kCreateOfferError.code, "message": e.toString() }), t.playStateUpdateError(m.error.kCreateOfferError, !0) }) }, A.prototype.createSession = function (e) { var t, A, r, i = this; this.sessionSeq = (0, a.getSeq)(); var s = this.streamId; 1 == this.streamCenter.testEnvironment && (s = "zegotest-" + this.streamCenter.appid + "-" + this.streamId), this.streamCenter.gwNode && (this.gwNode = this.streamCenter.gwNode); var c = this.stateCenter.settingConfig.getSetting("gw_nodes"); c && c instanceof Array && c.length > 0 && (this.logger.info(h.ZEGO_WEBRTC_ACTION.PLAYER_START_PLAY + " setting " + JSON.stringify(c)), this.gwNodeList = c, this.gwNode = this.gwNodeList[0] || this.gwNode), this.setTurnTcp(); var g = this.stateCenter.settingConfig.getSetting("udp_or_tcp", !0); g && (this.logger.info(h.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_MEDIA_DESC + " setting udp_or_tcp " + g), this._turnToTcp = "tcp" === g), this._turnToTcp && (this.isPeer = !1); var u = "", d = [], C = this.stateCenter.seiConfig.SEIPass; "boolean" == typeof C && d.push("zgseipass=" + (C ? 1 : 0)), this.stateCenter.idName && d.push("zguid=" + this.stateCenter.idName), this.stateCenter.isMiniSdp && d.push("sdp_fmt_type=1"); var I = (null === (A = null === (t = this.streamCenter.publisherList[this.streamId]) || void 0 === t ? void 0 : t.room) || void 0 === A ? void 0 : A.roomID) || (null === (r = this.stateCenter.roomList[0]) || void 0 === r ? void 0 : r.roomID); I && d.push("zgrid=" + I), "number" == typeof this.playOption.streamType && d.push("video_stream_type=" + this.playOption.streamType), d.length > 0 && (u = d.join("&")); var E = l.ZegoRTCLogEvent.kZegoPlayCreateSession; if (this.isPeer) { var p = this.getSpan(l.ZegoRTCLogEvent.kZegoPlayCreateSession.event, this.parentSpanKey), f = this.stateCenter.settingConfig.getSetting("l3_play_buffer_ms"), B = (new Date).getTime(); this.signal.createSessionWithSdp({ "seq": this.sessionSeq, "type": this.isProbe ? 2 : 1, "mode": 0, "streamId": s, "strAuthParam": this.playOption && this.playOption.streamParams || "", "sdp": e.sdp, "serverHost": this.gwNode, "playBufLevel": [a.ResourceMode.L3, a.ResourceMode.DG].includes(this.resourceMode) ? f : void 0, "params": u }, function (e, t, A) { return o(i, void 0, void 0, function () { var r, i; return n(this, function (o) { switch (o.label) { case 0: return A.sdp ? (r = A, [4, this.signal.parseRecSdp(A.sdp)]) : [3, 2]; case 1: r.sdp = o.sent(), o.label = 2; case 2: return i = (new Date).getTime(), this.logger.info(h.ZEGO_WEBRTC_ACTION.PLAYER_START_PLAY + " create session time " + (i - B)), p && (p.setAttributes({ "webrtc_sid": t, "sdp": E.sdp(A.sdp), "gw_nodes": E.gw_nodes(A.gw_nodes), "gw_nodes_ttl": E.gw_nodes(A.gw_nodes_ttl), "gw_version": E.gw_version(A.gw_version) }), p.end()), this.stateNego !== a.ENUM_PLAY_STATE_NEGO.iceConnected && this.getSpan(l.ZegoRTCLogEvent.kZegoPlayIceConnected.event, this.parentSpanKey, "", !0), this.stateCenter.reporter.spanSetAttributes({ "key": m.event, "par": this.streamId }, { "gw_version": m.gw_version(A.gw_version) }), this.handleCreateSessionWithSdpResp(e, t, A), [2] } }) }) }, function (e, t) { if (i.sessionSeq == t) { var A = e == a.SEND_MSG_TIMEOUT ? m.error.kSessionTimeoutError : m.error.kSessionRequestError; p && (p.setAttributes({ "try_cnt": i.peerFailCount }), i.stateCenter.reporter.setError(p, A)), i.playStateUpdateError(A) } else i.logger.warn(h.ZEGO_WEBRTC_ACTION.PLAYER_START_PLAY + " seq is not match.") }) } else { var _ = this.getSpan(l.ZegoRTCLogEvent.kZegoPlayCreateSession.event, this.parentSpanKey); this.signal.createSession(this.sessionSeq, 1, 0, s, this.playOption && this.playOption.streamParams, this.gwNode, u, function (e, t, A) { return o(i, void 0, void 0, function () { return n(this, function (r) { return _ && (_.setAttributes({ "webrtc_sid": l.ZegoRTCLogEvent.kZegoPlayCreateSession.webrtc_sid(t), "sdp": E.sdp(A.sdp), "is_mini": E.is_mini(this.stateCenter.isMiniSdp), "gw_nodes": E.gw_nodes(A.gw_nodes), "gw_nodes_ttl": E.gw_nodes(A.gw_nodes_ttl), "gw_version": E.gw_version(A.gw_version) }), _.end(), this.stateCenter.reporter.spanSetAttributes({ "key": m.event, "par": this.streamId }, { "gw_version": m.gw_version(A.gw_version) })), this.handleCreateSessionResp(e, t, A), [2] }) }) }, function (e, t) { if (i.sessionSeq == t) { var A = e == a.SEND_MSG_TIMEOUT ? m.error.kSessionTimeoutError : m.error.kSessionRequestError; _ && i.stateCenter.reporter.setError(_, A), i.playStateUpdateError(A) } else i.logger.warn(h.ZEGO_WEBRTC_ACTION.PLAYER_START_PLAY + " seq is not match.") }) } this.state = a.ENUM_PLAY_STATE.waitingSessionRsp, this.logger.info(h.ZEGO_WEBRTC_ACTION.PLAYER_START_PLAY + " " + this.streamId + " called success"), this.stateNego = a.ENUM_PLAY_STATE_NEGO.start }, A.prototype.setGwNodes = function (e, t) { var A; if (this.logger.info(h.ZEGO_WEBRTC_ACTION.PLAYER_SET_GW_NODES + " " + this.streamId + " " + JSON.stringify(null == e ? void 0 : e.gw_nodes) + " " + JSON.stringify(this.retryFailGwNodes)), (null === (A = e.gw_nodes) || void 0 === A ? void 0 : A.length) > 0) { var r = this.sortGwNodes(e.gw_nodes, this.retryFailGwNodes, t); this.retryFailGwNodes = [], this.handleDispatchedGwNodes(r, e.gw_nodes_ttl) } }, A.prototype.resetGwNodes = function () { this.logger.info(h.ZEGO_WEBRTC_ACTION.PLAYER_RESET_GW_NODES + " " + this.streamId), this.gwNode = "", this.gwNodeList = [], this.gwNodesTTL = 0 }, A.prototype.sortGwNodes = function (e, t, A) { var r = JSON.parse(JSON.stringify(e)); if (t.forEach(function (e) { var t = r.indexOf(e); t >= 0 && (r.splice(t, 1), r.push(e)) }), !A) { var i = r.findIndex(function (t) { return t === e[0] }); i > 0 && (r.splice(i, 1), r.unshift(e[0])) } return r }, A.prototype.handleDispatchedGwNodes = function (e, t) { if (this.logger.info(h.ZEGO_WEBRTC_ACTION.PLAYER_HANDLE_DISPATCHED_GW_NODES + " " + this.streamId + " " + JSON.stringify(e)), Array.isArray(e)) { this.gwNodeList = e.length > 0 ? e : this.gwNodeList, this.gwNode = e.length > 0 ? this.gwNodeList[0] : this.gwNode; var A = 0 === t ? 60 : t; this.gwNodesTTL = A ? (new Date).getTime() + 1e3 * A : this.gwNodesTTL, e.length > 0 && this.streamCenter.updateCachedGwNodesList(this, !1, e, A) } }, A.prototype.handleCreateSessionResp = function (e, t, A) { var r = A.turn_server, i = r.split("?")[0] && r.split("?")[0].slice(5), o = this.streamCenter.server.split("?"), n = o[1] && o[1].slice(2); if (this.stateCenter.reporter.spanSetAttributes({ "key": this.parentSpanKey, "par": this.streamId }, { "webrtc_sid": A.session_id, "url": "webrtc://".concat(i, "/").concat(n, "/").concat(this.streamId) }), this.logger.info(h.ZEGO_WEBRTC_ACTION.PLAYER_START_PLAY + " " + this.streamId + " sessionId:" + A.session_id), this.sessionSeq == e) { this.resetPushCmdSeqMap(), this.stateCenter.clientIP = A.clientip ? A.clientip : this.stateCenter.clientIP; var s = 0, a = (new Date).getTime(); this.reportBeginTime && (this.logger.info(h.ZEGO_WEBRTC_ACTION.PLAYER_HANDLE_CREATE_SESSION_WITH_SDP + " " + this.streamId + " create signal time " + (s = a - this.reportBeginTime)), this.signalTime = s), this.answerSdpTime = a, 0 !== A.result ? (this.logger.error(h.ZEGO_WEBRTC_ACTION.PLAYER_START_PLAY + " " + this.streamId + " create error"), this.playStateUpdateError(m.error.kSessionRequestError)) : (this.sessionId = A.session_id, this.sessionToken = A.session_token, this.setGwNodes(A, !1), this.onCreatePlaySessionSuccess(A)) } else this.logger.error(h.ZEGO_WEBRTC_ACTION.PLAYER_START_PLAY + " seq is not match.") }, A.prototype.handleCreateSessionWithSdpResp = function (e, t, A) { var r = this; if (this.logger.info(h.ZEGO_WEBRTC_ACTION.PLAYER_HANDLE_CREATE_SESSION_WITH_SDP + " sessionId:" + t), this.sessionSeq == e) { this.resetPushCmdSeqMap(), this.stateCenter.clientIP = A.clientip ? A.clientip : this.stateCenter.clientIP; var i = 0, o = (new Date).getTime(); if (this.reportBeginTime && (this.logger.info(h.ZEGO_WEBRTC_ACTION.PLAYER_HANDLE_CREATE_SESSION_WITH_SDP + " " + this.streamId + " create signal time " + (i = o - this.reportBeginTime)), this.signalTime = i), this.answerSdpTime = o, 0 !== A.result) { if (110 === A.result && (this.stateCenter._isMiniSdp = !1), this.logger.error(h.ZEGO_WEBRTC_ACTION.PLAYER_HANDLE_CREATE_SESSION_WITH_SDP + " create session failed " + A.result), this.stateCenter.useNetAgent && 1004 === (null == A ? void 0 : A.result)) return void this.playStateUpdateError(m.error.kPlayStreamNotFound, !0); this.playStateUpdateError(m.error.kSessionRequestError) } else { this.sessionId = t, this.sessionToken = A.session_token, this.logger.info(h.ZEGO_WEBRTC_ACTION.PLAYER_HANDLE_CREATE_SESSION_WITH_SDP + " create session success ", this.streamId), this.setGwNodes(A, !1); var n = performance.now(); this.signal.registerPushCallback("CloseSessionPush", this.sessionId, function (e, t, A) { if (n) { var i = (performance.now() - n).toFixed(0); n = void 0, r.logger.info(h.ZEGO_WEBRTC_ACTION.PLAYER_HANDLE_CREATE_SESSION_WITH_SDP + " ".concat(r.streamId, ", cmd: CloseSessionPush, cost_time: ").concat(i)) } r.onRecvCloseSession(e, t, A) }), this.signal.registerPushCallback("SessionResetPush", this.sessionId, function (e, t, A) { r.onRecvResetSession(e, t, A) }), this.signal.registerPushCallback("StreamStatusNotifyPush", this.sessionId, function (e, t, A) { r.compareSeqs("StreamStatusNotifyPush", e) && (r.gotStreamStatus = !0, r.streamStatus = A, r.playStream && r.onRecvStreamStatus(A)) }), this.signal.registerPushCallback("PlayEventPush", this.sessionId, function (e, t, A) { if (r.compareSeqs("PlayEventPush", e)) { if (n) { var i = (performance.now() - n).toFixed(0); n = void 0, r.logger.info(h.ZEGO_WEBRTC_ACTION.PLAYER_START_PLAY + " ".concat(r.streamId, ", cmd: PlayEventPush, cost_time: ").concat(i)) } r.onRecvPlayEvent(e, t, A) } }), this.signal.registerPushCallback("ClientInfoPush", this.sessionId, function (e, t, A) { r.compareSeqs("ClientInfoPush", e) && r.onRecvClientInfo(e, t, A) }), this.signal.registerPushCallback("NetQualityProbeRsp", this.sessionId, function (e, t, A) { r.onRecvPlayEvent(e, t, A) }), this.signal.registerPushCallback("NetQualityInfoPush", this.sessionId, function (e, t, A) { r.compareSeqs("NetQualityInfoPush", e) && r.onRecvNetQualityInfo(e, t, A) }), this.signal.gw.registerPushCallback("net_quality_grade_push", this.sessionId, function (e, t, A) { var i, o, n = I.WebRTCUtil.base64ToUint8Array(A), s = B.webrtc_cmd.WebrtcCmdReqMsg.decode(n).net_quality_grade_push; r.userID = r.userID || (null === (o = null === (i = r.streamCenter.playerList[r.streamId]) || void 0 === i ? void 0 : i.room.streamList.find(function (e) { return e.stream_id == r.streamId })) || void 0 === o ? void 0 : o.id_name), r.signal.sendNetQualityGradeAck(r.sessionId, r.peerID, 0), r.userID && (r.stateCenter.actionListener("networkQuality", r.userID, null == s ? void 0 : s.tx_quality, null == s ? void 0 : s.rx_quality), !r.netTimer && r.startPollNetworkQuality(), r.lostQualityTime = 0) }), this.onGetRemoteOfferSuccess(A.sdp) } } else this.logger.error(h.ZEGO_WEBRTC_ACTION.PLAYER_HANDLE_CREATE_SESSION_WITH_SDP + " seq is not match.") }, A.prototype.onCreateOfferSuccess = function (e) { var t = this; this.logger.info(h.ZEGO_WEBRTC_ACTION.PLAYER_ON_CREATE_OFFER_SUCCESS + " " + this.streamId + " localSdp1 " + e.sdp.substr(0, e.sdp.length / 2)), this.logger.info(h.ZEGO_WEBRTC_ACTION.PLAYER_ON_CREATE_OFFER_SUCCESS + " " + this.streamId + " localSdp2 " + e.sdp.substr(e.sdp.length / 2)), e.sdp = e.sdp.replace(/sendrecv/g, "recvonly"), e.sdp = e.sdp.replace(/useinbandfec=/, "stereo=1;useinbandfec="); var A = e.sdp.match(/m=application[\s\S]+datachannel[\s\S]+/) ? e.sdp.match(/m=application[\s\S]+datachannel[\s\S]+/)[0] : null; if (A) { var r = A.replace(/recvonly/, "sendrecv"); e.sdp = e.sdp.replace(A, r) } e.sdp = (0, p.addSPSDescription)(e.sdp), e.sdp = (0, p.addRRTRLine)(e.sdp), this.playOption.videoCodec && (e.sdp = c.SdpUtil.getSDPByVideDecodeType(e.sdp, this.playOption.videoCodec)); var i = this.getSpan(l.ZegoRTCLogEvent.kZegoPlaySetLocalSdp.event, this.parentSpanKey); i && i.setAttributes({ "sdp": l.ZegoRTCLogEvent.kZegoPlaySetLocalSdp.sdp(e.sdp), "is_mini": l.ZegoRTCLogEvent.kZegoPlaySetLocalSdp.is_mini(this.stateCenter.isMiniSdp) }), this.peerConnection.setLocalDescription(e).then(function () { i && i.end(), t.onSetLocalDescriptionSuccess(e) }, function (e) { t.logger.error(h.ZEGO_WEBRTC_ACTION.PLAYER_ON_CREATE_OFFER_SUCCESS + " " + t.streamId + " set error " + e.toString()), i && t.stateCenter.reporter.setError(i, { "code": l.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kSetLocalDescError.code, "message": e.toString() }), t.playStateUpdateError(m.error.kSetLocalDescError, !0) }) }, A.prototype.onSetLocalDescriptionSuccess = function (e) { var t = this; if (this.logger.info(h.ZEGO_WEBRTC_ACTION.PLAYER_ON_SET_LOCAL_DESCRIPTION_SUCCESS + " " + this.streamId + " success"), this.isPeer) this.createSession(e); else { var A = { "sdp": e.sdp }; 2 == this.resourceMode && (A.min_play_buf_level_ms = 500), this.answerSeq = (0, a.getSeq)(); var r = this.getSpan(l.ZegoRTCLogEvent.kZegoPlaySendMediaDesc.event, this.parentSpanKey); this.signal.sendMediaDesc(this.answerSeq, this.sessionId, 0, A, function (e, i, o) { t.logger.info(h.ZEGO_WEBRTC_ACTION.PLAYER_ON_SET_LOCAL_DESCRIPTION_SUCCESS + " " + t.streamId + " sendMediaDesc resp"), r && (r.setAttributes({ "webrtc_sid": l.ZegoRTCLogEvent.kZegoPlaySendMediaDesc.webrtc_sid(i), "sdp": A.sdp }), r.end()), t.answerSeq == e && t.sessionId == i ? (t.logger.info(h.ZEGO_WEBRTC_ACTION.PLAYER_ON_SET_LOCAL_DESCRIPTION_SUCCESS + " " + t.streamId + " send success stateNego:waiterAnswer"), t.stateNego = a.ENUM_PLAY_STATE_NEGO.waiterAnswer, t.state = a.ENUM_PLAY_STATE.waitingServerAnswer) : t.logger.error(h.ZEGO_WEBRTC_ACTION.PLAYER_ON_SET_LOCAL_DESCRIPTION_SUCCESS + " " + t.streamId + " seq or sessionId is not equal " + t.answerSeq + " " + e, 0 + t.sessionId + " " + i) }, function (e, A) { t.logger.error(h.ZEGO_WEBRTC_ACTION.PLAYER_ON_SET_LOCAL_DESCRIPTION_SUCCESS + " " + t.streamId + " failed to send " + e), r && t.stateCenter.reporter.setError(r, { "code": l.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kMediaDescError.code, "message": e.toString() }), t.playStateUpdateError(m.error.kMediaDescError) }), this.state = a.ENUM_PLAY_STATE.waitingOfferRsp } }, A.prototype.onRecvMediaDesc = function (e, t, A) { return o(this, void 0, void 0, function () { var t, r; return n(this, function (i) { switch (i.label) { case 0: return this.logger.info(h.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_MEDIA_DESC + " " + this.streamId + " received ", A), [4, this.signal.parseRecSdp(A.sdp)]; case 1: return t = (t = i.sent()) || A.sdp, (r = this.getSpan(l.ZegoRTCLogEvent.kZegoPlayRecvMediaDesc.event, this.parentSpanKey)) && (r.setAttributes({ "sdp": l.ZegoRTCLogEvent.kZegoPlayRecvMediaDesc.sdp(t), "is_mini": l.ZegoRTCLogEvent.kZegoPlayRecvMediaDesc.is_mini(this.stateCenter.isMiniSdp) }), r.end()), this.stateNego = a.ENUM_PLAY_STATE_NEGO.waitingCandidate, this.logger.info(h.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_MEDIA_DESC + " " + this.streamId + " received stateNego:waitingCandidate"), this.state !== a.ENUM_PLAY_STATE.waitingServerAnswer ? (this.logger.error(h.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_MEDIA_DESC + " " + this.streamId + " current state " + this.state + " not allowed"), [2]) : (this.signal.sendMediaDescAck(e, this.sessionId, 0), this.onGetRemoteOfferSuccess(t), [2]) } }) }) }, A.prototype.onGetRemoteOfferSuccess = function (e) { var t, A = this, r = { "type": "answer", "sdp": e, "toJSON": function toJSON() { } }, i = this.getSpan(l.ZegoRTCLogEvent.kZegoPlaySetRemoteSdp.event, this.parentSpanKey); this.setTurnTcp(), this.streamCenter.autoSwitchProtocol = this.stateCenter.settingConfig.getSetting("auto_to_tcp") || !1; var o = this.stateCenter.settingConfig.getSetting("udp_max_fail_num"); !isNaN(o) && (this.streamCenter.maxUdpFailNum = o); var n = this.streamCenter, s = n.autoSwitchProtocol, c = n.maxUdpFailNum, g = n.udpFailNum; this.logger.info(h.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_MEDIA_DESC + "  autoToTcp: ".concat(s, ", udpFailNum: ").concat(g, ", maxUdpFailNum: ").concat(c, ".")), s && !this._turnToTcp && g >= c && (this.logger.info(h.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_MEDIA_DESC + " switch to tcp."), this._turnToTcp = !0); var u = this.stateCenter.settingConfig.getSetting("udp_or_tcp", !0); u && (this.logger.info(h.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_MEDIA_DESC + " setting udp_or_tcp " + u), this._turnToTcp = "tcp" === u), this._turnToTcp && (null === (t = r.sdp.match(/candidate.*/g)) || void 0 === t || t.forEach(function (e) { var t = e.replace(/udp/, "tcp"); t.includes(" tcptype ") || (t = t.replace(" typ host ", " typ host tcptype passive ")), r.sdp = r.sdp.replace(e, t) })), this.logger.info(h.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_MEDIA_DESC + " " + this.streamId + " remoteSdp ", r.sdp), i && i.setAttributes({ "sdp": l.ZegoRTCLogEvent.kZegoPlaySetRemoteSdp.sdp(r.sdp), "webrtc_sid": l.ZegoRTCLogEvent.kZegoPlaySetRemoteSdp.webrtc_sid(this.sessionId), "is_mini": l.ZegoRTCLogEvent.kZegoPlaySetRemoteSdp.is_mini(this.stateCenter.isMiniSdp) }), this.peerConnection.setRemoteDescription(new RTCSessionDescription(r)).then(function () { i && i.end(), A.logger.info(h.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_MEDIA_DESC + " " + A.streamId + " set success") }, function (e) { A.logger.error(h.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_MEDIA_DESC + " " + A.streamId + " set remote error " + e.toString()), i && (i.setAttributes({ "error": l.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kSetRemoteDescError.code, "message": e.toString() }), i.end()), A.playStateUpdateError(m.error.kSetRemoteDescError, !0) }), this.state = a.ENUM_PLAY_STATE.waitingServerICE, this.logger.info(h.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_MEDIA_DESC + " " + this.streamId + " call success") }, A.prototype.onRecvCandidateInfo = function (e, t, A) { var r = this; this.logger.info(h.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_CANDIDATE_INFO + " " + this.streamId + " received "); var i = this.getSpan(l.ZegoRTCLogEvent.kZegoPlayRecvIceCandidate.event, this.parentSpanKey); if (i && (i.setAttributes({ "candidate_info": l.ZegoRTCLogEvent.kZegoPlayRecvIceCandidate.candidate_info(A.infos) }), i.end()), this.state == a.ENUM_PLAY_STATE.waitingServerICE) { this.signal.sendCandidateInfoAck(e, this.sessionId, 0), this.sendCandidateInfo(this.candidateInfo), this.candidateInfo = []; for (var o = 0; o < A.infos.length; o++) { var n = { "sdpMid": A.infos[o].sdpMid, "sdpMLineIndex": A.infos[o].sdpMLineIndex, "candidate": A.infos[o].candidate }; this.logger.info(h.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_CANDIDATE_INFO + " " + this.streamId + " candidate " + n.candidate), this.peerConnection.addIceCandidate(new RTCIceCandidate(n)).then(function () { r.logger.debug(h.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_CANDIDATE_INFO + " " + r.streamId + " add success") }, function (e) { r.logger.error(h.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_CANDIDATE_INFO + " " + r.streamId + " add error " + e.toString()), r.playStateUpdateError(m.error.kCandidateError, !0) }) } this.state = a.ENUM_PLAY_STATE.connecting; var s = this.getSpan(l.ZegoRTCLogEvent.kZegoPlayIceConnected.event, this.parentSpanKey, "", !0); null == s || s.setAttributes({ "webrtc_sid": this.sessionId }), this.logger.info(h.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_CANDIDATE_INFO + " " + this.streamId + " call success") } else this.logger.warn(h.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_CANDIDATE_INFO + " " + this.streamId + " current state " + this.state + " not allowed") }, A.prototype.onRecvPlayEvent = function (e, t, A) { if (this.logger.info(h.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_PLAY_EVENT + " " + this.streamId + " received"), !this.isProbe) { var r = this.stateCenter.reporter.createSpan(a.TRACER_LEVEL.H, { "key": l.ZegoRTCLogEvent.kZegoTaskPlayStart.event, "par": this.streamId }, { "key": "" }, l.ZegoRTCLogEvent.kZegoRTCPlayEvent.event); r.setAttributes({ "event_state": l.ZegoRTCLogEvent.kZegoRTCPlayEvent.event_state(A.event), "webrtc_sid": t }), r.end() } if (!0 === this.playEvent && 0 == A.event) { this.logger.info(h.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_PLAY_EVENT + " " + this.streamId + " retry: " + this.streamId); var i = this.streamId, o = this.playOption; this.signal.sendCloseSession((0, a.getSeq)(), this.sessionId, 1), this.resetPlay(), this.startPlay(i, this.getRemoteStreamSuc, o) } else this.playEvent = !0 }, A.prototype.onRecvClientInfo = function (e, t, A) { this.stateCenter.clientIP !== A.clientip && this.logger.warn(h.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_CLIENT_INFO + " client ip changed " + this.stateCenter.clientIP + " " + A.clientip), this.stateCenter.clientIP = A.clientip, this.peerID = A.peer_id, this.streamConnectIP = A.clientip, this.stateCenter.isMultiOuter = this.isMultiOuter(), this.isProbe && this.stateNego == a.ENUM_PLAY_STATE_NEGO.iceConnected && this.signal.sendNetProbe((0, a.getSeq)(), this.sessionId, this.peerID, function () { }, function () { }), this.isRecvClientInfo = !0 }, A.prototype.onRecvNetQualityInfo = function (e, t, A) { this.logger.info(h.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_NET_QUALITY_INFO + " call"), this.qualityHandler.stopProbeTimeout(); var r = 0, i = A.lossrate, o = A.rtt; (this.peerID !== A.peer_id && !this.isProbeByDG || null == typeof i || null == typeof o) && (this.logger.info(h.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_NET_QUALITY_INFO + " local peerID:" + this.peerID + " remote peerID:" + A.peer_id + " lossrate:" + i + " rtt:" + o), r = 1), this.signal.sendNetQualityInfoPushAck((0, a.getSeq)(), this.sessionId, this.peerID, r), 0 == r && "number" == typeof i && "number" == typeof o ? (this.isProbeByDG = !1, this.onCalNetQualityResult(0, u.ClientUtil.getNetQuality(o, i))) : this.onCalNetQualityResult(1) }, A.prototype.onIceCandidate = function (e) { this.logger.info(h.ZEGO_WEBRTC_ACTION.PLAYER_ON_ICE_CANDIDATE + " " + this.streamId + " called"), null != e.candidate && (this.logger.debug(h.ZEGO_WEBRTC_ACTION.PLAYER_ON_ICE_CANDIDATE + " " + this.streamId + " candidate " + e.candidate.candidate), this.state < a.ENUM_PLAY_STATE.connecting || this.state == a.ENUM_PLAY_STATE.stop ? (this.logger.debug(h.ZEGO_WEBRTC_ACTION.PLAYER_ON_ICE_CANDIDATE + " " + this.streamId + " cached"), this.candidateInfo.push({ "candidate": e.candidate.candidate, "sdpMid": e.candidate.sdpMid, "sdpMLineIndex": e.candidate.sdpMLineIndex })) : (this.logger.debug(h.ZEGO_WEBRTC_ACTION.PLAYER_ON_ICE_CANDIDATE + " " + this.streamId + " send"), this.sendCandidateInfo([{ "candidate": e.candidate.candidate, "sdpMid": e.candidate.sdpMid, "sdpMLineIndex": e.candidate.sdpMLineIndex }]))) }, A.prototype.onConnectionStateChange = function (e) { this.logger.info(h.ZEGO_WEBRTC_ACTION.PLAYER_ON_CONNECTION_STATE_CHANGE + " " + this.streamId + " called " + e.target.signalingState), this.state != a.ENUM_PLAY_STATE.stop && null != this.peerConnection && "closed" === e.target.signalingState && (this.dataReport.addEvent(this.reportSeq, "IceClosed"), this.stateNego = a.ENUM_PLAY_STATE_NEGO.iceClosed, this.checkPlayConnectionFailedState(this.peerConnection.iceConnectionState)) }, A.prototype.onIceConnectionStateChange = function (e) { var t = this; if (this.state != a.ENUM_PLAY_STATE.stop && null != this.peerConnection) { this.logger.info(h.ZEGO_WEBRTC_ACTION.PLAYER_ON_ICE_CONNECTION_STATE_CHANGE + " " + this.streamId + " stateChanged " + this.peerConnection.iceConnectionState); var A = this.getSpan(l.ZegoRTCLogEvent.kZegoRTCIceStateChanged.event, this.parentSpanKey, l.ZegoRTCLogEvent.kZegoTaskStreamPlay.event); if (A && A.setAttributes({ "ice_state": l.ZegoRTCLogEvent.kZegoRTCIceStateChanged.ice_state(this.peerConnection.iceConnectionState) }), "connected" === this.peerConnection.iceConnectionState) { if (this.stateNego = a.ENUM_PLAY_STATE_NEGO.iceConnected, this.isProbe && this.isPeer && (this.isRecvClientInfo || this.isProbeByDG)) return this.signal.sendNetProbe((0, a.getSeq)(), this.sessionId, this.peerID, function () { }, function () { }), void (null != this.negoTimer && (clearTimeout(this.negoTimer), this.negoTimer = null)); if (null != this.negoTimer && (clearTimeout(this.negoTimer), this.negoTimer = null), null != this.iceDisconnectedTimer && (clearTimeout(this.iceDisconnectedTimer), this.iceDisconnectedTimer = null), !this.isProbe && this.reportBeginTime) { var r = (new Date).getTime() - this.reportBeginTime; this.reportSpan.setAttributes({ "play_begin_time": Q.play_begin_time(r) }), this.reportBeginTime = 0 } if (this.stateCenter.reporter.spanEnd({ "key": l.ZegoRTCLogEvent.kZegoPlayIceConnected.event, "par": this.streamId }, { "webrtc_sid": this.sessionId }), this.answerSdpTime) { var i = (new Date).getTime() - this.answerSdpTime; this.logger.warn(h.ZEGO_WEBRTC_ACTION.PLAYER_ON_ICE_CONNECTION_STATE_CHANGE + " " + this.streamId + " ice time " + i) } if (!this.isProbe && this.state != a.ENUM_PLAY_STATE.playing) { this.onPlayStateUpdate(a.ENUM_PLAY_STATE_UPDATE.start, this.streamId, { "code": 0, "message": "" }, !0), this.getRemoteStreamSuc && this.getRemoteStreamSuc(this.playOption.resourceMode == a.ResourceMode.DG && this.firstPlay ? null : this.playStream); var o = this.playMediaStatus, n = o.video, s = o.audio, c = this.streamCenter.playModule; if (c) { var g = [void 0, !0].includes(this.playOption.video), u = [void 0, !0].includes(this.playOption.audio); g && !n && c.mutePlayStream(this.streamId, "video", !n).then(function (e) { t.logger.info(h.ZEGO_WEBRTC_ACTION.PLAYER_ON_ICE_CONNECTION_STATE_CHANGE + " mute video: ".concat(e)) }), u && !s && c.mutePlayStream(this.streamId, "audio", !s).then(function (e) { t.logger.info(h.ZEGO_WEBRTC_ACTION.PLAYER_ON_ICE_CONNECTION_STATE_CHANGE + " mute audio: ".concat(e)) }) } } this.state = a.ENUM_PLAY_STATE.playing; var d = this.isRePlay ? l.ZegoRTCLogEvent.kZegoRePlay : y; for (var C in this.stateCenter.reporter.spanEnd({ "key": d.event, "par": this.streamId }, { "signal_consume": y.signal_consume(this.signalTime), "is_peer": y.is_peer(this.isPeer) }), this.playStateCount++, this.continuousFailCnt = 0, this.reportPlayStateTime = Date.now(), this.isProbeDispatch = !1, this.streamCenter.publisherList) if (this.streamCenter.publisherList[C].publisher.state == a.ENUM_PUBLISH_STATE.publishing && this.broadcasterStatus == a.ENUM_BROADCASTER_STATUS.stop) { this.signal && this.signal.sendBroadcasterStatus((0, a.getSeq)(), this.sessionId, 1), this.broadcasterStatus = a.ENUM_BROADCASTER_STATUS.start; break } if (!this.isProbe) { this.qualityHandler.setPlayQualityTimer(); var I = this.stateCenter.settingConfig.getSetting("probe_started_num"); !isNaN(I) && (this.streamCenter.probeStartedNum = I) } this.logger.info(h.ZEGO_WEBRTC_ACTION.PLAYER_ON_ICE_CONNECTION_STATE_CHANGE + " " + this.streamId + " stateNego:iceConnected"), this.isPeer && (this.peerFailCount = 0), !this.hasConnectionChange() && this.recordFirstFrameData(), this._turnToTcp || (this.streamCenter.udpFailNum = 0) } else "closed" === this.peerConnection.iceConnectionState ? (null == A || A.end(), this.stateNego = a.ENUM_PLAY_STATE_NEGO.iceClosed, this.checkPlayConnectionFailedState(this.peerConnection.iceConnectionState)) : "failed" === this.peerConnection.iceConnectionState ? (null == A || A.end(), this.stateNego = a.ENUM_PLAY_STATE_NEGO.iceFailed, this.checkPlayConnectionFailedState(this.peerConnection.iceConnectionState)) : "disconnected" === this.peerConnection.iceConnectionState && (null == A || A.end(), this.stateNego = a.ENUM_PLAY_STATE_NEGO.iceDisconnected, this.logger.warn(h.ZEGO_WEBRTC_ACTION.PLAYER_ON_ICE_CONNECTION_STATE_CHANGE + " ice disconnected"), this.iceDisconnectedTimer || (this.iceDisconnectedTimer = setTimeout(function () { t.checkPlayConnectionFailedState("disconnected") }, this.iceDisconnectedMaxTime))) } }, A.prototype.onPeerConnectionStateChange = function (e) { this.logger.info(h.ZEGO_WEBRTC_ACTION.PLAYER_ON_PEER_CONNECTION_STATE_CHANGE + " " + this.streamId + " connectionChanged " + this.peerConnection.connectionState), "connected" === this.peerConnection.connectionState && this.recordFirstFrameData() }, A.prototype.hasConnectionChange = function () { var e = this.stateCenter.browser; return !("firefox" === e || "chrome" === e && (0, u.getChromeVer)() < 72) }, A.prototype.checkPlayConnectionFailedState = function (e) { this.logger.info(h.ZEGO_WEBRTC_ACTION.PLAYER_ON_ICE_CONNECTION_STATE_CHANGE + "  state " + this.state + " connectionState " + e), this.playStateUpdateError(m.error.kMediaConnectionError) }, A.prototype.resetPlay = function () { this.logger.info(h.ZEGO_WEBRTC_ACTION.PLAYER_RESET_PLAY + " " + this.streamId + " call"), this.state = a.ENUM_PLAY_STATE.stop, this.playEvent = !1, this.isRecvClientInfo = !1, null != this.peerConnection && (this.peerConnection.close(), this.peerConnection = null), null != this.negoTimer && (clearTimeout(this.negoTimer), this.negoTimer = null), null != this.iceDisconnectedTimer && (clearTimeout(this.iceDisconnectedTimer), this.iceDisconnectedTimer = null), this.stopVideocTimer(), this.qualityHandler.stopProbeTimeout(), this.qualityHandler.clearPlayQualityTimer(), this.signal && (this.signal.unregisterPushCallback("MediaDescPush", this.sessionId), this.signal.unregisterPushCallback("CandidateInfoPush", this.sessionId), this.signal.unregisterPushCallback("CloseSessionPush", this.sessionId), this.signal.unregisterPushCallback("SessionResetPush", this.sessionId), this.signal.unregisterPushCallback("PlayEventPush", this.sessionId), this.signal.unregisterPushCallback("ClientInfoPush", this.sessionId), this.signal.unregisterPushCallback("NetQualityProbeRsp", this.sessionId), this.signal.unregisterPushCallback("NetQualityInfoPush", this.sessionId), this.signal.gw.unregisterPushCallback("net_quality_grade_push", this.sessionId)), this.sessionSeq = 0, this.answerSeq = 0, this.videoSizeCallback = !1, this.stopSoundLevel() }, A.prototype.onRecvResetSession = function (e, t, A) { this.logger.info(h.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_RESET_SESSION + " " + this.streamId + " received "); var r = this.getSpan(l.ZegoRTCLogEvent.kZegoRTCRecvResetSession.event, l.ZegoRTCLogEvent.kZegoTaskStreamPlay.event); if (r && r.end(), t == this.sessionId) { this.signal.sendCloseSessionAck(e, this.sessionId, 0); var i = JSON.parse(JSON.stringify(m.error.kPlaySessionClosedError)); this.negoTimer && clearTimeout(this.negoTimer), this.playStateUpdateError(i) } else this.logger.info(h.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_RESET_SESSION + " " + this.streamId + " cannot find session") }, A.prototype.onRecvCloseSession = function (e, t, A) { var r = this; this.logger.info(h.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_CLOSE_SESSION + " " + this.streamId + " " + JSON.stringify(A)), this.stateCenter.reporter.spanSetAttributes({ "key": l.ZegoRTCLogEvent.kZegoTaskStreamPlay.event, "par": this.streamId }, { "denied_info": l.ZegoRTCLogEvent.kZegoTaskStreamPlay.denied_info(A.err_info), "stop_reason": l.ZegoRTCLogEvent.kZegoTaskStreamPlay.stop_reason("DenyStop") }), this.signal.sendCloseSessionAck(e, this.sessionId, 0); var i = A.err_info ? JSON.parse(A.err_info.toLowerCase()) : {}, o = i.action ? i.action : null, n = 1 * A.reason, s = JSON.parse(JSON.stringify(1004 === (null == i ? void 0 : i.err) ? m.error.kPlayStreamNotFound : m.error.kPlaySessionClosedError)); s.message += " reason:".concat(n, " ").concat(o ? " action:" + o : "", " ").concat((null == i ? void 0 : i.err) ? " err:" + (null == i ? void 0 : i.err) : ""), s.message += ";".concat((0, f.translate)(n, o, null == i ? void 0 : i.err)), this.negoTimer && clearTimeout(this.negoTimer); var a = !([4, 8, 10, 11, 12, 14, 24, 26, 27, 28, 32].includes(n) || [2, 3, 4, 5, 6].includes(o)); 1004 === (null == i ? void 0 : i.err) && (a = !0); var c = !1; if (!this._turnToTcp) { if ([8, 10].includes(n) || [18, 15].includes(n) && 2 === o && [3001, 3002].includes(i.err)) { this.streamCenter.udpFailNum++; var g = this.streamCenter; g.autoSwitchProtocol && g.udpFailNum >= g.maxUdpFailNum && (this.isPeer = !1, this.streamCenter.setIsPeer(!1), c = !0) } else this._turnToTcp || (this.streamCenter.udpFailNum = 0); var u = this.gwNodeList.findIndex(function (e) { return e == r.gwNode }) === this.gwNodeList.length - 1, d = [3001, 3002, 3003, 3004, 3005, 3006, 3007, 3008].includes(i.err); u && d && (this.logger.info(h.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_CLOSE_SESSION + " " + this.streamId + " switch tcp by all fail"), this.stateCenter.turnToTcp = !0) } this.playStateUpdateError(s, a, i, c) }, A.prototype.onRecvStreamStatus = function (e, t) { void 0 === t && (t = !1), this.logger.info(h.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_STREAM_STATUS + " " + this.streamId + " call"), this.logger.info("".concat(h.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_STREAM_STATUS, " ").concat(this.streamId, " status camera_status: ").concat(e.camera_status, " mic_status: ").concat(e.mic_status)), this.reportFirstFrameData(e.camera_status, e.mic_status), (!this.hasSentStreamStatus || this.cameraStatus !== e.camera_status) && this.onRemoteCameraStatusUpdate(this.streamId, this.getCameraMicStatus(e.camera_status), e.camera_status), (!this.hasSentStreamStatus || this.micStatus !== e.mic_status) && this.onRemoteMicStatusUpdate(this.streamId, this.getCameraMicStatus(e.mic_status), e.mic_status), this.hasSentStreamStatus = !0; var A = this.cameraStatus !== e.camera_status; if (this.cameraStatus = e.camera_status, this.micStatus = e.mic_status, this.videoMuteState = 0 === e.camera_status ? "0" : "1", this.audioMuteState = 0 === e.mic_status ? "0" : "1", "boolean" == typeof this.playOption.video) this.logger.info(h.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_STREAM_STATUS + " " + this.streamId + " has set video option, ignore stream status"); else { var r = this.playStream, i = this.rtcViewer; if (0 !== e.camera_status && 20 !== e.camera_status) i ? A && (this.logger.info(h.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_STREAM_STATUS + " " + this.streamId + " viewer clear last frame"), i.checkIfClearLastFrame()) : r.getVideoTracks().forEach(function (e) { e.enabled = !1, e.stop(), r.removeTrack(e) }); else if (0 === r.getVideoTracks().length) { var o = this.remoteStream.clone().getVideoTracks()[0]; r.addTrack(o), i && i.setVideo(o, "safari" === this.stateCenter.browser) } if ("safari" === this.stateCenter.browser && t) for (var n = document.querySelectorAll("video, audio"), s = 0; s < n.length; s++) { var a = n[s]; a.srcObject === this.playStream && (this.logger.info(h.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_STREAM_STATUS + " track changed. rerender stream"), a.srcObject = this.playStream) } } this.logger.info(h.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_STREAM_STATUS + " " + this.streamId + " call success") }, A.prototype.onGotRemoteStream = function (e, t) { var A = this; if (this.logger.info(h.ZEGO_WEBRTC_ACTION.PLAYER_ON_GOT_REMOTE_STREAM + " " + this.streamId + " called " + e), e) { if (this.sideMediaConfig.isSEIStart && "function" == typeof t.createEncodedStreams && ("video" === t.track.kind ? this.createVideoReceiverTransform(t) : "audio" === t.track.kind && this.createAudioReceiverTransform(t)), this.playStream) { this.playStream.getTracks().forEach(function (e) { return A.playStream.removeTrack(e) }); var r = this.rtcViewer; e.clone().getTracks().forEach(function (e) { return o(A, void 0, void 0, function () { return n(this, function (t) { return this.playStream.addTrack(e), r && r.setTrack("video" === e.kind, e, "safari" === this.stateCenter.browser), [2] }) }) }) } else this.playStream = e.clone(); this.audioMuteState = this.playStream.getAudioTracks().length > 0 ? "0" : "1", this.videoMuteState = this.playStream.getVideoTracks().length > 0 ? "0" : "1", this.remoteStream = e, this.getVideoCodec(), this.gotStreamStatus && this.onRecvStreamStatus(this.streamStatus, !0), this.streamCenter.soundLevelDelegate && !this.isProbe && this.startSoundLevel() } else this.logger.warn(h.ZEGO_WEBRTC_ACTION.PLAYER_ON_GOT_REMOTE_STREAM + " " + this.streamId + " remote stream is empty") }, A.prototype.createVideoReceiverTransform = function (e) { var t = e.createEncodedStreams(), A = new TransformStream({ "transform": this.decodeVideoFrame }); this.receiverStreams = t, t.readable.pipeThrough(A).pipeTo(t.writable) }, A.prototype.createAudioReceiverTransform = function (e) { var t = e.createEncodedStreams(), A = new TransformStream({ "transform": this.decodeAudioFrame }); t.readable.pipeThrough(A).pipeTo(t.writable) }, A.prototype.sendCandidateInfo = function (e) { var t = this; if (this.logger.info(h.ZEGO_WEBRTC_ACTION.PLAYER_SEND_CANDIDATE_INFO + " " + this.streamId + " called"), !(e = e.filter(function (e) { return !(e.candidate.indexOf("tcp") > 0) && (!!e.candidate || void 0) })) || e.length < 1) this.logger.info(h.ZEGO_WEBRTC_ACTION.PLAYER_SEND_CANDIDATE_INFO + " " + this.streamId + " cancelled"); else { var A = this.getSpan(l.ZegoRTCLogEvent.kZegoPlaySendIceCandidate.event, this.parentSpanKey); A && A.setAttributes({ "candidate_info": l.ZegoRTCLogEvent.kZegoPlaySendIceCandidate.candidate_info(e) }), this.stateNego !== a.ENUM_PLAY_STATE_NEGO.iceConnected && (this.stateNego = a.ENUM_PLAY_STATE_NEGO.sendCandidate), this.logger.info(h.ZEGO_WEBRTC_ACTION.PLAYER_SEND_CANDIDATE_INFO + " " + this.streamId + " stateNego:sendCandidate"), this.signal.sendCandidateInfo((0, a.getSeq)(), this.sessionId, e, function (e, r, i) { t.logger.debug(h.ZEGO_WEBRTC_ACTION.PLAYER_SEND_CANDIDATE_INFO + " " + t.streamId + " send success"), A && A.end() }, function (e, r) { t.logger.error(h.ZEGO_WEBRTC_ACTION.PLAYER_SEND_CANDIDATE_INFO + " " + t.streamId + " failed to send: " + e.toString()), A && t.stateCenter.reporter.setError(A, { "code": l.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kCandidateError.code, "message": e.toString() }), t.playStateUpdateError(m.error.kCandidateError) }) } }, A.prototype.shouldSendCloseSession = function () { return this.state != a.ENUM_PLAY_STATE_UPDATE.stop && this.state != a.ENUM_PLAY_STATE.waitingSessionRsp }, A.prototype.resetPushCmdSeqMap = function () { var e; this.pushCmdSeqMap = ((e = {}).MediaDescPush = { "seq": -1, "time": 0 }, e.StreamStatusNotifyPush = { "seq": -1, "time": 0 }, e.PlayEventPush = { "seq": -1, "time": 0 }, e.ClientInfoPush = { "seq": -1, "time": 0 }, e.NetQualityInfoPush = { "seq": -1, "time": 0 }, e.CandidateInfoPush = { "seq": -1, "time": 0 }, e) }, A.prototype.playStateUpdateError = function (e, t, A, r) { if (this.logger.error(h.ZEGO_WEBRTC_ACTION.PLAYER_STATE_ERROR + " call ", this.streamId, JSON.stringify(e)), !this.isProbe) { var i = this.stateCenter.reporter.createSpan(a.TRACER_LEVEL.H, { "key": l.ZegoRTCLogEvent.kZegoTaskPlayStart.event, "par": this.streamId }, { "key": "" }, l.ZegoRTCLogEvent.kZegoTaskPlayStreamStateError.event); i.setAttributes({ "error": null == e ? void 0 : e.code, "message": null == e ? void 0 : e.message }), i.end() } this.isProbe ? this.onCalNetQualityResult(1) : this.streamId && this.onPlayStateUpdate(a.ENUM_PLAY_STATE_UPDATE.error, this.streamId, e, t, A, r), this.logger.info(h.ZEGO_WEBRTC_ACTION.PLAYER_STATE_ERROR + " " + this.streamId + " ended") }, A.prototype.getCameraMicStatus = function (e) { return 0 == e ? "OPEN" : "MUTE" }, A.prototype.onPlayStateUpdate = function (e, t, A, r, i, o) { }, A.prototype.onPlayQualityUpdate = function (e, t) { }, A.prototype.onRemoteCameraStatusUpdate = function (e, t, A) { }, A.prototype.onRemoteMicStatusUpdate = function (e, t, A) { }, A.prototype.getStopReason = function (e) { var t = "StopPlay"; return e && e.code && (t = 1104031 === e.code ? "ReachMaxAVRetryTime" : "StopPlay"), t }, A.prototype.stopPlay = function (e, t) { var A, r, o, n; this.logger.info(h.ZEGO_WEBRTC_ACTION.PLAYER_STOP_PLAY + " " + this.streamId + " called"); var s = this.getStopReason(e); for (var c in this.streamCenter.publisherList) if (this.streamCenter.publisherList[c].publisher.state == a.ENUM_PUBLISH_STATE.publishing && this.broadcasterStatus == a.ENUM_BROADCASTER_STATUS.start) { this.signal && this.signal.sendBroadcasterStatus((0, a.getSeq)(), this.sessionId, 0), this.broadcasterStatus = a.ENUM_BROADCASTER_STATUS.stop; break } if (this.sessionId && !this.closeSessionSignal && (this.signal.sendCloseSession((0, a.getSeq)(), this.sessionId, 0), this.resetPushCmdSeqMap()), !this.isProbe) { var g = Date.now() - this.reportPlayStateTime;[0, 2].includes(this.resourceMode) && this.reportSpan.setAttributes({ "play_state_time": Q.play_state_time(g || 0) }), this.uploadRTCPlayStats(), this.stateCenter.reporter.spanSetAttributes({ "key": l.ZegoRTCLogEvent.kZegoTaskStreamPlay.event, "par": this.streamId }, { "stop_reason": l.ZegoRTCLogEvent.kZegoTaskStreamPlay.stop_reason(s) }) } if (this.stopPollNetworkQuality(), this.resetPlay(), !this.isProbe && !t) { var d = this.qualityHandler, C = d.videoBreak, I = d.audioBreak, E = 2 === this.resourceMode ? "l3" : "rtc", p = ((A = {})["".concat(E, "_a_break_time")] = I.cumulativeBreakDuration, A["".concat(E, "_a_decode_time")] = I.cumulativeDecodeDuration, A["".concat(E, "_v_break_time")] = C.cumulativeBreakDuration, A["".concat(E, "_v_decode_time")] = C.cumulativeDecodeDuration, A.audio_cumulative_break_time = I.cumulativeBreakDuration, A.audio_cumulative_decode_time = I.cumulativeDecodeDuration, A.video_cumulative_break_time = C.cumulativeBreakDuration, A.video_cumulative_decode_time = C.cumulativeDecodeDuration, A); this.reportSpan.setAttributes(i({ "biz_product": (null === (r = this.playOption) || void 0 === r ? void 0 : r.resourceMode) == a.ResourceMode.DG ? 1 : 0, "webrtc_sid": Q.webrtc_sid(this.sessionId), "max_retry_interval": Q.max_retry_interval(this.stateCenter.streamRetryTime), "probe_ip_cnt": Q.probe_ip_cnt(this.probeIpCnt), "valid_probe_ip_cnt": Q.valid_probe_ip_cnt(this.validProbeIpCnt), "poor_quality_retry_cnt": Q.poor_quality_retry_cnt(this.poorQualityRetryCnt), "probe_not_trigger_retry_info": Q.probe_not_trigger_retry_info(this.probeNotRetryInfos.length > 0 ? this.probeNotRetryInfos : void 0), "fail_cnt": Q.fail_cnt(Math.max(this.rtcPlayCount - 1, 0)), "continuous_fail_cnt": Q.continuous_fail_cnt(this.continuousFailCnt), "use_resource_type": Q.use_resource_type(this.resourceMode === a.ResourceMode.DG ? this.useResourceTypes : [(0, u.getPlaySourceType)(this.resourceMode)]), "use_na": l.ZegoRTCLogEvent.kZegoTaskSDKPlayStream.use_na(this.stateCenter.useNetAgent ? 1 : 0), "play_state_cnt": Q.first_frame_time(this.playStateCount), "protocol": Q.protocol("webrtc"), "dispatch_external_ip": Q.dispatch_external_ip(this.stateCenter.clientIP), "w": Q.w(null === (o = this.playStat) || void 0 === o ? void 0 : o.frameWidth), "h": Q.h(null === (n = this.playStat) || void 0 === n ? void 0 : n.frameHeight), "stop_reason": Q.stop_reason(s), "error": (null == e ? void 0 : e.code) || 0, "message": (null == e ? void 0 : e.message) || "", "cdn_a_break_time": 0, "cdn_a_decode_time": 0, "cdn_v_break_time": 0, "cdn_v_decode_time": 0, "l3_a_break_time": 0, "l3_a_decode_time": 0, "l3_v_break_time": 0, "l3_v_decode_time": 0, "rtc_a_break_time": 0, "rtc_a_decode_time": 0, "rtc_v_break_time": 0, "rtc_v_decode_time": 0 }, p)), this.reportSpan.end() } this.streamCenter.stopToReport(1), this.retryFailGwNodes = [], this.isRePlay = !1, this.rtcPlayCount = 0, this.isProbeDispatch = !1, this.probeIpCnt = 0, this.validProbeIpCnt = 0, this.poorQualityRetryCnt = 0, this.continuousFailCnt = 0; var f = this.rtcViewer; f && f.destroy() }, A.prototype.onDisconnect = function (e) { this.logger.info(h.ZEGO_WEBRTC_ACTION.PLAYER_ON_DISCONNECT + " " + this.streamId + " call"), this.playStateUpdateError(e || m.error.kWebsocketDisconnectedError, !!e) }, A.prototype.startSoundLevel = function () { var e; if (this.logger.info(h.ZEGO_WEBRTC_ACTION.PLAYER_START_SOUND_LEVEL + " call streamID: " + this.streamId), !this.isProbe) if (this.remoteStream && 0 != this.remoteStream.getAudioTracks().length) { null === (e = this.soundMeterWorklet) || void 0 === e || e.destroy(), this.mic = null; try { var t = this, A = this.streamCenter.createSoundLevel(this.ac, this.remoteStream, this.streamCenter.soundLevelInterval, function (e) { t.soundLevel = 100 * e }).mic; this.mic = A } catch (e) { this.logger.error(h.ZEGO_WEBRTC_ACTION.PLAYER_START_SOUND_LEVEL + " get sound level failed " + e) } } else this.logger.info(h.ZEGO_WEBRTC_ACTION.PLAYER_START_SOUND_LEVEL + " " + this.streamId + " remote stream no found") }, A.prototype.stopSoundLevel = function () { var e; this.logger.info(h.ZEGO_WEBRTC_ACTION.PLAYER_STOP_SOUND_LEVEL + " call streamID: " + this.streamId), null === (e = this.soundMeterWorklet) || void 0 === e || e.destroy(), this.mic = null }, A.prototype.onCalNetQualityResult = function (e, t) { }, A.prototype.onReceivedDataChannel = function (e) { var t, A, r = this, i = new Uint8Array(e.data, 0, 10), o = e.data.byteLength - 10, n = new Uint8Array(e.data, 10, o); if (1 == i[0]) { var s = i[1], a = i[2] << 8 | i[3], c = i[4] << 8 | i[5], g = (new Date).getTime(); if (this.first_pkt && (this.next_sn[0] = a == c ? a : c, this.first_pkt = !1), this.pkt_list.push({ "sn": a, "sn0": c, "recv_ts": g, "flags": s, "payload_len": o, "payloadArray": n }), this.pkt_list.sort(this.compareShort), a == this.next_sn[0]) { var u = this.pkt_list.filter(function (e) { return e.sn0 == c }); if (u.sort(this.compareShort), null != u.find(function (e) { return 1 & e.flags }) && u.length == this.compareShort(a, c) + 1) { for (var h = 0, d = new ArrayBuffer(65536), C = 0; C < u.length; C++)new Uint8Array(d).set(u[C].payloadArray, h), h += u[C].payload_len; null === (t = this.onDataChannelList) || void 0 === t || t.forEach(function (e) { e(d, h, r.streamId) }), this.pkt_list = [], this.first_pkt = !0 } this.next_sn[0]++ } else for (var I = function l() { var e = E.pkt_list.filter(function (e) { return e.sn0 == r.pkt_list[0].sn0 }); if (e.sort(E.compareShort), null != e.find(function (e) { return 1 & e.flags }) && e.length == E.compareShort(e[e.length - 1].sn, e[0].sn0) + 1) { for (var t = 0, i = new ArrayBuffer(65536), o = 0; o < e.length; o++)new Uint8Array(i).set(e[o].payloadArray, t), t += e[o].payload_len; E.next_sn[0] = e[0].sn0 + e.length, null === (A = E.onDataChannelList) || void 0 === A || A.forEach(function (e) { e(i, t, r.streamId) }), E.pkt_list = [], E.first_pkt = !0 } else if (g - e[0].ts < 4e3) { var n = e[0].sn0; for (o = 0; o < e.length && n == e[o].sn; o++)n++; return E.next_sn[0] = n, "break" } for (o = 0; o < e.length; o++)E.pkt_list.shift() }, E = this; this.pkt_list.length > 0 && "break" !== I();); } }, A.prototype.compareShort = function (e, t) { var A = new Uint16Array(1); A[0] = e - t; var r = new Int16Array(1); return r[0] = A[0], r[0] }, A.prototype.uploadRTCPlayStats = function () { var e, t, A, r, i, o, n, s, a, c, g, u, h, d, C; this.stateCenter.reporter.spanSetAttributes({ "key": l.ZegoRTCLogEvent.kZegoTaskStreamPlay.event, "par": this.streamId }, { "lsttime": l.ZegoRTCLogEvent.kZegoTaskStreamPlay.lsttime(parseInt(this.qualityHandler.lastPlayStats.time)), "total_stat": l.ZegoRTCLogEvent.kZegoTaskRTCPublish.total_stat({ "afc": null === (e = this.lastPlayStats) || void 0 === e ? void 0 : e.audioPacketsReceived, "vfc": null === (t = this.lastPlayStats) || void 0 === t ? void 0 : t.framesReceived, "tfc": (null === (A = this.lastPlayStats) || void 0 === A ? void 0 : A.audioPacketsReceived) + (null === (r = this.lastPlayStats) || void 0 === r ? void 0 : r.framesReceived), "vb": null === (i = this.lastPlayStats) || void 0 === i ? void 0 : i.videoBytesReceived, "ab": null === (o = this.lastPlayStats) || void 0 === o ? void 0 : o.audioBytesReceived, "tb": (null === (n = this.lastPlayStats) || void 0 === n ? void 0 : n.videoBytesReceived) + (null === (s = this.lastPlayStats) || void 0 === s ? void 0 : s.audioBytesReceived), "rtp_rtt": Math.round(1e3 * (null === (a = this.playStat) || void 0 === a ? void 0 : a.currentRoundTripTime)) || 0, "w": null === (c = this.playStat) || void 0 === c ? void 0 : c.frameWidth, "rtp_plr": null === (g = this.playStat) || void 0 === g ? void 0 : g.videoPacketsLostRate, "h": null === (u = this.playStat) || void 0 === u ? void 0 : u.frameHeight, "rtp_bw": (null === (h = this.playStat) || void 0 === h ? void 0 : h.googAvailableSendBandwidth) ? null === (d = this.playStat) || void 0 === d ? void 0 : d.googAvailableSendBandwidth : void 0, "p2p_delay": null === (C = this.playStat) || void 0 === C ? void 0 : C.peerToPeerDelay }) }) }, A.prototype.getVideoCodec = function () { var e = this; this.peerConnection && (this.peerConnection.getStats().then(function (t) { t.forEach(function (A) { if ("inbound-rtp" === A.type && "video" === A.kind && A.codecId) { var r = t.get(A.codecId).mimeType.toLowerCase(); r.indexOf("h264") > -1 ? e.videoCodec = "H264" : r.indexOf("vp8") > -1 && (e.videoCodec = "VP8", e.sideMediaConfig.isSEIStart && e.logger.error(h.ZEGO_WEBRTC_ACTION.PAYER_GET_VIDEO_CODEC + " video code VP8 is not support SEI")) } }) }), this.videoCodecTimes++, this.videoCodec || this.videoCodecTimes >= 5) ? this.stopVideocTimer() : this.videoCodecTimer = setTimeout(function () { e.getVideoCodec() }, 100) }, A.prototype.stopVideocTimer = function () { this.videoCodecTimer && (clearTimeout(this.videoCodecTimer), this.videoCodecTimer = null) }, A.prototype.getViewer = function () { return this.playStream && !this.rtcViewer && (this.rtcViewer = new E.StreamView(this.playStream, this, { "clearLastFrame": this.stateCenter.engineConfig.playClearLastFrame })), this.rtcViewer }, A.prototype.isMultiOuter = function () { return !(!this.stateCenter.accessClientIp || !this.streamConnectIP || this.stateCenter.accessClientIp === this.streamConnectIP) }, A.prototype.isCustomCdn = function () { return !1 }, A.prototype.getSpan = function (e, t, A, r) { return void 0 === r && (r = !1), this.isProbe ? null : this.stateCenter.reporter.createSpan(a.TRACER_LEVEL.H, { "key": t, "bak_key": A, "par": this.streamId }, { "key": e, "par": this.streamId }, e, r) }, A.prototype.setTurnTcp = function () { this._turnToTcp = this.stateCenter.turnToTcp, void 0 !== this.stateCenter.turnOverTcpOnly && (this._turnToTcp = this.stateCenter.turnOverTcpOnly) }, A.prototype.recordFirstFrameData = function () { var e; this.isProbe || 0 != this.firstFrameTime || (this.firstFrameTime = (new Date).getTime() - this.beginTime, this.reportSpan.setAttributes({ "first_frame_time": Q.first_frame_time(this.firstFrameTime), "fft_video": Q.fft_video(this.firstFrameTime), "fft_audio": Q.fft_audio(this.firstFrameTime), "biz_product": l.ZegoRTCLogEvent.kZegoTaskPlayNetFirstVideoFrame.biz_product((null === (e = this.playOption) || void 0 === e ? void 0 : e.resourceMode) == a.ResourceMode.DG ? 1 : 0) }), this.firstVideoSpan = this.firstFrameSpan("video"), this.firstAudioSpan = this.firstFrameSpan("audio")) }, A.prototype.reportFirstFrameData = function (e, t) { 0 === e && this.firstVideoSpan && (this.firstVideoSpan.setAttributes({ "dev_changed": l.ZegoRTCLogEvent.kZegoTaskPlayNetFirstVideoFrame.dev_changed(0 !== this.cameraStatus) }), this.firstVideoSpan.spanReport(), this.firstVideoSpan = null), 0 === t && this.firstAudioSpan && (this.firstAudioSpan.setAttributes({ "dev_changed": l.ZegoRTCLogEvent.kZegoTaskPlayNetFirstAudioFrame.dev_changed(0 !== this.micStatus) }), this.firstAudioSpan.spanReport(), this.firstAudioSpan = null) }, A.prototype.firstFrameSpan = function (e) { var t, A = "video" === e ? l.ZegoRTCLogEvent.kZegoTaskPlayNetFirstVideoFrame : l.ZegoRTCLogEvent.kZegoTaskPlayNetFirstAudioFrame, r = this.stateCenter.reporter.createSpan(a.TRACER_LEVEL.H, { "key": l.ZegoRTCLogEvent.kZegoTaskPlayStart.event, "par": this.streamId }, { "key": "" }, A.event), i = this.streamInRoom ? 2 : 0 === this.streamRoomPushConsumed ? 0 : 1, o = (new Date).getTime() - this.answerSdpTime; return r.setAttributes({ "webrtc_sid": A.webrtc_sid(this.sessionId), "resource_type": A.resource_type((0, u.getPlaySourceType)(this.resourceMode)), "fft_consumed": A.fft_consumed(this.firstFrameTime), "protocol": A.protocol("webrtc"), "push_consumed": A.push_consumed(this.streamRoomPushConsumed), "prepare_recv_consumed": A.prepare_recv_consumed(this.signalTime), "connected_consumed": A.connected_consumed(o), "reliability": A.reliability(i), "biz_product": A.biz_product((null === (t = this.playOption) || void 0 === t ? void 0 : t.resourceMode) == a.ResourceMode.DG ? 1 : 0) }), null == r || r.end(!1), r }, A.prototype.setStreamAdd = function () { this.streamInRoom || 0 !== this.streamRoomPushConsumed || this.state === a.ENUM_PLAY_STATE.connecting || (this.streamRoomPushConsumed = (new Date).getTime() - this.playStartTime) }, A.prototype.startPollNetworkQuality = function () { var e = this; clearTimeout(this.netTimer), this.netTimer = setTimeout(function () { e.lostQualityTime++; var t = s.QualityGrade.Unknown, A = s.QualityGrade.Unknown; e.userID && e.lostQualityTime > 1 && (e.lostQualityTime > 3 && (t = s.QualityGrade.Die, A = s.QualityGrade.Die), e.stateCenter.actionListener("networkQuality", e.userID, t, A)), e.startPollNetworkQuality() }, 3e3) }, A.prototype.stopPollNetworkQuality = function () { clearTimeout(this.netTimer), this.lostQualityTime = 0 }, A }(); t.ZegoPlayWeb = v }, "4147": function _(e, t, r) { "use strict"; var i = this && this.__assign || function () { return (i = Object.assign || function (e) { for (var t, A = 1, r = arguments.length; A < r; A++)for (var i in t = arguments[A]) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]); return e }).apply(this, arguments) }, n = this && this.__awaiter || function (e, t, A, r) { return new (A || (A = Promise))(function (i, o) { function n(e) { try { a(r.next(e)) } catch (e) { o(e) } } function s(e) { try { a(r.throw(e)) } catch (e) { o(e) } } function a(e) { var t; e.done ? i(e.value) : (t = e.value, t instanceof A ? t : new A(function (e) { e(t) })).then(n, s) } a((r = r.apply(e, t || [])).next()) }) }, s = this && this.__generator || function (e, t) { var A, r, i, o, n = { "label": 0, "sent": function sent() { if (1 & i[0]) throw i[1]; return i[1] }, "trys": [], "ops": [] }; return o = { "next": s(0), "throw": s(1), "return": s(2) }, "function" == typeof Symbol && (o[Symbol.iterator] = function () { return this }), o; function s(s) { return function (a) { return function (s) { if (A) throw new TypeError("Generator is already executing."); for (; o && (o = 0, s[0] && (n = 0)), n;)try { if (A = 1, r && (i = 2 & s[0] ? r.return : s[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, s[1])).done) return i; switch (r = 0, i && (s = [2 & s[0], i.value]), s[0]) { case 0: case 1: i = s; break; case 4: return n.label++, { "value": s[1], "done": !1 }; case 5: n.label++, r = s[1], s = [0]; continue; case 7: s = n.ops.pop(), n.trys.pop(); continue; default: if (!((i = (i = n.trys).length > 0 && i[i.length - 1]) || 6 !== s[0] && 2 !== s[0])) { n = 0; continue } if (3 === s[0] && (!i || s[1] > i[0] && s[1] < i[3])) { n.label = s[1]; break } if (6 === s[0] && n.label < i[1]) { n.label = i[1], i = s; break } if (i && n.label < i[2]) { n.label = i[2], n.ops.push(s); break } i[2] && n.ops.pop(), n.trys.pop(); continue }s = t.call(e, n) } catch (e) { s = [6, e], r = 0 } finally { A = i = 0 } if (5 & s[0]) throw s[1]; return { "value": s[0] ? s[1] : void 0, "done": !0 } }([s, a]) } } }; Object.defineProperty(t, "__esModule", { "value": !0 }), t.PublishModule = void 0; var a = r(5123), c = r(93), g = r(5123), u = r(1586), l = r(4028), d = r(2532), C = r(7436), E = r(1916), p = r(1018), f = u.ZegoRTCLogEvent.kZegoTaskPublishStart, B = u.ZegoRTCLogEvent.kZegoStartPublish, m = function () { function A(e, t, A, r, i, o) { this.logger = e, this.dataReport = t, this.stateCenter = A, this.streamCenter = r, this.rtm = i, this.zegoWebRtc = o, this.recordDevices() } return A.prototype.createStream = function (e) { var t, A, r = this; this.logger.info(c.ZEGO_WEBRTC_ACTION.CREATE_STREAM + " call"), e && e.camera && e.camera.audioBitRate && (e.camera.audioBitrate = e.camera.audioBitRate), e && e.camera && e.camera.bitrate && (e.camera.bitRate = e.camera.bitrate), e && e.screen && "object" == _typeof(e.screen) && e.screen.bitrate && (e.screen.bitRate = e.screen.bitrate), e && e.custom && e.custom.bitrate && (e.custom.bitRate = e.custom.bitrate); var o = { "width": 960, "height": 540 }; if (!(null == e ? void 0 : e.custom) && !(null == e ? void 0 : e.screen) || e.camera || !e) { var n = null === (A = null === (t = navigator.userAgent) || void 0 === t ? void 0 : t.toLowerCase()) || void 0 === A ? void 0 : A.match(/cpu iphone os (.*?) like mac os/); if (!n || !n[1] || !n[1].includes("11_4")) { var s = i({ "video": !0, "videoQuality": 4, "frameRate": 15, "bitRate": 500 }, { "width": 640, "height": 360 }); switch (this.stateCenter.scenario) { case g.ZegoScenario.StandardVideoCall: break; case g.ZegoScenario.HighVideoCall: s.frameRate = 25, s.bitRate = 1500, s = i(i({}, s), o); break; case g.ZegoScenario.StandardChatroom: case g.ZegoScenario.HighQualityChatroom: s.video = !1; break; case g.ZegoScenario.Broadcast: s.frameRate = 20, s.bitRate = 1200, s = i(i({}, s), o); break; default: s.bitRate = 800, s = i(i({}, s), { "width": 720, "height": 480 }) }(e = e || {}).camera = Object.assign(s, e.camera || {}) } } return new Promise(function (t, A) { var o = "camera", n = r.stateCenter.reporter.createSpan(a.TRACER_LEVEL.H, { "key": u.ZegoRTCLogEvent.kZMInitSetting.event }, { "key": "" }, u.ZegoRTCLogEvent.kZegoTaskCreateStream.event), s = function I(e) { var A = r.streamCenter.checkPreview(e), i = e; if (A && navigator.userAgent) { var o = navigator.userAgent.toLowerCase().match(/cpu iphone os (.*?) like mac os/); o && o[1] && o[1].includes("15_1") && (i = A.getStreamThroughCanvas(e), A.localStream = i, A.streamFromCanvas = !0, A.streamFromCanvasTrack = i.getVideoTracks()[0]) } if (r.stateCenter.engineConfig.keepAudioTrack && 0 == i.getAudioTracks().length) { var s = null == A ? void 0 : A.getEmptyAudioTrack(); s && (s.enabled = !1, i.addTrack(s), A && (A.hasEmptyAudioTrack = !0)) } n.setAttributes({ "media_stream_id": u.ZegoRTCLogEvent.kZegoTaskCreateStream.media_stream_id(null == e ? void 0 : e.id) }), n.end(), !r.stateCenter.deviceInfos && r.recordDevices(), t(i), r.streamCenter.activeSoundLevel() }, g = function c(e, t) { void 0 === t && (t = ""), r.stateCenter.reporter.setError(n, e, t), A({ "code": e.code, "msg": e.message + t }) }; if ("https:" !== window.location.protocol && "file:" !== window.location.protocol && -1 == window.location.hostname.indexOf("127.0.0.1") && -1 == window.location.hostname.indexOf("localhost")) return r.logger.error(c.ZEGO_WEBRTC_ACTION.CREATE_STREAM + " https or localhost required "), void g({ "code": u.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kBrowserNotSupportError.code, "message": u.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kBrowserNotSupportError.message + " https or localhost required" }); if (e && e.screen) { if (o = "screen", !p.WebRTCUtil.checkScreenParams(e.screen, g)) return; var d = r.stateCenter.browser, C = r.streamCenter.getScreenConstrains(e.screen); n.setAttributes({ "stream_type": u.ZegoRTCLogEvent.kZegoTaskCreateStream.stream_type("screen"), "screen": u.ZegoRTCLogEvent.kZegoTaskCreateStream.screen(C) }); var f = function h(e) { r.streamCenter.createScreenPreviewer(e, C) && s(e), e.getVideoTracks()[0].onended = function () { var t = r.stateCenter.reporter.createSpan(a.TRACER_LEVEL.H, { "key": u.ZegoRTCLogEvent.kZMInitSetting.event }, { "key": "" }, u.ZegoRTCLogEvent.kZegoTaskDestroyStream.event); t.setAttributes({ "stop_reason": u.ZegoRTCLogEvent.kZegoTaskDestroyStream.stop_reason("screenSharingEnded") }), e && r.stopPreview(e), t.end(), r.stateCenter.actionListener("screenSharingEnded", e) } }; "firefox" == d || "object" == _typeof(e.screen) && "firefox" == e.screen.type ? r.startScreenShotFirFox("screen", C, function (e, t, A) { e ? t && f(t) : A && g(A) }) : "chrome" == d && E.ZegoWebRTC.screenShotReady || "object" == _typeof(e.screen) && "shot" == e.screen.type ? r.startScreenShotChrome(function (t, A, i) { t ? (r.logger.info(c.ZEGO_WEBRTC_ACTION.CREATE_STREAM + " using extension"), A && f(A)) : (i && r.logger.error(c.ZEGO_WEBRTC_ACTION.CREATE_STREAM + " extension " + i), "SS_DIALOG_CANCEL" === i || "object" == _typeof(null == e ? void 0 : e.screen) && "shot" == e.screen.type ? i && g(u.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kScreenCancelError) : r.startScreenSharing(C, function (e, t, A) { e ? t && f(t) : (r.logger.error(c.ZEGO_WEBRTC_ACTION.CREATE_STREAM + " " + A), A && g(A)) })) }) : "Electron" == d || "object" == _typeof(e.screen) && "Electron" == e.screen.type ? r.startScreenShotElectron(C, function (e, t, A) { e ? t && f(t) : A && g(A) }) : r.startScreenSharing(C, function (e, t, A) { e ? t && f(t) : A && g(A) }) } else { if (e && "object" == _typeof(e.camera) && void 0 !== e.camera.videoQuality && !l.ClientUtil.checkInteger(e.camera.videoQuality)) return r.logger.error(c.ZEGO_WEBRTC_ACTION.CREATE_STREAM + " videoQuality must be integer number"), void g(u.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError, " videoQuality must be integer number"); if (e && e.camera && e.camera.audioBitrate) { if (!l.ClientUtil.checkInteger(e.camera.audioBitrate)) return r.logger.error(c.ZEGO_WEBRTC_ACTION.CREATE_STREAM + " audioBitrate must be integer number"), void g(u.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError, " audioBitrate must be integer number"); if (e.camera.audioBitrate < 6) return r.logger.error(c.ZEGO_WEBRTC_ACTION.CREATE_STREAM + " audioBitrate cannot less 6 kbps"), void g(u.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError, " audioBitrate cannot less 6 kbps"); if (e.camera.audioBitrate > 510) return r.logger.error(c.ZEGO_WEBRTC_ACTION.CREATE_STREAM + " audioBitrate cannot greater than 510 kbps"), void g(u.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError, " audioBitrate cannot greater than 510 kbps"); r.stateCenter.audioBitRate = 1e3 * e.camera.audioBitrate } if (e && e.camera && e.camera.bitRate) { if ("number" != typeof e.camera.bitRate) return r.logger.error(c.ZEGO_WEBRTC_ACTION.CREATE_STREAM + " bitrate must be integer number"), void g(u.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError, " bitrate must be integer number"); if (e.camera.bitRate > 10240) return r.logger.error(c.ZEGO_WEBRTC_ACTION.CREATE_STREAM + " bitrate cannot greater than 10 Mbps"), void g(u.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError, " bitrate cannot greater than 10 Mbps") } if (e && e.camera && void 0 !== e.camera.channelCount && !l.ClientUtil.checkInteger(e.camera.channelCount)) return r.logger.error(c.ZEGO_WEBRTC_ACTION.CREATE_STREAM + " channelCount must be integer number"), void g(u.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError, " channelCount must be integer number"); if (e && e.camera && 4 === e.camera.videoQuality && !p.WebRTCUtil.checkCameraParams(e.camera, g)) return; if (e && e.custom && e.custom.bitRate) { if (!l.ClientUtil.checkInteger(e.custom.bitRate)) return r.logger.error(c.ZEGO_WEBRTC_ACTION.CREATE_STREAM + " bitrate must be integer number"), void g(u.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError, " bitrate must be integer number"); if (e.custom.bitRate > 10240) return r.logger.error(c.ZEGO_WEBRTC_ACTION.CREATE_STREAM + " bitrate cannot greater than 10 Mbps"), void g(u.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError, " bitrate cannot greater than 10 Mbps") } if (e && e.custom && e.custom.audioBitrate) { if (!l.ClientUtil.checkInteger(e.custom.audioBitrate)) return r.logger.error("ze.cs.0 audioBitrate must be integer number"), void g(u.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError, " audioBitrate must be integer number"); if (e.custom.audioBitrate < 6) return r.logger.error("ze.cs.0 audioBitrate cannot less 6 kbps"), void g(u.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError, " audioBitrate cannot less 6 kbps"); if (e.custom.audioBitrate > 510) return r.logger.error("ze.cs.0 audioBitrate cannot greater than 510 kbps"), void g(u.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError, " audioBitrate cannot greater than 510 kbps") } if (e && e.custom && void 0 !== e.custom.channelCount && 1 !== e.custom.channelCount && 2 !== e.custom.channelCount) return r.logger.error("ze.cs.0 channelCount must number 1 or 2"), void g(u.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError, " channelCount must number 1 or 2"); var B = {}; if (e && e.camera) o = "camera", B = e.camera, n.setAttributes({ "stream_type": u.ZegoRTCLogEvent.kZegoTaskCreateStream.stream_type("camera"), "camera": u.ZegoRTCLogEvent.kZegoTaskCreateStream.camera(e.camera) }), "boolean" != typeof B.video && (B.video = !0), "boolean" != typeof B.audio && (B.audio = !0); else if (e && e.custom) { o = "custom", B = e.custom; var _ = e.custom.source instanceof MediaStream ? "MediaStream" : "HTMLElement"; n.setAttributes({ "stream_type": u.ZegoRTCLogEvent.kZegoTaskCreateStream.stream_type("custom"), "custom": u.ZegoRTCLogEvent.kZegoTaskCreateStream.custom(i(i({}, e.custom), { "source_type": _ })) }) } r.startPreview(B, o, s, g, n) } }) }, A.prototype.destroyStream = function (e) { this.logger.info(c.ZEGO_WEBRTC_ACTION.DESTROY_STREAM + " call"); var t = this.stateCenter.reporter.createSpan(a.TRACER_LEVEL.H, { "key": u.ZegoRTCLogEvent.kZMInitSetting.event }, { "key": "" }, u.ZegoRTCLogEvent.kZegoTaskDestroyStream.event); if (t.setAttributes({ "stop_reason": u.ZegoRTCLogEvent.kZegoTaskDestroyStream.stop_reason("destroyStream") }), !(e instanceof MediaStream)) return this.logger.error(c.ZEGO_WEBRTC_ACTION.DESTROY_STREAM + " localStream is not mediaStream or tracks is null"), void this.stateCenter.reporter.setError(t, u.ZegoRTCLogEvent.kZegoTaskDestroyStream.error.kLocalStreamError); e instanceof MediaStream && 0 == e.getTracks().length && this.logger.info(c.ZEGO_WEBRTC_ACTION.DESTROY_STREAM + " tracks is null"), this.stopPreview(e), t.end() }, A.prototype.startPublishingStream = function (e, t, A, r) { var i; this.logger.info(c.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM + " call " + e + " publishOption: " + JSON.stringify(A) + " isDataChannel: " + JSON.stringify(!!r) + " ms_id: " + (null == t ? void 0 : t.id)); var o, n = !0, s = "", h = f.error, d = h.kPublishParamError, C = this.stateCenter.reporter.createSpan(a.TRACER_LEVEL.I, { "key": u.ZegoRTCLogEvent.kZMInitSetting.event }, { "key": f.event, "par": e }, f.event, !0); n && void 0 === e && (this.logger.error(c.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM + (s = "stream id required")), n = !1, o = d), !n || e && "string" == typeof e || (this.logger.error(c.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM + " " + (s = "stream id type wrong")), n = !1, o = d), n && e.length > g.MAX_STREAM_ID_LENGTH && (this.logger.error(c.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM + " " + (s = "stream id length limit")), n = !1, o = d), n && !l.ClientUtil.checkIllegalCharacters(e) && (this.logger.error(c.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM + " " + (s = "stream ID contains illegal characters")), n = !1, o = d), C.setAttributes({ "stream_id": f.stream_id(e) }), n && (!t || t instanceof MediaStream && 0 == t.getTracks().length) && (this.logger.error(c.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM + " " + (s = "localStream wrong")), n = !1, o = d); var I = this.streamCenter.checkPreview(t); if (n && !I && (this.logger.error(c.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM + " " + (s = "stream is not from zego")), n = !1, o = h.kPublishNoPreviewError), (null == I ? void 0 : I.isVideoEffectStarting) && (this.logger.error(c.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM + " " + (s = (o = h.kPublishEffectIsStarting).message)), n = !1), n && void 0 !== A && "object" != (void 0 === A ? "undefined" : _typeof(A)) && (n = !1, o = d, s = "publishOption must be object"), n && void 0 !== A && void 0 !== A.streamParams && "string" != typeof A.streamParams && (this.logger.error(c.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM + " publishOption streamParams must be string"), n = !1, o = d, s = " publishOption streamParams must be string"), n && void 0 !== A && void 0 !== A.extraInfo && "string" != typeof A.extraInfo && (this.logger.error(c.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM + " publishOption extraInfo must be string"), n = !1, o = d, s = " publishOption extraInfo must be string"), n && void 0 !== A && void 0 !== A.videoCodec && "string" != typeof A.videoCodec && (this.logger.error(c.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM + " publishOption videoCodec must be string"), n = !1, o = d, s = " publishOption videoCodec must be string"), !n || !this.stateCenter.isMultiRoom || A && "string" == typeof A.roomID && "" != A.roomID || (n = !1, o = d, s = " roomID is need if set multi room"), A && A.videoCodec && (A.videoCodec = A.videoCodec.toUpperCase()), n && (this.stateCenter.waitPublishStreamList[e] = { "retryStart": !1, "localStream": t, "publishOption": A, "isDataChannel": r }), n && this.rtm.isDisConnect()) { if (this.stateCenter.connectChanged) return this.stateCenter.waitPublishStreamList[e].retryStart = !0, this.logger.info(c.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM + " connect changed"), !1; this.logger.error(c.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM + " not login"), n = !1, o = h.kPublishNoLoginError } if (!n) throw this.logger.error(c.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM + " " + s), this.stateCenter.reporter.setError(C, o), { "errorCode": null == o ? void 0 : o.code, "extendedData": s }; A || (A = {}); var E = (0, l.generaStreamSid)(this.stateCenter.appid, this.stateCenter.idName, e), p = ((i = {})["_publish_" + e] = { "stream_sid": E }, i); this.stateCenter.reporter.setPublicPros(p), C.setAttributes({ "stream_sid": f.stream_sid(E), "publish_option": f.publish_option(A), "enable_camera": f.enable_camera(!!(null == I ? void 0 : I.videoTrack)), "enable_mic": f.enable_mic(!!(null == I ? void 0 : I.audioTrack)), "use_na": f.use_na(this.stateCenter.useNetAgent ? 1 : 0) }), A.audioBitRate = this.stateCenter.audioBitRate; var _ = A.roomID ? A.roomID : this.stateCenter.roomList[0] ? this.stateCenter.roomList[0].roomID : "", m = this.stateCenter.getRoomByRoomID(_); if (!m) return this.logger.error("zc.p.sps.1 room no found"), !1; C.setAttributes({ "room_id": f.room_id(_) }); var Q = this.streamCenter.getSignalNodes(); if (Q) return this.stateCenter.publishStreamList[e] = { "state": g.ENUM_PUBLISH_STREAM_STATE.tryPublish, "extra_info": A.extraInfo, "roomID": m.roomID }, this.streamCenter.setPublishStateStart(m, e, t, A, E, r) ? (m.streamHandler.onPublishStateUpdate(g.ENUM_PUBLISH_STATE_UPDATE.retry, e, { "code": 0, "message": "" }), this.streamCenter.publisherList[e].serverUrls = Q, this.streamCenter.startPublishingStream(e)) : (this.logger.info("zc.p.sps.1 cannot start publish"), !1); if (!this.streamCenter.setPublishStateStart(m, e, t, A, E, r)) return this.logger.error("zc.p.sps.1 cannot start publish"), !1; this.stateCenter.publishStreamList[e] = { "state": g.ENUM_PUBLISH_STREAM_STATE.tryPublish, "extra_info": A.extraInfo, "roomID": m.roomID }, this.logger.info("zc.p.sps.1 start publish"), m.streamHandler.onPublishStateUpdate(g.ENUM_PUBLISH_STATE_UPDATE.retry, e, { "code": 0, "message": "" }); var y = this.stateCenter.useNetAgent, v = this.streamCenter.publisherList[e]; if (this.stateCenter.reporter.createSpan(a.TRACER_LEVEL.H, { "key": u.ZegoRTCLogEvent.kZegoTaskPublishStart.event, "par": e }, { "key": B.event, "par": e }, B.event, !0).setAttributes({ "reason": B.reason("StartPublish") }), y) return this.stateCenter.appConfig ? (null == I ? void 0 : I.isBackgroundBlur) && !1 === this.stateCenter.supportBg ? (this.logger.info("zc.p.sps.1 check not support background porcess"), m.streamHandler.onPublishStateUpdate(g.ENUM_PUBLISH_STATE_UPDATE.error, e, h.kPublishNotSubscribeBackgroundProcessError), !1) : (this.streamCenter.publisherList[e].serverUrls = ["unified_rtc"], this.streamCenter.startPublishingStream(e, y), !0) : (this.streamCenter.waitPublishList.push(e), !0); var S = v.retryDispatchHandler; return S.stopMaxTime(), S.invalid(), S.initStream(e, A, !0), S.startMaxTime(), S.active(0) }, A.prototype.activateSEIInsert = function (e, t, A) { return void 0 === A && (A = 0), !1 }, A.prototype.sendSEI = function (e, t) { if (!l.ClientUtil.isSupportEncodedTransforms()) return this.logger.warn(c.ZEGO_WEBRTC_ACTION.SEND_MEDIA_SIDE_INFO + " browser not support "), !1; if (!(t instanceof Uint8Array)) return this.logger.error(c.ZEGO_WEBRTC_ACTION.SEND_MEDIA_SIDE_INFO + " inData required Uint8Array"), !1; if (t.byteLength > 4096) return this.logger.error(c.ZEGO_WEBRTC_ACTION.SEND_MEDIA_SIDE_INFO + " inData length limit"), !1; var A = this.streamCenter.publisherList[e]; return A && A.publisher ? A.publisher.sendSEI(t) : (this.logger.warn(c.ZEGO_WEBRTC_ACTION.SEND_MEDIA_SIDE_INFO + " publish not exist"), !1) }, A.prototype.stopPublishingStream = function (e, t, A) { var r, i, o; this.logger.info(c.ZEGO_WEBRTC_ACTION.STOP_PUBLISHING_STREAM + " call ", e + (t ? t.toString() : "") + " " + A); var n = this.stateCenter.reporter.createSpan(a.TRACER_LEVEL.I, { "key": u.ZegoRTCLogEvent.kZMInitSetting.event }, { "key": "" }, u.ZegoRTCLogEvent.kZegoTaskPublishStop.event); if ("string" != typeof e || "" == e) return this.logger.error(c.ZEGO_WEBRTC_ACTION.STOP_PUBLISHING_STREAM + " streamID must be string and not empty"), this.stateCenter.reporter.setError(n, u.ZegoRTCLogEvent.kZegoTaskPublishStop.error.kParamError, "stream id type error"), !1; var s = this.streamCenter.publisherList[e]; n.setAttributes({ "stream_id": u.ZegoRTCLogEvent.kZegoTaskPublishStop.stream_id(e), "stream_sid": u.ZegoRTCLogEvent.kZegoTaskPublishStop.stream_sid(null == s ? void 0 : s.streamSid), "room_id": u.ZegoRTCLogEvent.kZegoTaskPublishStop.room_id(null === (i = null === (r = this.streamCenter.publisherList[e]) || void 0 === r ? void 0 : r.room) || void 0 === i ? void 0 : i.roomID), "error": (null == t ? void 0 : t.code) || 0, "message": (null == t ? void 0 : t.message) || "" }); var l = this.streamCenter.getRoomByStreamID(e), h = s && s.publisher && s.publisher.state !== g.ENUM_PUBLISH_STATE.stop || (null === (o = null == s ? void 0 : s.retryStreamHandler) || void 0 === o ? void 0 : o.isRetrying()); if (this.streamCenter.stopPublishingStream(e, t), A && delete this.stateCenter.waitPublishStreamList[e], this.stateCenter.publishStreamList[e]) { if (this.stateCenter.publishStreamList[e].state >= g.ENUM_PUBLISH_STREAM_STATE.update_info && l) { t && 1102018 === t.code || l.streamHandler.updateStreamInfo(e, g.ENUM_STREAM_SUB_CMD.liveEnd); for (var d = 0; d < l.streamList.length; d++)if (l.streamList[d].stream_id == e) { !this.stateCenter.connectChanged && l.streamList.splice(d--, 1); break } } delete this.stateCenter.publishStreamList[e] } return n.end(), l && h && l.streamHandler.onPublishStateUpdate(g.ENUM_PUBLISH_STATE_UPDATE.error, e, t || { "code": 0, "message": "" }), !0 }, A.prototype.setCaptureVolume = function (e, t) { var A = this; return new Promise(function (r) { var i; A.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISH_SET_CAPTURE_VOLUME + " call"); var n = function o(e) { A.logger.error(c.ZEGO_WEBRTC_ACTION.PUBLISH_SET_CAPTURE_VOLUME + " " + e), r({ "errorCode": u.ZegoRTCLogEvent.kZegoSetCaptureVolume.error.kParamError.code, "extendedData": JSON.stringify({ "fail_reason": u.ZegoRTCLogEvent.kZegoSetCaptureVolume.error.kParamError.message + " " + e }) }) }, s = A.streamCenter.ac, a = A.streamCenter.checkPreview(e); if (e instanceof MediaStream && a) if (0 != e.getAudioTracks().length) if ("number" != typeof t || t < 0 || t > 200) n(" volume must be number between 0 to 200"); else { if (a.gainNode) a.gainNode.gain.value = t / 100; else { a.audioNodeQueue || a.initAudioNodeQueue(); var g = s.createGain(); null === (i = a.audioNodeQueue) || void 0 === i || i.pushFront(g), a.gainNode = g, a.gainNode.gain.value = t / 100 } s.resume(), r({ "errorCode": 0, "extendedData": "" }), A.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISH_SET_CAPTURE_VOLUME + " call success") } else n(" stream audioTrack no found"); else n(" stream must be created by zego") }) }, A.prototype.getElectronScreenSources = function () { var e = this; return new Promise(function (t, A) { var r = window.require("electron"); r || (e.logger.error("zc.gess.0 Electron is not exist"), A({ "message": "Electron is not exist" })), r.desktopCapturer.getSources({ "types": ["window", "screen"] }).then(function (e) { var A = e.map(function (e) { return { "id": e.id, "name": e.name, "thumbnail": e.thumbnail } }); t(A) }).catch(function (t) { e.logger.error("zc.gess.0 " + t), A(t) }) }) }, A.prototype.startScreenShotChrome = function (e) { if (E.ZegoWebRTC.screenShotReady) window.postMessage({ "type": "SS_UI_REQUEST", "text": "start" }, "*"), l.ClientUtil.registerCallback("screenShare", { "success": e }, this.stateCenter.callbackList); else { var t = 'zc.b.ss Please install the extension:1. Go to chrome://extensions  2. Check: "Enable Developer mode   3. Click: "Load the unpacked extension... 4. Choose "extension" folder from the repository 5. Reload this page'; this.logger.error(t), e(!1, null, { "code": u.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kScreenFailedError.code, "message": u.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kScreenFailedError.message + " " + t }) } }, A.prototype.startScreenSharing = function (e, t) { var A = this; if ("getDisplayMedia" in navigator.mediaDevices) { var r = navigator.mediaDevices, i = !1; if (e.audio && (i = { "noiseSuppression": !1, "autoGainControl": !1, "echoCancellation": !0 }, void 0 !== e.ANS && (i.noiseSuppression = e.ANS), void 0 !== e.AGC && (i.autoGainControl = e.AGC), void 0 !== e.AEC && (i.echoCancellation = e.AEC)), "safari" === this.stateCenter.browser && e.video instanceof Object) { var o = e.video, n = o.width, s = o.height; n instanceof Object ? e.video.width = { "max": n.max || n.ideal } : n && (e.video.width = { "max": n }), s instanceof Object ? e.video.height = { "max": s.max || s.ideal } : s && (e.video.height = { "max": s }) } this.logger.info("zc.b.sss video config: " + JSON.stringify(e.video)), this.logger.info("zc.b.sss audio config: " + JSON.stringify(i)), r.getDisplayMedia({ "audio": i, "video": e.video }).then(function (e) { t(!0, e) }).catch(function (e) { A.logger.error("zc.b.sss " + e), e.message && "permission denied" == e.message.toLowerCase() ? t(!1, null, u.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kScreenCancelError) : t(!1, null, { "code": u.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kScreenFailedError.code, "message": u.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kScreenFailedError.message + " " + e }) }) } else this.logger.error("zc.b.sss brower does not support getDisplayMedia"), t(!1, null, u.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kBrowserNotSupportError) }, A.prototype.startScreenShotFirFox = function (e, t, A) { var r = this, o = { "video": i(i({}, t.video), { "mediaSource": e }), "audio": t.audio }; navigator.mediaDevices.getUserMedia(o).then(function (e) { A(!0, e) }).catch(function (e) { r.logger.error("ze.ssf.1 " + e), A(!1, null, { "code": u.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kScreenFailedError.code, "message": u.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kScreenFailedError.message + " " + e }) }) }, A.prototype.startScreenShotElectron = function (e, t) { var A = this; if (!window.require("electron")) return this.logger.error("ze.sse.1 Electron is not exist"), void t(!1, null, { "code": u.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kScreenFailedError.code, "message": u.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kScreenFailedError.message + " Electron is not exist" }); var r = { "video": { "mandatory": { "chromeMediaSource": "desktop", "chromeMediaSourceId": e.sourceID, "maxWidth": window.screen.width, "maxHeight": window.screen.height } }, "audio": !1 }; navigator.mediaDevices.getUserMedia(r).then(function (e) { t(!0, e) }).catch(function (e) { A.logger.error("ze.sse.1 " + e), t(!1, null, { "code": u.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kScreenFailedError.code, "message": u.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kScreenFailedError.message + " " + e }) }) }, A.prototype.startPreview = function (e, t, A, r, i) { var o = this, n = null; return n = new C.ZegoPreview(this.logger, this.streamCenter.ac, this.stateCenter, this.streamCenter, t), this.streamCenter.previewStreamList.push(n), n.startPreview(e, function (r) { o.streamCenter.soundLevelDelegate && (null == n || n.startSoundLevel()), "camera" === t && (!1 === (null == e ? void 0 : e.audio) && n && (n.hasMicTrack = !1), (null == n ? void 0 : n.micTrack) && (n.micTrack.enabled = o.streamCenter.isMicEnabled)), (null == e ? void 0 : e.videoOptimizationMode) && o.streamCenter.setVideoTrackContentHint(r, null == e ? void 0 : e.videoOptimizationMode), o.logger.debug("zsc.sp.0 call success"), !o.stateCenter.deviceInfos && o.recordDevices(), A && A(r) }, function (e) { o.streamCenter.previewStreamList = o.streamCenter.previewStreamList.filter(function (e) { return e !== n }), r && r(e) }, i), !0 }, A.prototype.stopPreview = function (e) { if (!e) return this.logger.warn("zsc.sp.0 localStream null"), !1; for (var t in this.streamCenter.publisherList) this.streamCenter.publisherList[t].localStream === e && (this.streamCenter.publisherList[t].localStream = null); var A = this.streamCenter.checkPreview(e); return A ? (A.previewSuc && (A.stopPreview(), this.streamCenter.removePreview(A)), !0) : (this.logger.warn("zsc.sp.0 no preview"), !1) }, A.prototype.recordDevices = function (e, t) { var A, r = this; this.logger.info("zsc.rd.0 call"), l.ClientUtil.getDevices(function (t) { r.stateCenter.deviceInfos = { "microphones": t.microphones, "speakers": t.speakers, "cameras": t.cameras }, e && e(t) }, function (e) { r.logger.warn("zsc.rd.0 getDevices err:", e), t && t(e) }), void 0 !== (null === (A = navigator.mediaDevices) || void 0 === A ? void 0 : A.ondevicechange) && (navigator.mediaDevices.ondevicechange = null, navigator.mediaDevices.ondevicechange = function (e) { r.logger.info("zsc.rd.0 devicechange"), r.stateCenter.deviceChangeTimer && (clearTimeout(r.stateCenter.deviceChangeTimer), r.stateCenter.deviceChangeTimer = null), r.stateCenter.deviceChangeTimer = setTimeout(function () { l.ClientUtil.getDevices(function (e) { var t, A, o, c, g, l, h = [], C = []; if ("safari" == r.stateCenter.browser && 1 === (null === (A = null === (t = r.stateCenter.deviceInfos) || void 0 === t ? void 0 : t.cameras) || void 0 === A ? void 0 : A.length) && "" === (null === (o = r.stateCenter.deviceInfos) || void 0 === o ? void 0 : o.cameras[0].deviceID)) r.logger.info("zsc.rd.0 cameras not accurate"); else { for (var I = function d(t) { var A = r.stateCenter.deviceInfos.cameras[t]; e.cameras.find(function (e) { return e.deviceID === A.deviceID }) || h.push(A) }, E = 0; E < r.stateCenter.deviceInfos.cameras.length; E++)I(E); r.stateCenter.deviceStateOut = !1; var p = !1; h.length > 0 && (p = !0), h.forEach(function (e) { for (var t in r.streamCenter.publisherList) { var A = r.streamCenter.publisherList[t], i = A.publisher; A.localStream && "" !== A.cameraLabel && A.cameraLabel === e.deviceName && (p = !1, i.sendStreamStatus(-6, i.mic_status), r.stateCenter.actionListener("_deviceError", d.errorCodeList.DEVICE_ERROR_TYPE_UNPLUGGED.code, e.deviceName, "camera"), r.stateCenter.actionListener("deviceError", d.errorCodeList.DEVICE_ERROR_TYPE_UNPLUGGED.code, e.deviceName)), A.localStream && 0 === A.localStream.getAudioTracks().length && (p = !1) } p && (r.stateCenter.deviceStateOut = !0), r.deviceInterruptReport(0, e, "camera"), r.stateCenter.actionListener("videoDeviceStateChanged", "DELETE", e) }), e.cameras.filter(function (e) { return !r.stateCenter.deviceInfos.cameras.find(function (t) { return t.deviceID === e.deviceID }) }).forEach(function (e) { r.deviceInterruptReport(1, e, "camera"), r.stateCenter.actionListener("videoDeviceStateChanged", "ADD", e) }) } "safari" == r.stateCenter.browser && 1 === (null === (g = null === (c = r.stateCenter.deviceInfos) || void 0 === c ? void 0 : c.microphones) || void 0 === g ? void 0 : g.length) && "" === (null === (l = r.stateCenter.deviceInfos) || void 0 === l ? void 0 : l.microphones[0].deviceID) ? r.logger.info("zsc.rd.0 microphones not accurate") : ((C = r.stateCenter.deviceInfos.microphones.filter(function (t) { return !e.microphones.find(function (e) { return e.deviceID === t.deviceID }) })).forEach(function (e) { for (var t in r.streamCenter.publisherList) { var A = r.streamCenter.publisherList[t], i = A.publisher; A.localStream && "" !== A.microLabel && (A.microLabel === e.deviceName || "" !== A.microLabel && A.microLabel.includes(e.deviceName)) && (i.sendStreamStatus(i.camera_status, -6), r.stateCenter.actionListener("_deviceError", d.errorCodeList.DEVICE_ERROR_TYPE_UNPLUGGED.code, r.streamCenter.publisherList[t].microLabel, "micro"), r.stateCenter.actionListener("deviceError", d.errorCodeList.DEVICE_ERROR_TYPE_UNPLUGGED.code, r.streamCenter.publisherList[t].microLabel)) } r.deviceInterruptReport(0, e, "micro"), r.stateCenter.actionListener("audioDeviceStateChanged", "DELETE", "Input", e) }), e.microphones.filter(function (e) { return !r.stateCenter.deviceInfos.microphones.find(function (t) { return t.deviceID === e.deviceID }) }).forEach(function (e) { r.deviceInterruptReport(1, e, "micro"), r.stateCenter.actionListener("audioDeviceStateChanged", "ADD", "Input", e) })); var f = r.stateCenter.deviceInfos.speakers.filter(function (t) { return !e.speakers.find(function (e) { return e.deviceID === t.deviceID }) }), B = e.speakers.filter(function (e) { return !r.stateCenter.deviceInfos.speakers.find(function (t) { return t.deviceID === e.deviceID }) }); f.forEach(function (e) { var t = r.stateCenter.reporter.createSpan(a.TRACER_LEVEL.H, { "key": u.ZegoRTCLogEvent.kZMInitSetting.event }, { "key": "" }, u.ZegoRTCLogEvent.kZegoTaskAudioOutputChanged.event); t.setAttributes({ "reason_type": u.ZegoRTCLogEvent.kZegoTaskAudioOutputChanged.reason_type("delete"), "device": u.ZegoRTCLogEvent.kZegoTaskAudioOutputChanged.device(e.deviceID), "device_name": u.ZegoRTCLogEvent.kZegoTaskAudioOutputChanged.device(e.deviceName) }), t.end(), r.stateCenter.actionListener("audioDeviceStateChanged", "DELETE", "Output", e) }), B.forEach(function (e) { var t = r.stateCenter.reporter.createSpan(a.TRACER_LEVEL.H, { "key": u.ZegoRTCLogEvent.kZMInitSetting.event }, { "key": "" }, u.ZegoRTCLogEvent.kZegoTaskAudioOutputChanged.event); t.setAttributes({ "reason_type": u.ZegoRTCLogEvent.kZegoTaskAudioOutputChanged.reason_type("add"), "device": u.ZegoRTCLogEvent.kZegoTaskAudioOutputChanged.device(e.deviceID), "device_name": u.ZegoRTCLogEvent.kZegoTaskAudioOutputChanged.device(e.deviceName) }), t.end(), r.stateCenter.actionListener("audioDeviceStateChanged", "ADD", "Output", e) }); var _ = i({}, r.stateCenter.deviceInfos); if (r.stateCenter.deviceInfos = { "microphones": e.microphones, "speakers": e.speakers, "cameras": e.cameras }, r.stateCenter.autoSwitchDeviceSetting.microphone) { var m = r.stateCenter.deviceInfos.microphones; C && 0 !== C.length && 0 != m.length && r.streamCenter.previewStreamList.forEach(function (e) { return n(r, void 0, void 0, function () { var t, A, r, i, o, n, a; return s(this, function (s) { switch (s.label) { case 0: return t = e.localStream, A = m[0].deviceID, i = null == (r = e.audioTrack) ? void 0 : r.getSettings().deviceId, o = !1, i && "default" === i ? (n = _.microphones.find(function (e) { return "default" === e.deviceID }).deviceName, a = m.find(function (e) { return "default" === e.deviceID }).deviceName, o = a !== n) : "" !== i && (o = C.some(function (e) { return e.deviceID === i })), t && o && "" !== A ? [4, this.zegoWebRtc.useAudioDevice(t, A)] : [3, 2]; case 1: s.sent(), s.label = 2; case 2: return [2] } }) }) }) } if (r.stateCenter.autoSwitchDeviceSetting.camera) { var Q = r.stateCenter.deviceInfos.cameras; h && 0 !== h.length && 0 != Q.length && r.streamCenter.previewStreamList.forEach(function (e) { return n(r, void 0, void 0, function () { var t, A, r, i, o, n, a; return s(this, function (s) { switch (s.label) { case 0: return t = e.localStream, A = Q[0].deviceID, i = null == (r = e.videoTrack) ? void 0 : r.getSettings().deviceId, o = !1, i && "default" === i ? (n = _.cameras.find(function (e) { return "default" === e.deviceID }).deviceName, a = Q.find(function (e) { return "default" === e.deviceID }).deviceName, o = a !== n) : "" !== i && (o = h.some(function (e) { return e.deviceID === i })), t && o && "" !== A ? [4, this.zegoWebRtc.useVideoDevice(t, A)] : [3, 2]; case 1: s.sent(), s.label = 2; case 2: return [2] } }) }) }) } }, function (e) { r.logger.warn("zsc.rd.0 getDevices err:", e) }) }, 500) }) }, A.prototype.getStreamStats = function (e) { var t, A, r; return this.logger.info(c.ZEGO_WEBRTC_ACTION.DESTROY_STREAM + " call"), e instanceof MediaStream && e.getTracks().length > 0 ? r = null === (t = this.streamCenter.checkPublish(e)) || void 0 === t ? void 0 : t.publisher : "string" == typeof e && (r = null === (A = this.streamCenter.publisherList[e]) || void 0 === A ? void 0 : A.publisher), r ? (null == r ? void 0 : r.currentQuality) || null : (this.logger.error("zsc.sp.0 stream is not publishing"), null) }, A.prototype.startWaitPublish = function () { var e = this; this.streamCenter.waitPublishList.forEach(function (t) { e.streamCenter.startPublishingStream(t, e.stateCenter.useNetAgent) }), this.streamCenter.waitPublishList = [] }, A.prototype.deviceInterruptReport = function (e, t, A) { var r = "camera" === A ? u.ZegoRTCLogEvent.kZegoVideoDeviceChanged : u.ZegoRTCLogEvent.kZegoAudioDeviceChanged, i = this.stateCenter.reporter.createSpan(a.TRACER_LEVEL.H, { "key": u.ZegoRTCLogEvent.kZMInitSetting.event }, { "key": "" }, r.event); i.setAttributes({ "changed_type": r.interrupt(e), "device": r.device(t.deviceID), "device_name": r.device_name(t.deviceName) }), i.end() }, A }(); t.PublishModule = m }, "4857": function _(A, r, o) { "use strict"; var n, s = this && this.__extends || (n = function i(e, t) { return (n = Object.setPrototypeOf || { "__proto__": [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var A in t) Object.prototype.hasOwnProperty.call(t, A) && (e[A] = t[A]) })(e, t) }, function (e, A) { if ("function" != typeof A && null !== A) throw new TypeError("Class extends value " + String(A) + " is not a constructor or null"); function t() { this.constructor = e } n(e, A), e.prototype = null === A ? Object.create(A) : (t.prototype = A.prototype, new t) }), a = this && this.__awaiter || function (e, t, A, r) { return new (A || (A = Promise))(function (i, o) { function n(e) { try { a(r.next(e)) } catch (e) { o(e) } } function s(e) { try { a(r.throw(e)) } catch (e) { o(e) } } function a(e) { var t; e.done ? i(e.value) : (t = e.value, t instanceof A ? t : new A(function (e) { e(t) })).then(n, s) } a((r = r.apply(e, t || [])).next()) }) }, c = this && this.__generator || function (e, t) { var A, r, i, o, n = { "label": 0, "sent": function sent() { if (1 & i[0]) throw i[1]; return i[1] }, "trys": [], "ops": [] }; return o = { "next": s(0), "throw": s(1), "return": s(2) }, "function" == typeof Symbol && (o[Symbol.iterator] = function () { return this }), o; function s(s) { return function (a) { return function (s) { if (A) throw new TypeError("Generator is already executing."); for (; o && (o = 0, s[0] && (n = 0)), n;)try { if (A = 1, r && (i = 2 & s[0] ? r.return : s[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, s[1])).done) return i; switch (r = 0, i && (s = [2 & s[0], i.value]), s[0]) { case 0: case 1: i = s; break; case 4: return n.label++, { "value": s[1], "done": !1 }; case 5: n.label++, r = s[1], s = [0]; continue; case 7: s = n.ops.pop(), n.trys.pop(); continue; default: if (!((i = (i = n.trys).length > 0 && i[i.length - 1]) || 6 !== s[0] && 2 !== s[0])) { n = 0; continue } if (3 === s[0] && (!i || s[1] > i[0] && s[1] < i[3])) { n.label = s[1]; break } if (6 === s[0] && n.label < i[1]) { n.label = i[1], i = s; break } if (i && n.label < i[2]) { n.label = i[2], n.ops.push(s); break } i[2] && n.ops.pop(), n.trys.pop(); continue }s = t.call(e, n) } catch (e) { s = [6, e], r = 0 } finally { A = i = 0 } if (5 & s[0]) throw s[1]; return { "value": s[0] ? s[1] : void 0, "done": !0 } }([s, a]) } } }; Object.defineProperty(r, "__esModule", { "value": !0 }), r.VideoDestinationNode = void 0; var g = o(8250), u = o(1807).ErrorUtil.createError, l = function (t) { function e(e) { var A = t.call(this) || this; return A.preview = e, A.track = null, A.replaceRemote = !0, A } return s(e, t), e.prototype.setReplaceRemote = function (e) { void 0 === e && (e = !0), this.replaceRemote = e }, e.prototype.setInput = function (e) { return a(this, void 0, void 0, function () { var t; return c(this, function (A) { if (null == e) return [2]; if (!this.preview.localStream) throw u({ "code": -1, "message": "preview haven't been inited." }); return this.track = e, this.preview.localStream.getVideoTracks()[0] !== e && (t = this.preview.streamCenter.getPublishList(this.preview.localStream), this.replaceRemote && 0 !== t.length ? t.map(function (e) { return e.publisher }).forEach(function (t) { t && t.previewer && t.replacePublishedTrack(e, !0) }) : this.preview.replacePreviewTrack(e, !0)), [2] }) }) }, Object.defineProperty(e.prototype, "output", { "get": function get() { return this.track }, "enumerable": !1, "configurable": !0 }), e.prototype.connect = function (e) { return a(this, void 0, void 0, function () { return c(this, function (e) { throw u({ "code": -1, "message": "video destination node cann't connect any video node." }) }) }) }, e.prototype.disconnect = function () { return a(this, void 0, void 0, function () { return c(this, function (e) { throw u({ "code": -1, "message": "video destination node cann't disconnect any video node." }) }) }) }, e }(g.VideoNode); r.VideoDestinationNode = l }, "8250": function _(e, t) { "use strict"; var r = this && this.__awaiter || function (e, t, A, r) { return new (A || (A = Promise))(function (i, o) { function n(e) { try { a(r.next(e)) } catch (e) { o(e) } } function s(e) { try { a(r.throw(e)) } catch (e) { o(e) } } function a(e) { var t; e.done ? i(e.value) : (t = e.value, t instanceof A ? t : new A(function (e) { e(t) })).then(n, s) } a((r = r.apply(e, t || [])).next()) }) }, i = this && this.__generator || function (e, t) { var A, r, i, o, n = { "label": 0, "sent": function sent() { if (1 & i[0]) throw i[1]; return i[1] }, "trys": [], "ops": [] }; return o = { "next": s(0), "throw": s(1), "return": s(2) }, "function" == typeof Symbol && (o[Symbol.iterator] = function () { return this }), o; function s(s) { return function (a) { return function (s) { if (A) throw new TypeError("Generator is already executing."); for (; o && (o = 0, s[0] && (n = 0)), n;)try { if (A = 1, r && (i = 2 & s[0] ? r.return : s[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, s[1])).done) return i; switch (r = 0, i && (s = [2 & s[0], i.value]), s[0]) { case 0: case 1: i = s; break; case 4: return n.label++, { "value": s[1], "done": !1 }; case 5: n.label++, r = s[1], s = [0]; continue; case 7: s = n.ops.pop(), n.trys.pop(); continue; default: if (!((i = (i = n.trys).length > 0 && i[i.length - 1]) || 6 !== s[0] && 2 !== s[0])) { n = 0; continue } if (3 === s[0] && (!i || s[1] > i[0] && s[1] < i[3])) { n.label = s[1]; break } if (6 === s[0] && n.label < i[1]) { n.label = i[1], i = s; break } if (i && n.label < i[2]) { n.label = i[2], n.ops.push(s); break } i[2] && n.ops.pop(), n.trys.pop(); continue }s = t.call(e, n) } catch (e) { s = [6, e], r = 0 } finally { A = i = 0 } if (5 & s[0]) throw s[1]; return { "value": s[0] ? s[1] : void 0, "done": !0 } }([s, a]) } } }; Object.defineProperty(t, "__esModule", { "value": !0 }), t.VideoNode = void 0; var o = function () { function A() { } return A.prototype.connect = function (e) { return r(this, void 0, void 0, function () { return i(this, function (t) { switch (t.label) { case 0: return this.next = e, this.output ? [4, e.setInput(this.output)] : [3, 2]; case 1: t.sent(), t.label = 2; case 2: return [2, e] } }) }) }, A.prototype.disconnect = function () { return r(this, void 0, void 0, function () { return i(this, function (e) { switch (e.label) { case 0: return this.next ? [4, this.next.setInput(null)] : [3, 2]; case 1: e.sent(), this.next = void 0, e.label = 2; case 2: return [2] } }) }) }, A }(); t.VideoNode = o }, "334": function _(e, t, r) { "use strict"; var i = this && this.__awaiter || function (e, t, A, r) { return new (A || (A = Promise))(function (i, o) { function n(e) { try { a(r.next(e)) } catch (e) { o(e) } } function s(e) { try { a(r.throw(e)) } catch (e) { o(e) } } function a(e) { var t; e.done ? i(e.value) : (t = e.value, t instanceof A ? t : new A(function (e) { e(t) })).then(n, s) } a((r = r.apply(e, t || [])).next()) }) }, o = this && this.__generator || function (e, t) { var A, r, i, o, n = { "label": 0, "sent": function sent() { if (1 & i[0]) throw i[1]; return i[1] }, "trys": [], "ops": [] }; return o = { "next": s(0), "throw": s(1), "return": s(2) }, "function" == typeof Symbol && (o[Symbol.iterator] = function () { return this }), o; function s(s) { return function (a) { return function (s) { if (A) throw new TypeError("Generator is already executing."); for (; o && (o = 0, s[0] && (n = 0)), n;)try { if (A = 1, r && (i = 2 & s[0] ? r.return : s[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, s[1])).done) return i; switch (r = 0, i && (s = [2 & s[0], i.value]), s[0]) { case 0: case 1: i = s; break; case 4: return n.label++, { "value": s[1], "done": !1 }; case 5: n.label++, r = s[1], s = [0]; continue; case 7: s = n.ops.pop(), n.trys.pop(); continue; default: if (!((i = (i = n.trys).length > 0 && i[i.length - 1]) || 6 !== s[0] && 2 !== s[0])) { n = 0; continue } if (3 === s[0] && (!i || s[1] > i[0] && s[1] < i[3])) { n.label = s[1]; break } if (6 === s[0] && n.label < i[1]) { n.label = i[1], i = s; break } if (i && n.label < i[2]) { n.label = i[2], n.ops.push(s); break } i[2] && n.ops.pop(), n.trys.pop(); continue }s = t.call(e, n) } catch (e) { s = [6, e], r = 0 } finally { A = i = 0 } if (5 & s[0]) throw s[1]; return { "value": s[0] ? s[1] : void 0, "done": !0 } }([s, a]) } } }; Object.defineProperty(t, "__esModule", { "value": !0 }), t.VideoNodeQueue = void 0; var n = r(6426), s = function () { function A(e, t) { this.source = e, this.destination = t, this.videoNodeList = [], this.source.connect(this.destination) } return Object.defineProperty(A.prototype, "lastNode", { "get": function get() { return this.isEmpty() ? null : this.videoNodeList[this.videoNodeList.length - 1] }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "secondToLastNode", { "get": function get() { return this.videoNodeList.length < 2 ? null : this.videoNodeList[this.videoNodeList.length - 2] }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "firstNode", { "get": function get() { return this.isEmpty() ? null : this.videoNodeList[0] }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "secondNode", { "get": function get() { return this.videoNodeList.length < 2 ? null : this.videoNodeList[1] }, "enumerable": !1, "configurable": !0 }), A.prototype.pushBack = function (e) { return i(this, void 0, void 0, function () { return o(this, function (t) { switch (t.label) { case 0: return this.lastNode ? [4, this.lastNode.connect(e)] : [3, 3]; case 1: return t.sent(), [4, e.connect(this.destination)]; case 2: return t.sent(), [3, 6]; case 3: return [4, this.source.connect(e)]; case 4: return t.sent(), [4, e.connect(this.destination)]; case 5: t.sent(), t.label = 6; case 6: return this.videoNodeList.push(e), [2] } }) }) }, A.prototype.popBack = function () { return i(this, void 0, void 0, function () { return o(this, function (e) { switch (e.label) { case 0: return this.lastNode ? [4, this.lastNode.disconnect()] : [3, 7]; case 1: return e.sent(), this.secondToLastNode ? [4, this.secondToLastNode.disconnect()] : [3, 4]; case 2: return e.sent(), [4, this.secondToLastNode.connect(this.destination)]; case 3: return e.sent(), [3, 7]; case 4: return [4, this.source.disconnect()]; case 5: return e.sent(), [4, this.source.connect(this.destination)]; case 6: e.sent(), e.label = 7; case 7: return this.videoNodeList.pop(), [2] } }) }) }, A.prototype.pushFront = function (e) { return i(this, void 0, void 0, function () { return o(this, function (t) { switch (t.label) { case 0: return [4, this.source.disconnect()]; case 1: return t.sent(), [4, this.source.connect(e)]; case 2: return t.sent(), this.firstNode ? [4, e.connect(this.firstNode)] : [3, 4]; case 3: return t.sent(), [3, 6]; case 4: return [4, e.connect(this.destination)]; case 5: t.sent(), t.label = 6; case 6: return this.videoNodeList.unshift(e), [2] } }) }) }, A.prototype.popFront = function () { return i(this, void 0, void 0, function () { return o(this, function (e) { switch (e.label) { case 0: return [4, this.source.disconnect()]; case 1: return e.sent(), this.firstNode ? [4, this.firstNode.disconnect()] : [3, 6]; case 2: return e.sent(), this.secondNode ? [4, this.source.connect(this.secondNode)] : [3, 4]; case 3: return e.sent(), [3, 6]; case 4: return [4, this.source.connect(this.destination)]; case 5: e.sent(), e.label = 6; case 6: return this.videoNodeList.shift(), [2] } }) }) }, A.prototype.remove = function (e) { return i(this, void 0, void 0, function () { var t, A; return o(this, function (r) { switch (r.label) { case 0: return -1 === (t = this.videoNodeList.indexOf(e)) ? [3, 13] : [4, e.disconnect()]; case 1: return r.sent(), t - 1 >= 0 ? [4, (A = this.videoNodeList[t - 1]).disconnect()] : [3, 7]; case 2: return r.sent(), this.lastNode == e ? [3, 4] : [4, A.connect(this.videoNodeList[t + 1])]; case 3: return r.sent(), [3, 6]; case 4: return [4, A.connect(this.destination)]; case 5: r.sent(), r.label = 6; case 6: return [3, 12]; case 7: return [4, this.source.disconnect()]; case 8: return r.sent(), this.lastNode == e ? [3, 10] : [4, this.source.connect(this.videoNodeList[t + 1])]; case 9: return r.sent(), [3, 12]; case 10: return [4, this.source.connect(this.destination)]; case 11: r.sent(), r.label = 12; case 12: this.videoNodeList.splice(t, 1), r.label = 13; case 13: return [2] } }) }) }, A.prototype.isConnected = function (e) { return -1 !== this.videoNodeList.indexOf(e) }, A.prototype.isEmpty = function () { return 0 === this.videoNodeList.length }, A.prototype.getSourceTrack = function () { return this.source.output }, A.prototype.getDestinationTrack = function () { return this.destination.output }, A.prototype.replaceNewSourceByTrack = function (e, t) { return void 0 === t && (t = !0), i(this, void 0, void 0, function () { return o(this, function (A) { switch (A.label) { case 0: return [4, this.replaceSource(new n.VideoSourceNode(e), t)]; case 1: return A.sent(), [2] } }) }) }, A.prototype.replaceSource = function (e, t) { return void 0 === t && (t = !0), i(this, void 0, void 0, function () { return o(this, function (A) { switch (A.label) { case 0: return this.destination.setReplaceRemote(t), [4, this.source.disconnect()]; case 1: return A.sent(), this.firstNode ? [4, e.connect(this.firstNode)] : [3, 3]; case 2: return A.sent(), [3, 5]; case 3: return [4, e.connect(this.destination)]; case 4: A.sent(), A.label = 5; case 5: return this.source = e, this.destination.setReplaceRemote(), [2] } }) }) }, A.prototype.replaceDestination = function (e) { return i(this, void 0, void 0, function () { return o(this, function (t) { switch (t.label) { case 0: return this.lastNode ? [4, this.lastNode.disconnect()] : [3, 3]; case 1: return t.sent(), [4, this.lastNode.connect(e)]; case 2: return t.sent(), [3, 6]; case 3: return [4, this.source.disconnect()]; case 4: return t.sent(), [4, this.source.connect(e)]; case 5: t.sent(), t.label = 6; case 6: return this.destination = e, [2] } }) }) }, A.prototype.destroy = function () { for (var e = 0; e < this.videoNodeList.length; e++)this.videoNodeList[e].disconnect() }, A }(); t.VideoNodeQueue = s }, "6426": function _(A, r, o) { "use strict"; var n, s = this && this.__extends || (n = function i(e, t) { return (n = Object.setPrototypeOf || { "__proto__": [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var A in t) Object.prototype.hasOwnProperty.call(t, A) && (e[A] = t[A]) })(e, t) }, function (e, A) { if ("function" != typeof A && null !== A) throw new TypeError("Class extends value " + String(A) + " is not a constructor or null"); function t() { this.constructor = e } n(e, A), e.prototype = null === A ? Object.create(A) : (t.prototype = A.prototype, new t) }), a = this && this.__awaiter || function (e, t, A, r) { return new (A || (A = Promise))(function (i, o) { function n(e) { try { a(r.next(e)) } catch (e) { o(e) } } function s(e) { try { a(r.throw(e)) } catch (e) { o(e) } } function a(e) { var t; e.done ? i(e.value) : (t = e.value, t instanceof A ? t : new A(function (e) { e(t) })).then(n, s) } a((r = r.apply(e, t || [])).next()) }) }, c = this && this.__generator || function (e, t) { var A, r, i, o, n = { "label": 0, "sent": function sent() { if (1 & i[0]) throw i[1]; return i[1] }, "trys": [], "ops": [] }; return o = { "next": s(0), "throw": s(1), "return": s(2) }, "function" == typeof Symbol && (o[Symbol.iterator] = function () { return this }), o; function s(s) { return function (a) { return function (s) { if (A) throw new TypeError("Generator is already executing."); for (; o && (o = 0, s[0] && (n = 0)), n;)try { if (A = 1, r && (i = 2 & s[0] ? r.return : s[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, s[1])).done) return i; switch (r = 0, i && (s = [2 & s[0], i.value]), s[0]) { case 0: case 1: i = s; break; case 4: return n.label++, { "value": s[1], "done": !1 }; case 5: n.label++, r = s[1], s = [0]; continue; case 7: s = n.ops.pop(), n.trys.pop(); continue; default: if (!((i = (i = n.trys).length > 0 && i[i.length - 1]) || 6 !== s[0] && 2 !== s[0])) { n = 0; continue } if (3 === s[0] && (!i || s[1] > i[0] && s[1] < i[3])) { n.label = s[1]; break } if (6 === s[0] && n.label < i[1]) { n.label = i[1], i = s; break } if (i && n.label < i[2]) { n.label = i[2], n.ops.push(s); break } i[2] && n.ops.pop(), n.trys.pop(); continue }s = t.call(e, n) } catch (e) { s = [6, e], r = 0 } finally { A = i = 0 } if (5 & s[0]) throw s[1]; return { "value": s[0] ? s[1] : void 0, "done": !0 } }([s, a]) } } }; Object.defineProperty(r, "__esModule", { "value": !0 }), r.VideoSourceNode = void 0; var g = o(8250), u = o(1807).ErrorUtil.createError, l = function (t) { function e(e) { var A = t.call(this) || this; return A.track = e, A } return s(e, t), Object.defineProperty(e.prototype, "output", { "get": function get() { return this.track }, "enumerable": !1, "configurable": !0 }), e.prototype.setInput = function (e) { return a(this, void 0, void 0, function () { return c(this, function (e) { throw u({ "code": -1, "message": "Can not set track input to VideoSourceNode" }) }) }) }, e.prototype.process = function () { }, e.prototype.destory = function () { this.track && this.track.stop() }, e }(g.VideoNode); r.VideoSourceNode = l }, "7436": function _(e, t, r) { "use strict"; var i = this && this.__assign || function () { return (i = Object.assign || function (e) { for (var t, A = 1, r = arguments.length; A < r; A++)for (var i in t = arguments[A]) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]); return e }).apply(this, arguments) }, o = this && this.__awaiter || function (e, t, A, r) { return new (A || (A = Promise))(function (i, o) { function n(e) { try { a(r.next(e)) } catch (e) { o(e) } } function s(e) { try { a(r.throw(e)) } catch (e) { o(e) } } function a(e) { var t; e.done ? i(e.value) : (t = e.value, t instanceof A ? t : new A(function (e) { e(t) })).then(n, s) } a((r = r.apply(e, t || [])).next()) }) }, n = this && this.__generator || function (e, t) { var A, r, i, o, n = { "label": 0, "sent": function sent() { if (1 & i[0]) throw i[1]; return i[1] }, "trys": [], "ops": [] }; return o = { "next": s(0), "throw": s(1), "return": s(2) }, "function" == typeof Symbol && (o[Symbol.iterator] = function () { return this }), o; function s(s) { return function (a) { return function (s) { if (A) throw new TypeError("Generator is already executing."); for (; o && (o = 0, s[0] && (n = 0)), n;)try { if (A = 1, r && (i = 2 & s[0] ? r.return : s[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, s[1])).done) return i; switch (r = 0, i && (s = [2 & s[0], i.value]), s[0]) { case 0: case 1: i = s; break; case 4: return n.label++, { "value": s[1], "done": !1 }; case 5: n.label++, r = s[1], s = [0]; continue; case 7: s = n.ops.pop(), n.trys.pop(); continue; default: if (!((i = (i = n.trys).length > 0 && i[i.length - 1]) || 6 !== s[0] && 2 !== s[0])) { n = 0; continue } if (3 === s[0] && (!i || s[1] > i[0] && s[1] < i[3])) { n.label = s[1]; break } if (6 === s[0] && n.label < i[1]) { n.label = i[1], i = s; break } if (i && n.label < i[2]) { n.label = i[2], n.ops.push(s); break } i[2] && n.ops.pop(), n.trys.pop(); continue }s = t.call(e, n) } catch (e) { s = [6, e], r = 0 } finally { A = i = 0 } if (5 & s[0]) throw s[1]; return { "value": s[0] ? s[1] : void 0, "done": !0 } }([s, a]) } } }; Object.defineProperty(t, "__esModule", { "value": !0 }), t.ZegoPreview = void 0; var s = r(5123), a = r(1586), c = r(93), g = r(6607), u = r(4259), l = r(334), h = r(6426), d = r(4857), C = r(3309), I = function () { function A(e, t, A, r, i) { var o = this; this.logger = e, this.ac = t, this.stateCenter = A, this.streamCenter = r, this.previewType = i, this.localStream = null, this.videoInfo = {}, this.rtcViewer = null, this.streamFromCanvas = !1, this.streamFromCanvasTrack = null, this.previewSuc = !1, this.soundLevel = 0, this.hasEmptyAudioTrack = !1, this._emptyAudioTrack = null, this.script = null, this.mic = null, this._audioTrack = null, this._videoTrack = null, this.cloneVideoTrack = null, this.originVideoTrack = null, this.originAudioTrack = null, this.activateSEIConfig = null, this.isAudioEnabled = !0, this.isVideoEnabled = !0, this.gainNode = null, this.cameraMaxResolution = {}, this.enableDualStream = !1, this.lowStreamConfig = { "width": 160, "height": 120, "frameRate": 15, "bitRate": 50 }, this.muteImage = null, this.hasMicTrack = !0, this.enableMicrophoneOnly = function (e, t) { if (!o.localStream) return o.logger.error("zp.em.2 no localStream"), !1; var A = t.getPublishList(o.localStream).map(function (e) { return e.publisher }); return A.length && A.forEach(function (t) { t.sendStreamStatus(t.camera_status, o.isAudioEnabled && e ? 0 : 2) }), o.micTrack ? (o.micTrack.enabled = o.isAudioEnabled && e, o.logger.debug("zp.emo.2 call success"), !0) : (o.logger.info("zp.emo.2 no micTrack"), !0) }, this.soundMeterWorklet = null, this.audioMixManager = null } return A.prototype.getEmptyAudioTrack = function () { if (!this._emptyAudioTrack) { var e = this.streamCenter.ac.createMediaStreamDestination(), t = e ? e.stream : null, A = this._emptyAudioTrack = t ? t.getAudioTracks()[0] : null; this.logger.info("zp.geat " + "empty audio id: ".concat(null == A ? void 0 : A.id)) } return this._emptyAudioTrack }, Object.defineProperty(A.prototype, "audioTrack", { "get": function get() { var e; return this._audioTrack || (null === (e = this.localStream) || void 0 === e ? void 0 : e.getAudioTracks()[0]) || null }, "set": function set(e) { this._audioTrack = e }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "videoTrack", { "get": function get() { var e; return this._videoTrack || (null === (e = this.localStream) || void 0 === e ? void 0 : e.getVideoTracks()[0]) || null }, "set": function set(e) { this._videoTrack = e }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "videoNodeQueue", { "get": function get() { if (!this._videoNodeQueue) { if (!this._videoTrack) throw new Error("cannot use video node queue, because videoTrack of previewer haven't been inited."); var e = new h.VideoSourceNode(this._videoTrack), t = new d.VideoDestinationNode(this); this._videoNodeQueue = new l.VideoNodeQueue(e, t) } return this._videoNodeQueue }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "isVideoNodeQueueEnabled", { "get": function get() { return !!this._videoNodeQueue }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "micTrack", { "get": function get() { return this.hasMicTrack && "camera" === this.previewType && this.audioTrack || null }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "isVideoEffectStarting", { "get": function get() { return !!this.videoEffect && this.videoEffect.isStarting }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "isVideoEffectEnabled", { "get": function get() { return !!this.videoEffect && this.videoEffect.enabled }, "enumerable": !1, "configurable": !0 }), A.prototype.getMediaStreamConstraints = function (e, t) { var A = { "audio": null, "video": null }; if (A.audio = !0, A.video = { "width": this.stateCenter.settingConfig.getSetting("camera_width") || 640, "height": this.stateCenter.settingConfig.getSetting("camera_height") || 480, "frameRate": this.stateCenter.settingConfig.getSetting("camera_framerate") || 15, "bitRate": this.stateCenter.settingConfig.getSetting("camera_video_bitrate") }, e.audio ? void 0 === e.audioInput && void 0 === e.ANS && void 0 === e.AGC && void 0 === e.AEC && void 0 === e.channelCount ? (A.audio = {}, A.audio.noiseSuppression = this.stateCenter.settingConfig.getSetting("ANS"), A.audio.autoGainControl = this.stateCenter.settingConfig.getSetting("AGC"), A.audio.echoCancellation = this.stateCenter.settingConfig.getSetting("AEC"), A.audio.channelCount = 1) : (A.audio = {}, e.audioInput && "undefined" !== e.audioInput && (A.audio.deviceId = { "exact": e.audioInput }), void 0 !== e.ANS && (A.audio.noiseSuppression = e.ANS), void 0 !== e.AGC && (A.audio.autoGainControl = e.AGC), void 0 !== e.AEC && (A.audio.echoCancellation = e.AEC), void 0 !== e.channelCount && (A.audio.channelCount = e.channelCount)) : !1 === e.audio && (A.audio = !1), e.video) { var r = 640, i = 480, o = 15, n = this.stateCenter.settingConfig.getSetting("camera_video_bitrate"); if (1 === e.videoQuality ? (r = s.ENUM_RESOLUTION_TYPE.LOW.width, i = s.ENUM_RESOLUTION_TYPE.LOW.height, o = s.ENUM_RESOLUTION_TYPE.LOW.frameRate, n = s.ENUM_RESOLUTION_TYPE.LOW.bitRate) : 2 === e.videoQuality ? (r = s.ENUM_RESOLUTION_TYPE.MEDIUM.width, i = s.ENUM_RESOLUTION_TYPE.MEDIUM.height, o = s.ENUM_RESOLUTION_TYPE.MEDIUM.frameRate, n = s.ENUM_RESOLUTION_TYPE.MEDIUM.bitRate) : 3 === e.videoQuality ? (r = s.ENUM_RESOLUTION_TYPE.HIGH.width, i = s.ENUM_RESOLUTION_TYPE.HIGH.height, o = s.ENUM_RESOLUTION_TYPE.HIGH.frameRate, n = s.ENUM_RESOLUTION_TYPE.HIGH.bitRate) : 4 === e.videoQuality ? (r = e.width || 640, i = e.height || 480, o = e.frameRate || 15, n = e.bitRate || this.stateCenter.settingConfig.getSetting("camera_video_bitrate")) : this.logger.info("zp.gmsc.2 use default"), t && !e.videoQuality && (e.width && (r = e.width), e.height && (i = e.height), e.frameRate && (o = e.frameRate), e.bitRate && (n = e.bitRate)), !1 === e.horizontal) { var a = i; i = r, r = a } !0 === e.isSwitch && (a = i, i = r, r = a), A.video = { "width": r, "height": i, "frameRate": o, "bitRate": n }, null != e.facingMode ? A.video.facingMode = e.facingMode : e.videoInput && "undefined" != e.videoInput && (A.video.deviceId = { "exact": e.videoInput }), this.logger.info("zp.gmsc.2 width: " + r + " height: " + i + " rate: " + o) } else !1 === e.video && (e.audioBitrate && (A.video = {}), A.video = !1); return A }, A.prototype.startPreview = function (e, t, A, s) { return o(this, void 0, void 0, function () { var r, o, c, g, u, l, h, d, C, I = this; return n(this, function (n) { return this.logger.debug("zp.sv.2 called"), this.mediaStreamConfig = e, void 0 === navigator.mediaDevices || null == navigator.mediaDevices.getUserMedia ? (A && A(a.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kBrowserNotSupportError), [2]) : (r = function r(e) { t(e) }, e.source instanceof MediaStream ? (o = e.source.getVideoTracks(), c = o.length > 0 ? o[0].getSettings() : { "width": 0, "height": 0, "frameRate": 0 }, this.logger.debug("zp.sv.2 use external media stream"), this.previewSuc = !0, this.localStream = e.source, this.initMediaTrack(e.source), this.videoInfo = { "width": c.width, "height": c.height, "frameRate": c.frameRate, "bitRate": e.bitRate || this.stateCenter.settingConfig.getSetting("custom_video_bitrate"), "startBitrate": e.startBitrate || this.stateCenter.settingConfig.getSetting("bitrate_mode"), "minBitrate": e.minBitrate, "keyFrameInterval": e.keyFrameInterval, "channelCount": e.channelCount || (this.audioTrack && this.audioTrack.getSettings ? this.audioTrack.getSettings().channelCount : 1), "audioBitrate": 1e3 * e.audioBitrate || 48e3 }, r && r(this.localStream), [2]) : e.source instanceof HTMLMediaElement ? ((g = this.captureStream(e.source, e)) ? (this.videoInfo.bitRate = e.bitRate || this.stateCenter.settingConfig.getSetting("custom_video_bitrate"), this.previewSuc = !0, this.initMediaTrack(g), r && r(g)) : A && A(a.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kBrowserNotSupportError), [2]) : ((u = this.getMediaStreamConstraints(e)).audio && (l = this.stateCenter.settingConfig.getSetting("AEC", !0), h = this.stateCenter.settingConfig.getSetting("AGC", !0), d = this.stateCenter.settingConfig.getSetting("ANS", !0), "boolean" == typeof l && (this.logger.info("zp.sv.2 setting AEC " + l), u.audio.echoCancellation = l), "boolean" == typeof h && (this.logger.info("zp.sv.2 setting AGC " + h), u.audio.autoGainControl = h), "boolean" == typeof d && (this.logger.info("zp.sv.2 setting ANS " + d), u.audio.noiseSuppression = d)), this.videoInfo = i(i({}, u.video), { "keyFrameInterval": e.keyFrameInterval }), this.videoInfo ? (this.videoInfo.audioBitrate = 1e3 * e.audioBitrate || 48e3, this.videoInfo.startBitrate = e.startBitrate || this.stateCenter.settingConfig.getSetting("bitrate_mode"), this.videoInfo.minBitrate = e.minBitrate, this.videoInfo.keyFrameInterval = e.keyFrameInterval) : e.audioBitrate && (this.videoInfo = { "audioBitrate": 1e3 * e.audioBitrate || 48e3 }), (C = this.stateCenter.settingConfig.getSetting("camera_audio_bitrate", !0)) && (this.videoInfo.audioBitrate = 1e3 * C), u.video instanceof Object && (u.video.width = this.stateCenter.settingConfig.getSetting("camera_width", !0) || u.video.width, u.video.height = this.stateCenter.settingConfig.getSetting("camera_height", !0) || u.video.height, u.video.frameRate = this.stateCenter.settingConfig.getSetting("camera_framerate", !0) || u.video.frameRate), this.mediaStreamConfig.video = !!u.video, this.mediaStreamConfig.audio = !!u.audio, this.logger.info("zp.sv.2 ", JSON.stringify(u)), s.setAttribute("preview_conf", a.ZegoRTCLogEvent.kZegoTaskCreateStream.preview_conf(u)), e.unlimitedCaptureResolution && u.video.width && (u.video.width = { "ideal": 4096 }, u.video.height = { "ideal": 2160 }, this.logger.info("zp.sv.2 ", "capture max resolution of camera")), navigator.mediaDevices.getUserMedia(u).then(function (t) { I.logger.info("zp.sv.2 success"), I.localStream = t, I.previewSuc = !0, I.initMediaTrack(t), I.videoInfo && (I.videoInfo.channelCount = e.channelCount || (I.audioTrack && I.audioTrack.getSettings ? I.audioTrack.getSettings().channelCount : 1)), r && r(t) }, function (e) { if (I.logger.info("zp.sv.2 failed ", e.name, " ", e.message), A) { var t = a.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kGetUserMediaError; t.message = t.message + " " + e.name + " " + e.message, "NotAllowedError" === e.name || "SecurityError" === e.name ? (t = i({}, a.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kDeviceNoAllowedError)).message = e.name + ": " + t.message : "NotReadableError" === e.name ? (t = i({}, a.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kDeviceNoReadableError)).message = e.name + ": " + t.message : "OverconstrainedError" === e.name && ((t = i({}, a.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kDeviceOverConstrainedError)).message = e.name + ": " + t.message + (e.constraint ? ". such as " + e.constraint : "")), A(t) } }), [2])) }) }) }, A.prototype.captureStream = function (e, t) { if (!e) return this.logger.info("zp.cs.2 no local video"), null; var A; if (e.captureStream) A = e.captureStream(), this.logger.debug("zp.cs.2 captureStream"); else { if (!e.mozCaptureStream) return this.logger.info("zp.cs.2 don't support"), null; A = e.mozCaptureStream(), this.logger.debug("zp.cs.2 mozCaptureStream") } return 0 == A.getTracks().length ? (this.logger.error("zp.cs.2 external capture tracks no found"), null) : (this.localStream = A, this.videoInfo = { "width": e.videoWidth, "height": e.videoHeight, "frameRate": 0, "bitRate": t.bitRate || this.stateCenter.settingConfig.getSetting("custom_video_bitrate"), "channelCount": t.channelCount || (this.audioTrack && this.audioTrack.getSettings ? this.audioTrack.getSettings().channelCount : 1), "audioBitrate": 1e3 * t.audioBitrate || 48e3, "startBitrate": t.startBitrate || this.stateCenter.settingConfig.getSetting("bitrate_mode"), "minBitrate": t.minBitrate, "keyFrameInterval": t.keyFrameInterval }, this.logger.debug("zp.cs.2 called success"), this.localStream) }, A.prototype.stopPreview = function () { var e, t, A, r, i, o, n; if (this.logger.info("zp.sv.2.1 called"), this.localStream) { var s = this.rtcViewer; s && s.destroy(), this.videoEffect && (this.videoEffect.setBeautyEffectOptions(!1), this.videoEffect.destroy()), this.backgroundProcessor && this.backgroundProcessor.release(), this._videoNodeQueue && this.videoNodeQueue.destroy(), null === (e = this.cloneVideoTrack) || void 0 === e || e.stop(), this.cloneVideoTrack = null, this.muteImageAnID && cancelAnimationFrame(this.muteImageAnID), this.stopSoundLevel(), null === (t = this.originVideoTrack) || void 0 === t || t.stop(), this.originVideoTrack = null, null === (A = this.originAudioTrack) || void 0 === A || A.stop(), null === (r = this.videoTrack) || void 0 === r || r.stop(), this.videoTrack = null, null === (i = this.audioTrack) || void 0 === i || i.stop(), C.SoundMeterWorklet.sourceDisConnect(this.localStream), null === (o = this.audioMixManager) || void 0 === o || o.stopAudioManager(), this.localStream.getTracks().forEach(function (e) { e.stop() }), this.localStream = null, null === (n = this.lowStream) || void 0 === n || n.getTracks().forEach(function (e) { return e.stop() }), this.lowStream = void 0, this.videoInfo = {} } }, A.prototype.enableMicrophone = function (e, t) { return !1 }, A.prototype.enableCamera = function (e, t, A) { return !1 }, A.prototype.enableCameraCapturing = function (e) { return o(this, void 0, void 0, function () { return n(this, function (e) { return [2, !1] }) }) }, A.prototype.startSoundLevel = function () { var e; if (this.localStream && 0 != this.localStream.getAudioTracks().length) { null === (e = this.soundMeterWorklet) || void 0 === e || e.destroy(); try { var t = this, A = this.streamCenter.createSoundLevel(this.ac, this.localStream, this.streamCenter.soundLevelInterval, function (e) { t.soundLevel = 100 * e }).mic; this.mic = A } catch (e) { this.logger.error(c.ZEGO_WEBRTC_ACTION.PUBLISHER_START_SOUND_LEVEL + " get sound level failed " + e) } } }, A.prototype.stopSoundLevel = function () { var e; this.soundLevel = 0, null === (e = this.soundMeterWorklet) || void 0 === e || e.destroy(), this.mic = null }, A.prototype.restartSoundLevel = function () { this.streamCenter.soundLevelDelegate ? (this.stopSoundLevel(), this.startSoundLevel()) : this.stopSoundLevel() }, A.prototype.setBeautyEffect = function (e, t) { return o(this, void 0, void 0, function () { return n(this, function (e) { return [2] }) }) }, A.prototype.replacePreviewTrack = function (e, t, A) { void 0 === t && (t = !1) }, A.prototype.createLowStream = function () { var e, t, A, r, i, o = null === (e = this.localStream) || void 0 === e ? void 0 : e.getVideoTracks()[0]; if (o) { var n = o.getSettings().height, s = o.getSettings().width, a = navigator.userAgent, c = "micromessenger" == a.toLowerCase().match(/MicroMessenger/i), g = a.indexOf("Android") > -1 || a.indexOf("Adr") > -1; this.logger.info("zp.cls w: " + s + " h: " + n + " " + g + " " + c); var u = "number" == typeof (null === (t = this.videoInfo) || void 0 === t ? void 0 : t.width) && "number" == typeof (null === (A = this.videoInfo) || void 0 === A ? void 0 : A.height) && n == this.videoInfo.width && s == this.videoInfo.height; if (c && g && u) { var l = n; n = s, s = l } var h = n && s ? n / s : 1; try { var d, C = this.lowStreamConfig, I = C.width, E = C.frameRate; if (d = Math.round(h * this.lowStreamConfig.width), "firefox" === this.stateCenter.browser) this.lowStream = this.getStreamThroughCanvas(this.localStream, { "w": I, "h": d, "fps": E }); else { this.lowStream = null === (r = this.localStream) || void 0 === r ? void 0 : r.clone(); var p = null === (i = this.lowStream) || void 0 === i ? void 0 : i.getVideoTracks()[0]; null == p || p.applyConstraints({ "width": I, "height": d, "frameRate": E }) } } catch (e) { this.logger.error("zp.cls " + e) } } }, A.prototype.initAudioNodeQueue = function (e) { if (!this.audioTrack || !this.localStream) return !1; var t = this.createSrcNode(this.audioTrack), A = this.createDestNode(this.localStream); return this.audioNodeQueue = new u.AudioNodeQueue(t, A), !0 }, A.prototype.createSrcNode = function (e, t) { var A; void 0 === t && (t = !1); var r = void 0 === e ? this.audioTrack : e; if (r === (null === (A = this.destNode) || void 0 === A ? void 0 : A.stream.getAudioTracks()[0]) && (this.logger.info("zp.pv.csn use empty track"), r = this.getEmptyAudioTrack()), this.srcNode) { if (!t) return this.srcNode; this.srcNode.disconnect(), this.logger.info("zp.pv.csn recreate src") } var i = new MediaStream; r && i.addTrack(r); var o = this.srcNode = this.ac.createMediaStreamSource(i); return this.logger.info("zp.pv.csn " + "create src audio id: ".concat(null == r ? void 0 : r.id, ", ").concat(null == r ? void 0 : r.label, ",i")), o }, A.prototype.createDestNode = function (e) { var t; if (this.destNode) return this.destNode; var A = this.destNode = this.destNode || this.ac.createMediaStreamDestination(), r = A.stream.getAudioTracks()[0]; this.logger.info("zp.pv.cdn " + "create dest audio id: ".concat(null == r ? void 0 : r.id, ", ").concat(null == r ? void 0 : r.label, ",i")); var i = this.rtcViewer; for (var o in this.streamCenter.publisherList) { var n = this.streamCenter.publisherList[o]; if (n.localStream == e) { var s = null === (t = n.publisher.peerConnection) || void 0 === t ? void 0 : t.getSenders().find(function (e) { return e.track && "audio" === e.track.kind }); s && (s.replaceTrack(r), this.logger.info("zc.pv.cdn change sender audio track")); break } } var a = e.getAudioTracks()[0]; return a && e.removeTrack(a), r.enabled = this.isAudioEnabled, e.addTrack(r), i && i.setAudio(r), A }, A.prototype.initMediaTrack = function (e) { e.getVideoTracks().length > 0 && (this.videoTrack = e.getVideoTracks()[0], this.originVideoTrack = this.videoTrack), e.getAudioTracks().length > 0 && (this.audioTrack = e.getAudioTracks()[0], this.originAudioTrack = this.audioTrack) }, A.prototype.onAudioTrackChange = function (e) { }, A.prototype.getViewer = function () { return this.localStream && !this.rtcViewer && (this.rtcViewer = new g.StreamView(this.localStream, this, { "clearLastFrame": this.stateCenter.engineConfig.previewClearLastFrame })), this.rtcViewer }, A.prototype.getStreamThroughCanvas = function (e, t) { if (0 == e.getVideoTracks().length) return e; var A = document.createElement("video"), r = document.createElement("canvas"), i = r.getContext("2d"); A.setAttribute("style", "display:none"), r.setAttribute("style", "display:none"), A.setAttribute("muted", ""), A.muted = !0, A.setAttribute("autoplay", ""), A.autoplay = !0, A.setAttribute("playsinline", ""), document.body.append(A), document.body.append(r), A.srcObject = e; var o = !1, s = function n() { 0 !== r.width && (o = !0, null == i || i.drawImage(A, 0, 0, r.width, r.height), window.requestAnimationFrame(n), A.srcObject = e) }; A.oncanplay = function () { r.width = (null == t ? void 0 : t.w) || A.videoWidth, r.height = (null == t ? void 0 : t.h) || A.videoHeight, A.play(), !o && s() }; var a = r.captureStream((null == t ? void 0 : t.fps) || 15), c = a.getVideoTracks()[0], g = c.stop; if (c.stop = function () { g.call(c), s(), A.remove(), r.width = 0, r.remove(), o = !1 }, e instanceof MediaStream && e.getAudioTracks().length) { var u = e.getAudioTracks()[0]; a.addTrack(u) } return a }, A.prototype.stopCanvasStreamTrack = function () { var e; this.streamFromCanvas && this.streamFromCanvasTrack && (null === (e = this.streamFromCanvasTrack) || void 0 === e || e.stop(), this.streamFromCanvasTrack = null) }, A.prototype.updateVideoInfo = function (e) { var t = { "width": e.width, "height": e.height, "frameRate": e.frameRate, "bitRate": e.bitRate, "minBitrate": e.minBitrate, "keyFrameInterval": e.keyFrameInterval }; return this.logger.info("zc.pv.uvi input video info: ".concat(JSON.stringify(t))), this.videoInfo = i(i({}, this.videoInfo), t), i({}, this.videoInfo) }, A.prototype.updateAudioInfo = function (e) { var t = {}; return this.logger.info("zc.pv.uai input audio info: ".concat(JSON.stringify(t))), this.videoInfo = i(i({}, this.videoInfo), t), i({}, this.videoInfo) }, A }(); t.ZegoPreview = I }, "9987": function _(e, t, r) { "use strict"; var i = this && this.__assign || function () { return (i = Object.assign || function (e) { for (var t, A = 1, r = arguments.length; A < r; A++)for (var i in t = arguments[A]) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]); return e }).apply(this, arguments) }, o = this && this.__awaiter || function (e, t, A, r) { return new (A || (A = Promise))(function (i, o) { function n(e) { try { a(r.next(e)) } catch (e) { o(e) } } function s(e) { try { a(r.throw(e)) } catch (e) { o(e) } } function a(e) { var t; e.done ? i(e.value) : (t = e.value, t instanceof A ? t : new A(function (e) { e(t) })).then(n, s) } a((r = r.apply(e, t || [])).next()) }) }, n = this && this.__generator || function (e, t) { var A, r, i, o, n = { "label": 0, "sent": function sent() { if (1 & i[0]) throw i[1]; return i[1] }, "trys": [], "ops": [] }; return o = { "next": s(0), "throw": s(1), "return": s(2) }, "function" == typeof Symbol && (o[Symbol.iterator] = function () { return this }), o; function s(s) { return function (a) { return function (s) { if (A) throw new TypeError("Generator is already executing."); for (; o && (o = 0, s[0] && (n = 0)), n;)try { if (A = 1, r && (i = 2 & s[0] ? r.return : s[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, s[1])).done) return i; switch (r = 0, i && (s = [2 & s[0], i.value]), s[0]) { case 0: case 1: i = s; break; case 4: return n.label++, { "value": s[1], "done": !1 }; case 5: n.label++, r = s[1], s = [0]; continue; case 7: s = n.ops.pop(), n.trys.pop(); continue; default: if (!((i = (i = n.trys).length > 0 && i[i.length - 1]) || 6 !== s[0] && 2 !== s[0])) { n = 0; continue } if (3 === s[0] && (!i || s[1] > i[0] && s[1] < i[3])) { n.label = s[1]; break } if (6 === s[0] && n.label < i[1]) { n.label = i[1], i = s; break } if (i && n.label < i[2]) { n.label = i[2], n.ops.push(s); break } i[2] && n.ops.pop(), n.trys.pop(); continue }s = t.call(e, n) } catch (e) { s = [6, e], r = 0 } finally { A = i = 0 } if (5 & s[0]) throw s[1]; return { "value": s[0] ? s[1] : void 0, "done": !0 } }([s, a]) } } }; Object.defineProperty(t, "__esModule", { "value": !0 }), t.ZegoPublish = void 0; var s = r(5123), a = r(3332), c = r(9723), g = r(4028), u = r(1586), l = r(93), h = r(3171), d = r(3420), C = r(5601), I = u.ZegoRTCLogEvent.kZegoTaskPublishStart, E = u.ZegoRTCLogEvent.kZegoTaskSDKPublishStream, p = u.ZegoRTCLogEvent.kZegoStartPublish, f = function () { function A(e, t, A, r, i, o, n) { var a, g = this; this.curCBState = { "state": "NO_PUBLISH", "code": 0 }, this.isProbeDispatch = !1, this._state = s.ENUM_PUBLISH_STATE.stop, this.lastState = s.ENUM_PUBLISH_STATE.stop, this.sessionId = 0, this.sessionToken = "", this.candidateInfo = [], this.qualityTimer = null, this.publishQualityList = [], this.maxQualityListCount = 10, this.lastPublishStats = {}, this.currentQuality = { "video": { "videoBitrate": 0, "videoFPS": 0, "videoTransferFPS": 0, "frameHeight": 0, "frameWidth": 0, "muteState": "1", "videoQuality": -1, "videoPacketsLost": 0, "videoPacketsLostRate": 0, "googCodecName": "" }, "audio": { "audioBitrate": 0, "audioCodec": "opus", "muteState": "1", "audioQuality": -1, "audioFPS": 0, "audioPacketsLost": 0, "audioPacketsLostRate": 0, "googCodecName": "" } }, this.canvasTimer = null, this.canvas = null, this.ctx = null, this.canvasImage = null, this.reportSeq = NaN, this.parentSpanKey = "", this.streamReportSeq = (0, s.getSeq)(), this.qualityUpload = !1, this.qualityUploadInterval = 3e4, this.qualityUploadLastTime = 0, this.qualitySeq = 0, this.videoInfo = { "width": 0, "height": 0, "frameRate": 0, "bitRate": 0, "minBitrate": 0, "keyFrameInterval": 2, "channelCount": 1, "audioBitrate": 48e3 }, this.mediaStreamConfig = null, this.offerSeq = 0, this.peerConnection = null, this.qualityCount = 0, this.closeSessionSignal = !1, this.channelCount = 1, this.localSdpOrder = [], this.remoteSdpOrder = [], this.videoCodec = "H264", this.stateNego = s.ENUM_PUBLISH_STATE_NEGO.stop, this.isExternal = !1, this.negoInterval = 25e3, this.publishEvent = !1, this.cameraState = "on", this.microState = "on", this.gwNode = "", this.gwNodeList = [], this.gwNodesTTL = 0, this.retryFailGwNodes = [], this.dispatchedGwNodes = [], this.needIncMax = !1, this.probeCount = 0, this.gotMax = !1, this.initFitCnt = 0, this.targetRate = 0, this.totalBitrateArray = [], this.totalTargetRateArray = [], this.totalRetransRateArray = [], this.isPeer = !1, this.peerFailCount = 0, this.peerID = 0, this.netQuality = 0, this.probeTime = 0, this.probeInterval = 6e4, this.probeState = s.ENUM_PROBE_STATE.probed, this.probeIpCnt = 0, this.validProbeIpCnt = 0, this.poorQualityRetryCnt = 0, this.probeNotRetryInfos = [], this.continuousFailCnt = 0, this.iceDisconnectedMaxTime = 15e3, this.isUpdateSDP = !1, this.isUdpSuccess = !1, this.toBeReplacedTracks = {}, this.send_seq = 0, this.dataChannelState = 0, this.first_pkt = !0, this.next_sn = [], this.pkt_list = [], this.answerSdpTime = 0, this.streamConnectIP = "", this.mediaSideInfos = [], this.lowMediaSideInfos = [], this.sideMediaConfig = { "isSEIStart": !1, "SEIType": s.ZegoSEIType.ZegoDefined, "unregisterSeiFilter": "", "uuidSend": !1, "track": null }, this.reportBeginTime = 0, this.reportPublishingTime = 0, this.reportPublishStateTime = 0, this.isRePublish = !1, this.publishStat = {}, this.poorQualityNum = 0, this.cachedGwNodesMode = c.CachedNodesUseMode.TheSameReUse, this.rtcPublishCount = 0, this.stopReason = "", this.signalTime = 0, this.pushCmdSeqMap = ((a = {}).MediaDescPush = { "seq": -1, "time": 0 }, a.MediaDescUpdatePush = { "seq": -1, "time": 0 }, a.PublishEventPush = { "seq": -1, "time": 0 }, a.ClientInfoPush = { "seq": -1, "time": 0 }, a.CandidateInfoPush = { "seq": -1, "time": 0 }, a), this._turnToTcp = !1, this.encodeLowVideoFrame = function (e, t) { g.encodeFrame(e, t, !0) }, this.encodeVideoFrame = function (e, t) { g.encodeFrame(e, t, !1) }, this.camera_status = 2, this.mic_status = 2, this.streamId = e, this.logger = t, this.dataReport = A, this.qualityTimeInterval = r, this.streamCenter = i, this.stateCenter = o, this.videoCodec = this.stateCenter.settingConfig.getSetting("publish_video_codec"), this.previewer = n, this.localStream = n.localStream, n.onAudioTrackChange = function (e) { var t = g.peerConnection && g.peerConnection.getSenders().find(function (t) { var A; return (null === (A = t.track) || void 0 === A ? void 0 : A.kind) === e.kind }); t ? (t.replaceTrack(e), g.logger.info("zc.oatc remote audio track change success")) : g.logger.warn("zc.oatc stream has not sender") }, this.initStreamReport(), this.exception = new C.Exception(this.stateCenter, this.logger, this.streamId, u.ZegoRTCLogEvent.kZegoTaskPublishStart.event) } return A.prototype.updateCBState = function (e) { var t = this, A = Object.keys(e).some(function (A) { return e[A] !== t.curCBState[A] }); return A && (this.curCBState = e), A }, Object.defineProperty(A.prototype, "state", { "get": function get() { return this._state }, "set": function set(e) { this.lastState = this._state, this._state = e }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "lowStream", { "get": function get() { var e; return null === (e = this.previewer) || void 0 === e ? void 0 : e.lowStream }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "iceStateDisConnect", { "get": function get() { return [s.ENUM_PUBLISH_STATE_NEGO.iceClosed, s.ENUM_PUBLISH_STATE_NEGO.iceDisconnected, s.ENUM_PUBLISH_STATE_NEGO.iceFailed].includes(this.stateNego) }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "isLastConnected", { "get": function get() { return this.lastState === s.ENUM_PUBLISH_STATE.publishing }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "netProtocol", { "get": function get() { return this._turnToTcp ? "tcp" : "udp" }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "ip", { "get": function get() { var e, t; return null === (t = null === (e = this.gwNode) || void 0 === e ? void 0 : e.split(":")) || void 0 === t ? void 0 : t[0] }, "enumerable": !1, "configurable": !0 }), A.prototype.initStreamReport = function () { this.reportSpan = this.stateCenter.reporter.createSpan(s.TRACER_LEVEL.I, { "key": u.ZegoRTCLogEvent.kZegoTaskPublishStart.event, "par": this.streamId }, { "key": E.event, "par": this.streamId }, E.event, !0), this.reportBeginTime = (new Date).getTime() }, A.prototype.publishStateUpdateError = function (e, t, A, r) { this.logger.error(l.ZEGO_WEBRTC_ACTION.PUBLISHER_STATE_ERROR + "  call ", this.streamId + " " + JSON.stringify(e)); var i = this.stateCenter.reporter.createSpan(s.TRACER_LEVEL.H, { "key": u.ZegoRTCLogEvent.kZegoTaskPublishStart.event, "par": this.streamId }, { "key": "" }, u.ZegoRTCLogEvent.kZegoTaskPublishStreamStateError.event); i.setAttributes({ "error": null == e ? void 0 : e.code, "message": null == e ? void 0 : e.message }), i.end(), this.streamId && this.onPublishStateUpdate(s.ENUM_PUBLISH_STATE_UPDATE.error, this.streamId, e, t, A, r), this.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_STATE_ERROR + "  ended") }, A.prototype.netProbeToReDispatch = function () { this.isProbeDispatch = !0, this.publishStateUpdateError(u.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kPublishNetProbePoor) }, A.prototype.resetPublish = function () { this.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_RESET_PUBLISH + "   " + this.streamId + " call"), this.state = s.ENUM_PUBLISH_STATE.stop, this.publishEvent = !1, null == this.peerConnection && null == this.peerConnection || (this.peerConnection.close(), this.peerConnection = null), null != this.negoTimer && (clearTimeout(this.negoTimer), this.negoTimer = null), null != this.iceDisconnectedTimer && (clearTimeout(this.iceDisconnectedTimer), this.iceDisconnectedTimer = null), this.clearPublishQualityTimer(), this.clearCanvasTimer(), this.signal && (this.signal.unregisterPushCallback("CandidateInfoPush", this.sessionId), this.signal.unregisterPushCallback("MediaDescPush", this.sessionId), this.signal.unregisterPushCallback("CloseSessionPush", this.sessionId), this.signal.unregisterPushCallback("SessionResetPush", this.sessionId), this.signal.unregisterPushCallback("PublishEventPush", this.sessionId), this.signal.unregisterPushCallback("ClientInfoPush", this.sessionId), this.signal.unregisterPushCallback("MediaDescUpdatePush", this.sessionId)), this.sessionSeq = 0, this.offerSeq = 0, this.candidateInfo = [], this.publishQualityList = [], this.qualityUploadLastTime = 0, this.resetEncBitrate(), this.isUpdateSDP = !1 }, A.prototype.clearPublishQualityTimer = function () { null != this.qualityTimer && (clearInterval(this.qualityTimer), this.qualityTimer = null), this.lastPublishStats = {}, this.qualityCount = 0, this.poorQualityNum = 0 }, A.prototype.clearCanvasTimer = function () { null != this.canvasTimer && (clearInterval(this.canvasTimer), this.sideMediaConfig.track = null, this.canvasTimer = null, this.canvas = null, this.ctx = null, this.canvasImage = null) }, A.prototype.shouldSendCloseSession = function () { return this.state != s.ENUM_PUBLISH_STATE.stop && this.state != s.ENUM_PUBLISH_STATE.waitingSessionRsp }, A.prototype.resetPushCmdSeqMap = function () { var e; this.pushCmdSeqMap = ((e = {}).MediaDescPush = { "seq": -1, "time": 0 }, e.MediaDescUpdatePush = { "seq": -1, "time": 0 }, e.PublishEventPush = { "seq": -1, "time": 0 }, e.ClientInfoPush = { "seq": -1, "time": 0 }, e.CandidateInfoPush = { "seq": -1, "time": 0 }, e) }, A.prototype.startPublish = function (e, t, A, r, i) { var o, n, s, a, c, u, h, d, C, p, f, B, _, m = this; if (this.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH + " " + e + " called"), this.signal && this.signal.negoInterval && (this.negoInterval = this.signal.negoInterval), e) { var Q; this.localStream = t, this.mediaStreamConfig = r, this.channelCount = r.channelCount, this.publishOption = i || {}, (null == i ? void 0 : i.SEIType) && (this.sideMediaConfig.SEIType = i.SEIType), this.currentQuality.video.muteState = (null === (n = null === (o = this.previewer) || void 0 === o ? void 0 : o.videoTrack) || void 0 === n ? void 0 : n.enabled) ? "0" : "1", this.currentQuality.audio.muteState = this.localStream.getAudioTracks().length > 0 && this.localStream.getAudioTracks()[0].enabled ? "0" : "1", navigator.userAgent.toLowerCase().indexOf("firefox") > -1 && r && (r.externalCapture || r.externalMediaStream) && (this.localStream.onaddtrack = function () { var e, t, A, r; m.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH + " " + m.streamId + " Track added"); var i = []; (null === (e = m.previewer) || void 0 === e ? void 0 : e.videoTrack) && i.push(null === (t = m.previewer) || void 0 === t ? void 0 : t.videoTrack); var o = m.localStream.getAudioTracks(); if (i.length > 1) { var n = null === (A = m.peerConnection) || void 0 === A ? void 0 : A.getSenders().find(function (e) { var t; return (null === (t = e.track) || void 0 === t ? void 0 : t.id) === m.localStream.getVideoTracks()[0].id }); null == n || n.replaceTrack(i[1]), m.localStream.removeTrack(i[0]) } else o.length > 1 && (null == (n = null === (r = m.peerConnection) || void 0 === r ? void 0 : r.getSenders().find(function (e) { var t; return (null === (t = e.track) || void 0 === t ? void 0 : t.kind) === o[1].kind })) || n.replaceTrack(o[1]), m.localStream.removeTrack(o[0])) }), A && (this.videoInfo = A), i && i.videoCodec && (this.videoCodec = i.videoCodec); var y = null === (s = this.previewer) || void 0 === s ? void 0 : s.previewType; switch (y) { case "camera": Q = this.stateCenter.settingConfig.getSetting("camera_video_bitrate", !0); break; case "screen": Q = this.stateCenter.settingConfig.getSetting("screen_video_bitrate", !0); break; case "custom": Q = this.stateCenter.settingConfig.getSetting("custom_video_bitrate", !0) }void 0 !== Q && (this.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH + " setting " + y + " " + Q), this.videoInfo.bitRate = Q); var v = this.stateCenter.settingConfig.getSetting("bitrate_mode", !0); v && (this.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH + " setting bitrate_mode " + v), this.videoInfo.startBitrate = v); var S = this.stateCenter.settingConfig.getSetting("publish_video_codec", !0); if (S && (this.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH + " setting publish_video_codec " + S), this.videoCodec = S), "boolean" == typeof (null == i ? void 0 : i.isSEIStart) && (this.sideMediaConfig.isSEIStart = null == i ? void 0 : i.isSEIStart), this.sideMediaConfig.isSEIStart) { var D = g.ClientUtil.isSupportEncodedTransforms(); "H264" === this.videoCodec && D || (this.sideMediaConfig.isSEIStart = !1) } (null === (a = this.stateCenter.seiConfig) || void 0 === a ? void 0 : a.unregisterSEIFilter) && (this.sideMediaConfig.unregisterSeiFilter = null === (c = this.stateCenter.seiConfig) || void 0 === c ? void 0 : c.unregisterSEIFilter), this.stateCenter.reporter.spanSetAttributes({ "key": I.event, "par": this.streamId }, { "video_en_codec_id": I.video_en_codec_id("VP8" == this.videoCodec ? 2 : 0), "audio_c_channel_count": I.audio_c_channel_count(2 == this.channelCount ? 2 : 1), "audio_en_bps": I.audio_en_bps(this.videoInfo.audioBitrate), "aec_level": I.aec_level(1 == r.AEC ? 2 : 0 == r.AEC ? 0 : 2), "ans_level": I.ans_level(1 == r.ANS ? 2 : 0 == r.ANS ? 0 : 2), "agc": I.agc(1 == r.AGC || 0 != r.AGC), "video_activate": I.video_activate(!!(null === (h = null === (u = this.previewer) || void 0 === u ? void 0 : u.videoTrack) || void 0 === h ? void 0 : h.enabled)), "audio_activate": I.audio_activate(!!(null === (C = null === (d = this.previewer) || void 0 === d ? void 0 : d.audioTrack) || void 0 === C ? void 0 : C.enabled)), "scenario": this.stateCenter.scenario }), this.reportSpan.setAttributes({ "room_id": E.room_id(null === (f = null === (p = this.streamCenter.publisherList[this.streamId]) || void 0 === p ? void 0 : p.room) || void 0 === f ? void 0 : f.roomID), "room_sid_string": E.room_sid_string(null === (_ = null === (B = this.streamCenter.publisherList[this.streamId]) || void 0 === B ? void 0 : B.room) || void 0 === _ ? void 0 : _.roomSessionID), "max_retry_interval": E.max_retry_interval(this.stateCenter.streamRetryTime), "scenario": this.stateCenter.scenario, "use_resource_type": E.use_resource_type(["rtc"]) }), this.isPeer ? this.createOffer({ "encodedInsertableStreams": this.sideMediaConfig.isSEIStart }) : this.createSession(), this.negoTimer = setTimeout(function () { m.logger.error(l.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH + " waiting timeout"), m.publishStateUpdateError(I.error.kPublishNegoTimeoutError) }, this.negoInterval) } else this.logger.error(l.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH + " " + e + " streamId is null") }, A.prototype.activateSEIInsert = function (e, t) { return new Promise(function (e, t) { e(!1) }) }, A.prototype.createSession = function (e, t) { var A, r, i, a = this; this.sessionSeq = (0, s.getSeq)(); var c = this.streamId; 1 == this.streamCenter.testEnvironment && (c = "zegotest-" + this.streamCenter.appid + "-" + this.streamId), this.streamCenter.gwNode && (this.gwNode = this.streamCenter.gwNode); var g = this.stateCenter.settingConfig.getSetting("gw_nodes"); g && g instanceof Array && g.length > 0 && (this.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH + " setting " + JSON.stringify(g)), this.gwNodeList = g, this.gwNode = this.gwNodeList[0] || this.gwNode), this.setTurnTcp(); var h = this.stateCenter.settingConfig.getSetting("udp_or_tcp", !0); h && (this.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH + " setting udp_or_tcp " + h), this._turnToTcp = "tcp" === h), this._turnToTcp && (this.isPeer = !1); var d = "", C = [], E = this.stateCenter.seiConfig.SEIPass; "boolean" == typeof E && C.push("zgseipass=" + (E ? 1 : 0)), this.stateCenter.idName && C.push("zguid=" + this.stateCenter.idName), this.stateCenter.isMiniSdp && C.push("sdp_fmt_type=1"); var p = (null === (r = null === (A = this.streamCenter.publisherList[this.streamId]) || void 0 === A ? void 0 : A.room) || void 0 === r ? void 0 : r.roomID) || (null === (i = this.stateCenter.roomList[0]) || void 0 === i ? void 0 : i.roomID); p && C.push("zgrid=" + p); var f = u.ZegoRTCLogEvent.kZegoPublishCreateSession; if (this.isPeer) { var B = (new Date).getTime(); C.length > 0 && (d = C.join("&")); var _ = this.getSpan(u.ZegoRTCLogEvent.kZegoPublishCreateSession.event, this.parentSpanKey); this.signal.createSessionWithSdp({ "seq": this.sessionSeq, "type": 0, "mode": 0, "streamId": c, "videoInfo": this.videoInfo, "strAuthParam": this.publishOption && this.publishOption.streamParams || "", "sdp": t || e.sdp, "serverHost": this.gwNode, "params": d }, function (e, t, A) { return o(a, void 0, void 0, function () { var r, i; return n(this, function (o) { switch (o.label) { case 0: return r = (new Date).getTime(), A.sdp ? (i = A, [4, this.signal.parseRecSdp(A.sdp)]) : [3, 2]; case 1: i.sdp = o.sent(), o.label = 2; case 2: return this.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH + " create session time " + (r - B)), _.setAttributes({ "webrtc_sid": t, "sdp": f.sdp(A.sdp), "is_mini": f.is_mini(this.stateCenter.isMiniSdp), "gw_nodes": f.gw_nodes(A.gw_nodes), "gw_nodes_ttl": f.gw_nodes(A.gw_nodes_ttl), "gw_version": f.gw_version(A.gw_version) }), _.end(), this.stateCenter.reporter.spanSetAttributes({ "key": I.event, "par": this.streamId }, { "gw_version": I.gw_version(A.gw_version) }), this.stateNego !== s.ENUM_PUBLISH_STATE_NEGO.iceConnected && this.getSpan(u.ZegoRTCLogEvent.kZegoPublishIceConnected.event, this.parentSpanKey, "", !0), this.handleCreateSessionWithSdpResp(e, t, A), [2] } }) }) }, function (e, t) { var A; if (a.sessionSeq == t) { var r = e == s.SEND_MSG_TIMEOUT ? I.error.kSessionTimeoutError : I.error.kSessionRequestError; a.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH + " ".concat(a.streamId, " create session fail. signal: ").concat(a.signal.state, "; ws: ").concat(null === (A = a.signal.websocket) || void 0 === A ? void 0 : A.readyState, " ")), _.setAttributes({ "try_cnt": a.peerFailCount }), a.stateCenter.reporter.setError(_, r), a.publishStateUpdateError(r) } else a.logger.warn(l.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH + " seq is not match.") }) } else { C.length > 0 && (d = C.join("&")); var m = this.getSpan(u.ZegoRTCLogEvent.kZegoPublishCreateSession.event, this.parentSpanKey); this.signal.createSession(this.sessionSeq, 0, 0, c, this.publishOption && this.publishOption.streamParams, this.gwNode, d, function (e, t, A) { return o(a, void 0, void 0, function () { return n(this, function (r) { return m.setAttributes({ "webrtc_sid": f.webrtc_sid(t), "gw_nodes": f.gw_nodes(A.gw_nodes), "gw_nodes_ttl": f.gw_nodes(A.gw_nodes_ttl), "gw_version": f.gw_version(A.gw_version) }), m.end(), this.stateCenter.reporter.spanSetAttributes({ "key": I.event, "par": this.streamId }, { "gw_version": I.gw_version(A.gw_version) }), this.handleCreateSessionResp(e, t, A), [2] }) }) }, function (e, t) { if (a.sessionSeq == t) { var A = e == s.SEND_MSG_TIMEOUT ? I.error.kSessionTimeoutError : I.error.kSessionRequestError; a.stateCenter.reporter.setError(m, A), a.publishStateUpdateError(A) } else a.logger.warn(l.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH + " seq is not match.") }) } this.state = s.ENUM_PUBLISH_STATE.waitingSessionRsp, this.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH + " " + this.streamId + " called success"), this.stateNego = s.ENUM_PUBLISH_STATE_NEGO.start }, A.prototype.handleCreateSessionResp = function (e, t, A) { var r = A.turn_server, i = r.split("?")[0] && r.split("?")[0].slice(5), o = this.streamCenter.server.split("?"), n = o[1] && o[1].slice(2), s = "webrtc://".concat(i, "/").concat(n, "/").concat(this.streamId); if (this.stateCenter.reporter.spanSetAttributes({ "key": this.parentSpanKey, "par": this.streamId }, { "webrtc_sid": A.session_id, "url": s }), this.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH + " " + this.streamId + " sessionId:" + A.session_id), this.sessionSeq == e) { this.resetPushCmdSeqMap(), this.stateCenter.clientIP = A.clientip ? A.clientip : this.stateCenter.clientIP; var a = 0, c = (new Date).getTime(); this.reportBeginTime && (this.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH + " " + this.streamId + " create signal time " + (a = c - this.reportBeginTime)), this.signalTime = a), this.answerSdpTime = c, 0 !== A.result ? (this.logger.error(l.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH + " " + this.streamId + " create session failed " + A.result), this.publishStateUpdateError(I.error.kSessionRequestError)) : (this.sessionId = A.session_id, this.sessionToken = A.session_token, this.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH + " " + this.streamId + " create session success " + this.sessionId), this.setGwNodes(A, !1), this.onCreatePublishSessionSuccess(A)) } else this.logger.error(l.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH + " " + this.streamId + " seq is not match.") }, A.prototype.handleCreateSessionWithSdpResp = function (e, t, A) { var r = this; if (this.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH + " sessionId:" + t), this.sessionSeq == e) { this.resetPushCmdSeqMap(), this.stateCenter.clientIP = A.clientip ? A.clientip : this.stateCenter.clientIP; var i = 0, s = (new Date).getTime(); if (this.reportBeginTime && (this.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH + " " + this.streamId + " create signal time " + (i = s - this.reportBeginTime)), this.signalTime = i), this.answerSdpTime = s, 0 !== A.result) 110 === A.result && (this.stateCenter._isMiniSdp = !1), this.logger.error(l.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH + " create session failed " + A.result), this.publishStateUpdateError({ "code": I.error.kSessionRequestError.code, "message": I.error.kSessionRequestError.message + " result:" + A.result }); else { this.sessionId = t, this.sessionToken = A.session_token, this.setGwNodes(A, !1), this.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH + " get remote session success " + this.streamId); var a = performance.now(); this.signal.registerPushCallback("CloseSessionPush", this.sessionId, function (e, t, A) { if (a) { var i = (performance.now() - a).toFixed(0); a = void 0, r.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH + " ".concat(r.streamId, ", cmd: CloseSessionPush, cost_time: ").concat(i)) } r.onRecvCloseSession(e, t, A) }), this.signal.registerPushCallback("SessionResetPush", this.sessionId, function (e, t, A) { r.onRecvResetSession(e, t, A) }), this.signal.registerPushCallback("PublishEventPush", this.sessionId, function (e, t, A) { if (r.compareSeqs("PublishEventPush", e)) { if (a) { var i = (performance.now() - a).toFixed(0); a = void 0, r.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH + " ".concat(r.streamId, ", cmd: PublishEventPush, cost_time: ").concat(i)) } r.onRecvPublishEvent(e, t, A) } }), this.signal.registerPushCallback("ClientInfoPush", this.sessionId, function (e, t, A) { r.compareSeqs("ClientInfoPush", e) && r.onRecvClientInfo(e, t, A) }), this.signal.registerPushCallback("MediaDescUpdatePush", this.sessionId, function (e, t, A) { return o(r, void 0, void 0, function () { return n(this, function (r) { switch (r.label) { case 0: return this.compareSeqs("MediaDescUpdatePush", e) ? [4, this.onRecvUpdateMediaDescription(e, t, A)] : [2]; case 1: return r.sent(), [2] } }) }) }), this.onGetRemoteOfferSuccess(A.sdp) } } else this.logger.error(l.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH + " seq is not match.") }, A.prototype.setGwNodes = function (e, t) { var A; if (this.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_SET_GW_NODES + " " + this.streamId + " " + JSON.stringify(null == e ? void 0 : e.gw_nodes) + " " + JSON.stringify(this.retryFailGwNodes)), (null === (A = e.gw_nodes) || void 0 === A ? void 0 : A.length) > 0) { var r = this.sortGwNodes(e.gw_nodes, this.retryFailGwNodes, t); this.retryFailGwNodes = [], this.handleDispatchedGwNodes(r, e.gw_nodes_ttl) } }, A.prototype.resetGwNodes = function () { this.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_RESET_GW_NODES + " " + this.streamId), this.gwNode = "", this.gwNodeList = [], this.gwNodesTTL = 0 }, A.prototype.sortGwNodes = function (e, t, A) { var r = JSON.parse(JSON.stringify(e)); if (t.forEach(function (e) { var t = r.indexOf(e); t >= 0 && (r.splice(t, 1), r.push(e)) }), !A) { var i = r.findIndex(function (t) { return t === e[0] }); i > 0 && (r.splice(i, 1), r.unshift(e[0])) } return r }, A.prototype.handleDispatchedGwNodes = function (e, t) { if (this.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_HANDLE_DISPATCHED_GW_NODES + " " + this.streamId + " " + JSON.stringify(e)), Array.isArray(e)) { this.gwNodeList = e.length > 0 ? e : this.gwNodeList, this.gwNode = e.length > 0 ? this.gwNodeList[0] : this.gwNode; var A = 0 === t ? 60 : t; this.gwNodesTTL = A ? (new Date).getTime() + 1e3 * A : this.gwNodesTTL, e.length > 0 && this.streamCenter.updateCachedGwNodesList(this, !0, e, A) } }, A.prototype.onCreatePublishSessionSuccess = function (e) { var t = this, A = l.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_CREATE_PUBLISH_SESSION_SUCCESS; this.logger.info(A + " " + this.streamId + " called"); var r = []; if (e.turn_server) { var i = e.turn_server.split(";"); this.setTurnTcp(), this.streamCenter.autoSwitchProtocol = this.stateCenter.settingConfig.getSetting("auto_to_tcp") || !1; var s = this.stateCenter.settingConfig.getSetting("udp_max_fail_num"); !isNaN(s) && (this.streamCenter.maxUdpFailNum = s); var a = this.streamCenter, c = a.autoSwitchProtocol, g = a.maxUdpFailNum, u = a.udpFailNum; this.logger.info(A + "  autoToTcp: ".concat(c, ", udpFailNum: ").concat(u, ", maxUdpFailNum: ").concat(g, ".")), c && !this._turnToTcp && u >= g && (this.logger.info(A + " switch to tcp. "), this._turnToTcp = !0); var h = this.stateCenter.settingConfig.getSetting("udp_or_tcp", !0); h && (this.logger.info(A + " setting udp_or_tcp " + h), this._turnToTcp = "tcp" === h); var d, C = i.filter(function (e) { return e.indexOf("udp") > -1 }), I = i.filter(function (e) { return e.indexOf("tcp") > -1 }); d = this._turnToTcp ? I.length > 0 ? I : C.map(function (e) { return e.replace("udp", "tcp") }) : C, this.logger.info(A + " over tcp " + JSON.stringify(d)), r.push.apply(r, d) } e.stun_server && r.push(e.stun_server); var E = { "iceTransportPolicy": "all", "iceServers": [{ "urls": r, "username": e.turn_username, "credential": e.turn_auth_key }], "encodedInsertableStreams": this.sideMediaConfig.isSEIStart }; this.logger.info(A + " " + this.streamId + " username: " + e.turn_username), this.logger.info(A + " " + this.streamId + " credential: " + e.turn_auth_key), this.createOffer(E); var p = performance.now(); this.signal.registerPushCallback("CandidateInfoPush", this.sessionId, function (e, A, r) { if (t.compareSeqs("CandidateInfoPush", e)) var i = setTimeout(function () { t.onRecvCandidateInfo(e, A, r), clearTimeout(i) }, 0) }), this.signal.registerPushCallback("CloseSessionPush", this.sessionId, function (e, r, i) { if (p) { var o = (performance.now() - p).toFixed(0); p = void 0, t.logger.info(A + " ".concat(t.streamId, ", cmd: CloseSessionPush, cost_time: ").concat(o)) } 32 === i.reason && (t.stateCenter._isMiniSdp = !1), t.onRecvCloseSession(e, r, i) }), this.signal.registerPushCallback("MediaDescPush", this.sessionId, function (e, A, r) { return o(t, void 0, void 0, function () { return n(this, function (t) { switch (t.label) { case 0: return this.compareSeqs("MediaDescPush", e) ? [4, this.onRecvMediaDescription(e, A, r)] : [2]; case 1: return t.sent(), [2] } }) }) }), this.signal.registerPushCallback("SessionResetPush", this.sessionId, function (e, A, r) { t.onRecvResetSession(e, A, r) }), this.signal.registerPushCallback("PublishEventPush", this.sessionId, function (e, r, i) { if (t.compareSeqs("PublishEventPush", e)) { if (p) { var o = (performance.now() - p).toFixed(0); p = void 0, t.logger.info(A + " ".concat(t.streamId, ", cmd: PublishEventPush, cost_time: ").concat(o)) } t.onRecvPublishEvent(e, r, i) } }), this.signal.registerPushCallback("ClientInfoPush", this.sessionId, function (e, A, r) { t.compareSeqs("ClientInfoPush", e) && t.onRecvClientInfo(e, A, r) }), this.signal.registerPushCallback("MediaDescUpdatePush", this.sessionId, function (e, A, r) { return o(t, void 0, void 0, function () { return n(this, function (t) { switch (t.label) { case 0: return this.compareSeqs("MediaDescUpdatePush", e) ? [4, this.onRecvUpdateMediaDescription(e, A, r)] : [2]; case 1: return t.sent(), [2] } }) }) }), this.logger.info(A + " " + this.streamId + " call success") }, A.prototype.compareSeqs = function (e, t) { var A = this.pushCmdSeqMap[e], r = A.seq, i = A.time, o = performance.now(); return -1 !== r && r >= t && o - i < 6e3 ? (this.logger.warn(l.ZEGO_WEBRTC_ACTION.PUBLISHER_COMPARE_PUSH_SEQS + " ".concat(this.streamId, ", push ").concat(e, ", seq ").concat(t, " local ").concat(JSON.stringify(this.pushCmdSeqMap[e]))), !1) : (this.pushCmdSeqMap[e] = { "seq": t, "time": o }, !0) }, A.prototype.createOffer = function (e) { var t, A, r, i = this, o = l.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_CREATE_PUBLISH_SESSION_SUCCESS; this.peerConnection = new RTCPeerConnection(e), this.peerConnection.onicecandidate = function (e) { i.onIceCandidate(e) }, this.peerConnection.onsignalingstatechange = function (e) { i.onSignalStateChange(e) }, this.peerConnection.connectionState ? this.peerConnection.onconnectionstatechange = function (e) { i.onConnectionStateChange(e) } : this.logger.info("".concat(o, " not support connectionState")), this.peerConnection.oniceconnectionstatechange = function (e) { i.onIceConnectionStateChange(e) }, this.streamCenter.isDataChannelEnabled && (this.dataChannel = this.peerConnection.createDataChannel(this.streamId), this.dataChannel.binaryType = "arraybuffer", this.dataChannel.onopen = function (e) { i.logger.info(o + " " + i.streamId + " data channel open"), i.dataChannelState = 1 }, this.dataChannel.onclose = function (e) { i.logger.error(o + " " + i.streamId + " data channel close ") }); var n = [], s = []; if (this.lowStream && this.lowStream.getVideoTracks().forEach(function (e) { var t, A = null === (t = i.peerConnection) || void 0 === t ? void 0 : t.addTrack(e, i.lowStream); i.sideMediaConfig.isSEIStart && A && "function" == typeof A.createEncodedStreams && i.createVideoSenderTransform(A, !0) }), this.localStream) { if (this.localStream.getTracks().forEach(function (e) { var t, A = null === (t = i.peerConnection) || void 0 === t ? void 0 : t.addTrack(e, i.localStream); i.sideMediaConfig.isSEIStart && A && "function" == typeof A.createEncodedStreams && ("video" === e.kind ? i.createVideoSenderTransform(A) : "audio" === e.kind && i.createAudioSenderTransform(A)) }), !(null === (t = this.previewer) || void 0 === t ? void 0 : t.videoTrack) && this.sideMediaConfig.isSEIStart) { this.videoInfo.bitRate || (this.videoInfo.bitRate = 50); var a = this.sideMediaConfig.track = this.addCanvasStreamVideoTrack(), c = this.peerConnection.addTrack(a, this.localStream); c && "video" == a.kind && "function" == typeof c.createEncodedStreams && this.createVideoSenderTransform(c) } (null === (A = this.previewer) || void 0 === A ? void 0 : A.videoTrack) && (n = [null === (r = this.previewer) || void 0 === r ? void 0 : r.videoTrack]), s = this.localStream.getAudioTracks(), n.length > 0 && this.logger.info(o + " " + this.streamId + " video device: " + n[0].label), s.length > 0 && this.logger.info(o + " " + this.streamId + " audio device: " + s[0].label) } var g = { "offerToReceiveAudio": s.length > 0 ? 1 : 0, "offerToReceiveVideo": n.length > 0 ? 1 : 0 }; this.logger.info(o + " " + this.streamId + " createOffer: " + JSON.stringify(g)); var h = this.getSpan(u.ZegoRTCLogEvent.kZegoPublishCreateOffer.event, this.parentSpanKey); this.peerConnection.createOffer(g).then(function (e) { h.setAttributes({ "sdp": u.ZegoRTCLogEvent.kZegoPublishCreateOffer.sdp(e.sdp), "is_mini": u.ZegoRTCLogEvent.kZegoPublishCreateOffer.is_mini(i.stateCenter.isMiniSdp) }), h.end(), i.onCreateOfferSuccess(e) }, function (e) { i.logger.error(o + " " + i.streamId + " create offer error " + e.toString()), i.stateCenter.reporter.setError(h, { "code": I.error.kCreateOfferError.code, "message": e.toString() }), i.publishStateUpdateError(I.error.kCreateOfferError, !0) }) }, A.prototype.sendSEI = function (e) { var t, A; if ("H264" !== this.videoCodec) return this.logger.error(l.ZEGO_WEBRTC_ACTION.PUBLISHER_SEND_SEI + " code not support"), !1; if (!this.sideMediaConfig.isSEIStart) return this.logger.error(l.ZEGO_WEBRTC_ACTION.PUBLISHER_SEND_SEI + " not enable to send sei"), !1; var r = null === (t = this.peerConnection) || void 0 === t ? void 0 : t.getSenders().filter(function (e) { return e.track && "video" === e.track.kind }); return r && "function" != typeof (null === (A = r[0]) || void 0 === A ? void 0 : A.createEncodedStreams) ? (this.logger.error(l.ZEGO_WEBRTC_ACTION.PUBLISHER_SEND_SEI + " browser not support"), !1) : this.sideMediaConfig.SEIType == s.ZegoSEIType.UserUnregister && e.byteLength <= 16 ? (this.logger.error(l.ZEGO_WEBRTC_ACTION.PUBLISHER_SEND_SEI + " inData size should greater than 16"), !1) : this.mediaSideInfos.length >= 10 ? (this.logger.error(l.ZEGO_WEBRTC_ACTION.PUBLISHER_SEND_SEI + " side info count limit"), !1) : (this.mediaSideInfos.push(e.buffer), this.lowStream && this.lowMediaSideInfos.push(e.buffer), !0) }, A.prototype.createAudioSenderTransform = function (e) { var t = e.createEncodedStreams(), A = new TransformStream({ "transform": this.encodeAudioFrame }); t.readable.pipeThrough(A).pipeTo(t.writable) }, A.prototype.encodeAudioFrame = function (e, t) { t.enqueue(e) }, A.prototype.createVideoSenderTransform = function (e, t) { void 0 === t && (t = !1); var A = e.createEncodedStreams(), r = new TransformStream({ "transform": t ? this.encodeLowVideoFrame : this.encodeVideoFrame }); A.readable.pipeThrough(r).pipeTo(A.writable) }, A.prototype.encodeSEINalu = function (e) { var t = e.byteLength, A = parseInt(t / 255), r = t % 255, i = new ArrayBuffer(1 + (A + 1) + t + 1), o = new DataView(i), n = 0; o.setUint8(n++, this.sideMediaConfig.SEIType === s.ZegoSEIType.UserUnregister ? 5 : 243); for (var a = 0; a < A; a++)o.setUint8(n++, 255); o.setUint8(n++, r); var c = new DataView(e); for (a = 0; a < (null == e ? void 0 : e.byteLength); a++)o.setInt8(n++, c.getInt8(a)); o.setInt8(n++, 128); var g = new Uint8Array(i), u = g; return this.stateCenter.seiConfig.emulationPreventionByte && (u = function (e) { for (var t = [], A = e.length, r = 0, i = 0; i < A; ++i) { var o = e[i]; o <= 3 && r >= 2 && (t.push(3), r = 0), t.push(e[i]), 0 == o ? ++r : r = 0 } var n = new Uint8Array(t); return { "output": n, "outLength": n.length } }(g).output), { "rbspView": u, "ebspLength": u.length } }, A.prototype.encodeFrame = function (e, t, A) { var r = A ? this.lowMediaSideInfos : this.mediaSideInfos; if (r.length > 0) { for (var i = new DataView(e.data), o = [], n = 0, s = 0; s < r.length; s++) { var a = this.encodeSEINalu(r[s]); n += 5 + (_ = a.ebspLength), o.push(a) } A ? this.lowMediaSideInfos = [] : this.mediaSideInfos = []; for (var c = new ArrayBuffer(n + e.data.byteLength), g = new DataView(c), u = 0, l = new h.H264Parser(i), d = 0, C = !1, I = !1; l.NextNalu();) { var E = 31 & i.getUint8(l.nalu_start + l.start_code_size); if (7 == E) C = !0, d += l.nalu_size; else if (8 == E) I = !0, d += l.nalu_size; else if (9 == E) continue; if (C && I) break } for (var p = 0; p < d; p++)g.setInt8(u++, i.getInt8(p)); for (s = 0; s < o.length; s++) { var f = o[s], B = f.rbspView, _ = f.ebspLength; g.setUint8(u++, 0), g.setUint8(u++, 0), g.setUint8(u++, 0), g.setUint8(u++, 1), g.setUint8(u++, 6); for (var m = 0; m < _; m++)g.setInt8(u++, B[m - 0]) } for (p = d; p < e.data.byteLength; p++)g.setInt8(u++, i.getInt8(p)); new Uint8Array(c), e.data = c } t.enqueue(e) }, A.prototype.onCreateOfferSuccess = function (e, t, A, r) { var i, s = this; t && (this.isUpdateSDP = !0, r && (this.updateSDPCallBack = r)), this.videoInfo.bitRate > 0 && (e.sdp = this.updateBandwidthRestriction(e.sdp, this.videoInfo.bitRate)), e.sdp = e.sdp.replace(/sendrecv/g, "sendonly"); var c = e.sdp.match(/m=application[\s\S]+datachannel[\s\S]+/) ? e.sdp.match(/m=application[\s\S]+datachannel[\s\S]+/)[0] : null; if (c) { var g = c.replace(/sendonly/, "sendrecv"); e.sdp = e.sdp.replace(c, g) } e.sdp = e.sdp.replace(/useinbandfec=\d+/, (this.videoInfo.audioBitrate ? "maxaveragebitrate=" + this.videoInfo.audioBitrate : "") + (2 === this.videoInfo.channelCount ? ";stereo=1" : ";stereo=0")), 1 === this.videoInfo.channelCount && (e.sdp = e.sdp.replace(";stereo=1", ";stereo=0")), this.localSdpOrder = e.sdp.match(/m=(.\w*)\s/g) || [], this.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_CREATE_OFFER_SUCCESS + " " + this.streamId + " local sdp revert " + this.localSdpOrder.join("")), e.sdp = a.SdpUtil.getSDPByVideDecodeType(e.sdp, this.videoCodec), this.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_CREATE_OFFER_SUCCESS + " " + this.streamId + " localSdp1 " + e.sdp.substr(0, e.sdp.length / 2)), this.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_CREATE_OFFER_SUCCESS + " " + this.streamId + " localSdp2 " + e.sdp.substr(e.sdp.length / 2)); var h = this.getSpan(u.ZegoRTCLogEvent.kZegoPublishSetLocalSdp.event, this.parentSpanKey); h.setAttributes({ "sdp": u.ZegoRTCLogEvent.kZegoPublishSetLocalSdp.sdp(e.sdp), "is_mini": u.ZegoRTCLogEvent.kZegoPublishSetLocalSdp.is_mini(this.stateCenter.isMiniSdp) }), null === (i = this.peerConnection) || void 0 === i || i.setLocalDescription(e).then(function () { return o(s, void 0, void 0, function () { return n(this, function (t) { switch (t.label) { case 0: return h.end(), [4, this.onSetLocalDescriptionSuccess(e, A)]; case 1: return t.sent(), [2] } }) }) }, function (e) { s.logger.error(l.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_CREATE_OFFER_SUCCESS + " " + s.streamId + " error " + e.toString()), s.stateCenter.reporter.setError(h, { "code": I.error.kSetLocalDescError.code, "message": e.toString() }), s.publishStateUpdateError(I.error.kSetLocalDescError, !0) }) }, A.prototype.updateBandwidthRestriction = function (e, t) { var A = "AS"; return "firefox" === this.stateCenter.browser && (t = 1e3 * (t >>> 0), A = "TIAS"), -1 === e.indexOf("b=" + A + ":") ? e.replace(/(m=video.*\r\nc=IN.*\r\n)/g, "$1b=" + A + ":" + t + "\r\n") : (e = e.replace(new RegExp("b=" + A + ":.*\r\n", "g"), "b=" + A + ":" + t + "\r\n")).replace("b=" + A + ":" + t + "\r\n", "") }, A.prototype.onSetLocalDescriptionSuccess = function (e, t) { var A, r, c, g; return o(this, void 0, void 0, function () { var o, h, d, C, E, p, f, B, _, m, Q, y, v = this; return n(this, function (n) { switch (n.label) { case 0: return this.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_SET_LOCAL_DESCRIPTION_SUCCESS + " " + this.streamId + " success"), !this.isUpdateSDP && (this.state = s.ENUM_PUBLISH_STATE.waitingOfferRsp), t && (this.videoInfo = i(i({}, this.videoInfo), t)), o = !1, h = null === (A = this.previewer) || void 0 === A ? void 0 : A.previewType, d = this.stateCenter.settingConfig, "camera" === h ? o = d.getSetting("camera_hard_encode") : "screen" === h ? o = d.getSetting("hardware_encode") : "custom" === h && (o = d.getSetting("custom_hard_encode")), C = !o, this.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_SET_LOCAL_DESCRIPTION_SUCCESS + " " + this.streamId + " ".concat(null === (r = this.previewer) || void 0 === r ? void 0 : r.previewType, " software encode: ").concat(C, ", ")), E = a.SdpUtil.getSDPByVideDecodeType(e.sdp, this.videoCodec, C, this.stateCenter.engineConfig.encodecSelectionMode), p = null === (c = this.previewer.videoTrack) || void 0 === c ? void 0 : c.getSettings(), f = (null == p ? void 0 : p.width) || this.videoInfo.width, B = (null == p ? void 0 : p.height) || this.videoInfo.height, _ = (null == p ? void 0 : p.frameRate) || this.videoInfo.frameRate, m = { "sdp": E, "width": isNaN(f) ? 100 : f, "height": isNaN(B) ? 100 : B, "frameRate": isNaN(_) ? 15 : _, "video_min_kpbs": this.videoInfo.bitRate, "video_max_kpbs": this.videoInfo.bitRate, "audio_kpbs": 48, "keyframe_intv": Math.floor((null === (g = this.videoInfo) || void 0 === g ? void 0 : g.keyFrameInterval) || 2) }, this.offerSeq = (0, s.getSeq)(), this.isUpdateSDP ? (this.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_SET_LOCAL_DESCRIPTION_SUCCESS + " " + this.streamId + " update sdp"), Q = i(i({}, m), { "seq": this.sessionSeq, "peerID": this.peerID, "type": 0 }), [4, this.signal.sendMediaDescUpdateReq(this.offerSeq, this.sessionId, Q, function (e, t, A) { }, function (e, t) { v.logger.error(l.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_SET_LOCAL_DESCRIPTION_SUCCESS + " " + v.streamId + " update sdp failed"), v.updateSDPCallBack && v.updateSDPCallBack(-1), v.publishStateUpdateError(e == s.SEND_MSG_TIMEOUT ? I.error.kUpdateMediaDescriptionTimeOut : I.error.kUpdateMediaDescriptionError) })]) : [3, 2]; case 1: return n.sent(), [2]; case 2: return this.isPeer ? (this.createSession(e, E), [2]) : (y = this.getSpan(u.ZegoRTCLogEvent.kZegoPublishSendMediaDesc.event, this.parentSpanKey), this.signal.sendMediaDesc(this.offerSeq, this.sessionId, 0, m, function (e, t, A) { y.setAttributes({ "webrtc_sid": u.ZegoRTCLogEvent.kZegoPublishSendMediaDesc.webrtc_sid(t), "mediaDescription": { "width": m.width, "height": m.height, "frameRate": m.frameRate, "video_min_kpbs": m.video_min_kpbs, "video_max_kpbs": m.video_max_kpbs, "audio_kpbs": m.audio_kpbs, "keyframe_intv": m.keyframe_intv }, "sdp": m.sdp }), y.end(), v.offerSeq == e && v.sessionId == t ? (v.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_SET_LOCAL_DESCRIPTION_SUCCESS + " " + v.streamId + " send success"), v.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_SET_LOCAL_DESCRIPTION_SUCCESS + " " + v.streamId + " send success stateNego:waiterAnswer"), v.stateNego = s.ENUM_PUBLISH_STATE_NEGO.waiterAnswer, v.state = s.ENUM_PUBLISH_STATE.waitingServerAnswer) : v.logger.error(l.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_SET_LOCAL_DESCRIPTION_SUCCESS + " " + v.streamId + " seq or sessionId is not equal") }, function (e, t) { v.stateCenter.reporter.setError(y, { "code": I.error.kMediaDescError.code, "message": e.toString() }), v.publishStateUpdateError(I.error.kMediaDescError) }), this.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_SET_LOCAL_DESCRIPTION_SUCCESS + " " + this.streamId + " call success"), [2]) } }) }) }, A.prototype.onRecvUpdateMediaDescription = function (e, t, A) { return o(this, void 0, void 0, function () { var t; return n(this, function (r) { switch (r.label) { case 0: return this.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_UPDATE_MEDIA_DESC + " " + this.streamId + " received"), this.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_UPDATE_MEDIA_DESC + " " + this.streamId + " received stateNego:waitingCandidate"), this.signal.sendUpdateMediaDescAck(e, this.sessionId, 0, this.peerID), [4, this.signal.parseRecSdp(A.sdp)]; case 1: return t = (t = r.sent()) || A.sdp, 1 == A.type ? this.onGetRemoteOfferSuccess(t) : this.publishStateUpdateError(I.error.kMediaDescError), [2] } }) }) }, A.prototype.onRecvMediaDescription = function (e, t, A) { return o(this, void 0, void 0, function () { var t, r; return n(this, function (i) { switch (i.label) { case 0: return this.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_MEDIA_DESC + " " + this.streamId + " received"), [4, this.signal.parseRecSdp(A.sdp)]; case 1: return t = (t = i.sent()) || A.sdp, (r = this.getSpan(u.ZegoRTCLogEvent.kZegoPublishRecvMediaDesc.event, this.parentSpanKey)).setAttributes({ "sdp": u.ZegoRTCLogEvent.kZegoPublishRecvMediaDesc.sdp(A.sdp), "is_mini": u.ZegoRTCLogEvent.kZegoPublishRecvMediaDesc.is_mini(this.stateCenter.isMiniSdp) }), r.end(), this.state != s.ENUM_PUBLISH_STATE.waitingServerAnswer ? (this.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_MEDIA_DESC + " " + this.streamId + " current state " + this.state + " not allowed"), [2]) : (this.stateNego = s.ENUM_PUBLISH_STATE_NEGO.waitingCandidate, this.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_MEDIA_DESC + " " + this.streamId + " received stateNego:waitingCandidate"), this.signal.sendMediaDescAck(e, this.sessionId, 0), 1 == A.type ? this.onGetRemoteOfferSuccess(t) : this.publishStateUpdateError(I.error.kMediaDescError), [2]) } }) }) }, A.prototype.getVideoSenders = function () { var e; return null === (e = this.peerConnection) || void 0 === e ? void 0 : e.getSenders().filter(function (e) { return e.track && "video" === e.track.kind }) }, A.prototype.canSetBandWidthBySender = function () { var e = this.stateCenter.browserInfo.name.toLowerCase(), t = (0, g.getVersionNumber)(this.stateCenter.browserInfo.version); return ("chrome" === e || "safari" === e || "firefox" === e && t >= 64) && "RTCRtpSender" in window && "setParameters" in window.RTCRtpSender.prototype }, A.prototype.setBandwidth = function (e, t) { return void 0 === t && (t = ""), o(this, void 0, void 0, function () { var A = this; return n(this, function (r) { return [2, new Promise(function (r) { var i, s = function s(t) { A.logger.info("zc.p.sbw set band width by sdp."); var r = "AS"; return "firefox" === A.stateCenter.browser && (e = 1e3 * (e >>> 0), r = "TIAS"), /b=AS.*(\r\n|\n)/.test(t) ? t.replace(/AS:(\d+)/, r + ":" + e) : t.replace(/m=video.*(\r\n|\n)c=.*(\r\n|\n)/, "$&b=".concat(r, ":").concat(e, "\n")) }, a = null === (i = A.getVideoSenders()) || void 0 === i ? void 0 : i.filter(function (e) { var t, r; return (null === (t = e.track) || void 0 === t ? void 0 : t.id) !== (null === (r = A.lowStream) || void 0 === r ? void 0 : r.getVideoTracks()[0].id) }); A.canSetBandWidthBySender() && (null == a ? void 0 : a.length) ? (A.logger.info("zc.p.sbw set band width by sender parameter."), null == a || a.forEach(function (i) { return o(A, void 0, void 0, function () { var A, o, a, c, g = this; return n(this, function (n) { return (A = i.getParameters()).encodings || (A.encodings = [{}]), o = 1e3 * e, a = A.encodings[0].maxBitrate, c = JSON.stringify(A.encodings[0]), A.encodings[0].maxBitrate = o, i.setParameters(A).then(function () { g.logger.info("zc.p.sbw update maxBitrate success. origin: ".concat(a, ", new: ").concat(o, " , ").concat(c, ",").concat(i.getParameters().encodings[0], " ")), r(t) }).catch(function (e) { g.logger.warn("zc.p.sbw set band width by sender parameter fail, fall back to sdp parse." + e), t && (t = s(t)), r(t) }), [2] }) }) })) : (t && (t = s(t)), r(t)) })] }) }) }, A.prototype.onGetRemoteOfferSuccess = function (e) { var t, A; return o(this, void 0, void 0, function () { var r, i, o, a, c, g, h, d, C, E, p, f, B, _, m, Q, y, v, S, D, R = this; return n(this, function (n) { switch (n.label) { case 0: if (this.videoInfo.audioBitrate && 48e3 !== this.videoInfo.audioBitrate && (e = e.replace(/maxaveragebitrate=(\d+)/, "maxaveragebitrate=" + this.videoInfo.audioBitrate)), this.remoteSdpOrder = e.match(/m=(.\w*)\s/g) || [], this.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_GET_REMOTE_DESCRIPTION + " " + this.streamId + " sdp revert " + this.remoteSdpOrder.join("")), this.setTurnTcp(), this.streamCenter.autoSwitchProtocol = this.stateCenter.settingConfig.getSetting("auto_to_tcp") || !1, r = this.stateCenter.settingConfig.getSetting("udp_max_fail_num"), !isNaN(r) && (this.streamCenter.maxUdpFailNum = r), a = (i = this.streamCenter).maxUdpFailNum, c = i.udpFailNum, this.logger.info("zp.oro.0  autoToTcp: ".concat(o = i.autoSwitchProtocol, ", udpFailNum: ").concat(c, ", maxUdpFailNum: ").concat(a, ".")), o && !this._turnToTcp && c >= a && (this.logger.info("zp.oro.0 switch to tcp."), this._turnToTcp = !0), (g = this.stateCenter.settingConfig.getSetting("udp_or_tcp", !0)) && (this.logger.info("zp.oro.0 setting udp_or_tcp " + g), this._turnToTcp = "tcp" === g), this._turnToTcp && (null === (t = e.match(/candidate.*/g)) || void 0 === t || t.forEach(function (t) { var A = t.replace(/udp/, "tcp"); A.includes(" tcptype ") || (A = A.replace(" typ host ", " typ host tcptype passive ")), e = e.replace(t, A) })), this.logger.info("zp.oro.0 " + this.streamId + " sdp revert " + this.localSdpOrder.join("") + " " + this.remoteSdpOrder.join("")), this.localSdpOrder.join() !== this.remoteSdpOrder.join() && this.localSdpOrder.length == this.remoteSdpOrder.length && (h = new RegExp("[\\s\\S]*" + this.remoteSdpOrder[0]).exec(e)[0].replace(this.remoteSdpOrder[0], ""), d = [], C = "", this.localSdpOrder.forEach(function (t) { var A = R.remoteSdpOrder.findIndex(function (e) { return e == t }), r = new RegExp(t + "[\\s\\S]*" + (R.remoteSdpOrder[A + 1] || "")).exec(e)[0].replace(R.remoteSdpOrder[A + 1], ""), i = /a=mid:(\w)/.exec(r)[1]; d.push(i), C += r || "" }), e = h.replace(/a=group:BUNDLE.*/, "a=group:BUNDLE " + d.join(" ")) + C, this.localSdpOrder = [], this.remoteSdpOrder = []), E = e.match(/m=video(.|\r|\n)*a=rtpmap(.|\r|\n)*(a=fmtp:(\d+).*)/), "chrome" == this.stateCenter.browser && (p = 0, f = 0, this.videoInfo.bitRate && "target" === this.videoInfo.startBitrate && (p = this.videoInfo.bitRate), this.videoInfo.minBitrate ? f = this.videoInfo.minBitrate : "screen" === this.previewer.previewType && (B = function (e) { var t = 0, A = e.frameRate, r = e.width * e.height * (A <= 30 ? A : 30); return "number" == typeof r ? (t = r <= 3888e3 ? 200 : r <= 6912e3 ? 400 : r <= 15552e3 ? 700 : r <= 27648e3 ? 1e3 : 2e3) > e.bitRate && (t = e.bitRate) : t = parseInt(.6 * e.bitRate + ""), { "minBitrate": t, "resolution": r } }(this.videoInfo), f = B.minBitrate, this.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_GET_REMOTE_DESCRIPTION + " " + this.streamId + " resolution: ".concat(B.resolution, ", min bitrate: ").concat(f))), _ = [], f && _.push("x-google-min-bitrate=".concat(f)), p && _.push("x-google-start-bitrate=".concat(p)), null !== E && _.length && (m = E[3], Q = "".concat(m, ";").concat(_.join(";")), e = e.replace(m, Q))), !(this.videoInfo.bitRate > 0)) return [3, 5]; n.label = 1; case 1: return n.trys.push([1, 3, , 4]), [4, this.setBandwidth(this.videoInfo.bitRate, e)]; case 2: return e = n.sent(), [3, 4]; case 3: return y = n.sent(), this.logger.error(l.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_GET_REMOTE_DESCRIPTION + JSON.stringify(y)), [3, 4]; case 4: null == (v = this.getVideoSenders()) || v.forEach(function (e) { var t, A, r, i, o, n; if (e && e.getParameters && e.setParameters) { var s = e.getParameters(); if (s.encodings && 0 != s.encodings.length || (s.encodings = [{}]), (null === (t = e.track) || void 0 === t ? void 0 : t.id) == (null === (A = R.lowStream) || void 0 === A ? void 0 : A.getVideoTracks()[0].id)) { var a = null === (r = R.previewer) || void 0 === r ? void 0 : r.lowStreamConfig.bitRate; a && (s.encodings[0].maxBitrate = 1e3 * a) } else { var c = R.lastPublishStats.frameWidth, g = (null === (o = null === (i = R.previewer) || void 0 === i ? void 0 : i.cameraMaxResolution) || void 0 === o ? void 0 : o.maxWidth) || 0, u = null === (n = R.previewer.videoTrack) || void 0 === n ? void 0 : n.getSettings().width, l = c ? Math.min(g, c) : g; if (g && u) { var h = Math.max(l / u, 1); s.encodings[0].scaleResolutionDownBy = h } } e.setParameters(s) } }), n.label = 5; case 5: return this.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_GET_REMOTE_DESCRIPTION + " " + this.streamId + " remoteSdp:", e), S = { "type": "answer", "sdp": e, "toJSON": function toJSON() { } }, (D = this.getSpan(u.ZegoRTCLogEvent.kZegoPublishSetRemoteSdp.event, this.parentSpanKey)).setAttributes({ "sdp": u.ZegoRTCLogEvent.kZegoPublishSetRemoteSdp.sdp(S.sdp), "is_mini": u.ZegoRTCLogEvent.kZegoPublishSetRemoteSdp.is_mini(this.stateCenter.isMiniSdp), "webrtc_sid": u.ZegoRTCLogEvent.kZegoPublishSetRemoteSdp.webrtc_sid(this.sessionId) }), null === (A = this.peerConnection) || void 0 === A || A.setRemoteDescription(new RTCSessionDescription(S)).then(function () { R.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_GET_REMOTE_DESCRIPTION + " " + R.streamId + " set success"), D.end(), R.stateNego == s.ENUM_PUBLISH_STATE_NEGO.iceConnected && R.updateSDPCallBack && (R.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_GET_REMOTE_DESCRIPTION + " " + R.streamId + " update sdp success"), R.updateSDPCallBack(0), R.updateSDPCallBack = void 0, R.isUpdateSDP = !1) }, function (e) { R.logger.error(l.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_GET_REMOTE_DESCRIPTION + " " + R.streamId + " failed: " + e.toString()), D.setAttributes({ "error": I.error.kSetRemoteDescError.code, "message": e.toString() }), D.end(), R.publishStateUpdateError(I.error.kSetRemoteDescError, !0) }), this.state = s.ENUM_PUBLISH_STATE.waitingServerICE, this.logger.debug(l.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_GET_REMOTE_DESCRIPTION + " " + this.streamId + " call success"), [2] } }) }) }, A.prototype.onIceConnectionStateChange = function (e) { var t, A = this; if (this.state != s.ENUM_PUBLISH_STATE.stop && null != this.peerConnection) { this.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_ICE_CONNECTION_STATE_CHANGE + " " + this.streamId + " ice state: " + this.peerConnection.iceConnectionState); var r = this.getSpan(u.ZegoRTCLogEvent.kZegoRTCIceStateChanged.event, this.parentSpanKey, u.ZegoRTCLogEvent.kZegoTaskRTCPublish.event); if (r.setAttributes({ "ice_state": u.ZegoRTCLogEvent.kZegoRTCIceStateChanged.ice_state(this.peerConnection.iceConnectionState) }), "connected" === this.peerConnection.iceConnectionState) { if (this.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_ICE_CONNECTION_STATE_CHANGE + " " + this.streamId + " connected state " + this.state + " ?" + (null === (t = this.peerConnection) || void 0 === t ? void 0 : t.connectionState)), this.reportBeginTime) { var i = (new Date).getTime() - this.reportBeginTime; this.reportSpan.setAttributes({ "publish_begin_time": E.publish_begin_time(i) }), this.reportBeginTime = 0 } if (this.stateCenter.reporter.spanEnd({ "key": u.ZegoRTCLogEvent.kZegoPublishIceConnected.event, "par": this.streamId }, { "webrtc_sid": this.sessionId }), this.stateNego = s.ENUM_PUBLISH_STATE_NEGO.iceConnected, this.answerSdpTime) { var o = (new Date).getTime() - this.answerSdpTime; this.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_ICE_CONNECTION_STATE_CHANGE + " " + this.streamId + " ice time " + o) } this.isProbeDispatch = !1, this.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_ICE_CONNECTION_STATE_CHANGE + " " + this.streamId + " stateNego:iceConnected"), this.negoTimer && (clearTimeout(this.negoTimer), this.negoTimer = null), null != this.iceDisconnectedTimer && (clearTimeout(this.iceDisconnectedTimer), this.iceDisconnectedTimer = null), this.peerConnection.connectionState || (this.publishEvent ? this.publishSuccess() : (this.firstGetStatsTimer && clearTimeout(this.firstGetStatsTimer), this.firstGetStatsTimer = null, this.firstGetStatsTimer = setTimeout(function () { var e; A.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_ICE_CONNECTION_STATE_CHANGE + " get first stats state " + A.state), A.state !== s.ENUM_PUBLISH_STATE.publishing && (null === (e = A.peerConnection) || void 0 === e || e.getStats().then(function (e) { A.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_ICE_CONNECTION_STATE_CHANGE + " get first stats suc"), e.size > 0 && A.publishSuccess() })) }, 1e3))) } else "closed" === this.peerConnection.iceConnectionState ? (r.end(), this.stateNego = s.ENUM_PUBLISH_STATE_NEGO.iceClosed, this.checkPublishConnectionFailedState(this.peerConnection.iceConnectionState)) : "failed" === this.peerConnection.iceConnectionState ? (r.end(), this.stateNego = s.ENUM_PUBLISH_STATE_NEGO.iceFailed, this.checkPublishConnectionFailedState(this.peerConnection.iceConnectionState)) : "disconnected" === this.peerConnection.iceConnectionState && (r.end(), this.logger.warn(l.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_ICE_CONNECTION_STATE_CHANGE + " ice disconnected "), this.stateNego = s.ENUM_PUBLISH_STATE_NEGO.iceDisconnected, this.iceDisconnectedTimer || (this.iceDisconnectedTimer = setTimeout(function () { A.checkPublishConnectionFailedState("disconnected") }, this.iceDisconnectedMaxTime))) } }, A.prototype.onIceCandidate = function (e) { this.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_ICE_CANDIDATE + " " + this.streamId + " candidate" + e.candidate), e.candidate && (this.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_ICE_CANDIDATE + " " + this.streamId + " candidate" + e.candidate.candidate), this.state < s.ENUM_PUBLISH_STATE.connecting || this.state == s.ENUM_PUBLISH_STATE.stop ? this.candidateInfo.push({ "candidate": e.candidate.candidate, "sdpMid": e.candidate.sdpMid, "sdpMLineIndex": e.candidate.sdpMLineIndex }) : this.sendCandidateInfo([{ "candidate": e.candidate.candidate, "sdpMid": e.candidate.sdpMid, "sdpMLineIndex": e.candidate.sdpMLineIndex }])) }, A.prototype.sendCandidateInfo = function (e) { var t = this; if (this.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_SEND_CANDIDATE_INFO + " " + this.streamId + " called"), !(e = e.filter(function (e) { return e.candidate.indexOf("relay") > 0 })) || e.length < 1) this.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_SEND_CANDIDATE_INFO + " " + this.streamId + " cancelled"); else { var A = this.getSpan(u.ZegoRTCLogEvent.kZegoPublishSendIceCandidate.event, this.parentSpanKey); A.setAttributes({ "candidate_info": u.ZegoRTCLogEvent.kZegoPublishSendIceCandidate.candidate_info(e) }), this.stateNego !== s.ENUM_PUBLISH_STATE_NEGO.iceConnected && (this.stateNego = s.ENUM_PUBLISH_STATE_NEGO.sendCandidate), this.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_SEND_CANDIDATE_INFO + " " + this.streamId + " stateNego:sendCandidate"), this.signal.sendCandidateInfo((0, s.getSeq)(), this.sessionId, e, function (e, r, i) { t.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_SEND_CANDIDATE_INFO + " " + t.streamId + " send success"), A.end() }, function (e, r) { t.logger.error(l.ZEGO_WEBRTC_ACTION.PUBLISHER_SEND_CANDIDATE_INFO + " " + t.streamId + " failed to send: " + e.toString()), t.stateCenter.reporter.setError(A, { "code": I.error.kCandidateError.code, "message": e.toString() }), t.publishStateUpdateError(I.error.kCandidateError) }) } }, A.prototype.onConnectionStateChange = function (e) { var t, A = null === (t = this.peerConnection) || void 0 === t ? void 0 : t.connectionState; this.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_CONNECTION_STATE_CHANGE + " " + this.streamId + " conn state: " + A), "connected" === A && this.state !== s.ENUM_PUBLISH_STATE.publishing && this.publishSuccess() }, A.prototype.onSignalStateChange = function (e) { this.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_CONNECTION_STATE_CHANGE + " " + this.streamId + " signal state: " + e.target.signalingState), this.state != s.ENUM_PUBLISH_STATE.stop && null != this.peerConnection && "closed" === e.target.signalingState && (this.dataReport.addEvent(this.reportSeq, "IceClosed"), this.stateNego = s.ENUM_PUBLISH_STATE_NEGO.iceClosed, this.checkPublishConnectionFailedState(this.peerConnection.iceConnectionState)) }, A.prototype.onRecvCandidateInfo = function (e, t, A) { var r, i = this; this.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_CANDIDATE_INFO + " " + this.streamId + " received " + JSON.stringify(A.infos)); var o = this.getSpan(u.ZegoRTCLogEvent.kZegoPublishRecvIceCandidate.event, this.parentSpanKey); if (o.setAttributes({ "candidate_info": u.ZegoRTCLogEvent.kZegoPublishRecvIceCandidate.candidate_info(A.infos) }), o.end(), this.state == s.ENUM_PUBLISH_STATE.waitingServerICE) { this.signal.sendCandidateInfoAck(e, this.sessionId, 0), this.sendCandidateInfo(this.candidateInfo), this.candidateInfo = []; for (var n = 0; n < A.infos.length; n++) { var a = { "sdpMid": A.infos[n].sdpMid, "sdpMLineIndex": A.infos[n].sdpMLineIndex, "candidate": A.infos[n].candidate }; this.logger.debug(l.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_CANDIDATE_INFO + "" + this.streamId + " candidate " + a.candidate), null === (r = this.peerConnection) || void 0 === r || r.addIceCandidate(new RTCIceCandidate(a)).then(function () { i.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_CANDIDATE_INFO + " " + i.streamId + " add success") }, function (e) { i.logger.error(l.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_CANDIDATE_INFO + " " + i.streamId + " add error " + e.toString()), i.publishStateUpdateError(I.error.kCandidateError, !0) }) } this.state = s.ENUM_PUBLISH_STATE.connecting, this.getSpan(u.ZegoRTCLogEvent.kZegoPublishIceConnected.event, this.parentSpanKey, "", !0).setAttributes({ "webrtc_sid": this.sessionId }) } else this.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_CANDIDATE_INFO + " " + this.streamId + " current state " + this.state + " not allowed") }, A.prototype.onRecvCloseSession = function (e, t, A) { var r = this; this.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_CLOSE_SESSION + " " + this.streamId + " " + JSON.stringify(A)); var i = this.getSpan(u.ZegoRTCLogEvent.kZegoRTCRecvCloseSession.event, u.ZegoRTCLogEvent.kZegoTaskRTCPublish.event); i.setAttributes({ "err_info": u.ZegoRTCLogEvent.kZegoRTCRecvCloseSession.err_info(A.err_info || ""), "reason_info": null == A ? void 0 : A.reason }), i.end(), this.stateCenter.reporter.spanSetAttributes({ "key": u.ZegoRTCLogEvent.kZegoTaskRTCPublish.event, "par": this.streamId }, { "denied_info": u.ZegoRTCLogEvent.kZegoTaskRTCPublish.denied_info(A.err_info), "stop_reason": u.ZegoRTCLogEvent.kZegoTaskRTCPublish.stop_reason("DenyStop") }), this.signal.sendCloseSessionAck(e, this.sessionId, 0); var o = A.err_info ? JSON.parse(A.err_info.toLowerCase()) : {}, n = o.action ? o.action : null, s = 1 * A.reason, a = JSON.parse(JSON.stringify(I.error.kPublishSessionClosedError)); a.message += " reason:".concat(s, " ").concat(n ? " action:" + n : "", " ").concat((null == o ? void 0 : o.err) ? " err:" + (null == o ? void 0 : o.err) : ""), a.message += ";".concat((0, d.translate)(s, n, null == o ? void 0 : o.err)), 1011 === o.err && (a = I.error.kMediaServerForbidError), 1014 === o.err && (a = I.error.kPublishTokenExpiredError), this.negoTimer && clearTimeout(this.negoTimer); var c = !([4, 8, 10, 11, 12, 14, 18, 24, 26, 27, 28, 32].includes(s) || [2, 3, 4, 5, 6].includes(n)), g = !1; if (!this._turnToTcp) { if ([8, 10].includes(s) || [18, 15].includes(s) && 2 === n && [3001, 3002].includes(o.err)) { this.streamCenter.udpFailNum++; var h = this.streamCenter; h.autoSwitchProtocol && h.udpFailNum >= h.maxUdpFailNum && (this.isPeer = !1, this.streamCenter.setIsPeer(!1), g = !0) } else this._turnToTcp || (this.streamCenter.udpFailNum = 0); var C = this.gwNodeList.findIndex(function (e) { return e == r.gwNode }) === this.gwNodeList.length - 1, E = [3001, 3002, 3003, 3004, 3005, 3006, 3007, 3008].includes(o.err); C && E && (this.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_CLOSE_SESSION + " " + this.streamId + " switch tcp by all fail"), this.stateCenter.turnToTcp = !0) } this.publishStateUpdateError(a, c, o, g) }, A.prototype.onRecvResetSession = function (e, t, A) { if (this.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_RESET_SESSION + " " + this.streamId + " received "), this.getSpan(u.ZegoRTCLogEvent.kZegoRTCRecvResetSession.event, u.ZegoRTCLogEvent.kZegoTaskRTCPublish.event).end(), t == this.sessionId) { this.signal.sendCloseSessionAck(e, this.sessionId, 0); var r = I.error.kPublishSessionClosedError; this.negoTimer && clearTimeout(this.negoTimer), this.publishStateUpdateError(r) } else this.logger.error(l.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_RESET_SESSION + " " + this.streamId + " cannot find session") }, A.prototype.onRecvPublishEvent = function (e, t, A) { var r; this.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_PUBLISH_EVENT + " " + this.streamId + " received"); var i = this.getSpan(u.ZegoRTCLogEvent.kZegoRTCPublishEvent.event, this.parentSpanKey, u.ZegoRTCLogEvent.kZegoTaskRTCPublish.event); i.setAttributes({ "event_state": u.ZegoRTCLogEvent.kZegoRTCPublishEvent.event_state(A.event), "webrtc_sid": t }), i.end(), this.firstGetStatsTimer && (clearTimeout(this.firstGetStatsTimer), this.firstGetStatsTimer = null); var o = null === (r = this.peerConnection) || void 0 === r ? void 0 : r.connectionState; this.publishEvent = !0, (o ? "connected" === o : this.stateNego === s.ENUM_PUBLISH_STATE_NEGO.iceConnected && this.state != s.ENUM_PUBLISH_STATE.publishing) && 0 == A.event && this.publishSuccess() }, A.prototype.onRecvClientInfo = function (e, t, A) { this.stateCenter.clientIP !== A.clientip && this.logger.warn(l.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_CLIENT_INFO + " client ip changed " + this.stateCenter.clientIP + " " + A.clientip), this.stateCenter.clientIP = A.clientip, this.peerID = A.peer_id, this.streamConnectIP = A.clientip, this.stateCenter.isMultiOuter = this.isMultiOuter(), this.sideMediaConfig.isSEIStart && this.sideMediaConfig.SEIType == s.ZegoSEIType.UserUnregister && this.sideMediaConfig.unregisterSeiFilter && this.sendSEIUUID(); var r = this.previewer; if (r && null !== r.activateSEIConfig) { var i = null == r ? void 0 : r.activateSEIConfig; this.activateSEIInsert(i.action, i.infoType) } }, A.prototype.sendSEIUUID = function () { var e = this; this.logger.info("zc.ssuid call: " + this.sideMediaConfig.unregisterSeiFilter), this.signal.gw.mediaStreamSEIUUIDReq((0, s.getSeq)(), this.sessionId, this.peerID, this.sideMediaConfig.unregisterSeiFilter).then(function (t) { var A; e.logger.info("zc.ssuid success"), 0 == (null === (A = null == t ? void 0 : t.usr_sei_filter) || void 0 === A ? void 0 : A.result) && (e.sideMediaConfig.uuidSend = !0) }).catch(function (t) { e.logger.error("zc.ssuid failed") }) }, A.prototype.checkPublishConnectionFailedState = function (e) { this.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_ICE_CONNECTION_STATE_CHANGE + " streamID " + this.streamId, " state " + this.state + " connectionState " + e), this.publishStateUpdateError(I.error.kMediaConnectionError) }, A.prototype.setPublishQualityTimer = function () { var e = this; null == this.qualityTimer && (this.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_SET_PLAYER_QUALITY_TIMER + " " + this.streamId + " called"), this.clearPublishQualityTimer(), this.qualityTimer = setInterval(function () { e.peerConnectionGetStats() }, this.qualityTimeInterval), this.lastPublishStats = { "audioPacketsLost": 0, "videoPacketsLost": 0, "videoPacketsSent": 0, "audioPacketsSent": 0, "audioRetransmittedPacketsSent": 0, "videoTime": (new Date).getTime(), "audioTime": (new Date).getTime(), "time": 0, "audioBytesSent": 0, "videoBytesSent": 0, "framesEncoded": 0, "framesSent": 0, "videoRetransmittedPacketsSent": 0 }, this.qualitySeq = (0, s.getSeq)(), this.qualityCount = 0) }, A.prototype.getConnectionStatsPromiseList = function () { var e = this, t = []; return this.localStream.getTracks().forEach(function (A) { e.peerConnection && t.push(e.peerConnection.getStats(A)) }), t }, A.prototype.peerConnectionGetStats = function () { var e = this; if (this.peerConnection) { var t = this.getConnectionStatsPromiseList(); "chrome" == this.stateCenter.browser && t.push(new Promise(function (t) { var A; try { var r = null === (A = e.peerConnection) || void 0 === A ? void 0 : A.getStats(function (e) { return t(e) }, function (e) { t(null) }); "function" == typeof (null == r ? void 0 : r.catch) && r.catch(function (e) { t(null) }) } catch (e) { t(null) } })), Promise.all(t).then(function (t) { 0 !== t.length && e.getPublishStats(t.filter(function (e) { return e instanceof RTCStatsReport }), t[t.length - 1] instanceof RTCStatsReport ? null : t[t.length - 1]) }).catch(function (t) { e.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_SET_PLAYER_QUALITY_TIMER + " " + e.streamId + " getStats error " + t.toString()) }) } }, A.prototype.getPublishStats = function (e, t) { var A, r, i, o, n = this; if (e) { for (var a, c = document.querySelectorAll("video, audio"), u = 0; u < c.length; u++)c[u].srcObject === this.localStream && (a = c[u]); var h = this.streamCenter.checkPreview(this.localStream), d = { "scenario": this.stateCenter.scenario, "sampleTimeWindow": this.qualityTimeInterval, "audioCodec": "opus", "audioTargetBitrate": this.videoInfo.audioBitrate / 1e3 || 0, "audioBitrate": 0, "videoTargetBitrate": this.videoInfo.bitRate || 0, "videoTargetFPS": this.videoInfo.frameRate || 0, "videoBitrate": 0, "audioFPS": 0, "audioLevel": 0, "audioPacketsLost": 0, "totalAudioEnergy": 0, "totalSamplesDuration": 0, "audioPacketsLostRate": 0, "videoFPS": 0, "nackCount": 0, "pliCount": 0, "audioQuality": 0, "videoQuality": 0, "frameHeight": 0, "frameWidth": 0, "videoTransferFPS": 0, "videoPacketsLost": 0, "videoPacketsLostRate": 0, "totalRoundTripTime": 0, "currentRoundTripTime": 0, "googBandwidthLimitedResolution": void 0, "videoCodecName": "", "audioCodecName": "", "googCpuLimitedResolution": void 0, "googAvailableSendBandwidth": 0, "googActualEncBitrate": 0, "googTargetEncBitrate": 0, "googFrameWidthInput": 0, "googFrameHeightInput": 0, "googFrameRateInput": 0, "qualityLimitationReason": "", "codecImplementationName": "", "videoMuteState": (null === (A = null == h ? void 0 : h.videoTrack) || void 0 === A ? void 0 : A.enabled) ? "0" : "1", "audioMuteState": this.localStream.getAudioTracks().length > 0 && this.localStream.getAudioTracks()[0].enabled ? "0" : "1", "soundLevel": null === (r = this.previewer) || void 0 === r ? void 0 : r.soundLevel, "muted": a ? a.muted : void 0, "paused": a ? a.paused : void 0, "volume": a ? a.volume : void 0, "sinkId": a ? a.sinkId : void 0 }, C = this.lastPublishStats.time, I = 0, E = 0, p = 0, f = 0, B = 0, _ = 0; if (e.forEach(function (e) { var t = !1; e.forEach(function (e) { "track" == e.type && (t = !0) }), e.forEach(function (e) { if (("outbound-rtp" == e.type || "ssrc" == e.type && null != e.bytesSent) && "audio" == e.mediaType) 0 != C && (d.audioBitrate = 8 * (e.bytesSent - n.lastPublishStats.audioBytesSent) / (e.timestamp - C), e.retransmittedPacketsSent = e.retransmittedPacketsSent || 0, e.packetsSent = e.packetsSent || 0, d.audioFPS = (e.packetsSent - (e.retransmittedPacketsSent - n.lastPublishStats.audioRetransmittedPacketsSent) - n.lastPublishStats.audioPacketsSent) / (e.timestamp - C) * 1e3 || 0, p = (e.retransmittedPacketsSent - n.lastPublishStats.audioRetransmittedPacketsSent) / (e.packetsSent - n.lastPublishStats.audioPacketsSent)), d.audioBitrate < 0 && (d.audioBitrate = 0), n.lastPublishStats.audioBytesSent = e.bytesSent, n.lastPublishStats.time = e.timestamp, n.lastPublishStats.audioPacketsSentTimeStamp = e.packetsSent - n.lastPublishStats.audioPacketsSent, n.lastPublishStats.audioPacketsSent = e.packetsSent, n.lastPublishStats.audioRetransmittedPacketsSent = e.retransmittedPacketsSent; else if (("outbound-rtp" == e.type || "ssrc" == e.type && null != e.bytesSent) && "video" == e.mediaType) d.isHardwareEncode = function (e) { if (e) { var t = null == e ? void 0 : e.toLocaleLowerCase(); if ("unknown" !== t) return "openh264" !== t && "libvpx" !== t } }(e.encoderImplementation), 0 != C && (d.videoBitrate = 8 * (e.bytesSent - n.lastPublishStats.videoBytesSent) / (e.timestamp - C), d.videoFPS = 1e3 * (e.framesEncoded - n.lastPublishStats.framesEncoded) / (e.timestamp - C), f = (e.retransmittedPacketsSent - n.lastPublishStats.videoRetransmittedPacketsSent) / (e.packetsSent - n.lastPublishStats.videoPacketsSent)), d.videoBitrate < 0 && (d.videoBitrate = 0), d.videoFPS < 0 && (d.videoFPS = 0), d.nackCount = e.nackCount, d.pliCount = e.pliCount, d.qualityLimitationReason = e.qualityLimitationReason, n.lastPublishStats.videoBytesSent = e.bytesSent, n.lastPublishStats.framesEncoded = e.framesEncoded, n.lastPublishStats.time = e.timestamp, n.lastPublishStats.videoPacketsSentTimeStamp = e.packetsSent - n.lastPublishStats.videoPacketsSent, n.lastPublishStats.videoPacketsSent = e.packetsSent, n.lastPublishStats.videoRetransmittedPacketsSent = e.retransmittedPacketsSent, t || n.vTrackStats(C, d, e); else if ("remote-inbound-rtp" == e.type && "video" == e.kind) { e.packetsLost > 0 && (d.videoPacketsLost = e.packetsLost); var A = e.packetsLost - n.lastPublishStats.videoPacketsLost; d.videoPacketsLostRate = A > 0 ? A / n.lastPublishStats.videoPacketsSentTimeStamp : 0, e.packetsLost > 0 && (n.lastPublishStats.videoPacketsLost = e.packetsLost), n.lastPublishStats.videoTime = e.timestamp, E = 1e3 * e.roundTripTime, _ = e.jitter } else if ("remote-inbound-rtp" == e.type && "audio" == e.kind) { e.packetsLost > 0 && (d.audioPacketsLost = e.packetsLost); var r = e.packetsLost - n.lastPublishStats.audioPacketsLost; d.audioPacketsLostRate = r > 0 ? r / n.lastPublishStats.audioPacketsSentTimeStamp : 0, e.packetsLost > 0 && (n.lastPublishStats.audioPacketsLost = e.packetsLost), n.lastPublishStats.audioTime = e.timestamp, I = 1e3 * e.roundTripTime, B = e.jitter } else "media-source" == e.type && ("audio" == e.kind || e.id.toLowerCase().indexOf("audio") >= 0) ? (d.audioLevel = e.audioLevel || 0, d.totalAudioEnergy = e.totalAudioEnergy, d.totalSamplesDuration = e.totalSamplesDuration) : "track" == e.type && ("video" == e.kind || e.id.indexOf("video") >= 0 || e.frameWidth) ? n.vTrackStats(C, d, e) : "candidate-pair" == e.type && (null != e.totalRoundTripTime && (d.totalRoundTripTime = e.totalRoundTripTime), null != e.currentRoundTripTime && (d.currentRoundTripTime = e.currentRoundTripTime)) }) }), t && t.result().forEach(function (e) { "ssrc" == e.type && e.names().indexOf("googBandwidthLimitedResolution") >= 0 && (d.googBandwidthLimitedResolution = e.stat("googBandwidthLimitedResolution")), "ssrc" == e.type && "video" == e.stat("mediaType") && e.names().indexOf("googCodecName") >= 0 && (d.videoCodecName = e.stat("googCodecName")), "ssrc" == e.type && "audio" == e.stat("mediaType") && e.names().indexOf("googCodecName") >= 0 && (d.audioCodecName = e.stat("googCodecName")), "ssrc" == e.type && e.names().indexOf("googCpuLimitedResolution") >= 0 && (d.googCpuLimitedResolution = e.stat("googCpuLimitedResolution")), "ssrc" == e.type && e.names().indexOf("googFrameWidthInput") >= 0 && (d.googFrameWidthInput = e.stat("googFrameWidthInput")), "ssrc" == e.type && e.names().indexOf("googFrameHeightInput") >= 0 && (d.googFrameHeightInput = e.stat("googFrameHeightInput")), "ssrc" == e.type && e.names().indexOf("googFrameRateInput") >= 0 && (d.googFrameRateInput = e.stat("googFrameRateInput")), "ssrc" == e.type && e.names().indexOf("codecImplementationName") >= 0 && (d.codecImplementationName = e.stat("codecImplementationName")), "VideoBwe" == e.type && e.names().indexOf("googAvailableSendBandwidth") >= 0 && (d.googAvailableSendBandwidth = e.stat("googAvailableSendBandwidth")), "VideoBwe" == e.type && e.names().indexOf("googActualEncBitrate") >= 0 && (d.googActualEncBitrate = e.stat("googActualEncBitrate")), "VideoBwe" == e.type && e.names().indexOf("googTargetEncBitrate") >= 0 && (d.googTargetEncBitrate = e.stat("googTargetEncBitrate")), "VideoBwe" == e.type && e.names().indexOf("googRetransmitBitrate") >= 0 && (d.googRetransmitBitrate = e.stat("googRetransmitBitrate")) }), "chrome" === this.stateCenter.browser) { var m = null === (i = navigator.userAgent) || void 0 === i ? void 0 : i.match(/Chrome\/(\d+)/); parseInt(m && m[1] || "100") <= 91 && d.isHardwareEncode && this.handleEncBitrate(Number.parseInt(d.googTargetEncBitrate), Number.parseInt(d.googActualEncBitrate), Number.parseInt(d.googRetransmitBitrate)) } E = isNaN(E) || E < 0 ? 0 : E, f = isNaN(f) || f < 0 ? 0 : f, _ = isNaN(_) || _ < 0 ? 0 : _, I = isNaN(I) || I < 0 ? 0 : I, p = isNaN(p) || p < 0 ? 0 : p, B = isNaN(B) || B < 0 ? 0 : B; var Q = g.ClientUtil.getNetQuality(E, f, _), y = g.ClientUtil.getNetQuality(I, p, B); if (d.videoQuality = C > 0 ? g.ClientUtil.quality2QualityGrade(Q) : 0, d.audioQuality = C > 0 ? g.ClientUtil.quality2QualityGrade(y) : 0, this.stateCenter.networkState !== s.ENUM_NETWORK_STATE.offline && "disconnected" !== (null === (o = this.peerConnection) || void 0 === o ? void 0 : o.connectionState) || (d.videoQuality = s.QualityGrade.Die, d.audioQuality = s.QualityGrade.Die), !d.frameHeight || !d.frameWidth) { var v = this.localStream.getVideoTracks()[0]; v && (d.frameHeight = v.getSettings().height || 0, d.frameWidth = v.getSettings().width || 0) } var S = Math.min(Q, y); this.netQuality = S, this.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_SET_PLAYER_QUALITY_TIMER + " netQuality " + S), S <= this.streamCenter.targetQuality ? this.poorQualityNum++ : this.poorQualityNum = 0, C > 0 && this.poorQualityNum >= this.streamCenter.probeStartedNum && (new Date).getTime() > this.probeTime + this.probeInterval && (this.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_SET_PLAYER_QUALITY_TIMER + " netQuality " + S + " start net probe"), this.probeState = s.ENUM_PROBE_STATE.tryProbe, this.poorQualityRetryCnt++, this.streamCenter.startNetProbe(!0, this, this.gwNodeList), this.probeTime = (new Date).getTime()), this.updateCurrentQualityStats(d), this.publishStat = d, 0 !== C && (this.uploadPublishQuality(d), this.onPublishQualityUpdate(this.streamId, this.currentQuality), this.exception.checkLocalStats(d), this.streamCenter.changeTxQuality(g.ClientUtil.quality2QualityGrade(this.netQuality), this.sessionId, this.peerID)) } }, A.prototype.updateCurrentQualityStats = function (e) { var t = e.videoBitrate, A = e.videoFPS, r = e.videoTransferFPS, o = e.frameHeight, n = e.frameWidth, s = e.videoMuteState, a = e.videoQuality, c = e.isHardwareEncode, g = e.audioBitrate, u = e.audioCodec, l = e.audioMuteState, h = e.audioQuality, d = e.audioFPS, C = { "video": i(i({}, this.currentQuality.video), { "videoBitrate": t, "videoFPS": A, "videoTransferFPS": r, "frameHeight": o, "frameWidth": n, "muteState": s, "videoQuality": a, "isHardwareEncode": c }), "audio": i(i({}, this.currentQuality.audio), { "audioBitrate": g, "audioCodec": u, "muteState": l, "audioQuality": h, "audioFPS": d }), "nackCount": e.nackCount, "pliCount": e.pliCount, "totalRoundTripTime": e.totalRoundTripTime, "currentRoundTripTime": e.currentRoundTripTime, "qualityLimitationReason": e.qualityLimitationReason }; if (void 0 !== e.videoPacketsLost) { var I = e.videoPacketsLostRate; C.video.videoPacketsLost = e.videoPacketsLost, C.video.videoPacketsLostRate = I } if (void 0 !== e.audioPacketsLost) { var E = e.audioPacketsLostRate; C.audio.audioPacketsLost = e.audioPacketsLost, C.audio.audioPacketsLostRate = E } if (void 0 !== e.muted && (C.muted = e.muted, C.paused = e.paused, C.volume = e.volume, C.sinkId = e.sinkId), void 0 !== e.googBandwidthLimitedResolution) { var p = e.videoCodecName, f = e.audioCodecName, B = e.googFrameWidthInput, _ = e.googFrameHeightInput, m = e.googCpuLimitedResolution, Q = e.googFrameRateInput, y = e.codecImplementationName, v = e.googAvailableSendBandwidth, S = e.googActualEncBitrate, D = e.googTargetEncBitrate; C.googBandwidthLimitedResolution = e.googBandwidthLimitedResolution, C.video.googCodecName = p, C.audio.googCodecName = f, C.googCpuLimitedResolution = m, C.googFrameWidthInput = B, C.googFrameHeightInput = _, C.googFrameRateInput = Q, C.codecImplementationName = y, C.googAvailableSendBandwidth = v, C.googActualEncBitrate = S, C.googTargetEncBitrate = D } this.currentQuality = C }, A.prototype.uploadPublishQuality = function (e) { if (this.qualityUpload && this.signal.isServerConnected) { var t = (new Date).getTime(); (0 == this.qualityUploadLastTime || t - this.qualityUploadLastTime >= 2e3) && (e.stream_type = "publish", e.stream_id = this.streamId, e.timeStamp = t, this.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_UPLOAD_PUBLISH_QUALITY + " " + this.streamId + " upload" + JSON.stringify(e)), this.streamCenter.updateQuality(0, e), this.qualityUploadLastTime = t) } }, A.prototype.getStopReason = function (e) { var t = "StopPublish"; return e && e.code && (t = 1103051 === e.code ? "ReachMaxAVRetryTime" : "StopPublish"), t }, A.prototype.stopPublish = function (e) { this.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_STOP_PUBLISH + "  .1 " + this.streamId + " called " + this.state + " " + JSON.stringify(e)); var t = this.getStopReason(e); if (Object.keys(this.streamCenter.publisherList).length = 1) for (var A in this.streamCenter.playerList) { var r = this.streamCenter.playerList[A].player; r.state == s.ENUM_PLAY_STATE.playing && r.broadcasterStatus == s.ENUM_BROADCASTER_STATUS.start && (this.signal && this.signal.sendBroadcasterStatus((0, s.getSeq)(), r.sessionId, 0), r.broadcasterStatus = s.ENUM_BROADCASTER_STATUS.stop) } this.sessionId && !this.closeSessionSignal && (this.signal.sendCloseSession((0, s.getSeq)(), this.sessionId, 0), this.resetPushCmdSeqMap()); var i = Date.now() - this.reportPublishStateTime; this.reportSpan.setAttributes({ "publish_state_time": E.publish_state_time(i) }), this.stateCenter.reporter.spanSetAttributes({ "key": u.ZegoRTCLogEvent.kZegoTaskRTCPublish.event, "par": this.streamId }, { "stop_reason": u.ZegoRTCLogEvent.kZegoTaskRTCPublish.stop_reason(t) }), this.uploadRTCPublishStats(), this.reportSpan.setAttributes({ "stream_id": E.stream_id(this.streamId), "webrtc_sid": E.webrtc_sid(this.sessionId), "probe_ip_cnt": E.probe_ip_cnt(this.probeIpCnt), "valid_probe_ip_cnt": E.valid_probe_ip_cnt(this.validProbeIpCnt), "poor_quality_retry_cnt": E.poor_quality_retry_cnt(this.poorQualityRetryCnt), "probe_not_trigger_retry_info": E.probe_not_trigger_retry_info(this.probeNotRetryInfos.length > 0 ? this.probeNotRetryInfos : void 0), "bitrate": E.bitrate(1e3 * this.videoInfo.bitRate), "h": E.h(this.videoInfo.height), "w": E.w(this.videoInfo.width), "cap_w": E.w(this.videoInfo.width), "cap_h": E.h(this.videoInfo.height), "fps": E.h(this.videoInfo.frameRate), "env": E.env(this.stateCenter.testEnvironment ? 3 : 1), "fail_cnt": E.fail_cnt(Math.max(this.rtcPublishCount - 1, 0)), "continuous_fail_cnt": E.continuous_fail_cnt(this.continuousFailCnt), "stop_reason": E.stop_reason(t), "error": (null == e ? void 0 : e.code) || 0, "message": (null == e ? void 0 : e.message) || "" }), this.reportSpan.end(), this.streamCenter.stopToReport(0), this.retryFailGwNodes = [], this.resetPublish(), this.isRePublish = !1, this.rtcPublishCount = 0, this.isProbeDispatch = !1, this.probeIpCnt = 0, this.validProbeIpCnt = 0, this.poorQualityRetryCnt = 0, this.probeNotRetryInfos = [], this.continuousFailCnt = 0 }, A.prototype.uploadRTCPublishStats = function () { var e, t, A, r, i, o, n, s, a, c, g, l, h, d; this.stateCenter.reporter.spanSetAttributes({ "key": u.ZegoRTCLogEvent.kZegoTaskRTCPublish.event, "par": this.streamId }, { "lsttime": u.ZegoRTCLogEvent.kZegoTaskRTCPublish.lsttime(parseInt(this.lastPublishStats.time)), "total_stat": u.ZegoRTCLogEvent.kZegoTaskRTCPublish.total_stat({ "afc": null === (e = this.lastPublishStats) || void 0 === e ? void 0 : e.audioPacketsSent, "vfc": null === (t = this.lastPublishStats) || void 0 === t ? void 0 : t.framesSent, "tfc": (null === (A = this.lastPublishStats) || void 0 === A ? void 0 : A.audioPacketsSent) + (null === (r = this.lastPublishStats) || void 0 === r ? void 0 : r.framesSent), "vb": null === (i = this.lastPublishStats) || void 0 === i ? void 0 : i.videoBytesSent, "ab": null === (o = this.lastPublishStats) || void 0 === o ? void 0 : o.audioBytesSent, "tb": (null === (n = this.lastPublishStats) || void 0 === n ? void 0 : n.videoBytesSent) + (null === (s = this.lastPublishStats) || void 0 === s ? void 0 : s.audioBytesSent), "rtp_rtt": Math.round(1e3 * (null === (a = this.publishStat) || void 0 === a ? void 0 : a.currentRoundTripTime)) || 0, "w": null === (c = this.publishStat) || void 0 === c ? void 0 : c.frameWidth, "rtp_plr": null === (g = this.publishStat) || void 0 === g ? void 0 : g.videoPacketsLostRate, "h": null === (l = this.publishStat) || void 0 === l ? void 0 : l.frameHeight, "rtp_bw": (null === (h = this.publishStat) || void 0 === h ? void 0 : h.googAvailableSendBandwidth) ? null === (d = this.publishStat) || void 0 === d ? void 0 : d.googAvailableSendBandwidth : void 0 }) }) }, A.prototype.onPublishStateUpdate = function (e, t, A, r, i, o) { }, A.prototype.onPublishQualityUpdate = function (e, t) { }, A.prototype.onDisconnect = function (e) { this.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_DISCONNECT + " " + this.streamId + " call"), this.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_DISCONNECT + " " + this.streamId + " websocket disconnect"), this.publishStateUpdateError(e || u.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kWebsocketDisconnectedError, !!e) }, A.prototype.publishSuccess = function () { var e, t, A, r; if (this.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_PUBLISH_SUCCESS + " call"), this._turnToTcp || (this.streamCenter.udpFailNum = 0), this.isUpdateSDP && this.updateSDPCallBack) return this.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_PUBLISH_SUCCESS + " " + this.streamId + " update sdp success"), this.updateSDPCallBack(0), this.updateSDPCallBack = void 0, void (this.isUpdateSDP = !1); var i = this.isRePublish ? u.ZegoRTCLogEvent.kZegoRePublish : u.ZegoRTCLogEvent.kZegoStartPublish; for (var o in this.stateCenter.reporter.spanEnd({ "key": i.event, "par": this.streamId }, { "url": p.url(null === (e = this.signal) || void 0 === e ? void 0 : e.server), "ip": p.ip(this.ip), "source_type": p.source_type("rtc"), "net_protocol": p.net_protocol(this.netProtocol), "is_center": p.is_center(null === (t = this.streamCenter.publisherList[this.streamId]) || void 0 === t ? void 0 : t.isCenterNode), "signal_consume": p.signal_consume(this.signalTime), "is_peer": p.is_peer(this.isPeer) }), this.state != s.ENUM_PUBLISH_STATE.publishing && this.onPublishStateUpdate(s.ENUM_PUBLISH_STATE_UPDATE.start, this.streamId, { "code": 0, "message": "" }, !0), this.isPeer && (this.peerFailCount = 0), this.state = s.ENUM_PUBLISH_STATE.publishing, this.continuousFailCnt = 0, this.reportPublishStateTime = Date.now(), this.streamCenter.playerList) { var n = this.streamCenter.playerList[o].player; n.state == s.ENUM_PLAY_STATE.playing && n.broadcasterStatus == s.ENUM_BROADCASTER_STATUS.stop && (this.signal && this.signal.sendBroadcasterStatus((0, s.getSeq)(), n.sessionId, 1), n.broadcasterStatus = s.ENUM_BROADCASTER_STATUS.start) } var a = this.stateCenter.settingConfig.getSetting("probe_started_num"); !isNaN(a) && (this.streamCenter.probeStartedNum = a), this.setPublishQualityTimer(); var c = 2, g = 2, h = null === (A = this.previewer) || void 0 === A ? void 0 : A.videoTrack, d = 0 !== this.localStream.getAudioTracks().length && this.localStream.getAudioTracks()[0]; (h && "live" === h.readyState && !0 === h.enabled || (null === (r = this.previewer) || void 0 === r ? void 0 : r.muteImage)) && (c = 0), d && "live" === d.readyState && !0 === d.enabled && (g = 0), this.sendStreamStatus(c, g, !0), this.streamCenter.soundLevelDelegate && this.previewer && this.previewer.startSoundLevel(), this.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_PUBLISH_SUCCESS + " call success") }, A.prototype.startSoundLevel = function () { var e; if (this.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_START_SOUND_LEVEL + " call streamID: " + this.streamId), this.localStream && 0 != this.localStream.getAudioTracks().length) try { null === (e = this.previewer) || void 0 === e || e.startSoundLevel() } catch (e) { this.logger.error(l.ZEGO_WEBRTC_ACTION.PUBLISHER_START_SOUND_LEVEL + " " + this.streamId + " get sound level failed " + e) } else this.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_START_SOUND_LEVEL + " " + this.streamId + " local stream no found") }, A.prototype.stopSoundLevel = function () { var e; this.logger.info(l.ZEGO_WEBRTC_ACTION.PUBLISHER_STOP_SOUND_LEVEL + " call streamID: " + this.streamId), null === (e = this.previewer) || void 0 === e || e.stopSoundLevel() }, A.prototype.handleEncBitrate = function (e, t, A) { var r, i = this, o = 1e3 * this.videoInfo.bitRate, n = 0; if (t > 0) { this.needIncMax || this.gotMax || (this.probeCount++, t >= .75 * e ? (this.probeCount >= 10 && this.initFitCnt >= .6 * this.probeCount && (this.gotMax = !0, this.targetRate = o), this.initFitCnt++) : this.probeCount >= 10 && this.initFitCnt / this.probeCount < .3 && (this.needIncMax = !0)); var s = g.ClientUtil.arrAvg(this.totalBitrateArray, t, 10); this.needIncMax && (s >= 1.05 * o ? this.targetRate > o && (this.targetRate -= s > e ? s - e : s - o, this.targetRate = Math.max(this.targetRate, o), this.targetRate = Math.min(this.targetRate, 2 * o), n = this.targetRate) : s < .8 * o && (0 === this.targetRate && (this.targetRate = e), this.targetRate = this.targetRate >= o ? this.targetRate + .08 * o : 1.05 * this.targetRate, this.targetRate = Math.min(this.targetRate, 2 * o), n = this.targetRate)) } if (A > 0 && A < o) { var a = g.ClientUtil.arrAvg(this.totalRetransRateArray, A, 5); this.needIncMax ? a + t > 1.05 * o && (this.targetRate -= a + t - o, this.targetRate = Math.max(this.targetRate, o - a), n = this.targetRate) : n = this.targetRate - a } else this.targetRate < o && (this.targetRate = o, n = this.targetRate); if (n > 0) { n = g.ClientUtil.arrAvg(this.totalTargetRateArray, n, 5); var c = null === (r = this.peerConnection) || void 0 === r ? void 0 : r.getSenders().filter(function (e) { return e.track && "video" === e.track.kind }); if (!c) return; var u = c.length > 1 ? c[1] : c[0] ? c[0] : null; if (!u) return; var h = u.getParameters(); h.encodings || (h.encodings = [{}]), h.encodings[0].maxBitrate = n, u.setParameters(h).catch(function (e) { i.logger.error(l.ZEGO_WEBRTC_ACTION.PUBLISHER_HANDLE_ENC_BITRATE + " " + e) }) } }, A.prototype.resetEncBitrate = function () { this.needIncMax = !1, this.probeCount = 0, this.gotMax = !1, this.initFitCnt = 0, this.targetRate = 0, this.totalBitrateArray = [], this.totalTargetRateArray = [], this.totalRetransRateArray = [] }, A.prototype.replacePublishedTrack = function (e, t, A) { return void 0 === t && (t = !1), { "errorCode": -1, "extendedData": "should install advanced module first" } }, A.prototype.sendStreamStatus = function (e, t, A, r) { var i = this; void 0 === A && (A = !1), void 0 === r && (r = 0), (A || this.camera_status !== e || this.mic_status !== t) && this.signal && (this.camera_status = e, this.mic_status = t, r++, this.signal.sendStreamStatus((0, s.getSeq)(), this.sessionId, e, t, this.streamId, function () { i.camera_status === e && i.mic_status === t && r <= 1 && i.sendStreamStatus(e, t, !0, r) })) }, A.prototype.handleSEIVideoTrack = function (e) { "add" == e && this.sideMediaConfig.track ? this.clearCanvasTimer() : "remove" != e || this.sideMediaConfig.track || (this.sideMediaConfig.track = this.addCanvasStreamVideoTrack()) }, A.prototype.addCanvasStreamVideoTrack = function () { var e = this; return this.canvas = document.createElement("canvas"), this.ctx = this.canvas.getContext("2d"), this.canvasImage = new Image, this.canvasImage.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAFFJREFUOE9jZGBgaGBgYLBnYGBwYCANHGBgYDjIyMDAcIWBgUGbNL1w1VdBBvwnUzNY26gBo2EwjNLBfjJyIiz7HADlBVB2DiEjR15lYGBYAwAypRSY53SYoAAAAABJRU5ErkJggg==", this.canvas.width = 16, this.canvas.height = 16, this.canvasTimer = setInterval(function () { var t; null === (t = e.ctx) || void 0 === t || t.drawImage(e.canvasImage, 0, 0, 16, 16) }, 200), this.canvas.captureStream().getVideoTracks()[0] }, A.prototype.getSpan = function (e, t, A, r) { return void 0 === r && (r = !1), this.stateCenter.reporter.createSpan(s.TRACER_LEVEL.H, { "key": t, "bak_key": A, "par": this.streamId }, { "key": e, "par": this.streamId }, e, r) }, A.prototype.isMultiOuter = function () { return !(!this.stateCenter.accessClientIp || !this.streamConnectIP || this.stateCenter.accessClientIp === this.streamConnectIP) }, A.prototype.isCustomCdn = function () { var e, t; return void 0 !== (null === (e = this.publishOption) || void 0 === e ? void 0 : e.cdnUrl) && "" !== (null === (t = this.publishOption) || void 0 === t ? void 0 : t.cdnUrl) }, A.prototype.setTurnTcp = function () { this._turnToTcp = this.stateCenter.turnToTcp, void 0 !== this.stateCenter.turnOverTcpOnly && (this._turnToTcp = this.stateCenter.turnOverTcpOnly) }, A.prototype.vTrackStats = function (e, t, A) { var r = A.frameHeight, i = A.frameWidth, o = A.framesSent, n = A.timestamp; if (t.frameHeight = r, t.frameWidth = i, 0 === e || this.lastPublishStats.frameHeight === r && this.lastPublishStats.frameWidth === i) 0 === e && (this.lastPublishStats.frameHeight = r, this.lastPublishStats.frameWidth = i); else { var a = this.stateCenter.reporter.createSpan(s.TRACER_LEVEL.H, { "key": u.ZegoRTCLogEvent.kZegoTaskPublishStart.event, "par": this.streamId }, { "key": "" }, u.ZegoRTCLogEvent.kZegoTaskVideoCaptureSize.event); a.setAttributes({ "webrtc_sid": u.ZegoRTCLogEvent.kZegoTaskVideoCaptureSize.webrtc_sid(this.sessionId), "w": u.ZegoRTCLogEvent.kZegoTaskVideoCaptureSize.w(i), "h": u.ZegoRTCLogEvent.kZegoTaskVideoCaptureSize.h(r) }), a.end(), this.lastPublishStats.frameHeight = r, this.lastPublishStats.frameWidth = i } 0 != e && (t.videoTransferFPS = 1e3 * (o - this.lastPublishStats.framesSent) / (n - e)), t.videoTransferFPS < 0 && (t.videoTransferFPS = 0), this.lastPublishStats.framesSent = o }, A }(); t.ZegoPublish = f }, "7652": function _(e, t) { "use strict"; var A = this && this.__spreadArray || function (e, t, A) { if (A || 2 === arguments.length) for (var r, i = 0, o = t.length; i < o; i++)!r && i in t || (r || (r = Array.prototype.slice.call(t, 0, i)), r[i] = t[i]); return e.concat(r || Array.prototype.slice.call(t)) }; Object.defineProperty(t, "__esModule", { "value": !0 }), t.addRRTRLine = t.addSPSDescription = void 0, t.addSPSDescription = function (e) { var t, A = e, r = function (e) { var A = { "m": [{ "reg": /^(\w*) (\d*) ([\w/]*)(?: (.*))?/, "names": ["type", "port", "protocol", "payloads"], "format": "%s %d %s %s" }], "a": [{ "push": "fmtp", "reg": /^fmtp:(\d*) ([\S| ]*)/, "names": ["payload", "config"], "format": "fmtp:%d %s" }] }; function t(e, t, A) { var r = function i(e) { return String(Number(e)) === e ? Number(e) : e }, i = e.name && e.names; e.push && !t[e.push] ? t[e.push] = [] : i && !t[e.name] && (t[e.name] = {}); var o = e.push ? {} : i ? t[e.name] : t; (function (e, t, A, i) { if (i && !A) t[i] = r(e[1]); else for (var o = 0; o < A.length; o += 1)null != e[o + 1] && (t[A[o]] = r(e[o + 1])) })(A.match(e.reg), o, e.names, e.name), e.push && t[e.push].push(o) } var r = RegExp.prototype.test.bind(/^([a-z])=(.*)/), i = [], o = {}, n = o; return e.split(/(\r\n|\r|\n)/).filter(r).forEach(function (e) { var r = e[0], o = e.slice(2); "m" === r && (i.push({ "rtp": [], "fmtp": [] }), n = i[i.length - 1]); for (var s = 0; s < (A[r] || []).length; s += 1) { var a = A[r][s]; if (a.reg && a.reg.test(o)) return t(a, n, o) } }), o.media = i, o }(e), i = []; return r.media.forEach(function (e) { "video" === e.type && e.fmtp.forEach(function (e) { t = "a=fmtp:" + e.payload + " " + e.config, -1 === e.config.indexOf("sps-pps-idr-in-keyframe") && -1 === i.indexOf(t) && i.push(t) }) }), i.forEach(function (e) { A = A.replace(new RegExp(e, "g"), e + ";sps-pps-idr-in-keyframe=1") }), A }, t.addRRTRLine = function (e) { var t = e.split("\r\n"), r = new Map; t.forEach(function (e, A) { if (/^a=rtcp-fb:/.test(e) && t[A + 1] && !/^a=rtcp-fb:/.test(t[A + 1])) { var i = e.match(/^a=rtcp-fb:\d+/); i && r.set(A + 1, i[0] + " rrtr") } }); for (var i = Array.from(r), o = 0; o < i.length; o++) { var n = A([], i[o], !0); t.splice(n[0] + o, 0, n[1]) } return t.join("\r\n") } }, "882": function _(e, t) { "use strict"; Object.defineProperty(t, "__esModule", { "value": !0 }), t.isSupportAnalyzer = t.createAudioAnalyzer = void 0, t.createAudioAnalyzer = function (e, t, A, r) { void 0 === A && (A = 1e3); var i = e.createAnalyser(); i.fftSize = 32, t.connect(i); var o = null, n = new Uint8Array(i.frequencyBinCount); return A && (o = window.setTimeout(function () { !function s() { i.getByteTimeDomainData(n); for (var e = 0, t = 0; t < n.length; t++)e = Math.max(e, Math.abs(n[t] - 128)); return r && r(e / 128), A && (o = window.setTimeout(function () { o && clearTimeout(o), s() }, A)) }() }, A)), "running" !== e.state && e.resume(), { "analyzer": i, "destroy": function destroy() { i.disconnect(), null !== o && (clearInterval(o), A = 0, o = null) }, "setInterval": function setInterval(e) { e > 30 && (A = e) } } }, t.isSupportAnalyzer = function (e) { return "function" == typeof e.createAnalyser } }, "3309": function _(e, t, r) { "use strict"; var i = this && this.__awaiter || function (e, t, A, r) { return new (A || (A = Promise))(function (i, o) { function n(e) { try { a(r.next(e)) } catch (e) { o(e) } } function s(e) { try { a(r.throw(e)) } catch (e) { o(e) } } function a(e) { var t; e.done ? i(e.value) : (t = e.value, t instanceof A ? t : new A(function (e) { e(t) })).then(n, s) } a((r = r.apply(e, t || [])).next()) }) }, o = this && this.__generator || function (e, t) { var A, r, i, o, n = { "label": 0, "sent": function sent() { if (1 & i[0]) throw i[1]; return i[1] }, "trys": [], "ops": [] }; return o = { "next": s(0), "throw": s(1), "return": s(2) }, "function" == typeof Symbol && (o[Symbol.iterator] = function () { return this }), o; function s(s) { return function (a) { return function (s) { if (A) throw new TypeError("Generator is already executing."); for (; o && (o = 0, s[0] && (n = 0)), n;)try { if (A = 1, r && (i = 2 & s[0] ? r.return : s[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, s[1])).done) return i; switch (r = 0, i && (s = [2 & s[0], i.value]), s[0]) { case 0: case 1: i = s; break; case 4: return n.label++, { "value": s[1], "done": !1 }; case 5: n.label++, r = s[1], s = [0]; continue; case 7: s = n.ops.pop(), n.trys.pop(); continue; default: if (!((i = (i = n.trys).length > 0 && i[i.length - 1]) || 6 !== s[0] && 2 !== s[0])) { n = 0; continue } if (3 === s[0] && (!i || s[1] > i[0] && s[1] < i[3])) { n.label = s[1]; break } if (6 === s[0] && n.label < i[1]) { n.label = i[1], i = s; break } if (i && n.label < i[2]) { n.label = i[2], n.ops.push(s); break } i[2] && n.ops.pop(), n.trys.pop(); continue }s = t.call(e, n) } catch (e) { s = [6, e], r = 0 } finally { A = i = 0 } if (5 & s[0]) throw s[1]; return { "value": s[0] ? s[1] : void 0, "done": !0 } }([s, a]) } } }; Object.defineProperty(t, "__esModule", { "value": !0 }), t.SoundMeterWorklet = t.WorkletModule = void 0; var n = r(882), s = "zc.smw", a = new Blob(['\nclass VolumeMeter extends AudioWorkletProcessor {\n  constructor() {\n    super();\n    this.volume = 0;\n    this.intervalTime = 1000;\n    this.tick = this.intervalTime;\n    this.isStop = false;\n    this.port.onmessage = event => {\n      const { data } = event;\n      switch (data.name) {\n        case "setIntervalTime":\n          this.intervalTime = data.intervalTime;\n          break;\n        case "stop":\n          this.isStop = true;\n          break;\n      }\n    };\n  }\n  process(inputs) {\n    const input = inputs[0];\n    if (this.isStop) {\n      return false;\n    }\n    if (input.length > 0) {\n      const buffer = input[0];\n      let maxVal = this.volume;\n      for (let i = 0; i < buffer.length; i++) {\n        if (maxVal < buffer[i]) {\n          maxVal = buffer[i];\n        }\n      }\n      this.volume = maxVal;\n      this.tick -= buffer.length;\n      if (this.tick < 0) {\n        this.tick += (this.intervalTime / 1000) * sampleRate;\n        this.port.postMessage({ volume: this.volume });\n        this.volume = 0;\n      }\n    }\n    return true;\n  }\n}\ntry {\n  registerProcessor("meter", VolumeMeter);\n} catch (error) {\n  \n}  \n'], { "type": "application/javascript" }), c = function () { function A() { } return A.addModuleToContext = function (e, t) { return i(this, void 0, void 0, function () { var A; return o(this, function (r) { switch (r.label) { case 0: return r.trys.push([0, 2, , 3]), t.info(s + " worklet addModule call"), [4, e.audioWorklet.addModule(URL.createObjectURL(a))]; case 1: return r.sent(), t.info(s + " worklet addModule success"), this.isSuccess = !0, [2]; case 2: return A = r.sent(), t.warn(s + " worklet addModule catch error. ".concat(null == A ? void 0 : A.message)), [3, 3]; case 3: return [2] } }) }) }, A.isSuccess = !1, A }(); t.WorkletModule = c; var g = function () { function A(e, t) { void 0 === t && (t = 1e3), this.logger = e, this.interval = t, this.worklet = null, this.processor = null, this.analyzer = null, this.volume = 0, this.onSoundLevelUpdate = function (e) { } } return A.prototype.preload = function (e) { return i(this, void 0, void 0, function () { return o(this, function (t) { switch (t.label) { case 0: return c.isSuccess ? [3, 2] : [4, c.addModuleToContext(e, this.logger)]; case 1: t.sent(), t.label = 2; case 2: return [2] } }) }) }, A.prototype.initAudioWorklet = function (e, t) { return i(this, void 0, void 0, function () { var A, r, i = this; return o(this, function (o) { switch (o.label) { case 0: if (this.worklet) return [3, 5]; o.label = 1; case 1: if (o.trys.push([1, 3, , 4]), (0, n.isSupportAnalyzer)(e)) throw "use analyzer"; return [4, this.preload(e)]; case 2: return o.sent(), (A = this.worklet = new AudioWorkletNode(e, "meter")).port.onmessage = function (e) { i.onSoundLevelUpdate && i.onSoundLevelUpdate(e.data.volume || 0) }, t.connect(A).connect(e.destination), this.setInterval(this.interval), [3, 4]; case 3: return r = o.sent(), this.logger.info(s + " not use AudioWorklet. " + r), this.analyzer = (0, n.createAudioAnalyzer)(e, t, this.interval, function (e) { i.onSoundLevelUpdate && i.onSoundLevelUpdate(e || 0) }), [3, 4]; case 4: return [3, 6]; case 5: t.connect(this.worklet).connect(e.destination), o.label = 6; case 6: return [2] } }) }) }, A.prototype.getSrcSource = function (e, t) { var r = t.getAudioTracks()[0], i = A.sourceList[r.id] || {}, o = i.source, n = i._ac; if (!o || n !== e) { o && o.disconnect(), o = e.createMediaStreamSource(t); var s = r && r.id; s || (s = t.id), A.sourceList[s] = { "source": o, "_ac": n = e } } return o }, A.sourceDisConnect = function (e) { var t = e.getAudioTracks()[0], r = t && t.id; r || (r = e.id); var i = (A.sourceList[r] || {}).source; i && (i.disconnect(), delete A.sourceList[t.id]) }, A.prototype.setInterval = function (e) { var t = this.worklet; this.interval = e, t && t.port.postMessage({ "name": "setIntervalTime", "intervalTime": e }), this.analyzer && this.analyzer.setInterval(e) }, A.prototype.destroy = function () { this.processor && (this.processor.onaudioprocess = null, this.processor.disconnect()), this.analyzer && (this.analyzer.destroy(), this.analyzer = null), this.worklet && (this.worklet.port.postMessage({ "name": "stop" }), this.worklet.port.onmessage = null, this.worklet.port.close(), this.worklet.disconnect(), this.logger.info(s + " close worklet")), this.worklet = null, this.processor = null }, A.sourceList = {}, A }(); t.SoundMeterWorklet = g }, "7320": function _(e, t, r) { "use strict"; var i = this && this.__awaiter || function (e, t, A, r) { return new (A || (A = Promise))(function (i, o) { function n(e) { try { a(r.next(e)) } catch (e) { o(e) } } function s(e) { try { a(r.throw(e)) } catch (e) { o(e) } } function a(e) { var t; e.done ? i(e.value) : (t = e.value, t instanceof A ? t : new A(function (e) { e(t) })).then(n, s) } a((r = r.apply(e, t || [])).next()) }) }, o = this && this.__generator || function (e, t) { var A, r, i, o, n = { "label": 0, "sent": function sent() { if (1 & i[0]) throw i[1]; return i[1] }, "trys": [], "ops": [] }; return o = { "next": s(0), "throw": s(1), "return": s(2) }, "function" == typeof Symbol && (o[Symbol.iterator] = function () { return this }), o; function s(s) { return function (a) { return function (s) { if (A) throw new TypeError("Generator is already executing."); for (; o && (o = 0, s[0] && (n = 0)), n;)try { if (A = 1, r && (i = 2 & s[0] ? r.return : s[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, s[1])).done) return i; switch (r = 0, i && (s = [2 & s[0], i.value]), s[0]) { case 0: case 1: i = s; break; case 4: return n.label++, { "value": s[1], "done": !1 }; case 5: n.label++, r = s[1], s = [0]; continue; case 7: s = n.ops.pop(), n.trys.pop(); continue; default: if (!((i = (i = n.trys).length > 0 && i[i.length - 1]) || 6 !== s[0] && 2 !== s[0])) { n = 0; continue } if (3 === s[0] && (!i || s[1] > i[0] && s[1] < i[3])) { n.label = s[1]; break } if (6 === s[0] && n.label < i[1]) { n.label = i[1], i = s; break } if (i && n.label < i[2]) { n.label = i[2], n.ops.push(s); break } i[2] && n.ops.pop(), n.trys.pop(); continue }s = t.call(e, n) } catch (e) { s = [6, e], r = 0 } finally { A = i = 0 } if (5 & s[0]) throw s[1]; return { "value": s[0] ? s[1] : void 0, "done": !0 } }([s, a]) } } }, n = this && this.__importDefault || function (e) { return e && e.__esModule ? e : { "default": e } }; Object.defineProperty(t, "__esModule", { "value": !0 }), t.StreamQualityReportWeb = void 0; var s = n(r(3720)), a = r(93), c = r(5123), g = r(2990), u = r(4028), l = r(1958), d = function () { function A(e, t, A) { var r = this; this.logger = e, this.stateCenter = t, this.streamCenter = A, this.publishQualityInfos = [], this.playQualityInfos = [], this.qualityUploadTimestamp = 0, this.qualityHeadTimestamp = 0, this.uploadInterval = 6e4, this.beforeunloadListener = function () { r.streamStoreHandler.resetStorageStores() }, this.streamStoreHandler = new l.StreamStoreHandler(this.CacheKey, e), this.bindListener(), this.bindDestroyListener() } return Object.defineProperty(A.prototype, "CacheKey", { "get": function get() { return "z_s_c_" + this.stateCenter.appid }, "enumerable": !1, "configurable": !0 }), A.prototype.bindListener = function () { window.addEventListener("beforeunload", this.beforeunloadListener) }, A.prototype.offListener = function () { window.removeEventListener("beforeunload", this.beforeunloadListener) }, A.prototype.bindDestroyListener = function () { var e = this; this.stateCenter.listenerList._engineDestroy.push(function () { e.offListener() }) }, A.prototype.updateQuality = function (e, t, A) { var r = (new Date).getTime(), i = JSON.stringify(this.publishQualityInfos).length + JSON.stringify(this.playQualityInfos).length, o = A && (this.publishQualityInfos.length > 0 || this.playQualityInfos.length > 0); 0 !== this.qualityUploadTimestamp && r - this.qualityUploadTimestamp > this.uploadInterval || i > 8e3 || o ? (this.streamQualityUpload(o), this.publishQualityInfos = [], this.playQualityInfos = [], this.qualityHeadTimestamp = Math.round((new Date).getTime()), this.saveSpeedLogHead(), this.qualityUploadTimestamp = r) : 0 == this.qualityHeadTimestamp && (this.qualityHeadTimestamp = Math.round((new Date).getTime()), this.saveSpeedLogHead(), this.qualityUploadTimestamp = r), t && (0 == e ? this.handlePublishQualityData(t) : this.handlePlayQualityData(t)) }, A.prototype.streamQualityUpload = function (e) { if (Object.keys(this.streamCenter.publisherList).length > 0 || Object.keys(this.streamCenter.playerList).length > 0 || e) { var t = this.getSpeedLogHead(); this.uploadQuality(this.qualityHeadTimestamp, t, { "publish_quality_infos": this.publishQualityInfos, "play_quality_infos": this.playQualityInfos, "client_type": 2 }) } }, A.prototype.uploadQuality = function (e, t, A, r) { var n, s = this, c = g.logreport.SpeedLogHead.create(t), u = g.logreport.QualityEvent.create(A), l = g.logreport.SpeedLogHead.encode(c).finish(), d = g.logreport.QualityEvent.encode(u).finish(), C = this.getQualityHead(l, d), I = new Uint8Array(12 + l.length + d.length); I.set(C), I.set(l, 12), I.set(d, 12 + l.length); var E = null === (n = this.logger.url) || void 0 === n ? void 0 : n.split("/")[2]; if (E) { var p = function h() { return new Promise(function (e) { if (s.qualityWebsocket && 2 != s.qualityWebsocket.readyState && 3 != s.qualityWebsocket.readyState) 1 == s.qualityWebsocket.readyState && e(s.qualityWebsocket); else { var t = s.stateCenter.appid, A = s.stateCenter.idName, r = s.stateCenter.roomList[0].token, i = "wss://".concat(E, "/ws/report/stream?appid=").concat(t, "&product=rtc&token=").concat(encodeURIComponent(r), "&id_name=").concat(A); s.qualityWebsocket = new WebSocket(i), s.qualityWebsocket.onopen = function () { s.logger.info(a.ZEGO_WEBRTC_ACTION.UPLOAD_SPEED_LOG_QUALITY + " speed log socket open"), s.qualityWebsocket && e(s.qualityWebsocket) }, s.qualityWebsocket.onclose = function () { s.logger.info(a.ZEGO_WEBRTC_ACTION.UPLOAD_SPEED_LOG_QUALITY + " speed log socket close") } } }) }; p().then(function (t) { var A = Date.now() % 1e4, n = !1; t.onmessage = function (i) { (i.data + "").includes("success") && (s.logger.info(a.ZEGO_WEBRTC_ACTION.UPLOAD_SPEED_LOG_QUALITY + " quality (".concat(A, ") upload success")), n = !0, s.delStreamData(e), r && s.streamStoreHandler.removeStoreFromStorage(r), setTimeout(function () { s.checkCacheDataToReport() }, 1e3)), t.onmessage = null }, setTimeout(function () { return i(s, void 0, void 0, function () { return o(this, function (e) { switch (e.label) { case 0: return n ? [3, 2] : [4, p()]; case 1: e.sent().send(I), this.logger.info(a.ZEGO_WEBRTC_ACTION.UPLOAD_SPEED_LOG_QUALITY + " retry upload quality (".concat(A, "), length: ") + I.length + "."), e.label = 2; case 2: return [2] } }) }) }, 3e3), t.send(I), s.logger.info(a.ZEGO_WEBRTC_ACTION.UPLOAD_SPEED_LOG_QUALITY + " upload quality (".concat(A, "), length: ") + I.length + ".") }) } }, A.prototype.checkCacheDataToReport = function () { return i(this, void 0, void 0, function () { var e; return o(this, function (t) { switch (t.label) { case 0: return [4, this.streamStoreHandler.getUnReportCachedDatas(this.qualityHeadTimestamp + "")]; case 1: return e = t.sent(), this.uploadUnReportDatas(e), [2] } }) }) }, A.prototype.getQualityHead = function (e, t) { var A = new Uint8Array(12); A[0] = 0, A[1] = 12, A[2] = e.length >> 8, A[3] = e.length - (A[2] << 8), A[4] = t.length >> 24, A[5] = t.length - (A[4] << 24) >> 16, A[6] = t.length - (A[4] << 24) - (A[5] << 16) >> 8, A[7] = t.length - (A[4] << 24) - (A[5] << 16) - (A[6] << 8); var r = Math.ceil((new Date).getTime() / 1e3); return A[8] = r >> 24, A[9] = r - (A[8] << 24) >> 16, A[10] = r - (A[8] << 24) - (A[9] << 16) >> 8, A[11] = r - (A[8] << 24) - (A[9] << 16) - (A[10] << 8), A }, A.prototype.handlePublishQualityData = function (e) { var t = this.publishQualityInfos.find(function (t) { return t.stream_id == e.stream_id && t.video_width == e.frameWidth && t.video_height == e.frameHeight }); if (!t) { var A = this.streamCenter.getRoomByStreamID(e.stream_id); t = { "stream_id": e.stream_id, "session_id": A ? Number(A.sessionID) : 0, "video_width": e.frameWidth, "video_height": e.frameHeight, "infos": [], "room_id": A ? A.roomID : "", "evnvironment": 1, "room_session_id": A ? Number(A.roomSessionID) : 0, "resource_type": 2 }, this.publishQualityInfos.push(t) } t.infos.push({ "audio_bitrate": Math.round(e.audioBitrate) || 0, "video_bitrate": Math.round(e.videoBitrate) || 0, "video_capture_fps": Math.round(10 * e.videoFPS) || 0, "video_network_fps": Math.round(10 * e.videoTransferFPS) || 0, "uplink_plr": e.audioPacketsLostRate, "rtt": Math.round(1e3 * e.currentRoundTripTime) || 0, "audio_network_fps": Math.round(10 * e.audioFPS), "captured_sound_level": Math.round(e.audioLevel), "sample_time_offset": Math.round((e.timeStamp - this.qualityHeadTimestamp) / 10) }), this.saveStreamInfo("publish", t) }, A.prototype.handlePlayQualityData = function (e) { var t, A = this.playQualityInfos.find(function (t) { return t.stream_id == e.stream_id && t.video_width == e.frameWidth && t.video_height == e.frameHeight }); if (!A) { var r = this.streamCenter.getRoomByStreamID(e.stream_id), i = null === (t = this.streamCenter.playerList[e.stream_id]) || void 0 === t ? void 0 : t.player; A = { "stream_id": e.stream_id, "session_id": r ? Number(r.sessionID) : 0, "video_width": e.frameWidth, "video_height": e.frameHeight, "infos": [], "room_id": r ? r.roomID : "", "room_session_id": r ? Number(r.roomSessionID) : 0, "resource_type": 0 === (null == i ? void 0 : i.resourceMode) ? 2 : 3 }, this.playQualityInfos.push(A) } A.infos.push({ "audio_bitrate": Math.round(e.audioBitrate) || 0, "video_bitrate": Math.round(e.videoBitrate) || 0, "video_network_fps": Math.round(10 * e.videoFPS) || 0, "downlink_plr": Math.round(e.audioPacketsLostRate) || 0, "audio_network_fps": Math.round(10 * e.audioFPS) || 0, "audio_break_duration": Math.round(e.audio_break_duration / 10), "video_break_duration": Math.round(e.video_break_duration / 10), "rtt": Math.round(1e3 * e.currentRoundTripTime) || 0, "rendered_sound_level": Math.round(e.audioLevel), "audio_break_cancel_duration": Math.round(e.audio_break_cancel_duration / 10), "video_break_cancel_duration": Math.round(e.video_break_cancel_duration / 10), "audio_decode_time": Math.round(e.audio_decode_time / 10), "video_decode_time": Math.round(e.video_decode_time / 10), "real_sampling_interval": Math.round(e.real_sampling_interval / 10), "video_frames_decoded": Math.round(e.videoFramesDecoded) || 0, "video_frames_dropped": Math.round(e.videoFramesDropped) || 0, "sample_time_offset": Math.round((e.timeStamp - this.qualityHeadTimestamp) / 10), "peer_to_peer_plr": e.peerToPeerPacketLostRate, "peer_to_peer_delay": e.peerToPeerDelay }), this.saveStreamInfo("play", A) }, A.prototype.saveSpeedLogHead = function () { var e = this.getSpeedLogHead(); this.streamStoreHandler.saveItem(this.qualityHeadTimestamp + "_head", e) }, A.prototype.saveStreamInfo = function (e, t) { this.streamStoreHandler.saveItem("".concat(this.qualityHeadTimestamp, "_").concat(e).concat(t.stream_id), t) }, A.prototype.delStreamData = function (e) { this.streamStoreHandler.clearItems(e + "") }, A.prototype.getSpeedLogHead = function () { return { "version": 14, "timestamp": Math.round(this.qualityHeadTimestamp / 1e3), "event": 0, "app_id": this.stateCenter.appid, "user_id": this.stateCenter.idName, "biz_type": 1, "time_offset": s.default.MAX_VALUE, "os_type": u.ClientUtil.getOsType(), "scenario": this.stateCenter.scenario, "sdk_version": c.PROTO_VERSION } }, A.prototype.checkStreamReport = function () { var e = this; this.streamStoreHandler.getStoresFromStorage().forEach(function (t) { return i(e, void 0, void 0, function () { var e; return o(this, function (A) { switch (A.label) { case 0: return [4, this.streamStoreHandler.getCacheStoreData(t)]; case 1: return e = A.sent(), this.uploadUnReportDatas(e, t), [2] } }) }) }) }, A.prototype.uploadUnReportDatas = function (e, t) { var A = this; e.length > 0 && e.forEach(function (e) { A.uploadQuality(e.timestamp, e.head, { "publish_quality_infos": e.publishInfos, "play_quality_infos": e.playInfos, "client_type": 2 }, t) }) }, A.prototype.resetReport = function () { var e = this; this.publishQualityInfos = [], this.playQualityInfos = [], this.qualityHeadTimestamp = 0, this.qualityUploadTimestamp = 0, setTimeout(function () { e.qualityWebsocket && (e.qualityWebsocket.close(), e.qualityWebsocket = void 0) }, 2e4) }, A }(); t.StreamQualityReportWeb = d }, "1958": function _(e, t, r) { "use strict"; var i = this && this.__awaiter || function (e, t, A, r) { return new (A || (A = Promise))(function (i, o) { function n(e) { try { a(r.next(e)) } catch (e) { o(e) } } function s(e) { try { a(r.throw(e)) } catch (e) { o(e) } } function a(e) { var t; e.done ? i(e.value) : (t = e.value, t instanceof A ? t : new A(function (e) { e(t) })).then(n, s) } a((r = r.apply(e, t || [])).next()) }) }, n = this && this.__generator || function (e, t) { var A, r, i, o, n = { "label": 0, "sent": function sent() { if (1 & i[0]) throw i[1]; return i[1] }, "trys": [], "ops": [] }; return o = { "next": s(0), "throw": s(1), "return": s(2) }, "function" == typeof Symbol && (o[Symbol.iterator] = function () { return this }), o; function s(s) { return function (a) { return function (s) { if (A) throw new TypeError("Generator is already executing."); for (; o && (o = 0, s[0] && (n = 0)), n;)try { if (A = 1, r && (i = 2 & s[0] ? r.return : s[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, s[1])).done) return i; switch (r = 0, i && (s = [2 & s[0], i.value]), s[0]) { case 0: case 1: i = s; break; case 4: return n.label++, { "value": s[1], "done": !1 }; case 5: n.label++, r = s[1], s = [0]; continue; case 7: s = n.ops.pop(), n.trys.pop(); continue; default: if (!((i = (i = n.trys).length > 0 && i[i.length - 1]) || 6 !== s[0] && 2 !== s[0])) { n = 0; continue } if (3 === s[0] && (!i || s[1] > i[0] && s[1] < i[3])) { n.label = s[1]; break } if (6 === s[0] && n.label < i[1]) { n.label = i[1], i = s; break } if (i && n.label < i[2]) { n.label = i[2], n.ops.push(s); break } i[2] && n.ops.pop(), n.trys.pop(); continue }s = t.call(e, n) } catch (e) { s = [6, e], r = 0 } finally { A = i = 0 } if (5 & s[0]) throw s[1]; return { "value": s[0] ? s[1] : void 0, "done": !0 } }([s, a]) } } }, s = this && this.__importDefault || function (e) { return e && e.__esModule ? e : { "default": e } }; Object.defineProperty(t, "__esModule", { "value": !0 }), t.StreamStoreHandler = void 0; var a = r(93), c = r(4028), g = s(r(9483)), u = function () { function A(e, t) { this.name = e, this.logger = t, this.storeName = e + ":" + c.ClientUtil.uuid(6), this.store = g.default.createInstance({ "name": this.storeName }), this.recordStoresInStorage(e, this.storeName) } return A.prototype.recordStoresInStorage = function (e, t) { var A = localStorage.getItem(e), r = A ? A.split(",") : []; r.push(t + "-1"), localStorage.setItem(e, null == r ? void 0 : r.join(",")) }, A.prototype.getStoresFromStorage = function () { return this.refreshStores("1") }, A.prototype.resetStorageStores = function () { this.refreshStores("0") }, A.prototype.removeStoreFromStorage = function (e) { this.refreshStores("2", e) }, A.prototype.refreshStores = function (e, t) { var A = this, r = localStorage.getItem(this.name), i = r ? r.split(",") : [], o = []; if (i.length > 0) { var n = []; i.forEach(function (r) { var i = r.split("-"), s = i[0], a = i[1]; "2" == e ? (s !== t && n.push(s + "-" + a), t && A.dropInstance(t)) : n.push(s + "-" + e), -1 === s.indexOf(A.storeName) && "0" == a && o.push(s) }), localStorage.setItem(this.name, n.join(",")) } return o }, A.prototype.dropInstance = function (e) { return i(this, void 0, void 0, function () { return n(this, function (t) { switch (t.label) { case 0: return t.trys.push([0, 2, , 3]), [4, g.default.dropInstance({ "name": e })]; case 1: case 2: return t.sent(), [3, 3]; case 3: return [2] } }) }) }, A.prototype.getCacheStoreData = function (e) { return i(this, void 0, void 0, function () { var t, A, r, i; return n(this, function (o) { switch (o.label) { case 0: return o.trys.push([0, 5, , 6]), [4, (t = g.default.createInstance({ "name": e })).keys()]; case 1: return A = o.sent(), r = A.filter(function (e) { return e.indexOf("_head") > -1 }), i = [], r.length > 0 ? [4, this.readStoreDatas(r, A, t)] : [3, 3]; case 2: return i = o.sent(), [3, 4]; case 3: this.removeStoreFromStorage(e), o.label = 4; case 4: return [2, i]; case 5: return o.sent(), [3, 6]; case 6: return [2] } }) }) }, A.prototype.readStoreDatas = function (e, t, A) { return i(this, void 0, void 0, function () { var r, i, s; return n(this, function (o) { switch (o.label) { case 0: r = [], i = function o(i) { var s, a, c, g, u, l, h, d, C, I; return n(this, function (o) { switch (o.label) { case 0: a = (s = e[i]).replace("_head", ""), c = t.filter(function (e) { return e.indexOf(a) > -1 }), g = null, u = [], l = [], h = 0, o.label = 1; case 1: return h < c.length ? [4, A.getItem(d = c[h])] : [3, 4]; case 2: C = o.sent(), d.startsWith(a + "_head") ? g = C : d.startsWith(a + "_publish") ? u.push(C) : d.startsWith(a + "_play") && l.push(C), o.label = 3; case 3: return h++, [3, 1]; case 4: return I = (new Date).getTime() - parseInt(a), g ? u.length > 0 || l.length > 0 ? (r.push({ "timestamp": parseInt(a), "head": g, "publishInfos": u, "playInfos": l }), [3, 7]) : [3, 5] : [3, 7]; case 5: return 0 === u.length && 0 === l.length && I > 6e4 ? [4, A.removeItem(s)] : [3, 7]; case 6: o.sent(), o.label = 7; case 7: return [2] } }) }, s = 0, o.label = 1; case 1: return s < e.length ? [5, i(s)] : [3, 4]; case 2: o.sent(), o.label = 3; case 3: return s++, [3, 1]; case 4: return [2, r] } }) }) }, A.prototype.saveItem = function (e, t) { return i(this, void 0, void 0, function () { var A; return n(this, function (r) { switch (r.label) { case 0: return r.trys.push([0, 2, , 3]), [4, this.store.setItem(e, t)]; case 1: return r.sent(), [3, 3]; case 2: return A = r.sent(), this.logger.warn(a.ZEGO_WEBRTC_ACTION.STREAM_STORE_HANDLER + " save " + JSON.stringify(A)), [3, 3]; case 3: return [2] } }) }) }, A.prototype.getItem = function (e) { return i(this, void 0, void 0, function () { var t; return n(this, function (A) { switch (A.label) { case 0: return A.trys.push([0, 2, , 3]), [4, this.store.getItem(e)]; case 1: return [2, A.sent()]; case 2: return t = A.sent(), this.logger.warn(a.ZEGO_WEBRTC_ACTION.STREAM_STORE_HANDLER + " get " + JSON.stringify(t)), [3, 3]; case 3: return [2] } }) }) }, A.prototype.removeItem = function (e) { return i(this, void 0, void 0, function () { var t; return n(this, function (A) { switch (A.label) { case 0: return A.trys.push([0, 2, , 3]), [4, this.store.removeItem(e)]; case 1: return A.sent(), [3, 3]; case 2: return t = A.sent(), this.logger.warn(a.ZEGO_WEBRTC_ACTION.STREAM_STORE_HANDLER + " remove " + JSON.stringify(t)), [3, 3]; case 3: return [2] } }) }) }, A.prototype.clearItems = function (e) { return i(this, void 0, void 0, function () { var t, A = this; return n(this, function (r) { switch (r.label) { case 0: return r.trys.push([0, 2, , 3]), [4, this.store.keys()]; case 1: return r.sent().filter(function (t) { return t.indexOf(e) > -1 }).forEach(function (e) { return i(A, void 0, void 0, function () { return n(this, function (t) { switch (t.label) { case 0: return [4, this.removeItem(e)]; case 1: return t.sent(), [2] } }) }) }), [3, 3]; case 2: return t = r.sent(), this.logger.warn(a.ZEGO_WEBRTC_ACTION.STREAM_STORE_HANDLER + " clear " + JSON.stringify(t)), [3, 3]; case 3: return [2] } }) }) }, A.prototype.getUnReportCachedDatas = function (e) { return i(this, void 0, void 0, function () { var t, A, r; return n(this, function (i) { switch (i.label) { case 0: return [4, this.filterItems(e)]; case 1: return t = i.sent(), A = [], t && t.length > 0 ? (r = t.filter(function (e) { return e.indexOf("_head") > -1 }), [4, this.readStoreDatas(r, t, this.store)]) : [3, 3]; case 2: A = i.sent(), i.label = 3; case 3: return [2, A] } }) }) }, A.prototype.filterItems = function (e) { return i(this, void 0, void 0, function () { var t; return n(this, function (A) { switch (A.label) { case 0: return A.trys.push([0, 2, , 3]), [4, this.store.keys()]; case 1: return [2, A.sent().filter(function (t) { return -1 === t.indexOf(e) })]; case 2: return t = A.sent(), this.logger.warn(a.ZEGO_WEBRTC_ACTION.STREAM_STORE_HANDLER + " filter " + JSON.stringify(t)), [3, 3]; case 3: return [2] } }) }) }, A }(); t.StreamStoreHandler = u }, "3074": function _(e, t, r) { "use strict"; var i = this && this.__assign || function () { return (i = Object.assign || function (e) { for (var t, A = 1, r = arguments.length; A < r; A++)for (var i in t = arguments[A]) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]); return e }).apply(this, arguments) }, o = this && this.__awaiter || function (e, t, A, r) { return new (A || (A = Promise))(function (i, o) { function n(e) { try { a(r.next(e)) } catch (e) { o(e) } } function s(e) { try { a(r.throw(e)) } catch (e) { o(e) } } function a(e) { var t; e.done ? i(e.value) : (t = e.value, t instanceof A ? t : new A(function (e) { e(t) })).then(n, s) } a((r = r.apply(e, t || [])).next()) }) }, n = this && this.__generator || function (e, t) { var A, r, i, o, n = { "label": 0, "sent": function sent() { if (1 & i[0]) throw i[1]; return i[1] }, "trys": [], "ops": [] }; return o = { "next": s(0), "throw": s(1), "return": s(2) }, "function" == typeof Symbol && (o[Symbol.iterator] = function () { return this }), o; function s(s) { return function (a) { return function (s) { if (A) throw new TypeError("Generator is already executing."); for (; o && (o = 0, s[0] && (n = 0)), n;)try { if (A = 1, r && (i = 2 & s[0] ? r.return : s[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, s[1])).done) return i; switch (r = 0, i && (s = [2 & s[0], i.value]), s[0]) { case 0: case 1: i = s; break; case 4: return n.label++, { "value": s[1], "done": !1 }; case 5: n.label++, r = s[1], s = [0]; continue; case 7: s = n.ops.pop(), n.trys.pop(); continue; default: if (!((i = (i = n.trys).length > 0 && i[i.length - 1]) || 6 !== s[0] && 2 !== s[0])) { n = 0; continue } if (3 === s[0] && (!i || s[1] > i[0] && s[1] < i[3])) { n.label = s[1]; break } if (6 === s[0] && n.label < i[1]) { n.label = i[1], i = s; break } if (i && n.label < i[2]) { n.label = i[2], n.ops.push(s); break } i[2] && n.ops.pop(), n.trys.pop(); continue }s = t.call(e, n) } catch (e) { s = [6, e], r = 0 } finally { A = i = 0 } if (5 & s[0]) throw s[1]; return { "value": s[0] ? s[1] : void 0, "done": !0 } }([s, a]) } } }; Object.defineProperty(t, "__esModule", { "value": !0 }), t.ZegoSignal = void 0; var s = r(5123), a = r(93), c = r(2532), g = r(5634), u = r(7045), l = r(4028), h = r(1018), d = r(6348), C = ["LoginReq", "CreateSessionWithSdpReq", "CreateSessionReq"], I = ["Peer2PeerNetStatsGetReq", "Peer2PeerNetStatsGetRsp"], E = function () { function A(e, t, A, r) { void 0 === r && (r = !1), this.netAgent = A, this.useNetAgent = r, this.sendDataMap = {}, this.sendDataList = new s.LinkedList, this.sendDataCheckOnceCount = 100, this.signalSeq = 0, this.pushCallback = {}, this.sessionInfos = {}, this.tryHeartbeatCount = 0, this.heartbeatInterval = 1e4, this.sendDataTimeout = 5e3, this.sendDataDropTimeout = 1e4, this.sendDataCheckTimer = null, this.sendDataCheckInterval = 2e3, this.loginTimer = null, this.successConnectedCallback = null, this.checkMessageList = ["ActivateVideoPlayStreamReq", "ActivateAudioPlayStreamReq", "CreateSessionReq", "CreateSessionWithSdpReq", "ActivateSEIInsertReq", "StreamStatusNotify", "MediaDescUpdateReq"], this.tryConnectCount = 1, this.tryConnectTimer = null, this.tryConnectInterval = 3e3, this.state = s.ENUM_CONNECT_STATE.disconnect, this.tokenType = 0, this.platform = navigator.platform, this.testStreamStatusMsgs = [], this._websocket = null, this.negoInterval = 25e3, this.negoTryCount = 1, this.negoTryMaxCount = 2, this.logger = e, this.stateCenter = t, this.stateCenter.streamConnectTime && (this.tryConnectInterval = this.stateCenter.streamConnectTime), this.browser = this.stateCenter.browserInfo, this.gw = new g.GatewaySignal(e, this) } return Object.defineProperty(A.prototype, "wsReadyState", { "get": function get() { var e; return null === (e = this.websocket) || void 0 === e ? void 0 : e.readyState }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "websocket", { "get": function get() { return this._websocket }, "set": function set(e) { null === e && this.useNetAgent || (this._websocket = e) }, "enumerable": !1, "configurable": !0 }), A.prototype.setSessionInfo = function (e, t) { this.logger.debug(a.ZEGO_WEBRTC_ACTION.SIGNAL_SET_SESSION_INFO + " call"), this.appid = e + "", this.userid = t }, A.prototype.onDisconnect = function (e, t) { }, A.prototype.onUpdateHeartBeatInterval = function (e) { }, A.prototype.resetConnectTimer = function () { this.logger.info(a.ZEGO_WEBRTC_ACTION.SIGNAL_RESET_CONNECT_TIMER + " call"), clearTimeout(this.tryConnectTimer), this.tryConnectTimer = null, this.tryConnectCount = 0 }, A.prototype.handleWsMessage = function (e) { var t = JSON.parse(e.data); I.includes(t.header.cmd) || (this.logger.info(a.ZEGO_WEBRTC_ACTION.SIGNAL_BIND_WEBSOCKET_HANDLE + " signmsg= ", t.header.cmd), this.logger.info(a.ZEGO_WEBRTC_ACTION.SIGNAL_BIND_WEBSOCKET_HANDLE + " signmsg= " + JSON.stringify(t))), t.header.appid == this.appid && t.header.user_id === this.userid ? this.handleServerPush(t) : this.logger.warn(a.ZEGO_WEBRTC_ACTION.SIGNAL_BIND_WEBSOCKET_HANDLE + " check header failed") }, A.prototype.bindWebSocketEvents = function () { var e = this; this.tryHeartbeatCount = 0, this.tryConnectInterval = this.stateCenter.streamConnectTime ? this.stateCenter.streamConnectTime : 3e3, this.websocket && (this.websocket.onclose = function (t) { var A = t || {}, r = A.reason, i = A.wasClean; if (e.logger.info(a.ZEGO_WEBRTC_ACTION.SIGNAL_BIND_WEBSOCKET_HANDLE + " close msg = ".concat(A.code, ", ").concat(r, ", ").concat(i)), e.state != s.ENUM_CONNECT_STATE.disconnect) { if (e.useNetAgent) return void e.disconnectCallback(); e.successConnectedCallback = e.connectCallback, e.resetConnectTimer(), e.startConnectTimer(function (t) { 1008 === t && e.disconnectCallback(c.errorCodeList.TOKEN_EXPIRED) }), e.resetCheckMessage() } }, this.websocket.onerror = function (t) { var A = t || {}, r = A.code, i = A.reason, o = A.wasClean; e.logger.info(a.ZEGO_WEBRTC_ACTION.SIGNAL_BIND_WEBSOCKET_HANDLE + " msg = ".concat(JSON.stringify(t), ", ").concat(r, ", ").concat(i, ", ").concat(o)) }) }, A.prototype.resetCheckMessage = function () { this.logger.debug(a.ZEGO_WEBRTC_ACTION.SIGNAL_RESET_CHECK_MESSAGE + " call"), clearTimeout(this.sendDataCheckTimer), this.sendDataCheckTimer = null; for (var e = this.sendDataList.getFirst(); null != e;)this.sendDataList.remove(e), e._data.error && e._data.error(s.SEND_MSG_RESET, e._data.seq), e = this.sendDataList.getFirst(); this.sendDataMap = {} }, A.prototype.handleServerPush = function (e) { switch (e.header.cmd) { case "LoginRsp": this.handleRespondData("LoginReq", e); break; case "CreateSessionRsp": this.handleRespondData("CreateSessionReq", e), 0 === e.body.result && this.addSession(e.header.session_id, e.body.session_token); break; case "CreateSessionWithSdpRsp": this.handleRespondData("CreateSessionWithSdpReq", e), 0 === e.body.result && this.addSession(e.header.session_id, e.body.session_token); break; case "MediaDescRsp": this.handleRespondData("MediaDescReq", e); break; case "CandidateInfoRsp": this.handleRespondData("CandidateInfoReq", e); break; case "CloseSessionRsp": this.handleRespondData("CloseSessionReq", e), this.removeSession(e.header.session_id); break; case "ClientHBRsp": this.handleRespondData("ClientHBReq", e); break; case "MediaDescPush": case "CandidateInfoPush": case "StreamStatusNotifyPush": case "PublishEventPush": case "PlayEventPush": case "ClientInfoPush": case "NetQualityInfoPush": case "MediaDescUpdatePush": case "CmdPush": this.handlePushData(e); break; case "CloseSessionPush": this.handlePushData(e), this.removeSession(e.header.session_id); break; case "QualityReportRsp": this.handleRespondData("QualityReportReq", e); break; case "SessionResetPush": this.handlePushResetSessionData(e); break; case "ActivateVideoPlayStreamRsp": this.handleRespondData("ActivateVideoPlayStreamReq", e); break; case "ActivateAudioPlayStreamRsp": this.handleRespondData("ActivateAudioPlayStreamReq", e); break; case "NetQualityProbeRsp": this.handleRespondData("NetQualityProbeReq", e); break; case "ActivateSEIInsertRsp": this.handleRespondData("ActivateSEIInsertReq", e); break; case "StreamStatusNotifyAck": this.handleRespondData("StreamStatusNotify", e); break; case "Peer2PeerNetStatsGetRsp": this.handleRespondData("Peer2PeerNetStatsGetReq", e); break; case "MediaDescUpdateRsp": this.handleRespondData("MediaDescUpdateReq", e); break; case "CmdRsp": this.handleRespondData("CmdReq", e) } }, A.prototype.disconnectCallback = function (e, t) { this.logger.info("zc.s.dcb " + JSON.stringify(e) + " " + t), this.connectCallback && (this.connectCallback(t || -1, this.server, void 0), this.connectCallback = null); var A = this.server; this.disconnectServer(), this.onDisconnect(A, e) }, A.prototype.updateToken = function () { var e = this; this.logger.info(a.ZEGO_WEBRTC_ACTION.SIGNAL_UPDATE_TOKEN + " call"); var t = { "token": this.token, "tokenType": this.tokenType, "roomid": this.roomID, "anchorname": this.stateCenter.anchor_info.anchor_id, "sdkversion": s.PROTO_VERSION, "osinfo": navigator.appVersion }; if (0 != Object.keys(this.sessionInfos).length) { var A = []; for (var r in this.sessionInfos) { var i = parseInt(r); A.push({ "session_id": i, "session_token": this.sessionInfos[i].token }) } t.sessions = A } this.sendMessageWithCallback("LoginReq", this.stateCenter.getSeq(), 0, t, function (t, A, r) { if (0 == r.result) { e.token = r.token, e.tokenType = r.tokenType; var i = { "report": r.report, "report_interval": r.report_interval_ms }; r.negoInterval && (e.negoInterval = r.negoInterval), r.negoTryCount && (e.negoTryCount = r.negoTryCount), r.negoTryMaxCount && (e.negoTryMaxCount = r.negoTryMaxCount), null != e.connectCallback && (e.connectCallback(0, e.server, i), e.connectCallback = null), e.checkMessageTimeout() } else null != e.connectCallback && (e.connectCallback(r.result, e.server, { "error": r.strError }), e.connectCallback = null) }, function () { null != e.connectCallback && (e.connectCallback(-1, e.server, void 0), e.connectCallback = null) }) }, A.prototype.sendMessageWithCallback = function (e, t, A, r, i, o) { var n, c = this; void 0 === i && (i = null), void 0 === o && (o = null), I.includes(e) || this.logger.info(a.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_MESSAGE_WITH_CALLBACK + " call " + e + " " + t + " " + (null === (n = this.websocket) || void 0 === n ? void 0 : n.readyState)); var g = performance.now(); if (!this.websocket || "LoginReq" !== e && this.websocket.readyState !== u.SocketState.OPEN) return this.logger.error(a.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_MESSAGE_WITH_CALLBACK + " connect not establish"), void (o && o(s.SEND_MSG_TIMEOUT, t)); var l = { "header": this.getHeader(e, t, A), "body": r }, h = { "seq": t, "deleted": !1, "cmd": e, "time": (new Date).getTime(), "success": function success() { for (var A = [], r = 0; r < arguments.length; r++)A[r] = arguments[r]; if (C.includes(e)) { var o = (performance.now() - g).toFixed(0); c.logger.info(a.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_MESSAGE_WITH_CALLBACK + " seq: ".concat(t, ", cmd: ").concat(e, ", cost_time: ").concat(o)) } i && i.apply(void 0, A) }, "error": o }, d = this.sendDataList.push(h); this.sendDataMap[h.seq] = d; var E = JSON.stringify(l); I.includes(e) || this.logger.info(a.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_MESSAGE_WITH_CALLBACK + " " + E), this.useNetAgent && "LoginReq" === e ? this.websocket.send(E, void 0, !0) : this.websocket.send(E), this.logger.debug(a.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_MESSAGE_WITH_CALLBACK + " success") }, A.prototype.getHeader = function (e, t, A) { return { "version": "1.0.1", "cmd": e, "appid": this.appid + "", "seq": t, "user_id": this.userid, "session_id": A } }, A.prototype.connectServer = function (e, t, A, r) { var i, o = this; if (this.logger.info(a.ZEGO_WEBRTC_ACTION.SIGNAL_CONNECT_SERVER + " " + A), this.roomID = e, this.token = t, this.server = A, this.state = s.ENUM_CONNECT_STATE.connecting, this.connectCallback = r, this.isServerConnected) this.logger.info(a.ZEGO_WEBRTC_ACTION.SIGNAL_CONNECT_SERVER + " websocket is connected"), this.resetConnectTimer(), this.state = s.ENUM_CONNECT_STATE.connected; else try { if (this.useNetAgent) { if (!this.stateCenter.appConfig) return void this.logger.info(a.ZEGO_WEBRTC_ACTION.SIGNAL_CONNECT_SERVER + " no app config "); var n = this.stateCenter.appConfig.media_config.publish_config.resource_info.find(function (e) { return e.resource_type === s.SignalResourceType.RTC }); if (!n) return void (r && r(c.errorCodeList.GET_CONFIG_FAIL)); var g = null === (i = null == n ? void 0 : n.service_info) || void 0 === i ? void 0 : i.find(function (e) { return e.protocol === s.ProtocolType.WEBRTC }); if (!g) return void (r && r(c.errorCodeList.GET_CONFIG_FAIL)); var l = g.url_template.split("{IP}")[1].split("?"), h = l[0], d = l[1], C = { "path": h, "query": d }; this.stateCenter.isTestMode && (C = { "path": h + 2, "query": d }), this.logger.info(a.ZEGO_WEBRTC_ACTION.SIGNAL_CONNECT_SERVER + " signal " + JSON.stringify(C)), this.websocket instanceof WebSocket && (this.websocket.onclose = null, this.websocket.onerror = null, this.websocket.close(), this.websocket = null), !this.websocket && (this.websocket = new u.AnalogSocket(this.server, this.netAgent, C, this.logger, this.stateCenter)), this.websocket.open() } else this.logger.info(a.ZEGO_WEBRTC_ACTION.SIGNAL_CONNECT_SERVER + " need new websocket"), this.websocket && (this.logger.warn(a.ZEGO_WEBRTC_ACTION.SIGNAL_CONNECT_SERVER + " close error websocket"), this.websocket.onclose = null, this.websocket.onerror = null, this.websocket.close()), this.websocket = new WebSocket(this.server); this.websocket.onclose = function (e) { var t = e || {}, A = t.code, r = t.reason, i = t.wasClean; o.logger.info(a.ZEGO_WEBRTC_ACTION.SIGNAL_CONNECT_SERVER + " websocket close call. msg = ".concat(JSON.stringify(e), ", ").concat(A, ", ").concat(r, ", ").concat(i)), o.useNetAgent && o.state != s.ENUM_CONNECT_STATE.disconnect && (o.successConnectedCallback = o.connectCallback, o.resetConnectTimer(), o.startConnectTimer(function (e) { 1008 === e && o.disconnectCallback(c.errorCodeList.TOKEN_EXPIRED) })) }, this.websocket.onerror = function (e) { var t = e || {}, A = t.code, r = t.reason, i = t.wasClean; o.logger.info(a.ZEGO_WEBRTC_ACTION.SIGNAL_CONNECT_SERVER + " websocket onerror call. msg = ".concat(JSON.stringify(e), ", ").concat(A, ", ").concat(r, ", ").concat(i)), o.stateCenter.useNetAgent && (null == e ? void 0 : e.code) && o.disconnectCallback(void 0, null == e ? void 0 : e.code) }, this.useNetAgent && this.websocket instanceof u.AnalogSocket ? (this.websocket.onopen = function () { o.logger.info(a.ZEGO_WEBRTC_ACTION.SIGNAL_CONNECT_SERVER + " websocket open call"), o.bindWebSocketEvents(), o.state = s.ENUM_CONNECT_STATE.connected, o.websocket && (o.websocket.onmessage = o.handleWsMessage.bind(o)) }, this.websocket.onreconnnecting = function () { o.logger.info(a.ZEGO_WEBRTC_ACTION.SIGNAL_CONNECT_SERVER + " websocket reconnecting " + !!o.successConnectedCallback), o.successConnectedCallback && (o.connectCallback = o.successConnectedCallback), o.updateToken() }, this.websocket.onmessage = this.handleWsMessage.bind(this), this.updateToken()) : this.websocket.onopen = function () { o.resetConnectTimer(), o.logger.info(a.ZEGO_WEBRTC_ACTION.SIGNAL_CONNECT_SERVER + " websocket open call"), o.websocket && (o.websocket.onmessage = o.handleWsMessage.bind(o)), o.bindWebSocketEvents(), o.updateToken(), o.state = s.ENUM_CONNECT_STATE.connected } } catch (e) { this.logger.error(a.ZEGO_WEBRTC_ACTION.SIGNAL_CONNECT_SERVER + " websocket error " + e) } this.useNetAgent || (this.logger.info(a.ZEGO_WEBRTC_ACTION.SIGNAL_CONNECT_SERVER + " " + this.tryConnectInterval), this.tryConnectTimer = setTimeout(function () { o.startConnectTimer(r) }, this.tryConnectInterval)) }, A.prototype.startConnectTimer = function (e) { if (this.logger.info(a.ZEGO_WEBRTC_ACTION.SIGNAL_START_CONNECT_TIMER + " call"), this.tryConnectCount >= s.MAX_TRY_CONNECT_COUNT) return this.logger.info(a.ZEGO_WEBRTC_ACTION.SIGNAL_START_CONNECT_TIMER + " beyond " + this.server + "max limit"), void this.disconnectCallback(); this.websocket && this.websocket.readyState === u.SocketState.OPEN ? (this.logger.info(a.ZEGO_WEBRTC_ACTION.SIGNAL_START_CONNECT_TIMER + " websocket is connected"), this.resetConnectTimer()) : (this.tryConnectCount += 1, this.connectServer(this.roomID, this.token, this.server, e)) }, A.prototype.disconnectServer = function () { this.logger.info(a.ZEGO_WEBRTC_ACTION.SIGNAL_DISCONNECT_SERVER + " call"), this.connectCallback = null, this.resetCheckMessage(), this.resetConnectTimer(), this.websocket && (this.websocket.onclose = null, this.websocket.onerror = null, this.websocket.close(), this.websocket = null), this.token = "", this.sessionInfos = {}, this.tokenType = 0, this.tryHeartbeatCount = 0, this.tryConnectCount = 0, this.state = s.ENUM_CONNECT_STATE.disconnect }, Object.defineProperty(A.prototype, "isServerConnected", { "get": function get() { var e; return (null === (e = this.websocket) || void 0 === e ? void 0 : e.readyState) === u.SocketState.OPEN }, "enumerable": !1, "configurable": !0 }), A.prototype.createSession = function (e, t, A, r, i, o, n, c, g) { void 0 === i && (i = ""), void 0 === o && (o = ""), this.logger.info(a.ZEGO_WEBRTC_ACTION.SIGNAL_CREATE_SESSION + " call: " + r); var u = ""; s.PROTO_VERSION.split(".").forEach(function (e, t) { return u += 1 == e.length && 1 == t ? "0" + e : e }); var l = { "type": t, "stream_id": r, "platform": this.platform, "browser": this.browser.name, "version": this.browser.version, "app_id": this.appid, "negotiate_mode": A, "strAuthParam": i, "sdk_version": 1 * u, "turn_server_host": "string" == typeof o ? o : "", "params": "".concat(n) }; this.sendMessageWithCallback("CreateSessionReq", e, 0, l, c, g) }, A.prototype.createSessionWithSdp = function (e, t, A) { var r; return o(this, void 0, void 0, function () { var o, c, g, u, l, h, d, C, I, E, p, f; return n(this, function (n) { switch (n.label) { case 0: return o = e.seq, c = e.type, u = e.strAuthParam, l = e.sdp, h = e.serverHost, d = e.playBufLevel, C = e.params, this.logger.info(a.ZEGO_WEBRTC_ACTION.SIGNAL_CREATE_SESSION + " call: " + (g = e.streamId)), [4, this.getMiniSdp(l)]; case 1: return I = n.sent(), this.logger.info(a.ZEGO_WEBRTC_ACTION.SIGNAL_CREATE_SESSION + " sdp bytes decrease: ".concat(I.length ? l.length - I.length : 0, " bytes, miniSdp: ").concat(I.length ? I.length : "NONE", " bytes, SDP: ").concat(l.length, " bytes")), E = (null === (r = e.videoInfo) || void 0 === r ? void 0 : r.keyFrameInterval) || 2, p = "", s.PROTO_VERSION.split(".").forEach(function (e, t) { return p += 1 == e.length && 1 == t ? "0" + e : e }), f = { "type": c, "app_id": this.appid, "stream_id": g, "sdp": I.length ? I : l, "user_id": this.userid, "platform": this.platform, "browser": this.browser.name, "sdk_vers": parseInt(p), "clientIp": "", "media_server_host": "string" == typeof h ? h : "", "strAuthParam": u, "params": "".concat(C), "keyframe_intv": parseInt(E) }, d && (f.min_play_buf_level_ms = d), this.logger.info(a.ZEGO_WEBRTC_ACTION.SIGNAL_CREATE_SESSION + " " + g + " params: " + JSON.stringify(i(i({}, f), { "sdp": void 0 }))), this.sendMessageWithCallback("CreateSessionWithSdpReq", o, 0, f, t, A), [2] } }) }) }, A.prototype.sendMediaDescUpdateReq = function (e, t, A, r, i) { return o(this, void 0, void 0, function () { var o; return n(this, function (n) { switch (n.label) { case 0: return [4, this.getMiniSdp(A.sdp)]; case 1: return o = n.sent(), this.sendMessageWithCallback("MediaDescUpdateReq", e, t, { "peer_id": A.peerID, "type": A.type, "sdp": o.length ? o : A.sdp, "width": A.width, "height": A.height, "framerate": A.frameRate, "video_min_kpbs": A.video_min_kpbs, "video_max_kpbs": A.video_max_kpbs, "audio_kpbs": A.audio_kpbs, "keyframe_intv": A.keyframe_intv }, r, i), [2] } }) }) }, A.prototype.removeSession = function (e) { this.logger.info(a.ZEGO_WEBRTC_ACTION.SIGNAL_REMOVE_SESSION + " call " + e), this.sessionInfos[e] && delete this.sessionInfos[e] }, A.prototype.sendCloseSession = function (e, t, A, r, i) { this.logger.info(a.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_REMOVE_SESSION + " call: " + t); var o = { "reason": A }; this.removeSession(t), this.sendMessageWithCallback("CloseSessionReq", e, t, o, r, i) }, A.prototype.sendMessage = function (e, t, A, r) { if (this.logger.info(a.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_MESSAGE + " call " + e), this.websocket && this.websocket.readyState === u.SocketState.OPEN) { var i = this.getHeader(e, t, A), o = JSON.stringify({ "header": i, "body": r }); this.websocket.send(o), this.logger.info(a.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_MESSAGE + " success") } else this.logger.error(a.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_MESSAGE + " connect not establish") }, A.prototype.handleRespondData = function (e, t) { this.logger.debug(a.ZEGO_WEBRTC_ACTION.SIGNAL_HANDLE_RESPOND_DATA + " call"); var A = this.sendDataMap[t.header.seq]; if (null != A) { delete this.sendDataMap[t.header.seq], this.sendDataList.remove(A); var r = A._data; r.cmd !== e ? this.logger.error(a.ZEGO_WEBRTC_ACTION.SIGNAL_HANDLE_RESPOND_DATA + " command is not match") : r.success && r.success(t.header.seq, t.header.session_id, t.body) } else { if ("CloseSessionRsp" == t.header.cmd) return; this.logger.error(a.ZEGO_WEBRTC_ACTION.SIGNAL_HANDLE_RESPOND_DATA + " cannot find data " + e) } }, A.prototype.addSession = function (e, t) { this.logger.info(a.ZEGO_WEBRTC_ACTION.SIGNAL_ADD_SESSION + " call" + e), this.sessionInfos[e] = { "token": t } }, A.prototype.handlePushData = function (e) { this.logger.info(a.ZEGO_WEBRTC_ACTION.SIGNAL_HANDLE_PUSH_DATA + " call " + e.header.cmd + " session " + e.header.session_id); var t = this.pushCallback[e.header.cmd + e.header.session_id]; t ? t.callback && t.callback(e.header.seq, e.header.session_id, e.body) : this.logger.info(a.ZEGO_WEBRTC_ACTION.SIGNAL_HANDLE_PUSH_DATA + " no callbackData " + e.header.cmd + " session: " + e.header.session_id) }, A.prototype.handlePushResetSessionData = function (e) { this.logger.debug(a.ZEGO_WEBRTC_ACTION.SIGNAL_HANDLE_PUSH_RESET_SESSION_DATA + " call "); var t = []; if (0 == e.body.cResetType) t = Object.keys(this.sessionInfos); else if (1 == e.body.cResetType) for (var A = 0; A < e.body.session_ids.length; A++)t.push(e.body.session_ids[A]); if (this.sendResetSessionAck(e.header.seq, 0, 0), 0 != t.length) for (var r = 0; r < t.length; r++) { var i = this.pushCallback[e.header.cmd + t[r]]; null == i ? this.logger.info(a.ZEGO_WEBRTC_ACTION.SIGNAL_HANDLE_PUSH_RESET_SESSION_DATA + " no callbackData " + t[r]) : i.callback && i.callback(e.header.seq, t[r], e.body) } else this.logger.info(a.ZEGO_WEBRTC_ACTION.SIGNAL_HANDLE_PUSH_RESET_SESSION_DATA + " no session to callback") }, A.prototype.sendMediaDesc = function (e, t, A, r, i, s) { return o(this, void 0, void 0, function () { var o, c, g, u; return n(this, function (n) { switch (n.label) { case 0: return this.logger.info(a.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_MEDIA_DESC + " call: " + t), o = "MediaDescReq", [4, this.getMiniSdp(r.sdp)]; case 1: return c = n.sent(), g = c.length ? c : r.sdp, this.logger.info(a.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_MEDIA_DESC + " sdp bytes decrease: ".concat(c.length ? g.length - c.length : 0, " bytes, miniSdp: ").concat(c.length ? c.length : "NONE", " bytes, SDP: ").concat(g.length, " bytes")), u = { "type": A, "sdp": g }, null != r.width && (u.width = r.width), null != r.height && (u.height = r.height), null != r.frameRate && (u.framerate = r.frameRate), null != r.video_min_kpbs && (u.video_min_kpbs = r.video_min_kpbs), null != r.video_max_kpbs && (u.video_max_kpbs = r.video_max_kpbs), null != r.audio_kpbs && (u.audio_kpbs = r.audio_kpbs), null != r.keyframe_intv && (u.keyframe_intv = r.keyframe_intv), null != r.min_play_buf_level_ms && (u.min_play_buf_level_ms = r.min_play_buf_level_ms), this.sendMessageWithCallback(o, e, t, u, i, s), [2] } }) }) }, A.prototype.sendCandidateInfo = function (e, t, A, r, i) { this.logger.info(a.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_CANDIDATE_INFO + " call: " + t); for (var o = [], n = 0; n < A.length; n++)o.push({ "candidate": A[n].candidate, "sdpMid": A[n].sdpMid, "sdpMLineIndex": A[n].sdpMLineIndex }); this.sendMessageWithCallback("CandidateInfoReq", e, t, { "infos": o }, r, i) }, A.prototype.sendMediaDescAck = function (e, t, A) { this.logger.info(a.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_MEDIA_DESC_ACK + " call: " + t), this.sendMessage("MediaDescAck", e, t, { "result": A }) }, A.prototype.sendUpdateMediaDescAck = function (e, t, A, r) { this.logger.info(a.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_MEDIA_DESC_ACK + " call: " + t), this.sendMessage("MediaDescUpdateAck", e, t, { "peer_id": r, "result": A }) }, A.prototype.sendCandidateInfoAck = function (e, t, A) { this.logger.info(a.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_CANDIDATE_INFO_ACK + " call: " + t), this.sendMessage("CandidateInfoAck", e, t, { "result": A }) }, A.prototype.sendCloseSessionAck = function (e, t, A) { this.logger.info(a.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_CLOSE_SESSION_ACK + " call: " + t), this.sendMessage("CloseSessionAck", e, t, { "result": A }) }, A.prototype.sendResetSessionAck = function (e, t, A) { this.logger.debug(a.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_RESET_SESSION_ACK + " call: " + t), this.sendMessage("SessionResetAck", e, t, { "result": A }) }, A.prototype.registerPushCallback = function (e, t, A) { A && "function" == typeof A && (this.logger.info(a.ZEGO_WEBRTC_ACTION.SIGNAL_REGISTER_PUSH_CALLBACK + " set callback " + t), this.pushCallback[e + t] = { "callback": A }) }, A.prototype.unregisterPushCallback = function (e, t) { delete this.pushCallback[e + t] }, A.prototype.checkMessageTimeout = function () { for (var e, t = this, A = this.sendDataList.getFirst(), r = (new Date).getTime(), i = 0, o = 0, n = 0; null != A && !(A._data.time + this.sendDataTimeout > r);)if (delete this.sendDataMap[A._data.seq], this.sendDataList.remove(A), ++o, -1 != this.checkMessageList.indexOf(A._data.cmd)) { if (null == A._data.error || this.sendDataDropTimeout > 0 && A._data.time + this.sendDataDropTimeout < r ? ++n : (this.logger.warn(a.ZEGO_WEBRTC_ACTION.SIGNAL_CHECK_MESSAGE_TIMEOUT + " error cmd = " + A._data.cmd + " seq =" + (null === (e = A._data) || void 0 === e ? void 0 : e.seq)), A._data.error && A._data.error(s.SEND_MSG_TIMEOUT, A._data.seq)), ++i >= this.sendDataCheckOnceCount) break; A = this.sendDataList.getFirst() } else A = this.sendDataList.getFirst(); this.sendDataCheckTimer = setTimeout(function () { t.checkMessageTimeout() }, this.sendDataCheckInterval), 0 == o && 0 == n || this.logger.info(a.ZEGO_WEBRTC_ACTION.SIGNAL_CHECK_MESSAGE_TIMEOUT + " call success, state: timeout=" + o + " drop=" + n) }, A.prototype.sendHeartbeat = function () { var e = this; if (this.logger.debug(a.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_HEARTBEAT + "call tryHeartbeatCount:" + this.tryHeartbeatCount), 0 != Object.keys(this.sessionInfos).length) if (this.state === s.ENUM_CONNECT_STATE.connected) { if (++this.tryHeartbeatCount > s.MAX_TRY_HEARTBEAT_COUNT) return this.logger.error(a.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_HEARTBEAT + " heartbeat try limit"), void this.disconnectCallback(); var t = []; for (var A in this.sessionInfos) t.push(parseInt(A)); var r = { "session_ids": t }, i = (new Date).getTime(); this.sendMessageWithCallback("ClientHBReq", this.stateCenter.getSeq(), 0, r, function (t, A, r) { e.logger.info(a.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_HEARTBEAT + " hb time " + ((new Date).getTime() - i)), e.heartbeatInterval != r.hb_interval && (e.heartbeatInterval = r.hb_interval, e.onUpdateHeartBeatInterval(r.hb_interval)), e.tryHeartbeatCount = 0 }, function (e, t) { }) } else this.logger.warn(a.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_HEARTBEAT + " state error"); else this.logger.info(a.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_HEARTBEAT + " no need to heartbeat") }, A.prototype.QualityReport = function (e, t, A, r, o) { this.logger.debug(a.ZEGO_WEBRTC_ACTION.SIGNAL_QUALITY_REPORT + " call"); var n = { "streams": [i(i({}, A), { "aid": t })] }; this.sendMessageWithCallback("QualityReportReq", e, t, n, r, o) }, A.prototype.sendStreamStatus = function (e, t, A, r, i, o) { this.logger.info(a.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_STREAM_STATUS + " call " + t); var n = { "mic_status": r, "camera_status": A }; this.logger.info("".concat(a.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_STREAM_STATUS, " stream ").concat(i || "", " status ").concat(JSON.stringify(n))), this.sendMessageWithCallback("StreamStatusNotify", e, t, n, function () { }, function (e) { e === s.SEND_MSG_TIMEOUT && o && o() }) }, A.prototype.ActivatePlayVideoStream = function (e, t, A, r, i) { this.logger.info(a.ZEGO_WEBRTC_ACTION.SIGNAL_ACTIVE_PLAY_VIDEO_STREAM + " call"); var o = { "active": A ? 0 : 1, "layer": 0 }; this.logger.info(a.ZEGO_WEBRTC_ACTION.SIGNAL_ACTIVE_PLAY_VIDEO_STREAM + " activate video " + JSON.stringify(o)), this.sendMessageWithCallback("ActivateVideoPlayStreamReq", e, t, o, r, i) }, A.prototype.ActivatePlayAudioStream = function (e, t, A, r, i) { this.logger.info(a.ZEGO_WEBRTC_ACTION.SIGNAL_ACTIVE_PLAY_AUDIO_STREAM + " call"); var o = { "active": A ? 0 : 1, "layer": 0 }; this.logger.info(a.ZEGO_WEBRTC_ACTION.SIGNAL_ACTIVE_PLAY_AUDIO_STREAM + " activate audio " + JSON.stringify(o)), this.sendMessageWithCallback("ActivateAudioPlayStreamReq", e, t, o, r, i) }, A.prototype.sendBroadcasterStatus = function (e, t, A) { this.logger.info(a.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_BROADCAST_STATUS + " call " + t), this.sendMessage("BroadcasterStatusNotify", e, t, { "status": A }) }, A.prototype.sendNetProbe = function (e, t, A, r, i) { this.logger.info(a.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_NET_PROBE + " call " + t), this.sendMessageWithCallback("NetQualityProbeReq", e, t, { "peer_id": A, "action": 1 }, r, i) }, A.prototype.sendNetQualityInfoPushAck = function (e, t, A, r) { this.logger.info(a.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_NET_PROBE + " call " + t), this.sendMessage("NetQualityInfoAck", e, t, { "peer_id": A, "result": r }) }, A.prototype.activateSEIInsert = function (e, t, A, r, i, o, n) { }, A.prototype.getP2PNetStats = function (e, t, A, r, i) { this.sendMessageWithCallback("Peer2PeerNetStatsGetReq", e, t, { "peer_id": A }, r, i) }, A.prototype.sendGWCmd = function (e, t, A, r, i) { this.sendMessageWithCallback("CmdReq", e, t, A, r, i) }, A.prototype.sendGWAck = function (e, t, A) { this.sendMessage("CmdAck", e, t, A) }, A.prototype.getMiniSdp = function (e) { var t, A; return o(this, void 0, void 0, function () { var r, i; return n(this, function (o) { switch (o.label) { case 0: if (this.logger.info("zc.s.gmsdp isMini: ".concat(this.stateCenter.isMiniSdp, " sdp:").concat(e.length)), !this.stateCenter.isMiniSdp || !e) return [3, 4]; o.label = 1; case 1: return o.trys.push([1, 3, , 4]), [4, null === (t = this.stateCenter.streamCenter.miniSdpWorker) || void 0 === t ? void 0 : t.parseToMiniSdp(e || "")]; case 2: return r = o.sent(), this.logger.info("zc.s.gmsdp parse sdp success buffer:".concat(r.byteLength)), r && r.byteLength ? [2, null === (A = l.ClientUtil.uint8arrayToBase64(r)) || void 0 === A ? void 0 : A.trim()] : (this.stateCenter._isMiniSdp = !1, [2, ""]); case 3: return i = o.sent(), this.logger.error("zc.s.gmsdp error:".concat(JSON.stringify(i))), this.stateCenter._isMiniSdp = !1, [3, 4]; case 4: return [2, ""] } }) }) }, A.prototype.parseRecSdp = function (e) { var t; return o(this, void 0, void 0, function () { var A, r, i; return n(this, function (o) { switch (o.label) { case 0: if (this.logger.info("zc.s.prsdp isMini: ".concat(this.stateCenter.isMiniSdp, " rSDP:").concat(e.length)), !this.stateCenter.isMiniSdp || !e) return [3, 4]; o.label = 1; case 1: return o.trys.push([1, 3, , 4]), A = h.WebRTCUtil.base64ToUint8Array(e), [4, null === (t = this.stateCenter.streamCenter.miniSdpWorker) || void 0 === t ? void 0 : t.loadMiniSdpToOriginSdp(A)]; case 2: return r = o.sent(), this.logger.info("zc.s.prsdp parse minisdp success sdp:".concat(r.length)), [2, r]; case 3: return i = o.sent(), this.logger.error("zc.s.gmsdp error:".concat(JSON.stringify(i))), this.stateCenter._isMiniSdp = !1, [3, 4]; case 4: return [2, e] } }) }) }, A.prototype.sendNetQualityGradeAck = function (e, t, A) { this.logger.info(a.ZEGO_WEBRTC_ACTION.SEND_NET_QUALITY_GRADE_ACK + " call: " + e); var r = d.webrtc_cmd.WebrtcCmdRspMsg.encode({ "net_quality_grade_ack": { "result": A } }).finish(), i = l.ClientUtil.uint8arrayToBase64(r); this.sendGWCmd(this.stateCenter.getSeq(), e, { "peer_id": t, "cmd_id": 7, "body": i }, function () { }, function () { }) }, A }(); t.ZegoSignal = E }, "6622": function _(e, t, r) { "use strict"; var i = this && this.__importDefault || function (e) { return e && e.__esModule ? e : { "default": e } }; Object.defineProperty(t, "__esModule", { "value": !0 }), t.AutoplayDialog = void 0; var o = i(r(3774)), s = "zg_autoplay_wrapper"; function n() { return navigator.language.includes("zh") } var a = function () { function A() { this.content = 'Media play failed. Click the "Resume"to resume.', this.dialogNode = null, this.bodyPosition = "static"; var e = document.createElement("style"); e.innerHTML = ".zg_autoplay_mask{position:fixed;top:0;left:0;right:0;bottom:0;width:100vw;height:100vh;display:flex;justify-content:center;align-items:center;background:rgba(0,0,0,0.5);z-index:1500;}.zg_autoplay_mask div:not(.zg_autoplay_action_wrapper){display:block !important;}.".concat(s, "{padding:14px;background:#fff;border-radius:3px;box-shadow:1px 1px 10px #988e8d;border:1px solid #d1cfcf;max-width:500px;}.").concat(s, " a{color:#2473E8;}.zg_autoplay_header{overflow:hidden;text-overflow:ellipsis;font-size:16px;font-weight:600;}.zg_autoplay_content{margin:8px 0;}.zg_autoplay_action_wrapper{width:100%;display:flex !important;align-items:center;justify-content:right;float:right;}.zg_autoplay_collapse{margin-right:auto;cursor:pointer}.zg_autoplay_question{height:100%;line-height:16px;cursor:pointer;}.zg_autoplay_action_confirm{margin-left:8px;color:#fff;background:#0072ff;padding:4px 12px;outline:none;border:1px solid;border-radius:3px;font-weight:bold;}.zg_autoplay_action_confirm:hover{opacity:0.9;}.zg_autoplay_collapse,.zg_autoplay_action_confirm,.zg_autoplay_content,.zg_autoplay_question{font-size:14px;}@media screen and (max-width:750px){.").concat(s, "{width:80vw;}}"), document.head.appendChild(e), n() && (this.content = "浏览器阻止音视频播放，请点击“恢复播放”。"), this.eManager = new o.default } return A.getInstance = function () { return A.instance || (A.instance = new A), A.instance }, A.prototype.createDialog = function () { var e = document.createElement("template"); e.innerHTML = "<div class='zg_autoplay_mask'><div class='".concat(s, "'><div class='zg_autoplay_header'>").concat(location.host, "</div><div class='zg_autoplay_content'>").concat(this.content, "</div><div class='zg_autoplay_action_wrapper'></div></div></div>").trim(); var t = document.createElement("button"); t.className = "zg_autoplay_action_confirm", t.innerText = n() ? "恢复播放" : "Resume", t.onclick = this.onConfirm.bind(this); var A = e.content.firstChild, r = A.querySelector(".zg_autoplay_action_wrapper"); return r && r.appendChild(t), A }, A.prototype.onConfirm = function (e) { e && e.stopPropagation(), this.eManager.emit("allowPlay"), this.deleteDiaLog() }, A.prototype.deleteDiaLog = function () { this.dialogNode && (document.body.removeChild(this.dialogNode), this.dialogNode = null) }, A.prototype.addDiaLog = function () { this.dialogNode = this.dialogNode || this.createDialog(), document.body.appendChild(this.dialogNode), this.dialogNode.onclick = this.onConfirm.bind(this) }, A.prototype.on = function (e, t) { return this.eManager.addEventHandler(e, t) }, A.instance = null, A }(); t.AutoplayDialog = a }, "6607": function _(e, t, i) { "use strict"; var o = this && this.__assign || function () { return (o = Object.assign || function (e) { for (var t, A = 1, r = arguments.length; A < r; A++)for (var i in t = arguments[A]) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]); return e }).apply(this, arguments) }, n = this && this.__awaiter || function (e, t, A, r) { return new (A || (A = Promise))(function (i, o) { function n(e) { try { a(r.next(e)) } catch (e) { o(e) } } function s(e) { try { a(r.throw(e)) } catch (e) { o(e) } } function a(e) { var t; e.done ? i(e.value) : (t = e.value, t instanceof A ? t : new A(function (e) { e(t) })).then(n, s) } a((r = r.apply(e, t || [])).next()) }) }, s = this && this.__generator || function (e, t) { var A, r, i, o, n = { "label": 0, "sent": function sent() { if (1 & i[0]) throw i[1]; return i[1] }, "trys": [], "ops": [] }; return o = { "next": s(0), "throw": s(1), "return": s(2) }, "function" == typeof Symbol && (o[Symbol.iterator] = function () { return this }), o; function s(s) { return function (a) { return function (s) { if (A) throw new TypeError("Generator is already executing."); for (; o && (o = 0, s[0] && (n = 0)), n;)try { if (A = 1, r && (i = 2 & s[0] ? r.return : s[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, s[1])).done) return i; switch (r = 0, i && (s = [2 & s[0], i.value]), s[0]) { case 0: case 1: i = s; break; case 4: return n.label++, { "value": s[1], "done": !1 }; case 5: n.label++, r = s[1], s = [0]; continue; case 7: s = n.ops.pop(), n.trys.pop(); continue; default: if (!((i = (i = n.trys).length > 0 && i[i.length - 1]) || 6 !== s[0] && 2 !== s[0])) { n = 0; continue } if (3 === s[0] && (!i || s[1] > i[0] && s[1] < i[3])) { n.label = s[1]; break } if (6 === s[0] && n.label < i[1]) { n.label = i[1], i = s; break } if (i && n.label < i[2]) { n.label = i[2], n.ops.push(s); break } i[2] && n.ops.pop(), n.trys.pop(); continue }s = t.call(e, n) } catch (e) { s = [6, e], r = 0 } finally { A = i = 0 } if (5 & s[0]) throw s[1]; return { "value": s[0] ? s[1] : void 0, "done": !0 } }([s, a]) } } }, a = this && this.__importDefault || function (e) { return e && e.__esModule ? e : { "default": e } }; Object.defineProperty(t, "__esModule", { "value": !0 }), t.StreamView = void 0; var c = a(i(3774)), u = i(7436), l = i(6622), h = navigator.userAgent, d = /^(?=.*MicroMessenger)(?=.*HONOR).*$/.test(h || ""), C = l.AutoplayDialog.getInstance(), I = function () { function A(e, t, A) { var i, n, s, a = this; this.previewer = t, this.video = null, this.audio = null, this.srcNode = null, this.options = { "enableAutoplayDialog": !0, "clearLastFrame": !0, "useAudioElement": !0 }, this.emitPlayFailed = (i = function r() { a.eventManager.emit("autoplayFailed"), a.options.enableAutoplayDialog && C.addDiaLog(), a.logger.warn("zc.zsv autoplay failed") }, void 0 === (n = 600) && (n = 100), function () { for (var e = [], t = 0; t < arguments.length; t++)e[t] = arguments[t]; var A = this; clearTimeout(s), s = window.setTimeout(function () { i.apply(A, e) }, n) }), this.videoMuted = !1, this.audioMuted = !1, this.eventHandler = { "visibilitychange": function visibilitychange() { var e; document.hidden || a.audioMuted || (a.logger.info("zc.zsv page show, recover audio"), a.options.useAudioElement && a.audio ? a.audio.srcObject = a.audio.srcObject : (a.logger.info("zc.ac.rs page show"), a.ac.resume()), a.mountPlayer(a.audio, !0)), document.hidden || a.videoMuted || (null === (e = a.video) || void 0 === e ? void 0 : e.paused) && (a.logger.info("zc.zsv page show, recover video"), a.mountPlayer(a.video, !0)) }, "canPlayAudio": function canPlayAudio() { a.eventManager.emit("canPlayAudio") }, "canPlayVideo": function canPlayVideo() { a.eventManager.emit("canPlayVideo") } }, this.options = o(o({}, this.options), A); var g = this.id = "".concat(e.id), u = document.createElement("div"); u.id = "zg-rtc-player_".concat(g), u.setAttribute("style", "width:100%;height:100%;position:relative;background-color:black;overflow:hidden;"); var l = e.getVideoTracks()[0], h = e.getAudioTracks()[0], d = document.createElement("video"); d.id = "zg-rtc-video_".concat(g), d.setAttribute("style", "width:100%;height:100%;object-fit:contain;"), d.setAttribute("playsinline", ""), d.setAttribute("muted", ""), d.muted = !0, d.srcObject = new MediaStream, d.addEventListener("canplay", this.eventHandler.canPlayVideo), l && d.srcObject.addTrack(l); var I = document.createElement("audio"); I.id = "zg-rtc-audio_".concat(g), I.setAttribute("playsinline", ""), I.setAttribute("muted", ""), I.muted = !0, I.srcObject = this.audioStream = new MediaStream, I.addEventListener("canplay", this.eventHandler.canPlayAudio), h && I.srcObject.addTrack(h), "object" == ("undefined" == typeof WeixinJSBridge ? "undefined" : _typeof(WeixinJSBridge)) && "function" == typeof WeixinJSBridge.invoke && WeixinJSBridge.invoke("getNetworkType", {}, function () { a.logger.info("zc.zsv weixin load media"), I.load(), d.load() }), this.wrapper = u, this.video = d, this.audio = I, this.eventManager = new c.default, C.on("allowPlay", function () { a.resume() }), document.addEventListener("visibilitychange", this.eventHandler.visibilitychange) } return Object.defineProperty(A.prototype, "ac", { "get": function get() { return this.previewer.ac }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "browser", { "get": function get() { return this.previewer.stateCenter.browser }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "logger", { "get": function get() { return this.previewer.logger }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "isLocal", { "get": function get() { return this.previewer instanceof u.ZegoPreview }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "isMounted", { "get": function get() { return !!this.wrapper.parentNode }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "hasAudio", { "get": function get() { var e, t; return "live" === (null === (t = null === (e = this.audioStream) || void 0 === e ? void 0 : e.getTracks()[0]) || void 0 === t ? void 0 : t.readyState) && !this.audioMuted }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(A.prototype, "hasVideo", { "get": function get() { var e, t, A; return !!(null === (e = this.video) || void 0 === e ? void 0 : e.parentNode) && "live" === (null === (A = null === (t = this.video.srcObject) || void 0 === t ? void 0 : t.getTracks()[0]) || void 0 === A ? void 0 : A.readyState) }, "enumerable": !1, "configurable": !0 }), A.prototype.resume = function (e, t) { return void 0 === t && (t = ["audio", "video"]), n(this, void 0, void 0, function () { var A = this; return s(this, function (r) { return this.logger.info("zc.zsv resume call: ".concat(e, ", kindList: ").concat(t)), t.forEach(function (t) { return n(A, void 0, void 0, function () { var A, r, i = this; return s(this, function (o) { switch (o.label) { case 0: return r = "audio" === t ? this.audio : this.video, ((A = "audio" === t) ? this.hasAudio : this.hasVideo) ? !A || this.options.useAudioElement ? [3, 1] : (this.logger.info("zc.zsv resume ac: " + this.ac.state), this.ac.resume(), [3, 5]) : [3, 5]; case 1: return e && r ? (r.srcObject = r.srcObject, [4, new Promise(function (t) { r.addEventListener("canplay", function e() { r.removeEventListener("canplay", e), t(0) }) })]) : [3, 3]; case 2: o.sent(), o.label = 3; case 3: return [4, null == r ? void 0 : r.play().catch(function (e) { i.logger.info("zc.zsv resume failed. err:" + e.message) })]; case 4: o.sent(), o.label = 5; case 5: return [2] } }) }) }), [2] }) }) }, A.prototype.checkIfClearLastFrame = function () { return n(this, void 0, void 0, function () { return s(this, function (e) { switch (e.label) { case 0: return this.options.clearLastFrame ? [4, this.resume(!0, ["video"])] : [3, 2]; case 1: e.sent(), e.label = 2; case 2: return [2] } }) }) }, A.prototype.play = function (e, t) { void 0 === t && (t = {}), this.logger.info("zc.zsv play: ".concat(void 0 === e ? "undefined" : _typeof(e), ", ").concat(JSON.stringify(t))); var A = null; if ("string" == typeof e ? A = document.getElementById(e) : e instanceof HTMLElement && (A = e), !A) throw "Execute `play` failed, container not exist"; this.options = o(o({}, this.options), t); var r = !0; if ("safari" === this.browser) { var i = navigator.userAgent.match(/Version\/([\d\.]+)/); i && ("13.1.2" !== i[1] || this.options.useAudioElement || (r = !1)) } r || (this.logger.warn("zc.zsv safari 13.1.2 cannot use audio ctx render."), this.options.useAudioElement = !0); var n = this.options, s = n.objectFit, a = n.muted, c = n.mirror, g = !this.isLocal; this.audio && "boolean" == typeof a && (g = !a), this.video && (void 0 !== s && (this.video.style.objectFit = s), "boolean" == typeof c && (this.video.style.transform = c ? "rotateY(180deg)" : "")), !A.contains(this.wrapper) && A.appendChild(this.wrapper), this.videoMuted = !1, this.mountPlayer(this.video, !0), this.audioMuted = !g, this.mountPlayer(this.audio, g) }, A.prototype.stop = function () { var e; this.logger.info("zc.zsv stop "), this.mountPlayer(this.video, !1), this.mountPlayer(this.audio, !1); var t = null === (e = this.wrapper) || void 0 === e ? void 0 : e.parentNode; t && t.removeChild(this.wrapper) }, A.prototype.setVideo = function (e, t) { return void 0 === t && (t = !1), n(this, void 0, void 0, function () { return s(this, function (A) { switch (A.label) { case 0: return [4, this.setTrack(!0, e, t)]; case 1: return A.sent(), [2] } }) }) }, A.prototype.setAudio = function (e, t) { return void 0 === t && (t = !1), n(this, void 0, void 0, function () { return s(this, function (A) { switch (A.label) { case 0: return [4, this.setTrack(!1, e, t)]; case 1: return A.sent(), [2] } }) }) }, A.prototype.setTrack = function (e, t, A) { return void 0 === A && (A = !1), n(this, void 0, void 0, function () { var r, i, o; return s(this, function (n) { switch (n.label) { case 0: return this.logger.info("zc.zsv set track: ".concat(e, ", ").concat(void 0 === t ? "undefined" : _typeof(t), ", ").concat(A, ", ").concat(null == t ? void 0 : t.readyState)), (r = e ? this.video : this.audio) && (i = r.srcObject) ? t ? [3, 1] : ((o = i.getTracks()).forEach(function (e) { null == i || i.removeTrack(e), r.srcObject = r.srcObject }), this.eventManager.emit("_trackChange", e ? "video" : "audio"), [3, 5]) : [2]; case 1: if (!(t instanceof MediaStreamTrack)) return [3, 5]; if ((o = i.getTracks()).includes(t)) return [3, 5]; if (o.forEach(function (e) { null == i || i.removeTrack(e) }), i.addTrack(t), this.options.useAudioElement || this.initAC(!0), this.eventManager.emit("_trackChange", t.kind, t), this.mountPlayer(r, !(e ? this.videoMuted : this.audioMuted)), !A) return [3, 5]; n.label = 2; case 2: return n.trys.push([2, 4, , 5]), [4, this.resume(!0, [e ? "video" : "audio"])]; case 3: case 4: return n.sent(), [3, 5]; case 5: return [2] } }) }) }, A.prototype.setMirror = function (e) { var t = this.options.mirror = !!e; this.video && (this.video.style.transform = t ? "rotateY(180deg)" : "") }, A.prototype.setVideoMuted = function (e) { return this.logger.info("zc.zsv mute video: ".concat(e)), this.videoMuted = e, this.mountPlayer(this.video, !e) }, A.prototype.setAudioMuted = function (e) { return this.logger.info("zc.zsv mute audio: ".concat(e)), this.audioMuted = e, this.mountPlayer(this.audio, !e) }, A.prototype.setVolume = function (e) { if (this.logger.info("zc.zsv volume: ".concat(e)), this.audio) { var t = e > 100 ? 1 : e / 100; return this.audio.volume = t, this.gainNode && (this.gainNode.gain.value = t), this.audio.volume == t } return !1 }, A.prototype.takeStreamSnapshot = function (e) { var t = this.video; if (!t) return ""; if (!t.srcObject) return ""; var A = document.createElement("canvas"); A.width = this.video.videoWidth, A.height = this.video.videoHeight; var r = A.getContext("2d"); r && r.drawImage(this.video, 0, 0, A.width, A.height); var i = A.toDataURL("image/" + (null == e ? void 0 : e.imageType) || !1, null == e ? void 0 : e.quality), o = "png"; return (null == e ? void 0 : e.imageType) && (o = ["png", "jpeg"].includes(null == e ? void 0 : e.imageType) ? null == e ? void 0 : e.imageType : "png"), (null == e ? void 0 : e.save) && A.toBlob(function (t) { var A = window.URL.createObjectURL(t), r = document.createElement("a"); r.style.display = "none", r.href = A; var i = (null == e ? void 0 : e.fileName) || "snapshot" + Date.now(); r.download = i + "." + o, document.body.appendChild(r), r.click(), setTimeout(function () { document.body.removeChild(r), window.URL.revokeObjectURL(A) }, 100) }), i }, A.prototype.initAC = function (e) { if (void 0 === e && (e = !1), this.srcNode ? e && (this.srcNode.disconnect(), this.srcNode = this.ac.createMediaStreamSource(this.audioStream)) : this.srcNode = this.ac.createMediaStreamSource(this.audioStream), !this.gainNode) { var t = this.gainNode = this.ac.createGain(); this.audio && (t.gain.value = this.audio.volume) } return this.srcNode.connect(this.gainNode), { "gainNode": this.gainNode, "srcNode": this.srcNode } }, A.prototype.mountPlayer = function (e, t) { var A, r, i = this; if (!e || !this.wrapper) return !1; var o = !this.options.useAudioElement, n = "VIDEO" === e.tagName; if (t) { if (!n && o) { e.muted = !0, e.pause(), e.remove(), this.initAC().gainNode.connect(this.ac.destination); var s = "running"; this.logger.info("zc.zsv render use audio context: " + this.ac.state), this.ac.state !== s && this.ac.resume().then(function () { i.ac.state !== s && i.emitPlayFailed() }) } else if ("live" === (null === (r = null === (A = null == e ? void 0 : e.srcObject) || void 0 === A ? void 0 : A.getTracks()[0]) || void 0 === r ? void 0 : r.readyState)) { var a = null, c = function g() { e.oncanplay = null, a && (clearTimeout(a), a = null), e.play().then(function () { d && !n && (i.logger.info("zc.ac.rs honor suspend ac"), i.ac.resume()), i.logger.info("zc.zsv render  ".concat(e.tagName, " use element success")) }).catch(function (t) { i.logger.info("zc.zsv ".concat(e.tagName, " play() error: ").concat(t.message)); var A = i.isMounted, r = i.hasVideo, o = i.hasAudio, s = (t.message || "").includes("interrupted"); A && !s && (n && r || !n && o) && i.emitPlayFailed() }) }; e.muted = !0, n || (this.gainNode && this.gainNode.disconnect(), e.muted = !1, e.srcObject = e.srcObject), d && !n && (this.logger.info("zc.ac.rs honor resume ac"), this.ac.suspend()), e.play().catch(function () { }), a = window.setTimeout(function () { c() }, 1e3), e.oncanplay = function () { c() }, !e.parentNode && this.wrapper.appendChild(e) } } else if (e.muted = !0, e.remove(), e.pause(), !n) { o && this.gainNode && this.gainNode.disconnect(); var u = 5 * Math.random() + 4; setTimeout(function () { !n && !e.parentNode && e.readyState > 3 && e.load() }, 1e3 * u) } return !0 }, A.prototype.on = function (e, t) { return !!t && this.eventManager.addEventHandler(e, t) }, A.prototype.off = function (e, t) { return this.eventManager.removeEventHandler(e, t) }, A.prototype.useAudioOut = function (e) { var t; return n(this, void 0, void 0, function () { var A; return s(this, function (r) { switch (r.label) { case 0: return (A = null === (t = this.audio) || void 0 === t ? void 0 : t.setSinkId) ? [4, A.call(this.audio, e)] : [3, 2]; case 1: r.sent(), r.label = 2; case 2: return [2] } }) }) }, A.prototype.destroy = function () { this.stop(), this.video && (this.video.removeEventListener("canplay", this.eventHandler.canPlayVideo), this.video = null), this.audio && (this.audio.removeEventListener("canplay", this.eventHandler.canPlayAudio), this.audio = null), document.removeEventListener("visibilitychange", this.eventHandler.visibilitychange) }, A.prototype.getAudioNodeAndStopRender = function () { var e = this.audio, t = this.options; e && (e.muted = !0, e.remove(), e.pause()); var A = this.initAC(!0).gainNode; return t.useAudioContext && A.disconnect(), A }, A }(); t.StreamView = I }, "9723": function _(A, r, o) { "use strict"; var n, s = this && this.__extends || (n = function i(e, t) { return (n = Object.setPrototypeOf || { "__proto__": [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var A in t) Object.prototype.hasOwnProperty.call(t, A) && (e[A] = t[A]) })(e, t) }, function (e, A) { if ("function" != typeof A && null !== A) throw new TypeError("Class extends value " + String(A) + " is not a constructor or null"); function t() { this.constructor = e } n(e, A), e.prototype = null === A ? Object.create(A) : (t.prototype = A.prototype, new t) }), a = this && this.__assign || function () { return (a = Object.assign || function (e) { for (var t, A = 1, r = arguments.length; A < r; A++)for (var i in t = arguments[A]) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]); return e }).apply(this, arguments) }; Object.defineProperty(r, "__esModule", { "value": !0 }), r.ZegoStreamCenterWeb = r.CachedNodesUseMode = void 0; var c, u = o(5123), l = o(7436), h = o(9987), d = o(2277), C = o(5123), I = o(3074), E = o(9746), p = o(3525), f = o(4140), B = o(2532), m = o(1586), Q = o(93), y = o(4028), v = o(7320), S = o(1018), D = o(6348), R = o(1429), b = o(3309); !function (e) { e[e.NotReUse = 0] = "NotReUse", e[e.TheSameReUse = 1] = "TheSameReUse", e[e.DiffReUse = 2] = "DiffReUse", e[e.AllReUse = 3] = "AllReUse" }(c = r.CachedNodesUseMode || (r.CachedNodesUseMode = {})); var T = m.ZegoRTCLogEvent.kZegoTaskPublishStart, k = m.ZegoRTCLogEvent.kZegoTaskPlayStart, _ = function (t) { function e(e, A, r, i, o, n) { var s, a, g = this; return (g = t.call(this) || this).logger = e, g.stateCenter = A, g.dataReport = r, g.rtm = i, g.ac = o, g.mediaEleSources = n, g.testEnvironment = !1, g.playModule = null, g.heartbeatTimer = null, g.heartbeatInterval = 1e4, g.qualityTimerInterval = 3e3, g.previewStreamList = [], g.signalList = {}, g.chargeInfos = { "itemtype": "ChargeInfos", "timestamp_begin": 0, "timestamp_end": 0, "timestamp_diff_flag": 0, "timestamp_diff": 0, "infos": [] }, g.soundLevelDelegate = !1, g.soundLevelInterval = 1e3, g.enableInBackground = !1, g.isPeer = !0, g.probeList = {}, g.isMicEnabled = !0, g.isDataChannelEnabled = !1, g.targetQuality = u.QUALITY_CONSTANT.MiddleMinQuality, g.gwNode = "", g.playerList = {}, g.stopedPlayerList = {}, g.publisherList = {}, g.playSuccessCallBackList = {}, g.playErrorCallBackList = {}, g.waitPublishList = [], g.waitPlayList = [], g.autoSwitchProtocol = !0, g.udpFailNum = 0, g.maxUdpFailNum = 2, g.qualityInterval = 3e3, g.switchScore = 60, g.defaultBadQualityTime = 3e4, g.l3BadQualityTime = 1e4, g.switchDetectResultScore = 60, g.cdnBadQualityScore = 60, g.l3BadQualityScore = 60, g.multiPlaySwitchRate = .8, g.protocolBadQualityCount = 3, g.protocolBadQualityTime = 12e3, g.protocolQualityCacheExpiredTime = 18e4, g.fallbackInhibitionTime = 18e4, g.probeExpiredTime = 3e4, g.minProbeInterval = 15e3, g.l3DetectedTimestamp = 0, g.l3DetectResult = 0, g.isL3Fallback = !1, g.cdnProtocolBadTimestamp = 0, g.l3ProtocolBadTimestamp = 0, g.lastHandleCDNBadTimestamp = 0, g.lastHandleL3BadTimestamp = 0, g.cdnProtocolBadTime = 0, g.l3ProtocolBadTime = 0, g.probeStartedNum = 3, g.cachedGwNodesList = {}, g.cachedGwNodesMode = c.TheSameReUse, g.txQuality = -1, g.rxQuality = -1, g.isRegisterQualityPush = !1, g.netTimer = null, g.lazyEndSignalHandler = (a = {}, { "isLazyEnd": function isLazyEnd() { return !0 }, "startLazyEndTimer": function startLazyEndTimer(e, t) { a[e] && clearTimeout(a[e].timer), a[e] = {}, a[e].callback = t, a[e].timer = setTimeout(function () { t(), delete a[e] }, 9e4) }, "clearLazyEndTimer": function clearLazyEndTimer(e) { a[e] && (clearTimeout(a[e].timer), delete a[e]) }, "endAll": function endAll() { for (var e in a) clearTimeout(a[e].timer), a[e].callback(), delete a[e] }, "hasEndTask": function hasEndTask(e) { return !!a[e] }, "end": function end(e) { a[e] && (clearTimeout(a[e].timer), a[e].callback(), delete a[e]) } }), g.miniSdpWorker = null, g.tryCountConnectInterval = 3e3, g.checkMessageTimeout = function () { for (var e in g.signalList) g.signalList[e].signal && g.signalList[e].signal.checkMessageTimeout() }, g.getAllInUseUrl = function () { var e = []; for (var t in g.signalList) e.push(t); return e }, g.onDisconnectHandle = function (e, t) { if (g.logger.info("zsc.od.0 call"), g.signalList[e]) { for (var A = g.signalList[e], r = 0; r < A.publishConnectedList.length; r++) { var i = g.publisherList[A.publishConnectedList[r]]; i && i.publisher && i.publisher.onDisconnect(t) } for (r = 0; r < A.playConnectedList.length; r++) { var o = g.playerList[A.playConnectedList[r]]; o && o.player && o.player.onDisconnect(t) } delete g.signalList[e], g.stopSignalHeartbeat(), g.stateCenter.billingTimer.stopChargeInfosUpload(), g.stopSoundLevel() } }, g.eventHandler = { "visibilitychange": function visibilitychange() { var e = !document.hidden; !g.enableInBackground && g.soundLevelDelegate && (e ? (g.enableSoundLevelProcessor(!0), g.activeSoundLevel(), "suspended" === g.ac.state && g.ac.resume()) : (g.soundLevelTimer && clearTimeout(g.soundLevelTimer), g.soundLevelTimer = null, g.enableSoundLevelProcessor(!1))) } }, g.rtm._on("_roomStateUpdate", function (e, t) { for (var A in g.playerList) { var r = g.playerList[A], i = r.cdnPlayer; r.room.roomID == e && i && r.player.state === C.ENUM_PLAY_STATE.playing && r.playMode == u.PlayMode.CDN && ("CONNECTED" == t ? (i.canRetry = !0, i.retry()) : "DISCONNECTED" === t && g.stopPlayingStream(A)) } g.lazyEndSignalHandler.isLazyEnd() && g.lazyEndSignalHandler.endAll() }), document.addEventListener("visibilitychange", g.eventHandler.visibilitychange), null === (s = g.rtm.netAgent) || void 0 === s || s.on("clientInfo", function (e) { if (g.stateCenter.accessClientIp && (null == e ? void 0 : e.clientIP) && g.stateCenter.accessClientIp !== e.clientIP) { for (var t in g.logger.warn(Q.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_CLIENT_INFO + " client ip changed " + g.stateCenter.accessClientIp + " " + e.clientIP), g.publisherList) { var A = g.publisherList[t].publisher; A.resetGwNodes(), g.clearCachedGwNodesList(A, !0) } for (var t in g.playerList) { var r = g.playerList[t].player; r.resetGwNodes(), g.clearCachedGwNodesList(r, !1) } } g.stateCenter.accessClientIp = e.clientIP, "number" == typeof (null == e ? void 0 : e.timeOffset) && (g.stateCenter.clientTimeOffset = null == e ? void 0 : e.timeOffset), g.updateTimeOffsetInterval(), g.stateCenter.accessClientIp = e.clientIP }), g.streamReport = new v.StreamQualityReportWeb(e, A, g), g } return s(e, t), Object.defineProperty(e.prototype, "cameraPreviewStream", { "get": function get() { return this.previewStreamList.find(function (e) { return "camera" === e.previewType }) }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(e.prototype, "microphonePreviews", { "get": function get() { return this.previewStreamList.filter(function (e) { return "camera" === e.previewType && e.micTrack }) }, "enumerable": !1, "configurable": !0 }), Object.defineProperty(e.prototype, "shouldReportNoPlaying", { "get": function get() { return this.stateCenter.billingTimer.shouldReportRoomTime }, "enumerable": !1, "configurable": !0 }), e.prototype.initMiniSdpWorker = function (e) { var t; e && R.MiniSdpWorker.isSupported ? this.miniSdpWorker = this.miniSdpWorker || new R.MiniSdpWorker : (null === (t = this.miniSdpWorker) || void 0 === t || t.destroy(), this.miniSdpWorker = null) }, e.prototype.onSignalDisconnected = function (e) { }, e.prototype.setQualityMonitorCycle = function (e) { var t = this; return this.logger.debug("zsc.qmc.0 timeInterval " + e), 0 == Object.keys(this.publisherList).length ? this.qualityTimerInterval = e : Object.keys(this.publisherList).forEach(function (A) { t.publisherList[A].publisher.qualityTimeInterval = e, t.publisherList[A].publisher.setPublishQualityTimer() }), !0 }, e.prototype.setSessionInfo = function (e, t, A) { this.logger.debug("zsc.ssi.0 called"), this.appid = e, this.userid = t, this.testEnvironment = A }, e.prototype.onPlayStateUpdate = function (e, t, A, r) { }, e.prototype.onPlayQualityUpdate = function (e, t) { }, e.prototype.onPublishStateUpdate = function (e, t, A) { }, e.prototype.onPublishQualityUpdate = function (e, t) { }, e.prototype.onUpdateHeartBeatIntervalHandle = function (e) { e != this.heartbeatInterval && (this.logger.debug("zsc.uhb.0 update " + e), this.heartbeatTimer && (clearTimeout(this.heartbeatTimer), this.heartbeatTimer = null), this.heartbeatInterval = e, this.startSignalHeartbeat()) }, e.prototype.setPublishStateStart = function (e, t, A, r, i, o) { var n, s, a = this; this.logger.info("zsc.pss.0 call " + t); var c = this.checkPreview(A); if (!c) return this.logger.error("zsc.pss.0 stream not found"), !1; if (this.publisherList[t]) return this.logger.error("zsc.pss.0 publisher already exist"), this.stateCenter.reporter.spanSetAttributes({ "key": T.event, "par": t }, { "error": T.error.kIsPublishing.code, "message": T.error.kIsPublishing.message }), !1; var g = new h.ZegoPublish(t, this.logger, this.dataReport, this.qualityTimerInterval, this, this.stateCenter, c); g.state = C.ENUM_PUBLISH_STATE.start, g.isPeer = this.isPeer, g.reportSeq = this.stateCenter.reportSeqList.startPublish[t], g.isExternal = !0, g.cachedGwNodesMode = this.cachedGwNodesMode, g.parentSpanKey = m.ZegoRTCLogEvent.kZegoStartPublish.event; var u = null === (n = null == c ? void 0 : c.videoTrack) || void 0 === n ? void 0 : n.label, l = "", d = "", I = A.getAudioTracks()[0] && A.getAudioTracks()[0].label; try { l = null === (s = null == c ? void 0 : c.videoTrack) || void 0 === s ? void 0 : s.getSettings().deviceId, d = A.getAudioTracks()[0] && A.getAudioTracks()[0].getSettings().deviceId } catch (e) { this.logger.warn("zsc.pss.0 get device id failed. error: " + e) } var E = new p.RetryStreamHandler(this.logger, this.stateCenter, this, !0); return this.publisherList[t] = { "seq": 0, "room": e, "localStream": A, "publisher": g, "serverUrls": [], "ttl": 0, "isCenterNode": !0, "streamID": t, "publishOption": r, "cameraLabel": u || "", "microLabel": I || "", "cameraDeviceId": l || "", "microDeviceId": d || "", "deviceStateCount": 0, "retryStreamHandler": E, "retryDispatchHandler": new f.RetryDispatchHandler(this.logger, this.stateCenter, this.rtm, this), "isDataChannel": o, "streamSid": i }, g.onPublishStateUpdate = function (e, A, r, i, o, n) { var s = a.publisherList[A]; s ? s.retryStreamHandler.publishStateHandle(e, s.streamID, r, i, o, n) : a.logger.error("zsc.psuh.0 cannot find publish " + t) }, g.onPublishQualityUpdate = function (e, A) { var r = a.publisherList[e]; r ? (a.stateCenter.deviceStateOut && 0 === A.audio.audioBitrate ? (r.deviceStateCount++, r.deviceStateCount >= 2 && (r.deviceStateCount = 0, a.stateCenter.deviceStateOut = !1, a.logger.warn("zsc.pss.0 publish audio error by device"))) : r.deviceStateCount = 0, a.onPublishQualityUpdate(r.streamID, A)) : a.logger.error("zsc.psuh.0 cannot find publish " + t) }, !0 }, e.prototype.startPublishingStream = function (e, t) { void 0 === t && (t = !1), this.logger.info("zsc.sps.0 call"); var A = this.publisherList[e]; if (!A) return this.logger.error("zsc.sps.0 publisher don't exist"), !1; if (!t) { if (this.stateCenter.reporter.spanSetAttributes({ "key": T.event, "par": e }, { "urls": T.urls(A.serverUrls), "is_center": T.is_center(A.isCenterNode) }), !A.serverUrls || 0 === A.serverUrls.length) return A.retryStreamHandler.publishStateHandle(C.ENUM_PUBLISH_STATE_UPDATE.error, e, B.errorCodeList.DISPATCH_ERROR), this.logger.info("zsc.sps.0 server don't have signal url"), !0; var r = A.serverUrls.indexOf(this.server); -1 !== r && (A.serverUrls.splice(r, 1), A.serverUrls.unshift(this.server)) } var i = A.retryStreamHandler; return i.invalid(), i.init(this.stateCenter.streamRetryTime), i.initStream(e, A.serverUrls), i.startMaxTime(), i.activePublish(0) }, e.prototype.updateWaitingList = function (e, t, A, r, i) { var o = { "streamID": A, "success": r, "error": i }; t ? e.publishWaitingList.push(o) : e.playWaitingList.push(o) }, e.prototype.publishStream = function (e) { var t = this.publisherList[e].publisher; if (t) { var A = null, r = null, i = this.publisherList[e].publishOption, o = this.checkPreview(this.publisherList[e].localStream); o ? (A = o.localStream, r = o.videoInfo, this.stateCenter.reporter.spanSetAttributes({ "key": T.event, "par": e }, { "cap_w": T.cap_w(o.videoInfo.width), "cap_h": T.cap_h(o.videoInfo.height), "w": T.w(o.videoInfo.width), "h": T.h(o.videoInfo.height), "video_en_fps": T.video_en_fps(o.videoInfo.frameRate), "video_en_bps": T.video_en_bps(1e3 * o.videoInfo.bitRate) }), A ? (this.logger.info("zsc.ps.0 call success"), this.setStreamGwNode(t, !0), t.startPublish(e, A, r, o.mediaStreamConfig, i)) : this.logger.error("zsc.ps.0 no localStream found")) : this.logger.error("zsc.ps.0 no preview found") } else this.logger.info("zsc.ps.0 publisher don't exist") }, e.prototype.connectPublishServer = function (e, t) { var A = this, r = this.publisherList[e]; if (!r) return this.logger.error("zsc.cps.0 publisher don't exist"), !1; var i = Date.now(); return this.stateCenter.reporter.createSpan(u.TRACER_LEVEL.H, { "key": r.publisher.parentSpanKey, "par": e }, { "key": m.ZegoRTCLogEvent.kZegoPublishServerConnect.event, "par": e }, m.ZegoRTCLogEvent.kZegoPublishServerConnect.event, !0), this.connectWithReuseSignalServer(e, !0, t, function (e, t, r) { var o = A.publisherList[e]; if (o) { var n = o.publisher; if (n) { var s = Date.now() - i; A.stateCenter.reporter.spanSetAttributes({ "key": n.parentSpanKey, "par": e }, { "dispatch_consume": m.ZegoRTCLogEvent.kZegoStartPlay.dispatch_consume(s) }), n.reportSpan.setAttributes({ "server_url": m.ZegoRTCLogEvent.kZegoTaskSDKPublishStream.server_url(r) }), A.stateCenter.reporter.spanSetAttributes({ "key": T.event, "par": e }, { "server_url": T.server_url(r) }), A.stateCenter.reporter.spanEnd({ "key": m.ZegoRTCLogEvent.kZegoPublishServerConnect.event, "par": e }, { "result": 0, "server_url": m.ZegoRTCLogEvent.kZegoPublishServerConnect.server_url(r) }); var a = t.tokenInfo; A.logger.info("zsc.cps.0 update token success"), a && a.report && (n.qualityUpload = a.report, n.qualityUploadInterval = a.report_interval), n.signal = t.signal, A.server = r, A.publishStream(e), A.getTokenSuccess(), A.stateCenter.billingTimer.startChargeInfosUpload(), A.activeSoundLevel() } else A.logger.info("zsc.cps.1 check publisher don't exist") } else A.logger.info("zsc.cps.0 after connect publisher don't exist") }, function (e, t) { A.logger.error("zsc.cps.0 " + e + " connect fail " + JSON.stringify(t)); var r = A.publisherList[e]; if (r) if (r.publisher) { var i, o = !1; t && t.code === B.errorCodeList.GET_CONFIG_FAIL.code ? (i = a({}, B.errorCodeList.GET_CONFIG_FAIL), o = !0) : ((i = a({}, B.errorCodeList.CONNECT_FAILED)).message = i.message + " " + t, 1008 === t && (i = B.errorCodeList.TOKEN_EXPIRED, o = !0), 20010 === t && (o = !0, i = JSON.parse(JSON.stringify(B.errorCodeList.PUBLISHER_SESSION_REQUEST_FAIL)))), A.stateCenter.reporter.spanEnd({ "key": m.ZegoRTCLogEvent.kZegoPublishServerConnect.event, "par": e }, { "result": t, "error": i.code, "message": i.message }), r.retryStreamHandler.publishStateHandle(C.ENUM_PUBLISH_STATE_UPDATE.error, e, i, o) } else A.logger.info("zsc.cps.1 check publisher don't exist"); else A.logger.info("zsc.cps.0 after connect publisher don't exist") }), !0 }, e.prototype.getTokenSuccess = function () { this.logger.debug("zsc.gts.0 call") }, e.prototype.stopPublishingStream = function (e, t) { this.logger.info("zsc.sps.0.1 call " + e + " " + JSON.stringify(t)); var A = this.publisherList[e]; if (A) { var r = A.retryStreamHandler; for (var i in r && (r.stopMaxTime(), r.invalid()), this.signalList) this.signalList[i].publishWaitingList = this.signalList[i].publishWaitingList.filter(function (t) { return t.streamID !== e }); delete this.publisherList[e], this.resetNetworkData(), A.publisher && (A.publisher.stopPublish(t), delete A.publisher), this.removeStreamFromSignal(!0, e), this.stopSignalHeartbeat(), this.stateCenter.billingTimer.stopChargeInfosUpload(), this.stopSoundLevel(), this.logger.info("zsc.sps.0.1 call success") } else this.logger.warn("zsc.sps.0.1 publisher don't exist") }, e.prototype.getSignalNodes = function () { var e; if (this.stateCenter.customUrl && 0 != this.stateCenter.customUrl.length) this.logger.info("zsc.gsn customUrl " + JSON.stringify(this.stateCenter.customUrl)), e = this.stateCenter.customUrl; else { var t = this.stateCenter.settingConfig.getSetting("signal_nodes", !0); t && t instanceof Array && t.length > 0 && (e = t, this.logger.info("zsc.gsn setting config signal_nodes " + JSON.stringify(t))) } return e }, e.prototype.isUseAgentByServerURL = function (e) { return ["unified_rtc", "unified_l3"].includes(e) }, e.prototype.createStreamSignal = function (e, t) { var A = this.isUseAgentByServerURL(e), r = new I.ZegoSignal(this.logger, this.stateCenter, this.rtm.netAgent, A); if (this.stateCenter.clientIP = this.rtm.netAgent.clientIP, r.setSessionInfo(this.appid, this.userid), A || (r.onUpdateHeartBeatInterval = this.onUpdateHeartBeatIntervalHandle.bind(this)), r.onDisconnect = this.onDisconnectHandle, t) { var i = this.publisherList[t] || this.playerList[t] || null, o = null == i ? void 0 : i.retryStreamHandler; if (this.stateCenter.streamConnectTime) r.tryConnectInterval = this.stateCenter.streamConnectTime; else if (o && o.retryActiveCount) { var n = o.retryActiveCount * (o.retryActiveCount - 1) / 2 + 2; r.tryConnectInterval = 1e3 * (n = n > C.MAX_RETRY_CONNECT_INTERVAL ? C.MAX_RETRY_CONNECT_INTERVAL : n) } } else r.tryConnectInterval = 1e3 * this.stateCenter.defaultConnTime; return this.signalList[e] = { "signal": r, "state": C.ENUM_SIGNAL_STATE.connecting, "publishWaitingList": [], "playWaitingList": [], "publishConnectedList": [], "playConnectedList": [], "tokenInfo": null }, r }, e.prototype.onSignalConnSuccess = function (e, t, A) { this.logger.info("zsc.crss.0 connected success " + t), e.state = C.ENUM_SIGNAL_STATE.connected, e.tokenInfo = A, e.publishWaitingList.forEach(function (A) { A.success && A.success(A.streamID, e, t), e && e.publishConnectedList.push(A.streamID) }), e.playWaitingList.forEach(function (A) { A.success && A.success(A.streamID, e, t), e && e.playConnectedList.push(A.streamID) }), e.publishWaitingList = [], e.playWaitingList = [], this.stateCenter.useNetAgent || null != this.heartbeatTimer || this.startSignalHeartbeat() }, e.prototype.onSignalConnFailed = function (e, t, A, r) { this.logger.info("zsc.crss.0 connect failed " + A); for (var i = e.publishWaitingList, o = i.length - 1; o >= 0; o--)(s = i[o]).error && s.error(s.streamID, t); var n = e.playWaitingList; for (o = n.length - 1; o >= 0; o--) { var s; (s = n[o]).error && s.error(s.streamID, t) } delete this.signalList[r] }, e.prototype.connectWithReuseSignalServer = function (e, t, A, r, i) { var o = this; this.logger.info("zsc.crss.0 begin " + A), this.lazyEndSignalHandler.isLazyEnd() && this.lazyEndSignalHandler.clearLazyEndTimer(A); var n = null; if (this.signalList[A]) (n = this.signalList[A]).state == C.ENUM_SIGNAL_STATE.connected ? (this.logger.info("zsc.crss.0 already connected " + A + " streamId: " + e), t ? n.publishConnectedList.push(e) : n.playConnectedList.push(e), r(e, n, A)) : n.state == C.ENUM_SIGNAL_STATE.connecting && (this.logger.info("zsc.crss.0 signal is connecting " + A + " streamId: " + e), this.updateWaitingList(n, t, e, r, i)); else { this.logger.info("zsc.crss.0 new signal " + A + ", streamId: " + e); var s = this.createStreamSignal(A, e); this.updateWaitingList(this.signalList[A], t, e, r, i); var a = this.publisherList[e] || this.playerList[e] || null, c = null == a ? void 0 : a.room.token, g = null == a ? void 0 : a.room.roomID; this.logger.info("zsc.crss.0 " + c), s.connectServer(g || this.stateCenter.roomList[0].roomID, c || this.stateCenter.roomList[0].token, A, function (e, t, r) { n = o.signalList[A], 0 != e ? o.onSignalConnFailed(n, e, t, A) : (o.onSignalConnSuccess(n, t, r), o.stateCenter.billingTimer.startChargeInfosUpload(), o.activeSoundLevel()) }) } }, e.prototype.connectStreamSignal = function (e) { var t = this; this.logger.info("zsc.cnss.0 call"); var A, r = this.getSignalNodes(); if (r ? A = r[0] : this.stateCenter.useNetAgent && (A = "unified_rtc"), A && this.isUseAgentByServerURL(A) && !this.signalList[A]) { this.logger.info("zsc.cnss.0 create signal"); var i = this.createStreamSignal(A), o = this.rtm.getToken(e); i.connectServer(e || this.stateCenter.roomList[0].roomID, o || this.stateCenter.roomList[0].token, A, function (e, r, i) { var o = t.signalList[A]; 0 != e ? (t.logger.info("zsc.cnss.0 signal conn fail"), t.onSignalConnFailed(o, e, r, A)) : (t.logger.info("zsc.cnss.0 signal conn success"), t.onSignalConnSuccess(o, r, i), o && 0 == o.publishConnectedList.length && 0 == o.playConnectedList.length && 0 == o.publishWaitingList.length && 0 == o.playWaitingList.length && (t.logger.info("zsc.cnss.0 no publishing and playing stream"), t.disconnectSignalURL(A, !0))) }) } this.logger.info("zsc.cnss.0 call success") }, e.prototype.disconnectStreamSignal = function () { var e, t = this.getSignalNodes(); t ? e = t[0] : this.stateCenter.useNetAgent && (e = "unified_rtc"), !this.rtm.stateCenter.roomModulesList.some(function (e) { return "DISCONNECTED" !== e.roomState }) && this.disconnectSignalURL(e, !1) }, e.prototype.disconnectSignalURL = function (e, t) { var A = this; this.logger.info("zsc.dcsu.0 " + e + " " + t + " call"); var r = this.signalList[e]; if (null == r ? void 0 : r.signal) { var i = r.signal; t && this.lazyEndSignalHandler.isLazyEnd() ? (this.logger.info("zsc.dcsu.0 lazy end"), this.lazyEndSignalHandler.startLazyEndTimer(e, function () { i && i.disconnectServer(), A.stopSignalHeartbeat(), delete A.signalList[e], A.logger.info("zsc.dcsu.0 lazy end signal") })) : this.lazyEndSignalHandler.isLazyEnd() && this.lazyEndSignalHandler.hasEndTask(e) ? (this.logger.info("zsc.dcsu.0 has task to end"), this.lazyEndSignalHandler.end(e)) : (this.logger.info("zsc.dcsu.0 direct disconnect"), i && i.disconnectServer(), delete this.signalList[e]), this.logger.info("zsc.dcsu.0 call success") } else this.logger.info("zsc.dcsu.0 " + e + "  already disconnect.") }, e.prototype.setPlayStateStart = function (e, t, A, r) { var i = this; if (this.logger.info("zsc.pss.1 call " + e), this.rtm.isDisConnect() && this.stateCenter.networkState == u.ENUM_NETWORK_STATE.offline) return this.logger.error("zsc.pss.1 network offline"), k.error.kPlayNetworkBrokenError; if (this.playerList[e]) return this.logger.error("zsc.pss.1 player already exist"), this.stateCenter.reporter.spanEnd({ "key": k.event, "par": e }, { "error": k.error.kIsPlaying.code, "message": k.error.kIsPlaying.message }), k.error.kPlayRepeatedPullError; var o = this.getPlayRoom(e) || this.stateCenter.roomList[0]; if (!o) return this.logger.error("zsc.pss.1 not login room"), this.stateCenter.reporter.spanEnd({ "key": k.event, "par": e }, { "error": k.error.kPlayNoLoginError.code, "message": k.error.kPlayNoLoginError.message }), k.error.kPlayNoLoginError; var n = new E.ZegoPlayWeb(e, this.logger, null, this.dataReport, this.qualityTimerInterval, this, this.ac, this.stateCenter); !o.streamList.find(function (t) { return t.stream_id === e }) && (n.streamInRoom = !1), t && [0, 1, 2, 3].includes(t.resourceMode) && (n.resourceMode = t.resourceMode), n.state = C.ENUM_PLAY_STATE.start, n.isPeer = this.isPeer, n.reportSeq = this.stateCenter.reportSeqList.startPlay[e], n.isExternal = !0, n.cachedGwNodesMode = this.cachedGwNodesMode, n.parentSpanKey = m.ZegoRTCLogEvent.kZegoStartPlay.event, n.beginTime = (new Date).getTime(); var s = new p.RetryStreamHandler(this.logger, this.stateCenter, this, !1), a = u.PlayMode.CDN, c = "cdn", g = (new Date).getTime(); for (var l in this.playerList) if (this.playerList[l].playMode == u.PlayMode.L3) { a = u.PlayMode.L3, c = "l3"; break } return this.cdnProtocolBadTimestamp && this.cdnProtocolBadTimestamp + this.protocolQualityCacheExpiredTime > g && 0 == this.l3ProtocolBadTimestamp && (a = u.PlayMode.L3, c = "l3"), this.stateCenter.reporter.spanSetAttributes({ "key": k.event, "par": e }, { "resource_mode": k.resource_mode(n.resourceMode), "src": k.src(n.resourceMode === u.ResourceMode.DG ? c : (0, y.getPlaySourceType)(n.resourceMode)), "room_id": k.room_id(null == o ? void 0 : o.roomID), "room_sid_string": k.room_sid_string(null == o ? void 0 : o.roomSessionID), "is_multi": k.is_multi(this.stateCenter.isMultiRoom) }), this.playerList[e] = { "seq": 0, "room": o, "player": n, "signal": null, "serverUrls": [], "ttl": 0, "isCenterNode": !0, "streamID": e, "playOption": t, "retryStreamHandler": s, "retryDispatchHandler": new f.RetryDispatchHandler(this.logger, this.stateCenter, this.rtm, this), "isDataChannel": r, "cdnPlayer": null == t ? void 0 : t.CDNPlayer, "playMode": a, "streamSid": A }, n.onPlayStateUpdate = function (e, t, A, r, o, n) { var a = i.playerList[t]; a ? s.playStateHandle(e, a.streamID, A, r, o, n) : i.logger.error("zsc.pss.1 cannot find play " + t) }, n.onPlayQualityUpdate = function (e, t) { var A = i.playerList[e]; A ? i.onPlayQualityUpdate(A.streamID, t) : i.logger.error("zsc.pss.1 cannot find play " + e) }, n.onRemoteCameraStatusUpdate = function (e, t, A) { var r = i.playerList[e]; r ? i.onRemoteCameraStatusUpdate(r.streamID, t, A) : i.logger.error("zsc.pss.1 cannot find play " + e) }, n.onRemoteMicStatusUpdate = function (e, t, A) { var r = i.playerList[e]; r ? i.onRemoteMicStatusUpdate(r.streamID, t, A) : i.logger.error("zsc.pss.1 cannot find play " + e) }, !0 }, e.prototype.onRemoteMicStatusUpdate = function (e, t, A) { }, e.prototype.onRemoteCameraStatusUpdate = function (e, t, A) { }, e.prototype.startPlayingStream = function (e, t, A, r) { var i; void 0 === t && (t = !1), this.logger.info("zsc.sps.1 start play called"); var o = this.playerList[e]; if ((null === (i = o.playOption) || void 0 === i ? void 0 : i.CDNVideo) && o.player.firstPlay) { var n = o.playOption.CDNVideo; o.player._CDNPlayerClone = n.cloneNode(), o.player.initPoster = (null == n ? void 0 : n.getAttribute("poster")) || "", o.player.initVideoStyle = (null == n ? void 0 : n.getAttribute("style")) || "", o.player.firstPlay = !1 } if (r) return this.playCDN(e, this.playerList[e].playOption, this.playSuccessCallBackList[e], this.playErrorCallBackList[e]), !0; if (!o) return this.logger.error("zsc.sps.1 player don't exist"), !1; var s = o.player; if (-1 == e.indexOf("zegoprobe-") && o.playMode == u.PlayMode.L3 && this.stateCenter.reporter.createSpan(u.TRACER_LEVEL.H, { "key": m.ZegoRTCLogEvent.kZegoTaskPlayStart.event, "par": e }, { "key": m.ZegoRTCLogEvent.kZegoTaskL3Play.event, "par": e }, m.ZegoRTCLogEvent.kZegoTaskL3Play.event).setAttributes({ "tryidx": m.ZegoRTCLogEvent.kZegoTaskL3Play.tryidx(s.tryidx), "biz_product": m.ZegoRTCLogEvent.kZegoTaskL3Play.biz_product(o.playOption.resourceMode == u.ResourceMode.DG ? 1 : 0) }), this.stateCenter.reporter.spanSetAttributes({ "key": k.event, "par": e }, { "urls": k.urls(o.serverUrls), "is_center": k.is_center(o.isCenterNode) }), !t) { if (0 == o.serverUrls.length) return o.retryStreamHandler.playStateHandle(C.ENUM_PLAY_STATE_UPDATE.error, e, B.errorCodeList.DISPATCH_ERROR), this.logger.info("zsc.sps.1 server don't have signal url"), !1; var a = o.serverUrls.indexOf(this.server); -1 !== a && (o.serverUrls.splice(a, 1), o.serverUrls.unshift(this.server)) } var c = o.retryStreamHandler; return c.invalid(), c.init(this.stateCenter.streamRetryTime), c.initStream(e, o.serverUrls), c.startMaxTime(), c.activePull(0, A) }, e.prototype.connectPlayServer = function (e, t, A) { var r = this, i = this.playerList[e]; if (!i) return this.logger.error("zsc.cps.1 player don't exist"), !1; this.stateCenter.reporter.createSpan(u.TRACER_LEVEL.H, { "key": i.player.parentSpanKey, "par": e }, { "key": m.ZegoRTCLogEvent.kZegoPlayServerConnect.event, "par": e }, m.ZegoRTCLogEvent.kZegoPlayServerConnect.event, !0); var o = Date.now(); return this.connectWithReuseSignalServer(e, !1, A, function (e, A, i) { var n = r.playerList[e]; if (n) { var s = n.player; if (s) { s.reportSpan.setAttributes({ "server_url": m.ZegoRTCLogEvent.kZegoTaskSDKPlayStream.server_url(i) }); var a = Date.now() - o; r.stateCenter.reporter.spanSetAttributes({ "key": s.parentSpanKey, "par": e }, { "dispatch_consume": m.ZegoRTCLogEvent.kZegoStartPlay.dispatch_consume(a) }), r.stateCenter.reporter.spanSetAttributes({ "key": k.event, "par": e }, { "server_url": k.server_url(i) }), r.stateCenter.reporter.spanEnd({ "key": m.ZegoRTCLogEvent.kZegoPlayServerConnect.event, "par": e }, { "result": 0, "server_url": i }); var c = A.tokenInfo; r.logger.info("zsc.cps.1 update token success"), c && c.report && (s.qualityHandler.qualityUpload = c.report, s.qualityHandler.qualityUploadInterval = c.report_interval), s.signal = A.signal, r.server = i, r.playStream(e, t), r.getTokenSuccess(), r.stateCenter.billingTimer.startChargeInfosUpload(), r.activeSoundLevel() } else r.logger.error("zsc.cps.1 checkplayer don't exist") } else r.logger.error("zsc.cps.1 after connect player don't exist") }, function (e, t) { var i = r.playerList[e]; if (i) { var o = a({}, B.errorCodeList.CONNECT_FAILED); o.message = o.message + " " + t, 1008 === t && (o = B.errorCodeList.TOKEN_EXPIRED), r.stateCenter.reporter.spanEnd({ "key": m.ZegoRTCLogEvent.kZegoPlayServerConnect.event, "par": e }, { "result": t, "error": o.code, "message": o.message }); var n = 1008 == t; 20010 === t && (n = !0, o = "unified_l3" === A ? B.errorCodeList.PLAYER_UNSUPPORTED_PROTOCOL : B.errorCodeList.PLAYER_SESSION_REQUEST_FAIL), i.retryStreamHandler.playStateHandle(C.ENUM_PLAY_STATE_UPDATE.error, e, o, n) } else r.logger.error("zsc.cps.1 after connect player don't exist") }), !0 }, e.prototype.playStream = function (e, t) { var A = this.playerList[e].player; A ? (this.logger.info("zsc.ps.1 call success"), this.setStreamGwNode(A, !1), A.startPlay(e, t, this.playerList[e].playOption)) : this.logger.warn("zsc.ps.1 player don't exist") }, e.prototype.stopSignalHeartbeat = function () { this.logger.debug("zsc.ssh.1 call"); var e = 0; for (var t in this.signalList) e += 1; this.heartbeatTimer && 0 == e && (this.logger.info("zsc.ssh.1 stop"), clearTimeout(this.heartbeatTimer), this.heartbeatTimer = null) }, e.prototype.removeStreamFromSignal = function (e, t) { var A = this; this.logger.info("zsc.rsfs.0 call " + e + " " + t); var i = [], o = function r(o) { var s = n.signalList[o]; if (e) { for (var a = 0; a < s.publishConnectedList.length; a++)if (s.publishConnectedList[a] === t) { n.logger.debug("zsc.rsfs.0 found from publish"), s.publishConnectedList.splice(a, 1); break } for (a = 0; a < s.publishWaitingList.length; a++)if (s.publishWaitingList[a].streamID === t) { n.logger.debug("zsc.rsfs.0 found from publish"), s.publishWaitingList.splice(a, 1); break } } else { for (var c = 0; c < s.playConnectedList.length; c++)if (s.playConnectedList[c] === t) { n.logger.debug("zsc.rsfs.0 found from play"), s.playConnectedList.splice(c, 1); break } for (c = 0; c < s.playWaitingList.length; c++)if (s.playWaitingList[c].streamID === t) { n.logger.debug("zsc.rsfs.0 found from play"), s.playWaitingList.splice(c, 1); break } } var g = function g() { for (var e = 0; e < i.length; e++)delete A.signalList[i[e]], A.server == i[e] && (A.server = "") }; 0 == s.publishConnectedList.length && 0 == s.playConnectedList.length && 0 == s.publishWaitingList.length && 0 == s.playWaitingList.length && (n.lazyEndSignalHandler.isLazyEnd() ? n.lazyEndSignalHandler.startLazyEndTimer(o, function () { s.signal.disconnectServer(), i.push(o), g(), A.stopSignalHeartbeat() }) : (s.signal.disconnectServer(), i.push(o))), g() }, n = this; for (var s in this.signalList) o(s) }, e.prototype.stopPlayingStream = function (e, t, A) { var r = this.playerList[e]; if (r) { var i = r.retryStreamHandler, o = r.cdnPlayer; for (var n in i && (i.stopMaxTime(), i.invalid()), this.signalList) this.signalList[n].playWaitingList = this.signalList[n].playWaitingList.filter(function (t) { return t.streamID !== e }); if (r.playMode == u.PlayMode.CDN && o && (this.stateCenter.reporter.spanEnd({ "key": m.ZegoRTCLogEvent.kZegoTaskCDNPlay.event, "par": e }), o.stop()), -1 == e.indexOf("zegoprobe-") && r.playMode == u.PlayMode.L3 && this.stateCenter.reporter.spanEnd({ "key": m.ZegoRTCLogEvent.kZegoTaskL3Play.event, "par": e }), r.player.playStream && b.SoundMeterWorklet.sourceDisConnect(r.player.playStream), delete this.playerList[e], this.resetNetworkData(), r.player) { r.player.stopPlay(t, A); var s = r.player.rtcViewer; s && s.stop() } this.removeStreamFromSignal(!1, e), this.stopSignalHeartbeat(), this.stateCenter.billingTimer.stopChargeInfosUpload(), this.stopSoundLevel(), delete this.playSuccessCallBackList[e], delete this.playErrorCallBackList[e], this.logger.debug("zsc.sps.1.1 call success") } else this.logger.info("zsc.sps.1.1 player don't exist") }, e.prototype.reset = function (e, t, A) { var r, i, o, n; for (var s in this.logger.info("zsc.rs call " + e + " " + t + " " + A), this.publisherList) if (this.publisherList[s].room.roomID == e || !e) { 0 === t ? this.publisherList[s].publisher.stopReason = "Logout" : 1002031 == t && (this.publisherList[s].publisher.stopReason = "ReachMaxAVRetryTime"); var a = 1002031 == t ? T.error.kPublishRetryTimeoutError : { "code": t || 0, "message": "" }; null === (i = null === (r = this.publisherList[s].room) || void 0 === r ? void 0 : r.streamHandler) || void 0 === i || i.onPublishStateUpdate(C.ENUM_PUBLISH_STATE_UPDATE.error, s, a), A && this.stateCenter.waitPublishStreamList[s] ? this.stateCenter.waitPublishStreamList[s].retryStart = !0 : A || delete this.stateCenter.waitPublishStreamList[s], this.stopPublishingStream(s, a), delete this.stateCenter.publishStreamList[s] } var c = function g(r) { u.playerList[r].player.stopReason = 0 === t ? "Logout" : "ReachMaxAVRetryTime"; var i = u.playerList[r].room; if (A && (null === (n = null === (o = u.playerList[r]) || void 0 === o ? void 0 : o.player) || void 0 === n ? void 0 : n.state) <= C.ENUM_PLAY_STATE.playing) { var s = u.playerList[r], a = null == s ? void 0 : s.player; u.stopedPlayerList[r] = { "streamID": r, "playStream": a.playStream, "roomID": s.room.roomID, "playOption": s.playOption, "state": a.state, "sucCallBack": (null == a ? void 0 : a.state) !== C.ENUM_PLAY_STATE.playing ? u.playSuccessCallBackList[r] : void 0, "errCallBack": (null == a ? void 0 : a.state) !== C.ENUM_PLAY_STATE.playing ? u.playErrorCallBackList[r] : void 0 } } if (i.roomID != e || !i.streamList.find(function (e) { return e.stream_id == r }) && 1 != u.stateCenter.roomList.length) { if (i.roomID == e && u.stateCenter.roomList.length > 1) { var g = u.stateCenter.roomList.find(function (t) { return t.roomID !== e }); g ? u.playerList[r].room = g : (u.stopPlayingStream(r), u.onPlayStateUpdate(C.ENUM_PLAY_STATE_UPDATE.error, r, k.error.kPlayRetryTimeoutError)) } } else { var c = 1002031 == t ? k.error.kPlayRetryTimeoutError : { "code": t || 0, "message": "" }; u.onPlayStateUpdate(C.ENUM_PLAY_STATE_UPDATE.error, r, c), u.stopPlayingStream(r, c) } }, u = this; for (var l in this.playerList) c(l); 0 == Object.keys(this.publisherList).length && 0 == Object.keys(this.playerList).length && (this.probeList = {}), this.waitPublishList = [], this.waitPlayList = [], this.l3DetectedTimestamp = 0, this.l3DetectResult = 0, this.isL3Fallback = !1, this.cdnProtocolBadTimestamp = 0, this.l3ProtocolBadTimestamp = 0, this.lastHandleCDNBadTimestamp = 0, this.lastHandleL3BadTimestamp = 0, this.cdnProtocolBadTime = 0, this.l3ProtocolBadTime = 0, this.streamReport.resetReport(), this.logger.info("zsc.rs call success") }, e.prototype.startSignalHeartbeat = function () { var e = this; this.logger.debug("zsc.ssh.0 call"), this.heartbeatTimer && (clearTimeout(this.heartbeatTimer), this.heartbeatTimer = null), this.heartbeatTimer = setTimeout(function () { e.checkSignalHeartbeat() }, this.heartbeatInterval) }, e.prototype.checkSignalHeartbeat = function () { for (var e in this.logger.debug("zsc.csh.0 call"), this.signalList) this.signalList[e].signal && this.signalList[e].signal.sendHeartbeat(); this.heartbeatTimer && this.startSignalHeartbeat() }, e.prototype.getChargeInfos = function () { this.logger.debug("zsc.cci.0 call"); var e = { "is_publishing": 0, "play_max_audio_bitrate": 0, "play_stream_resolution_infos": [] }; for (var A in this.shouldReportNoPlaying && (e.no_playing = 1), this.chargeInfos.timestamp_begin = (new Date).getTime(), this.publisherList) { this.publisherList[A].publisher.state === C.ENUM_PUBLISH_STATE.publishing && (e.is_publishing = 1); break } e.play_max_audio_bitrate = 0; var r = function t(A) { var t = { "width": i.playerList[A].player.qualityHandler.lastPlayStats.frameWidth, "height": i.playerList[A].player.qualityHandler.lastPlayStats.frameHeight }; if (!t.height || !t.width) { var r = i.playerList[A].player.playStream; t = r && 0 !== r.getVideoTracks().length ? r.getVideoTracks()[0].getSettings() : void 0 } var o = { "video_width": t && t.width ? t.width : 0, "video_height": t && t.height ? t.height : 0, "count": 1 }; if (!e.play_stream_resolution_infos.find(function (e) { return e.video_width == o.video_width && e.video_height == o.video_height && (e.count++, !0) }) && e.play_stream_resolution_infos.push(o), 0 == o.video_width && 0 == o.video_height) { var n = 1e3 * i.playerList[A].player.qualityHandler.lastPlayStats.audioBitrate; n > e.play_max_audio_bitrate && (e.play_max_audio_bitrate = n) } }, i = this; for (var o in this.playerList) r(o); return 0 !== e.play_stream_resolution_infos.length && this.shouldReportNoPlaying && (e.no_playing = 0), 0 !== this.chargeInfos.timestamp_end ? (this.chargeInfos.timestamp_diff = this.chargeInfos.timestamp_begin - this.chargeInfos.timestamp_end, this.chargeInfos.timestamp_diff_flag = 1) : (this.chargeInfos.timestamp_diff = 0, this.chargeInfos.timestamp_diff_flag = 0), this.chargeInfos.timestamp_end = (new Date).getTime(), this.chargeInfos.infos = [e], this.chargeInfos }, e.prototype.getPublisher = function (e) { var t = null; if ("string" == typeof e && this.publisherList[e] && this.publisherList[e].publisher) t = this.publisherList[e].publisher; else if (e instanceof MediaStream) { var A = this.checkPublish(e); A && (t = null == A ? void 0 : A.publisher) } return t }, e.prototype.getPreviewer = function (e) { var t, A = null; return "string" == typeof e && this.publisherList[e] && this.publisherList[e].publisher ? A = null === (t = this.publisherList[e].publisher) || void 0 === t ? void 0 : t.previewer : e instanceof MediaStream && (A = this.checkPreview(e)), A }, e.prototype.checkPlayer = function (e) { var t = Object.values(this.playerList).find(function (t) { return t.player.playStream === e }); return (null == t ? void 0 : t.player) || null }, e.prototype.checkPreview = function (e) { for (var t = 0; t < this.previewStreamList.length; t++)if (this.previewStreamList[t].localStream === e) return this.previewStreamList[t]; return null }, e.prototype.checkPublish = function (e) { for (var t in this.publisherList) if (this.publisherList[t].localStream == e) return this.publisherList[t]; return null }, e.prototype.getPublishList = function (e) { var t = []; for (var A in this.publisherList) this.publisherList[A].localStream == e && t.push(this.publisherList[A]); return t }, e.prototype.removePreview = function (e) { for (var t = 0; t < this.previewStreamList.length; t++)if (this.previewStreamList[t] === e) { this.previewStreamList.splice(t, 1); break } }, e.prototype.onPlayerStreamUrlUpdate = function (e, t, A) { }, e.prototype.getScreenConstrains = function (e) { var t = {}; if ("boolean" == typeof e && e) t = { "audio": !1, "video": { "frameRate": C.ENUM_SCREEM_RESOLUTION_TYPE.MEDIUM.frameRate }, "bitRate": this.stateCenter.settingConfig.getSetting("screen_video_bitrate") || C.ENUM_SCREEM_RESOLUTION_TYPE.MEDIUM.bitRate }; else if ("object" == (void 0 === e ? "undefined" : _typeof(e))) { switch (e.videoQuality) { case 1: t = { "video": { "frameRate": C.ENUM_SCREEM_RESOLUTION_TYPE.LOW.frameRate }, "bitRate": C.ENUM_SCREEM_RESOLUTION_TYPE.LOW.bitRate }; break; case 3: t = { "video": { "frameRate": C.ENUM_SCREEM_RESOLUTION_TYPE.HIGH.frameRate }, "bitRate": C.ENUM_SCREEM_RESOLUTION_TYPE.HIGH.bitRate }; break; case 4: t = { "video": { "frameRate": e.frameRate, "width": e.width, "height": e.height }, "bitRate": e.bitRate }; break; case 2: t = { "video": { "frameRate": C.ENUM_SCREEM_RESOLUTION_TYPE.MEDIUM.frameRate }, "bitRate": C.ENUM_SCREEM_RESOLUTION_TYPE.MEDIUM.bitRate }; break; default: t = { "video": { "frameRate": C.ENUM_SCREEM_RESOLUTION_TYPE.MEDIUM.frameRate }, "bitRate": this.stateCenter.settingConfig.getSetting("screen_video_bitrate") || C.ENUM_SCREEM_RESOLUTION_TYPE.MEDIUM.bitRate } }t.audio = "boolean" == typeof e.audio && e.audio, t = a(a(a({}, e), t), { "width": void 0, "height": void 0, "frameRate": void 0 }) } return t }, e.prototype.createScreenPreviewer = function (e, t) { var A = new l.ZegoPreview(this.logger, this.ac, this.stateCenter, this, "screen"), r = e.getVideoTracks()[0].getSettings(); return this.previewStreamList.push(A), A.mediaStreamConfig = t, e.getAudioTracks().length > 0 && (A.audioTrack = e.getAudioTracks()[0]), A.localStream = e, A.videoInfo = { "width": r.width, "height": r.height, "frameRate": r.frameRate || 15, "bitRate": (null == t ? void 0 : t.bitRate) || 1e3, "startBitrate": (null == t ? void 0 : t.startBitrate) || this.stateCenter.settingConfig.getSetting("bitrate_mode"), "minBitrate": null == t ? void 0 : t.minBitrate, "keyFrameInterval": null == t ? void 0 : t.keyFrameInterval }, A.previewSuc = !0, A.previewType = "screen", (null == t ? void 0 : t.videoOptimizationMode) && this.setVideoTrackContentHint(e, null == t ? void 0 : t.videoOptimizationMode), A }, e.prototype.setSoundLevelDelegate = function (e, t, A) { void 0 === A && (A = !1), this.logger.info("zsc.ssd.0 call"), this.soundLevelDelegate = e, this.enableInBackground = A, t && this.setSoundLevelInterval(t), this.enableSoundLevelProcessor(e), e ? (this.logger.info("zsc.ssd.0 start getting sound"), this.activeSoundLevel()) : (this.logger.info("zsc.ssd.0 stop getting sound"), this.soundLevelTimer && clearTimeout(this.soundLevelTimer), this.soundLevelTimer = null, this.soundLevelInterval = 1e3) }, e.prototype.setSoundLevelInterval = function (e) { var t, A; if (e && this.soundLevelDelegate) { for (var r in this.soundLevelInterval = e, this.previewStreamList) null === (t = this.previewStreamList[r].soundMeterWorklet) || void 0 === t || t.setInterval(e); for (var r in this.playerList) null === (A = this.playerList[r].player.soundMeterWorklet) || void 0 === A || A.setInterval(e) } }, e.prototype.enableSoundLevelProcessor = function (e) { for (var t in this.previewStreamList) { var A = this.previewStreamList[t]; e ? A.startSoundLevel() : A.stopSoundLevel() } for (var t in this.playerList) { var r = this.playerList[t].player; e ? r.startSoundLevel() : r.stopSoundLevel() } }, Object.defineProperty(e.prototype, "hasRemoteStream", { "get": function get() { return Object.keys(this.signalList).length > 0 }, "enumerable": !1, "configurable": !0 }), e.prototype.activeSoundLevel = function () { !this.soundLevelTimer && this.soundLevelDelegate && this.startSoundLevel() }, e.prototype.startSoundLevel = function () { var e = this; this.soundLevelTimer && (clearTimeout(this.soundLevelTimer), this.soundLevelTimer = null), this.soundLevelDelegate && (this.hasRemoteStream && this.checkSoundLevel(), this.checkMicSoundLevel(), this.soundLevelTimer = setTimeout(function () { e.startSoundLevel() }, this.soundLevelInterval)) }, e.prototype.checkSoundLevel = function () { this.logger.debug("zsc.csl.0 call"); var e = []; for (var t in this.publisherList) { var A = 0, r = this.publisherList[t].publisher, i = r.previewer; i && (A = i.soundLevel), e.push({ "streamID": this.getBackStreamId(r.streamId), "soundLevel": A, "type": "push" }) } for (var t in this.playerList) { var o = this.playerList[t].player; o.streamId && !o.isProbe && e.push({ "streamID": this.getBackStreamId(o.streamId), "soundLevel": o.soundLevel, "type": "pull" }) } this.soundLevelDelegate && e.length > 0 && this.onSoundLevelUpdate(e) }, e.prototype.checkMicSoundLevel = function () { if (this.microphonePreviews.length && this.soundLevelDelegate) { var e = this.microphonePreviews.reduce(function (e, t) { return t.soundLevel > e ? t.soundLevel : e }, 0); this.onMicSoundLevelUpdate(e) } }, e.prototype.getBackStreamId = function (e) { return this.testEnvironment && e ? e.replace("zegotest-" + this.appid + "-", "") : e }, e.prototype.onSoundLevelUpdate = function (e) { }, e.prototype.onMicSoundLevelUpdate = function (e) { }, e.prototype.stopSoundLevel = function () { this.soundLevelTimer && !this.hasRemoteStream && 0 === this.previewStreamList.length && (this.logger.info("zsc.ssl.0 stop"), clearTimeout(this.soundLevelTimer), this.soundLevelTimer = null) }, e.prototype.startNetProbe = function (e, t, A, r) { var i = this, o = this.stateCenter.reporter.createSpan(u.TRACER_LEVEL.H, { "key": m.ZegoRTCLogEvent.kZMInitSetting.event }, { "key": "" }, m.ZegoRTCLogEvent.kZegoNetProbe.event); if (this.isPeer) if (r) { var n = "zegoprobe-" + (new Date).getTime(); this.setPlayStateStart(n); var s = this.playerList[n] ? this.playerList[n].player : null; if (!s) return; s.isProbe = !0, this.playerList[n].serverUrls = ["unified_l3"], this.startPlayingStream(n, !0, function () { }), this.playerList[n].player.isProbeByDG = !0, s.onCalNetQualityResult = function (e, t) { i.logger.info("zc.ocnqr.0 l3 detect " + e + " " + t), i.stopPlayingStream(n), i.l3DetectResult = t, i.l3DetectedTimestamp = (new Date).getTime() } } else { var a = !0; A && 0 == A.length && t && (a = !1, A = e ? this.publisherList[t.streamId].serverUrls : this.playerList[t.streamId].serverUrls), A && t && A.forEach(function (r) { if (!(i.probeList[r] && i.probeList[r].timeStamp + 9e5 < (new Date).getTime() || t.probeState == C.ENUM_PROBE_STATE.probed)) { var n = "zegoprobe-" + (new Date).getTime(); i.setPlayStateStart(n); var s = i.playerList[n] ? i.playerList[n].player : null; s && (s.isProbe = !0, a ? (s.gwNode = r, s.signal = t.signal, s.startPlay(n, function () { })) : i.connectPlayServer(n, function () { }, r), s.onCalNetQualityResult = function (a, c) { i.logger.info("zc.ocnqr.0 " + s.gwNode + " " + a + " " + c), i.probeList[r] = { "result": a, "netQuality": c, "timeStamp": (new Date).getTime() }; var g = Object.keys(i.probeList), u = A && A.every(function (e) { return g.findIndex(function (t) { return t === e }) >= 0 }); t.gwNode == r || t.signal.server == r ? t.netQuality = c : i.handleCalNetQualityResult(e, a, c, t, r, u), i.stopPlayingStream(n), o.setAttributes({ "net_quality": m.ZegoRTCLogEvent.kZegoNetProbe.net_quality(parseInt(t.netQuality + "")), "node_list": m.ZegoRTCLogEvent.kZegoNetProbe.node_list(A) }), o.end() }) } }) } else this.stateCenter.reporter.setError(o, { "code": -1, "message": "not support peer" }) }, e.prototype.handleCalNetQualityResult = function (e, t, A, r, i, o) { if (this.logger.info("zc.hcqr.0 " + r.netQuality + " probe " + A + " " + i), 0 === t) { var n = this.stateCenter.reporter.createSpan(u.TRACER_LEVEL.H, { "key": m.ZegoRTCLogEvent.kZMInitSetting.event }, { "key": "" }, m.ZegoRTCLogEvent.kZegoNetProbeResult.event), s = !1; A > Math.max(40, r.netQuality + 20) && r.probeState == C.ENUM_PROBE_STATE.tryProbe ? (this.logger.info("zc.hcqr.0 " + r.streamId + " switch " + i), s = !0, this.retryStream(r, e, i), r.probeState = C.ENUM_PROBE_STATE.probed) : (s = !1, r.probeState == C.ENUM_PROBE_STATE.tryProbe && o && (this.logger.info("zc.hcqr.0 " + r.streamId + " last "), r.isProbeDispatch || r.netProbeToReDispatch())); var a = m.ZegoRTCLogEvent.kZegoNetProbeResult; n.setAttributes({ "is_switch": a.is_switch(s), "is_publish": a.is_publish(e), "stream_id": a.stream_id(r.streamId), "result": a.result(t), "node": a.node(i), "net_quality": a.net_quality(parseInt(r.netQuality + "")), "probe_net_quality": a.probe_net_quality(parseInt(A + "")) }), n.end() } }, e.prototype.retryStream = function (e, t, A) { if (t) { var r = e, i = r.streamId, o = r.localStream, n = r.videoInfo, s = r.mediaStreamConfig, a = r.publishOption; 0 != r.sessionId && r.signal && r.shouldSendCloseSession() && (r.signal.sendCloseSession(this.stateCenter.getSeq(), r.sessionId, 1), r.signal.removeSession(r.sessionId), r.closeSessionSignal = !0), r.resetPublish(), this.publisherList[i].isCenterNode ? (r.gwNode = A, r.startPublish(i, o, n, s, a)) : (r.isExternal = !1, this.connectPublishServer(i, A)) } else { var c = e, g = (i = c.streamId, c.getRemoteStreamSuc), u = c.playOption; 0 != c.sessionId && c.signal && c.shouldSendCloseSession() && (c.signal.sendCloseSession(this.stateCenter.getSeq(), c.sessionId, 1), c.signal.removeSession(c.sessionId), c.closeSessionSignal = !0), c.resetPlay(), this.onPlayStateUpdate(C.ENUM_PLAY_STATE_UPDATE.retry, i, { "code": B.errorCodeList.PLAYER_SESSION_CLOSED.code, "message": B.errorCodeList.PLAYER_SESSION_CLOSED.message }), this.playerList[i].isCenterNode ? (c.gwNode = A, c.startPlay(i, g, u)) : (c.isExternal = !1, this.connectPlayServer(i, g, A)) } }, e.prototype.getRoomByStreamID = function (e) { return this.publisherList[e] ? this.publisherList[e].room : this.playerList[e] ? this.playerList[e].room : void 0 }, e.prototype.setVideoTrackContentHint = function (e, t) { if ("string" == typeof t) { var A = t.toLowerCase(); if (["default", "motion", "detail", "text"].includes(A)) { var r = e.getVideoTracks()[0]; r ? "contentHint" in r ? (this.logger.info("zc.svtch " + A), r.contentHint = "default" == A ? "" : A) : this.logger.warn("zc.svtch mediaStreamTrack contentHint attribute not supported") : this.logger.warn("zc.svtch video track no found") } else this.logger.warn("zc.svtch videoOptimizationMode wrong") } else this.logger.warn("zc.svtch videoOptimizationMode type wrong") }, e.prototype.getPlayRoom = function (e) { return this.stateCenter.roomList.find(function (t) { return !!t.streamList.find(function (t) { return t.stream_id == e }) }) }, e.prototype.updateQuality = function (e, t) { this.streamReport.updateQuality(e, t) }, e.prototype.checkStreamReport = function () { this.streamReport.checkStreamReport() }, e.prototype.stopToReport = function (e) { this.streamReport.updateQuality(e, void 0, !0) }, e.prototype.setIsPeer = function (e) { this.isPeer = e, Object.values(this.publisherList).forEach(function (t) { t.publisher.isPeer = e }), Object.values(this.playerList).forEach(function (t) { t.player.isPeer = e }) }, e.prototype.getCDNUrl = function (e, t) { var A, r, i, o = ((A = {})[u.ResourceMode.RTC] = 1, A[u.ResourceMode.CDN] = 0, A[u.ResourceMode.L3] = 2, A[u.ResourceMode.DG] = 3, A), n = this.stateCenter.appConfig.media_config.play_config.resource_info; if (n.length) { var s = n.find(function (e) { return e.resource_type == o[t] }); if (s) for (var a = 0; a < s.service_info.length; a++) { var c = s.service_info[a], g = c.protocol, l = c.url_template.replace("{STREAM_NAME}", e); switch (g) { case u.ProtocolType.FLV: r = l; break; case u.ProtocolType.HLS: i = l } } } return { "flv": r, "hls": i } }, e.prototype.playCDN = function (e, t, A, r) { var i, o = this; if (!t.CDNVideo) return this.logger.error("zsc.pc.1 cdn video no found"), r && r(), !1; var n = this.stateCenter.reporter.createSpan(u.TRACER_LEVEL.H, { "key": m.ZegoRTCLogEvent.kZegoTaskPlayStart.event, "par": e }, { "key": m.ZegoRTCLogEvent.kZegoTaskCDNPlay.event, "par": e }, m.ZegoRTCLogEvent.kZegoTaskCDNPlay.event, !0), s = "", a = null === (i = this.getPlayRoom(e)) || void 0 === i ? void 0 : i.streamList.find(function (t) { return t.stream_id == e }), c = this.playerList[e], g = c.cdnPlayer, l = c.playOption.resourceMode; c.player.streamId = e, c.player.playOption = c.playOption, c.player.tryidx++, n.setAttributes({ "tryidx": m.ZegoRTCLogEvent.kZegoTaskL3Play.tryidx(c.player.tryidx), "biz_product": m.ZegoRTCLogEvent.kZegoTaskL3Play.biz_product(l == u.ResourceMode.DG ? 1 : 0) }); var h = a || {}, d = h.urls_flv, I = h.urls_flv_plus, E = h.urls_m3u8, p = h.urls_m3u8_plus; if (!(a && (l != u.ResourceMode.CDN || d && E) && (l != u.ResourceMode.DG || I && p))) { if (!this.stateCenter.appConfig || !l) return this.logger.error("zsc.pss.1 stream info no found"), r && r(), !1; var f = this.getCDNUrl(e, l), B = f.flv, _ = f.hls; l == u.ResourceMode.DG ? (I = B ? [B] : [], p = _ ? [_] : []) : (d = B ? [B] : [], E = _ ? [_] : []) } if (!c || !g) return r && r(), !1; l === u.ResourceMode.DG && (c.player.useResourceTypes.push("cdn"), c.player.useResourceTypes = Array.from(new Set(c.player.useResourceTypes))); var Q = l == u.ResourceMode.DG ? I : d, y = l == u.ResourceMode.DG ? p : E; if (g.isSupportFLV() && (null == Q ? void 0 : Q.length) > 0) s = Q[0], n.setAttributes({ "protocol": m.ZegoRTCLogEvent.kZegoTaskCDNPlay.protocol("flv") }); else if (g.isSupportHLS() && (null == y ? void 0 : y.length) > 0) s = y[0], n.setAttributes({ "protocol": m.ZegoRTCLogEvent.kZegoTaskCDNPlay.protocol("hls") }); else if (!c.cdnUrl) return this.logger.error("zsc.pc.1 can not find cdn urls"), r && r(), !1; if ((s = s.replace("http://", "https://")) !== c.cdnUrl && c.player.tryidx > 1) { var v = this.stateCenter.reporter.createSpan(u.TRACER_LEVEL.H, { "key": m.ZegoRTCLogEvent.kZegoTaskPlayStart.event, "par": e }, { "key": "" }, m.ZegoRTCLogEvent.kZegoTaskSrcChange.event); v.setAttributes({ "src": m.ZegoRTCLogEvent.kZegoTaskSrcChange.src(s), "last_src": m.ZegoRTCLogEvent.kZegoTaskSrcChange.last_src(c.cdnUrl) }), v.end() } return c.cdnUrl = s || c.cdnUrl, n.setAttributes({ "url": m.ZegoRTCLogEvent.kZegoTaskCDNPlay.url(c.cdnUrl) }), c.playMode == u.PlayMode.CDN && (g.play(c.cdnUrl, t.CDNVideo), t.CDNVideo.srcObject = null, this.onPlayStateUpdate(C.ENUM_PLAY_STATE_UPDATE.start, e, { "code": 0, "message": "success" }, { "isCDN": !0 }), g.onQualityUpdate = function (A, r) { r <= o.cdnBadQualityScore ? o.handleQualityBad(e, t.resourceMode, u.PlayMode.CDN) : (c.qualityBadCount = 0, o.cdnProtocolBadTimestamp = 0, o.lastHandleCDNBadTimestamp = 0) }, g.onComplete = function () { if (c.playMode == u.PlayMode.CDN && c.player.state == C.ENUM_PLAY_STATE.playing) g.retry(); else var e = c.player, t = e.initPoster, A = e.initVideoStyle, r = c.playOption.CDNVideo, i = setTimeout(function () { clearTimeout(i), r && r.setAttribute("style", A), r && r.setAttribute("poster", t) }, 1e3) }, g.onError = function (e) { o.stateCenter.networkState == u.ENUM_NETWORK_STATE.offline && (g.canRetry = !1), n.setAttributes({ "stop_reason": m.ZegoRTCLogEvent.kZegoTaskCDNPlay.stop_reason(e) }) }, g.onCanplay = function () { if (c.player.state != C.ENUM_PLAY_STATE.playing && (c.player.state = C.ENUM_PLAY_STATE.playing, 0 == c.player.firstFrameTime)) { c.player.firstFrameTime = Date.now() - c.player.beginTime; var A = o.stateCenter.reporter.createSpan(u.TRACER_LEVEL.H, { "key": m.ZegoRTCLogEvent.kZegoTaskPlayStart.event, "par": e }, { "key": "" }, m.ZegoRTCLogEvent.kZegoTaskPlayNetFirstVideoFrame.event); A.setAttributes({ "fft_consumed": m.ZegoRTCLogEvent.kZegoTaskPlayNetFirstVideoFrame.fft_consumed(c.player.firstFrameTime), "biz_product": m.ZegoRTCLogEvent.kZegoTaskPlayNetFirstVideoFrame.biz_product(t.resourceMode == u.ResourceMode.DG ? 1 : 0) }), A.end() } }, A && A(), !0) }, e.prototype.handleQualityBad = function (e, t, A) { var r = this; if (this.logger.info("zsc.hqb.0 call ".concat(e, " ").concat(t, " ").concat(A)), t !== u.ResourceMode.DG) return !1; this.fetchL3CDNCloudSetting(); var i = (new Date).getTime(), o = 0; for (var n in this.playerList) this.playerList[n].isQualityBad && o++; A == u.PlayMode.CDN ? (this.cdnProtocolBadTime = this.cdnProtocolBadTime + (0 == this.lastHandleCDNBadTimestamp ? this.qualityInterval : i - this.lastHandleCDNBadTimestamp), (o >= this.protocolBadQualityCount || this.cdnProtocolBadTime >= this.protocolBadQualityTime) && (this.cdnProtocolBadTime = 0, this.cdnProtocolBadTimestamp = (new Date).getTime())) : A == u.PlayMode.L3 && (this.l3ProtocolBadTime = this.l3ProtocolBadTime + (0 == this.lastHandleL3BadTimestamp ? this.qualityInterval : i - this.lastHandleL3BadTimestamp), (o >= this.protocolBadQualityCount || this.l3ProtocolBadTime >= this.protocolBadQualityTime) && (this.l3ProtocolBadTime = 0, this.l3ProtocolBadTimestamp = (new Date).getTime())); var s = !1, a = this.playerList[e], c = a.qualityBadCount ? a.qualityBadCount * this.qualityInterval : 0; if ((A == u.PlayMode.L3 && c > this.l3BadQualityTime || A == u.PlayMode.CDN && this.isL3Fallback && c > this.fallbackInhibitionTime || A == u.PlayMode.CDN && !this.isL3Fallback && c > this.defaultBadQualityTime) && (s = !0), s) { for (var g in a.isQualityBad = !0, o = 0, this.playerList) this.playerList[g].isQualityBad && o++; if (A == u.PlayMode.CDN && (0 == this.l3DetectedTimestamp || this.l3DetectedTimestamp + this.probeExpiredTime < i && this.l3DetectedTimestamp + this.minProbeInterval < i) && (this.l3DetectedTimestamp = (new Date).getTime(), this.startNetProbe(!1, void 0, void 0, !0)), o / Object.keys(this.playerList).filter(function (e) { return !e.includes("zegoprobe") }).length > this.multiPlaySwitchRate) { this.logger.error("zsc.hqb.0 low quality " + (0 == A ? "CDN" : "L3")); var l = Object.keys(this.playerList).filter(function (e) { return !e.includes("zegoprobe") }); return l.forEach(function (e, t) { var i = r.playerList[e]; A == u.PlayMode.L3 ? (r.stopPlayingStream(e, void 0, !0), r.playerList[e] = i, i.isQualityBad = !1, i.playMode = u.PlayMode.CDN, i.qualityBadCount = 0, r.playCDN(e, i.playOption, r.playSuccessCallBackList[e], r.playErrorCallBackList[e])) : r.l3DetectResult > r.switchDetectResultScore && (i.qualityBadCount = 0, r.l3DetectedTimestamp = 0, t == l.length - 1 && (r.l3DetectResult = 0), r.cdnSwitchL3(i)) }), A == u.PlayMode.L3 && (this.isL3Fallback = !0), !0 } } return "number" == typeof a.qualityBadCount ? a.qualityBadCount++ : a.qualityBadCount = 1, !1 }, e.prototype.cdnSwitchL3 = function (e) { var t, A = this, r = e.streamID, i = this.stateCenter.useNetAgent; if (e.playMode = u.PlayMode.L3, this.stopPlayingStream(r, void 0, !0), this.playerList[r] = e, e.isQualityBad = !1, (null === (t = e.playOption) || void 0 === t ? void 0 : t.resourceMode) == u.ResourceMode.DG && (e.player.useResourceTypes.push("l3"), e.player.useResourceTypes = Array.from(new Set(e.player.useResourceTypes))), i) this.stateCenter.appConfig ? (e.serverUrls = ["unified_l3"], this.startPlayingStream(r, i, function (t) { var i; A.logger.info("zsc.cqi.1 switch l3 success"); var o = e.player, n = o.initPoster, s = o.initVideoStyle, a = e.playOption.CDNVideo; if ("safari" === A.stateCenter.browser && a && e.player._CDNPlayerClone) { var c = a.parentElement; if (c) { var g = document.createElement("style"), u = a.cloneNode(!0), l = Date.now().toString(16); g.innerText = ".zego_cdn_video_".concat(l, " .zego_clone_video_").concat(l, "{width:").concat(a.offsetWidth, "px;height:").concat(a.offsetHeight, "px;}") + ".zego_cdn_video_".concat(l, " .hide_").concat(l, "{display:none!important;width:0;height:0}"), document.head.append(g), u.classList.add("zego_clone_video_".concat(l)), u.id = e.streamID + "_clone", u.src = "", u.srcObject = t, u.classList.add("hide_".concat(l)), a.before(u), c.classList.add("zego_cdn_video_".concat(l)); var h = setTimeout(function () { clearTimeout(h), a.classList.add("hide_".concat(l)), u.classList.remove("hide_".concat(l)) }, 2e3), d = setTimeout(function () { var t; clearTimeout(d), e.playOption.CDNVideo = u, null === (t = e.cdnPlayer) || void 0 === t || t.stop(), A.stateCenter.reporter.spanEnd({ "key": m.ZegoRTCLogEvent.kZegoTaskCDNPlay.event, "par": r }), c.classList.remove("zego_cdn_video_".concat(l)), a.classList.remove("zego_cdn_video_".concat(l)), u.classList.remove("zego_clone_video_".concat(l)), u.id = a.id, g.remove(), a.remove() }, 4e3) } } else { null === (i = e.cdnPlayer) || void 0 === i || i.stop(), A.stateCenter.reporter.spanEnd({ "key": m.ZegoRTCLogEvent.kZegoTaskCDNPlay.event, "par": r }); var C = setTimeout(function () { clearTimeout(C), a && a.setAttribute("style", s), a && a.setAttribute("poster", n) }, 1e3); t && a && (a.srcObject = t) } })) : this.waitPlayList.push(r); else { var o = this.playerList[r].retryDispatchHandler; o.stopMaxTime(), o.invalid(), o.initStream(r, e.playOption, !1), o.startMaxTime(), o.active(0) } }, e.prototype.fetchL3CDNCloudSetting = function () { this.switchScore = this.stateCenter.settingConfig.getSetting("switch_score") || 60, this.defaultBadQualityTime = this.stateCenter.settingConfig.getSetting("default_bad_quality_time") || 3e4, this.l3BadQualityTime = this.stateCenter.settingConfig.getSetting("l3_bad_quality_time") || 1e4, this.switchDetectResultScore = this.stateCenter.settingConfig.getSetting("switch_detect_result_score") || 60, this.cdnBadQualityScore = this.stateCenter.settingConfig.getSetting("cdn_bad_quality_score") || 60, this.l3BadQualityScore = this.stateCenter.settingConfig.getSetting("l3_bad_quality_score") || 60, this.multiPlaySwitchRate = this.stateCenter.settingConfig.getSetting("multi_play_switch_rate") || .8, this.protocolBadQualityCount = this.stateCenter.settingConfig.getSetting("protocol_bad_quality_count") || 3, this.protocolBadQualityTime = this.stateCenter.settingConfig.getSetting("protocol_bad_quality_time") || 12e3, this.protocolQualityCacheExpiredTime = this.stateCenter.settingConfig.getSetting("protocol_quality_cache_expired_time\t") || 18e4, this.fallbackInhibitionTime = this.stateCenter.settingConfig.getSetting("fallback_inhibition_time") || 18e4, this.probeExpiredTime = this.stateCenter.settingConfig.getSetting("probe_expired_time") || 3e4, this.minProbeInterval = this.stateCenter.settingConfig.getSetting("min_probe_interval") || 15e3 }, e.prototype.setStreamGwNode = function (e, t) { this.logger.info(Q.ZEGO_WEBRTC_ACTION.STREAMCENTER_SET_STREAM_GW_NODE + " call " + e.streamId), this.checkCachedNodesUse(e, t), e.gwNodesTTL && e.gwNodesTTL < (new Date).getTime() && (this.logger.info(Q.ZEGO_WEBRTC_ACTION.STREAMCENTER_SET_STREAM_GW_NODE + " call " + e.streamId + " ttl timeout, reset gw"), e.gwNode = "", e.gwNodeList = [], e.gwNodesTTL = 0), this.gwNode && (e.gwNode = this.gwNode); var A = this.stateCenter.settingConfig.getSetting("gw_nodes"); A && A instanceof Array && A.length > 0 && (this.logger.info(Q.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH + " setting " + JSON.stringify(A)), e.gwNodeList = A, e.gwNode = e.gwNodeList[0] || e.gwNode), this.logger.info(Q.ZEGO_WEBRTC_ACTION.STREAMCENTER_SET_STREAM_GW_NODE + " end " + e.streamId + " " + e.gwNode) }, e.prototype.getNodeIndex = function (e, t) { var A = "", r = t ? "publish" : "play", i = ""; switch (t || (0 == e.resourceMode ? i = "_rtc" : [2, 3].includes(e.resourceMode) && (i = "_l3")), e.cachedGwNodesMode) { case c.NotReUse: break; case c.TheSameReUse: A = r + "_" + e.streamId + i; break; case c.DiffReUse: A = r; break; case c.AllReUse: A = "stream" }return A }, e.prototype.checkCachedNodesUse = function (e, t) { if (this.logger.info(Q.ZEGO_WEBRTC_ACTION.STREAMCENTER_CHECK_CACHED_NODES_USE + " call " + e.streamId + " " + e.cachedGwNodesMode), e.isExternal) if (t && e.isCustomCdn()) this.logger.info(Q.ZEGO_WEBRTC_ACTION.STREAMCENTER_CHECK_CACHED_NODES_USE + " call " + e.streamId + " custom cdn"); else if (this.stateCenter.useNetAgent && this.stateCenter.isMultiOuter) this.logger.info(Q.ZEGO_WEBRTC_ACTION.STREAMCENTER_CHECK_CACHED_NODES_USE + " call " + e.streamId + " multi outer"); else { var A = this.getNodeIndex(e, t); if (this.logger.info(Q.ZEGO_WEBRTC_ACTION.STREAMCENTER_CHECK_CACHED_NODES_USE + " " + e.streamId + " " + A), A) { var r = this.cachedGwNodesList[A]; r && r.gwNodesTTL > (new Date).getTime() && (null == r ? void 0 : r.gwNodes.length) > 0 && (this.logger.info(Q.ZEGO_WEBRTC_ACTION.STREAMCENTER_CHECK_CACHED_NODES_USE + " " + e.streamId + " use cache gwnodes"), e.gwNodeList = r.gwNodes, e.gwNodesTTL = r.gwNodesTTL, e.gwNode = e.gwNodeList[0]) } this.logger.info(Q.ZEGO_WEBRTC_ACTION.STREAMCENTER_CHECK_CACHED_NODES_USE + " end " + e.streamId + " " + e.gwNode) } else this.logger.info(Q.ZEGO_WEBRTC_ACTION.STREAMCENTER_CHECK_CACHED_NODES_USE + " " + e.streamId + " retry internal") }, e.prototype.updateCachedGwNodesList = function (e, t, A, r) { if (this.logger.info(Q.ZEGO_WEBRTC_ACTION.STREAMCENTER_UPDATE_CACHED_GWNODES_LIST + " call " + e.streamId), 0 === r) this.setCachedGwNodesMode(c.NotReUse); else if (r > 0) { var i = this.getNodeIndex(e, t); this.logger.info(Q.ZEGO_WEBRTC_ACTION.STREAMCENTER_UPDATE_CACHED_GWNODES_LIST + " " + e.streamId + " nodeIndex " + i), i && (this.cachedGwNodesList[i] = { "gwNodes": A, "gwNodesTTL": (new Date).getTime() + 1e3 * r }) } }, e.prototype.clearCachedGwNodesList = function (e, t) { var A = this.getNodeIndex(e, t); this.logger.info(Q.ZEGO_WEBRTC_ACTION.STREAMCENTER_CLEAR_CACHED_GWNODES_LIST + " " + e.streamId + " nodeIndex " + A), A && delete this.cachedGwNodesList[A] }, e.prototype.setCachedGwNodesMode = function (e) { this.cachedGwNodesMode = e, Object.values(this.publisherList).forEach(function (t) { t.publisher.cachedGwNodesMode = e }), Object.values(this.playerList).forEach(function (t) { t.player.cachedGwNodesMode = e }) }, e.prototype.updateTimeOffsetInterval = function () { var e, t, A = this; "number" == typeof (null === (e = this.rtm) || void 0 === e ? void 0 : e.netAgent.timeOffset) && (this.stateCenter.clientTimeOffset = null === (t = this.rtm) || void 0 === t ? void 0 : t.netAgent.timeOffset), this.timeOffsetUpdateTimer = setTimeout(function () { A.updateTimeOffsetInterval() }, 9e5) }, e.prototype.changeRxQuality = function (e) { this.rxQuality = e, this.startPublishNetWorkQuality() }, e.prototype.changeTxQuality = function (e, t, A) { this.txQuality = e, this.sendNetQuality(t, A), this.startPublishNetWorkQuality() }, e.prototype.sendNetQuality = function (e, t) { var A; this.logger.info("zc.sc.snq call"); var r = D.webrtc_cmd.WebrtcCmdReqMsg.encode({ "net_quality_grade": { "rx_quality": this.rxQuality, "tx_quality": this.txQuality } }).finish(), i = y.ClientUtil.uint8arrayToBase64(r); null === (A = this.signalList[this.server]) || void 0 === A || A.signal.sendGWCmd(this.stateCenter.getSeq(), e, { "peer_id": t, "cmd_id": 6, "body": i }, function (e, t, A) { var r = S.WebRTCUtil.base64ToUint8Array(A.body); D.webrtc_cmd.WebrtcCmdRspMsg.decode(r) }, function (e) { }) }, e.prototype.startPublishNetWorkQuality = function () { var e = this; null === this.netTimer && (this.netTimer = setInterval(function () { e.stateCenter.actionListener("networkQuality", "", e.txQuality, e.rxQuality) }, 3e3)) }, e.prototype.resetNetworkData = function () { Object.keys(this.playerList).length < 1 && (this.rxQuality = -1), Object.keys(this.publisherList).length < 1 && (this.txQuality = -1), Object.keys(this.playerList).length < 1 && Object.keys(this.publisherList).length < 1 && (clearInterval(this.netTimer), this.netTimer = null) }, e.prototype.createSoundLevel = function (e, t, A, r) { void 0 === A && (A = this.soundLevelInterval), void 0 === r && (r = function i(e) { }); var i = new b.SoundMeterWorklet(this.logger, A), o = i.getSrcSource(e, t); return i.initAudioWorklet(e, o), i.onSoundLevelUpdate = function (e) { r(e) }, { "mic": o, "soundMeter": i } }, e.prototype.destroy = function () { this.heartbeatTimer && clearTimeout(this.heartbeatTimer), this.soundLevelTimer && clearTimeout(this.soundLevelTimer), this.timeOffsetUpdateTimer && clearTimeout(this.timeOffsetUpdateTimer), this.netTimer && clearInterval(this.netTimer), document.removeEventListener("visibilitychange", this.eventHandler.visibilitychange) }, e }(d.ZegoStreamCenter); r.ZegoStreamCenterWeb = _ }, "2990": function _(e, t, r) { "use strict"; var i, o = r(2100), n = o.Writer, s = o.util, a = o.roots.default || (o.roots.default = {}); a.logreport = ((i = {}).SpeedLogHead = function () { function A(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } var e, t; return A.prototype.version = 0, A.prototype.signature = s.newBuffer([]), A.prototype.timestamp = 0, A.prototype.event = 0, A.prototype.app_id = 0, A.prototype.user_id = "", A.prototype.biz_type = 0, A.prototype.device_id = "", A.prototype.lite_sign = s.newBuffer([]), A.prototype.token = s.newBuffer([]), A.prototype.os_type = "", A.prototype.sdk_version = "", A.prototype.time_offset = s.Long ? s.Long.fromBits(0, 0, !1) : 0, A.prototype.scenario = 0, A.create = function (e) { return new A(e) }, A.encode = function (e, t) { return t || (t = n.create()), null != e.version && Object.hasOwnProperty.call(e, "version") && t.uint32(8).uint32(e.version), null != e.signature && Object.hasOwnProperty.call(e, "signature") && t.uint32(18).bytes(e.signature), null != e.timestamp && Object.hasOwnProperty.call(e, "timestamp") && t.uint32(24).uint32(e.timestamp), null != e.event && Object.hasOwnProperty.call(e, "event") && t.uint32(32).uint32(e.event), null != e.app_id && Object.hasOwnProperty.call(e, "app_id") && t.uint32(40).uint32(e.app_id), null != e.user_id && Object.hasOwnProperty.call(e, "user_id") && t.uint32(50).string(e.user_id), null != e.biz_type && Object.hasOwnProperty.call(e, "biz_type") && t.uint32(56).uint32(e.biz_type), null != e.device_id && Object.hasOwnProperty.call(e, "device_id") && t.uint32(66).string(e.device_id), null != e.lite_sign && Object.hasOwnProperty.call(e, "lite_sign") && t.uint32(74).bytes(e.lite_sign), null != e.token && Object.hasOwnProperty.call(e, "token") && t.uint32(82).bytes(e.token), null != e.os_type && Object.hasOwnProperty.call(e, "os_type") && t.uint32(90).string(e.os_type), null != e.sdk_version && Object.hasOwnProperty.call(e, "sdk_version") && t.uint32(98).string(e.sdk_version), null != e.time_offset && Object.hasOwnProperty.call(e, "time_offset") && t.uint32(104).int64(e.time_offset), null != e.scenario && Object.hasOwnProperty.call(e, "scenario") && t.uint32(112).uint32(e.scenario), t }, A.ProtoVersion = (e = {}, (t = Object.create(e))[e[0] = "PROTO_VERSION"] = 0, t[e[1] = "PROTO_VERSION1"] = 1, t[e[2] = "PROTO_VERSION2"] = 2, t[e[3] = "PROTO_VERSION3"] = 3, t[e[4] = "PROTO_VERSION4"] = 4, t[e[5] = "PROTO_VERSION5"] = 5, t[e[6] = "PROTO_VERSION6"] = 6, t[e[7] = "PROTO_VERSION7"] = 7, t[e[8] = "PROTO_VERSION8"] = 8, t[e[9] = "PROTO_VERSION9"] = 9, t[e[10] = "PROTO_VERSION10"] = 10, t[e[11] = "PROTO_VERSION11"] = 11, t[e[12] = "PROTO_VERSION12"] = 12, t[e[13] = "PROTO_VERSION13"] = 13, t[e[14] = "PROTO_VERSION14"] = 14, t), A.Event = function () { var e = {}, t = Object.create(e); return t[e[0] = "QUALITY_EVENT"] = 0, t[e[100] = "NO_BILLING_EVENT"] = 100, t[e[300] = "DETECT_QUALITY_EVENT"] = 300, t }(), A.BizType = function () { var e = {}, t = Object.create(e); return t[e[0] = "UNKNOWN"] = 0, t[e[1] = "LIVE"] = 1, t[e[2] = "RTV"] = 2, t }(), A.ZegoScenario = function () { var e = {}, t = Object.create(e); return t[e[0] = "ZEGO_SCENARIO_GENERAL"] = 0, t[e[1] = "ZEGO_SCENARIO_COMMUNICATION"] = 1, t[e[2] = "ZEGO_SCENARIO_LIVE"] = 2, t[e[3] = "ZEGO_SCENARIO_DEFAULT"] = 3, t[e[4] = "ZEGO_SCENARIO_STANDARD_VIDEO_CALL"] = 4, t[e[5] = "ZEGO_SCENARIO_HIGH_QUALITY_VIDEO_CALL"] = 5, t[e[6] = "ZEGO_SCENARIO_STANDARD_CHATROOM"] = 6, t[e[7] = "ZEGO_SCENARIO_HIGH_QUALITY_CHATROOM"] = 7, t[e[8] = "ZEGO_SCENARIO_BROADCAST"] = 8, t[e[9] = "ZEGO_SCENARIO_KARAOKE"] = 9, t[e[99] = "ZEGO_SCENARIO_UNDEFINED"] = 99, t }(), A }(), i.SpeedLogRsp = function () { function A(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } return A.prototype.code = 0, A.prototype.message = "", A.create = function (e) { return new A(e) }, A.encode = function (e, t) { return t || (t = n.create()), null != e.code && Object.hasOwnProperty.call(e, "code") && t.uint32(8).uint32(e.code), null != e.message && Object.hasOwnProperty.call(e, "message") && t.uint32(18).string(e.message), t }, A }(), i.QualityEvent = function () { function A(e) { if (this.publish_quality_infos = [], this.play_quality_infos = [], e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } var e, t; return A.prototype.hardware_infos = null, A.prototype.publish_quality_infos = s.emptyArray, A.prototype.play_quality_infos = s.emptyArray, A.prototype.network_type = 0, A.prototype.charge_infos = null, A.prototype.server_time = s.Long ? s.Long.fromBits(0, 0, !1) : 0, A.prototype.client_type = 0, A.create = function (e) { return new A(e) }, A.encode = function (e, t) { if (t || (t = n.create()), null != e.hardware_infos && Object.hasOwnProperty.call(e, "hardware_infos") && a.logreport.HardwareInfos.encode(e.hardware_infos, t.uint32(10).fork()).ldelim(), null != e.publish_quality_infos && e.publish_quality_infos.length) for (var A = 0; A < e.publish_quality_infos.length; ++A)a.logreport.PublishQualityInfos.encode(e.publish_quality_infos[A], t.uint32(18).fork()).ldelim(); if (null != e.play_quality_infos && e.play_quality_infos.length) for (A = 0; A < e.play_quality_infos.length; ++A)a.logreport.PlayQualityInfos.encode(e.play_quality_infos[A], t.uint32(26).fork()).ldelim(); return null != e.network_type && Object.hasOwnProperty.call(e, "network_type") && t.uint32(32).uint32(e.network_type), null != e.charge_infos && Object.hasOwnProperty.call(e, "charge_infos") && a.logreport.ChargeInfos.encode(e.charge_infos, t.uint32(42).fork()).ldelim(), null != e.server_time && Object.hasOwnProperty.call(e, "server_time") && t.uint32(48).int64(e.server_time), null != e.client_type && Object.hasOwnProperty.call(e, "client_type") && t.uint32(800).uint32(e.client_type), t }, A.ResourceType = (e = {}, (t = Object.create(e))[e[0] = "UNKNOWN"] = 0, t[e[1] = "CDN"] = 1, t[e[2] = "RTC"] = 2, t[e[3] = "L3"] = 3, t[e[4] = "P2P"] = 4, t), A }(), i.HardwareInfos = function () { function A(e) { if (this.infos = [], e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } return A.prototype.timestamp_offset_begin = 0, A.prototype.timestamp_offset_end = 0, A.prototype.infos = s.emptyArray, A.prototype.sys_mem_total = 0, A.create = function (e) { return new A(e) }, A.encode = function (e, t) { if (t || (t = n.create()), null != e.timestamp_offset_begin && Object.hasOwnProperty.call(e, "timestamp_offset_begin") && t.uint32(8).uint32(e.timestamp_offset_begin), null != e.timestamp_offset_end && Object.hasOwnProperty.call(e, "timestamp_offset_end") && t.uint32(16).uint32(e.timestamp_offset_end), null != e.infos && e.infos.length) for (var A = 0; A < e.infos.length; ++A)a.logreport.HardwareInfo.encode(e.infos[A], t.uint32(26).fork()).ldelim(); return null != e.sys_mem_total && Object.hasOwnProperty.call(e, "sys_mem_total") && t.uint32(32).uint32(e.sys_mem_total), t }, A }(), i.PublishQualityInfos = function () { function A(e) { if (this.infos = [], e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } return A.prototype.timestamp_offset_begin = 0, A.prototype.timestamp_offset_end = 0, A.prototype.stream_id = "", A.prototype.session_id = 0, A.prototype.video_width = 0, A.prototype.video_height = 0, A.prototype.ipv4 = 0, A.prototype.ipv6 = "", A.prototype.resource_type = 0, A.prototype.infos = s.emptyArray, A.prototype.room_id = "", A.prototype.evnvironment = 0, A.prototype.ap = "", A.prototype.session = "", A.prototype.room_session_id = s.Long ? s.Long.fromBits(0, 0, !0) : 0, A.prototype.protocol_type = 0, A.prototype.setting_video_bitrate = 0, A.prototype.setting_audio_bitrate = 0, A.prototype.setting_video_fps = 0, A.create = function (e) { return new A(e) }, A.encode = function (e, t) { if (t || (t = n.create()), null != e.timestamp_offset_begin && Object.hasOwnProperty.call(e, "timestamp_offset_begin") && t.uint32(8).uint32(e.timestamp_offset_begin), null != e.timestamp_offset_end && Object.hasOwnProperty.call(e, "timestamp_offset_end") && t.uint32(16).uint32(e.timestamp_offset_end), null != e.stream_id && Object.hasOwnProperty.call(e, "stream_id") && t.uint32(26).string(e.stream_id), null != e.session_id && Object.hasOwnProperty.call(e, "session_id") && t.uint32(32).uint32(e.session_id), null != e.video_width && Object.hasOwnProperty.call(e, "video_width") && t.uint32(40).uint32(e.video_width), null != e.video_height && Object.hasOwnProperty.call(e, "video_height") && t.uint32(48).uint32(e.video_height), null != e.ipv4 && Object.hasOwnProperty.call(e, "ipv4") && t.uint32(56).uint32(e.ipv4), null != e.ipv6 && Object.hasOwnProperty.call(e, "ipv6") && t.uint32(66).string(e.ipv6), null != e.resource_type && Object.hasOwnProperty.call(e, "resource_type") && t.uint32(72).uint32(e.resource_type), null != e.infos && e.infos.length) for (var A = 0; A < e.infos.length; ++A)a.logreport.PublishQualityInfo.encode(e.infos[A], t.uint32(82).fork()).ldelim(); return null != e.room_id && Object.hasOwnProperty.call(e, "room_id") && t.uint32(90).string(e.room_id), null != e.evnvironment && Object.hasOwnProperty.call(e, "evnvironment") && t.uint32(104).uint32(e.evnvironment), null != e.ap && Object.hasOwnProperty.call(e, "ap") && t.uint32(114).string(e.ap), null != e.session && Object.hasOwnProperty.call(e, "session") && t.uint32(122).string(e.session), null != e.room_session_id && Object.hasOwnProperty.call(e, "room_session_id") && t.uint32(128).uint64(e.room_session_id), null != e.protocol_type && Object.hasOwnProperty.call(e, "protocol_type") && t.uint32(136).uint32(e.protocol_type), null != e.setting_video_bitrate && Object.hasOwnProperty.call(e, "setting_video_bitrate") && t.uint32(144).uint32(e.setting_video_bitrate), null != e.setting_audio_bitrate && Object.hasOwnProperty.call(e, "setting_audio_bitrate") && t.uint32(152).uint32(e.setting_audio_bitrate), null != e.setting_video_fps && Object.hasOwnProperty.call(e, "setting_video_fps") && t.uint32(160).uint32(e.setting_video_fps), t }, A }(), i.PlayQualityInfos = function () { function A(e) { if (this.infos = [], e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } return A.prototype.timestamp_offset_begin = 0, A.prototype.timestamp_offset_end = 0, A.prototype.stream_id = "", A.prototype.session_id = 0, A.prototype.video_width = 0, A.prototype.video_height = 0, A.prototype.ipv4 = 0, A.prototype.ipv6 = "", A.prototype.resource_type = 0, A.prototype.infos = s.emptyArray, A.prototype.room_id = "", A.prototype.session = "", A.prototype.room_session_id = s.Long ? s.Long.fromBits(0, 0, !0) : 0, A.prototype.protocol_type = 0, A.prototype.product = 0, A.create = function (e) { return new A(e) }, A.encode = function (e, t) { if (t || (t = n.create()), null != e.timestamp_offset_begin && Object.hasOwnProperty.call(e, "timestamp_offset_begin") && t.uint32(8).uint32(e.timestamp_offset_begin), null != e.timestamp_offset_end && Object.hasOwnProperty.call(e, "timestamp_offset_end") && t.uint32(16).uint32(e.timestamp_offset_end), null != e.stream_id && Object.hasOwnProperty.call(e, "stream_id") && t.uint32(26).string(e.stream_id), null != e.session_id && Object.hasOwnProperty.call(e, "session_id") && t.uint32(32).uint32(e.session_id), null != e.video_width && Object.hasOwnProperty.call(e, "video_width") && t.uint32(40).uint32(e.video_width), null != e.video_height && Object.hasOwnProperty.call(e, "video_height") && t.uint32(48).uint32(e.video_height), null != e.ipv4 && Object.hasOwnProperty.call(e, "ipv4") && t.uint32(56).uint32(e.ipv4), null != e.ipv6 && Object.hasOwnProperty.call(e, "ipv6") && t.uint32(66).string(e.ipv6), null != e.resource_type && Object.hasOwnProperty.call(e, "resource_type") && t.uint32(72).uint32(e.resource_type), null != e.infos && e.infos.length) for (var A = 0; A < e.infos.length; ++A)a.logreport.PlayQualityInfo.encode(e.infos[A], t.uint32(82).fork()).ldelim(); return null != e.room_id && Object.hasOwnProperty.call(e, "room_id") && t.uint32(90).string(e.room_id), null != e.session && Object.hasOwnProperty.call(e, "session") && t.uint32(106).string(e.session), null != e.room_session_id && Object.hasOwnProperty.call(e, "room_session_id") && t.uint32(112).uint64(e.room_session_id), null != e.protocol_type && Object.hasOwnProperty.call(e, "protocol_type") && t.uint32(120).uint32(e.protocol_type), null != e.product && Object.hasOwnProperty.call(e, "product") && t.uint32(128).uint32(e.product), t }, A }(), i.ChargeInfos = function () { function A(e) { if (this.infos = [], e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } return A.prototype.timestamp_offset_begin = 0, A.prototype.timestamp_offset_end = 0, A.prototype.timestamp_diff_flag = 0, A.prototype.timestamp_diff = 0, A.prototype.room_id = "", A.prototype.infos = s.emptyArray, A.create = function (e) { return new A(e) }, A.encode = function (e, t) { if (t || (t = n.create()), null != e.timestamp_offset_begin && Object.hasOwnProperty.call(e, "timestamp_offset_begin") && t.uint32(8).uint32(e.timestamp_offset_begin), null != e.timestamp_offset_end && Object.hasOwnProperty.call(e, "timestamp_offset_end") && t.uint32(16).uint32(e.timestamp_offset_end), null != e.timestamp_diff_flag && Object.hasOwnProperty.call(e, "timestamp_diff_flag") && t.uint32(24).uint32(e.timestamp_diff_flag), null != e.timestamp_diff && Object.hasOwnProperty.call(e, "timestamp_diff") && t.uint32(32).uint32(e.timestamp_diff), null != e.room_id && Object.hasOwnProperty.call(e, "room_id") && t.uint32(42).string(e.room_id), null != e.infos && e.infos.length) for (var A = 0; A < e.infos.length; ++A)a.logreport.ChargeInfo.encode(e.infos[A], t.uint32(802).fork()).ldelim(); return t }, A }(), i.HardwareInfo = function () { function A(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } return A.prototype.sys_cpu_used = 0, A.prototype.app_cpu_used = 0, A.prototype.sys_mem_used = 0, A.prototype.app_mem_used = 0, A.prototype.sample_time_offset = 0, A.create = function (e) { return new A(e) }, A.encode = function (e, t) { return t || (t = n.create()), null != e.sys_cpu_used && Object.hasOwnProperty.call(e, "sys_cpu_used") && t.uint32(8).uint32(e.sys_cpu_used), null != e.app_cpu_used && Object.hasOwnProperty.call(e, "app_cpu_used") && t.uint32(16).uint32(e.app_cpu_used), null != e.sys_mem_used && Object.hasOwnProperty.call(e, "sys_mem_used") && t.uint32(24).uint32(e.sys_mem_used), null != e.app_mem_used && Object.hasOwnProperty.call(e, "app_mem_used") && t.uint32(32).uint32(e.app_mem_used), null != e.sample_time_offset && Object.hasOwnProperty.call(e, "sample_time_offset") && t.uint32(40).uint32(e.sample_time_offset), t }, A }(), i.PublishQualityInfo = function () { function A(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } return A.prototype.audio_bitrate = 0, A.prototype.video_bitrate = 0, A.prototype.video_capture_fps = 0, A.prototype.video_network_fps = 0, A.prototype.uplink_plr = 0, A.prototype.rtt = 0, A.prototype.audio_network_fps = 0, A.prototype.captured_sound_level = 0, A.prototype.quality = 0, A.prototype.sample_time_offset = 0, A.prototype.sample_time_window = 0, A.create = function (e) { return new A(e) }, A.encode = function (e, t) { return t || (t = n.create()), null != e.audio_bitrate && Object.hasOwnProperty.call(e, "audio_bitrate") && t.uint32(8).uint32(e.audio_bitrate), null != e.video_bitrate && Object.hasOwnProperty.call(e, "video_bitrate") && t.uint32(16).uint32(e.video_bitrate), null != e.video_capture_fps && Object.hasOwnProperty.call(e, "video_capture_fps") && t.uint32(24).uint32(e.video_capture_fps), null != e.video_network_fps && Object.hasOwnProperty.call(e, "video_network_fps") && t.uint32(32).uint32(e.video_network_fps), null != e.uplink_plr && Object.hasOwnProperty.call(e, "uplink_plr") && t.uint32(40).uint32(e.uplink_plr), null != e.rtt && Object.hasOwnProperty.call(e, "rtt") && t.uint32(48).uint32(e.rtt), null != e.audio_network_fps && Object.hasOwnProperty.call(e, "audio_network_fps") && t.uint32(56).uint32(e.audio_network_fps), null != e.captured_sound_level && Object.hasOwnProperty.call(e, "captured_sound_level") && t.uint32(64).uint32(e.captured_sound_level), null != e.quality && Object.hasOwnProperty.call(e, "quality") && t.uint32(72).uint32(e.quality), null != e.sample_time_offset && Object.hasOwnProperty.call(e, "sample_time_offset") && t.uint32(80).uint32(e.sample_time_offset), null != e.sample_time_window && Object.hasOwnProperty.call(e, "sample_time_window") && t.uint32(800).uint32(e.sample_time_window), t }, A }(), i.PlayQualityInfo = function () { function A(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } return A.prototype.audio_bitrate = 0, A.prototype.video_bitrate = 0, A.prototype.video_network_fps = 0, A.prototype.audio_break_count = 0, A.prototype.video_break_count = 0, A.prototype.downlink_plr = 0, A.prototype.peer_to_peer_plr = 0, A.prototype.peer_to_peer_delay = 0, A.prototype.audio_network_fps = 0, A.prototype.audio_break_duration = 0, A.prototype.video_break_duration = 0, A.prototype.audio_break_rate = 0, A.prototype.video_break_rate = 0, A.prototype.audio_break_cancel = 0, A.prototype.video_break_cancel = 0, A.prototype.rtt = 0, A.prototype.rendered_sound_level = 0, A.prototype.audio_break_cancel_duration = 0, A.prototype.video_break_cancel_duration = 0, A.prototype.audio_decode_time = 0, A.prototype.video_decode_time = 0, A.prototype.real_sampling_interval = 0, A.prototype.mos = 0, A.prototype.audio_decode_fps = 0, A.prototype.video_decode_fps = 0, A.prototype.video_frames_decoded = 0, A.prototype.video_frames_dropped = 0, A.prototype.quality = 0, A.prototype.evaluation_quality = 0, A.prototype.break_stat_duration = 0, A.prototype.sample_time_offset = 0, A.prototype.sample_time_window = 0, A.create = function (e) { return new A(e) }, A.encode = function (e, t) { return t || (t = n.create()), null != e.audio_bitrate && Object.hasOwnProperty.call(e, "audio_bitrate") && t.uint32(8).uint32(e.audio_bitrate), null != e.video_bitrate && Object.hasOwnProperty.call(e, "video_bitrate") && t.uint32(16).uint32(e.video_bitrate), null != e.video_network_fps && Object.hasOwnProperty.call(e, "video_network_fps") && t.uint32(24).uint32(e.video_network_fps), null != e.audio_break_count && Object.hasOwnProperty.call(e, "audio_break_count") && t.uint32(32).uint32(e.audio_break_count), null != e.video_break_count && Object.hasOwnProperty.call(e, "video_break_count") && t.uint32(40).uint32(e.video_break_count), null != e.downlink_plr && Object.hasOwnProperty.call(e, "downlink_plr") && t.uint32(48).uint32(e.downlink_plr), null != e.peer_to_peer_plr && Object.hasOwnProperty.call(e, "peer_to_peer_plr") && t.uint32(56).uint32(e.peer_to_peer_plr), null != e.peer_to_peer_delay && Object.hasOwnProperty.call(e, "peer_to_peer_delay") && t.uint32(64).uint32(e.peer_to_peer_delay), null != e.audio_network_fps && Object.hasOwnProperty.call(e, "audio_network_fps") && t.uint32(72).uint32(e.audio_network_fps), null != e.audio_break_duration && Object.hasOwnProperty.call(e, "audio_break_duration") && t.uint32(80).uint32(e.audio_break_duration), null != e.video_break_duration && Object.hasOwnProperty.call(e, "video_break_duration") && t.uint32(88).uint32(e.video_break_duration), null != e.audio_break_rate && Object.hasOwnProperty.call(e, "audio_break_rate") && t.uint32(96).uint32(e.audio_break_rate), null != e.video_break_rate && Object.hasOwnProperty.call(e, "video_break_rate") && t.uint32(104).uint32(e.video_break_rate), null != e.audio_break_cancel && Object.hasOwnProperty.call(e, "audio_break_cancel") && t.uint32(112).uint32(e.audio_break_cancel), null != e.video_break_cancel && Object.hasOwnProperty.call(e, "video_break_cancel") && t.uint32(120).uint32(e.video_break_cancel), null != e.rtt && Object.hasOwnProperty.call(e, "rtt") && t.uint32(128).uint32(e.rtt), null != e.rendered_sound_level && Object.hasOwnProperty.call(e, "rendered_sound_level") && t.uint32(136).uint32(e.rendered_sound_level), null != e.audio_break_cancel_duration && Object.hasOwnProperty.call(e, "audio_break_cancel_duration") && t.uint32(144).uint32(e.audio_break_cancel_duration), null != e.video_break_cancel_duration && Object.hasOwnProperty.call(e, "video_break_cancel_duration") && t.uint32(152).uint32(e.video_break_cancel_duration), null != e.audio_decode_time && Object.hasOwnProperty.call(e, "audio_decode_time") && t.uint32(160).uint32(e.audio_decode_time), null != e.video_decode_time && Object.hasOwnProperty.call(e, "video_decode_time") && t.uint32(168).uint32(e.video_decode_time), null != e.real_sampling_interval && Object.hasOwnProperty.call(e, "real_sampling_interval") && t.uint32(176).uint32(e.real_sampling_interval), null != e.mos && Object.hasOwnProperty.call(e, "mos") && t.uint32(184).int32(e.mos), null != e.audio_decode_fps && Object.hasOwnProperty.call(e, "audio_decode_fps") && t.uint32(192).uint32(e.audio_decode_fps), null != e.video_decode_fps && Object.hasOwnProperty.call(e, "video_decode_fps") && t.uint32(200).uint32(e.video_decode_fps), null != e.video_frames_decoded && Object.hasOwnProperty.call(e, "video_frames_decoded") && t.uint32(208).uint32(e.video_frames_decoded), null != e.video_frames_dropped && Object.hasOwnProperty.call(e, "video_frames_dropped") && t.uint32(216).uint32(e.video_frames_dropped), null != e.quality && Object.hasOwnProperty.call(e, "quality") && t.uint32(224).int32(e.quality), null != e.evaluation_quality && Object.hasOwnProperty.call(e, "evaluation_quality") && t.uint32(232).int32(e.evaluation_quality), null != e.break_stat_duration && Object.hasOwnProperty.call(e, "break_stat_duration") && t.uint32(240).uint32(e.break_stat_duration), null != e.sample_time_offset && Object.hasOwnProperty.call(e, "sample_time_offset") && t.uint32(248).uint32(e.sample_time_offset), null != e.sample_time_window && Object.hasOwnProperty.call(e, "sample_time_window") && t.uint32(800).uint32(e.sample_time_window), t }, A }(), i.ChargeInfo = function () { function A(e) { if (this.play_stream_resolution_infos = [], e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } return A.prototype.is_publishing = 0, A.prototype.play_stream_resolution_infos = s.emptyArray, A.prototype.play_max_audio_bitrate = 0, A.prototype.no_playing = 0, A.prototype.p2p_charge_info = null, A.prototype.sample_time_offset = 0, A.create = function (e) { return new A(e) }, A.encode = function (e, t) { if (t || (t = n.create()), null != e.is_publishing && Object.hasOwnProperty.call(e, "is_publishing") && t.uint32(8).uint32(e.is_publishing), null != e.play_stream_resolution_infos && e.play_stream_resolution_infos.length) for (var A = 0; A < e.play_stream_resolution_infos.length; ++A)a.logreport.ResolutionInfo.encode(e.play_stream_resolution_infos[A], t.uint32(18).fork()).ldelim(); return null != e.play_max_audio_bitrate && Object.hasOwnProperty.call(e, "play_max_audio_bitrate") && t.uint32(24).uint32(e.play_max_audio_bitrate), null != e.no_playing && Object.hasOwnProperty.call(e, "no_playing") && t.uint32(32).uint32(e.no_playing), null != e.p2p_charge_info && Object.hasOwnProperty.call(e, "p2p_charge_info") && a.logreport.P2PChargeInfo.encode(e.p2p_charge_info, t.uint32(42).fork()).ldelim(), null != e.sample_time_offset && Object.hasOwnProperty.call(e, "sample_time_offset") && t.uint32(48).uint32(e.sample_time_offset), t }, A }(), i.ResolutionInfo = function () { function A(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } return A.prototype.video_width = 0, A.prototype.video_height = 0, A.prototype.count = 0, A.create = function (e) { return new A(e) }, A.encode = function (e, t) { return t || (t = n.create()), null != e.video_width && Object.hasOwnProperty.call(e, "video_width") && t.uint32(8).uint32(e.video_width), null != e.video_height && Object.hasOwnProperty.call(e, "video_height") && t.uint32(16).uint32(e.video_height), null != e.count && Object.hasOwnProperty.call(e, "count") && t.uint32(24).uint32(e.count), t }, A }(), i.P2PChargeInfo = function () { function A(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } return A.prototype.media_inc = s.Long ? s.Long.fromBits(0, 0, !0) : 0, A.prototype.data_inc = s.Long ? s.Long.fromBits(0, 0, !0) : 0, A.create = function (e) { return new A(e) }, A.encode = function (e, t) { return t || (t = n.create()), null != e.media_inc && Object.hasOwnProperty.call(e, "media_inc") && t.uint32(8).uint64(e.media_inc), null != e.data_inc && Object.hasOwnProperty.call(e, "data_inc") && t.uint32(16).uint64(e.data_inc), t }, A }(), i.NoBillingEvent = function () { function A(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } return A.prototype.platform_info = "", A.prototype.room_id = "", A.create = function (e) { return new A(e) }, A.encode = function (e, t) { return t || (t = n.create()), null != e.platform_info && Object.hasOwnProperty.call(e, "platform_info") && t.uint32(10).string(e.platform_info), null != e.room_id && Object.hasOwnProperty.call(e, "room_id") && t.uint32(18).string(e.room_id), t }, A }(), i.DynQualityEvent = function () { function A(e) { if (this.dyn_quality_infos = [], e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } return A.prototype.seq_no = "", A.prototype.num = 0, A.prototype.dyn_quality_infos = s.emptyArray, A.prototype.device_id = "", A.prototype.latitude = 0, A.prototype.longitude = 0, A.prototype.country = "", A.prototype.region = "", A.prototype.city = "", A.prototype.isp = "", A.prototype.ve_mode = 0, A.create = function (e) { return new A(e) }, A.encode = function (e, t) { if (t || (t = n.create()), null != e.seq_no && Object.hasOwnProperty.call(e, "seq_no") && t.uint32(10).string(e.seq_no), null != e.num && Object.hasOwnProperty.call(e, "num") && t.uint32(16).uint32(e.num), null != e.dyn_quality_infos && e.dyn_quality_infos.length) for (var A = 0; A < e.dyn_quality_infos.length; ++A)a.logreport.DynQualityInfos.encode(e.dyn_quality_infos[A], t.uint32(26).fork()).ldelim(); return null != e.device_id && Object.hasOwnProperty.call(e, "device_id") && t.uint32(34).string(e.device_id), null != e.latitude && Object.hasOwnProperty.call(e, "latitude") && t.uint32(40).uint32(e.latitude), null != e.longitude && Object.hasOwnProperty.call(e, "longitude") && t.uint32(48).uint32(e.longitude), null != e.country && Object.hasOwnProperty.call(e, "country") && t.uint32(58).string(e.country), null != e.region && Object.hasOwnProperty.call(e, "region") && t.uint32(66).string(e.region), null != e.city && Object.hasOwnProperty.call(e, "city") && t.uint32(74).string(e.city), null != e.isp && Object.hasOwnProperty.call(e, "isp") && t.uint32(82).string(e.isp), null != e.ve_mode && Object.hasOwnProperty.call(e, "ve_mode") && t.uint32(88).uint32(e.ve_mode), t }, A }(), i.DynQualityInfos = function () { function A(e) { if (this.infos = [], e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } return A.prototype.timestamp_offset_begin = s.Long ? s.Long.fromBits(0, 0, !0) : 0, A.prototype.timestamp_offset_end = s.Long ? s.Long.fromBits(0, 0, !0) : 0, A.prototype.server_ip = "", A.prototype.infos = s.emptyArray, A.prototype.network_type = 0, A.prototype.stream_id = "", A.create = function (e) { return new A(e) }, A.encode = function (e, t) { if (t || (t = n.create()), null != e.timestamp_offset_begin && Object.hasOwnProperty.call(e, "timestamp_offset_begin") && t.uint32(8).uint64(e.timestamp_offset_begin), null != e.timestamp_offset_end && Object.hasOwnProperty.call(e, "timestamp_offset_end") && t.uint32(16).uint64(e.timestamp_offset_end), null != e.server_ip && Object.hasOwnProperty.call(e, "server_ip") && t.uint32(26).string(e.server_ip), null != e.infos && e.infos.length) for (var A = 0; A < e.infos.length; ++A)a.logreport.DynQualityInfo.encode(e.infos[A], t.uint32(34).fork()).ldelim(); return null != e.network_type && Object.hasOwnProperty.call(e, "network_type") && t.uint32(40).uint32(e.network_type), null != e.stream_id && Object.hasOwnProperty.call(e, "stream_id") && t.uint32(50).string(e.stream_id), t }, A }(), i.DynQualityInfo = function () { function A(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } return A.prototype.time = s.Long ? s.Long.fromBits(0, 0, !0) : 0, A.prototype.plr = 0, A.prototype.rtt = 0, A.prototype.score = 0, A.prototype.sample_time = 0, A.create = function (e) { return new A(e) }, A.encode = function (e, t) { return t || (t = n.create()), null != e.time && Object.hasOwnProperty.call(e, "time") && t.uint32(8).uint64(e.time), null != e.plr && Object.hasOwnProperty.call(e, "plr") && t.uint32(16).uint32(e.plr), null != e.rtt && Object.hasOwnProperty.call(e, "rtt") && t.uint32(24).uint32(e.rtt), null != e.score && Object.hasOwnProperty.call(e, "score") && t.uint32(32).uint32(e.score), null != e.sample_time && Object.hasOwnProperty.call(e, "sample_time") && t.uint32(40).uint32(e.sample_time), t }, A }(), i), e.exports = a }, "6348": function _(e, t, r) { "use strict"; var i, o = r(2100), n = o.Reader, s = o.Writer, a = o.util, c = o.roots.default || (o.roots.default = {}); c.webrtc_cmd = ((i = {}).MetadataPush = function () { function A(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } return A.prototype.width = 0, A.prototype.height = 0, A.create = function (e) { return new A(e) }, A.encode = function (e, t) { return t || (t = s.create()), null != e.width && Object.hasOwnProperty.call(e, "width") && t.uint32(8).uint32(e.width), null != e.height && Object.hasOwnProperty.call(e, "height") && t.uint32(16).uint32(e.height), t }, A.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.webrtc_cmd.MetadataPush; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.width = e.uint32(); break; case 2: r.height = e.uint32(); break; default: e.skipType(7 & i) } } return r }, A }(), i.MetadataAck = function () { function A(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } return A.prototype.result = 0, A.create = function (e) { return new A(e) }, A.encode = function (e, t) { return t || (t = s.create()), null != e.result && Object.hasOwnProperty.call(e, "result") && t.uint32(8).sint32(e.result), t }, A.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.webrtc_cmd.MetadataAck; e.pos < A;) { var i = e.uint32(); i >>> 3 == 1 ? r.result = e.sint32() : e.skipType(7 & i) } return r }, A }(), i.VideoStreamSubscribeReq = function () { function A(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } return A.prototype.type = 0, A.create = function (e) { return new A(e) }, A.encode = function (e, t) { return t || (t = s.create()), null != e.type && Object.hasOwnProperty.call(e, "type") && t.uint32(8).uint32(e.type), t }, A.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.webrtc_cmd.VideoStreamSubscribeReq; e.pos < A;) { var i = e.uint32(); i >>> 3 == 1 ? r.type = e.uint32() : e.skipType(7 & i) } return r }, A }(), i.VideoStreamSubscribeRsp = function () { function A(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } return A.prototype.result = 0, A.create = function (e) { return new A(e) }, A.encode = function (e, t) { return t || (t = s.create()), null != e.result && Object.hasOwnProperty.call(e, "result") && t.uint32(8).sint32(e.result), t }, A.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.webrtc_cmd.VideoStreamSubscribeRsp; e.pos < A;) { var i = e.uint32(); i >>> 3 == 1 ? r.result = e.sint32() : e.skipType(7 & i) } return r }, A }(), i.VideoStreamFallbackTypeReq = function () { function A(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } return A.prototype.type = 0, A.create = function (e) { return new A(e) }, A.encode = function (e, t) { return t || (t = s.create()), null != e.type && Object.hasOwnProperty.call(e, "type") && t.uint32(8).uint32(e.type), t }, A.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.webrtc_cmd.VideoStreamFallbackTypeReq; e.pos < A;) { var i = e.uint32(); i >>> 3 == 1 ? r.type = e.uint32() : e.skipType(7 & i) } return r }, A }(), i.VideoStreamFallbackTypeRsp = function () { function A(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } return A.prototype.result = 0, A.create = function (e) { return new A(e) }, A.encode = function (e, t) { return t || (t = s.create()), null != e.result && Object.hasOwnProperty.call(e, "result") && t.uint32(8).sint32(e.result), t }, A.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.webrtc_cmd.VideoStreamFallbackTypeRsp; e.pos < A;) { var i = e.uint32(); i >>> 3 == 1 ? r.result = e.sint32() : e.skipType(7 & i) } return r }, A }(), i.VideoStreamChangePush = function () { function A(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } return A.prototype.change_type = 0, A.prototype.video_type = 0, A.create = function (e) { return new A(e) }, A.encode = function (e, t) { return t || (t = s.create()), null != e.change_type && Object.hasOwnProperty.call(e, "change_type") && t.uint32(8).uint32(e.change_type), null != e.video_type && Object.hasOwnProperty.call(e, "video_type") && t.uint32(16).uint32(e.video_type), t }, A.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.webrtc_cmd.VideoStreamChangePush; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.change_type = e.uint32(); break; case 2: r.video_type = e.uint32(); break; default: e.skipType(7 & i) } } return r }, A }(), i.VideoStreamChangeAck = function () { function A(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } return A.prototype.result = 0, A.create = function (e) { return new A(e) }, A.encode = function (e, t) { return t || (t = s.create()), null != e.result && Object.hasOwnProperty.call(e, "result") && t.uint32(8).sint32(e.result), t }, A.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.webrtc_cmd.VideoStreamChangeAck; e.pos < A;) { var i = e.uint32(); i >>> 3 == 1 ? r.result = e.sint32() : e.skipType(7 & i) } return r }, A }(), i.UserUnregisteredSEIFilterReq = function () { function A(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } return A.prototype.sei_filter = "", A.create = function (e) { return new A(e) }, A.encode = function (e, t) { return t || (t = s.create()), null != e.sei_filter && Object.hasOwnProperty.call(e, "sei_filter") && t.uint32(10).string(e.sei_filter), t }, A.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.webrtc_cmd.UserUnregisteredSEIFilterReq; e.pos < A;) { var i = e.uint32(); i >>> 3 == 1 ? r.sei_filter = e.string() : e.skipType(7 & i) } return r }, A }(), i.UserUnregisteredSEIFilterRsp = function () { function A(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } return A.prototype.result = 0, A.create = function (e) { return new A(e) }, A.encode = function (e, t) { return t || (t = s.create()), null != e.result && Object.hasOwnProperty.call(e, "result") && t.uint32(8).sint32(e.result), t }, A.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.webrtc_cmd.UserUnregisteredSEIFilterRsp; e.pos < A;) { var i = e.uint32(); i >>> 3 == 1 ? r.result = e.sint32() : e.skipType(7 & i) } return r }, A }(), i.NetQualityGradeReq = function () { function A(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } return A.prototype.tx_quality = -1, A.prototype.rx_quality = -1, A.create = function (e) { return new A(e) }, A.encode = function (e, t) { return t || (t = s.create()), null != e.tx_quality && Object.hasOwnProperty.call(e, "tx_quality") && t.uint32(8).sint32(e.tx_quality), null != e.rx_quality && Object.hasOwnProperty.call(e, "rx_quality") && t.uint32(16).sint32(e.rx_quality), t }, A.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.webrtc_cmd.NetQualityGradeReq; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.tx_quality = e.sint32(); break; case 2: r.rx_quality = e.sint32(); break; default: e.skipType(7 & i) } } return r }, A }(), i.NetQualityGradeRsp = function () { function A(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } return A.prototype.result = 0, A.create = function (e) { return new A(e) }, A.encode = function (e, t) { return t || (t = s.create()), null != e.result && Object.hasOwnProperty.call(e, "result") && t.uint32(8).sint32(e.result), t }, A.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.webrtc_cmd.UserUnregisteredSEIFilterRsp; e.pos < A;) { var i = e.uint32(); i >>> 3 == 1 ? r.result = e.sint32() : e.skipType(7 & i) } return r }, A }(), i.NetQualityGradePush = function () { function A(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } return A.prototype.tx_quality = 0, A.prototype.rx_quality = 0, A.create = function (e) { return new A(e) }, A.encode = function (e, t) { return t || (t = s.create()), null != e.tx_quality && Object.hasOwnProperty.call(e, "tx_quality") && t.uint32(8).sint32(e.tx_quality), null != e.rx_quality && Object.hasOwnProperty.call(e, "rx_quality") && t.uint32(16).sint32(e.rx_quality), t }, A.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.webrtc_cmd.NetQualityGradePush; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.tx_quality = e.sint32(); break; case 2: r.rx_quality = e.sint32(); break; default: e.skipType(7 & i) } } return r }, A }(), i.NetQualityGradeAck = function () { function A(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } return A.prototype.result = 0, A.create = function (e) { return new A(e) }, A.encode = function (e, t) { return t || (t = s.create()), null != e.result && Object.hasOwnProperty.call(e, "result") && t.uint32(8).sint32(e.result), t }, A.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.webrtc_cmd.UserUnregisteredSEIFilterRsp; e.pos < A;) { var i = e.uint32(); i >>> 3 == 1 ? r.result = e.sint32() : e.skipType(7 & i) } return r }, A }(), i.WebrtcCmdReqMsg = function () { function A(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } var e; return A.prototype.meta_data_push = null, A.prototype.video_stream_sub = null, A.prototype.video_fallback_type = null, A.prototype.video_change_push = null, A.prototype.usr_sei_filter = null, A.prototype.net_quality_grade = null, A.prototype.net_quality_grade_push = null, Object.defineProperty(A.prototype, "body", { "get": a.oneOfGetter(e = ["meta_data_push", "video_stream_sub", "video_fallback_type", "video_change_push", "usr_sei_filter", "net_quality_grade", "net_quality_grade_push"]), "set": a.oneOfSetter(e) }), A.create = function (e) { return new A(e) }, A.encode = function (e, t) { return t || (t = s.create()), null != e.meta_data_push && Object.hasOwnProperty.call(e, "meta_data_push") && c.webrtc_cmd.MetadataPush.encode(e.meta_data_push, t.uint32(10).fork()).ldelim(), null != e.video_stream_sub && Object.hasOwnProperty.call(e, "video_stream_sub") && c.webrtc_cmd.VideoStreamSubscribeReq.encode(e.video_stream_sub, t.uint32(18).fork()).ldelim(), null != e.video_fallback_type && Object.hasOwnProperty.call(e, "video_fallback_type") && c.webrtc_cmd.VideoStreamFallbackTypeReq.encode(e.video_fallback_type, t.uint32(26).fork()).ldelim(), null != e.video_change_push && Object.hasOwnProperty.call(e, "video_change_push") && c.webrtc_cmd.VideoStreamChangePush.encode(e.video_change_push, t.uint32(34).fork()).ldelim(), null != e.usr_sei_filter && Object.hasOwnProperty.call(e, "usr_sei_filter") && c.webrtc_cmd.UserUnregisteredSEIFilterReq.encode(e.usr_sei_filter, t.uint32(42).fork()).ldelim(), null != e.net_quality_grade && Object.hasOwnProperty.call(e, "net_quality_grade") && c.webrtc_cmd.NetQualityGradeReq.encode(e.net_quality_grade, t.uint32(50).fork()).ldelim(), null != e.net_quality_grade_push && Object.hasOwnProperty.call(e, "net_quality_grade_push") && c.webrtc_cmd.NetQualityGradePush.encode(e.net_quality_grade_push, t.uint32(58).fork()).ldelim(), t }, A.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.webrtc_cmd.WebrtcCmdReqMsg; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.meta_data_push = c.webrtc_cmd.MetadataPush.decode(e, e.uint32()); break; case 2: r.video_stream_sub = c.webrtc_cmd.VideoStreamSubscribeReq.decode(e, e.uint32()); break; case 3: r.video_fallback_type = c.webrtc_cmd.VideoStreamFallbackTypeReq.decode(e, e.uint32()); break; case 4: r.video_change_push = c.webrtc_cmd.VideoStreamChangePush.decode(e, e.uint32()); break; case 5: r.usr_sei_filter = c.webrtc_cmd.UserUnregisteredSEIFilterReq.decode(e, e.uint32()); break; case 6: r.net_quality_grade = c.webrtc_cmd.NetQualityGradeReq.decode(e, e.uint32()); break; case 7: r.net_quality_grade_push = c.webrtc_cmd.NetQualityGradePush.decode(e, e.uint32()); break; default: e.skipType(7 & i) } } return r }, A }(), i.WebrtcCmdRspMsg = function () { function A(e) { if (e) for (var t = Object.keys(e), A = 0; A < t.length; ++A)null != e[t[A]] && (this[t[A]] = e[t[A]]) } var e; return A.prototype.meta_data_ack = null, A.prototype.video_stream_sub = null, A.prototype.video_fallback_type = null, A.prototype.video_change_ack = null, A.prototype.usr_sei_filter = null, A.prototype.net_quality_grade = null, A.prototype.net_quality_grade_ack = null, Object.defineProperty(A.prototype, "body", { "get": a.oneOfGetter(e = ["meta_data_ack", "video_stream_sub", "video_fallback_type", "video_change_ack", "usr_sei_filter", "net_quality_grade", "net_quality_grade_ack"]), "set": a.oneOfSetter(e) }), A.create = function (e) { return new A(e) }, A.encode = function (e, t) { return t || (t = s.create()), null != e.meta_data_ack && Object.hasOwnProperty.call(e, "meta_data_ack") && c.webrtc_cmd.MetadataAck.encode(e.meta_data_ack, t.uint32(10).fork()).ldelim(), null != e.video_stream_sub && Object.hasOwnProperty.call(e, "video_stream_sub") && c.webrtc_cmd.VideoStreamSubscribeRsp.encode(e.video_stream_sub, t.uint32(18).fork()).ldelim(), null != e.video_fallback_type && Object.hasOwnProperty.call(e, "video_fallback_type") && c.webrtc_cmd.VideoStreamFallbackTypeRsp.encode(e.video_fallback_type, t.uint32(26).fork()).ldelim(), null != e.video_change_ack && Object.hasOwnProperty.call(e, "video_change_ack") && c.webrtc_cmd.VideoStreamChangeAck.encode(e.video_change_ack, t.uint32(34).fork()).ldelim(), null != e.usr_sei_filter && Object.hasOwnProperty.call(e, "usr_sei_filter") && c.webrtc_cmd.UserUnregisteredSEIFilterRsp.encode(e.usr_sei_filter, t.uint32(42).fork()).ldelim(), null != e.net_quality_grade && Object.hasOwnProperty.call(e, "net_quality_grade") && c.webrtc_cmd.NetQualityGradeRsp.encode(e.net_quality_grade, t.uint32(50).fork()).ldelim(), null != e.net_quality_grade_ack && Object.hasOwnProperty.call(e, "net_quality_grade_ack") && c.webrtc_cmd.NetQualityGradeAck.encode(e.net_quality_grade_ack, t.uint32(58).fork()).ldelim(), t }, A.decode = function (e, t) { e instanceof n || (e = n.create(e)); for (var A = void 0 === t ? e.len : e.pos + t, r = new c.webrtc_cmd.WebrtcCmdRspMsg; e.pos < A;) { var i = e.uint32(); switch (i >>> 3) { case 1: r.meta_data_ack = c.webrtc_cmd.MetadataAck.decode(e, e.uint32()); break; case 2: r.video_stream_sub = c.webrtc_cmd.VideoStreamSubscribeRsp.decode(e, e.uint32()); break; case 3: r.video_fallback_type = c.webrtc_cmd.VideoStreamFallbackTypeRsp.decode(e, e.uint32()); break; case 4: r.video_change_ack = c.webrtc_cmd.VideoStreamChangeAck.decode(e, e.uint32()); break; case 5: r.usr_sei_filter = c.webrtc_cmd.UserUnregisteredSEIFilterRsp.decode(e, e.uint32()); break; case 6: r.net_quality_grade = c.webrtc_cmd.NetQualityGradeRsp.decode(e, e.uint32()); break; case 7: r.net_quality_grade_ack = c.webrtc_cmd.NetQualityGradeAck.decode(e, e.uint32()); break; default: e.skipType(7 & i) } } return r }, A }(), i), e.exports = c }, "5515": function _(e) { e.exports = function () { return function A(e, t, i) { function r(n, s) { if (!t[n]) { if (!e[n]) { if (o) return o(n, !0); var a = new Error("Cannot find module '" + n + "'"); throw a.code = "MODULE_NOT_FOUND", a } var c = t[n] = { "exports": {} }; e[n][0].call(c.exports, function (t) { return r(e[n][1][t] || t) }, c, c.exports, A, e, t, i) } return t[n].exports } for (var o = void 0, n = 0; n < i.length; n++)r(i[n]); return r } }()({ "1": [function (e, t, A) { "use strict"; var r = (0, e("./adapter_factory.js").adapterFactory)({ "window": window }); t.exports = r }, { "./adapter_factory.js": 2 }], "2": [function (e, t, A) { "use strict"; Object.defineProperty(A, "__esModule", { "value": !0 }), A.adapterFactory = function C() { var e = (arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}).window, t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : { "shimChrome": !0, "shimFirefox": !0, "shimEdge": !0, "shimSafari": !0 }, A = r.log, c = r.detectBrowser(e), g = { "browserDetails": c, "commonShim": a, "extractVersion": r.extractVersion, "disableLog": r.disableLog, "disableWarnings": r.disableWarnings }; switch (c.browser) { case "chrome": if (!i || !i.shimPeerConnection || !t.shimChrome) return A("Chrome shim is not included in this adapter release."), g; A("adapter.js shimming chrome."), g.browserShim = i, i.shimGetUserMedia(e), i.shimMediaStream(e), i.shimPeerConnection(e), i.shimOnTrack(e), i.shimAddTrackRemoveTrack(e), i.shimGetSendersWithDtmf(e), i.shimGetStats(e), i.shimSenderReceiverGetStats(e), i.fixNegotiationNeeded(e), a.shimRTCIceCandidate(e), a.shimConnectionState(e), a.shimMaxMessageSize(e), a.shimSendThrowTypeError(e), a.removeAllowExtmapMixed(e); break; case "firefox": if (!n || !n.shimPeerConnection || !t.shimFirefox) return A("Firefox shim is not included in this adapter release."), g; A("adapter.js shimming firefox."), g.browserShim = n, n.shimGetUserMedia(e), n.shimPeerConnection(e), n.shimOnTrack(e), n.shimRemoveStream(e), n.shimSenderGetStats(e), n.shimReceiverGetStats(e), n.shimRTCDataChannel(e), a.shimRTCIceCandidate(e), a.shimConnectionState(e), a.shimMaxMessageSize(e), a.shimSendThrowTypeError(e); break; case "edge": if (!o || !o.shimPeerConnection || !t.shimEdge) return A("MS edge shim is not included in this adapter release."), g; A("adapter.js shimming edge."), g.browserShim = o, o.shimGetUserMedia(e), o.shimGetDisplayMedia(e), o.shimPeerConnection(e), o.shimReplaceTrack(e), a.shimMaxMessageSize(e), a.shimSendThrowTypeError(e); break; case "safari": if (!s || !t.shimSafari) return A("Safari shim is not included in this adapter release."), g; A("adapter.js shimming safari."), g.browserShim = s, s.shimRTCIceServerUrls(e), s.shimCreateOfferLegacy(e), s.shimCallbacksAPI(e), s.shimLocalStreamsAPI(e), s.shimRemoteStreamsAPI(e), s.shimTrackEventTransceiver(e), s.shimGetUserMedia(e), a.shimRTCIceCandidate(e), a.shimMaxMessageSize(e), a.shimSendThrowTypeError(e), a.removeAllowExtmapMixed(e); break; default: A("Unsupported browser!") }return g }; var r = g(e("./utils")), i = g(e("./chrome/chrome_shim")), o = g(e("./edge/edge_shim")), n = g(e("./firefox/firefox_shim")), s = g(e("./safari/safari_shim")), a = g(e("./common_shim")); function g(e) { if (e && e.__esModule) return e; var t = {}; if (null != e) for (var A in e) Object.prototype.hasOwnProperty.call(e, A) && (t[A] = e[A]); return t.default = e, t } }, { "./chrome/chrome_shim": 3, "./common_shim": 6, "./edge/edge_shim": 7, "./firefox/firefox_shim": 11, "./safari/safari_shim": 14, "./utils": 15 }], "3": [function (e, t, A) { "use strict"; Object.defineProperty(A, "__esModule", { "value": !0 }), A.shimGetDisplayMedia = A.shimGetUserMedia = void 0; var r = "function" == typeof Symbol && "symbol" == _typeof(Symbol.iterator) ? function (e) { return void 0 === e ? "undefined" : _typeof(e) } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : void 0 === e ? "undefined" : _typeof(e) }, i = e("./getusermedia"); Object.defineProperty(A, "shimGetUserMedia", { "enumerable": !0, "get": function get() { return i.shimGetUserMedia } }); var o = e("./getdisplaymedia"); Object.defineProperty(A, "shimGetDisplayMedia", { "enumerable": !0, "get": function get() { return o.shimGetDisplayMedia } }), A.shimMediaStream = function a(e) { e.MediaStream = e.MediaStream || e.webkitMediaStream }, A.shimOnTrack = function g(e) { if ("object" !== (void 0 === e ? "undefined" : r(e)) || !e.RTCPeerConnection || "ontrack" in e.RTCPeerConnection.prototype) n.wrapPeerConnectionEvent(e, "track", function (e) { return e.transceiver || Object.defineProperty(e, "transceiver", { "value": { "receiver": e.receiver } }), e }); else { Object.defineProperty(e.RTCPeerConnection.prototype, "ontrack", { "get": function get() { return this._ontrack }, "set": function set(e) { this._ontrack && this.removeEventListener("track", this._ontrack), this.addEventListener("track", this._ontrack = e) }, "enumerable": !0, "configurable": !0 }); var t = e.RTCPeerConnection.prototype.setRemoteDescription; e.RTCPeerConnection.prototype.setRemoteDescription = function () { var A = this; return this._ontrackpoly || (this._ontrackpoly = function (t) { t.stream.addEventListener("addtrack", function (r) { var i = void 0; i = e.RTCPeerConnection.prototype.getReceivers ? A.getReceivers().find(function (e) { return e.track && e.track.id === r.track.id }) : { "track": r.track }; var o = new Event("track"); o.track = r.track, o.receiver = i, o.transceiver = { "receiver": i }, o.streams = [t.stream], A.dispatchEvent(o) }), t.stream.getTracks().forEach(function (r) { var i = void 0; i = e.RTCPeerConnection.prototype.getReceivers ? A.getReceivers().find(function (e) { return e.track && e.track.id === r.id }) : { "track": r }; var o = new Event("track"); o.track = r, o.receiver = i, o.transceiver = { "receiver": i }, o.streams = [t.stream], A.dispatchEvent(o) }) }, this.addEventListener("addstream", this._ontrackpoly)), t.apply(this, arguments) } } }, A.shimGetSendersWithDtmf = function C(e) { if ("object" === (void 0 === e ? "undefined" : r(e)) && e.RTCPeerConnection && !("getSenders" in e.RTCPeerConnection.prototype) && "createDTMFSender" in e.RTCPeerConnection.prototype) { var t = function e(t, A) { return { "track": A, get "dtmf"() { return void 0 === this._dtmf && (this._dtmf = "audio" === A.kind ? t.createDTMFSender(A) : null), this._dtmf }, "_pc": t } }; if (!e.RTCPeerConnection.prototype.getSenders) { e.RTCPeerConnection.prototype.getSenders = function () { return this._senders = this._senders || [], this._senders.slice() }; var A = e.RTCPeerConnection.prototype.addTrack; e.RTCPeerConnection.prototype.addTrack = function (e, r) { var i = A.apply(this, arguments); return i || (i = t(this, e), this._senders.push(i)), i }; var i = e.RTCPeerConnection.prototype.removeTrack; e.RTCPeerConnection.prototype.removeTrack = function (e) { i.apply(this, arguments); var t = this._senders.indexOf(e); -1 !== t && this._senders.splice(t, 1) } } var o = e.RTCPeerConnection.prototype.addStream; e.RTCPeerConnection.prototype.addStream = function (e) { var A = this; this._senders = this._senders || [], o.apply(this, [e]), e.getTracks().forEach(function (e) { A._senders.push(t(A, e)) }) }; var n = e.RTCPeerConnection.prototype.removeStream; e.RTCPeerConnection.prototype.removeStream = function (e) { var t = this; this._senders = this._senders || [], n.apply(this, [e]), e.getTracks().forEach(function (e) { var A = t._senders.find(function (t) { return t.track === e }); A && t._senders.splice(t._senders.indexOf(A), 1) }) } } else if ("object" === (void 0 === e ? "undefined" : r(e)) && e.RTCPeerConnection && "getSenders" in e.RTCPeerConnection.prototype && "createDTMFSender" in e.RTCPeerConnection.prototype && e.RTCRtpSender && !("dtmf" in e.RTCRtpSender.prototype)) { var s = e.RTCPeerConnection.prototype.getSenders; e.RTCPeerConnection.prototype.getSenders = function () { var e = this, t = s.apply(this, []); return t.forEach(function (t) { return t._pc = e }), t }, Object.defineProperty(e.RTCRtpSender.prototype, "dtmf", { "get": function get() { return void 0 === this._dtmf && (this._dtmf = "audio" === this.track.kind ? this._pc.createDTMFSender(this.track) : null), this._dtmf } }) } }, A.shimGetStats = function I(e) { if (e.RTCPeerConnection) { var t = e.RTCPeerConnection.prototype.getStats; e.RTCPeerConnection.prototype.getStats = function (e, A, r) { var i = this, o = arguments; if (arguments.length > 0 && "function" == typeof e) return t.apply(this, arguments); if (0 === t.length && (0 === arguments.length || "function" != typeof arguments[0])) return t.apply(this, []); var n = function n(e) { var t = {}; return e.result().forEach(function (e) { var A = { "id": e.id, "timestamp": e.timestamp, "type": { "localcandidate": "local-candidate", "remotecandidate": "remote-candidate" }[e.type] || e.type }; e.names().forEach(function (t) { A[t] = e.stat(t) }), t[A.id] = A }), t }, s = function s(e) { return new Map(Object.keys(e).map(function (t) { return [t, e[t]] })) }; return arguments.length >= 2 ? t.apply(this, [function (e) { o[1](s(n(e))) }, arguments[0]]) : new Promise(function (e, A) { t.apply(i, [function (t) { e(s(n(t))) }, A]) }).then(A, r) } } }, A.shimSenderReceiverGetStats = function c(e) { if ("object" === (void 0 === e ? "undefined" : r(e)) && e.RTCPeerConnection && e.RTCRtpSender && e.RTCRtpReceiver) { if (!("getStats" in e.RTCRtpSender.prototype)) { var t = e.RTCPeerConnection.prototype.getSenders; t && (e.RTCPeerConnection.prototype.getSenders = function () { var e = this, A = t.apply(this, []); return A.forEach(function (t) { return t._pc = e }), A }); var A = e.RTCPeerConnection.prototype.addTrack; A && (e.RTCPeerConnection.prototype.addTrack = function () { var e = A.apply(this, arguments); return e._pc = this, e }), e.RTCRtpSender.prototype.getStats = function () { var e = this; return this._pc.getStats().then(function (t) { return n.filterStats(t, e.track, !0) }) } } if (!("getStats" in e.RTCRtpReceiver.prototype)) { var i = e.RTCPeerConnection.prototype.getReceivers; i && (e.RTCPeerConnection.prototype.getReceivers = function () { var e = this, t = i.apply(this, []); return t.forEach(function (t) { return t._pc = e }), t }), n.wrapPeerConnectionEvent(e, "track", function (e) { return e.receiver._pc = e.srcElement, e }), e.RTCRtpReceiver.prototype.getStats = function () { var e = this; return this._pc.getStats().then(function (t) { return n.filterStats(t, e.track, !1) }) } } if ("getStats" in e.RTCRtpSender.prototype && "getStats" in e.RTCRtpReceiver.prototype) { var o = e.RTCPeerConnection.prototype.getStats; e.RTCPeerConnection.prototype.getStats = function () { if (arguments.length > 0 && arguments[0] instanceof e.MediaStreamTrack) { var t = arguments[0], A = void 0, r = void 0, i = void 0; return this.getSenders().forEach(function (e) { e.track === t && (A ? i = !0 : A = e) }), this.getReceivers().forEach(function (e) { return e.track === t && (r ? i = !0 : r = e), e.track === t }), i || A && r ? Promise.reject(new DOMException("There are more than one sender or receiver for the track.", "InvalidAccessError")) : A ? A.getStats() : r ? r.getStats() : Promise.reject(new DOMException("There is no sender or receiver for the track.", "InvalidAccessError")) } return o.apply(this, arguments) } } } }, A.shimAddTrackRemoveTrackWithNative = E, A.shimAddTrackRemoveTrack = function u(e) { if (e.RTCPeerConnection) { var t = n.detectBrowser(e); if (e.RTCPeerConnection.prototype.addTrack && t.version >= 65) return E(e); var A = e.RTCPeerConnection.prototype.getLocalStreams; e.RTCPeerConnection.prototype.getLocalStreams = function () { var e = this, t = A.apply(this); return this._reverseStreams = this._reverseStreams || {}, t.map(function (t) { return e._reverseStreams[t.id] }) }; var r = e.RTCPeerConnection.prototype.addStream; e.RTCPeerConnection.prototype.addStream = function (t) { var A = this; if (this._streams = this._streams || {}, this._reverseStreams = this._reverseStreams || {}, t.getTracks().forEach(function (e) { if (A.getSenders().find(function (t) { return t.track === e })) throw new DOMException("Track already exists.", "InvalidAccessError") }), !this._reverseStreams[t.id]) { var i = new e.MediaStream(t.getTracks()); this._streams[t.id] = i, this._reverseStreams[i.id] = t, t = i } r.apply(this, [t]) }; var i = e.RTCPeerConnection.prototype.removeStream; e.RTCPeerConnection.prototype.removeStream = function (e) { this._streams = this._streams || {}, this._reverseStreams = this._reverseStreams || {}, i.apply(this, [this._streams[e.id] || e]), delete this._reverseStreams[this._streams[e.id] ? this._streams[e.id].id : e.id], delete this._streams[e.id] }, e.RTCPeerConnection.prototype.addTrack = function (t, A) { var r = this; if ("closed" === this.signalingState) throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.", "InvalidStateError"); var i = [].slice.call(arguments, 1); if (1 !== i.length || !i[0].getTracks().find(function (e) { return e === t })) throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.", "NotSupportedError"); if (this.getSenders().find(function (e) { return e.track === t })) throw new DOMException("Track already exists.", "InvalidAccessError"); this._streams = this._streams || {}, this._reverseStreams = this._reverseStreams || {}; var o = this._streams[A.id]; if (o) o.addTrack(t), Promise.resolve().then(function () { r.dispatchEvent(new Event("negotiationneeded")) }); else { var n = new e.MediaStream([t]); this._streams[A.id] = n, this._reverseStreams[n.id] = A, this.addStream(n) } return this.getSenders().find(function (e) { return e.track === t }) }, ["createOffer", "createAnswer"].forEach(function (t) { var A = e.RTCPeerConnection.prototype[t]; e.RTCPeerConnection.prototype[t] = function () { var e = this, t = arguments; return arguments.length && "function" == typeof arguments[0] ? A.apply(this, [function (A) { var r = a(e, A); t[0].apply(null, [r]) }, function (e) { t[1] && t[1].apply(null, e) }, arguments[2]]) : A.apply(this, arguments).then(function (t) { return a(e, t) }) } }); var o = e.RTCPeerConnection.prototype.setLocalDescription; e.RTCPeerConnection.prototype.setLocalDescription = function () { return arguments.length && arguments[0].type ? (arguments[0] = function g(e, t) { var A = t.sdp; return Object.keys(e._reverseStreams || []).forEach(function (t) { var r = e._reverseStreams[t], i = e._streams[r.id]; A = A.replace(new RegExp(r.id, "g"), i.id) }), new RTCSessionDescription({ "type": t.type, "sdp": A }) }(this, arguments[0]), o.apply(this, arguments)) : o.apply(this, arguments) }; var s = Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype, "localDescription"); Object.defineProperty(e.RTCPeerConnection.prototype, "localDescription", { "get": function get() { var e = s.get.apply(this); return "" === e.type ? e : a(this, e) } }), e.RTCPeerConnection.prototype.removeTrack = function (e) { var t = this; if ("closed" === this.signalingState) throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.", "InvalidStateError"); if (!e._pc) throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.", "TypeError"); if (e._pc !== this) throw new DOMException("Sender was not created by this connection.", "InvalidAccessError"); this._streams = this._streams || {}; var A = void 0; Object.keys(this._streams).forEach(function (r) { t._streams[r].getTracks().find(function (t) { return e.track === t }) && (A = t._streams[r]) }), A && (1 === A.getTracks().length ? this.removeStream(this._reverseStreams[A.id]) : A.removeTrack(e.track), this.dispatchEvent(new Event("negotiationneeded"))) } } function a(e, t) { var A = t.sdp; return Object.keys(e._reverseStreams || []).forEach(function (t) { var r = e._reverseStreams[t]; A = A.replace(new RegExp(e._streams[r.id].id, "g"), r.id) }), new RTCSessionDescription({ "type": t.type, "sdp": A }) } }, A.shimPeerConnection = function l(e) { if (!e.RTCPeerConnection && e.webkitRTCPeerConnection && (e.RTCPeerConnection = e.webkitRTCPeerConnection), e.RTCPeerConnection) { ["setLocalDescription", "setRemoteDescription", "addIceCandidate"].forEach(function (t) { var A = e.RTCPeerConnection.prototype[t]; e.RTCPeerConnection.prototype[t] = function () { return arguments[0] = new ("addIceCandidate" === t ? e.RTCIceCandidate : e.RTCSessionDescription)(arguments[0]), A.apply(this, arguments) } }); var t = e.RTCPeerConnection.prototype.addIceCandidate; e.RTCPeerConnection.prototype.addIceCandidate = function () { return arguments[0] ? t.apply(this, arguments) : (arguments[1] && arguments[1].apply(null), Promise.resolve()) } } }, A.fixNegotiationNeeded = function d(e) { n.wrapPeerConnectionEvent(e, "negotiationneeded", function (e) { if ("stable" === e.target.signalingState) return e }) }; var n = function s(e) { if (e && e.__esModule) return e; var t = {}; if (null != e) for (var A in e) Object.prototype.hasOwnProperty.call(e, A) && (t[A] = e[A]); return t.default = e, t }(e("../utils.js")); function E(e) { e.RTCPeerConnection.prototype.getLocalStreams = function () { var e = this; return this._shimmedLocalStreams = this._shimmedLocalStreams || {}, Object.keys(this._shimmedLocalStreams).map(function (t) { return e._shimmedLocalStreams[t][0] }) }; var t = e.RTCPeerConnection.prototype.addTrack; e.RTCPeerConnection.prototype.addTrack = function (e, A) { if (!A) return t.apply(this, arguments); this._shimmedLocalStreams = this._shimmedLocalStreams || {}; var r = t.apply(this, arguments); return this._shimmedLocalStreams[A.id] ? -1 === this._shimmedLocalStreams[A.id].indexOf(r) && this._shimmedLocalStreams[A.id].push(r) : this._shimmedLocalStreams[A.id] = [A, r], r }; var A = e.RTCPeerConnection.prototype.addStream; e.RTCPeerConnection.prototype.addStream = function (e) { var t = this; this._shimmedLocalStreams = this._shimmedLocalStreams || {}, e.getTracks().forEach(function (e) { if (t.getSenders().find(function (t) { return t.track === e })) throw new DOMException("Track already exists.", "InvalidAccessError") }); var r = this.getSenders(); A.apply(this, arguments); var i = this.getSenders().filter(function (e) { return -1 === r.indexOf(e) }); this._shimmedLocalStreams[e.id] = [e].concat(i) }; var r = e.RTCPeerConnection.prototype.removeStream; e.RTCPeerConnection.prototype.removeStream = function (e) { return this._shimmedLocalStreams = this._shimmedLocalStreams || {}, delete this._shimmedLocalStreams[e.id], r.apply(this, arguments) }; var i = e.RTCPeerConnection.prototype.removeTrack; e.RTCPeerConnection.prototype.removeTrack = function (e) { var t = this; return this._shimmedLocalStreams = this._shimmedLocalStreams || {}, e && Object.keys(this._shimmedLocalStreams).forEach(function (A) { var r = t._shimmedLocalStreams[A].indexOf(e); -1 !== r && t._shimmedLocalStreams[A].splice(r, 1), 1 === t._shimmedLocalStreams[A].length && delete t._shimmedLocalStreams[A] }), i.apply(this, arguments) } } }, { "../utils.js": 15, "./getdisplaymedia": 4, "./getusermedia": 5 }], "4": [function (e, t, A) { "use strict"; Object.defineProperty(A, "__esModule", { "value": !0 }), A.shimGetDisplayMedia = function i(e, t) { e.navigator.mediaDevices && "getDisplayMedia" in e.navigator.mediaDevices || e.navigator.mediaDevices && ("function" == typeof t ? e.navigator.mediaDevices.getDisplayMedia = function (A) { return t(A).then(function (t) { var r = A.video && A.video.width, i = A.video && A.video.height; return A.video = { "mandatory": { "chromeMediaSource": "desktop", "chromeMediaSourceId": t, "maxFrameRate": A.video && A.video.frameRate || 3 } }, r && (A.video.mandatory.maxWidth = r), i && (A.video.mandatory.maxHeight = i), e.navigator.mediaDevices.getUserMedia(A) }) } : console.error("shimGetDisplayMedia: getSourceId argument is not a function")) } }, {}], "5": [function (e, t, A) { "use strict"; Object.defineProperty(A, "__esModule", { "value": !0 }); var r = "function" == typeof Symbol && "symbol" == _typeof(Symbol.iterator) ? function (e) { return void 0 === e ? "undefined" : _typeof(e) } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : void 0 === e ? "undefined" : _typeof(e) }; A.shimGetUserMedia = function s(e) { var t = e && e.navigator; if (t.mediaDevices) { var A = i.detectBrowser(e), o = function o(e) { if ("object" !== (void 0 === e ? "undefined" : r(e)) || e.mandatory || e.optional) return e; var t = {}; return Object.keys(e).forEach(function (A) { if ("require" !== A && "advanced" !== A && "mediaSource" !== A) { var i = "object" === r(e[A]) ? e[A] : { "ideal": e[A] }; void 0 !== i.exact && "number" == typeof i.exact && (i.min = i.max = i.exact); var o = function o(e, t) { return e ? e + t.charAt(0).toUpperCase() + t.slice(1) : "deviceId" === t ? "sourceId" : t }; if (void 0 !== i.ideal) { t.optional = t.optional || []; var n = {}; "number" == typeof i.ideal ? (n[o("min", A)] = i.ideal, t.optional.push(n), (n = {})[o("max", A)] = i.ideal, t.optional.push(n)) : (n[o("", A)] = i.ideal, t.optional.push(n)) } void 0 !== i.exact && "number" != typeof i.exact ? (t.mandatory = t.mandatory || {}, t.mandatory[o("", A)] = i.exact) : ["min", "max"].forEach(function (e) { void 0 !== i[e] && (t.mandatory = t.mandatory || {}, t.mandatory[o(e, A)] = i[e]) }) } }), e.advanced && (t.optional = (t.optional || []).concat(e.advanced)), t }, c = function s(e, i) { if (A.version >= 61) return i(e); if ((e = JSON.parse(JSON.stringify(e))) && "object" === r(e.audio)) { var s = function s(e, t, A) { t in e && !(A in e) && (e[A] = e[t], delete e[t]) }; s((e = JSON.parse(JSON.stringify(e))).audio, "autoGainControl", "googAutoGainControl"), s(e.audio, "noiseSuppression", "googNoiseSuppression"), e.audio = o(e.audio) } if (e && "object" === r(e.video)) { var a = e.video.facingMode; a = a && ("object" === (void 0 === a ? "undefined" : r(a)) ? a : { "ideal": a }); var c = A.version < 66; if (a && ("user" === a.exact || "environment" === a.exact || "user" === a.ideal || "environment" === a.ideal) && (!t.mediaDevices.getSupportedConstraints || !t.mediaDevices.getSupportedConstraints().facingMode || c)) { delete e.video.facingMode; var g = void 0; if ("environment" === a.exact || "environment" === a.ideal ? g = ["back", "rear"] : "user" !== a.exact && "user" !== a.ideal || (g = ["front"]), g) return t.mediaDevices.enumerateDevices().then(function (t) { var A = (t = t.filter(function (e) { return "videoinput" === e.kind })).find(function (e) { return g.some(function (t) { return e.label.toLowerCase().includes(t) }) }); return !A && t.length && g.includes("back") && (A = t[t.length - 1]), A && (e.video.deviceId = a.exact ? { "exact": A.deviceId } : { "ideal": A.deviceId }), e.video = o(e.video), n("chrome: " + JSON.stringify(e)), i(e) }) } e.video = o(e.video) } return n("chrome: " + JSON.stringify(e)), i(e) }, u = function a(e) { return A.version >= 64 ? e : { "name": { "PermissionDeniedError": "NotAllowedError", "PermissionDismissedError": "NotAllowedError", "InvalidStateError": "NotAllowedError", "DevicesNotFoundError": "NotFoundError", "ConstraintNotSatisfiedError": "OverconstrainedError", "TrackStartError": "NotReadableError", "MediaDeviceFailedDueToShutdown": "NotAllowedError", "MediaDeviceKillSwitchOn": "NotAllowedError", "TabCaptureError": "AbortError", "ScreenCaptureError": "AbortError", "DeviceCaptureError": "AbortError" }[e.name] || e.name, "message": e.message, "constraint": e.constraint || e.constraintName, "toString": function toString() { return this.name + (this.message && ": ") + this.message } } }; if (t.getUserMedia = function g(e, A, r) { c(e, function (e) { t.webkitGetUserMedia(e, A, function (e) { r && r(u(e)) }) }) }.bind(t), t.mediaDevices.getUserMedia) { var l = t.mediaDevices.getUserMedia.bind(t.mediaDevices); t.mediaDevices.getUserMedia = function (e) { return c(e, function (e) { return l(e).then(function (t) { if (e.audio && !t.getAudioTracks().length || e.video && !t.getVideoTracks().length) throw t.getTracks().forEach(function (e) { e.stop() }), new DOMException("", "NotFoundError"); return t }, function (e) { return Promise.reject(u(e)) }) }) } } } }; var i = function o(e) { if (e && e.__esModule) return e; var t = {}; if (null != e) for (var A in e) Object.prototype.hasOwnProperty.call(e, A) && (t[A] = e[A]); return t.default = e, t }(e("../utils.js")); var n = i.log }, { "../utils.js": 15 }], "6": [function (e, A, r) { "use strict"; Object.defineProperty(r, "__esModule", { "value": !0 }); var i = "function" == typeof Symbol && "symbol" == _typeof(Symbol.iterator) ? function (e) { return void 0 === e ? "undefined" : _typeof(e) } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : void 0 === e ? "undefined" : _typeof(e) }; r.shimRTCIceCandidate = function a(e) { if (e.RTCIceCandidate && !(e.RTCIceCandidate && "foundation" in e.RTCIceCandidate.prototype)) { var t = e.RTCIceCandidate; e.RTCIceCandidate = function (e) { if ("object" === (void 0 === e ? "undefined" : i(e)) && e.candidate && 0 === e.candidate.indexOf("a=") && ((e = JSON.parse(JSON.stringify(e))).candidate = e.candidate.substr(2)), e.candidate && e.candidate.length) { var A = new t(e), r = o.default.parseCandidate(e.candidate), n = Object.assign(A, r); return n.toJSON = function () { return { "candidate": n.candidate, "sdpMid": n.sdpMid, "sdpMLineIndex": n.sdpMLineIndex, "usernameFragment": n.usernameFragment } }, n } return new t(e) }, e.RTCIceCandidate.prototype = t.prototype, u.wrapPeerConnectionEvent(e, "icecandidate", function (t) { return t.candidate && Object.defineProperty(t, "candidate", { "value": new e.RTCIceCandidate(t.candidate), "writable": "false" }), t }) } }, r.shimMaxMessageSize = function g(e) { if (!e.RTCSctpTransport && e.RTCPeerConnection) { var t = u.detectBrowser(e); "sctp" in e.RTCPeerConnection.prototype || Object.defineProperty(e.RTCPeerConnection.prototype, "sctp", { "get": function get() { return void 0 === this._sctp ? null : this._sctp } }); var A = function t(e) { if (!e || !e.sdp) return !1; var A = o.default.splitSections(e.sdp); return A.shift(), A.some(function (e) { var t = o.default.parseMLine(e); return t && "application" === t.kind && -1 !== t.protocol.indexOf("SCTP") }) }, r = function n(e) { var A = 65536; return "firefox" === t.browser && (A = t.version < 57 ? -1 === e ? 16384 : 2147483637 : t.version < 60 ? 57 === t.version ? 65535 : 65536 : 2147483637), A }, i = function s(e, A) { var r = 65536; "firefox" === t.browser && 57 === t.version && (r = 65535); var i = o.default.matchPrefix(e.sdp, "a=max-message-size:"); return i.length > 0 ? r = parseInt(i[0].substr(19), 10) : "firefox" === t.browser && -1 !== A && (r = 2147483637), r }, a = e.RTCPeerConnection.prototype.setRemoteDescription; e.RTCPeerConnection.prototype.setRemoteDescription = function () { if (this._sctp = null, A(arguments[0])) { var e = function i(e) { var t = e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/); if (null === t || t.length < 2) return -1; var A = parseInt(t[1], 10); return A != A ? -1 : A }(arguments[0]), t = r(e), o = i(arguments[0], e), n = void 0; n = 0 === t && 0 === o ? Number.POSITIVE_INFINITY : 0 === t || 0 === o ? Math.max(t, o) : Math.min(t, o); var s = {}; Object.defineProperty(s, "maxMessageSize", { "get": function get() { return n } }), this._sctp = s } return a.apply(this, arguments) } } }, r.shimSendThrowTypeError = function C(e) { if (e.RTCPeerConnection && "createDataChannel" in e.RTCPeerConnection.prototype) { var A = e.RTCPeerConnection.prototype.createDataChannel; e.RTCPeerConnection.prototype.createDataChannel = function () { var e = A.apply(this, arguments); return t(e, this), e }, u.wrapPeerConnectionEvent(e, "datachannel", function (e) { return t(e.channel, e.target), e }) } function t(e, t) { var A = e.send; e.send = function () { var r = arguments[0]; if ("open" === e.readyState && t.sctp && (r.length || r.size || r.byteLength) > t.sctp.maxMessageSize) throw new TypeError("Message too large (can send a maximum of " + t.sctp.maxMessageSize + " bytes)"); return A.apply(e, arguments) } } }, r.shimConnectionState = function I(e) { if (e.RTCPeerConnection && !("connectionState" in e.RTCPeerConnection.prototype)) { var t = e.RTCPeerConnection.prototype; Object.defineProperty(t, "connectionState", { "get": function get() { return { "completed": "connected", "checking": "connecting" }[this.iceConnectionState] || this.iceConnectionState }, "enumerable": !0, "configurable": !0 }), Object.defineProperty(t, "onconnectionstatechange", { "get": function get() { return this._onconnectionstatechange || null }, "set": function set(e) { this._onconnectionstatechange && (this.removeEventListener("connectionstatechange", this._onconnectionstatechange), delete this._onconnectionstatechange), e && this.addEventListener("connectionstatechange", this._onconnectionstatechange = e) }, "enumerable": !0, "configurable": !0 }), ["setLocalDescription", "setRemoteDescription"].forEach(function (e) { var A = t[e]; t[e] = function () { return this._connectionstatechangepoly || (this._connectionstatechangepoly = function (e) { var t = e.target; if (t._lastConnectionState !== t.connectionState) { t._lastConnectionState = t.connectionState; var A = new Event("connectionstatechange", e); t.dispatchEvent(A) } return e }, this.addEventListener("iceconnectionstatechange", this._connectionstatechangepoly)), A.apply(this, arguments) } }) } }, r.removeAllowExtmapMixed = function c(e) { if (e.RTCPeerConnection) { var t = u.detectBrowser(e); if (!("chrome" === t.browser && t.version >= 71)) { var A = e.RTCPeerConnection.prototype.setRemoteDescription; e.RTCPeerConnection.prototype.setRemoteDescription = function (e) { return e && e.sdp && -1 !== e.sdp.indexOf("\na=extmap-allow-mixed") && (e.sdp = e.sdp.split("\n").filter(function (e) { return "a=extmap-allow-mixed" !== e.trim() }).join("\n")), A.apply(this, arguments) } } } }; var o = function s(e) { return e && e.__esModule ? e : { "default": e } }(e("sdp")), u = function n(e) { if (e && e.__esModule) return e; var t = {}; if (null != e) for (var A in e) Object.prototype.hasOwnProperty.call(e, A) && (t[A] = e[A]); return t.default = e, t }(e("./utils")) }, { "./utils": 15, "sdp": 17 }], "7": [function (e, t, A) { "use strict"; Object.defineProperty(A, "__esModule", { "value": !0 }), A.shimGetDisplayMedia = A.shimGetUserMedia = void 0; var r = e("./getusermedia"); Object.defineProperty(A, "shimGetUserMedia", { "enumerable": !0, "get": function get() { return r.shimGetUserMedia } }); var i = e("./getdisplaymedia"); Object.defineProperty(A, "shimGetDisplayMedia", { "enumerable": !0, "get": function get() { return i.shimGetDisplayMedia } }), A.shimPeerConnection = function C(e) { var t = o.detectBrowser(e); if (e.RTCIceGatherer && (e.RTCIceCandidate || (e.RTCIceCandidate = function (e) { return e }), e.RTCSessionDescription || (e.RTCSessionDescription = function (e) { return e }), t.version < 15025)) { var A = Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype, "enabled"); Object.defineProperty(e.MediaStreamTrack.prototype, "enabled", { "set": function set(e) { A.set.call(this, e); var t = new Event("enabled"); t.enabled = e, this.dispatchEvent(t) } }) } e.RTCRtpSender && !("dtmf" in e.RTCRtpSender.prototype) && Object.defineProperty(e.RTCRtpSender.prototype, "dtmf", { "get": function get() { return void 0 === this._dtmf && ("audio" === this.track.kind ? this._dtmf = new e.RTCDtmfSender(this) : "video" === this.track.kind && (this._dtmf = null)), this._dtmf } }), e.RTCDtmfSender && !e.RTCDTMFSender && (e.RTCDTMFSender = e.RTCDtmfSender); var r = (0, s.default)(e, t.version); e.RTCPeerConnection = function (e) { return e && e.iceServers && (e.iceServers = (0, n.filterIceServers)(e.iceServers, t.version), o.log("ICE servers after filtering:", e.iceServers)), new r(e) }, e.RTCPeerConnection.prototype = r.prototype }, A.shimReplaceTrack = function I(e) { e.RTCRtpSender && !("replaceTrack" in e.RTCRtpSender.prototype) && (e.RTCRtpSender.prototype.replaceTrack = e.RTCRtpSender.prototype.setTrack) }; var o = function g(e) { if (e && e.__esModule) return e; var t = {}; if (null != e) for (var A in e) Object.prototype.hasOwnProperty.call(e, A) && (t[A] = e[A]); return t.default = e, t }(e("../utils")), n = e("./filtericeservers"), s = function a(e) { return e && e.__esModule ? e : { "default": e } }(e("rtcpeerconnection-shim")) }, { "../utils": 15, "./filtericeservers": 8, "./getdisplaymedia": 9, "./getusermedia": 10, "rtcpeerconnection-shim": 16 }], "8": [function (e, t, A) { "use strict"; Object.defineProperty(A, "__esModule", { "value": !0 }), A.filterIceServers = function o(e, t) { var A = !1; return (e = JSON.parse(JSON.stringify(e))).filter(function (e) { if (e && (e.urls || e.url)) { var t = e.urls || e.url; e.url && !e.urls && i.deprecated("RTCIceServer.url", "RTCIceServer.urls"); var r = "string" == typeof t; return r && (t = [t]), t = t.filter(function (e) { if (0 === e.indexOf("stun:")) return !1; var t = e.startsWith("turn") && !e.startsWith("turn:[") && e.includes("transport=udp"); return t && !A ? (A = !0, !0) : t && !A }), delete e.url, e.urls = r ? t[0] : t, !!t.length } }) }; var i = function r(e) { if (e && e.__esModule) return e; var t = {}; if (null != e) for (var A in e) Object.prototype.hasOwnProperty.call(e, A) && (t[A] = e[A]); return t.default = e, t }(e("../utils")) }, { "../utils": 15 }], "9": [function (e, t, A) { "use strict"; Object.defineProperty(A, "__esModule", { "value": !0 }), A.shimGetDisplayMedia = function i(e) { "getDisplayMedia" in e.navigator && e.navigator.mediaDevices && (e.navigator.mediaDevices && "getDisplayMedia" in e.navigator.mediaDevices || (e.navigator.mediaDevices.getDisplayMedia = e.navigator.getDisplayMedia.bind(e.navigator))) } }, {}], "10": [function (e, t, A) { "use strict"; Object.defineProperty(A, "__esModule", { "value": !0 }), A.shimGetUserMedia = function i(e) { var t = e && e.navigator, A = t.mediaDevices.getUserMedia.bind(t.mediaDevices); t.mediaDevices.getUserMedia = function (e) { return A(e).catch(function (e) { return Promise.reject(function t(e) { return { "name": { "PermissionDeniedError": "NotAllowedError" }[e.name] || e.name, "message": e.message, "constraint": e.constraint, "toString": function toString() { return this.name } } }(e)) }) } } }, {}], "11": [function (e, t, A) { "use strict"; Object.defineProperty(A, "__esModule", { "value": !0 }), A.shimGetDisplayMedia = A.shimGetUserMedia = void 0; var r = "function" == typeof Symbol && "symbol" == _typeof(Symbol.iterator) ? function (e) { return void 0 === e ? "undefined" : _typeof(e) } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : void 0 === e ? "undefined" : _typeof(e) }, i = e("./getusermedia"); Object.defineProperty(A, "shimGetUserMedia", { "enumerable": !0, "get": function get() { return i.shimGetUserMedia } }); var o = e("./getdisplaymedia"); Object.defineProperty(A, "shimGetDisplayMedia", { "enumerable": !0, "get": function get() { return o.shimGetDisplayMedia } }), A.shimOnTrack = function a(e) { "object" === (void 0 === e ? "undefined" : r(e)) && e.RTCTrackEvent && "receiver" in e.RTCTrackEvent.prototype && !("transceiver" in e.RTCTrackEvent.prototype) && Object.defineProperty(e.RTCTrackEvent.prototype, "transceiver", { "get": function get() { return { "receiver": this.receiver } } }) }, A.shimPeerConnection = function g(e) { var t = n.detectBrowser(e); if ("object" === (void 0 === e ? "undefined" : r(e)) && (e.RTCPeerConnection || e.mozRTCPeerConnection)) { !e.RTCPeerConnection && e.mozRTCPeerConnection && (e.RTCPeerConnection = e.mozRTCPeerConnection), ["setLocalDescription", "setRemoteDescription", "addIceCandidate"].forEach(function (t) { var A = e.RTCPeerConnection.prototype[t]; e.RTCPeerConnection.prototype[t] = function () { return arguments[0] = new ("addIceCandidate" === t ? e.RTCIceCandidate : e.RTCSessionDescription)(arguments[0]), A.apply(this, arguments) } }); var A = e.RTCPeerConnection.prototype.addIceCandidate; e.RTCPeerConnection.prototype.addIceCandidate = function () { return arguments[0] ? A.apply(this, arguments) : (arguments[1] && arguments[1].apply(null), Promise.resolve()) }; var i = { "inboundrtp": "inbound-rtp", "outboundrtp": "outbound-rtp", "candidatepair": "candidate-pair", "localcandidate": "local-candidate", "remotecandidate": "remote-candidate" }, o = e.RTCPeerConnection.prototype.getStats; e.RTCPeerConnection.prototype.getStats = function (e, A, r) { return o.apply(this, [e || null]).then(function (e) { if (t.version < 53 && !A) try { e.forEach(function (e) { e.type = i[e.type] || e.type }) } catch (t) { if ("TypeError" !== t.name) throw t; e.forEach(function (t, A) { e.set(A, Object.assign({}, t, { "type": i[t.type] || t.type })) }) } return e }).then(A, r) } } }, A.shimSenderGetStats = function C(e) { if ("object" === (void 0 === e ? "undefined" : r(e)) && e.RTCPeerConnection && e.RTCRtpSender && (!e.RTCRtpSender || !("getStats" in e.RTCRtpSender.prototype))) { var t = e.RTCPeerConnection.prototype.getSenders; t && (e.RTCPeerConnection.prototype.getSenders = function () { var e = this, A = t.apply(this, []); return A.forEach(function (t) { return t._pc = e }), A }); var A = e.RTCPeerConnection.prototype.addTrack; A && (e.RTCPeerConnection.prototype.addTrack = function () { var e = A.apply(this, arguments); return e._pc = this, e }), e.RTCRtpSender.prototype.getStats = function () { return this.track ? this._pc.getStats(this.track) : Promise.resolve(new Map) } } }, A.shimReceiverGetStats = function I(e) { if ("object" === (void 0 === e ? "undefined" : r(e)) && e.RTCPeerConnection && e.RTCRtpSender && (!e.RTCRtpSender || !("getStats" in e.RTCRtpReceiver.prototype))) { var t = e.RTCPeerConnection.prototype.getReceivers; t && (e.RTCPeerConnection.prototype.getReceivers = function () { var e = this, A = t.apply(this, []); return A.forEach(function (t) { return t._pc = e }), A }), n.wrapPeerConnectionEvent(e, "track", function (e) { return e.receiver._pc = e.srcElement, e }), e.RTCRtpReceiver.prototype.getStats = function () { return this._pc.getStats(this.track) } } }, A.shimRemoveStream = function c(e) { e.RTCPeerConnection && !("removeStream" in e.RTCPeerConnection.prototype) && (e.RTCPeerConnection.prototype.removeStream = function (e) { var t = this; n.deprecated("removeStream", "removeTrack"), this.getSenders().forEach(function (A) { A.track && e.getTracks().includes(A.track) && t.removeTrack(A) }) }) }, A.shimRTCDataChannel = function E(e) { e.DataChannel && !e.RTCDataChannel && (e.RTCDataChannel = e.DataChannel) }; var n = function s(e) { if (e && e.__esModule) return e; var t = {}; if (null != e) for (var A in e) Object.prototype.hasOwnProperty.call(e, A) && (t[A] = e[A]); return t.default = e, t }(e("../utils")) }, { "../utils": 15, "./getdisplaymedia": 12, "./getusermedia": 13 }], "12": [function (e, t, A) { "use strict"; Object.defineProperty(A, "__esModule", { "value": !0 }), A.shimGetDisplayMedia = function i(e, t) { e.navigator.mediaDevices && "getDisplayMedia" in e.navigator.mediaDevices || e.navigator.mediaDevices && (e.navigator.mediaDevices.getDisplayMedia = function (A) { if (!A || !A.video) { var r = new DOMException("getDisplayMedia without video constraints is undefined"); return r.name = "NotFoundError", r.code = 8, Promise.reject(r) } return !0 === A.video ? A.video = { "mediaSource": t } : A.video.mediaSource = t, e.navigator.mediaDevices.getUserMedia(A) }) } }, {}], "13": [function (e, t, A) { "use strict"; Object.defineProperty(A, "__esModule", { "value": !0 }); var r = "function" == typeof Symbol && "symbol" == _typeof(Symbol.iterator) ? function (e) { return void 0 === e ? "undefined" : _typeof(e) } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : void 0 === e ? "undefined" : _typeof(e) }; A.shimGetUserMedia = function n(e) { var t = i.detectBrowser(e), A = e && e.navigator, o = e && e.MediaStreamTrack; if (A.getUserMedia = function (e, t, r) { i.deprecated("navigator.getUserMedia", "navigator.mediaDevices.getUserMedia"), A.mediaDevices.getUserMedia(e).then(t, r) }, !(t.version > 55 && "autoGainControl" in A.mediaDevices.getSupportedConstraints())) { var n = function n(e, t, A) { t in e && !(A in e) && (e[A] = e[t], delete e[t]) }, s = A.mediaDevices.getUserMedia.bind(A.mediaDevices); if (A.mediaDevices.getUserMedia = function (e) { return "object" === (void 0 === e ? "undefined" : r(e)) && "object" === r(e.audio) && (e = JSON.parse(JSON.stringify(e)), n(e.audio, "autoGainControl", "mozAutoGainControl"), n(e.audio, "noiseSuppression", "mozNoiseSuppression")), s(e) }, o && o.prototype.getSettings) { var a = o.prototype.getSettings; o.prototype.getSettings = function () { var e = a.apply(this, arguments); return n(e, "mozAutoGainControl", "autoGainControl"), n(e, "mozNoiseSuppression", "noiseSuppression"), e } } if (o && o.prototype.applyConstraints) { var c = o.prototype.applyConstraints; o.prototype.applyConstraints = function (e) { return "audio" === this.kind && "object" === (void 0 === e ? "undefined" : r(e)) && (e = JSON.parse(JSON.stringify(e)), n(e, "autoGainControl", "mozAutoGainControl"), n(e, "noiseSuppression", "mozNoiseSuppression")), c.apply(this, [e]) } } } }; var i = function o(e) { if (e && e.__esModule) return e; var t = {}; if (null != e) for (var A in e) Object.prototype.hasOwnProperty.call(e, A) && (t[A] = e[A]); return t.default = e, t }(e("../utils")) }, { "../utils": 15 }], "14": [function (e, t, A) { "use strict"; Object.defineProperty(A, "__esModule", { "value": !0 }); var r = "function" == typeof Symbol && "symbol" == _typeof(Symbol.iterator) ? function (e) { return void 0 === e ? "undefined" : _typeof(e) } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : void 0 === e ? "undefined" : _typeof(e) }; A.shimLocalStreamsAPI = function n(e) { if ("object" === (void 0 === e ? "undefined" : r(e)) && e.RTCPeerConnection) { if ("getLocalStreams" in e.RTCPeerConnection.prototype || (e.RTCPeerConnection.prototype.getLocalStreams = function () { return this._localStreams || (this._localStreams = []), this._localStreams }), !("addStream" in e.RTCPeerConnection.prototype)) { var t = e.RTCPeerConnection.prototype.addTrack; e.RTCPeerConnection.prototype.addStream = function (e) { var A = this; this._localStreams || (this._localStreams = []), this._localStreams.includes(e) || this._localStreams.push(e), e.getTracks().forEach(function (r) { return t.call(A, r, e) }) }, e.RTCPeerConnection.prototype.addTrack = function (e, A) { return A && (this._localStreams ? this._localStreams.includes(A) || this._localStreams.push(A) : this._localStreams = [A]), t.call(this, e, A) } } "removeStream" in e.RTCPeerConnection.prototype || (e.RTCPeerConnection.prototype.removeStream = function (e) { var t = this; this._localStreams || (this._localStreams = []); var A = this._localStreams.indexOf(e); if (-1 !== A) { this._localStreams.splice(A, 1); var r = e.getTracks(); this.getSenders().forEach(function (e) { r.includes(e.track) && t.removeTrack(e) }) } }) } }, A.shimRemoteStreamsAPI = function s(e) { if ("object" === (void 0 === e ? "undefined" : r(e)) && e.RTCPeerConnection && ("getRemoteStreams" in e.RTCPeerConnection.prototype || (e.RTCPeerConnection.prototype.getRemoteStreams = function () { return this._remoteStreams ? this._remoteStreams : [] }), !("onaddstream" in e.RTCPeerConnection.prototype))) { Object.defineProperty(e.RTCPeerConnection.prototype, "onaddstream", { "get": function get() { return this._onaddstream }, "set": function set(e) { var t = this; this._onaddstream && (this.removeEventListener("addstream", this._onaddstream), this.removeEventListener("track", this._onaddstreampoly)), this.addEventListener("addstream", this._onaddstream = e), this.addEventListener("track", this._onaddstreampoly = function (e) { e.streams.forEach(function (e) { if (t._remoteStreams || (t._remoteStreams = []), !t._remoteStreams.includes(e)) { t._remoteStreams.push(e); var A = new Event("addstream"); A.stream = e, t.dispatchEvent(A) } }) }) } }); var t = e.RTCPeerConnection.prototype.setRemoteDescription; e.RTCPeerConnection.prototype.setRemoteDescription = function () { var e = this; return this._onaddstreampoly || this.addEventListener("track", this._onaddstreampoly = function (t) { t.streams.forEach(function (t) { if (e._remoteStreams || (e._remoteStreams = []), !(e._remoteStreams.indexOf(t) >= 0)) { e._remoteStreams.push(t); var A = new Event("addstream"); A.stream = t, e.dispatchEvent(A) } }) }), t.apply(e, arguments) } } }, A.shimCallbacksAPI = function a(e) { if ("object" === (void 0 === e ? "undefined" : r(e)) && e.RTCPeerConnection) { var t = e.RTCPeerConnection.prototype, A = t.createOffer, i = t.createAnswer, o = t.setLocalDescription, n = t.setRemoteDescription, s = t.addIceCandidate; t.createOffer = function (e, t) { var r = A.apply(this, [arguments.length >= 2 ? arguments[2] : arguments[0]]); return t ? (r.then(e, t), Promise.resolve()) : r }, t.createAnswer = function (e, t) { var A = i.apply(this, [arguments.length >= 2 ? arguments[2] : arguments[0]]); return t ? (A.then(e, t), Promise.resolve()) : A }; var c = function a(e, t, A) { var r = o.apply(this, [e]); return A ? (r.then(t, A), Promise.resolve()) : r }; t.setLocalDescription = c, t.setRemoteDescription = c = function a(e, t, A) { var r = n.apply(this, [e]); return A ? (r.then(t, A), Promise.resolve()) : r }, t.addIceCandidate = c = function a(e, t, A) { var r = s.apply(this, [e]); return A ? (r.then(t, A), Promise.resolve()) : r } } }, A.shimGetUserMedia = function g(e) { var t = e && e.navigator; if (t.mediaDevices && t.mediaDevices.getUserMedia) { var A = t.mediaDevices, r = A.getUserMedia.bind(A); t.mediaDevices.getUserMedia = function (e) { return r(C(e)) } } !t.getUserMedia && t.mediaDevices && t.mediaDevices.getUserMedia && (t.getUserMedia = function (e, A, r) { t.mediaDevices.getUserMedia(e).then(A, r) }.bind(t)) }, A.shimConstraints = C, A.shimRTCIceServerUrls = function I(e) { var t = e.RTCPeerConnection; e.RTCPeerConnection = function (e, A) { if (e && e.iceServers) { for (var r = [], o = 0; o < e.iceServers.length; o++) { var n = e.iceServers[o]; !n.hasOwnProperty("urls") && n.hasOwnProperty("url") ? (i.deprecated("RTCIceServer.url", "RTCIceServer.urls"), (n = JSON.parse(JSON.stringify(n))).urls = n.url, delete n.url, r.push(n)) : r.push(e.iceServers[o]) } e.iceServers = r } return new t(e, A) }, e.RTCPeerConnection.prototype = t.prototype, "generateCertificate" in e.RTCPeerConnection && Object.defineProperty(e.RTCPeerConnection, "generateCertificate", { "get": function get() { return t.generateCertificate } }) }, A.shimTrackEventTransceiver = function c(e) { "object" === (void 0 === e ? "undefined" : r(e)) && e.RTCPeerConnection && "receiver" in e.RTCTrackEvent.prototype && !e.RTCTransceiver && Object.defineProperty(e.RTCTrackEvent.prototype, "transceiver", { "get": function get() { return { "receiver": this.receiver } } }) }, A.shimCreateOfferLegacy = function E(e) { var t = e.RTCPeerConnection.prototype.createOffer; e.RTCPeerConnection.prototype.createOffer = function (e) { if (e) { void 0 !== e.offerToReceiveAudio && (e.offerToReceiveAudio = !!e.offerToReceiveAudio); var A = this.getTransceivers().find(function (e) { return "audio" === e.receiver.track.kind }); !1 === e.offerToReceiveAudio && A ? "sendrecv" === A.direction ? A.setDirection ? A.setDirection("sendonly") : A.direction = "sendonly" : "recvonly" === A.direction && (A.setDirection ? A.setDirection("inactive") : A.direction = "inactive") : !0 !== e.offerToReceiveAudio || A || this.addTransceiver("audio"), void 0 !== e.offerToReceiveVideo && (e.offerToReceiveVideo = !!e.offerToReceiveVideo); var r = this.getTransceivers().find(function (e) { return "video" === e.receiver.track.kind }); !1 === e.offerToReceiveVideo && r ? "sendrecv" === r.direction ? r.setDirection ? r.setDirection("sendonly") : r.direction = "sendonly" : "recvonly" === r.direction && (r.setDirection ? r.setDirection("inactive") : r.direction = "inactive") : !0 !== e.offerToReceiveVideo || r || this.addTransceiver("video") } return t.apply(this, arguments) } }; var i = function o(e) { if (e && e.__esModule) return e; var t = {}; if (null != e) for (var A in e) Object.prototype.hasOwnProperty.call(e, A) && (t[A] = e[A]); return t.default = e, t }(e("../utils")); function C(e) { return e && void 0 !== e.video ? Object.assign({}, e, { "video": i.compactObject(e.video) }) : e } }, { "../utils": 15 }], "15": [function (e, t, A) { "use strict"; Object.defineProperty(A, "__esModule", { "value": !0 }); var i = "function" == typeof Symbol && "symbol" == _typeof(Symbol.iterator) ? function (e) { return void 0 === e ? "undefined" : _typeof(e) } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : void 0 === e ? "undefined" : _typeof(e) }; A.extractVersion = s, A.wrapPeerConnectionEvent = function a(e, t, A) { if (e.RTCPeerConnection) { var r = e.RTCPeerConnection.prototype, i = r.addEventListener; r.addEventListener = function (e, r) { if (e !== t) return i.apply(this, arguments); var n = function o(e) { var t = A(e); t && r(t) }; return this._eventMap = this._eventMap || {}, this._eventMap[r] = n, i.apply(this, [e, n]) }; var n = r.removeEventListener; r.removeEventListener = function (e, A) { if (e !== t || !this._eventMap || !this._eventMap[A]) return n.apply(this, arguments); var r = this._eventMap[A]; return delete this._eventMap[A], n.apply(this, [e, r]) }, Object.defineProperty(r, "on" + t, { "get": function get() { return this["_on" + t] }, "set": function set(e) { this["_on" + t] && (this.removeEventListener(t, this["_on" + t]), delete this["_on" + t]), e && this.addEventListener(t, this["_on" + t] = e) }, "enumerable": !0, "configurable": !0 }) } }, A.disableLog = function g(e) { return "boolean" != typeof e ? new Error("Argument type: " + (void 0 === e ? "undefined" : i(e)) + ". Please use a boolean.") : (o = e, e ? "adapter.js logging disabled" : "adapter.js logging enabled") }, A.disableWarnings = function C(e) { return "boolean" != typeof e ? new Error("Argument type: " + (void 0 === e ? "undefined" : i(e)) + ". Please use a boolean.") : (n = !e, "adapter.js deprecation warnings " + (e ? "disabled" : "enabled")) }, A.log = function I() { if ("object" === ("undefined" == typeof window ? "undefined" : i(window))) { if (o) return; "undefined" != typeof console && "function" == typeof console.log && console.log.apply(console, arguments) } }, A.deprecated = function c(e, t) { n && console.warn(e + " is deprecated, please use " + t + " instead.") }, A.detectBrowser = function E(e) { var t = e.navigator, A = { "browser": null, "version": null }; if (void 0 === e || !e.navigator) return A.browser = "Not a browser.", A; if (t.mozGetUserMedia) A.browser = "firefox", A.version = s(t.userAgent, /Firefox\/(\d+)\./, 1); else if (t.webkitGetUserMedia || !1 === e.isSecureContext && e.webkitRTCPeerConnection && !e.RTCIceGatherer) A.browser = "chrome", A.version = s(t.userAgent, /Chrom(e|ium)\/(\d+)\./, 2); else if (t.mediaDevices && t.userAgent.match(/Edge\/(\d+).(\d+)$/)) A.browser = "edge", A.version = s(t.userAgent, /Edge\/(\d+).(\d+)$/, 2); else { if (!e.RTCPeerConnection || !t.userAgent.match(/AppleWebKit\/(\d+)\./)) return A.browser = "Not a supported browser.", A; A.browser = "safari", A.version = s(t.userAgent, /AppleWebKit\/(\d+)\./, 1) } return A }, A.compactObject = function u(e) { return "object" !== (void 0 === e ? "undefined" : i(e)) ? e : Object.keys(e).reduce(function (t, A) { var o = "object" === i(e[A]), n = o ? u(e[A]) : e[A], s = o && !Object.keys(n).length; return void 0 === n || s ? t : Object.assign(t, function r(e, t, A) { return t in e ? Object.defineProperty(e, t, { "value": A, "enumerable": !0, "configurable": !0, "writable": !0 }) : e[t] = A, e }({}, A, n)) }, {}) }, A.walkStats = l, A.filterStats = function d(e, t, A) { var r = A ? "outbound-rtp" : "inbound-rtp", i = new Map; if (null === t) return i; var o = []; return e.forEach(function (e) { "track" === e.type && e.trackIdentifier === t.id && o.push(e) }), o.forEach(function (t) { e.forEach(function (A) { A.type === r && A.trackId === t.id && l(e, A, i) }) }), i }; var o = !0, n = !0; function s(e, t, A) { var r = e.match(t); return r && r.length >= A && parseInt(r[A], 10) } function l(e, t, A) { t && !A.has(t.id) && (A.set(t.id, t), Object.keys(t).forEach(function (r) { r.endsWith("Id") ? l(e, e.get(t[r]), A) : r.endsWith("Ids") && t[r].forEach(function (t) { l(e, e.get(t), A) }) })) } }, {}], "16": [function (e, A, r) { "use strict"; var i = e("sdp"); function o(e, t, A, r, o) { var n = i.writeRtpDescription(e.kind, t); if (n += i.writeIceParameters(e.iceGatherer.getLocalParameters()), n += i.writeDtlsParameters(e.dtlsTransport.getLocalParameters(), "offer" === A ? "actpass" : o || "active"), n += "a=mid:" + e.mid + "\r\n", n += e.rtpSender && e.rtpReceiver ? "a=sendrecv\r\n" : e.rtpSender ? "a=sendonly\r\n" : e.rtpReceiver ? "a=recvonly\r\n" : "a=inactive\r\n", e.rtpSender) { var s = e.rtpSender._initialTrackId || e.rtpSender.track.id; e.rtpSender._initialTrackId = s; var a = "msid:" + (r ? r.id : "-") + " " + s + "\r\n"; n += "a=" + a, n += "a=ssrc:" + e.sendEncodingParameters[0].ssrc + " " + a, e.sendEncodingParameters[0].rtx && (n += "a=ssrc:" + e.sendEncodingParameters[0].rtx.ssrc + " " + a, n += "a=ssrc-group:FID " + e.sendEncodingParameters[0].ssrc + " " + e.sendEncodingParameters[0].rtx.ssrc + "\r\n") } return n += "a=ssrc:" + e.sendEncodingParameters[0].ssrc + " cname:" + i.localCName + "\r\n", e.rtpSender && e.sendEncodingParameters[0].rtx && (n += "a=ssrc:" + e.sendEncodingParameters[0].rtx.ssrc + " cname:" + i.localCName + "\r\n"), n } function s(e, t) { var A = { "codecs": [], "headerExtensions": [], "fecMechanisms": [] }, i = function i(e, t) { e = parseInt(e, 10); for (var A = 0; A < t.length; A++)if (t[A].payloadType === e || t[A].preferredPayloadType === e) return t[A] }, o = function r(e, t, A, o) { var n = i(e.parameters.apt, A), s = i(t.parameters.apt, o); return n && s && n.name.toLowerCase() === s.name.toLowerCase() }; return e.codecs.forEach(function (r) { for (var i = 0; i < t.codecs.length; i++) { var n = t.codecs[i]; if (r.name.toLowerCase() === n.name.toLowerCase() && r.clockRate === n.clockRate) { if ("rtx" === r.name.toLowerCase() && r.parameters && n.parameters.apt && !o(r, n, e.codecs, t.codecs)) continue; (n = JSON.parse(JSON.stringify(n))).numChannels = Math.min(r.numChannels, n.numChannels), A.codecs.push(n), n.rtcpFeedback = n.rtcpFeedback.filter(function (e) { for (var t = 0; t < r.rtcpFeedback.length; t++)if (r.rtcpFeedback[t].type === e.type && r.rtcpFeedback[t].parameter === e.parameter) return !0; return !1 }); break } } }), e.headerExtensions.forEach(function (e) { for (var r = 0; r < t.headerExtensions.length; r++) { var i = t.headerExtensions[r]; if (e.uri === i.uri) { A.headerExtensions.push(i); break } } }), A } function a(e, t, A) { return -1 !== { "offer": { "setLocalDescription": ["stable", "have-local-offer"], "setRemoteDescription": ["stable", "have-remote-offer"] }, "answer": { "setLocalDescription": ["have-remote-offer", "have-local-pranswer"], "setRemoteDescription": ["have-local-offer", "have-remote-pranswer"] } }[t][e].indexOf(A) } function g(e, t) { var A = e.getRemoteCandidates().find(function (e) { return t.foundation === e.foundation && t.ip === e.ip && t.port === e.port && t.priority === e.priority && t.protocol === e.protocol && t.type === e.type }); return A || e.addRemoteCandidate(t), !A } function C(e, t) { var A = new Error(t); return A.name = e, A.code = { "NotSupportedError": 9, "InvalidStateError": 11, "InvalidAccessError": 15, "TypeError": void 0, "OperationError": void 0 }[e], A } A.exports = function (e, A) { function t(t, A) { A.addTrack(t), A.dispatchEvent(new e.MediaStreamTrackEvent("addtrack", { "track": t })) } function I(t, A) { A.removeTrack(t), A.dispatchEvent(new e.MediaStreamTrackEvent("removetrack", { "track": t })) } function c(t, A, r, i) { var o = new Event("track"); o.track = A, o.receiver = r, o.transceiver = { "receiver": r }, o.streams = i, e.setTimeout(function () { t._dispatchEvent("track", o) }) } var r = function E(t) { var r = this, o = document.createDocumentFragment(); if (["addEventListener", "removeEventListener", "dispatchEvent"].forEach(function (e) { r[e] = o[e].bind(o) }), this.canTrickleIceCandidates = null, this.needNegotiation = !1, this.localStreams = [], this.remoteStreams = [], this._localDescription = null, this._remoteDescription = null, this.signalingState = "stable", this.iceConnectionState = "new", this.connectionState = "new", this.iceGatheringState = "new", t = JSON.parse(JSON.stringify(t || {})), this.usingBundle = "max-bundle" === t.bundlePolicy, "negotiate" === t.rtcpMuxPolicy) throw C("NotSupportedError", "rtcpMuxPolicy 'negotiate' is not supported"); switch (t.rtcpMuxPolicy || (t.rtcpMuxPolicy = "require"), t.iceTransportPolicy) { case "all": case "relay": break; default: t.iceTransportPolicy = "all" }switch (t.bundlePolicy) { case "balanced": case "max-compat": case "max-bundle": break; default: t.bundlePolicy = "balanced" }if (t.iceServers = function n(e, t) { var A = !1; return (e = JSON.parse(JSON.stringify(e))).filter(function (e) { if (e && (e.urls || e.url)) { var r = e.urls || e.url; e.url && !e.urls && console.warn("RTCIceServer.url is deprecated! Use urls instead."); var i = "string" == typeof r; return i && (r = [r]), r = r.filter(function (e) { return 0 !== e.indexOf("turn:") || -1 === e.indexOf("transport=udp") || -1 !== e.indexOf("turn:[") || A ? 0 === e.indexOf("stun:") && t >= 14393 && -1 === e.indexOf("?transport=udp") : (A = !0, !0) }), delete e.url, e.urls = i ? r[0] : r, !!r.length } }) }(t.iceServers || [], A), this._iceGatherers = [], t.iceCandidatePoolSize) for (var s = t.iceCandidatePoolSize; s > 0; s--)this._iceGatherers.push(new e.RTCIceGatherer({ "iceServers": t.iceServers, "gatherPolicy": t.iceTransportPolicy })); else t.iceCandidatePoolSize = 0; this._config = t, this.transceivers = [], this._sdpSessionId = i.generateSessionId(), this._sdpSessionVersion = 0, this._dtlsRole = void 0, this._isClosed = !1 }; Object.defineProperty(r.prototype, "localDescription", { "configurable": !0, "get": function get() { return this._localDescription } }), Object.defineProperty(r.prototype, "remoteDescription", { "configurable": !0, "get": function get() { return this._remoteDescription } }), r.prototype.onicecandidate = null, r.prototype.onaddstream = null, r.prototype.ontrack = null, r.prototype.onremovestream = null, r.prototype.onsignalingstatechange = null, r.prototype.oniceconnectionstatechange = null, r.prototype.onconnectionstatechange = null, r.prototype.onicegatheringstatechange = null, r.prototype.onnegotiationneeded = null, r.prototype.ondatachannel = null, r.prototype._dispatchEvent = function (e, t) { this._isClosed || (this.dispatchEvent(t), "function" == typeof this["on" + e] && this["on" + e](t)) }, r.prototype._emitGatheringStateChange = function () { var e = new Event("icegatheringstatechange"); this._dispatchEvent("icegatheringstatechange", e) }, r.prototype.getConfiguration = function () { return this._config }, r.prototype.getLocalStreams = function () { return this.localStreams }, r.prototype.getRemoteStreams = function () { return this.remoteStreams }, r.prototype._createTransceiver = function (e, t) { var A = { "track": null, "iceGatherer": null, "iceTransport": null, "dtlsTransport": null, "localCapabilities": null, "remoteCapabilities": null, "rtpSender": null, "rtpReceiver": null, "kind": e, "mid": null, "sendEncodingParameters": null, "recvEncodingParameters": null, "stream": null, "associatedRemoteMediaStreams": [], "wantReceive": !0 }; if (this.usingBundle && this.transceivers.length > 0) A.iceTransport = this.transceivers[0].iceTransport, A.dtlsTransport = this.transceivers[0].dtlsTransport; else { var r = this._createIceAndDtlsTransports(); A.iceTransport = r.iceTransport, A.dtlsTransport = r.dtlsTransport } return t || this.transceivers.push(A), A }, r.prototype.addTrack = function (t, A) { if (this._isClosed) throw C("InvalidStateError", "Attempted to call addTrack on a closed peerconnection."); var r; if (this.transceivers.find(function (e) { return e.track === t })) throw C("InvalidAccessError", "Track already exists."); for (var i = 0; i < this.transceivers.length; i++)this.transceivers[i].track || this.transceivers[i].kind !== t.kind || (r = this.transceivers[i]); return r || (r = this._createTransceiver(t.kind)), this._maybeFireNegotiationNeeded(), -1 === this.localStreams.indexOf(A) && this.localStreams.push(A), r.track = t, r.stream = A, r.rtpSender = new e.RTCRtpSender(t, r.dtlsTransport), r.rtpSender }, r.prototype.addStream = function (e) { var t = this; if (A >= 15025) e.getTracks().forEach(function (A) { t.addTrack(A, e) }); else { var r = e.clone(); e.getTracks().forEach(function (e, t) { var A = r.getTracks()[t]; e.addEventListener("enabled", function (e) { A.enabled = e.enabled }) }), r.getTracks().forEach(function (e) { t.addTrack(e, r) }) } }, r.prototype.removeTrack = function (t) { if (this._isClosed) throw C("InvalidStateError", "Attempted to call removeTrack on a closed peerconnection."); if (!(t instanceof e.RTCRtpSender)) throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender."); var A = this.transceivers.find(function (e) { return e.rtpSender === t }); if (!A) throw C("InvalidAccessError", "Sender was not created by this connection."); var r = A.stream; A.rtpSender.stop(), A.rtpSender = null, A.track = null, A.stream = null, -1 === this.transceivers.map(function (e) { return e.stream }).indexOf(r) && this.localStreams.indexOf(r) > -1 && this.localStreams.splice(this.localStreams.indexOf(r), 1), this._maybeFireNegotiationNeeded() }, r.prototype.removeStream = function (e) { var t = this; e.getTracks().forEach(function (e) { var A = t.getSenders().find(function (t) { return t.track === e }); A && t.removeTrack(A) }) }, r.prototype.getSenders = function () { return this.transceivers.filter(function (e) { return !!e.rtpSender }).map(function (e) { return e.rtpSender }) }, r.prototype.getReceivers = function () { return this.transceivers.filter(function (e) { return !!e.rtpReceiver }).map(function (e) { return e.rtpReceiver }) }, r.prototype._createIceGatherer = function (t, A) { var r = this; if (A && t > 0) return this.transceivers[0].iceGatherer; if (this._iceGatherers.length) return this._iceGatherers.shift(); var i = new e.RTCIceGatherer({ "iceServers": this._config.iceServers, "gatherPolicy": this._config.iceTransportPolicy }); return Object.defineProperty(i, "state", { "value": "new", "writable": !0 }), this.transceivers[t].bufferedCandidateEvents = [], this.transceivers[t].bufferCandidates = function (e) { var A = !e.candidate || 0 === Object.keys(e.candidate).length; i.state = A ? "completed" : "gathering", null !== r.transceivers[t].bufferedCandidateEvents && r.transceivers[t].bufferedCandidateEvents.push(e) }, i.addEventListener("localcandidate", this.transceivers[t].bufferCandidates), i }, r.prototype._gather = function (t, A) { var r = this, o = this.transceivers[A].iceGatherer; if (!o.onlocalcandidate) { var n = this.transceivers[A].bufferedCandidateEvents; this.transceivers[A].bufferedCandidateEvents = null, o.removeEventListener("localcandidate", this.transceivers[A].bufferCandidates), o.onlocalcandidate = function (e) { if (!(r.usingBundle && A > 0)) { var n = new Event("icecandidate"); n.candidate = { "sdpMid": t, "sdpMLineIndex": A }; var s = e.candidate, a = !s || 0 === Object.keys(s).length; if (a) "new" !== o.state && "gathering" !== o.state || (o.state = "completed"); else { "new" === o.state && (o.state = "gathering"), s.component = 1, s.ufrag = o.getLocalParameters().usernameFragment; var c = i.writeCandidate(s); n.candidate = Object.assign(n.candidate, i.parseCandidate(c)), n.candidate.candidate = c, n.candidate.toJSON = function () { return { "candidate": n.candidate.candidate, "sdpMid": n.candidate.sdpMid, "sdpMLineIndex": n.candidate.sdpMLineIndex, "usernameFragment": n.candidate.usernameFragment } } } var g = i.getMediaSections(r._localDescription.sdp); g[n.candidate.sdpMLineIndex] += a ? "a=end-of-candidates\r\n" : "a=" + n.candidate.candidate + "\r\n", r._localDescription.sdp = i.getDescription(r._localDescription.sdp) + g.join(""); var u = r.transceivers.every(function (e) { return e.iceGatherer && "completed" === e.iceGatherer.state }); "gathering" !== r.iceGatheringState && (r.iceGatheringState = "gathering", r._emitGatheringStateChange()), a || r._dispatchEvent("icecandidate", n), u && (r._dispatchEvent("icecandidate", new Event("icecandidate")), r.iceGatheringState = "complete", r._emitGatheringStateChange()) } }, e.setTimeout(function () { n.forEach(function (e) { o.onlocalcandidate(e) }) }, 0) } }, r.prototype._createIceAndDtlsTransports = function () { var t = this, A = new e.RTCIceTransport(null); A.onicestatechange = function () { t._updateIceConnectionState(), t._updateConnectionState() }; var r = new e.RTCDtlsTransport(A); return r.ondtlsstatechange = function () { t._updateConnectionState() }, r.onerror = function () { Object.defineProperty(r, "state", { "value": "failed", "writable": !0 }), t._updateConnectionState() }, { "iceTransport": A, "dtlsTransport": r } }, r.prototype._disposeIceAndDtlsTransports = function (e) { var t = this.transceivers[e].iceGatherer; t && (delete t.onlocalcandidate, delete this.transceivers[e].iceGatherer); var A = this.transceivers[e].iceTransport; A && (delete A.onicestatechange, delete this.transceivers[e].iceTransport); var r = this.transceivers[e].dtlsTransport; r && (delete r.ondtlsstatechange, delete r.onerror, delete this.transceivers[e].dtlsTransport) }, r.prototype._transceive = function (e, t, r) { var o = s(e.localCapabilities, e.remoteCapabilities); t && e.rtpSender && (o.encodings = e.sendEncodingParameters, o.rtcp = { "cname": i.localCName, "compound": e.rtcpParameters.compound }, e.recvEncodingParameters.length && (o.rtcp.ssrc = e.recvEncodingParameters[0].ssrc), e.rtpSender.send(o)), r && e.rtpReceiver && o.codecs.length > 0 && ("video" === e.kind && e.recvEncodingParameters && A < 15019 && e.recvEncodingParameters.forEach(function (e) { delete e.rtx }), o.encodings = e.recvEncodingParameters.length ? e.recvEncodingParameters : [{}], o.rtcp = { "compound": e.rtcpParameters.compound }, e.rtcpParameters.cname && (o.rtcp.cname = e.rtcpParameters.cname), e.sendEncodingParameters.length && (o.rtcp.ssrc = e.sendEncodingParameters[0].ssrc), e.rtpReceiver.receive(o)) }, r.prototype.setLocalDescription = function (e) { var t, A, r = this; if (-1 === ["offer", "answer"].indexOf(e.type)) return Promise.reject(C("TypeError", 'Unsupported type "' + e.type + '"')); if (!a("setLocalDescription", e.type, r.signalingState) || r._isClosed) return Promise.reject(C("InvalidStateError", "Can not set local " + e.type + " in state " + r.signalingState)); if ("offer" === e.type) t = i.splitSections(e.sdp), A = t.shift(), t.forEach(function (e, t) { var A = i.parseRtpParameters(e); r.transceivers[t].localCapabilities = A }), r.transceivers.forEach(function (e, t) { r._gather(e.mid, t) }); else if ("answer" === e.type) { t = i.splitSections(r._remoteDescription.sdp), A = t.shift(); var o = i.matchPrefix(A, "a=ice-lite").length > 0; t.forEach(function (e, t) { var n = r.transceivers[t], a = n.iceGatherer, c = n.iceTransport, g = n.dtlsTransport, u = n.localCapabilities, l = n.remoteCapabilities; if (!(i.isRejected(e) && 0 === i.matchPrefix(e, "a=bundle-only").length || n.rejected)) { var h = i.getIceParameters(e, A), d = i.getDtlsParameters(e, A); o && (d.role = "server"), r.usingBundle && 0 !== t || (r._gather(n.mid, t), "new" === c.state && c.start(a, h, o ? "controlling" : "controlled"), "new" === g.state && g.start(d)); var C = s(u, l); r._transceive(n, C.codecs.length > 0, !1) } }) } return r._localDescription = { "type": e.type, "sdp": e.sdp }, r._updateSignalingState("offer" === e.type ? "have-local-offer" : "stable"), Promise.resolve() }, r.prototype.setRemoteDescription = function (r) { var o = this; if (-1 === ["offer", "answer"].indexOf(r.type)) return Promise.reject(C("TypeError", 'Unsupported type "' + r.type + '"')); if (!a("setRemoteDescription", r.type, o.signalingState) || o._isClosed) return Promise.reject(C("InvalidStateError", "Can not set remote " + r.type + " in state " + o.signalingState)); var n = {}; o.remoteStreams.forEach(function (e) { n[e.id] = e }); var u = [], l = i.splitSections(r.sdp), h = l.shift(), d = i.matchPrefix(h, "a=ice-lite").length > 0, E = i.matchPrefix(h, "a=group:BUNDLE ").length > 0; o.usingBundle = E; var p = i.matchPrefix(h, "a=ice-options:")[0]; return o.canTrickleIceCandidates = !!p && p.substr(14).split(" ").indexOf("trickle") >= 0, l.forEach(function (a, c) { var l = i.splitLines(a), C = i.getKind(a), p = i.isRejected(a) && 0 === i.matchPrefix(a, "a=bundle-only").length, f = l[0].substr(2).split(" ")[2], B = i.getDirection(a, h), _ = i.parseMsid(a), m = i.getMid(a) || i.generateIdentifier(); if (p || "application" === C && ("DTLS/SCTP" === f || "UDP/DTLS/SCTP" === f)) o.transceivers[c] = { "mid": m, "kind": C, "protocol": f, "rejected": !0 }; else { var Q, y, v, S, D, R, b, T, k; !p && o.transceivers[c] && o.transceivers[c].rejected && (o.transceivers[c] = o._createTransceiver(C, !0)); var w, N, L = i.parseRtpParameters(a); p || (w = i.getIceParameters(a, h), (N = i.getDtlsParameters(a, h)).role = "client"), b = i.parseRtpEncodingParameters(a); var O = i.parseRtcpParameters(a), M = i.matchPrefix(a, "a=end-of-candidates", h).length > 0, P = i.matchPrefix(a, "a=candidate:").map(function (e) { return i.parseCandidate(e) }).filter(function (e) { return 1 === e.component }); if (("offer" === r.type || "answer" === r.type) && !p && E && c > 0 && o.transceivers[c] && (o._disposeIceAndDtlsTransports(c), o.transceivers[c].iceGatherer = o.transceivers[0].iceGatherer, o.transceivers[c].iceTransport = o.transceivers[0].iceTransport, o.transceivers[c].dtlsTransport = o.transceivers[0].dtlsTransport, o.transceivers[c].rtpSender && o.transceivers[c].rtpSender.setTransport(o.transceivers[0].dtlsTransport), o.transceivers[c].rtpReceiver && o.transceivers[c].rtpReceiver.setTransport(o.transceivers[0].dtlsTransport)), "offer" !== r.type || p) "answer" !== r.type || p || (y = (Q = o.transceivers[c]).iceGatherer, v = Q.iceTransport, S = Q.dtlsTransport, D = Q.rtpReceiver, R = Q.sendEncodingParameters, T = Q.localCapabilities, o.transceivers[c].recvEncodingParameters = b, o.transceivers[c].remoteCapabilities = L, o.transceivers[c].rtcpParameters = O, P.length && "new" === v.state && (!d && !M || E && 0 !== c ? P.forEach(function (e) { g(Q.iceTransport, e) }) : v.setRemoteCandidates(P)), E && 0 !== c || ("new" === v.state && v.start(y, w, "controlling"), "new" === S.state && S.start(N)), !s(Q.localCapabilities, Q.remoteCapabilities).codecs.filter(function (e) { return "rtx" === e.name.toLowerCase() }).length && Q.sendEncodingParameters[0].rtx && delete Q.sendEncodingParameters[0].rtx, o._transceive(Q, "sendrecv" === B || "recvonly" === B, "sendrecv" === B || "sendonly" === B), !D || "sendrecv" !== B && "sendonly" !== B ? delete Q.rtpReceiver : (k = D.track, _ ? (n[_.stream] || (n[_.stream] = new e.MediaStream), t(k, n[_.stream]), u.push([k, D, n[_.stream]])) : (n.default || (n.default = new e.MediaStream), t(k, n.default), u.push([k, D, n.default])))); else { (Q = o.transceivers[c] || o._createTransceiver(C)).mid = m, Q.iceGatherer || (Q.iceGatherer = o._createIceGatherer(c, E)), P.length && "new" === Q.iceTransport.state && (!M || E && 0 !== c ? P.forEach(function (e) { g(Q.iceTransport, e) }) : Q.iceTransport.setRemoteCandidates(P)), T = e.RTCRtpReceiver.getCapabilities(C), A < 15019 && (T.codecs = T.codecs.filter(function (e) { return "rtx" !== e.name })), R = Q.sendEncodingParameters || [{ "ssrc": 1001 * (2 * c + 2) }]; var U, G = !1; "sendrecv" === B || "sendonly" === B ? (G = !Q.rtpReceiver, D = Q.rtpReceiver || new e.RTCRtpReceiver(Q.dtlsTransport, C), G && (k = D.track, _ && "-" === _.stream || (_ ? (n[_.stream] || (n[_.stream] = new e.MediaStream, Object.defineProperty(n[_.stream], "id", { "get": function get() { return _.stream } })), Object.defineProperty(k, "id", { "get": function get() { return _.track } }), U = n[_.stream]) : (n.default || (n.default = new e.MediaStream), U = n.default)), U && (t(k, U), Q.associatedRemoteMediaStreams.push(U)), u.push([k, D, U]))) : Q.rtpReceiver && Q.rtpReceiver.track && (Q.associatedRemoteMediaStreams.forEach(function (e) { var t = e.getTracks().find(function (e) { return e.id === Q.rtpReceiver.track.id }); t && I(t, e) }), Q.associatedRemoteMediaStreams = []), Q.localCapabilities = T, Q.remoteCapabilities = L, Q.rtpReceiver = D, Q.rtcpParameters = O, Q.sendEncodingParameters = R, Q.recvEncodingParameters = b, o._transceive(o.transceivers[c], !1, G) } } }), void 0 === o._dtlsRole && (o._dtlsRole = "offer" === r.type ? "active" : "passive"), o._remoteDescription = { "type": r.type, "sdp": r.sdp }, o._updateSignalingState("offer" === r.type ? "have-remote-offer" : "stable"), Object.keys(n).forEach(function (t) { var A = n[t]; if (A.getTracks().length) { if (-1 === o.remoteStreams.indexOf(A)) { o.remoteStreams.push(A); var r = new Event("addstream"); r.stream = A, e.setTimeout(function () { o._dispatchEvent("addstream", r) }) } u.forEach(function (e) { A.id === e[2].id && c(o, e[0], e[1], [A]) }) } }), u.forEach(function (e) { e[2] || c(o, e[0], e[1], []) }), e.setTimeout(function () { o && o.transceivers && o.transceivers.forEach(function (e) { e.iceTransport && "new" === e.iceTransport.state && e.iceTransport.getRemoteCandidates().length > 0 && (console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"), e.iceTransport.addRemoteCandidate({})) }) }, 4e3), Promise.resolve() }, r.prototype.close = function () { this.transceivers.forEach(function (e) { e.iceTransport && e.iceTransport.stop(), e.dtlsTransport && e.dtlsTransport.stop(), e.rtpSender && e.rtpSender.stop(), e.rtpReceiver && e.rtpReceiver.stop() }), this._isClosed = !0, this._updateSignalingState("closed") }, r.prototype._updateSignalingState = function (e) { this.signalingState = e; var t = new Event("signalingstatechange"); this._dispatchEvent("signalingstatechange", t) }, r.prototype._maybeFireNegotiationNeeded = function () { var t = this; "stable" === this.signalingState && !0 !== this.needNegotiation && (this.needNegotiation = !0, e.setTimeout(function () { if (t.needNegotiation) { t.needNegotiation = !1; var e = new Event("negotiationneeded"); t._dispatchEvent("negotiationneeded", e) } }, 0)) }, r.prototype._updateIceConnectionState = function () { var e, t = { "new": 0, "closed": 0, "checking": 0, "connected": 0, "completed": 0, "disconnected": 0, "failed": 0 }; if (this.transceivers.forEach(function (e) { e.iceTransport && !e.rejected && t[e.iceTransport.state]++ }), e = "new", t.failed > 0 ? e = "failed" : t.checking > 0 ? e = "checking" : t.disconnected > 0 ? e = "disconnected" : t.new > 0 ? e = "new" : t.connected > 0 ? e = "connected" : t.completed > 0 && (e = "completed"), e !== this.iceConnectionState) { this.iceConnectionState = e; var A = new Event("iceconnectionstatechange"); this._dispatchEvent("iceconnectionstatechange", A) } }, r.prototype._updateConnectionState = function () { var e, t = { "new": 0, "closed": 0, "connecting": 0, "connected": 0, "completed": 0, "disconnected": 0, "failed": 0 }; if (this.transceivers.forEach(function (e) { e.iceTransport && e.dtlsTransport && !e.rejected && (t[e.iceTransport.state]++, t[e.dtlsTransport.state]++) }), t.connected += t.completed, e = "new", t.failed > 0 ? e = "failed" : t.connecting > 0 ? e = "connecting" : t.disconnected > 0 ? e = "disconnected" : t.new > 0 ? e = "new" : t.connected > 0 && (e = "connected"), e !== this.connectionState) { this.connectionState = e; var A = new Event("connectionstatechange"); this._dispatchEvent("connectionstatechange", A) } }, r.prototype.createOffer = function () { var t = this; if (t._isClosed) return Promise.reject(C("InvalidStateError", "Can not call createOffer after close")); var r = t.transceivers.filter(function (e) { return "audio" === e.kind }).length, n = t.transceivers.filter(function (e) { return "video" === e.kind }).length, s = arguments[0]; if (s) { if (s.mandatory || s.optional) throw new TypeError("Legacy mandatory/optional constraints not supported."); void 0 !== s.offerToReceiveAudio && (r = !0 === s.offerToReceiveAudio ? 1 : !1 === s.offerToReceiveAudio ? 0 : s.offerToReceiveAudio), void 0 !== s.offerToReceiveVideo && (n = !0 === s.offerToReceiveVideo ? 1 : !1 === s.offerToReceiveVideo ? 0 : s.offerToReceiveVideo) } for (t.transceivers.forEach(function (e) { "audio" === e.kind ? --r < 0 && (e.wantReceive = !1) : "video" === e.kind && --n < 0 && (e.wantReceive = !1) }); r > 0 || n > 0;)r > 0 && (t._createTransceiver("audio"), r--), n > 0 && (t._createTransceiver("video"), n--); var a = i.writeSessionBoilerplate(t._sdpSessionId, t._sdpSessionVersion++); t.transceivers.forEach(function (r, o) { var n = r.track, s = r.kind, a = r.mid || i.generateIdentifier(); r.mid = a, r.iceGatherer || (r.iceGatherer = t._createIceGatherer(o, t.usingBundle)); var c = e.RTCRtpSender.getCapabilities(s); A < 15019 && (c.codecs = c.codecs.filter(function (e) { return "rtx" !== e.name })), c.codecs.forEach(function (e) { "H264" === e.name && void 0 === e.parameters["level-asymmetry-allowed"] && (e.parameters["level-asymmetry-allowed"] = "1"), r.remoteCapabilities && r.remoteCapabilities.codecs && r.remoteCapabilities.codecs.forEach(function (t) { e.name.toLowerCase() === t.name.toLowerCase() && e.clockRate === t.clockRate && (e.preferredPayloadType = t.payloadType) }) }), c.headerExtensions.forEach(function (e) { (r.remoteCapabilities && r.remoteCapabilities.headerExtensions || []).forEach(function (t) { e.uri === t.uri && (e.id = t.id) }) }); var g = r.sendEncodingParameters || [{ "ssrc": 1001 * (2 * o + 1) }]; n && A >= 15019 && "video" === s && !g[0].rtx && (g[0].rtx = { "ssrc": g[0].ssrc + 1 }), r.wantReceive && (r.rtpReceiver = new e.RTCRtpReceiver(r.dtlsTransport, s)), r.localCapabilities = c, r.sendEncodingParameters = g }), "max-compat" !== t._config.bundlePolicy && (a += "a=group:BUNDLE " + t.transceivers.map(function (e) { return e.mid }).join(" ") + "\r\n"), a += "a=ice-options:trickle\r\n", t.transceivers.forEach(function (e, A) { a += o(e, e.localCapabilities, "offer", e.stream, t._dtlsRole), a += "a=rtcp-rsize\r\n", !e.iceGatherer || "new" === t.iceGatheringState || 0 !== A && t.usingBundle || (e.iceGatherer.getLocalCandidates().forEach(function (e) { e.component = 1, a += "a=" + i.writeCandidate(e) + "\r\n" }), "completed" === e.iceGatherer.state && (a += "a=end-of-candidates\r\n")) }); var c = new e.RTCSessionDescription({ "type": "offer", "sdp": a }); return Promise.resolve(c) }, r.prototype.createAnswer = function () { var t = this; if (t._isClosed) return Promise.reject(C("InvalidStateError", "Can not call createAnswer after close")); if ("have-remote-offer" !== t.signalingState && "have-local-pranswer" !== t.signalingState) return Promise.reject(C("InvalidStateError", "Can not call createAnswer in signalingState " + t.signalingState)); var r = i.writeSessionBoilerplate(t._sdpSessionId, t._sdpSessionVersion++); t.usingBundle && (r += "a=group:BUNDLE " + t.transceivers.map(function (e) { return e.mid }).join(" ") + "\r\n"), r += "a=ice-options:trickle\r\n"; var n = i.getMediaSections(t._remoteDescription.sdp).length; t.transceivers.forEach(function (e, i) { if (!(i + 1 > n)) { if (e.rejected) return "application" === e.kind ? r += "DTLS/SCTP" === e.protocol ? "m=application 0 DTLS/SCTP 5000\r\n" : "m=application 0 " + e.protocol + " webrtc-datachannel\r\n" : "audio" === e.kind ? r += "m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n" : "video" === e.kind && (r += "m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"), void (r += "c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:" + e.mid + "\r\n"); var a; e.stream && ("audio" === e.kind ? a = e.stream.getAudioTracks()[0] : "video" === e.kind && (a = e.stream.getVideoTracks()[0]), a && A >= 15019 && "video" === e.kind && !e.sendEncodingParameters[0].rtx && (e.sendEncodingParameters[0].rtx = { "ssrc": e.sendEncodingParameters[0].ssrc + 1 })); var c = s(e.localCapabilities, e.remoteCapabilities); !c.codecs.filter(function (e) { return "rtx" === e.name.toLowerCase() }).length && e.sendEncodingParameters[0].rtx && delete e.sendEncodingParameters[0].rtx, r += o(e, c, "answer", e.stream, t._dtlsRole), e.rtcpParameters && e.rtcpParameters.reducedSize && (r += "a=rtcp-rsize\r\n") } }); var a = new e.RTCSessionDescription({ "type": "answer", "sdp": r }); return Promise.resolve(a) }, r.prototype.addIceCandidate = function (e) { var t, A = this; return e && void 0 === e.sdpMLineIndex && !e.sdpMid ? Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")) : new Promise(function (r, o) { if (!A._remoteDescription) return o(C("InvalidStateError", "Can not add ICE candidate without a remote description")); if (e && "" !== e.candidate) { var n = e.sdpMLineIndex; if (e.sdpMid) for (var s = 0; s < A.transceivers.length; s++)if (A.transceivers[s].mid === e.sdpMid) { n = s; break } var a = A.transceivers[n]; if (!a) return o(C("OperationError", "Can not add ICE candidate")); if (a.rejected) return r(); var c = Object.keys(e.candidate).length > 0 ? i.parseCandidate(e.candidate) : {}; if ("tcp" === c.protocol && (0 === c.port || 9 === c.port)) return r(); if (c.component && 1 !== c.component) return r(); if ((0 === n || n > 0 && a.iceTransport !== A.transceivers[0].iceTransport) && !g(a.iceTransport, c)) return o(C("OperationError", "Can not add ICE candidate")); var u = e.candidate.trim(); 0 === u.indexOf("a=") && (u = u.substr(2)), (t = i.getMediaSections(A._remoteDescription.sdp))[n] += "a=" + (c.type ? u : "end-of-candidates") + "\r\n", A._remoteDescription.sdp = i.getDescription(A._remoteDescription.sdp) + t.join("") } else for (var l = 0; l < A.transceivers.length && (A.transceivers[l].rejected || (A.transceivers[l].iceTransport.addRemoteCandidate({}), (t = i.getMediaSections(A._remoteDescription.sdp))[l] += "a=end-of-candidates\r\n", A._remoteDescription.sdp = i.getDescription(A._remoteDescription.sdp) + t.join(""), !A.usingBundle)); l++); r() }) }, r.prototype.getStats = function (t) { if (t && t instanceof e.MediaStreamTrack) { var A = null; if (this.transceivers.forEach(function (e) { e.rtpSender && e.rtpSender.track === t ? A = e.rtpSender : e.rtpReceiver && e.rtpReceiver.track === t && (A = e.rtpReceiver) }), !A) throw C("InvalidAccessError", "Invalid selector."); return A.getStats() } var r = []; return this.transceivers.forEach(function (e) { ["rtpSender", "rtpReceiver", "iceGatherer", "iceTransport", "dtlsTransport"].forEach(function (t) { e[t] && r.push(e[t].getStats()) }) }), Promise.all(r).then(function (e) { var t = new Map; return e.forEach(function (e) { e.forEach(function (e) { t.set(e.id, e) }) }), t }) }, ["RTCRtpSender", "RTCRtpReceiver", "RTCIceGatherer", "RTCIceTransport", "RTCDtlsTransport"].forEach(function (t) { var A = e[t]; if (A && A.prototype && A.prototype.getStats) { var r = A.prototype.getStats; A.prototype.getStats = function () { return r.apply(this).then(function (e) { var t = new Map; return Object.keys(e).forEach(function (A) { e[A].type = function r(e) { return { "inboundrtp": "inbound-rtp", "outboundrtp": "outbound-rtp", "candidatepair": "candidate-pair", "localcandidate": "local-candidate", "remotecandidate": "remote-candidate" }[e.type] || e.type }(e[A]), t.set(A, e[A]) }), t }) } } }); var u = ["createOffer", "createAnswer"]; return u.forEach(function (e) { var t = r.prototype[e]; r.prototype[e] = function () { var e = arguments; return "function" == typeof e[0] || "function" == typeof e[1] ? t.apply(this, [arguments[2]]).then(function (t) { "function" == typeof e[0] && e[0].apply(null, [t]) }, function (t) { "function" == typeof e[1] && e[1].apply(null, [t]) }) : t.apply(this, arguments) } }), (u = ["setLocalDescription", "setRemoteDescription", "addIceCandidate"]).forEach(function (e) { var t = r.prototype[e]; r.prototype[e] = function () { var e = arguments; return "function" == typeof e[1] || "function" == typeof e[2] ? t.apply(this, arguments).then(function () { "function" == typeof e[1] && e[1].apply(null) }, function (t) { "function" == typeof e[2] && e[2].apply(null, [t]) }) : t.apply(this, arguments) } }), ["getStats"].forEach(function (e) { var t = r.prototype[e]; r.prototype[e] = function () { var e = arguments; return "function" == typeof e[1] ? t.apply(this, arguments).then(function () { "function" == typeof e[1] && e[1].apply(null) }) : t.apply(this, arguments) } }), r } }, { "sdp": 17 }], "17": [function (e, t, A) { "use strict"; var r = { "generateIdentifier": function generateIdentifier() { return Math.random().toString(36).substr(2, 10) } }; r.localCName = r.generateIdentifier(), r.splitLines = function (e) { return e.trim().split("\n").map(function (e) { return e.trim() }) }, r.splitSections = function (e) { return e.split("\nm=").map(function (e, t) { return (t > 0 ? "m=" + e : e).trim() + "\r\n" }) }, r.getDescription = function (e) { var t = r.splitSections(e); return t && t[0] }, r.getMediaSections = function (e) { var t = r.splitSections(e); return t.shift(), t }, r.matchPrefix = function (e, t) { return r.splitLines(e).filter(function (e) { return 0 === e.indexOf(t) }) }, r.parseCandidate = function (e) { for (var t, A = { "foundation": (t = 0 === e.indexOf("a=candidate:") ? e.substring(12).split(" ") : e.substring(10).split(" "))[0], "component": parseInt(t[1], 10), "protocol": t[2].toLowerCase(), "priority": parseInt(t[3], 10), "ip": t[4], "address": t[4], "port": parseInt(t[5], 10), "type": t[7] }, r = 8; r < t.length; r += 2)switch (t[r]) { case "raddr": A.relatedAddress = t[r + 1]; break; case "rport": A.relatedPort = parseInt(t[r + 1], 10); break; case "tcptype": A.tcpType = t[r + 1]; break; case "ufrag": A.ufrag = t[r + 1], A.usernameFragment = t[r + 1]; break; default: A[t[r]] = t[r + 1] }return A }, r.writeCandidate = function (e) { var t = []; t.push(e.foundation), t.push(e.component), t.push(e.protocol.toUpperCase()), t.push(e.priority), t.push(e.address || e.ip), t.push(e.port); var A = e.type; return t.push("typ"), t.push(A), "host" !== A && e.relatedAddress && e.relatedPort && (t.push("raddr"), t.push(e.relatedAddress), t.push("rport"), t.push(e.relatedPort)), e.tcpType && "tcp" === e.protocol.toLowerCase() && (t.push("tcptype"), t.push(e.tcpType)), (e.usernameFragment || e.ufrag) && (t.push("ufrag"), t.push(e.usernameFragment || e.ufrag)), "candidate:" + t.join(" ") }, r.parseIceOptions = function (e) { return e.substr(14).split(" ") }, r.parseRtpMap = function (e) { var t = e.substr(9).split(" "), A = { "payloadType": parseInt(t.shift(), 10) }; return t = t[0].split("/"), A.name = t[0], A.clockRate = parseInt(t[1], 10), A.channels = 3 === t.length ? parseInt(t[2], 10) : 1, A.numChannels = A.channels, A }, r.writeRtpMap = function (e) { var t = e.payloadType; void 0 !== e.preferredPayloadType && (t = e.preferredPayloadType); var A = e.channels || e.numChannels || 1; return "a=rtpmap:" + t + " " + e.name + "/" + e.clockRate + (1 !== A ? "/" + A : "") + "\r\n" }, r.parseExtmap = function (e) { var t = e.substr(9).split(" "); return { "id": parseInt(t[0], 10), "direction": t[0].indexOf("/") > 0 ? t[0].split("/")[1] : "sendrecv", "uri": t[1] } }, r.writeExtmap = function (e) { return "a=extmap:" + (e.id || e.preferredId) + (e.direction && "sendrecv" !== e.direction ? "/" + e.direction : "") + " " + e.uri + "\r\n" }, r.parseFmtp = function (e) { for (var t, A = {}, r = e.substr(e.indexOf(" ") + 1).split(";"), i = 0; i < r.length; i++)A[(t = r[i].trim().split("="))[0].trim()] = t[1]; return A }, r.writeFmtp = function (e) { var t = "", A = e.payloadType; if (void 0 !== e.preferredPayloadType && (A = e.preferredPayloadType), e.parameters && Object.keys(e.parameters).length) { var r = []; Object.keys(e.parameters).forEach(function (t) { r.push(e.parameters[t] ? t + "=" + e.parameters[t] : t) }), t += "a=fmtp:" + A + " " + r.join(";") + "\r\n" } return t }, r.parseRtcpFb = function (e) { var t = e.substr(e.indexOf(" ") + 1).split(" "); return { "type": t.shift(), "parameter": t.join(" ") } }, r.writeRtcpFb = function (e) { var t = "", A = e.payloadType; return void 0 !== e.preferredPayloadType && (A = e.preferredPayloadType), e.rtcpFeedback && e.rtcpFeedback.length && e.rtcpFeedback.forEach(function (e) { t += "a=rtcp-fb:" + A + " " + e.type + (e.parameter && e.parameter.length ? " " + e.parameter : "") + "\r\n" }), t }, r.parseSsrcMedia = function (e) { var t = e.indexOf(" "), A = { "ssrc": parseInt(e.substr(7, t - 7), 10) }, r = e.indexOf(":", t); return r > -1 ? (A.attribute = e.substr(t + 1, r - t - 1), A.value = e.substr(r + 1)) : A.attribute = e.substr(t + 1), A }, r.parseSsrcGroup = function (e) { var t = e.substr(13).split(" "); return { "semantics": t.shift(), "ssrcs": t.map(function (e) { return parseInt(e, 10) }) } }, r.getMid = function (e) { var t = r.matchPrefix(e, "a=mid:")[0]; if (t) return t.substr(6) }, r.parseFingerprint = function (e) { var t = e.substr(14).split(" "); return { "algorithm": t[0].toLowerCase(), "value": t[1] } }, r.getDtlsParameters = function (e, t) { return { "role": "auto", "fingerprints": r.matchPrefix(e + t, "a=fingerprint:").map(r.parseFingerprint) } }, r.writeDtlsParameters = function (e, t) { var A = "a=setup:" + t + "\r\n"; return e.fingerprints.forEach(function (e) { A += "a=fingerprint:" + e.algorithm + " " + e.value + "\r\n" }), A }, r.getIceParameters = function (e, t) { var A = r.splitLines(e); return { "usernameFragment": (A = A.concat(r.splitLines(t))).filter(function (e) { return 0 === e.indexOf("a=ice-ufrag:") })[0].substr(12), "password": A.filter(function (e) { return 0 === e.indexOf("a=ice-pwd:") })[0].substr(10) } }, r.writeIceParameters = function (e) { return "a=ice-ufrag:" + e.usernameFragment + "\r\na=ice-pwd:" + e.password + "\r\n" }, r.parseRtpParameters = function (e) { for (var t = { "codecs": [], "headerExtensions": [], "fecMechanisms": [], "rtcp": [] }, A = r.splitLines(e)[0].split(" "), i = 3; i < A.length; i++) { var o = A[i], n = r.matchPrefix(e, "a=rtpmap:" + o + " ")[0]; if (n) { var s = r.parseRtpMap(n), a = r.matchPrefix(e, "a=fmtp:" + o + " "); switch (s.parameters = a.length ? r.parseFmtp(a[0]) : {}, s.rtcpFeedback = r.matchPrefix(e, "a=rtcp-fb:" + o + " ").map(r.parseRtcpFb), t.codecs.push(s), s.name.toUpperCase()) { case "RED": case "ULPFEC": t.fecMechanisms.push(s.name.toUpperCase()) } } } return r.matchPrefix(e, "a=extmap:").forEach(function (e) { t.headerExtensions.push(r.parseExtmap(e)) }), t }, r.writeRtpDescription = function (e, t) { var A = ""; A += "m=" + e + " ", A += t.codecs.length > 0 ? "9" : "0", A += " UDP/TLS/RTP/SAVPF ", A += t.codecs.map(function (e) { return void 0 !== e.preferredPayloadType ? e.preferredPayloadType : e.payloadType }).join(" ") + "\r\n", A += "c=IN IP4 0.0.0.0\r\n", A += "a=rtcp:9 IN IP4 0.0.0.0\r\n", t.codecs.forEach(function (e) { A += r.writeRtpMap(e), A += r.writeFmtp(e), A += r.writeRtcpFb(e) }); var i = 0; return t.codecs.forEach(function (e) { e.maxptime > i && (i = e.maxptime) }), i > 0 && (A += "a=maxptime:" + i + "\r\n"), A += "a=rtcp-mux\r\n", t.headerExtensions && t.headerExtensions.forEach(function (e) { A += r.writeExtmap(e) }), A }, r.parseRtpEncodingParameters = function (e) { var t, A = [], i = r.parseRtpParameters(e), o = -1 !== i.fecMechanisms.indexOf("RED"), n = -1 !== i.fecMechanisms.indexOf("ULPFEC"), s = r.matchPrefix(e, "a=ssrc:").map(function (e) { return r.parseSsrcMedia(e) }).filter(function (e) { return "cname" === e.attribute }), a = s.length > 0 && s[0].ssrc, c = r.matchPrefix(e, "a=ssrc-group:FID").map(function (e) { return e.substr(17).split(" ").map(function (e) { return parseInt(e, 10) }) }); c.length > 0 && c[0].length > 1 && c[0][0] === a && (t = c[0][1]), i.codecs.forEach(function (e) { if ("RTX" === e.name.toUpperCase() && e.parameters.apt) { var r = { "ssrc": a, "codecPayloadType": parseInt(e.parameters.apt, 10) }; a && t && (r.rtx = { "ssrc": t }), A.push(r), o && ((r = JSON.parse(JSON.stringify(r))).fec = { "ssrc": a, "mechanism": n ? "red+ulpfec" : "red" }, A.push(r)) } }), 0 === A.length && a && A.push({ "ssrc": a }); var g = r.matchPrefix(e, "b="); return g.length && (g = 0 === g[0].indexOf("b=TIAS:") ? parseInt(g[0].substr(7), 10) : 0 === g[0].indexOf("b=AS:") ? 1e3 * parseInt(g[0].substr(5), 10) * .95 - 16e3 : void 0, A.forEach(function (e) { e.maxBitrate = g })), A }, r.parseRtcpParameters = function (e) { var t = {}, A = r.matchPrefix(e, "a=ssrc:").map(function (e) { return r.parseSsrcMedia(e) }).filter(function (e) { return "cname" === e.attribute })[0]; A && (t.cname = A.value, t.ssrc = A.ssrc); var i = r.matchPrefix(e, "a=rtcp-rsize"); t.reducedSize = i.length > 0, t.compound = 0 === i.length; var o = r.matchPrefix(e, "a=rtcp-mux"); return t.mux = o.length > 0, t }, r.parseMsid = function (e) { var t, A = r.matchPrefix(e, "a=msid:"); if (1 === A.length) return { "stream": (t = A[0].substr(7).split(" "))[0], "track": t[1] }; var i = r.matchPrefix(e, "a=ssrc:").map(function (e) { return r.parseSsrcMedia(e) }).filter(function (e) { return "msid" === e.attribute }); return i.length > 0 ? { "stream": (t = i[0].value.split(" "))[0], "track": t[1] } : void 0 }, r.generateSessionId = function () { return Math.random().toString().substr(2, 21) }, r.writeSessionBoilerplate = function (e, t, A) { var i = void 0 !== t ? t : 2; return "v=0\r\no=" + (A || "thisisadapterortc") + " " + (e || r.generateSessionId()) + " " + i + " IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n" }, r.writeMediaSection = function (e, t, A, i) { var o = r.writeRtpDescription(e.kind, t); if (o += r.writeIceParameters(e.iceGatherer.getLocalParameters()), o += r.writeDtlsParameters(e.dtlsTransport.getLocalParameters(), "offer" === A ? "actpass" : "active"), o += "a=mid:" + e.mid + "\r\n", o += e.direction ? "a=" + e.direction + "\r\n" : e.rtpSender && e.rtpReceiver ? "a=sendrecv\r\n" : e.rtpSender ? "a=sendonly\r\n" : e.rtpReceiver ? "a=recvonly\r\n" : "a=inactive\r\n", e.rtpSender) { var n = "msid:" + i.id + " " + e.rtpSender.track.id + "\r\n"; o += "a=" + n, o += "a=ssrc:" + e.sendEncodingParameters[0].ssrc + " " + n, e.sendEncodingParameters[0].rtx && (o += "a=ssrc:" + e.sendEncodingParameters[0].rtx.ssrc + " " + n, o += "a=ssrc-group:FID " + e.sendEncodingParameters[0].ssrc + " " + e.sendEncodingParameters[0].rtx.ssrc + "\r\n") } return o += "a=ssrc:" + e.sendEncodingParameters[0].ssrc + " cname:" + r.localCName + "\r\n", e.rtpSender && e.sendEncodingParameters[0].rtx && (o += "a=ssrc:" + e.sendEncodingParameters[0].rtx.ssrc + " cname:" + r.localCName + "\r\n"), o }, r.getDirection = function (e, t) { for (var A = r.splitLines(e), i = 0; i < A.length; i++)switch (A[i]) { case "a=sendrecv": case "a=sendonly": case "a=recvonly": case "a=inactive": return A[i].substr(2) }return t ? r.getDirection(t) : "sendrecv" }, r.getKind = function (e) { return r.splitLines(e)[0].split(" ")[0].substr(2) }, r.isRejected = function (e) { return "0" === e.split(" ", 2)[1] }, r.parseMLine = function (e) { var t = r.splitLines(e)[0].substr(2).split(" "); return { "kind": t[0], "port": parseInt(t[1], 10), "protocol": t[2], "fmt": t.slice(3).join(" ") } }, r.parseOLine = function (e) { var t = r.matchPrefix(e, "o=")[0].substr(2).split(" "); return { "username": t[0], "sessionId": t[1], "sessionVersion": parseInt(t[2], 10), "netType": t[3], "addressType": t[4], "address": t[5] } }, r.isValidSDP = function (e) { if ("string" != typeof e || 0 === e.length) return !1; for (var t = r.splitLines(e), A = 0; A < t.length; A++)if (t[A].length < 2 || "=" !== t[A].charAt(1)) return !1; return !0 }, "object" == (void 0 === t ? "undefined" : _typeof(t)) && (t.exports = r) }, {}] }, {}, [1])(1) }, "9869": function _(e) { "undefined" != typeof self && self, e.exports = function () { return e = { "24": function _(e, t, A) { "use strict"; function i(e) { return e } A.r(t), (A = r = r || {}).LIVE_SEND_SIGNAL = "zm.lv.ssg", A.LIVE_RESPOND_JOIN_LIVE = "zm.lv.rjl", A.LIVE_PUSH_SIGNAL = "zm.lv.pss", A.SERVICE_PUSH = "zm.sv.ps", A.SERVICE_SEND = "zm.sv.sd"; var r, o = { "event": "/liveroom/send_end_join_live", "to_user_id": i, "request_id": i }, n = { "event": "/liveroom/send_invite_join_live", "to_user_id": i, "request_id": i }, s = { "event": "/liveroom/send_join_live_result", "to_user_id": i, "request_id": i, "join_result": function join_result(e) { return e } }, a = { "event": "/liveroom/send_request_join_live", "to_user_id": i, "request_id": i }, g = { "code": 1002014, "msg": "room not exist" }, u = { "code": 1002099, "msg": "room inner error" }, l = (c.prototype.resetLiveHandler = function () { this.joinLiveCallbackMap = {}, this.joinLiveRequestMap = {} }, c.prototype.getSignalCmdContent = function (e, t, A) { return e = { "request_id": e, "room_id": this.room.roomID, "from_userid": this.stateCenter.idName, "from_username": this.stateCenter.nickName, "to_userid": t }, null != A && (e.result = A), JSON.stringify(e) }, c.prototype.requestJoinLive = function (e, t, A, r) { var i, o = this.stateCenter.getRequestId(), n = this.getSignalCmdContent(o, e); return null != r && (this.stateCenter.reporter.spanSetAttributes({ "key": a.event, "par": null == (i = this.room) ? void 0 : i.roomID }, { "request_id": a.request_id(o) }), this.joinLiveCallbackMap[o] = r, this.sendSignalCmd(1001, n, e, t, A), !0) }, c.prototype.sendSignalCmd = function (e, t, A, i, o) { var n = this; this.room.isLogin() ? ((this.stateCenter.useNetAgent ? this.liveRoomHandler : this.service).sendSignalCmd({ "sub_cmd": e, "signal_msg": t, "dest_id_name": [A] }, function (e) { i && i(e.header.seq) }, function (e) { var t = u; e.header && e.body ? o && o(n.rtm.getServerError(e.body.err_code), e.header.seq) : (e.code && e.msg && (t = e), o && o(t, 0)) }, this.room), this.logger.info(r.LIVE_SEND_SIGNAL + " call success" + e)) : this.logger.error(r.LIVE_SEND_SIGNAL + " state error") }, c.prototype.inviteJoinLive = function (e, t, A, r) { var i, o = this.stateCenter.getRequestId(), s = this.getSignalCmdContent(o, e); return null != r && (this.stateCenter.reporter.spanSetAttributes({ "key": n.event, "par": null == (i = this.room) ? void 0 : i.roomID }, { "request_id": n.request_id(o) }), this.joinLiveCallbackMap[o] = r, this.sendSignalCmd(1003, s, e, t, A), !0) }, c.prototype.endJoinLive = function (e, t, A) { var r, i = this.stateCenter.getRequestId(), n = this.getSignalCmdContent(i, e); return this.stateCenter.reporter.spanSetAttributes({ "key": o.event, "par": null == (r = this.room) ? void 0 : r.roomID }, { "request_id": o.request_id(i) }), this.sendSignalCmd(1004, n, e, t, A), !0 }, c.prototype.respondJoinLive = function (e, t, A, i) { var o = this.joinLiveRequestMap[e]; if (!o) return this.logger.info(r.LIVE_RESPOND_JOIN_LIVE + " no dest id name"), !1; this.stateCenter.reporter.spanSetAttributes({ "key": s.event, "par": null == (n = this.room) ? void 0 : n.roomID }, { "to_user_id": s.to_user_id(o) }); var n = 0; return t = this.getSignalCmdContent(e, o, n = !0 === t ? 1 : n), this.sendSignalCmd(1002, t, o, A, i), delete this.joinLiveRequestMap[e], !0 }, c.prototype.handlePushSignalMsg = function (e) { var t = JSON.parse(e.body.signal_msg); switch (this.logger.info(r.LIVE_PUSH_SIGNAL + " hpsm= ", t), e.body.sub_cmd) { case 11001: this.handlePushJoinLiveRequestMsg(t); break; case 11002: this.handlePushJoinLiveResultMsg(t); break; case 11003: this.handlePushJoinLiveInviteMsg(t); break; case 11004: this.handlePushJoinLiveStopMsg(t) } }, c.prototype.handlePushJoinLiveRequestMsg = function (e) { var t, A = e.request_id; "string" != typeof A ? this.logger.error(r.LIVE_PUSH_SIGNAL + " no requestId") : "string" != typeof (t = e.from_userid) ? this.logger.error(r.LIVE_PUSH_SIGNAL + " no from user") : (this.joinLiveRequestMap[A] = t, this.onRecvJoinLiveRequest(A, e.from_userid, e.from_username, e.room_id), this.logger.info(r.LIVE_PUSH_SIGNAL + " onRecvJoinLiveRequest " + t)) }, c.prototype.onRecvJoinLiveRequest = function (e, t, A, r) { this.stateCenter.actionListener("recvJoinLiveRequest", e, t, A, r) }, c.prototype.handlePushJoinLiveInviteMsg = function (e) { var t, A = e.request_id; "string" != typeof A ? this.logger.error(r.LIVE_PUSH_SIGNAL + "no requestId") : "string" != typeof (t = e.from_userid) ? this.logger.error(r.LIVE_PUSH_SIGNAL + " no from user") : (this.joinLiveRequestMap[A] = t, this.onRecvInviteJoinLiveRequest(A, e.from_userid, e.from_username, e.room_id), this.logger.info(r.LIVE_PUSH_SIGNAL + " onRecvInviteJoinLiveRequest " + t)) }, c.prototype.onRecvInviteJoinLiveRequest = function (e, t, A, r) { this.stateCenter.actionListener("recvInviteJoinLiveRequest", e, t, A, r) }, c.prototype.handlePushJoinLiveResultMsg = function (e) { var t, A, i = e.request_id; "string" != typeof i ? this.logger.error(r.LIVE_PUSH_SIGNAL + " no requestId") : null == (t = e.result) ? this.logger.info(r.LIVE_PUSH_SIGNAL + " no result") : (t = 1 == t, this.joinLiveCallbackMap[i] && ((A = this.joinLiveCallbackMap[i]) ? (this.logger.info(r.LIVE_PUSH_SIGNAL + " joinLiveRequest/invite result " + t), delete this.joinLiveCallbackMap[i], A(t, e.from_userid, e.from_username)) : this.logger.info(r.LIVE_PUSH_SIGNAL + " no callback"))) }, c.prototype.handlePushJoinLiveStopMsg = function (e) { var t = e.request_id; "string" != typeof t ? this.logger.error(r.LIVE_PUSH_SIGNAL + " no requestId") : (this.logger.info(r.LIVE_PUSH_SIGNAL + " onRecvEndJoinLiveCommand " + e.from_userid), this.onRecvEndJoinLiveCommand(t, e.from_userid, e.from_username, e.room_id)) }, c.prototype.onRecvEndJoinLiveCommand = function (e, t, A, r) { this.stateCenter.actionListener("recvEndJoinLiveCommand", e, t, A, r) }, c); function c(e, t, A, r, i, o) { this.logger = e, this.stateCenter = t, this.service = A, this.liveRoomHandler = r, this.rtm = i, this.room = o, this.joinLiveCallbackMap = {}, this.joinLiveRequestMap = {} } var h = { "requestJoinLive": function requestJoinLive(e, t, A, r, i) { var o = this, n = this.getMsgSpan(a.event, i || (null == (s = this.stateCenter.roomModulesList[0]) ? void 0 : s.roomID), !0), s = this.getRoomModules(i) || this.stateCenter.roomModulesList[0]; return s ? (n.setAttributes({ "to_user_id": a.to_user_id(e) }), s.liveHandler.requestJoinLive(e, function (e) { n.end(), t(e) }, function (e, t) { o.stateCenter.reporter.setError(n, e), A(e, t) }, r)) : (this.stateCenter.reporter.setError(n, g), A && A(g, 0), !1) }, "inviteJoinLive": function inviteJoinLive(e, t, A, r, i) { var o = this, s = this.getMsgSpan(n.event, i || (null == (a = this.stateCenter.roomModulesList[0]) ? void 0 : a.roomID), !0), a = this.getRoomModules(i) || this.stateCenter.roomModulesList[0]; return a ? (s.setAttributes({ "to_user_id": n.to_user_id(e) }), a.liveHandler.inviteJoinLive(e, function (e) { s.end(), t(e) }, function (e, t) { o.stateCenter.reporter.setError(s, e), A(e, t) }, r)) : (this.stateCenter.reporter.setError(s, g), A && A(g, 0), !1) }, "endJoinLive": function endJoinLive(e, t, A, r) { var i = this, n = this.getMsgSpan(o.event, r || (null == (s = this.stateCenter.roomModulesList[0]) ? void 0 : s.roomID), !0), s = this.getRoomModules(r) || this.stateCenter.roomModulesList[0]; return s ? (n.setAttributes({ "to_user_id": o.to_user_id(e) }), s.liveHandler.endJoinLive(e, function (e) { n.end(), t(e) }, function (e, t) { i.stateCenter.reporter.setError(n, e), A(e, t) })) : (this.stateCenter.reporter.setError(n, g), A && A(g, 0), !1) }, "respondJoinLive": function respondJoinLive(e, t, A, r, i) { var o = this, n = this.getMsgSpan(s.event, i || (null == (a = this.stateCenter.roomModulesList[0]) ? void 0 : a.roomID), !0), a = this.getRoomModules(i) || this.stateCenter.roomModulesList[0]; return a ? (n.setAttributes({ "request_id": s.request_id(e), "join_result": s.join_result(t) }), a.liveHandler.respondJoinLive(e, t, function (e) { n.end(), A(e) }, function (e, t) { o.stateCenter.reporter.setError(n, e), r(e, t) })) : (this.stateCenter.reporter.setError(n, g), r && r(g, 0), !1) } }, d = { "handlePushSignalMsg": function handlePushSignalMsg(e) { var t = null == (A = null == e ? void 0 : e.header) ? void 0 : A.room_id, A = this.stateCenter.roomModulesList.find(function (e) { return e.roomID == t }); A ? A.liveHandler.handlePushSignalMsg(e) : this.logger.error(r.SERVICE_PUSH + " room no found ignore " + JSON.stringify(e)) } }, C = { "initLiveHandler": function initLiveHandler() { this.liveHandler = new l(this.logger, this.stateCenter, this.service, this.liveRoomHandler, this.rtm, this) } }; t.default = { "type": "live", "install": function install(e, t, A, r) { for (var i in h) Object.defineProperty(e.prototype, i, { "value": h[i], "writable": !1 }); for (var i in d) Object.defineProperty(A.prototype, i, { "value": d[i], "writable": !1 }), Object.defineProperty(r.prototype, i, { "value": d[i], "writable": !1 }); for (var i in C) Object.defineProperty(t.prototype, i, { "value": C[i], "writable": !1 }) } } } }, t = {}, A.m = e, A.c = t, A.d = function (e, t, r) { A.o(e, t) || Object.defineProperty(e, t, { "enumerable": !0, "get": r }) }, A.r = function (e) { "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, { "value": "Module" }), Object.defineProperty(e, "__esModule", { "value": !0 }) }, A.t = function (e, t) { if (1 & t && (e = A(e)), 8 & t) return e; if (4 & t && "object" == (void 0 === e ? "undefined" : _typeof(e)) && e && e.__esModule) return e; var r = Object.create(null); if (A.r(r), Object.defineProperty(r, "default", { "enumerable": !0, "value": e }), 2 & t && "string" != typeof e) for (var i in e) A.d(r, i, function (t) { return e[t] }.bind(null, i)); return r }, A.n = function (e) { var t = e && e.__esModule ? function () { return e.default } : function () { return e }; return A.d(t, "a", t), t }, A.o = function (e, t) { return Object.prototype.hasOwnProperty.call(e, t) }, A.p = "", A(A.s = 24); function A(r) { var i; return (t[r] || (i = t[r] = { "i": r, "l": !1, "exports": {} }, e[r].call(i.exports, i, i.exports, A), i.l = !0, i)).exports } var e, t }() }, "3126": function _(e) { "undefined" != typeof self && self, e.exports = function () { return e = { "1": function _(e, t, A) { var r = function (e) { "use strict"; Object.defineProperty(e, "__esModule", { "value": !0 }), e.default = void 0; var A = null; try { A = new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0, 97, 115, 109, 1, 0, 0, 0, 1, 13, 2, 96, 0, 1, 127, 96, 4, 127, 127, 127, 127, 1, 127, 3, 7, 6, 0, 1, 1, 1, 1, 1, 6, 6, 1, 127, 1, 65, 0, 11, 7, 50, 6, 3, 109, 117, 108, 0, 1, 5, 100, 105, 118, 95, 115, 0, 2, 5, 100, 105, 118, 95, 117, 0, 3, 5, 114, 101, 109, 95, 115, 0, 4, 5, 114, 101, 109, 95, 117, 0, 5, 8, 103, 101, 116, 95, 104, 105, 103, 104, 0, 0, 10, 191, 1, 6, 4, 0, 35, 0, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 126, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 127, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 128, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 129, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 130, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11])), {}).exports } catch (e) { } function t(e, t, A) { this.low = 0 | e, this.high = 0 | t, this.unsigned = !!A } function i(e) { return !0 === (e && e.__isLong__) } function r(e) { var t = Math.clz32(e & -e); return e ? 31 - t : t } Object.defineProperty(t.prototype, "__isLong__", { "value": !0 }), t.isLong = i; var o = {}, n = {}; function s(e, t) { var A, r, i; return t ? (i = 0 <= (e >>>= 0) && e < 256) && (r = n[e]) ? r : (A = g(e, 0, !0), i && (n[e] = A), A) : (i = -128 <= (e |= 0) && e < 128) && (r = o[e]) ? r : (A = g(e, e < 0 ? -1 : 0, !1), i && (o[e] = A), A) } function a(e, t) { if (isNaN(e)) return t ? p : E; if (t) { if (e < 0) return p; if (h <= e) return Q } else { if (e <= -d) return y; if (d <= e + 1) return m } return e < 0 ? a(-e, t).neg() : g(e % l | 0, e / l | 0, t) } function g(e, A, r) { return new t(e, A, r) } t.fromInt = s, t.fromNumber = a, t.fromBits = g; var u = Math.pow; function I(e, t, A) { if (0 === e.length) throw Error("empty string"); if (t = "number" == typeof t ? (A = t, !1) : !!t, "NaN" === e || "Infinity" === e || "+Infinity" === e || "-Infinity" === e) return t ? p : E; if ((A = A || 10) < 2 || 36 < A) throw RangeError("radix"); var r; if (0 < (r = e.indexOf("-"))) throw Error("interior hyphen"); if (0 === r) return I(e.substring(1), t, A).neg(); for (var i = a(u(A, 8)), o = E, n = 0; n < e.length; n += 8) { var s = Math.min(8, e.length - n), c = parseInt(e.substring(n, n + s), A); o = (s < 8 ? (s = a(u(A, s)), o.mul(s)) : o = o.mul(i)).add(a(c)) } return o.unsigned = t, o } function c(e, t) { return "number" == typeof e ? a(e, t) : "string" == typeof e ? I(e, t) : g(e.low, e.high, "boolean" == typeof t ? t : e.unsigned) } t.fromString = I, t.fromValue = c; var l = 4294967296, h = l * l, d = h / 2, C = s(1 << 24), E = s(0), p = (t.ZERO = E, s(0, !0)), f = (t.UZERO = p, s(1)), B = (t.ONE = f, s(1, !0)), _ = (t.UONE = B, s(-1)), m = (t.NEG_ONE = _, g(-1, 2147483647, !1)), Q = (t.MAX_VALUE = m, g(-1, -1, !0)), y = (t.MAX_UNSIGNED_VALUE = Q, g(0, -2147483648, !1)), v = (t.MIN_VALUE = y, t.prototype); return v.toInt = function () { return this.unsigned ? this.low >>> 0 : this.low }, v.toNumber = function () { return this.unsigned ? (this.high >>> 0) * l + (this.low >>> 0) : this.high * l + (this.low >>> 0) }, v.toString = function (e) { if ((e = e || 10) < 2 || 36 < e) throw RangeError("radix"); if (this.isZero()) return "0"; var t, A; if (this.isNegative()) return this.eq(y) ? (A = a(e), A = (t = this.div(A)).mul(A).sub(this), t.toString(e) + A.toInt().toString(e)) : "-" + this.neg().toString(e); for (var r = a(u(e, 6), this.unsigned), i = this, o = ""; ;) { var n = i.div(r), s = (i.sub(n.mul(r)).toInt() >>> 0).toString(e); if ((i = n).isZero()) return s + o; for (; s.length < 6;)s = "0" + s; o = "" + s + o } }, v.getHighBits = function () { return this.high }, v.getHighBitsUnsigned = function () { return this.high >>> 0 }, v.getLowBits = function () { return this.low }, v.getLowBitsUnsigned = function () { return this.low >>> 0 }, v.getNumBitsAbs = function () { if (this.isNegative()) return this.eq(y) ? 64 : this.neg().getNumBitsAbs(); for (var e = 0 != this.high ? this.high : this.low, t = 31; 0 < t && 0 == (e & 1 << t); t--); return 0 != this.high ? t + 33 : t + 1 }, v.isZero = function () { return 0 === this.high && 0 === this.low }, v.eqz = v.isZero, v.isNegative = function () { return !this.unsigned && this.high < 0 }, v.isPositive = function () { return this.unsigned || 0 <= this.high }, v.isOdd = function () { return 1 == (1 & this.low) }, v.isEven = function () { return 0 == (1 & this.low) }, v.equals = function (e) { return i(e) || (e = c(e)), (this.unsigned === e.unsigned || this.high >>> 31 != 1 || e.high >>> 31 != 1) && this.high === e.high && this.low === e.low }, v.eq = v.equals, v.notEquals = function (e) { return !this.eq(e) }, v.neq = v.notEquals, v.ne = v.notEquals, v.lessThan = function (e) { return this.comp(e) < 0 }, v.lt = v.lessThan, v.lessThanOrEqual = function (e) { return this.comp(e) <= 0 }, v.lte = v.lessThanOrEqual, v.le = v.lessThanOrEqual, v.greaterThan = function (e) { return 0 < this.comp(e) }, v.gt = v.greaterThan, v.greaterThanOrEqual = function (e) { return 0 <= this.comp(e) }, v.gte = v.greaterThanOrEqual, v.ge = v.greaterThanOrEqual, v.compare = function (e) { var t, A; return i(e) || (e = c(e)), this.eq(e) ? 0 : (t = this.isNegative(), A = e.isNegative(), t && !A ? -1 : !t && A ? 1 : this.unsigned ? e.high >>> 0 > this.high >>> 0 || e.high === this.high && e.low >>> 0 > this.low >>> 0 ? -1 : 1 : this.sub(e).isNegative() ? -1 : 1) }, v.comp = v.compare, v.negate = function () { return !this.unsigned && this.eq(y) ? y : this.not().add(f) }, v.neg = v.negate, v.add = function (e) { i(e) || (e = c(e)); var t = 0, A = 0, r = 0, o = 0; return A += (r = r + ((o += (65535 & this.low) + (65535 & e.low)) >>> 16) + ((this.low >>> 16) + (e.low >>> 16))) >>> 16, g((r &= 65535) << 16 | (o &= 65535), ((t += (A += (65535 & this.high) + (65535 & e.high)) >>> 16) + ((this.high >>> 16) + (e.high >>> 16)) & 65535) << 16 | (A &= 65535), this.unsigned) }, v.subtract = function (e) { return i(e) || (e = c(e)), this.add(e.neg()) }, v.sub = v.subtract, v.multiply = function (e) { var t, r, o, n, s, u, l, h, d, I; return this.isZero() ? this : (i(e) || (e = c(e)), A ? g(A.mul(this.low, this.high, e.low, e.high), A.get_high(), this.unsigned) : e.isZero() ? this.unsigned ? p : E : this.eq(y) ? e.isOdd() ? y : E : e.eq(y) ? this.isOdd() ? y : E : this.isNegative() ? e.isNegative() ? this.neg().mul(e.neg()) : this.neg().mul(e).neg() : e.isNegative() ? this.mul(e.neg()).neg() : this.lt(C) && e.lt(C) ? a(this.toNumber() * e.toNumber(), this.unsigned) : (n = e.high >>> 16, s = 65535 & e.high, u = e.low >>> 16, I = (I = d = h = l = 0) + ((h = h + ((d += (o = 65535 & this.low) * (e = 65535 & e.low)) >>> 16) + (r = this.low >>> 16) * e) >>> 16) + ((h = (65535 & h) + o * u) >>> 16), g((h &= 65535) << 16 | (d &= 65535), (l = (l = (l += (I += (t = 65535 & this.high) * e) >>> 16) + ((I = (65535 & I) + r * u) >>> 16) + ((I = (65535 & I) + o * s) >>> 16)) + ((this.high >>> 16) * e + t * u + r * s + o * n) & 65535) << 16 | (I &= 65535), this.unsigned))) }, v.mul = v.multiply, v.divide = function (e) { if ((e = i(e) ? e : c(e)).isZero()) throw Error("division by zero"); var t, r, o; if (A) return this.unsigned || -2147483648 !== this.high || -1 !== e.low || -1 !== e.high ? g((this.unsigned ? A.div_u : A.div_s)(this.low, this.high, e.low, e.high), A.get_high(), this.unsigned) : this; if (this.isZero()) return this.unsigned ? p : E; if (this.unsigned) { if ((e = e.unsigned ? e : e.toUnsigned()).gt(this)) return p; if (e.gt(this.shru(1))) return B; r = p } else { if (this.eq(y)) return e.eq(f) || e.eq(_) ? y : e.eq(y) ? f : (o = this.shr(1).div(e).shl(1)).eq(E) ? e.isNegative() ? f : _ : (t = this.sub(e.mul(o)), o.add(t.div(e))); if (e.eq(y)) return this.unsigned ? p : E; if (this.isNegative()) return e.isNegative() ? this.neg().div(e.neg()) : this.neg().div(e).neg(); if (e.isNegative()) return this.div(e.neg()).neg(); r = E } for (t = this; t.gte(e);) { o = Math.max(1, Math.floor(t.toNumber() / e.toNumber())); for (var n = Math.ceil(Math.log(o) / Math.LN2), s = n <= 48 ? 1 : u(2, n - 48), l = a(o), h = l.mul(e); h.isNegative() || h.gt(t);)h = (l = a(o -= s, this.unsigned)).mul(e); l.isZero() && (l = f), r = r.add(l), t = t.sub(h) } return r }, v.div = v.divide, v.modulo = function (e) { return i(e) || (e = c(e)), A ? g((this.unsigned ? A.rem_u : A.rem_s)(this.low, this.high, e.low, e.high), A.get_high(), this.unsigned) : this.sub(this.div(e).mul(e)) }, v.mod = v.modulo, v.rem = v.modulo, v.not = function () { return g(~this.low, ~this.high, this.unsigned) }, v.countLeadingZeros = function () { return this.high ? Math.clz32(this.high) : Math.clz32(this.low) + 32 }, v.clz = v.countLeadingZeros, v.countTrailingZeros = function () { return this.low ? r(this.low) : r(this.high) + 32 }, v.ctz = v.countTrailingZeros, v.and = function (e) { return i(e) || (e = c(e)), g(this.low & e.low, this.high & e.high, this.unsigned) }, v.or = function (e) { return i(e) || (e = c(e)), g(this.low | e.low, this.high | e.high, this.unsigned) }, v.xor = function (e) { return i(e) || (e = c(e)), g(this.low ^ e.low, this.high ^ e.high, this.unsigned) }, v.shiftLeft = function (e) { return i(e) && (e = e.toInt()), 0 == (e &= 63) ? this : e < 32 ? g(this.low << e, this.high << e | this.low >>> 32 - e, this.unsigned) : g(0, this.low << e - 32, this.unsigned) }, v.shl = v.shiftLeft, v.shiftRight = function (e) { return i(e) && (e = e.toInt()), 0 == (e &= 63) ? this : e < 32 ? g(this.low >>> e | this.high << 32 - e, this.high >> e, this.unsigned) : g(this.high >> e - 32, 0 <= this.high ? 0 : -1, this.unsigned) }, v.shr = v.shiftRight, v.shiftRightUnsigned = function (e) { return i(e) && (e = e.toInt()), 0 == (e &= 63) ? this : e < 32 ? g(this.low >>> e | this.high << 32 - e, this.high >>> e, this.unsigned) : g(32 === e ? this.high : this.high >>> e - 32, 0, this.unsigned) }, v.shru = v.shiftRightUnsigned, v.shr_u = v.shiftRightUnsigned, v.rotateLeft = function (e) { var t; return i(e) && (e = e.toInt()), 0 == (e &= 63) ? this : 32 === e ? g(this.high, this.low, this.unsigned) : e < 32 ? g(this.low << e | this.high >>> (t = 32 - e), this.high << e | this.low >>> t, this.unsigned) : g(this.high << (e -= 32) | this.low >>> (t = 32 - e), this.low << e | this.high >>> t, this.unsigned) }, v.rotl = v.rotateLeft, v.rotateRight = function (e) { var t; return i(e) && (e = e.toInt()), 0 == (e &= 63) ? this : 32 === e ? g(this.high, this.low, this.unsigned) : e < 32 ? g(this.high << (t = 32 - e) | this.low >>> e, this.low << t | this.high >>> e, this.unsigned) : g(this.low << (t = 32 - (e -= 32)) | this.high >>> e, this.high << t | this.low >>> e, this.unsigned) }, v.rotr = v.rotateRight, v.toSigned = function () { return this.unsigned ? g(this.low, this.high, !1) : this }, v.toUnsigned = function () { return this.unsigned ? this : g(this.low, this.high, !0) }, v.toBytes = function (e) { return e ? this.toBytesLE() : this.toBytesBE() }, v.toBytesLE = function () { var e = this.high, t = this.low; return [255 & t, t >>> 8 & 255, t >>> 16 & 255, t >>> 24, 255 & e, e >>> 8 & 255, e >>> 16 & 255, e >>> 24] }, v.toBytesBE = function () { var e = this.high, t = this.low; return [e >>> 24, e >>> 16 & 255, e >>> 8 & 255, 255 & e, t >>> 24, t >>> 16 & 255, t >>> 8 & 255, 255 & t] }, t.fromBytes = function (e, A, r) { return r ? t.fromBytesLE(e, A) : t.fromBytesBE(e, A) }, t.fromBytesLE = function (e, A) { return new t(e[0] | e[1] << 8 | e[2] << 16 | e[3] << 24, e[4] | e[5] << 8 | e[6] << 16 | e[7] << 24, A) }, t.fromBytesBE = function (e, A) { return new t(e[4] << 24 | e[5] << 16 | e[6] << 8 | e[7], e[0] << 24 | e[1] << 16 | e[2] << 8 | e[3], A) }, e.default = t, "default" in e ? e.default : e }({}); void 0 !== (t = function () { return r }.apply(t, [])) && (e.exports = t) }, "23": function _(e, A, n) { "use strict"; function i(e) { return e } function r(e) { return e } function o(e) { return e } n.r(A), (C = s = s || {}).RTM_SEND_CUSTOM = "zm.scc", C.RTM_SEND_BCM = "zm.sbcm", C.RTM_SEND_RLM = "zm.srlm", C.RTM_SEND_BRM = "zm.sbrm", C.RTM_SEND_RAM = "zm.sram", C.MESSAGE_SEND_RELIABLE = "zm.msg.sdr", C.MESSAGE_FETCH_RELIABLE = "zm.msg.frm", C.MESSAGE_RELIABLE_RSP = "zm.msg.rlr", C.MESSAGE_RELIABLE_PUSH = "zm.msg.rps", C.MESSAGE_SEND_ROOM_MSG = "zm.msg.srm", C.MESSAGE_SEND_CUSTOM_MSG = "zm.msg.scm", C.MESSAGE_SEND_BIG_MSG = "zm.msg.sbm", C.MESSAGE_BIG_MSG_PUSH = "zm.msg.bps", C.MESSAGE_SEND_RELAY_MSG = "zm.msg.slm", C.SERVICE_PUSH = "zm.sv.ps"; var s, a, c = { "INPUT_PARAM": { "code": 1100001, "msg": "input parm error." }, "TIMEOUT": { "code": 1100002, "msg": "network timeout." }, "NOT_LOGIN": { "code": 1000002, "msg": "not login" }, "IM_CONTENT_NULL": { "code": 1009001, "msg": "message content is empty" }, "IM_CONTENT_TOO_LONG": { "code": 1009002, "msg": "message content is too long" }, "IM_SEND_FAILED": { "code": 1009010, "msg": "failed to send message" }, "ROOM_NOT_EXIST": { "code": 1002014, "msg": "room not exist" }, "ROOM_INNER_ERROR": { "code": 1002099, "msg": "room inner error" }, "TRANS_FREQUENTLY": { "code": 1102022, "msg": "trans send frequently" }, "FREQ_LIMITED": { "code": 1109001, "msg": "frequency limited." } }, g = { "kZMLoginRoom": { "event": "/sdk/login" }, "kZMLiveSendRoomBigIM": { "event": "/liveroom/send_big_room_message", "room_sid_string": i, "error": { "INPUT_PARAM": c.INPUT_PARAM, "IM_CONTENT_NULL": c.IM_CONTENT_NULL, "IM_CONTENT_TOO_LONG": c.IM_CONTENT_TOO_LONG, "ROOM_NOT_EXIST": c.ROOM_NOT_EXIST } }, "kZMRoomSendCustomCommand": { "event": "/liveroom/send_custom_command", "room_sid_string": i, "request_id": r, "error": { "INPUT_PARAM": c.INPUT_PARAM, "IM_CONTENT_NULL": c.IM_CONTENT_NULL, "IM_CONTENT_TOO_LONG": c.IM_CONTENT_TOO_LONG, "ROOM_NOT_EXIST": c.ROOM_NOT_EXIST } }, "kZMRoomSendRoomMessage": { "event": "/liveroom/send_room_message", "room_id": r, "room_sid_string": r, "msg_content_size": o, "send_seq": o, "msg_id": o, "error": { "INPUT_PARAM": c.INPUT_PARAM, "IM_CONTENT_NULL": c.IM_CONTENT_NULL, "IM_CONTENT_TOO_LONG": c.IM_CONTENT_TOO_LONG, "ROOM_NOT_EXIST": c.ROOM_NOT_EXIST } }, "kZMRoomSendRoomExtraInfo": { "event": "/liveroom/set_room_extrainfo", "room_id": r, "room_sid_string": i, "key": r, "value": r, "error": { "INPUT_PARAM": c.INPUT_PARAM, "TRANS_FREQUENTLY": c.TRANS_FREQUENTLY, "ROOM_NOT_EXIST": c.ROOM_NOT_EXIST } }, "kZMRoomGetRoomExtraInfo": { "event": "/liveroom/get_room_extrainfo", "fetch_array": i, "result_array": i, "error": { "INPUT_PARAM": c.INPUT_PARAM, "TRANS_FREQUENTLY": c.TRANS_FREQUENTLY, "ROOM_NOT_EXIST": c.ROOM_NOT_EXIST } }, "kZMRoomRecvRoomExtraInfo": { "event": "/liveroom/recv_room_extrainfo", "trans_type": r, "trans_seq": o, "error": { "ROOM_NOT_EXIST": c.ROOM_NOT_EXIST } }, "kZMLiveRecvRoomBigIM": { "event": "/liveroom/recv_big_room_message", "error": { "ROOM_NOT_EXIST": c.ROOM_NOT_EXIST } }, "kZMRoomGetRoomMessage": { "event": "/liveroom/recv_room_message", "error": { "ROOM_NOT_EXIST": c.ROOM_NOT_EXIST } }, "kZMRoomRecvCustomCommand": { "event": "/liveroom/recv_custom_command", "error": { "ROOM_NOT_EXIST": c.ROOM_NOT_EXIST } } }, C = ((C = a = a || {})[C.I = 0] = "I", C[C.H = 10] = "H", C[C.M = 100] = "M", C[C.L = 1e3] = "L", n(1)), I = n.n(C), p = (E.prototype.loginRsp = function (e) { var t, A = this; if (null != e.body.ret_timestamp && "string" == typeof e.body.ret_timestamp && (t = parseFloat(e.body.ret_timestamp), this.serverTimeOffset = 0 == t ? 0 : e.body.ret_timestamp - (new Date).getTime()), e.body.bigim_time_window && "number" == typeof e.body.bigim_time_window && (this.bigimTimeWindow = e.body.bigim_time_window), e.body.dati_time_window && "number" == typeof e.body.dati_time_window && (this.datiTimeWindow = e.body.dati_time_window), e.body.trans_seqs) for (var r = 0; r < e.body.trans_seqs.length; r++) { var i = e.body.trans_seqs[r].trans_channel, o = e.body.trans_seqs[r].trans_seq_array; 0 < (o = (o = o.filter(function (e) { var t = e.trans_type; return e = e.trans_seq, !A.transSeqMap[t] || A.transSeqMap[t].seq < e })).map(function (e) { return { "trans_type": e.trans_type, "trans_local_seq": e.trans_seq } })).length && this.fetchReliableMessage(i, o) } }, E.prototype.sendReliableMessage = function (e, t, A, r) { var i = this; this.logger.info(s.MESSAGE_SEND_RELIABLE + " call"), this.room.isLogin() ? this.isReliable ? (this.logger.error(s.MESSAGE_SEND_RELIABLE + " send too often"), r(g.kZMRoomSendRoomExtraInfo.error.TRANS_FREQUENTLY)) : (this.transSeqMap[e] || (this.transSeqMap[e] = { "seq": 0 }), t = { "trans_type": e, "trans_data": t, "trans_local_seq": this.transSeqMap[e].seq, "trans_channel": "clt" }, this.isReliable = !0, (this.stateCenter.useNetAgent ? this.liveRoomHandler : this.service).sendReliableMessage(t, function (t) { i.transSeqMap[e].seq = t.body.trans_seq, i.logger.info(s.MESSAGE_SEND_RELIABLE + " trans " + e + " seq " + t.body.trans_seq), i.isReliable = !1, A({ "seq": t.header.seq, "errorCode": 0 }) }, function (e) { var t = c.ROOM_INNER_ERROR; e.body && e.body.err_code ? (t = i.rtm.getServerError(e.body.err_code), i.logger.error(s.MESSAGE_SEND_ROOM_MSG + "  " + t.msg)) : t = e, i.isReliable = !1, r(t) }, this.room)) : (this.logger.error(s.MESSAGE_SEND_RELIABLE + " state error"), r && r(c.NOT_LOGIN)) }, E.prototype.fetchReliableMessage = function (e, A) { function t(e) { r.handleFetchTransRsp(e, i) } var r = this, i = (e = { "trans_channel": e, "fetch_array": A }, this.stateCenter.reporter.createSpan(a.H, { "key": g.kZMLoginRoom.event, "par": this.room.roomID }, { "key": "" }, g.kZMRoomGetRoomExtraInfo.event)); i.setAttributes({ "fetch_array": g.kZMRoomGetRoomExtraInfo.fetch_array(A) }), (this.stateCenter.useNetAgent ? this.liveRoomHandler : this.service).fetchReliableMessage(e, t, t, this.room), this.logger.info(s.MESSAGE_FETCH_RELIABLE + " call success") }, E.prototype.handleFetchTransRsp = function (e, t) { if (e.body && 0 != e.body.err_code) this.logger.error(s.MESSAGE_RELIABLE_RSP + " trans send error " + e.body.err_code), this.stateCenter.tracer.setError(t, { "code": e.body.err_code }); else if (e.header && e.body) { var A = e.body.trans_fetch_results, r = [], i = []; if (Array.isArray(A) && 0 < A.length) { for (var o = 0; o < A.length; o++) { var n, a, u = A[o]; 1000001109 === u.err_code ? this.logger.warn(s.MESSAGE_RELIABLE_RSP + " fetch trans unknown type " + u.err_code) : (i.push({ "trans_type": n = u.trans_type, "trans_seq": a = u.trans_seq }), 1000001110 === u.err_code ? (this.logger.warn(s.MESSAGE_RELIABLE_RSP + " fetch trans seq is wrong " + u.err_code), this.transSeqMap[n] = { "seq": a }) : !this.transSeqMap[n] || this.transSeqMap[n].seq < a ? (this.transSeqMap[n] = { "seq": a }, r.push(u)) : this.logger.warn(s.MESSAGE_RELIABLE_RSP + " fetch trans seq wrong")) } 0 < r.length && this.onRecvReliableMessage(r) } t.setAttributes({ "result_array": g.kZMRoomGetRoomExtraInfo.result_array(i) }), t.end() } else this.logger.error(s.MESSAGE_RELIABLE_RSP + " trans send error " + e), this.stateCenter.tracer.setError(t, c.TIMEOUT) }, E.prototype.handlePushTransMsg = function (e) { var t, A = e.body.trans_type, r = e.body.trans_seq; !this.transSeqMap[A] || this.transSeqMap[A].seq < r ? (this.transSeqMap[A] = { "seq": r }, (null == (t = null == e ? void 0 : e.body) ? void 0 : t.trans_idname) !== this.stateCenter.idName ? this.onRecvReliableMessage([e.body]) : this.logger.warn(s.MESSAGE_RELIABLE_PUSH + " id name same")) : this.logger.warn(s.MESSAGE_RELIABLE_PUSH + " trans seq wrong"), this.logger.info(s.MESSAGE_RELIABLE_PUSH + " trans " + A + " seq " + r) }, E.prototype.sendRoomMsg = function (e, t, A, r, i, o) { var n = this; if (!this.room.isLogin()) return this.logger.error(s.MESSAGE_SEND_ROOM_MSG + " state error"), o(c.NOT_LOGIN), !1; var a = Date.parse(new Date + ""); return 0 < this.sendRoomMsgTime && this.sendRoomMsgTime + this.sendRoomMsgInterval > a ? (this.logger.info(s.MESSAGE_SEND_ROOM_MSG + " freq error"), o && o(c.FREQ_LIMITED, 0, e, r), !1) : (this.sendRoomMsgTime = a, a = (this.stateCenter.useNetAgent ? this.liveRoomHandler : this.service).sendRoomMsg({ "msg_category": e, "msg_type": 1, "msg_priority": 1, "msg_content": r }, function (e) { i({ "seq": e.header.seq, "errorCode": 0, "messageID": e.body.msg_id }) }, function (e) { var t, A, r = c.ROOM_INNER_ERROR; e.header && e.body ? (A = (t = [n.rtm.getServerError(e.body.err_code), e.body.msg_id])[1], n.logger.error(s.MESSAGE_SEND_ROOM_MSG + "  " + (r = t[0]).msg), o({ "seq": e.header.seq, "errorCode": (r = r == c.TIMEOUT ? c.IM_SEND_FAILED : r).code, "messageID": A })) : (e.code && e.msg && (r = e), o({ "seq": 0, "errorCode": r.code, "messageID": 0 })) }, this.room), this.stateCenter.reporter.spanSetAttributes({ "key": g.kZMRoomSendRoomMessage.event, "par": null == (e = this.room) ? void 0 : e.roomID }, { "send_seq": g.kZMRoomSendRoomMessage.send_seq(a) }), this.logger.info(s.MESSAGE_SEND_ROOM_MSG + "  call success"), !0) }, E.prototype.handlePushRoomMsg = function (e) { var t, A = []; this.stateCenter.useNetAgent ? (t = e.body.msg_data, e.body.msg_data.forEach(function (e) { e = { "fromUser": { "userID": e.id_name, "userName": e.nick_name }, "message": e.msg_content, "sendTime": e.send_time.toNumber(), "messageID": e.msg_id.toNumber() }, A.push(e) }), e.body.server_msg_id = e.body.server_msg_id.toNumber(), e.body.ret_msg_id = e.body.ret_msg_id.toNumber()) : (t = e.body.chat_data, e.body.chat_data.forEach(function (e) { A.push(e = { "fromUser": { "userID": e.id_name, "userName": e.nick_name }, "message": e.msg_content, "sendTime": e.send_time, "messageID": e.msg_id }) })), this.stateCenter.actionListener("IMRecvBroadcastMessage", this.room.roomID, A), this.stateCenter.actionListener("_recvRoomMsg", t, e.body.server_msg_id, e.body.ret_msg_id) }, E.prototype.sendCustomCommand = function (e, t, A, r) { var i, o = this; return this.room.isLogin() ? (t = { "from_userid": this.stateCenter.idName, "from_username": this.stateCenter.nickName, "request_id": this.stateCenter.getRequestId(), "custom_content": t || "", "room_id": this.room.roomID }, this.stateCenter.reporter.spanSetAttributes({ "key": g.kZMRoomSendCustomCommand.event, "par": null == (i = this.room) ? void 0 : i.roomID }, { "request_id": g.kZMRoomSendCustomCommand.request_id(t.request_id) }), i = { "dest_id_name": e, "custom_msg": JSON.stringify(t) }, (this.stateCenter.useNetAgent ? this.liveRoomHandler : this.service).sendCustomCommand(i, function (e) { A({ "seq": e.header.seq, "errorCode": 0 }) }, function (e) { var t, A = o.rtm.getServerError(e.body.err_code); o.logger.error(s.MESSAGE_SEND_CUSTOM_MSG + " " + A.msg), t = 2 === (null == (t = e.body) ? void 0 : t.err_code) ? c.INPUT_PARAM : A == c.TIMEOUT ? c.IM_SEND_FAILED : A, r({ "seq": e.header.seq, "errorCode": t.code, "code": t.code }) }, this.room), this.logger.info(s.MESSAGE_SEND_CUSTOM_MSG + " call success"), !0) : (this.logger.error(s.MESSAGE_SEND_CUSTOM_MSG + " state error"), r(c.NOT_LOGIN), !1) }, E.prototype.handlePushCustomMsg = function (e) { e = [(e = JSON.parse(e.body.custommsg)).from_userid, e.from_username, e.room_id, e.custom_content], this.stateCenter.actionListener("IMRecvCustomCommand", e[2], { "userID": e[0], "userName": e[1] }, e[3]) }, E.prototype.sendBigRoomMessage = function (e, t, A, r, i, o) { var n, a, g, u, l = this; this.room.isLogin() ? (n = this.bigimTimeWindow, a = this.serverTimeOffset, g = (new Date).getTime() + a, u = this.rtm.getSeq().toString(), this.bigImCallbackMap[u] = { "success": i, "error": o }, 0 == n ? this.sendBigRoomMessageInternal([{ "msg_category": e, "msg_type": 1, "msg_content": r, "bigmsg_client_id": u }], function (e) { l.handleBigImMsgRsp(e) }, function (e) { o && o(e) }) : (i = Math.floor(g / n), this.bigImLastTimeIndex < i && 0 == this.bigIMmessageList.length ? (this.bigImLastTimeIndex = i, this.sendBigRoomMessageInternal([{ "msg_category": e, "msg_type": 1, "msg_content": r, "bigmsg_client_id": u }], function (e) { l.handleBigImMsgRsp(e) }, function (e) { o && o(e) })) : (this.bigIMmessageList.push({ "msg_category": e, "msg_type": 1, "msg_content": r, "bigmsg_client_id": u }), 1 == this.bigIMmessageList.length && this.setBigImTimer(a, n)))) : (this.logger.error(s.MESSAGE_SEND_BIG_MSG + " state error"), o && o(c.NOT_LOGIN)) }, E.prototype.sendBigRoomMessageInternal = function (e, t, A) { (this.stateCenter.useNetAgent ? this.liveRoomHandler : this.service).sendBigRoomMessage({ "msgs": e }, function (e) { t(e) }, function (e) { var t = c.ROOM_INNER_ERROR; e.header && e.body || (e.code && e.msg && (t = e), A(t)), A(t) }, this.room), this.logger.info(s.MESSAGE_SEND_BIG_MSG + " sendBigRoomMessage called") }, E.prototype.handleBigImMsgRsp = function (e) { this.bigimTimeWindow = e.body.bigim_time_window; for (var t = 0; t < e.body.msgs.length; t++) { var A, r = e.body.msgs[t].bigmsg_client_id; this.bigImCallbackMap[r] && (null != (A = this.bigImCallbackMap[r].success) && A({ "seq": e.header.seq, "errorCode": 0, "messageID": e.body.msgs[t].bigmsg_id }), delete this.bigImCallbackMap[r]) } }, E.prototype.setBigImTimer = function (e, t) { var A = this; e = t - ((new Date).getTime() + e) % t, t = this.rtm.generateRandumNumber(t) + e, this.bigImTimer = setTimeout(function () { A.onBigImTimer() }, t) }, E.prototype.onBigImTimer = function () { for (var e = this, t = (new Date).getTime() + this.serverTimeOffset, A = (this.bigImLastTimeIndex = Math.floor(t / this.bigimTimeWindow), []), r = [], i = 0; i < this.bigIMmessageList.length && !(20 <= i); i++) { var o = this.bigIMmessageList[i]; A.push({ "msg_category": o.msg_category, "msg_type": o.msg_type, "msg_content": o.msg_content, "bigmsg_client_id": o.bigmsg_client_id }), r.push(o.bigmsg_client_id) } 20 < this.bigIMmessageList.length ? this.bigIMmessageList.splice(0, 20) : this.bigIMmessageList = [], this.sendBigRoomMessageInternal(A, function (t) { e.handleBigImMsgRsp(t) }, function (t, A) { for (var i = 0; i < r.length; i++) { var o = r[i], n = e.bigImCallbackMap[o]; n && (null != n.error && n.error(t, A), delete e.bigImCallbackMap[o]) } }), this.bigImTimer && clearTimeout(this.bigImTimer), this.bigImTimer = null, 0 < this.bigIMmessageList.length && this.setBigImTimer(this.serverTimeOffset, this.bigimTimeWindow) }, E.prototype.handlePushMergeMsg = function (e) { for (var t = 0; t < e.body.messages.length; t++)14001 !== e.body.messages[t].sub_cmd && "/lr/push/bigim_chat" !== e.body.messages[t].sub_cmd || this.handlePushBigRooMsg(e.body.messages[t].msg_body) }, E.prototype.handlePushBigRooMsg = function (e) { var t; if ("string" == typeof e) try { t = JSON.parse(e) } catch (e) { return void this.logger.warn(s.MESSAGE_BIG_MSG_PUSH + "parse json error") } else t = e; if (t) { e = t.room_id; for (var A = [], r = 0; r < t.msg_data.length; r++) { var i = t.msg_data[r]; i.id_name == this.stateCenter.idName ? this.logger.info(s.MESSAGE_BIG_MSG_PUSH + " self message") : A.push({ "idName": i.id_name, "nickName": i.nick_name, "messageId": i.bigmsg_id, "category": i.msg_category, "type": i.msg_type, "content": i.msg_content, "time": i.send_time || I.a.isLong(i.msg_timestamp) && i.msg_timestamp.toNumber() }) } 0 == A.length ? this.logger.info(s.MESSAGE_BIG_MSG_PUSH + " no other pushData except self") : this.onRecvBigRoomMessage(A, e), this.logger.info(s.MESSAGE_BIG_MSG_PUSH + "call success") } else this.logger.warn(s.MESSAGE_BIG_MSG_PUSH + " cann't find message body") }, E.prototype.onRecvBigRoomMessage = function (e, t) { var A = []; e.forEach(function (e) { A.push(e = { "fromUser": { "userID": e.idName, "userName": e.nickName }, "message": e.content, "sendTime": e.time, "messageID": e.messageId }) }), this.stateCenter.actionListener("IMRecvBarrageMessage", t, A), this.stateCenter.actionListener("_recvBigRoomMessage", e, t) }, E.prototype.resetMessageInfo = function () { this.transSeqMap = {}, this.realyMessageList = [], this.relayTimer && (clearTimeout(this.relayTimer), this.relayTimer = null), this.bigImLastTimeIndex = 0, this.bigIMmessageList = [], this.bigImCallbackMap = {}, this.bigImTimer && (clearTimeout(this.bigImTimer), this.bigImTimer = null), this.serverTimeOffset = 0, this.datiTimeWindow = 0, this.bigimTimeWindow = 0 }, E.prototype.sendRelayMessage = function (e, t, A, r) { var i = this.datiTimeWindow, o = this.serverTimeOffset; 0 < i ? (this.realyMessageList.push({ "type": e, "data": t, "success": A, "error": r }), 1 == this.realyMessageList.length && this.setRelayTimer(o, i)) : this.sendRelayMessageInternal(e, t, A, r) }, E.prototype.sendRelayMessageInternal = function (e, t, A, r) { var i = this; this.logger.info(s.MESSAGE_SEND_RELAY_MSG + " call"), (this.stateCenter.useNetAgent ? this.liveRoomHandler : this.service).sendRelayMessage(e = { "relay_type": e, "relay_data": t }, function (e) { A && A(e.header.seq, e.body.relay_result) }, function (e) { var t = c.ROOM_INNER_ERROR; e.header && e.body ? r && r(i.rtm.getServerError(e.body.err_code), e.header.seq) : (e.code && e.msg && (t = e), r && r(t, 0)) }, t = this.room) }, E.prototype.setRelayTimer = function (e, t) { var A = this; e = (new Date).getTime() + e, e = this.rtm.generateRandumNumber(2 * t - e % t), this.logger.info(s.MESSAGE_SEND_RELAY_MSG + " setTimer " + e), this.relayTimer = setTimeout(function () { A.onRelayTimer() }, e) }, E.prototype.onRelayTimer = function () { var e; 0 == this.realyMessageList.length ? this.logger.info(s.MESSAGE_SEND_RELAY_MSG + "  no relay data") : (this.sendRelayMessageInternal((e = this.realyMessageList[0]).type, e.data, e.success, e.error), this.relayTimer && clearTimeout(this.relayTimer), this.relayTimer = null, this.realyMessageList.splice(0, 1), 0 < this.realyMessageList.length && this.setRelayTimer(this.serverTimeOffset, this.datiTimeWindow)) }, E); function E(e, t, A, r, i, o, n) { var s = this; this.logger = e, this.stateCenter = t, this.dataReport = A, this.service = r, this.liveRoomHandler = i, this.rtm = o, this.room = n, this.sendRoomMsgTime = 0, this.sendRoomMsgInterval = 500, this.bigImCallbackMap = {}, this.bigImLastTimeIndex = 0, this.bigIMmessageList = [], this.bigImTimer = null, this.relayTimer = null, this.serverTimeOffset = 0, this.datiTimeWindow = 0, this.bigimTimeWindow = 0, this.isReliable = !1, this.transSeqMap = {}, this.onRecvReliableMessage = function (e) { var t = e.map(function (e) { return { "key": e.trans_type, "value": e.trans_data, "updateUser": { "userID": e.trans_idname, "userName": e.trans_nickname }, "updateTime": I.a.isLong(e.trans_send_time) ? e.trans_send_time.toNumber() : e.trans_send_time } }); 0 < t.length && s.stateCenter.actionListener("roomExtraInfoUpdate", s.room.roomID, t), e.forEach(function (e) { s.stateCenter.actionListener("recvReliableMessage", e.trans_type, e.trans_seq, e.trans_data) }) }, this.realyMessageList = [] } function u(e, t, A, r) { var i = this; return void 0 === A && (A = 1), void 0 === r && (r = 1), new Promise(function (o, n) { var a, c = i.getMsgSpan(g.kZMRoomSendRoomMessage.event, e, !0), u = (n = i.stateCenter.proxyRes(c, function (e) { c.setAttributes({ "msg_id": g.kZMRoomSendRoomMessage.msg_id(e.messageID) }), o(e) }, n)).interResolve; n = n.interReject, "string" != typeof e || "" == e ? (i.logger.error(s.RTM_SEND_BCM + " roomid must be string and not empty"), n(g.kZMRoomSendRoomMessage.error.INPUT_PARAM, " param roomID error")) : void 0 === t || "" == t ? (i.logger.error(s.RTM_SEND_BCM + " message is empty"), n(g.kZMRoomSendRoomMessage.error.IM_CONTENT_NULL)) : "string" != typeof t ? (i.logger.error(s.RTM_SEND_BCM + " message must be string"), n(g.kZMRoomSendRoomMessage.error.INPUT_PARAM, " param message error")) : 1024 < t.length ? (i.logger.error(s.RTM_SEND_BCM + " message too long"), n(g.kZMRoomSendRoomMessage.error.IM_CONTENT_TOO_LONG)) : (a = i.getRoomModules(e), c.setAttributes({ "send_seq": g.kZMRoomSendRoomMessage.send_seq(), "msg_content": t }), a ? a.messageHandler.sendRoomMsg(A, r, e, t, function (e) { e.messageID && c.setAttributes({ "msg_id": e.messageID }), u(e) }, n) : n(g.kZMRoomSendRoomMessage.error.ROOM_NOT_EXIST)) }) } function l(e, t, A) { var r = this; return new Promise(function (i, o) { var n, a, u = r.getMsgSpan(g.kZMRoomSendCustomCommand.event, e, !0); o = (i = r.stateCenter.proxyRes(u, i, o)).interResolve, i = i.interReject, "string" != typeof e || "" == e ? (r.logger.error(s.RTM_SEND_CUSTOM + " roomid must be string and not empty"), i(c.INPUT_PARAM, " param roomID error")) : A instanceof Array && !A.find(function (e) { return "string" != typeof e }) ? "string" != typeof t && "object" != (void 0 === t ? "undefined" : _typeof(t)) ? (r.logger.error(s.RTM_SEND_CUSTOM + " custom content must be a non empty string or object"), i(g.kZMRoomSendCustomCommand.error.INPUT_PARAM, " param command error")) : "string" == typeof t && 1024 < t.length ? (r.logger.error(s.RTM_SEND_CUSTOM + " command too long"), i(g.kZMRoomSendCustomCommand.error.IM_CONTENT_TOO_LONG)) : (n = r.getRoomModules(e), a = "string" == typeof t ? t : JSON.stringify(t), u.setAttributes({ "msg_content": a }), n ? n.messageHandler.sendCustomCommand(A, t, o, i) : i(g.kZMRoomSendCustomCommand.error.ROOM_NOT_EXIST)) : (r.logger.error(s.RTM_SEND_CUSTOM + " dstMembers must be string array"), i(g.kZMRoomSendCustomCommand.error.INPUT_PARAM, " param toUserList error")) }) } function d(e, t, A, r) { var i = this; return void 0 === A && (A = 1), void 0 === r && (r = 1), new Promise(function (o, n) { var a = i.getMsgSpan(g.kZMLiveSendRoomBigIM.event, e); n = (o = i.stateCenter.proxyRes(a, o, n)).interResolve, o = o.interReject, "string" != typeof e || "" == e ? (i.logger.error(s.RTM_SEND_BRM + "roomid must be string and not empty"), o(g.kZMLiveSendRoomBigIM.error.INPUT_PARAM, " param roomID error")) : void 0 === t || "" == t ? (i.logger.error(s.RTM_SEND_BRM + " message is empty"), o(g.kZMLiveSendRoomBigIM.error.IM_CONTENT_NULL)) : "string" != typeof t ? (i.logger.error(s.RTM_SEND_BRM + " message must be string"), o(g.kZMLiveSendRoomBigIM.error.INPUT_PARAM, " param message error")) : 1024 < t.length ? (i.logger.error(s.RTM_SEND_BRM + " message too long"), o(g.kZMLiveSendRoomBigIM.error.IM_CONTENT_TOO_LONG)) : (a.setAttributes({ "msg_content": t }), (a = i.getRoomModules(e)) ? a.messageHandler.sendBigRoomMessage(A, r, e, t, n, o) : o(g.kZMLiveSendRoomBigIM.error.ROOM_NOT_EXIST)) }) } function h(e, t, A) { var r = this; return new Promise(function (i, o) { var n = r.getMsgSpan(g.kZMRoomSendRoomExtraInfo.event, e); o = (i = r.stateCenter.proxyRes(n, i, o)).interResolve, i = i.interReject, "string" != typeof e || "" == e ? (r.logger.error(s.RTM_SEND_BCM + " roomid must be string and not empty"), i(g.kZMRoomSendRoomMessage.error.INPUT_PARAM, " param roomID error")) : t && "string" == typeof t ? 128 < t.length ? (r.logger.error(s.RTM_SEND_RLM + " type is too long"), i({ "errorCode": g.kZMRoomSendRoomExtraInfo.error.INPUT_PARAM.code })) : A && "string" == typeof A ? 4096 < A.length ? (r.logger.error(s.RTM_SEND_RLM + " type is too long"), i({ "errorCode": g.kZMRoomSendRoomExtraInfo.error.INPUT_PARAM.code })) : (n.setAttributes({ "key": g.kZMRoomSendRoomExtraInfo.key(t), "value": g.kZMRoomSendRoomExtraInfo.value(A) }), (n = r.getRoomModules(e)) ? n.messageHandler.sendReliableMessage(t, A, o, i) : i(g.kZMRoomSendRoomExtraInfo.error.ROOM_NOT_EXIST)) : (r.logger.error(s.RTM_SEND_RLM + " data must be string"), i({ "errorCode": g.kZMRoomSendRoomExtraInfo.error.INPUT_PARAM.code })) : (r.logger.error(s.RTM_SEND_RLM + " type must be string"), i({ "errorCode": g.kZMRoomSendRoomExtraInfo.error.INPUT_PARAM.code })) }) } var f = { "_sendBroadcastMessage": u, "sendBroadcastMessage": function sendBroadcastMessage(e, t) { var A = this; return new Promise(function (r, i) { u.call(A, e, t).then(function (e) { r({ "errorCode": e.errorCode, "messageID": e.messageID, "extendedData": e.extendedData }) }).catch(function (e) { i(e) }) }) }, "_sendCustomCommand": l, "sendCustomCommand": function sendCustomCommand(e, t, A) { var r = this; return new Promise(function (i, o) { l.call(r, e, t, A).then(function (e) { i({ "errorCode": e.errorCode, "extendedData": e.extendedData }) }).catch(function (e) { o(e) }) }) }, "_sendBarrageMessage": d, "sendBarrageMessage": function sendBarrageMessage(e, t) { var A = this; return new Promise(function (r, i) { d.call(A, e, t).then(function (e) { r({ "errorCode": e.errorCode, "messageID": e.messageID, "extendedData": e.extendedData }) }).catch(function (e) { i(e) }) }) }, "_setRoomExtraInfo": h, "setRoomExtraInfo": function setRoomExtraInfo(e, t, A) { return h.call(this, e, t, A) }, "sendRelayMessage": function sendRelayMessage(e, t, A, r, i) { (i = this.getRoomModules(i) || this.stateCenter.roomModulesList[0]) ? i.messageHandler.sendRelayMessage(e, t, A, r) : r && r(c.ROOM_NOT_EXIST, 0) } }, B = { "handlePushRoomMsg": function handlePushRoomMsg(e) { var t = this.handlePushMsg(e); t[0].messageHandler.handlePushRoomMsg(e = t[1]) }, "handlePushCustomMsg": function handlePushCustomMsg(e) { var t = this.handlePushMsg(e); t[0].messageHandler.handlePushCustomMsg(e = t[1]) }, "handlePushMergeMsg": function handlePushMergeMsg(e) { var t = null == (t = null == e ? void 0 : e.header) ? void 0 : t.room_id; (t = this.rtm.getRoomModules(t)) ? t.messageHandler.handlePushMergeMsg(e) : this.logger.error(s.SERVICE_PUSH + " room no found ignore " + JSON.stringify(e)) }, "handlePushTransMsg": function handlePushTransMsg(e) { var t, A = (r = this.handlePushMsg(e))[0], r = null == (r = null == (e = r[1]) ? void 0 : e.header) ? void 0 : r.room_id; (r = this.rtm.getMsgSpan(g.kZMRoomRecvRoomExtraInfo.event, r)).setAttributes({ "trans_type": g.kZMRoomRecvRoomExtraInfo.trans_type(null == (t = null == e ? void 0 : e.body) ? void 0 : t.trans_type), "trans_seq": g.kZMRoomRecvRoomExtraInfo.trans_seq(null == (t = null == e ? void 0 : e.body) ? void 0 : t.trans_seq) }), r.end(), A.messageHandler.handlePushTransMsg(e) }, "handleBigImMsgRsp": function handleBigImMsgRsp(e) { var t = null == (t = null == e ? void 0 : e.header) ? void 0 : t.room_id; (t = this.rtm.getRoomModules(t)) ? t.messageHandler.handleBigImMsgRsp(e) : this.logger.error(s.SERVICE_PUSH + " room no found ignore " + JSON.stringify(e)) }, "handlePushMsg": function handlePushMsg(e) { var t = null == (t = null == e ? void 0 : e.header) ? void 0 : t.room_id; if (t = this.rtm.getRoomModules(t)) return [t, e]; this.logger.error(s.SERVICE_PUSH + " room no found ignore " + JSON.stringify(e)) } }, m = { "initMessageHandler": function initMessageHandler() { this.messageHandler = new p(this.logger, this.stateCenter, this.dataReport, this.service, this.liveRoomHandler, this.rtm, this) } }; A.default = { "type": "message", "install": function install(e, t, A, r) { for (var i in f) Object.defineProperty(e.prototype, i, { "value": f[i], "writable": !1 }); for (var i in B) Object.defineProperty(A.prototype, i, { "value": B[i], "writable": !1 }), Object.defineProperty(r.prototype, i, { "value": B[i], "writable": !1 }); for (var i in m) Object.defineProperty(t.prototype, i, { "value": m[i], "writable": !1 }) } } } }, t = {}, A.m = e, A.c = t, A.d = function (e, t, r) { A.o(e, t) || Object.defineProperty(e, t, { "enumerable": !0, "get": r }) }, A.r = function (e) { "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, { "value": "Module" }), Object.defineProperty(e, "__esModule", { "value": !0 }) }, A.t = function (e, t) { if (1 & t && (e = A(e)), 8 & t) return e; if (4 & t && "object" == (void 0 === e ? "undefined" : _typeof(e)) && e && e.__esModule) return e; var r = Object.create(null); if (A.r(r), Object.defineProperty(r, "default", { "enumerable": !0, "value": e }), 2 & t && "string" != typeof e) for (var i in e) A.d(r, i, function (t) { return e[t] }.bind(null, i)); return r }, A.n = function (e) { var t = e && e.__esModule ? function () { return e.default } : function () { return e }; return A.d(t, "a", t), t }, A.o = function (e, t) { return Object.prototype.hasOwnProperty.call(e, t) }, A.p = "", A(A.s = 23); function A(r) { var i; return (t[r] || (i = t[r] = { "i": r, "l": !1, "exports": {} }, e[r].call(i.exports, i, i.exports, A), i.l = !0, i)).exports } var e, t }() }, "4119": function _(e) { "use strict"; e.exports = __WEBPACK_EXTERNAL_MODULE__4119__ } }, __webpack_module_cache__ = {}; function __webpack_require__(e) { var t = __webpack_module_cache__[e]; if (void 0 !== t) return t.exports; var A = __webpack_module_cache__[e] = { "exports": {} }; return __webpack_modules__[e].call(A.exports, A, A.exports, __webpack_require__), A.exports } __webpack_require__.g = function () { if ("object" == ("undefined" == typeof globalThis ? "undefined" : _typeof(globalThis))) return globalThis; try { return this || new Function("return this")() } catch (e) { if ("object" == ("undefined" == typeof window ? "undefined" : _typeof(window))) return window } }(), __webpack_require__.r = function (e) { "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, { "value": "Module" }), Object.defineProperty(e, "__esModule", { "value": !0 }) }; var __webpack_exports__ = __webpack_require__(2708); return __webpack_exports__ }() }, "object" == _typeof(exports) && "object" == _typeof(module) ? module.exports = e(__webpack_require__(154)) : (__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(154)], void 0 === (__WEBPACK_AMD_DEFINE_RESULT__ = "function" == typeof (__WEBPACK_AMD_DEFINE_FACTORY__ = e) ? __WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__) : __WEBPACK_AMD_DEFINE_FACTORY__) || (module.exports = __WEBPACK_AMD_DEFINE_RESULT__)) }).call(this, __webpack_require__(29)(module)) }, "244": function (e, t, A) { "use strict"; var r = t; function configure() { r.util._configure(), r.Writer._configure(r.BufferWriter), r.Reader._configure(r.BufferReader) } r.build = "minimal", r.Writer = A(156), r.BufferWriter = A(253), r.Reader = A(157), r.BufferReader = A(254), r.util = A(127), r.rpc = A(255), r.roots = A(257), r.configure = configure, configure() }, "245": function (e, t, A) { "use strict"; e.exports = function asPromise(e, t) { var A = new Array(arguments.length - 1), r = 0, i = 2, o = !0; for (; i < arguments.length;)A[r++] = arguments[i++]; return new Promise(function executor(i, n) { A[r] = function callback(e) { if (o) if (o = !1, e) n(e); else { for (var t = new Array(arguments.length - 1), A = 0; A < t.length;)t[A++] = arguments[A]; i.apply(null, t) } }; try { e.apply(t || null, A) } catch (e) { o && (o = !1, n(e)) } }) } }, "246": function (e, t, A) { "use strict"; var r = t; r.length = function length(e) { var t = e.length; if (!t) return 0; for (var A = 0; --t % 4 > 1 && "=" === e.charAt(t);)++A; return Math.ceil(3 * e.length) / 4 - A }; for (var i = new Array(64), o = new Array(123), n = 0; n < 64;)o[i[n] = n < 26 ? n + 65 : n < 52 ? n + 71 : n < 62 ? n - 4 : n - 59 | 43] = n++; r.encode = function encode(e, t, A) { for (var r, o = null, n = [], s = 0, a = 0; t < A;) { var c = e[t++]; switch (a) { case 0: n[s++] = i[c >> 2], r = (3 & c) << 4, a = 1; break; case 1: n[s++] = i[r | c >> 4], r = (15 & c) << 2, a = 2; break; case 2: n[s++] = i[r | c >> 6], n[s++] = i[63 & c], a = 0 }s > 8191 && ((o || (o = [])).push(String.fromCharCode.apply(String, n)), s = 0) } return a && (n[s++] = i[r], n[s++] = 61, 1 === a && (n[s++] = 61)), o ? (s && o.push(String.fromCharCode.apply(String, n.slice(0, s))), o.join("")) : String.fromCharCode.apply(String, n.slice(0, s)) }; r.decode = function decode(e, t, A) { for (var r, i = A, n = 0, s = 0; s < e.length;) { var a = e.charCodeAt(s++); if (61 === a && n > 1) break; if (void 0 === (a = o[a])) throw Error("invalid encoding"); switch (n) { case 0: r = a, n = 1; break; case 1: t[A++] = r << 2 | (48 & a) >> 4, r = a, n = 2; break; case 2: t[A++] = (15 & r) << 4 | (60 & a) >> 2, r = a, n = 3; break; case 3: t[A++] = (3 & r) << 6 | a, n = 0 } } if (1 === n) throw Error("invalid encoding"); return A - i }, r.test = function test(e) { return /^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e) } }, "247": function (e, t, A) { "use strict"; function EventEmitter() { this._listeners = {} } e.exports = EventEmitter, EventEmitter.prototype.on = function on(e, t, A) { return (this._listeners[e] || (this._listeners[e] = [])).push({ "fn": t, "ctx": A || this }), this }, EventEmitter.prototype.off = function off(e, t) { if (void 0 === e) this._listeners = {}; else if (void 0 === t) this._listeners[e] = []; else for (var A = this._listeners[e], r = 0; r < A.length;)A[r].fn === t ? A.splice(r, 1) : ++r; return this }, EventEmitter.prototype.emit = function emit(e) { var t = this._listeners[e]; if (t) { for (var A = [], r = 1; r < arguments.length;)A.push(arguments[r++]); for (r = 0; r < t.length;)t[r].fn.apply(t[r++].ctx, A) } return this } }, "248": function (e, t, A) { "use strict"; function factory(e) { return "undefined" != typeof Float32Array ? function () { var t = new Float32Array([-0]), A = new Uint8Array(t.buffer), r = 128 === A[3]; function writeFloat_f32_cpy(e, r, i) { t[0] = e, r[i] = A[0], r[i + 1] = A[1], r[i + 2] = A[2], r[i + 3] = A[3] } function writeFloat_f32_rev(e, r, i) { t[0] = e, r[i] = A[3], r[i + 1] = A[2], r[i + 2] = A[1], r[i + 3] = A[0] } function readFloat_f32_cpy(e, r) { return A[0] = e[r], A[1] = e[r + 1], A[2] = e[r + 2], A[3] = e[r + 3], t[0] } function readFloat_f32_rev(e, r) { return A[3] = e[r], A[2] = e[r + 1], A[1] = e[r + 2], A[0] = e[r + 3], t[0] } e.writeFloatLE = r ? writeFloat_f32_cpy : writeFloat_f32_rev, e.writeFloatBE = r ? writeFloat_f32_rev : writeFloat_f32_cpy, e.readFloatLE = r ? readFloat_f32_cpy : readFloat_f32_rev, e.readFloatBE = r ? readFloat_f32_rev : readFloat_f32_cpy }() : function () { function writeFloat_ieee754(e, t, A, r) { var i = t < 0 ? 1 : 0; if (i && (t = -t), 0 === t) e(1 / t > 0 ? 0 : 2147483648, A, r); else if (isNaN(t)) e(2143289344, A, r); else if (t > 3.4028234663852886e38) e((i << 31 | 2139095040) >>> 0, A, r); else if (t < 1.1754943508222875e-38) e((i << 31 | Math.round(t / 1.401298464324817e-45)) >>> 0, A, r); else { var o = Math.floor(Math.log(t) / Math.LN2); e((i << 31 | o + 127 << 23 | 8388607 & Math.round(t * Math.pow(2, -o) * 8388608)) >>> 0, A, r) } } function readFloat_ieee754(e, t, A) { var r = e(t, A), i = 2 * (r >> 31) + 1, o = r >>> 23 & 255, n = 8388607 & r; return 255 === o ? n ? NaN : i * (1 / 0) : 0 === o ? 1.401298464324817e-45 * i * n : i * Math.pow(2, o - 150) * (n + 8388608) } e.writeFloatLE = writeFloat_ieee754.bind(null, writeUintLE), e.writeFloatBE = writeFloat_ieee754.bind(null, writeUintBE), e.readFloatLE = readFloat_ieee754.bind(null, readUintLE), e.readFloatBE = readFloat_ieee754.bind(null, readUintBE) }(), "undefined" != typeof Float64Array ? function () { var t = new Float64Array([-0]), A = new Uint8Array(t.buffer), r = 128 === A[7]; function writeDouble_f64_cpy(e, r, i) { t[0] = e, r[i] = A[0], r[i + 1] = A[1], r[i + 2] = A[2], r[i + 3] = A[3], r[i + 4] = A[4], r[i + 5] = A[5], r[i + 6] = A[6], r[i + 7] = A[7] } function writeDouble_f64_rev(e, r, i) { t[0] = e, r[i] = A[7], r[i + 1] = A[6], r[i + 2] = A[5], r[i + 3] = A[4], r[i + 4] = A[3], r[i + 5] = A[2], r[i + 6] = A[1], r[i + 7] = A[0] } function readDouble_f64_cpy(e, r) { return A[0] = e[r], A[1] = e[r + 1], A[2] = e[r + 2], A[3] = e[r + 3], A[4] = e[r + 4], A[5] = e[r + 5], A[6] = e[r + 6], A[7] = e[r + 7], t[0] } function readDouble_f64_rev(e, r) { return A[7] = e[r], A[6] = e[r + 1], A[5] = e[r + 2], A[4] = e[r + 3], A[3] = e[r + 4], A[2] = e[r + 5], A[1] = e[r + 6], A[0] = e[r + 7], t[0] } e.writeDoubleLE = r ? writeDouble_f64_cpy : writeDouble_f64_rev, e.writeDoubleBE = r ? writeDouble_f64_rev : writeDouble_f64_cpy, e.readDoubleLE = r ? readDouble_f64_cpy : readDouble_f64_rev, e.readDoubleBE = r ? readDouble_f64_rev : readDouble_f64_cpy }() : function () { function writeDouble_ieee754(e, t, A, r, i, o) { var n = r < 0 ? 1 : 0; if (n && (r = -r), 0 === r) e(0, i, o + t), e(1 / r > 0 ? 0 : 2147483648, i, o + A); else if (isNaN(r)) e(0, i, o + t), e(2146959360, i, o + A); else if (r > 1.7976931348623157e308) e(0, i, o + t), e((n << 31 | 2146435072) >>> 0, i, o + A); else { var s; if (r < 2.2250738585072014e-308) e((s = r / 5e-324) >>> 0, i, o + t), e((n << 31 | s / 4294967296) >>> 0, i, o + A); else { var a = Math.floor(Math.log(r) / Math.LN2); 1024 === a && (a = 1023), e(4503599627370496 * (s = r * Math.pow(2, -a)) >>> 0, i, o + t), e((n << 31 | a + 1023 << 20 | 1048576 * s & 1048575) >>> 0, i, o + A) } } } function readDouble_ieee754(e, t, A, r, i) { var o = e(r, i + t), n = e(r, i + A), s = 2 * (n >> 31) + 1, a = n >>> 20 & 2047, c = 4294967296 * (1048575 & n) + o; return 2047 === a ? c ? NaN : s * (1 / 0) : 0 === a ? 5e-324 * s * c : s * Math.pow(2, a - 1075) * (c + 4503599627370496) } e.writeDoubleLE = writeDouble_ieee754.bind(null, writeUintLE, 0, 4), e.writeDoubleBE = writeDouble_ieee754.bind(null, writeUintBE, 4, 0), e.readDoubleLE = readDouble_ieee754.bind(null, readUintLE, 0, 4), e.readDoubleBE = readDouble_ieee754.bind(null, readUintBE, 4, 0) }(), e } function writeUintLE(e, t, A) { t[A] = 255 & e, t[A + 1] = e >>> 8 & 255, t[A + 2] = e >>> 16 & 255, t[A + 3] = e >>> 24 } function writeUintBE(e, t, A) { t[A] = e >>> 24, t[A + 1] = e >>> 16 & 255, t[A + 2] = e >>> 8 & 255, t[A + 3] = 255 & e } function readUintLE(e, t) { return (e[t] | e[t + 1] << 8 | e[t + 2] << 16 | e[t + 3] << 24) >>> 0 } function readUintBE(e, t) { return (e[t] << 24 | e[t + 1] << 16 | e[t + 2] << 8 | e[t + 3]) >>> 0 } e.exports = factory(factory) }, "249": function (module, exports, __webpack_require__) { "use strict"; function inquire(moduleName) { try { var mod = eval("quire".replace(/^/, "re"))(moduleName); if (mod && (mod.length || Object.keys(mod).length)) return mod } catch (e) { } return null } module.exports = inquire }, "250": function (e, t, A) { "use strict"; var r = t; r.length = function utf8_length(e) { for (var t = 0, A = 0, r = 0; r < e.length; ++r)(A = e.charCodeAt(r)) < 128 ? t += 1 : A < 2048 ? t += 2 : 55296 == (64512 & A) && 56320 == (64512 & e.charCodeAt(r + 1)) ? (++r, t += 4) : t += 3; return t }, r.read = function utf8_read(e, t, A) { if (A - t < 1) return ""; for (var r, i = null, o = [], n = 0; t < A;)(r = e[t++]) < 128 ? o[n++] = r : r > 191 && r < 224 ? o[n++] = (31 & r) << 6 | 63 & e[t++] : r > 239 && r < 365 ? (r = ((7 & r) << 18 | (63 & e[t++]) << 12 | (63 & e[t++]) << 6 | 63 & e[t++]) - 65536, o[n++] = 55296 + (r >> 10), o[n++] = 56320 + (1023 & r)) : o[n++] = (15 & r) << 12 | (63 & e[t++]) << 6 | 63 & e[t++], n > 8191 && ((i || (i = [])).push(String.fromCharCode.apply(String, o)), n = 0); return i ? (n && i.push(String.fromCharCode.apply(String, o.slice(0, n))), i.join("")) : String.fromCharCode.apply(String, o.slice(0, n)) }, r.write = function utf8_write(e, t, A) { for (var r, i, o = A, n = 0; n < e.length; ++n)(r = e.charCodeAt(n)) < 128 ? t[A++] = r : r < 2048 ? (t[A++] = r >> 6 | 192, t[A++] = 63 & r | 128) : 55296 == (64512 & r) && 56320 == (64512 & (i = e.charCodeAt(n + 1))) ? (r = 65536 + ((1023 & r) << 10) + (1023 & i), ++n, t[A++] = r >> 18 | 240, t[A++] = r >> 12 & 63 | 128, t[A++] = r >> 6 & 63 | 128, t[A++] = 63 & r | 128) : (t[A++] = r >> 12 | 224, t[A++] = r >> 6 & 63 | 128, t[A++] = 63 & r | 128); return A - o } }, "251": function (e, t, A) { "use strict"; e.exports = function pool(e, t, A) { var r = A || 8192, i = r >>> 1, o = null, n = r; return function pool_alloc(A) { if (A < 1 || A > i) return e(A); n + A > r && (o = e(r), n = 0); var s = t.call(o, n, n += A); return 7 & n && (n = 1 + (7 | n)), s } } }, "252": function (e, t, A) { "use strict"; e.exports = LongBits; var r = A(127); function LongBits(e, t) { this.lo = e >>> 0, this.hi = t >>> 0 } var i = LongBits.zero = new LongBits(0, 0); i.toNumber = function () { return 0 }, i.zzEncode = i.zzDecode = function () { return this }, i.length = function () { return 1 }; var o = LongBits.zeroHash = "\0\0\0\0\0\0\0\0"; LongBits.fromNumber = function fromNumber(e) { if (0 === e) return i; var t = e < 0; t && (e = -e); var A = e >>> 0, r = (e - A) / 4294967296 >>> 0; return t && (r = ~r >>> 0, A = ~A >>> 0, ++A > 4294967295 && (A = 0, ++r > 4294967295 && (r = 0))), new LongBits(A, r) }, LongBits.from = function from(e) { if ("number" == typeof e) return LongBits.fromNumber(e); if (r.isString(e)) { if (!r.Long) return LongBits.fromNumber(parseInt(e, 10)); e = r.Long.fromString(e) } return e.low || e.high ? new LongBits(e.low >>> 0, e.high >>> 0) : i }, LongBits.prototype.toNumber = function toNumber(e) { if (!e && this.hi >>> 31) { var t = 1 + ~this.lo >>> 0, A = ~this.hi >>> 0; return t || (A = A + 1 >>> 0), -(t + 4294967296 * A) } return this.lo + 4294967296 * this.hi }, LongBits.prototype.toLong = function toLong(e) { return r.Long ? new r.Long(0 | this.lo, 0 | this.hi, Boolean(e)) : { "low": 0 | this.lo, "high": 0 | this.hi, "unsigned": Boolean(e) } }; var n = String.prototype.charCodeAt; LongBits.fromHash = function fromHash(e) { return e === o ? i : new LongBits((n.call(e, 0) | n.call(e, 1) << 8 | n.call(e, 2) << 16 | n.call(e, 3) << 24) >>> 0, (n.call(e, 4) | n.call(e, 5) << 8 | n.call(e, 6) << 16 | n.call(e, 7) << 24) >>> 0) }, LongBits.prototype.toHash = function toHash() { return String.fromCharCode(255 & this.lo, this.lo >>> 8 & 255, this.lo >>> 16 & 255, this.lo >>> 24, 255 & this.hi, this.hi >>> 8 & 255, this.hi >>> 16 & 255, this.hi >>> 24) }, LongBits.prototype.zzEncode = function zzEncode() { var e = this.hi >> 31; return this.hi = ((this.hi << 1 | this.lo >>> 31) ^ e) >>> 0, this.lo = (this.lo << 1 ^ e) >>> 0, this }, LongBits.prototype.zzDecode = function zzDecode() { var e = -(1 & this.lo); return this.lo = ((this.lo >>> 1 | this.hi << 31) ^ e) >>> 0, this.hi = (this.hi >>> 1 ^ e) >>> 0, this }, LongBits.prototype.length = function length() { var e = this.lo, t = (this.lo >>> 28 | this.hi << 4) >>> 0, A = this.hi >>> 24; return 0 === A ? 0 === t ? e < 16384 ? e < 128 ? 1 : 2 : e < 2097152 ? 3 : 4 : t < 16384 ? t < 128 ? 5 : 6 : t < 2097152 ? 7 : 8 : A < 128 ? 9 : 10 } }, "253": function (e, t, A) { "use strict"; e.exports = BufferWriter; var r = A(156); (BufferWriter.prototype = Object.create(r.prototype)).constructor = BufferWriter; var i = A(127); function BufferWriter() { r.call(this) } function writeStringBuffer(e, t, A) { e.length < 40 ? i.utf8.write(e, t, A) : t.utf8Write ? t.utf8Write(e, A) : t.write(e, A) } BufferWriter._configure = function () { BufferWriter.alloc = i._Buffer_allocUnsafe, BufferWriter.writeBytesBuffer = i.Buffer && i.Buffer.prototype instanceof Uint8Array && "set" === i.Buffer.prototype.set.name ? function writeBytesBuffer_set(e, t, A) { t.set(e, A) } : function writeBytesBuffer_copy(e, t, A) { if (e.copy) e.copy(t, A, 0, e.length); else for (var r = 0; r < e.length;)t[A++] = e[r++] } }, BufferWriter.prototype.bytes = function write_bytes_buffer(e) { i.isString(e) && (e = i._Buffer_from(e, "base64")); var t = e.length >>> 0; return this.uint32(t), t && this._push(BufferWriter.writeBytesBuffer, t, e), this }, BufferWriter.prototype.string = function write_string_buffer(e) { var t = i.Buffer.byteLength(e); return this.uint32(t), t && this._push(writeStringBuffer, t, e), this }, BufferWriter._configure() }, "254": function (e, t, A) { "use strict"; e.exports = BufferReader; var r = A(157); (BufferReader.prototype = Object.create(r.prototype)).constructor = BufferReader; var i = A(127); function BufferReader(e) { r.call(this, e) } BufferReader._configure = function () { i.Buffer && (BufferReader.prototype._slice = i.Buffer.prototype.slice) }, BufferReader.prototype.string = function read_string_buffer() { var e = this.uint32(); return this.buf.utf8Slice ? this.buf.utf8Slice(this.pos, this.pos = Math.min(this.pos + e, this.len)) : this.buf.toString("utf-8", this.pos, this.pos = Math.min(this.pos + e, this.len)) }, BufferReader._configure() }, "255": function (e, t, A) { "use strict"; t.Service = A(256) }, "256": function (e, t, A) { "use strict"; e.exports = Service; var r = A(127); function Service(e, t, A) { if ("function" != typeof e) throw TypeError("rpcImpl must be a function"); r.EventEmitter.call(this), this.rpcImpl = e, this.requestDelimited = Boolean(t), this.responseDelimited = Boolean(A) } (Service.prototype = Object.create(r.EventEmitter.prototype)).constructor = Service, Service.prototype.rpcCall = function rpcCall(e, t, A, i, o) { if (!i) throw TypeError("request must be specified"); var n = this; if (!o) return r.asPromise(rpcCall, n, e, t, A, i); if (n.rpcImpl) try { return n.rpcImpl(e, t[n.requestDelimited ? "encodeDelimited" : "encode"](i).finish(), function rpcCallback(t, r) { if (t) return n.emit("error", t, e), o(t); if (null !== r) { if (!(r instanceof A)) try { r = A[n.responseDelimited ? "decodeDelimited" : "decode"](r) } catch (t) { return n.emit("error", t, e), o(t) } return n.emit("data", r, e), o(null, r) } n.end(!0) }) } catch (t) { return n.emit("error", t, e), void setTimeout(function () { o(t) }, 0) } else setTimeout(function () { o(Error("already ended")) }, 0) }, Service.prototype.end = function end(e) { return this.rpcImpl && (e || this.rpcImpl(null, null, null), this.rpcImpl = null, this.emit("end").off()), this } }, "257": function (e, t, A) { "use strict"; e.exports = {} }, "282": function (e, t, A) { "use strict"; A.r(t); var r = A(1), i = A(116), o = A(2), n = A(264), s = A(139), a = A(272), c = A(273), g = A(269), u = A(284), l = A(126), h = A(132), d = A(133), C = A(152), I = A(27), E = A(28), p = A(128), f = A.n(p), B = A(25), _ = A(265), m = A(266), Q = function () { function defineProperties(e, t) { for (var A = 0; A < t.length; A++) { var r = t[A]; r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r) } } return function (e, t, A) { return t && defineProperties(e.prototype, t), A && defineProperties(e, A), e } }(); var y = function (e) { function IMicrophone() { return function _classCallCheck(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, IMicrophone), function _possibleConstructorReturn(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }(this, (IMicrophone.__proto__ || Object.getPrototypeOf(IMicrophone)).apply(this, arguments)) } return function _inherits(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t); e.prototype = Object.create(t && t.prototype, { "constructor": { "value": e, "enumerable": !1, "writable": !0, "configurable": !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) }(IMicrophone, o["default"].Component), Q(IMicrophone, [{ "key": "render", "value": function render() { var e = this.props, t = e.height, A = e.style; return r.l.createElement(n.a, { "className": "microphone-icon", "style": A }, r.l.createElement(n.a, { "className": "cup" }, r.l.createElement(n.a, { "className": "left-pot" }), r.l.createElement(n.a, { "className": "right-pot" })), r.l.createElement(n.a, { "className": "green-wrap" }, r.l.createElement(n.a, { "className": "green", "style": { "height": t } }))) } }]), IMicrophone }(); y.defaultProps = { "height": "0%", "style": {} }; var v = y = Object(i.a)([Object(I.b)("pageInfoStore"), I.c], y), S = function () { function defineProperties(e, t) { for (var A = 0; A < t.length; A++) { var r = t[A]; r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r) } } return function (e, t, A) { return t && defineProperties(e.prototype, t), A && defineProperties(e, A), e } }(); var D = function (e) { function ILoading() { return function ILoading_classCallCheck(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, ILoading), function ILoading_possibleConstructorReturn(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }(this, (ILoading.__proto__ || Object.getPrototypeOf(ILoading)).apply(this, arguments)) } return function ILoading_inherits(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t); e.prototype = Object.create(t && t.prototype, { "constructor": { "value": e, "enumerable": !1, "writable": !0, "configurable": !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) }(ILoading, o["default"].Component), S(ILoading, [{ "key": "render", "value": function render() { return r.l.createElement(n.a, { "className": "pot-loading" }, r.l.createElement(n.a, { "className": "pot" })) } }]), ILoading }(), R = A(243), b = A(113), T = A.n(b), k = (A(129), function () { function defineProperties(e, t) { for (var A = 0; A < t.length; A++) { var r = t[A]; r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r) } } return function (e, t, A) { return t && defineProperties(e.prototype, t), A && defineProperties(e, A), e } }()); function _asyncToGenerator(e) { return function () { var t = e.apply(this, arguments); return new Promise(function (e, A) { return function step(r, i) { try { var o = t[r](i), n = o.value } catch (e) { return void A(e) } if (!o.done) return Promise.resolve(n).then(function (e) { step("next", e) }, function (e) { step("throw", e) }); e(n) }("next") }) } } var w = 1186226192, N = "wss://webliveroom1186226192-api.imzego.com/ws", L = function (e) { function AudioVideo(e) { var t = this; !function AudioVideo_classCallCheck(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, AudioVideo); var A, r, i, n, s, a = function AudioVideo_possibleConstructorReturn(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }(this, (AudioVideo.__proto__ || Object.getPrototypeOf(AudioVideo)).call(this, e)); return a.startAudioVideo = function () { var e; navigator.mediaDevices.getUserMedia({ "video": !0, "audio": !0 }).then((e = _asyncToGenerator(regeneratorRuntime.mark(function _callee(e) { return regeneratorRuntime.wrap(function _callee$(t) { for (; ;)switch (t.prev = t.next) { case 0: if (console.warn("stream", e), a.state.createSuccessSvgStatus) { t.next = 6; break } return t.next = 5, a.createZegoExpressEngineOption(); case 5: a.initEvent(); case 6: return t.next = 8, a.CheckSystemRequire(); case 8: return t.next = 10, a.loginRoomOption(); case 10: case "end": return t.stop() } }, _callee, t) })), function (t) { return e.apply(this, arguments) })).catch(function (e) { console.warn(e), Object(B.f)({ "title": "授权失败", "icon": "none" }) }) }, a.createZegoExpressEngineOption = function () { var e = new R.ZegoExpressEngine(w, N); window.zg = e; var t = e.getVersion() || "0"; return new Promise(function (A) { a.setState({ "zg": e, "version": t, "createSuccessSvgStatus": !0 }, function () { A(!0) }) }) }, a.initEvent = function () { var e = a.state.zg; e.on("roomStateUpdate", function (e, t) { "CONNECTED" === t && a.setState({ "connectStatus": "CONNECTED" }), "DISCONNECTED" === t && a.setState({ "connectStatus": "DISCONNECTED" }) }), e.on("publisherStateUpdate", function (e) { var t = e.state, A = e.streamID; "PUBLISHING" === t ? a.setState({ "publishInfoStreamID": A }) : "NO_PUBLISH" === t && a.setState({ "publishInfoStreamID": "" }) }), e.on("playerStateUpdate", function (e) { var t = e.state, A = e.streamID; "PLAYING" === t ? a.setState({ "playInfoStreamID": A }) : "NO_PLAY" === e.state && a.setState({ "playInfoStreamID": "" }) }) }, a.CheckSystemRequire = _asyncToGenerator(regeneratorRuntime.mark(function _callee2() { return regeneratorRuntime.wrap(function _callee2$(e) { for (; ;)switch (e.prev = e.next) { case 0: if (a.state.zg) { e.next = 3; break } return e.abrupt("return", alert("you should create zegoExpressEngine")); case 3: return e.next = 5, a.checkSystemRequirements(); case 5: if (!e.sent) { e.next = 12; break } return a.setState({ "checkSystemRequireStatus": "SUCCESS" }), e.next = 10, a.enumDevices(); case 10: e.next = 13; break; case 12: a.setState({ "checkSystemRequireStatus": "ERROR" }); case 13: case "end": return e.stop() } }, _callee2, t) })), a.checkSystemRequirements = _asyncToGenerator(regeneratorRuntime.mark(function _callee3() { var e; return regeneratorRuntime.wrap(function _callee3$(t) { for (; ;)switch (t.prev = t.next) { case 0: return console.log("sdk version is", window.zg.getVersion()), t.prev = 1, t.next = 4, window.zg.checkSystemRequirements(); case 4: if (e = t.sent, console.warn("checkSystemRequirements ", e), e.webRTC) { t.next = 11; break } return console.error("browser is not support webrtc!!"), t.abrupt("return", !1); case 11: if (e.videoCodec.H264 || e.videoCodec.VP8) { t.next = 16; break } return console.error("browser is not support H264 and VP8"), t.abrupt("return", !1); case 16: if (e.camera || e.microphone) { t.next = 21; break } return console.error("camera and microphones not allowed to use"), t.abrupt("return", !1); case 21: e.videoCodec.VP8 ? e.screenSharing || console.warn("browser is not support screenSharing") : console.log("不支持VP8，请前往混流转码测试"); case 22: return t.abrupt("return", !0); case 25: return t.prev = 25, t.t0 = t.catch(1), console.error("checkSystemRequirements", t.t0), t.abrupt("return", !1); case 29: case "end": return t.stop() } }, _callee3, t, [[1, 25]]) })), a.enumDevices = _asyncToGenerator(regeneratorRuntime.mark(function _callee4() { var e, A, r; return regeneratorRuntime.wrap(function _callee4$(t) { for (; ;)switch (t.prev = t.next) { case 0: return t.next = 2, window.zg.enumDevices(); case 2: return e = t.sent, (A = e && e.microphones.map(function (e, t) { return e.deviceName || (e.deviceName = "microphone" + t), console.log("microphone: " + e.deviceName), e })).push({ "deviceID": 0, "deviceName": "禁止" }), (r = e && e.cameras.map(function (e, t) { return e.deviceName || (e.deviceName = "camera" + t), console.log("camera: " + e.deviceName), e })).push({ "deviceID": 0, "deviceName": "禁止" }), console.warn("获取音频为啥失败了", A), t.next = 10, a.setState({ "microphoneDevicesVal": A[1].deviceID, "cameraDevicesVal": r[0].deviceID }); case 10: case "end": return t.stop() } }, _callee4, t) })), a.loginRoomOption = _asyncToGenerator(regeneratorRuntime.mark(function _callee5() { var e, A, r, i; return regeneratorRuntime.wrap(function _callee5$(t) { for (; ;)switch (t.prev = t.next) { case 0: return e = a.state, A = e.roomID, r = e.userID, i = e.token, t.next = 3, a.setState({ "isLogin": !0 }); case 3: return t.next = 5, a.loginRoom(A, r, r, i); case 5: case "end": return t.stop() } }, _callee5, t) })), a.loginRoom = (A = _asyncToGenerator(regeneratorRuntime.mark(function _callee6(e, A, r, i) { return regeneratorRuntime.wrap(function _callee6$(t) { for (; ;)switch (t.prev = t.next) { case 0: return t.next = 2, window.zg.loginRoom(e, i, { "userID": A, "userName": r }); case 2: case "end": return t.stop() } }, _callee6, t) })), function (e, t, r, i) { return A.apply(this, arguments) }), a.startPublishing = _asyncToGenerator(regeneratorRuntime.mark(function _callee7() { var e, A, r, i, o, n; return regeneratorRuntime.wrap(function _callee7$(t) { for (; ;)switch (t.prev = t.next) { case 0: return e = a.state, A = e.streamID, r = e.microphoneDevicesVal, i = e.cameraDevicesVal, o = e.cameraCheckStatus, n = e.microphoneCheckStatus, t.next = 3, a.startPublishingStream(A, { "camera": { "audioInput": r, "videoInput": i, "video": o, "audio": n } }); case 3: t.sent && a.setState({ "publishStreamStatus": !0 }); case 5: case "end": return t.stop() } }, _callee7, t) })), a.startPublishingStream = (r = _asyncToGenerator(regeneratorRuntime.mark(function _callee8(e, A) { var r, i; return regeneratorRuntime.wrap(function _callee8$(t) { for (; ;)switch (t.prev = t.next) { case 0: return t.next = 2, window.zg.createStream(A); case 2: return r = t.sent, i = a.state.videoCodec, a.setState({ "localStream": r }), window.zg.startPublishingStream(e, r, { "videoCodec": i }), window.zg.createLocalStreamView(r).play("localVideo", { "mirror": !0, "objectFit": "cover", "enableAutoplayDialog": !0 }), t.abrupt("return", !0); case 9: case "end": return t.stop() } }, _callee8, t) })), function (e, t) { return r.apply(this, arguments) }), a.stopPublishingStream = (i = _asyncToGenerator(regeneratorRuntime.mark(function _callee9(e) { return regeneratorRuntime.wrap(function _callee9$(t) { for (; ;)switch (t.prev = t.next) { case 0: window.zg.stopPublishingStream(e); case 1: case "end": return t.stop() } }, _callee9, t) })), function (e) { return i.apply(this, arguments) }), a.startPlaying = _asyncToGenerator(regeneratorRuntime.mark(function _callee10() { var e, A, r, i; return regeneratorRuntime.wrap(function _callee10$(t) { for (; ;)switch (t.prev = t.next) { case 0: return e = a.state, A = e.playStreamID, r = e.videoCheckStatus, i = e.audioCheckStatus, t.next = 3, a.startPlayingStream(A, { "video": r, "audio": i }); case 3: t.sent && a.setState({ "playStreamStatus": !0 }); case 5: case "end": return t.stop() } }, _callee10, t) })), a.startPlayingStream = (n = _asyncToGenerator(regeneratorRuntime.mark(function _callee11(e) { var A, r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}; return regeneratorRuntime.wrap(function _callee11$(t) { for (; ;)switch (t.prev = t.next) { case 0: return t.next = 2, window.zg.startPlayingStream(e, r); case 2: return A = t.sent, a.setState({ "remoteStream": A }), window.zg.createRemoteStreamView(A).play("remoteVideo", { "objectFit": "cover", "enableAutoplayDialog": !0 }), t.abrupt("return", !0); case 7: case "end": return t.stop() } }, _callee11, t) })), function (e) { return n.apply(this, arguments) }), a.stopPlayingStream = (s = _asyncToGenerator(regeneratorRuntime.mark(function _callee12(e) { return regeneratorRuntime.wrap(function _callee12$(t) { for (; ;)switch (t.prev = t.next) { case 0: window.zg.stopPlayingStream(e); case 1: case "end": return t.stop() } }, _callee12, t) })), function (e) { return s.apply(this, arguments) }), a.clearStream = function () { a.state.localStream && zg.destroyStream(a.state.localStream), a.refs.publishVideo.srcObject = null, a.state.remoteStream && zg.destroyStream(a.state.remoteStream), a.refs.playVideo.srcObject = null, a.setState({ "localStream": null, "remoteStream": null }) }, a.logoutRoom = function (e) { window.zg.logoutRoom(e) }, a.reset = _asyncToGenerator(regeneratorRuntime.mark(function _callee13() { var e, A, r, i, o, n; return regeneratorRuntime.wrap(function _callee13$(t) { for (; ;)switch (t.prev = t.next) { case 0: if (e = a.state, A = e.zg, r = e.streamID, i = e.playStreamID, o = e.isLogin, n = e.roomID, A) { t.next = 3; break } return t.abrupt("return"); case 3: return t.next = 5, a.stopPublishingStream(r); case 5: return t.next = 7, a.stopPlayingStream(i); case 7: if (!o) { t.next = 11; break } return t.next = 10, a.setState({ "isLogin": !1 }); case 10: a.logoutRoom(n); case 11: a.clearStream(), a.zg = null, a.setState({ "playStreamStatus": !1, "publishStreamStatus": !1, "createSuccessSvgStatus": !1, "checkSystemRequireStatus": "", "audioCheckStatus": !0 }); case 14: case "end": return t.stop() } }, _callee13, t) })), a.VideoDom = o.default.createRef(), a.state = { "zg": null, "createSuccessSvgStatus": !1, "version": "", "roomID": "0001", "userID": "xll", "token": "04AAAAAGTcPaEAEHBkNnBodTU2bnlmM3I3Y2cAoNVzmuMygAq8zPnsHW9sZ8oXxjbb5z3cLbIsmJoo0IZtDfZ5wONidvTnCn8k7c2Ddm7mgMNkNMXM/A+Nr6X0bfLiLTXz7QkS1ZoPG1bpN5OyV+Q7JRH9OGI+Fkz7zIcLdGqW6V03Mlyp8p527ceO7xjhVubTgXF9L6ffqRZOgrYNoKZZiVxyZ+kKTINTjkqidvCm1MMbd6btaKxNKsTO76k=", "connectStatus": "DISCONNECTED", "publisherStateUpdate": "", "playInfoStreamID": "", "publishInfoStreamID": "", "localStream": null, "remoteStream": null, "videoCodec": "H.264" === localStorage.getItem("VideoCodec") ? "H264" : "VP8", "streamID": "0001", "playStreamID": "0001", "microphoneDevicesVal": "", "cameraDevicesVal": "", "cameraCheckStatus": !0, "microphoneCheckStatus": !0, "isLogin": !1, "playStreamStatus": !1, "videoCheckStatus": !0, "audioCheckStatus": !0 }, a } return function AudioVideo_inherits(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t); e.prototype = Object.create(t && t.prototype, { "constructor": { "value": e, "enumerable": !1, "writable": !0, "configurable": !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) }(AudioVideo, o["default"].Component), k(AudioVideo, [{ "key": "shouldComponentUpdate", "value": function shouldComponentUpdate(e, t) { var A = this.state, r = A.connectStatus, i = A.publishInfoStreamID; return r !== t.connectStatus && "CONNECTED" === t.connectStatus && (console.warn(t.connectStatus), this.startPublishing()), i !== t.publishInfoStreamID && t.publishInfoStreamID && (console.warn("publishInfoStreamID-----", t.publishInfoStreamID), this.startPlaying()), r !== t.connectStatus } }, { "key": "render", "value": function render() { return r.l.createElement(n.a, { "className": "court-conference" }, r.l.createElement(n.a, { "className": "speak-person ellipsis" }, "正在讲话:王子建", r.l.createElement(n.a, { "className": "role" }, "（被申请人，我）"), "王子建", r.l.createElement(n.a, { "className": "role" }, "（被申请人，我）"), "王子建", r.l.createElement(n.a, { "className": "role" }, "（被申请人，我）")), r.l.createElement(n.a, { "className": "person-wrap" }, r.l.createElement(n.a, { "className": T()("person-list", { "video-on": !0 }) }, r.l.createElement(_.a, { "className": T()("person", { "first": !0, "video": !0, "active": !0 }), "onClick": this.startAudioVideo }, r.l.createElement(_.a, { "className": "portrait-wrap" }, r.l.createElement(m.a, { "className": "portrait", "src": "https://ts1.cn.mm.bing.net/th/id/R-C.61422bb47b242a0c0232f2136654b297?rik=AQBG2SuIOgDpxg&riu=http%3a%2f%2fwww.bingguner.com%2fupimg%2fallimg%2f200518%2f20-20051QS516358.jpg&ehk=L2tP22YWuozmRUYY50gUeQbzm28tsZyi6zQmEgupcCg%3d&risl=&pid=ImgRaw&r=0" }), r.l.createElement(_.a, { "className": "video-container", "id": "localVideo", "ref": this.VideoDom })), r.l.createElement(_.a, { "className": "line-wrap" }, r.l.createElement(_.a, { "className": "name-txt ellipsis" }, "王子建", r.l.createElement(_.a, { "className": "role-extra" }, "(书记员、我)")), r.l.createElement(_.a, { "className": "microphone-wrap" }, r.l.createElement(v, { "height": "20%" }))), r.l.createElement(_.a, { "className": "role" }, "书记员")), r.l.createElement(_.a, { "className": T()("person", { "video": !0, "active": Math.random() > .5 }) }, r.l.createElement(_.a, { "className": "portrait-wrap" }, r.l.createElement(m.a, { "className": "portrait", "src": "https://ts1.cn.mm.bing.net/th/id/R-C.61422bb47b242a0c0232f2136654b297?rik=AQBG2SuIOgDpxg&riu=http%3a%2f%2fwww.bingguner.com%2fupimg%2fallimg%2f200518%2f20-20051QS516358.jpg&ehk=L2tP22YWuozmRUYY50gUeQbzm28tsZyi6zQmEgupcCg%3d&risl=&pid=ImgRaw&r=0" }), r.l.createElement(_.a, { "className": "video-container", "id": "remoteVideo" })), r.l.createElement(_.a, { "className": "line-wrap" }, r.l.createElement(_.a, { "className": "name-txt ellipsis" }, "王子建", r.l.createElement(_.a, { "className": "role-extra" }, "(书记员、我)")), r.l.createElement(_.a, { "className": "microphone-wrap" }, r.l.createElement(v, { "height": "20%" }))), r.l.createElement(_.a, { "className": "role" }, "书记员")), Array.from({ "length": 23 }, function () { return Math.floor(100 * Math.random()) }).map(function (e, t) { return r.l.createElement(_.a, { "className": T()("person", { "first": 0 === t, "video": Math.random() > .5, "active": Math.random() > .5 }), "key": e }, r.l.createElement(_.a, { "className": "portrait-wrap" }, r.l.createElement(m.a, { "className": "portrait", "src": "https://ts1.cn.mm.bing.net/th/id/R-C.61422bb47b242a0c0232f2136654b297?rik=AQBG2SuIOgDpxg&riu=http%3a%2f%2fwww.bingguner.com%2fupimg%2fallimg%2f200518%2f20-20051QS516358.jpg&ehk=L2tP22YWuozmRUYY50gUeQbzm28tsZyi6zQmEgupcCg%3d&risl=&pid=ImgRaw&r=0" }), r.l.createElement(_.a, { "className": "video-container", "id": "localVideo" })), r.l.createElement(_.a, { "className": "line-wrap" }, r.l.createElement(_.a, { "className": "name-txt ellipsis" }, "王子建", r.l.createElement(_.a, { "className": "role-extra" }, "(书记员、我)")), r.l.createElement(_.a, { "className": "microphone-wrap" }, r.l.createElement(v, { "height": "20%" }))), r.l.createElement(_.a, { "className": "role" }, "书记员"), r.l.createElement(_.a, { "className": "network-bad" }, r.l.createElement(D, { "key": 10 * e }))) })))) } }]), AudioVideo }(), O = L = Object(i.a)([Object(I.b)("pageInfoStore"), I.c], L), M = function () { function defineProperties(e, t) { for (var A = 0; A < t.length; A++) { var r = t[A]; r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r) } } return function (e, t, A) { return t && defineProperties(e.prototype, t), A && defineProperties(e, A), e } }(); var P = function (e) { function Record(e) { !function Record_classCallCheck(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, Record); var t = function Record_possibleConstructorReturn(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }(this, (Record.__proto__ || Object.getPrototypeOf(Record)).call(this, e)); return t.state = {}, t } return function Record_inherits(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t); e.prototype = Object.create(t && t.prototype, { "constructor": { "value": e, "enumerable": !1, "writable": !0, "configurable": !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) }(Record, o["default"].Component), M(Record, [{ "key": "componentWillMount", "value": function componentWillMount() { } }, { "key": "render", "value": function render() { return r.l.createElement(n.a, { "className": "record-wrap" }, r.l.createElement(n.a, { "className": "record" }, r.l.createElement(n.a, { "className": "record-title" }, "(仲）粤代9329402号-庭审笔录"), r.l.createElement(n.a, { "className": "record-time" }, "2023年5月17日"), r.l.createElement(n.a, { "className": "record-content" }, "速分素南调接调土且出心马备思起结适些认上文消一次入府快知北能那看况九安国育更族些样响证子百土会资出东毛革增温但相青开领毛便规土记入较。积她感与又图究把学例争们见容处决学运米层火育也阶合家作难之科满安至展接县目件往。层金国去话类路组比学集场决与感家构效族济当命从求些值思光当切正以系工几科海最边料种少头研反效老总团书改王清生候。值团济劳命复根格着了题加白合为但容天米地果今该声段极对采民先物目九什之着然今全何时真统影题命极到社维矿他节飞头调。持着立严增老通经王称性知广强代结价县还打所长机派么热图根报经速并家经我素石证长气由究克毛将律她放片飞度长。两元果史查光组路都处与积满据起活类专才意条特须我者理农外更今据调最话火步义半王越常好称置专与料在身较单确出记阶调约思。生料志四管口热会设无根引色问专和列分什划名如联品手器量比两受易员华基重话解形车劳便度参效该当百除部认二后次文称件一际。自照都总三习写代种复酸低变他南带二图天严工处省里第志采置边只解论通己情研九受度达山周支真资队多。要型存运老对四同性联它满响斗据内布音住导除图元至片半条火派型即知研回至种确明声一北将约天则取处。特文边大院速而还育标构现器然带好天干由军结产而总适电一些油火还事件集格新京义做集还般志许权方组毛月府九海么术作阶委有好应身命义压民调图叫国龙七百们联形。"), r.l.createElement(n.a, { "className": "sign-wrap" }, r.l.createElement(n.a, { "className": "sign-pic-wrap" }, r.l.createElement(g.a, { "src": f.a, "className": "sign-pic" }), r.l.createElement(n.a, { "className": "delete-icon" })))), r.l.createElement(n.a, { "className": "bottom-fixed" }, r.l.createElement(n.a, { "className": "bottom-fixed-wrap" }, r.l.createElement(g.a, { "src": f.a, "className": "sign-pic" }), r.l.createElement(s.a, { "className": "btn sub-btn", "onClick": function onClick() { o.default.navigateTo({ "url": "/pages/sign/index" }) } }, "重新签名"), r.l.createElement(s.a, { "type": "primary", "className": "btn" }, "确认")))) } }]), Record }(), U = P = Object(i.a)([Object(I.b)("pageInfoStore"), I.c], P), G = function () { function defineProperties(e, t) { for (var A = 0; A < t.length; A++) { var r = t[A]; r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r) } } return function (e, t, A) { return t && defineProperties(e.prototype, t), A && defineProperties(e, A), e } }(); var F = function (e) { function ParticipantsDrawer(e) { !function ParticipantsDrawer_classCallCheck(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, ParticipantsDrawer); var t = function ParticipantsDrawer_possibleConstructorReturn(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }(this, (ParticipantsDrawer.__proto__ || Object.getPrototypeOf(ParticipantsDrawer)).call(this, e)); return t.state = {}, t } return function ParticipantsDrawer_inherits(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t); e.prototype = Object.create(t && t.prototype, { "constructor": { "value": e, "enumerable": !1, "writable": !0, "configurable": !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) }(ParticipantsDrawer, o["default"].Component), G(ParticipantsDrawer, [{ "key": "componentWillMount", "value": function componentWillMount() { } }, { "key": "render", "value": function render() { var e = this.props, t = e.show, A = e.onClose; return r.l.createElement(d.a, { "title": "人员(3）", "contBgColor": "#F3F3F3", "show": t, "onClose": A }, r.l.createElement(n.a, { "className": "participants-wrap" }, r.l.createElement(n.a, { "className": "person-item" }, r.l.createElement(m.a, { "className": "portrait", "src": "https://ts1.cn.mm.bing.net/th/id/R-C.61422bb47b242a0c0232f2136654b297?rik=AQBG2SuIOgDpxg&riu=http%3a%2f%2fwww.bingguner.com%2fupimg%2fallimg%2f200518%2f20-20051QS516358.jpg&ehk=L2tP22YWuozmRUYY50gUeQbzm28tsZyi6zQmEgupcCg%3d&risl=&pid=ImgRaw&r=0" }), r.l.createElement(_.a, { "className": "right-section" }, r.l.createElement(_.a, { "className": "txt-wrap" }, r.l.createElement(_.a, { "className": "name-txt" }, "王子建"), r.l.createElement(_.a, { "className": "role" }, "(书记员、我)")), r.l.createElement(_.a, { "className": "btns" }, r.l.createElement(_.a, { "className": "btn-icon microphone" }), r.l.createElement(_.a, { "className": "btn-icon video" })))), r.l.createElement(n.a, { "className": "person-item" }, r.l.createElement(m.a, { "className": "portrait", "src": "https://ts1.cn.mm.bing.net/th/id/R-C.61422bb47b242a0c0232f2136654b297?rik=AQBG2SuIOgDpxg&riu=http%3a%2f%2fwww.bingguner.com%2fupimg%2fallimg%2f200518%2f20-20051QS516358.jpg&ehk=L2tP22YWuozmRUYY50gUeQbzm28tsZyi6zQmEgupcCg%3d&risl=&pid=ImgRaw&r=0" }), r.l.createElement(_.a, { "className": "right-section" }, r.l.createElement(_.a, { "className": "txt-wrap" }, r.l.createElement(_.a, { "className": "name-txt" }, "王子建"), r.l.createElement(_.a, { "className": "role" }, "(书记员、我)")), r.l.createElement(_.a, { "className": "btns" }, r.l.createElement(_.a, { "className": "btn-icon microphone" }), r.l.createElement(_.a, { "className": "btn-icon video" })))), r.l.createElement(n.a, { "className": "person-item" }, r.l.createElement(m.a, { "className": "portrait", "src": "https://ts1.cn.mm.bing.net/th/id/R-C.61422bb47b242a0c0232f2136654b297?rik=AQBG2SuIOgDpxg&riu=http%3a%2f%2fwww.bingguner.com%2fupimg%2fallimg%2f200518%2f20-20051QS516358.jpg&ehk=L2tP22YWuozmRUYY50gUeQbzm28tsZyi6zQmEgupcCg%3d&risl=&pid=ImgRaw&r=0" }), r.l.createElement(_.a, { "className": "right-section" }, r.l.createElement(_.a, { "className": "txt-wrap" }, r.l.createElement(_.a, { "className": "name-txt" }, "王子建"), r.l.createElement(_.a, { "className": "role" }, "(书记员、我)")), r.l.createElement(_.a, { "className": "btns" }, r.l.createElement(_.a, { "className": "btn-icon microphone" }), r.l.createElement(_.a, { "className": "btn-icon video" })))))) } }]), ParticipantsDrawer }(), H = F = Object(i.a)([Object(I.b)("pageInfoStore"), I.c], F), x = function () { function defineProperties(e, t) { for (var A = 0; A < t.length; A++) { var r = t[A]; r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r) } } return function (e, t, A) { return t && defineProperties(e.prototype, t), A && defineProperties(e, A), e } }(); var q = function (e) { function CourtInfoDrawer(e) { !function CourtInfoDrawer_classCallCheck(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, CourtInfoDrawer); var t = function CourtInfoDrawer_possibleConstructorReturn(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }(this, (CourtInfoDrawer.__proto__ || Object.getPrototypeOf(CourtInfoDrawer)).call(this, e)); return t.state = {}, t } return function CourtInfoDrawer_inherits(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t); e.prototype = Object.create(t && t.prototype, { "constructor": { "value": e, "enumerable": !1, "writable": !0, "configurable": !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) }(CourtInfoDrawer, o["default"].Component), x(CourtInfoDrawer, [{ "key": "componentWillMount", "value": function componentWillMount() { } }, { "key": "render", "value": function render() { var e = this.props, t = e.show, A = e.onClose; return r.l.createElement(d.a, { "title": "庭审信息", "show": t, "contBgColor": "#F3F3F3", "onClose": A }, r.l.createElement(n.a, { "className": "court-info-wrap" }, r.l.createElement(n.a, { "className": "court-info" }, r.l.createElement(n.a, { "className": "court-info-title" }, "(仲）粤代9329402号", r.l.createElement(n.a, { "className": "middle-tag recording-tag" }, "全程录制中")), r.l.createElement(n.a, { "className": "info-item" }, "申请人：", r.l.createElement(n.a, { "className": "value" }, "xll | 王思聪 | 166****5471")), r.l.createElement(n.a, { "className": "info-item" }, "仲裁员：", r.l.createElement(n.a, { "className": "value" }, "王思聪")), r.l.createElement(n.a, { "className": "info-item" }, "书记员：", r.l.createElement(n.a, { "className": "value" }, "刘亦菲")), r.l.createElement(n.a, { "className": "info-item" }, "争议金额：", r.l.createElement(n.a, { "className": "value money" }, "156,100")), r.l.createElement(n.a, { "className": "info-item" }, "开庭时间：", r.l.createElement(n.a, { "className": "value" }, "2023-03-09  09:00"))), r.l.createElement(n.a, { "className": "divider" }), r.l.createElement(n.a, { "className": "court-info" }, r.l.createElement(n.a, { "className": "court-info-title" }, "网络连接", r.l.createElement(n.a, { "className": "middle-tag net-status-tag" }, "正常")), r.l.createElement(n.a, { "className": "info-item" }, "延迟：", r.l.createElement(n.a, { "className": "value" }, "21ms")), r.l.createElement(n.a, { "className": "info-item" }, "路由器延迟：", r.l.createElement(n.a, { "className": "value" }, "21ms")), r.l.createElement(n.a, { "className": "info-item" }, "丢包率：", r.l.createElement(n.a, { "className": "value" }, r.l.createElement(_.a, { "className": "rise" }, "↑"), "0.0%", r.l.createElement(_.a, { "className": "fall" }, "↓"), "0.0%"))))) } }]), CourtInfoDrawer }(), Y = q = Object(i.a)([Object(I.b)("pageInfoStore"), I.c], q), J = function () { function defineProperties(e, t) { for (var A = 0; A < t.length; A++) { var r = t[A]; r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r) } } return function (e, t, A) { return t && defineProperties(e.prototype, t), A && defineProperties(e, A), e } }(), K = function get(e, t, A) { null === e && (e = Function.prototype); var r = Object.getOwnPropertyDescriptor(e, t); if (void 0 === r) { var i = Object.getPrototypeOf(e); return null === i ? void 0 : get(i, t, A) } if ("value" in r) return r.value; var o = r.get; return void 0 !== o ? o.call(A) : void 0 }; var Z = function (e) { function Court(e) { !function court_classCallCheck(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, Court); var t = function court_possibleConstructorReturn(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }(this, (Court.__proto__ || Object.getPrototypeOf(Court)).call(this, e)); return t.hashchangeCallBack = function () { console.log("hashchange", window.location.hash) }, t.handlePopstate = function () { console.log("xll--------handlePopstate"), t.setState({ "backRemindShow": !0 }) }, t.onBackBtnClick = function () { t.setState({ "backRemindShow": !0 }) }, t.onBack = function () { Object(E.a)() ? window.wx.miniProgram.navigateBack({ "delta": 1 }) : o.default.navigateBack({ "delta": 1 }) }, t.onClick = function (e) { t.setState({ "current": e }) }, t.onAlertConfirm = function () { t.setState({ "alertShow": !1 }), console.log(t.audioVideoRef) }, t.audioVideoRef = null, t.state = { "current": 0, "alertShow": !0, "personDrawerShow": !1, "courtInfoShow": !1, "backRemindShow": !1 }, t } return function court_inherits(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t); e.prototype = Object.create(t && t.prototype, { "constructor": { "value": e, "enumerable": !1, "writable": !0, "configurable": !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) }(Court, o["default"].Component), J(Court, [{ "key": "componentWillMount", "value": function componentWillMount() { } }, { "key": "componentDidMount", "value": function componentDidMount() { Object(h.a)("light"), console.log("componentDidMount") } }, { "key": "componentWillUnmount", "value": function componentWillUnmount() { } }, { "key": "render", "value": function render() { var e = this, t = this.state, A = t.current, i = t.alertShow, h = t.personDrawerShow, I = t.courtInfoShow, E = t.backRemindShow; return r.l.createElement(l.a, { "title": "视频庭审", "pageBgColor": "#05152B", "headerType": "light", "back": !0, "onBack": this.onBackBtnClick }, r.l.createElement(n.a, { "className": "court-page" }, r.l.createElement(n.a, { "className": "court-time" }, "00:12"), r.l.createElement(s.a, { "className": "txt-btn quit-btn", "onClick": this.onBackBtnClick }, "退出"), r.l.createElement(a.a, { "animated": !1, "swipeable": !1, "current": A, "tabList": [{ "title": "庭审" }, { "title": "举证" }, { "title": "笔录" }], "onClick": this.onClick.bind(this) }, r.l.createElement(c.a, { "current": A, "index": 0 }, r.l.createElement(O, { "ref": function ref(t) { e.audioVideoRef = t, console.log(t) } })), r.l.createElement(c.a, { "current": A, "index": 1 }, r.l.createElement(C.a, { "light": !0 })), r.l.createElement(c.a, { "current": A, "index": 2 }, r.l.createElement(U, null))), 2 !== A && r.l.createElement(n.a, { "className": "conference-btns" }, r.l.createElement(n.a, { "className": "btn-wrap" }, r.l.createElement(n.a, { "className": "icon-btn microphone off" }), r.l.createElement(n.a, { "className": "txt" }, "静音")), r.l.createElement(n.a, { "className": "btn-wrap" }, r.l.createElement(n.a, { "className": "icon-btn video off" }), r.l.createElement(n.a, { "className": "txt" }, "停止视频")), r.l.createElement(n.a, { "className": "btn-wrap", "onClick": function onClick() { console.log("click"), e.setState({ "personDrawerShow": !0 }) } }, r.l.createElement(n.a, { "className": "icon-btn persons" }), r.l.createElement(n.a, { "className": "txt" }, "人员(4)")), r.l.createElement(n.a, { "className": "btn-wrap", "onClick": function onClick() { console.log("click"), e.setState({ "courtInfoShow": !0 }) } }, r.l.createElement(n.a, { "className": "icon-btn file" }), r.l.createElement(n.a, { "className": "txt" }, "庭审信息")))), r.l.createElement(Y, { "show": I, "onClose": function onClose() { e.setState({ "courtInfoShow": !1 }) } }), r.l.createElement(H, { "show": h, "onClose": function onClose() { e.setState({ "personDrawerShow": !1 }) } }), r.l.createElement(d.a, { "title": "证据材料", "show": !1, "contBgColor": "#F3F3F3", "onClose": function onClose() { e.setState({ "courtInfoShow": !1 }) } }, r.l.createElement(g.a, { "src": f.a, "style": { "height": o.default.pxTransform(1020) } })), r.l.createElement(u.a, { "type": "text", "isOpened": i, "title": "注意事项", "content": "文案以产品提供为准：<br>1. 需准备带摄像头和麦克的台式机或者笔记本，摄像头像素清晰，麦克能够正常使用；建议最好准备耳机。<br>2. 使用移动设备的当事人请注意： 1)请自行准备智能手机； 2)电脑<br>3. 网上庭审过程中请保持网络畅通。<br>4. 庭审开始前请提前测试声音、图像等各项功能，保证开庭过程中能够正常使用。 ", "confirmText": "我知道了", "className": "text-modal", "closeOnClickOverlay": !1, "onConfirm": this.onAlertConfirm }), r.l.createElement(u.a, { "isOpened": E, "title": "庭审正在进行中…", "content": "确认退出吗？", "confirmText": "暂不退出", "cancelText": "确认退出", "className": "confirm-modal", "closeOnClickOverlay": !1, "onCancel": this.onBack, "onConfirm": function onConfirm() { e.setState({ "backRemindShow": !1 }) } })) } }, { "key": "componentDidShow", "value": function componentDidShow() { K(Court.prototype.__proto__ || Object.getPrototypeOf(Court.prototype), "componentDidShow", this) && K(Court.prototype.__proto__ || Object.getPrototypeOf(Court.prototype), "componentDidShow", this).call(this) } }, { "key": "componentDidHide", "value": function componentDidHide() { K(Court.prototype.__proto__ || Object.getPrototypeOf(Court.prototype), "componentDidHide", this) && K(Court.prototype.__proto__ || Object.getPrototypeOf(Court.prototype), "componentDidHide", this).call(this) } }]), Court }(); Z = Object(i.a)([Object(I.b)("pageInfoStore"), I.c], Z); t.default = Z } }]);